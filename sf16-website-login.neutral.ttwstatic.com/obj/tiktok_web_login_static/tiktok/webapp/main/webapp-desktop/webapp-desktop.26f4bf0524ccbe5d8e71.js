"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9389],{36061:(e,t,i)=>{i.d(t,{Z:()=>r});var o=i(11040),n=i(91051),a=i(79067);const s={id:"qr-code-wrapper-4b0509e8",use:"qr-code-wrapper-4b0509e8-usage",viewBox:"0 0 200 200",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" id="qr-code-wrapper-4b0509e8"><path fill="#161823" fill-rule="evenodd" d="M189.562 1.164a9.278 9.278 0 0 1 9.279 9.279v11.546a1.031 1.031 0 0 1-2.062 0V10.443a7.217 7.217 0 0 0-7.217-7.217h-11.546a1.031 1.031 0 0 1 0-2.062h11.546Z" clip-rule="evenodd" /><path fill="#25F4E8" fill-rule="evenodd" d="M188.394 0a9.278 9.278 0 0 1 9.279 9.278v11.547a1.031 1.031 0 0 1-2.062 0V9.278a7.217 7.217 0 0 0-7.217-7.216h-11.546a1.031 1.031 0 0 1 0-2.062h11.546Z" clip-rule="evenodd" style="mix-blend-mode:multiply" /><path fill="#FE2C55" fill-rule="evenodd" d="M190.722 2.328A9.278 9.278 0 0 1 200 11.606v11.547a1.03 1.03 0 1 1-2.061 0V11.606a7.217 7.217 0 0 0-7.217-7.216h-11.546a1.03 1.03 0 1 1 0-2.062h11.546Z" clip-rule="evenodd" style="mix-blend-mode:multiply" /><path fill="url(#pattern0)" d="M12.675 12.674h174.656v174.651H12.675V12.674Z" /><path fill="white" d="M80.931 81.443h38.146v38.144H80.931V81.443Z" /><path fill="#161823" fill-rule="evenodd" d="M1.163 10.443a9.278 9.278 0 0 1 9.279-9.279h11.546a1.03 1.03 0 1 1 0 2.062H10.442a7.216 7.216 0 0 0-7.217 7.217v11.546a1.031 1.031 0 1 1-2.062 0V10.443Z" clip-rule="evenodd" /><path fill="#25F4E8" fill-rule="evenodd" d="M0 9.278A9.278 9.278 0 0 1 9.277 0h11.546a1.031 1.031 0 1 1 0 2.062H9.278A7.216 7.216 0 0 0 2.06 9.278v11.547a1.03 1.03 0 0 1-2.062 0V9.278Z" clip-rule="evenodd" style="mix-blend-mode:multiply" /><path fill="#FE2C55" fill-rule="evenodd" d="M2.327 11.606a9.278 9.278 0 0 1 9.279-9.278h11.546a1.031 1.031 0 1 1 0 2.062H11.606a7.216 7.216 0 0 0-7.217 7.216v11.547a1.03 1.03 0 0 1-2.062 0V11.606Z" clip-rule="evenodd" style="mix-blend-mode:multiply" /><path fill="#161823" fill-rule="evenodd" d="M198.841 189.558a9.278 9.278 0 0 1-9.279 9.278h-11.546a1.03 1.03 0 1 1 0-2.062h11.546a7.217 7.217 0 0 0 7.217-7.216v-11.547a1.03 1.03 0 0 1 2.062 0v11.547Z" clip-rule="evenodd" /><path fill="#25F4E8" fill-rule="evenodd" d="M197.673 188.393a9.278 9.278 0 0 1-9.278 9.278h-11.547a1.03 1.03 0 1 1 0-2.061h11.547a7.217 7.217 0 0 0 7.216-7.217v-11.546a1.03 1.03 0 1 1 2.062 0v11.546Z" clip-rule="evenodd" style="mix-blend-mode:multiply" /><path fill="#FE2C55" fill-rule="evenodd" d="M200.001 190.722a9.278 9.278 0 0 1-9.279 9.278h-11.546a1.032 1.032 0 0 1 0-2.062h11.546a7.217 7.217 0 0 0 7.217-7.216v-11.547a1.03 1.03 0 1 1 2.062 0v11.547Z" clip-rule="evenodd" style="mix-blend-mode:multiply" /><path fill="#161823" fill-rule="evenodd" d="M10.442 198.836a9.278 9.278 0 0 1-9.279-9.278v-11.546a1.03 1.03 0 1 1 2.062 0v11.546a7.216 7.216 0 0 0 7.217 7.216h11.546a1.031 1.031 0 0 1 0 2.062H10.442Z" clip-rule="evenodd" /></symbol>'};function r(e){const t=(0,n.useContext)(a.e);return(0,n.useLayoutEffect)((()=>(t.add(s),()=>{t.remove("qr-code-wrapper-4b0509e8")})),[]),(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,o.jsx)("use",{xlinkHref:"#qr-code-wrapper-4b0509e8"},void 0)}),void 0)}},34700:(e,t,i)=>{i.d(t,{Z:()=>r});var o=i(11040),n=i(91051),a=i(79067);const s={id:"tip_arrow_white-99f4b53c",use:"tip_arrow_white-99f4b53c-usage",viewBox:"0 0 24 8",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 8" id="tip_arrow_white-99f4b53c"><path d="M0 8c7 0 10-8 12-8s5 8 12 8z" /></symbol>'};function r(e){const t=(0,n.useContext)(a.e);return(0,n.useLayoutEffect)((()=>(t.add(s),()=>{t.remove("tip_arrow_white-99f4b53c")})),[]),(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,o.jsx)("use",{xlinkHref:"#tip_arrow_white-99f4b53c"},void 0)}),void 0)}},3980:(e,t,i)=>{i.d(t,{m:()=>a,f:()=>s});var o=i(11040),n=i(91051);const a=(0,n.createContext)(null),s=(0,n.memo)((({videoId:e,children:t})=>{const[i,s]=(0,n.useState)(e),[r,l]=(0,n.useState)(""),[d,c]=(0,n.useState)(0),u=(0,n.useCallback)((e=>{s(e)}),[]),p=(0,n.useCallback)((e=>{l(e)}),[]),g=(0,n.useCallback)((()=>{c(d+1)}),[d]),h=(0,n.useMemo)((()=>({videoId:i,authorId:r,videoCount:d,setVideoId:u,setAuthorId:p,setVideoCountPlusOne:g})),[r,i,p,g,u,d]);return(0,o.jsx)(a.Provider,Object.assign({value:h},{children:t}),void 0)}))},39729:(e,t,i)=>{i.d(t,{gS:()=>o,f8:()=>n,$s:()=>a});const o=["Webapp"],n={video:"video_detail",user:"others_homepage",music:"single_song",challenge:"challenge",home:"homepage_hot",foryou:"homepage_hot",foryouWithLang:"homepage_hot",following:"homepage_follow",topics:"topic",expansion:"discover_kw",discovery:"discover_kw",searchHome:"general_search",searchUser:"search_user",searchVideo:"search_video",discover:"discovery",setting:"setting",settingBlockList:"setting",settingDownLoadYourData:"setting",feedback:"feedback",feedbackHistory:"feedback_history",feedbackReport:"feedback_report",question:"qa_detail",musicPlaylist:"music_playlist",poi:"poi_detail",collection:"collection",messages:"messages",channel:"channel",profile:"personal_homepage",inbox:"homepage_message",explore:"explore_page",videoPlaylist:"playlist",searchReminder:"search_reminder",searchLive:"search_live"},a=new Map},21985:(e,t,i)=>{i.d(t,{U:()=>a,W:()=>s});var o=i(21041),n=i(22597);const a=()=>{const{pathname:e}=(0,o.TH)();return{isDetailPage:(0,n.ws)(e)||(0,n.Dj)(e)||(0,n.bf)(e)||(0,n.u7)(e)||(0,n.cQ)(e)||(0,n.wy)(e)||(0,n.Qu)(e)||(0,n.Ho)(e)}},s=()=>{const{pathname:e}=(0,o.TH)();return{isFeedbackPage:(0,n.dD)(e)}}},6106:(e,t,i)=>{i(77173);var o=i(60998),n=i(14716),a=i(28502);const s=()=>{var e,t,i;const o=null===(t=null===(e=window.performance)||void 0===e?void 0:e.getEntriesByType)||void 0===t?void 0:t.call(e,"navigation")[0];return Math.ceil(null!==(i=null==o?void 0:o.responseStart)&&void 0!==i?i:0)},r=()=>Math.ceil(performance.now()),l=new class{constructor(){this.allowRepeat=!1,this.eventAlreadySent={},this.stop=!1}init({pageName:e,device:t,sender:i,sendConfig:o}){this.sender=i,this.path=window.location.pathname,this.pageName=e,this.device=t,o&&this.handleConfigGlobal(o)}config({sender:e}){this.sender=e}getCommonParams(e,t){var i,o,n,a;return{page_name:null!==(o=null!==(i=this.pageName)&&void 0!==i?i:e)&&void 0!==o?o:"",last_event:null!==(n=this.lastEvent)&&void 0!==n?n:"",duration:r(),device:null!==(a=this.device)&&void 0!==a?a:"",userAgent:null!=t?t:window.navigator.userAgent}}send(e,t,i){this.sender?(((null==i?void 0:i.forceSend)||this.allowSend(e))&&this.sender(e,Object.assign(Object.assign({},t),this.getCommonParams())),this.updateStatus(e),this.lastEvent=e):console.error("Send ARM events before initialized")}handleConfigGlobal(e){const{allowRepeat:t}=e;this.allowRepeat=t}allowSend(e){const{stop:t,path:i,allowRepeat:o,eventAlreadySent:n}=this,a=window.location.pathname;return!(t||a!==i||!o&&n[e])}updateStatus(e){const t=window.location.pathname;this.stop=this.stop||t!==this.path,this.eventAlreadySent[e]=!0}};var d=i(1668),c=i(18645),u=i(11040),p=i(41697),g=i(74820),h=i(3198),m=i(96042),_=i(43226),v=i.n(_),y=i(32667),b=i(64047),f=i(12579),x=i(57244),w=i(35167),k=i(64634),S=i(67779),C=i(14789),j=i(55187);const T=new f.O("jotaiStore");let I=class{constructor(e){this.jotaiStore=e}getJotaiStore(){return this.jotaiStore}};I=(0,b.__decorate)([(0,x.G)(),(0,b.__param)(0,(0,w.t)(T)),(0,b.__metadata)("design:paramtypes",[Object])],I);var P=i(22296),O=i(25185),L=i(11467);const M=["fetch"],E=["includes"],A=["values","entries","getOwnPropertyDescriptors"];var D=i(74199),F=i(59002),R=i.n(F),B=i(45601),N=i(97115),W=i(72679);const U={isPhoenix:"object"==typeof window&&"www.tiktok.in"===window.location.host,textReplace:"undefined"==typeof window?null:new(i(93905).Z)({condition:{APPID:"8660"},tccUrl:"https://sf16-tcc-tos-sg.byteoversea.com/obj/tcc-config-web-alisg/tcc-v2-data-webcast.starling.proxy-default"}),loadTcc(){return this.isPhoenix?this.textReplace.getWithCache("webapp-phoenix-tcc"):Promise.resolve()},getPlugin:e=>({type:"postProcessor",name:"text-replace-plugin",process:(t,i)=>U.textReplace.processSync(t,e,i)}),getProcessName(){return this.isPhoenix?["text-replace-plugin"]:void 0}};function q(e,t){const i=o.n.getInstance(L.n),n=[];return new Promise(((o,a)=>{U.loadTcc().then((s=>{(U.isPhoenix?P.ZP.use(U.getPlugin(s)):P.ZP).init({debug:!1,fallbackLng:["en"],initImmediate:!0,defaultNS:null!=t?t:"Webapp",postProcess:U.getProcessName(),saveMissing:!0,missingKeyHandler:(e,t,o,a)=>{n.includes(o)||(console.warn("[i18n] missing key",e,t,o,a),i.emitEvent("i18n.missingKey",{count:1},{lngs:e[0],n:t,key:o}),n.push(o))}},(e=>{e?a(e):o()})),P.ZP.setLang(e)}))}))}function z(e,t,i=!1){return(0,b.__awaiter)(this,void 0,void 0,(function*(){const{starling:o,tea:n}=(0,W.N)();return new B.Z({namespace:e,api_key:N.$h,locale:t,zoneHost:o,timeout:1e4,TEAChannelDomain:n,lazyUpdate:i}).load()}))}const $=R()(((e,t)=>{Object.entries(e).forEach((([e,i])=>{P.ZP.addResourceBundle(t,e,i,!0,!0)}))}));var H=i(16594),Z=i(66891),V=i(83138),G=i(95304),Q=i(26641),J=i(28188),Y=i(19571);function K(e){return(0,b.__awaiter)(this,void 0,void 0,(function*(){try{let t=(0,Y.bX)(J.Hx);if(!t){const i=yield(0,G.Bi)(e);if(0!==(null==i?void 0:i.statusCode))throw new Error("AppContext API response statusCode is not 0");t=i,(0,Y.JT)(J.Hx,i)}yield function(e){return(0,b.__awaiter)(this,void 0,void 0,(function*(){const t=o.n.getInstance(Q.G),i=t.getActions().init({appContext:e});t.store.dispatch(i),yield new Promise((e=>{t.state$.subscribe((t=>{t.initialized&&e()}))}))}))}(t)}catch(e){console.error(`[Fetch Base App Context Error]: ${e}`)}}))}var X=i(11477);function ee(e,t){return(0,b.__awaiter)(this,void 0,void 0,(function*(){try{if(!(0,Y.bX)(Z.lu)){const i={};yield Promise.all(t.map((t=>z(t,e,(0,X.yw)()||(0,X.ui)()).then((e=>{i[t]=e}))))),(0,Y.JT)(Z.lu,i)}}catch(e){console.error(`[Fetch Error]: translation data fetch failed: ${e}`)}}))}function te(e){const t=document.querySelector("#app"),i=function(e,t){const{jotaiStore:i}={},n=null!=i?i:(()=>{const e=(0,C.MT)();return Object.assign(Object.assign({},e),{get:t=>{if(t.rehydrationKey){const i=function(){var e,t;if(!window[S.xV]){let i={};try{return i=JSON.parse(null!==(t=null===(e=document.getElementById(S.$w))||void 0===e?void 0:e.textContent)&&void 0!==t?t:"{}"),window[S.xV]=i}catch(e){console.error("error while parsing rehydration data")}}return window[S.xV]}();if(i){const o=i[t.rehydrationKey];if(o&&"init"in t){const i=t;(0,j.Nn)(e,i,o)}}}return e.get(t)}})})();return o.n.addProvider({provide:T,useValue:n}),()=>(0,u.jsx)(k.zt,Object.assign({store:n},{children:e}))}((0,u.jsx)(e,{},void 0));if("1"===(null==t?void 0:t.dataset.csr))(0,y.render)((0,u.jsx)(O.Qj.Provider,Object.assign({value:!0},{children:(0,u.jsx)(i,{},void 0)}),void 0),t);else{const e=(0,p.Z)({key:"tiktok"});(0,y.hydrate)((0,u.jsx)(g.C,Object.assign({value:e},{children:(0,u.jsx)(i,{},void 0)}),void 0),t)}}var ie=i(22612),oe=i.n(ie),ne=i(79067);class ae{constructor(){this.sprites=new Map,this.domParser=new DOMParser;const e=document.querySelector("#svg-sprite-container");e?this.$root=e:(this.$root=this.domParser.parseFromString(`<svg ${ae.defaultConfig.map((([e,t])=>`${e}="${t}"`)).join(" ")}></svg>`,"image/svg+xml").childNodes[0],document.body.prepend(this.$root)),this.restore()}add({id:e,content:t}){if(this.sprites.has(e)){const{initialCount:t=0,count:i,content:o}=this.sprites.get(e);return t>0?void this.sprites.set(e,{initialCount:t-1,count:i,content:o}):void this.sprites.set(e,{count:i+1,content:o})}this.sprites.set(e,{count:1,content:t});const i=this.domParser.parseFromString(t,"text/xml");i.firstChild&&this.$root.appendChild(i.firstChild)}remove(e){if(!this.sprites.has(e))return;const{count:t,content:i}=this.sprites.get(e);if(t>1)return void this.sprites.set(e,{count:t-1,content:i});this.sprites.delete(e);const o=this.$root.querySelector(`#${e}`);o&&o.remove()}serialize(){return this.$root.innerHTML}restore(){this.$root.hasChildNodes()&&this.$root.childNodes.forEach((e=>{var t,i;if("symbol"!==e.tagName)return;const o=null!==(t=e.getAttribute("id"))&&void 0!==t?t:"",n=Number(null!==(i=e.getAttribute("data-count"))&&void 0!==i?i:"0");this.sprites.set(o,{initialCount:n,count:n,content:e.outerHTML})}))}}ae.defaultConfig=[["xmlns","http://www.w3.org/2000/svg"],["xmlns:xlink","http://www.w3.org/1999/xlink"],["style","position: absolute; width: 0; height: 0"],["aria-hidden","true"],["id","svg-sprite-container"]];var se=i(9236),re=i(22763),le=i(66967),de=i(91051),ce=i(98154),ue=i(21041),pe=i(2844),ge=i(97751),he=i(891);const me={MT_Analytics:null,WebApp_Login:null,MT_Reflow:null,Webapp:null},_e={MT_Analytics:null,WebApp_Login:null,MT_Reflow:null,Webapp:null},ve=({children:e,t,initialNamespaces:i,translations:o=me})=>{const[n,a,s]=(0,he.Ay)(Z.lu,o),r=(0,de.useRef)(n),[l]=(0,de.useState)((0,H.G3)()),d=(0,de.useCallback)((e=>Boolean(e&&r.current[e])),[]),c=(0,de.useCallback)(((e,t)=>(0,b.__awaiter)(void 0,void 0,void 0,(function*(){try{if(!r.current[e]){_e[e]||(_e[e]=z(e,t));const i=yield _e[e];P.ZP.addResourceBundle(l,e,i,!0,!0),r.current=Object.assign(Object.assign({},r.current),{[e]:i})}return!0}catch(e){return console.error("[I18nContext] load starling error",e),!1}}))),[a]),p=(0,de.useMemo)((()=>null!=t?t:P.ZP.t),[t]),g=(0,de.useMemo)((()=>({t:p,hasLoaded:d,loadStarling:c,initialNamespaces:i,lang:l})),[d,i,l,c,p]);return $(n,l),(0,u.jsxs)(Z.LX.Provider,Object.assign({value:g},{children:[e,(0,u.jsx)(s,{data:n},void 0)]}),void 0)};var ye=i(39664),be=i(74469),fe=i(99603),xe=i(4589),we=i(34685),ke=i.n(we);var Se=i(22597);function Ce(e){return(0,Se.Dj)(e)||(0,Se.Io)(e)||(0,Se.FZ)(e)||(0,Se.oC)(e)||(0,Se.ws)(e)||(0,Se.cQ)(e)||(0,Se.bf)(e)&&!(0,Se.TO)(e)||(0,Se.I8)(e)||(0,Se.TX)(e)||(0,Se.Gc)(e)||(0,Se.at)(e)||(0,Se.jb)(e)||(0,Se.$4)(e)||(0,Se.u7)(e)||(0,Se.wy)(e)||(0,Se.Qu)(e)||(0,Se.Ho)(e)||(0,Se.T7)(e)||(0,Se.PX)(e)||(0,Se.Gk)(e)||(0,Se.dD)(e)||(0,Se.ll)(e)||(0,Se.O2)(e)}var je=i(28626),Te=i(43291),Ie=i(38149);function Pe(){window.location.reload()}function Oe(){return(0,u.jsx)(Te.Z,{width:90,height:90,fill:"rgba(128, 130, 133, 1)"},void 0)}const Le=(0,je.Z)("div",{target:"e7iph6u0"})({height:"100vh",display:"flex",flexDirection:"column"},"label:DivContainer;");function Me(){const{t:e}=(0,de.useContext)(Z.LX);return(0,u.jsx)(Le,{children:(0,u.jsx)(Ie.T,{isFullScreen:!0,onButtonClick:Pe,iconElem:Oe,title:e("Page not available"),desc:e("server_error_sub"),buttonText:e("try_again_btn")},void 0)},void 0)}function Ee({children:e,supportRoutes:t}){const i=function(e,t){const i=(0,xe.lX)(t);function o(t){return(o,n)=>{const{pathname:a,href:s}=function(e){if("string"==typeof e){const t=new URL(e,window.location.origin);return{pathname:t.pathname,href:t.href}}const{pathname:t="",search:i="",hash:o=""}=e;return{pathname:t,href:`${t}${i}${o}`}}(o);!function(e,t){return t.some((t=>ke()(t).test(e)))}(a,e)?t?window.location.replace(s):window.location.href=s:t?i.replace(o,n):i.push(o,n)}}return Object.create(i,{push:{enumerable:!0,value:o(!1)},replace:{enumerable:!0,value:o(!0)}})}(t);return(0,u.jsx)(ue.F0,Object.assign({history:i},{children:e}),void 0)}function Ae({children:e}){const t=(0,ue.k6)();return(0,u.jsx)(re.o,Object.assign({history:t},{children:e}),void 0)}function De({children:e}){const{isMobile:t}=(0,se.mp)(pe.r,{selector:e=>{var t;return{isMobile:null===(t=e.bizContext)||void 0===t?void 0:t.isMobile}},dependencies:[]}),{pathname:i}=(0,ue.TH)(),o=Ce(i)&&!t,n=(0,de.useRef)(!1),{user:a}=(0,se.mp)(Q.G,{selector:e=>{var t;return{user:null===(t=e.appContext)||void 0===t?void 0:t.user}},dependencies:[]}),s=Boolean(a),r=(0,be.AO)(ge.u7),[l,d]=(0,de.useState)((()=>!!o&&(r?"dark"===r:s)));(0,de.useEffect)((()=>{let e=s;o?(n.current||"light"!==le.Z.get(ge.u7)?n.current||"dark"!==le.Z.get(ge.u7)?n.current=!0:e=!0:e=!1,le.Z.set(ge.u7,e?"dark":"light",{secure:!0,expires:300,domain:"www.tiktok.com"}),d(Boolean(e))):d(!1)}),[s,o]);const c=(0,de.useMemo)((()=>({value:l,toggle:d})),[l]);return(0,u.jsx)(fe.hb.Provider,Object.assign({value:c},{children:e}),void 0)}const Fe=({children:e,supportRoutes:t,initialNamespaces:i,errorStateComponent:o})=>{(0,de.useEffect)((()=>{(null===history||void 0===history?void 0:history.scrollRestoration)&&(history.scrollRestoration="manual")}));const[n]=(0,he.Ay)(J.Hx);return n?(0,u.jsx)(J.iz,Object.assign({value:n},{children:(0,u.jsx)(ce.B6,{children:(0,u.jsx)(ve,Object.assign({lang:n.language,initialNamespaces:i,clusterRegion:null==n?void 0:n.clusterRegion},{children:(0,u.jsx)(de.StrictMode,{children:(0,u.jsx)(Ee,Object.assign({supportRoutes:t},{children:(0,u.jsx)(Ae,{children:(0,u.jsx)(ye.rJ,{children:(0,u.jsx)(De,{children:e},void 0)},void 0)},void 0)}),void 0)},void 0)}),void 0)},void 0)}),void 0):(0,u.jsx)(g.a,Object.assign({theme:fe.XU},{children:null!=o?o:(0,u.jsx)(Me,{},void 0)}),void 0)};var Re=i(33693),Be=i(28327),Ne=i(94582),We=i(69056),Ue=i(33642),qe=i(42656),ze=i(40340),$e=i(58099),He=i(99297),Ze=i(16926),Ve=i(19334),Ge=i.n(Ve),Qe=i(17133),Je=i(58854),Ye=i(28139),Ke=i(68191),Xe=i(36488);const et=(0,Ke.Z)("a",{target:"e1k110iq0"})((({theme:e})=>(0,Xe.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",color:"TextPrimary"})),"label:ALink;");var tt=i(73566),it=i(48185),ot=i(19630),nt=i(60595),at=i(56979),st=i(49584),rt=i(21005),lt=i(99835);let dt=class extends tt.D{constructor(e){super(),this.service=e,this.defaultState={popupConfig:null}}setPopupConfig(e,t){e.popupConfig=t}getPopupConfig(e){return e.pipe((0,at.U)((e=>({locale:null!=e?e:"en"}))),(0,st.z)((({locale:e})=>this.service.getUniversalPopConfig({locale:e}).pipe((0,at.U)((({policy_notices:e})=>{var t;return this.getActions().setPopupConfig(null!==(t=null==e?void 0:e[0])&&void 0!==t?t:null)}))))),(0,rt.n)({}))}};function ct({link:e,lang:t}){return e.replace("${locale}",t)}function ut({onHide:e,report:t,popupService:i,common:{business:o,policy_version:n,style:a},action:{text:s,approve:r,operation:l,dismiss:d,link:c,extra:u,new_web_tab:p,link_type:g}}){return h=>{if(null==h||h.preventDefault(),t.handleUniversalPopClick({style:a,business:o,button_info:s}),"callback"===g||r)return i.setUniversalPopOperation({business:o,extra:u,policy_version:n,style:a,operation:null==l?void 0:l.toString()}).subscribe(),void(null==e||e());d?null==e||e():g&&"h5"!==g||!c||(p?window.open(c):window.location.href=c)}}(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],dt.prototype,"setPopupConfig",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],dt.prototype,"getPopupConfig",null),dt=(0,b.__decorate)([(0,ot.Y)("UniversalPop"),(0,b.__metadata)("design:paramtypes",[lt.Q])],dt);var pt=i(48304),gt=i(18571),ht=i(7992),mt=i(32349),_t=i(47741);function vt(e){return null==e||"number"==typeof e||"boolean"==typeof e?e:"string"==typeof e?e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):Array.isArray(e)?e.map((e=>vt(e))):"[object Object]"===Object.prototype.toString.call(e)?Object.keys(e).reduce(((t,i)=>(t[i]=vt(e[i]),t)),{}):vt(String(e))}class yt extends de.PureComponent{dynamicAddCompKey(e=[]){return e&&e.length?e.map(vt).reduce(((e,t,i)=>{var o;const[n="",a={},s]=t;return""!==n&&0!==Object.keys(a).length&&e.push((0,u.jsx)(_t.wd,Object.assign({dangerouslyExposeHtml:!0,id:null!==(o=null==s?void 0:s.name)&&void 0!==o?o:n},{children:(0,u.jsx)(_t.TV,{genericType:n,genericKey:n,schema:a},void 0)}),`${n}-${i}`)),e}),[]):null}render(){const{wrappedHead:e,metaParams:t={},jsonldList:i=[],children:o}=this.props,{title:n="",keywords:a="",description:s="",robotsContent:r="",canonicalHref:l="",alternateHref:d="",amphtmlHref:c="",applicableDevice:p="",hreflangList:g=[]}=t;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(e,{children:[n&&(0,u.jsx)("title",{children:n},void 0),a&&(0,u.jsx)("meta",{name:"keywords",content:a},"keywords"),s&&(0,u.jsx)("meta",{name:"description",content:s},"description"),r&&(0,u.jsx)("meta",{name:"robots",content:r},"robots"),p&&(0,u.jsx)("meta",{name:"applicable-device",content:p},"applicable-device"),l&&(0,u.jsx)("link",{rel:"canonical",href:l},"canonical"),c&&(0,u.jsx)("link",{rel:"amphtml",href:c},"amphtml"),d&&(0,u.jsx)("link",{rel:"alternate",media:"only screen and (max-width: 640px)",href:d},"alternate-media"),g.length?g.map((({hreflang:e,href:t})=>(0,u.jsx)("link",{rel:"alternate",hrefLang:e,href:t},e))):null,o]},void 0),this.dynamicAddCompKey(i)]},void 0)}}const bt=yt;var ft=i(53177);const xt=function({appContext:e}){const{pathname:t}=(0,ue.TH)(),{metaParams:i,jsonldList:o}=(0,se.mp)(ft.T,{selector:({metaParams:e,jsonldList:t})=>({metaParams:e,jsonldList:t}),dependencies:[t]});let n=t;try{n=encodeURI(decodeURI(t))}catch(e){}const a=(0,de.useMemo)((()=>{let t=[];const{robotsContent:o}=null!=i?i:{};if(o&&!o.includes("noindex")){const{host:i}=null!=e?e:{},o=(0,Se.Hg)(n);t=[{hreflang:"x-default",href:o?`https://${i}`:`https://${i}${n}`}],N.tF.forEach((({value:e})=>{const a=e.replace(/(^zh([_-]\w+)*)/g,"zh-Hant"),s=o?`https://${i}/${a}/`:`https://${i}${n}?lang=${a}`;t.push({hreflang:a,href:s})}))}return Object.assign(Object.assign({},i),{hreflangList:t})}),[e,i,n]);return(0,mt.Y)((()=>Promise.resolve()),[]),(0,u.jsx)(bt,{wrappedHead:ce.ql,metaParams:a,jsonldList:o},void 0)};xt.deferSSREffects=!0;var wt=i(31545);const kt=function(e){const{appContext:t}=e,{location:i}=(0,ue.k6)(),o=`https://${null==t?void 0:t.host}${i.pathname}${i.search}`,n=Object.assign(Object.assign({},(0,se.mp)(wt.k).value),{"og:url":o});return(0,mt.Y)((()=>Promise.resolve()),[]),(0,u.jsx)(ce.ql,{children:Object.keys(n).map((e=>(0,u.jsx)("meta",{property:e,content:n[e]},e)))},void 0)};kt.deferSSREffects=!0;var St=i(32273),Ct=i(28972);const jt=(0,Ke.Z)("div",{target:"eyt76ed0"})((({theme:{colors:e}})=>({width:"100vw",top:Xe.Mz-1+"px",left:"0",marginTop:"1px",position:"fixed",boxShadow:"0 2px 8px rgba(0, 0, 0, .06)",zIndex:999,background:e.BGPrimary,display:"flex",justifyContent:"center",":after":Object.assign({content:'""',background:"rgba(33, 33, 33, .08)"},(0,Xe.Cx)("bottom"))})),"label:DivBannerContainer;"),Tt=(0,Ke.Z)("div",{target:"eyt76ed1"})([{width:Xe.XP,maxWidth:Xe.XP,paddingTop:"16px",paddingBottom:"16px",display:"flex",justifyContent:"space-between"},({theme:{direction:e}})=>(0,Xe.YJ)({direction:e,paddingStart:"20px",paddingEnd:"24px"})],"label:DivBannerWrapper;"),It=(0,Ke.Z)("div",{target:"eyt76ed2"})([{display:"flex",alignItems:"center"},({theme:{direction:e}})=>(0,Xe.YJ)({direction:e,marginEnd:"24px"})],"label:DivLeftContainer;"),Pt=(0,Ke.Z)("div",{target:"eyt76ed3"})([{display:"flex",alignItems:"center"}],"label:DivRightContainer;"),Ot="48px",Lt=(0,Ke.Z)("div",{target:"eyt76ed4"})((({theme:{direction:e}})=>({":not(:empty)":Object.assign({display:"inline-block",width:Ot,height:Ot,flex:"0 0 48px",padding:"0"},(0,Xe.YJ)({direction:e,marginEnd:"16px"}))})),"label:DivImgWrapper;"),Mt=(0,Ke.Z)("img",{target:"eyt76ed5"})({width:Ot,height:Ot},"label:ImgIcon;"),Et=(0,Ke.Z)("div",{target:"eyt76ed6"})([({theme:e})=>(0,Xe.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",typography:"P2",color:"TextSecondary"}),{alignSelf:"center"}],"label:DivContentWrapper;"),At=(0,Ke.Z)("h4",{target:"eyt76ed8"})((({theme:{colors:e}})=>({color:e.TextPrimary})),"label:H4Title;"),Dt=(0,Ke.Z)(Ct.Z,{target:"eyt76ed9"})({width:"24px",height:"24px",cursor:"pointer"},"label:StyledCloseIcon;"),Ft=(0,Ke.Z)("div",{target:"eyt76ed10"})((({theme:{direction:e}})=>({margin:"9px 0","&:not(:last-of-type)":(0,Xe.YJ)({direction:e,marginEnd:"24px"})})),"label:DivButton;"),Rt=(0,Ke.Z)("a",{target:"eyt76ed11"})((({theme:e})=>[(0,Xe.GI)({theme:e,color:"Primary",typography:"P2"}),{":link, :active, :hover, :visited":{color:e.colors.Primary}},{"&:focus":{outline:"none"},"&:focus-visible":{outline:`2px solid ${e.colors.Negative}`}}]),{textDecoration:"none",whiteSpace:"nowrap",":hover":{textDecoration:"none"}},"label:AButtonLink;"),Bt=(0,de.memo)((function({title:e,content:t,icon:i,buttons:o,onShow:n}){const a=(0,St.Q)(),s=(0,de.useRef)(null),r=(0,de.useRef)(null);(0,de.useEffect)((()=>{var e,t;null==n||n(null!==(t=null===(e=s.current)||void 0===e?void 0:e.clientHeight)&&void 0!==t?t:0)}),[]);const l=(0,de.useCallback)((e=>{var t;"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),null===(t=r.current)||void 0===t||t.click())}),[]);return(0,u.jsx)(jt,Object.assign({ref:s,role:"alert"},{children:(0,u.jsxs)(Tt,{children:[(0,u.jsxs)(It,{children:[(0,u.jsx)(Lt,Object.assign({"aria-hidden":"true"},{children:i&&(0,u.jsx)(Mt,{alt:"icon",src:i},void 0)}),void 0),(0,u.jsxs)(Et,{children:[e&&(0,u.jsx)(At,{},void 0),(0,u.jsx)("p",{children:Array.isArray(t)?t.map(((e,t)=>(0,u.jsx)(de.Fragment,{children:e},t))):t},void 0)]},void 0)]},void 0),(0,u.jsx)(Pt,{children:o.map((({text:e,link:t,onClick:i,isCloseStyle:o})=>o?(0,u.jsx)("div",Object.assign({onClick:i,onKeyDown:l,ref:r,tabIndex:0,role:"button","aria-label":a("Close")},{children:(0,u.jsx)(Dt,{},void 0)}),e):(0,u.jsx)(Ft,{children:t?(0,u.jsx)(Rt,Object.assign({target:"_blank",onClick:i,rel:"noopener noreferer noreferrer",href:t},{children:e}),void 0):(0,u.jsx)(Rt,Object.assign({onClick:i},{children:e}),void 0)},e)))},void 0)]},void 0)}),void 0)})),Nt="inline-block",Wt=(0,Ke.Z)("div",{target:"e1qek5np0"})((({theme:{colors:e}})=>({width:"100vw",top:0,left:0,position:"fixed",zIndex:999,background:e.ConstBGInverse2,display:"flex",justifyContent:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, .06)",":after":Object.assign({content:'""',background:"rgba(33, 33, 33, .08)"},(0,Xe.Cx)("bottom"))})),"label:DivBannerContainer;"),Ut=(0,Ke.Z)("div",{target:"e1qek5np1"})([{width:Xe.XP,maxWidth:Xe.XP,padding:"12px 12px 12px 16px",display:"flex",justifyContent:"space-between"},({theme:{direction:e}})=>(0,Xe.YJ)({direction:e,paddingStart:"20px",paddingEnd:"24px"})],"label:DivBannerWrapper;"),qt=(0,Ke.Z)("div",{target:"e1qek5np2"})([{display:"flex",alignItems:"center"},({theme:{direction:e}})=>(0,Xe.YJ)({direction:e,marginEnd:"8px"})],"label:DivLeftContainer;"),zt=(0,Ke.Z)("div",{target:"e1qek5np3"})([{display:"flex",alignItems:"flex-start"}],"label:DivRightContainer;"),$t="48px",Ht=(0,Ke.Z)("div",{target:"e1qek5np4"})((({theme:{direction:e}})=>({":not(:empty)":Object.assign({display:Nt,width:$t,height:$t,flex:"0 0 48px",padding:"0"},(0,Xe.YJ)({direction:e,marginEnd:"16px"}))})),"label:DivImgWrapper;"),Zt=(0,Ke.Z)("img",{target:"e1qek5np5"})({width:$t,height:$t},"label:ImgIcon;"),Vt=(0,Ke.Z)("div",{target:"e1qek5np6"})((({theme:e})=>[(0,Xe.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",color:"ConstTextInverse"}),{display:Nt,fontSize:"15px",lineHeight:"18px",alignSelf:"center",a:{display:Nt,alignSelf:"center",fontSize:"15px",lineHeight:"18px",fontWeight:700,color:`${e.colors.ConstTextInverse} !important`}}]),"label:DivContentWrapper;"),Gt=(0,Ke.Z)("h4",{target:"e1qek5np7"})((({theme:e})=>[(0,Xe.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",color:"ConstTextInverse"})]),"label:H4Title;"),Qt=(0,Ke.Z)(Ct.Z,{target:"e1qek5np8"})({width:"24px",height:"24px",display:"flex",justifyContent:"center",alignItems:"center"},"label:StyledCloseIcon;"),Jt=(0,Ke.Z)("div",{target:"e1qek5np9"})((({theme:{direction:e}})=>({margin:"9px 0","&:not(:last-child)":(0,Xe.YJ)({direction:e,marginEnd:"24px"})})),"label:DivButton;"),Yt=(0,Ke.Z)("a",{target:"e1qek5np10"})((({theme:e})=>[(0,Xe.GI)({theme:e,color:"Primary",typography:"P2"})]),{textDecoration:"none",whiteSpace:"nowrap",textAlign:"center"},"label:AButtonLink;"),Kt=(0,de.memo)((function({title:e,content:t,icon:i,buttons:o,onShow:n}){const a=(0,de.useRef)(null);return(0,de.useEffect)((()=>{var e,t;null==n||n(null!==(t=null===(e=a.current)||void 0===e?void 0:e.clientHeight)&&void 0!==t?t:0)}),[]),(0,u.jsx)(Wt,Object.assign({ref:a},{children:(0,u.jsxs)(Ut,{children:[(0,u.jsxs)(qt,{children:[(0,u.jsx)(Ht,{children:i&&(0,u.jsx)(Zt,{alt:"icon",src:i},void 0)},void 0),(0,u.jsxs)(Vt,{children:[e&&(0,u.jsx)(Gt,{children:e},void 0),(0,u.jsx)("p",{children:Array.isArray(t)?t.map(((e,t)=>(0,u.jsx)(de.Fragment,{children:e},t))):t},void 0)]},void 0)]},void 0),(0,u.jsx)(zt,{children:o.map((({text:e,link:t,onClick:i,isCloseStyle:o})=>o?(0,u.jsx)("div",Object.assign({onClick:i},{children:(0,u.jsx)(Qt,{fill:"#fff"},void 0)}),e):(0,u.jsx)(Jt,{children:t?(0,u.jsx)(Yt,Object.assign({target:"_blank",onClick:i,rel:"noopener noreferer noreferrer",href:t},{children:e}),void 0):(0,u.jsx)(Yt,Object.assign({onClick:i},{children:e}),void 0)},e)))},void 0)]},void 0)}),void 0)}));var Xt=i(58641),ei=i(41928);const ti=(0,Ke.Z)("div",{target:"es36pgp0"})({pointerEvents:"auto",position:"absolute",boxSizing:"border-box",left:"0",bottom:"0",width:"100%",background:"#fff",borderRadius:"12px 12px 0 0",padding:"16px 20px 20px"},"label:DivContainer;"),ii=(0,Ke.Z)("div",{target:"es36pgp1"})({textAlign:"center",position:"relative",":not(:empty)":{paddingBottom:"16px",marginBottom:"12px","::after":Object.assign({content:'""',background:"rgba(33, 33, 33, .08)"},(0,Xe.Cx)("bottom"))}},"label:DivTitleContainer;"),oi=(0,Ke.Z)("img",{target:"es36pgp2"})({display:"inline-block"},"label:ImgIcon;"),ni=(0,Ke.Z)("h4",{target:"es36pgp3"})((({theme:e})=>(0,Xe.GI)({theme:e,typography:"P2",fontFamily:"Proxima",fontWeight:"semiBold"})),"label:H4Title;"),ai=(0,Ke.Z)("p",{target:"es36pgp4"})((({theme:e})=>(0,Xe.GI)({theme:e,typography:"P3",fontFamily:"Proxima"})),{marginBottom:"32px"},"label:PContent;"),si=(0,Ke.Z)("div",{target:"es36pgp5"})({display:"flex",width:"100%",flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},"label:DivButtonWrapper;"),ri=(0,Ke.Z)(ei.W,{target:"es36pgp6"})((({theme:{direction:e}})=>({"& + &":(0,Xe.YJ)({direction:e,marginStart:"24px"})})),"label:StyledButton;"),li=(0,de.memo)((function({icon:e,title:t,content:i,buttons:o}){return(0,u.jsx)(Xt.AR,Object.assign({compact:!0,isOpen:!0},{children:(0,u.jsxs)(ti,{children:[(0,u.jsxs)(ii,{children:[e&&(0,u.jsx)(oi,{src:e},void 0),t&&(0,u.jsx)(ni,{children:t},void 0)]},void 0),(0,u.jsx)(ai,{children:i},void 0),(0,u.jsx)(si,{children:o.map((({text:e,highlight:t,line:i,onClick:o})=>(0,u.jsx)(ri,Object.assign({size:"medium",buttonTheme:t?"primary":i?"line":"default",onClick:o},{children:e}),e)))},void 0)]},void 0)}),void 0)}));var di=i(85640);const ci=(0,Ke.Z)("div",{target:"e1uf1l9s0"})((({theme:e,theme:{colors:t}})=>[{position:"relative",width:"400px",background:t.BGTertiary,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"32px",borderRadius:"8px",whiteSpace:"pre-line"},(0,Xe.GI)({theme:e,fontFamily:"Proxima"})]),"label:DivContainer;"),ui=(0,Ke.Z)(ci,{target:"e1uf1l9s1"})({width:"84vw",maxWidth:"360px",maxHeight:"480px",overflow:"auto",paddingTop:"20px"},"label:DivContainerMobile;"),pi=(0,Ke.Z)("img",{target:"e1uf1l9s2"})({height:"48px"},"label:ImgIcon;"),gi=(0,Ke.Z)("h4",{target:"e1uf1l9s3"})((({theme:e})=>[(0,Xe.GI)({theme:e,typography:"P0",fontWeight:"bold"}),{textAlign:"center",padding:"0 32px",flex:"0 0 auto",order:0,wordBreak:"break-word"}]),"label:H4Title;"),hi=(0,Ke.Z)("h2",{target:"e1uf1l9s4"})((({theme:e})=>[(0,Xe.GI)({theme:e,fontWeight:"bold"}),{textAlign:"center",padding:"0 20px",flex:"0 0 auto",order:0,wordBreak:"break-word",fontSize:"20px",lineHeight:"24px"}]),"label:H2Title;"),mi=(0,Ke.Z)("p",{target:"e1uf1l9s5"})((({theme:e})=>({color:e.colors.TextSecondary,fontSize:"15px",lineHeight:"18px",padding:"0 32px",textAlign:"center",marginTop:"7px"})),"label:PContent;"),_i=(0,Ke.Z)(mi,{target:"e1uf1l9s6"})({maxHeight:"300px",overflow:"auto",padding:"0 20px"},"label:PContentMobile;"),vi=(0,Ke.Z)("div",{target:"e1uf1l9s7"})({display:"flex",width:"100%",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"24px 32px 32px"},"label:DivButtonWrapper;"),yi=(0,Ke.Z)(vi,{target:"e1uf1l9s8"})((({theme:{colors:e}})=>({borderTop:`.5px solid ${e.LineSecondary}`,padding:0,marginTop:"20px",boxSizing:"border-box"})),"label:DivButtonWrapperMobile;"),bi=(0,Ke.Z)("div",{target:"e1uf1l9s9"})({display:"flex",width:"100%",flexDirection:"column",alignItems:"center",justifyContent:"space-between",boxSizing:"border-box",padding:"22px 20px 6px"},"label:DivButtonWrapperVertical;"),fi=(0,Ke.Z)(ei.W,{target:"e1uf1l9s10"})((({theme:e,theme:{direction:t}})=>[{flex:"1 1 0%",minWidth:"initial",width:"100%",padding:"0 16px",whiteSpace:"nowrap",overflow:"hidden",":not(:first-of-type)":(0,Xe.YJ)({direction:t,marginStart:"16px"})},(0,Xe.GI)({theme:e,typography:"P2"})]),"label:StyledButton;"),xi=(0,Ke.Z)(ei.W,{target:"e1uf1l9s11"})((({theme:{colors:e}})=>[{flex:"1 1 0%",minWidth:"initial",width:"100%",padding:"0 16px",whiteSpace:"nowrap",overflow:"hidden",fontSize:"15px",lineHeight:"18px",":not(:first-child)":{marginTop:"2px",border:"none",color:e.TextTertiary}}]),"label:StyledButtonMobile;"),wi=(0,Ke.Z)(fi,{target:"e1uf1l9s12"})((({isBold:e=!1,theme:{colors:t}})=>({width:"50%",border:"none",borderRadius:0,borderRight:`.5px solid ${t.LineSecondary}`,margin:"0 !important",color:e?t.TextPrimary:t.TextTertiary})),"label:StyledButtonLine;"),ki=(0,de.memo)((function({title:e,content:t,isMobile:i=!1,icon:o,buttons:n}){const a=i&&n.some((e=>e.highlight)),s=i?a?bi:yi:vi,r=i?a?xi:wi:fi;return i?(0,u.jsx)(di.u_,Object.assign({maskCloseable:!1,visible:!0},{children:(0,u.jsxs)(ui,{children:[o&&(0,u.jsx)(pi,{src:o},void 0),e&&(0,u.jsx)(hi,{children:e},void 0),t&&(0,u.jsx)(_i,{children:t},void 0),(0,u.jsx)(s,{children:n.map((({text:e,isBold:t,highlight:i,line:o,onClick:n})=>(0,u.jsx)(r,Object.assign({isBold:t,buttonTheme:i?"primary":o?"default":"line",onClick:n},{children:e}),e)))},void 0)]},void 0)}),void 0):(0,u.jsx)(Xt.AR,Object.assign({compact:!0,closeOnBackdropClick:!1,isOpen:!0},{children:(0,u.jsxs)(ci,{children:[o&&(0,u.jsx)(pi,{src:o},void 0),e&&(0,u.jsx)(gi,{children:e},void 0),t&&(0,u.jsx)(mi,{children:t},void 0),(0,u.jsx)(s,{children:n.map((({text:e,highlight:t,line:i,onClick:o})=>(0,u.jsx)(r,Object.assign({buttonTheme:t?"primary":i?"default":"line",onClick:o},{children:e}),e)))},void 0)]},void 0)}),void 0)})),Si=function(e){var t,i;const{onHide:o}=e,[n,a]=(0,de.useState)(!0),s=(0,de.useCallback)((()=>{null==o||o(),a(!1)}),[o]),{language:r}=null!==(t=(0,Qe.Lh)((()=>["language"]),[]))&&void 0!==t?t:{},{isMobile:l}=null!==(i=(0,Je.h)((()=>["isMobile"]),[]))&&void 0!==i?i:{},d=function({onHide:e}){var t,i;const{popupConfig:o}=(0,se.mp)(dt),{language:n="en"}=null!==(t=(0,Qe.Lh)((()=>["language"]),[]))&&void 0!==t?t:{},{isMobile:a=!1}=null!==(i=(0,Je.h)((()=>["isMobile"]),[]))&&void 0!==i?i:{},s=function({onHide:e,lang:t,isMobile:i}){const{popupConfig:o}=(0,se.mp)(dt),n=(0,Ze.fz)(lt.Q),a=(0,Ze.fz)(Ye.a);return(0,de.useMemo)((()=>{if(!o)return[];const s=i?0:1,r=i?-1:0,{actions:l=[],first_button_highlight:d,business:c,policy_version:u,style:p}=o;return(d&&i?l:[...l].reverse()).map((({text:i,is_bold:o=!1,link:l,link_type:g,approve:h,extra:m,operation:_,dismiss:v,is_close_style:y,new_web_tab:b},f)=>{const x="string"==typeof l?ct({link:l,lang:t}):void 0;return{text:i,isBold:o,highlight:Boolean(d)&&s===f,line:!d||r===f,link:x,isCloseStyle:y,onClick:ut({onHide:e,report:a,popupService:n,common:{business:c,policy_version:u,style:p},action:{text:i,approve:h,dismiss:v,extra:m,link:l,link_type:g,new_web_tab:b,operation:_}})}}))}),[i,t,e,o,n,a])}({onHide:e,lang:n,isMobile:a}),r=function({lang:e,onHide:t}){const{popupConfig:i}=(0,se.mp)(dt),o=(0,Ze.fz)(lt.Q),n=(0,Ze.fz)(Ye.a);return(0,de.useMemo)((()=>{if(!i)return null;const{body_link_list:a,body:s}=i;if(!(null==a?void 0:a.length)||!/%s/.test(s))return s;const r=[],l=s;let d=0;const c=/%s/g;return a.forEach((({link:a="",name:s,dismiss:p,approve:g,operation:h,new_web_tab:m})=>{const _=c.exec(l);if(!_)return;const v=ct({link:a,lang:e}),y=ut({onHide:t,popupService:o,report:n,common:Ge()(i,["business","policy_version","style"]),action:{text:s,approve:g,dismiss:p,operation:h,new_web_tab:m,link:v}}),b=(0,u.jsx)(et,Object.assign({target:"_blank",rel:"noopener noreferer",href:v,onClick:y},{children:s}),void 0);r.push(l.slice(d,_.index)),r.push(b),d=Number(_.index)+_[0].length})),r.push(l.slice(d)),r}),[e,t,i,o,n])}({lang:n,onHide:e}),{isDark:l}=(0,g.u)();if(!o)return null;const{title:d,icon_url:c,icon_url_dark:p,body:h,style:m}=o;return{title:d,icon:l?p:c,body:h,style:m,content:r,buttons:s}}({onHide:s}),c=(0,se.qj)(dt);if((0,de.useEffect)((()=>{c.getPopupConfig(r)}),[c,r]),!d||"none"===d.style||!n)return null;const{title:p,icon:h,content:m,style:_,buttons:v}=d;switch(_){case"pc_banner":return(0,u.jsx)(Bt,{title:p,content:m,icon:h,buttons:v,onShow:e.onShow},void 0);case"mobile_banner":return(0,u.jsx)(Kt,{title:p,content:m,icon:h,buttons:v,onShow:e.onShow},void 0);case"pop":return(0,u.jsx)(ki,{isMobile:l,title:p,content:m,icon:h,buttons:v},void 0);case"float":case"bottom":return(0,u.jsx)(li,{title:p,content:m,icon:h,buttons:v},void 0);default:return null}},Ci=function({path:e}){const t=(0,de.useCallback)((()=>(window.location.href=`/404?fromUrl=${encodeURIComponent(window.location.pathname)}`,null)),[]);return(0,u.jsx)(ue.AW,{path:e,render:t},void 0)};var ji=i(55198),Ti=i(9343),Ii=i(99116);const Pi=(0,Ke.Z)("div",{target:"eaxh4gs0"})((({theme:{direction:e}})=>[{position:"relative",borderRadius:"8px",overflow:"hidden"},(0,Xe.YJ)({direction:e,start:"unset"})]),"label:DivFrameContainer;");Pi.defaultProps=Object.assign(Object.assign({},Pi.defaultProps),{"data-e2e":"login-frame"});const Oi=(0,Ke.Z)("button",{target:"eaxh4gs1"})((({theme:{direction:e}})=>[Xe.Ph,{position:"absolute",top:"24px",width:"40px",height:"40px",cursor:"pointer",background:"rgba(22, 24, 35, .06)",borderRadius:"100%",transition:"all ease-in-out 200ms",":hover":{background:"rgba(22, 24, 35, .1)"},":active":{background:"rgba(22, 24, 35, .14)"}},(0,Xe.YJ)({direction:e,end:"24px"})]),"label:ButtonCloseWrapper;"),Li=(0,Ke.Z)(Ct.Z,{target:"eaxh4gs2"})({position:"absolute",top:"8px",right:"8px",width:"24px",height:"24px"},"label:StyledXMark;"),Mi=(0,Ke.Z)("iframe",{target:"eaxh4gs3"})({overflow:"hidden",display:"block",width:"472px",height:"calc(100vh - 64px)",maxHeight:"660px",background:"transparent",border:"none"},"label:IframeLoginSite;"),Ei=function(){const[e,t]=(0,se.b7)(Ti.r),i=(0,de.useCallback)(((e="click_x")=>{t.closeModal({enter_method:e})}),[t]),o=(0,de.useCallback)((()=>{i("click_x")}),[i]),n=(0,de.useCallback)((e=>{let i="click_x";i=0===e||2===e?"click_x":"click_blank",t.closeModal({enter_method:i})}),[t]);return(0,de.useEffect)((()=>{function e(e){if("object"==typeof e.data&&e.origin===location.origin)switch(e.data.event){case"deleteSuccess":i(),window.location.href="https://www.tiktok.com/logout";break;case"loginCancel":i();break;case"hasLogin":i(),window.location.reload();break;case"loginSuccess":if(i("login_success"),e.data.message)return ji.h.open({content:e.data.message,duration:3,widthType:"half",style:{zIndex:10011}}),void setTimeout((()=>{e.data.redirectUrl&&e.data.redirectUrl!==location.href?/^https?:\/\//.test(e.data.redirectUrl)&&(window.location.href=e.data.redirectUrl):window.location.reload()}),3e3);e.data.redirectUrl&&e.data.redirectUrl!==location.href?/^https?:\/\//.test(e.data.redirectUrl)&&(window.location.href=e.data.redirectUrl):window.location.reload();break;case"hideOuterClose":t.setCloseable(!1)}}return window.addEventListener("message",e,!1),()=>{window.removeEventListener("message",e,!1)}}),[t,i]),(0,u.jsx)(di.u_,Object.assign({visible:e.isOpen,zIndex:10010,maskCloseable:!1,keyboardCloseable:e.closeable,onClose:n,popupType:e.popupType},{children:(0,u.jsxs)(Pi,{children:[e.closeable&&(0,u.jsx)(Oi,Object.assign({onClick:o},{children:(0,u.jsx)(Li,{},void 0)}),void 0),(0,u.jsx)(Mi,{src:e.url,style:e.iframeStyle},e.url)]},void 0)}),void 0)};var Ai=i(72086),Di=i(52526),Fi=i(59976),Ri=i(2861),Bi=i(55071),Ni=i(27646),Wi=i(12079),Ui=i(15777),qi=i(49907);const zi=(e,t,i)=>{const o="undefined"!=typeof window?window.innerWidth:0,n="ltr"===t?e+i-o:e-i;return"ltr"===t&&n>0||"rtl"===t&&n<0?e-n:e},$i=(e,t)=>{const i=e+37*t-("undefined"!=typeof window?window.innerHeight:0);return i>0?e-i:e},Hi=(0,Ke.Z)("ul",{target:"e5bhsb10"})((({top:e,left:t,width:i,visible:o,optionCount:n,theme:{colors:a,direction:s}})=>[{padding:"0px 0px",margin:0,minWidth:"181px",listStyle:"none",boxSizing:"border-box",borderRadius:"8px",userSelect:"none",position:"fixed",top:$i(e,n),boxShadow:"0px 8px 32px rgba(0, 0, 0, 0.12)",background:a.BGPrimary,opacity:"95%",zIndex:10500,transform:o?"scale(1)":"scale(0)"},(0,Xe.YJ)({direction:s,start:"ltr"===s?zi(t,"ltr",i):`calc(100vw - ${zi(t,"rtl",i)}px)`})]),"label:UlPopupContainer;"),Zi=(0,Ke.Z)("li",{target:"e5bhsb11"})((({theme:{colors:e}})=>[{display:"flex",alignItems:"center",position:"relative",borderBottom:"",padding:"10px 12px",boxSizing:"border-box",":hover":{background:e.BGView},cursor:"pointer",":after":{content:'""',display:"block",width:"calc(100% - 32px)",height:"0.5px",position:"absolute",bottom:0,left:"16px",background:e.ConstLineInverse2},":first-child":{borderRadius:"8px 8px 0px 0px"},":last-child":{borderRadius:"0px 0px 8px 8px",":after":{display:"none"}}}]),"label:LiItemWrapper;"),Vi=(0,Ke.Z)("div",{target:"e5bhsb12"})({width:"17px",height:"17px",display:"flex",justifyContent:"center",alignItems:"center","svg:first-of-type":{width:"16px",height:"16px"}},"label:DivIconWrapper;"),Gi=(0,Ke.Z)("span",{target:"e5bhsb13"})((({theme:e})=>[(0,Xe.GI)({theme:e,typography:"H6",fontWeight:"semiBold",fontFamily:"Proxima",color:"TextPrimary"}),{display:"inline-block",height:"17px",lineHeight:"17px",marginInlineStart:"11px"}]),"label:SpanItemText;");var Qi=i(20393),Ji=i(95872),Yi=i(32370),Ki=i(45313),Xi=i(4180);const eo=(0,de.memo)((function(){const[{contextMenuOpen:e,location:{x:t,y:i},videoInfo:{videoId:o,author:n,downloadAddr:a,videoElement:s,videoLikeHandler:r,videoCommentHandler:l,videoShareHandler:d,mediaType:c},menuOptions:p},{setContextMenuOpen:g,resetContextMenu:h}]=(0,se.b7)(Qi.vI),m=(0,St.Q)("Webapp"),_=(0,Ki.fH)({uniqueId:n,secUid:"",videoId:o}),v=`https://www.tiktok.com${_}?is_from_webapp=1&sender_device=pc`,y=(0,Ki.yl)({uniqueId:n,secUid:""}),f=(0,de.useCallback)((()=>{g(!1),h({})}),[g]);(0,de.useEffect)((()=>(e&&(document.addEventListener("click",f),document.addEventListener("scroll",f),window.addEventListener("popstate",f)),()=>{document.removeEventListener("click",f),document.removeEventListener("scroll",f),window.removeEventListener("popstate",f)})),[e]);const x=(0,de.useCallback)((()=>(0,b.__awaiter)(this,void 0,void 0,(function*(){Xi.s.handleDownload({media_type:c,enter_method:"click_context_menu"});const e=e=>(0,b.__awaiter)(this,void 0,void 0,(function*(){try{const t=yield fetch(a,e?{mode:"cors",credentials:"include"}:{}),i=yield t.blob(),o=window.URL.createObjectURL(i),n=document.createElement("a");return n.href=o,n.download="Download",document.body.appendChild(n),n.click(),setTimeout((()=>{document.body.removeChild(n),window.URL.revokeObjectURL(o)}),0),!0}catch(e){return!1}}));(yield e(!0))||(yield e(!1))}))),[a]),w={download:{text:m("TTweb_fyf_menuDownloadVideo_menuLink"),Icon:Ai.Z,handler:x},share:{text:m("TTweb_fyf_menuSendtoFriend_menuLink"),Icon:Di.Z,handler:()=>{d()}},link:{text:m("copy_link"),Icon:Fi.Z,handler:()=>(0,b.__awaiter)(this,void 0,void 0,(function*(){Xi.s.handleCopyVideoUrl({media_type:c,enter_method:"click_context_menu"}),yield navigator.clipboard.writeText(v),ji.h.open({content:m("Copied"),duration:1.2,widthType:"half",getContainer:Yi.Z,getContainerPosition:"fixed"})}))},pip:{text:m("TTweb_fyf_menuPictureinPicture_menuLink"),Icon:Ri.Z,handler:()=>(0,b.__awaiter)(this,void 0,void 0,(function*(){try{s instanceof HTMLVideoElement&&(yield s.requestPictureInPicture()),Xi.s.handlePictureInPicture({media_type:c,enter_method:"click_context_menu"})}catch(e){ji.h.open({content:m("bestir_campaign_invite_wrong"),duration:1.2,widthType:"half",getContainer:Yi.Z,getContainerPosition:"fixed"})}}))},like:{text:m("Like"),Icon:Bi.Z,handler:()=>{null==r||r()}},comment:{text:m("settings_privacy_interactions_comment"),Icon:Ni.Z,handler:()=>{null==l||l()}},details:{text:m("webAnalytics_videoDetail_viewPerformance"),Icon:Wi.Z,redirectUrl:_,teaEventName:"enter_video_detail"},user:{text:m("expansion_SEO_Vp"),Icon:Ui.Z,redirectUrl:y,teaEventName:"click_creator_profile"},photo:{text:m("ls_view_details"),Icon:Wi.Z,redirectUrl:_,teaEventName:"enter_video_detail"}},k=(0,de.useRef)(null),S=(0,de.useRef)(181),C=(e=>["download","share","link","pip","like","comment","user","details","photo"].filter((t=>e.includes(t))))(p);return(0,de.useEffect)((()=>{var e,t;S.current=null!==(t=null===(e=k.current)||void 0===e?void 0:e.scrollWidth)&&void 0!==t?t:181}),[e,t,i]),(0,u.jsx)(Hi,Object.assign({width:S.current,ref:k,visible:e,top:i,left:t,optionCount:p.length},{children:C.map((e=>{var t;const i=w[e];return i.handler?(0,u.jsxs)(Zi,Object.assign({onClick:i.handler},{children:[(0,u.jsx)(Vi,{children:(0,u.jsx)(i.Icon,{},void 0)},void 0),(0,u.jsx)(Gi,{children:i.text},void 0)]}),void 0):(0,u.jsx)(Zi,{children:(0,u.jsxs)(qi.rU,Object.assign({to:null!==(t=i.redirectUrl)&&void 0!==t?t:"",onClick:(o=i.teaEventName||"",()=>{Ji.W.event(o,{media_type:c,enter_method:"click_context_menu"})}),style:{display:"flex",textDecoration:"none"}},{children:[(0,u.jsx)(Vi,{children:(0,u.jsx)(i.Icon,{},void 0)},void 0),(0,u.jsx)(Gi,{children:i.text},void 0)]}),void 0)},void 0);var o}))}),void 0)}));var to=i(61473);const io=(0,Ke.Z)("div",{target:"eiz8q0n0"})({fontSize:"14px",fontWeight:"bold",textDecoration:"underline",cursor:"pointer"},"label:DivButton;"),oo=(0,Ke.Z)("span",{target:"eiz8q0n1"})({color:"red"},"label:SpanOverride;"),no=(0,Ke.Z)("div",{target:"eiz8q0n2"})({display:"flex"},"label:DivABTestItem;"),ao=(0,Ke.Z)("div",{target:"eiz8q0n3"})({maxHeight:"calc(100vh - 320px)",overflow:"auto",marginBottom:"13px",marginLeft:"6px"},"label:DivABTestSection;"),so=(0,Ke.Z)("div",{target:"eiz8q0n4"})({maxHeight:"130px",overflow:"auto",marginBottom:"15px",marginLeft:"6px"},"label:DivFeatureGate;"),ro=(0,Ke.Z)("div",{target:"eiz8q0n5"})({fontSize:"14px",fontWeight:"bold",marginLeft:"6px"},"label:DivTitle;"),lo=(0,Ke.Z)("div",{target:"eiz8q0n6"})((({isMobile:e})=>({position:"fixed",left:"20px",bottom:e?"60px":"20px",zIndex:1e3,background:"#bae0ff",opacity:"0.8",color:"black",fontSize:"14px",padding:"5px 10px",borderRadius:"3px"})),"label:DivWrapper;"),co=(0,de.memo)((function({name:e}){var t;const{abTestVersion:i}=null!==(t=(0,Qe.Lh)((()=>["abTestVersion"]),[]))&&void 0!==t?t:{},o=(0,He.N8)(i,e),n=(0,He.xX)(i,e);return(0,u.jsx)(oo,{children:n!==o&&`, OverRide Value:${o}`},void 0)})),uo=(0,de.memo)((function({name:e}){const t=(0,He.Sf)(e);return(0,u.jsx)("div",{children:`${e}: ${t?"On":"Off"}`},void 0)})),po=(0,de.memo)((function({isMobile:e}){var t;const[i,o]=(0,de.useState)(!1),{isDebugPanelEnable:n}=(0,He.QE)(),{abTestVersion:a}=null!==(t=(0,Qe.Lh)((()=>["abTestVersion"]),[]))&&void 0!==t?t:{},s=(0,de.useCallback)((()=>{o(!i)}),[i]);return n?(0,u.jsxs)(lo,Object.assign({isMobile:e},{children:[i&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(ro,{children:"AB Test"},void 0),(0,u.jsx)(ao,{children:a&&Object.keys(a.parameters).map(((e,t)=>{const i=a.parameters[e],o=[];return Object.keys(i).forEach((e=>{o.push(`${e}: ${i[e]}`)})),(0,u.jsxs)(no,{children:[(0,u.jsx)("div",{children:`${e}: ${o.join(", ")}`},void 0),(0,u.jsx)(co,{name:e},void 0)]},t)}))},void 0),(0,u.jsx)(ro,{children:"Feature Gates"},void 0),(0,u.jsx)(so,{children:to.y8.map(((e,t)=>(0,u.jsx)(uo,{name:e},t)))},void 0)]},void 0),(0,u.jsx)(io,Object.assign({type:"button",onClick:s},{children:i?"Hide Debug":"Show Debug"}),void 0)]}),void 0):null}));var go,ho=i(52372),mo=i.n(ho),_o=i(32863);!function(e){e.OrderDetails="ecom_email_redesign_order_details_page",e.LogisticsDetails="ecom_email_redesign_logistics_page",e.OrderRating="ecom_email_redesign_write_review_page",e.RefundDetails="ecom_email_redesign_refund_detail_page",e.RequestRefund="ecom_email_redesign_request_refund",e.Orders="ecom_email_redesign_orders",e.Vouchers="ecom_email_redesign_vouchers",e.ShoppingCart="ecom_email_redesign_shopping_cart"}(go||(go={}));const vo={title:{ecom_email_redesign_order_details_page:"email_redesign_webapp_order_details_page_title",ecom_email_redesign_logistics_page:"email_redesign_webapp_logistics_page_title",ecom_email_redesign_write_review_page:"email_redesign_webapp_write_review_page_title",ecom_email_redesign_refund_detail_page:"email_redesign_webapp_refund_detail_page_title",ecom_email_redesign_request_refund:"email_redesign_webapp_request_refund_title",ecom_email_redesign_orders:"email_redesign_webapp_orders_title",ecom_email_redesign_vouchers:"email_redesign_webapp_vouchers_title",ecom_email_redesign_shopping_cart:"email_redesign_webapp_shopping_cart_title"},desc:{ecom_email_redesign_order_details_page:"email_redesign_webapp_order_details_page_context",ecom_email_redesign_logistics_page:"email_redesign_webapp_logistics_page_context",ecom_email_redesign_write_review_page:"email_redesign_webapp_write_review_page_context",ecom_email_redesign_refund_detail_page:"email_redesign_webapp_refund_detail_page_context",ecom_email_redesign_request_refund:"email_redesign_webapp_request_refund_context",ecom_email_redesign_orders:"email_redesign_webapp_orders_context",ecom_email_redesign_vouchers:"email_redesign_webapp_vouchers_context",ecom_email_redesign_shopping_cart:"email_redesign_webapp_shopping_cart_context"}},yo=(0,Ke.Z)("div",{target:"eiv77n20"})({display:"flex",flexDirection:"column",alignItems:"center",width:"311px",padding:"40px 28px 12px",textAlign:"center",wordBreak:"break-word"},"label:DivContainer;"),bo=(0,Ke.Z)("p",{target:"eiv77n21"})((({theme:e})=>[{marginBottom:"16px",fontSize:"17px",lineHeight:"18px"},(0,Xe.GI)({theme:e,fontWeight:"semiBold"})]),"label:PTitle;"),fo=(0,Ke.Z)("p",{target:"eiv77n22"})((({theme:e})=>[{margin:"16px 0 4px",fontSize:"12px",lineHeight:"13px"},(0,Xe.GI)({theme:e,color:"TextSecondary"})]),"label:POtherDesc;"),xo=vo.title.ecom_email_redesign_order_details_page,wo=vo.desc.ecom_email_redesign_order_details_page,ko=function({url:e}){var t,i;const o=(0,St.Q)(),{search:n}=(0,ue.TH)(),[a,s]=(0,de.useState)(!0),[r,l]=(0,de.useState)(""),d=new URLSearchParams(n);(0,de.useEffect)((()=>{var e;l(null!==(e=d.get("scene"))&&void 0!==e?e:""),history.replaceState(null,"","/")}),[]);const c=(0,de.useCallback)((()=>{s(!1)}),[]);return(0,u.jsx)(di.u_,Object.assign({visible:a,onClose:c},{children:(0,u.jsxs)(yo,{children:[(0,u.jsx)(bo,{children:o(null!==(t=vo.title[r])&&void 0!==t?t:xo)},void 0),(0,u.jsx)(mo(),{size:170,value:e,style:{padding:"12px",borderRadius:"12px",border:"1px solid #f2f2f2"}},void 0),(0,u.jsx)(fo,{children:o(null!==(i=vo.desc[r])&&void 0!==i?i:wo)},void 0),(0,u.jsx)("img",{src:_o,width:131,height:40},void 0)]},void 0)}),void 0)},So={id:"tiktok-icon-e3f90ef7",use:"tiktok-icon-e3f90ef7-usage",viewBox:"0 0 88 88",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 88 88" id="tiktok-icon-e3f90ef7"><g fill-rule="evenodd" clip-path="url(#tiktok-icon-e3f90ef7_a)" clip-rule="evenodd"><path fill="#25F4EE" d="M59.338 5.009A20.23 20.23 0 0 1 58.712 0H44.313v57.2c0 6.596-5.325 11.943-11.894 11.943-6.57 0-11.894-5.347-11.894-11.943 0-6.596 5.325-11.943 11.894-11.943 1.313 0 2.575.214 3.756.608V30.432a27.04 27.04 0 0 0-3.756-.26C17.552 30.171 5.5 42.271 5.5 57.2c0 14.927 12.052 27.029 26.919 27.029 14.658 0 26.586-11.763 26.919-26.4V28.56a34.175 34.175 0 0 0 19.407 6.011V20.114c-9.342 0-17.19-6.42-19.407-15.105Z" /><path fill="black" d="M63.093 8.781a20.23 20.23 0 0 1-.626-5.009H48.069v57.2c0 6.596-5.326 11.943-11.895 11.943S24.28 67.568 24.28 60.972c0-6.596 5.325-11.943 11.894-11.943 1.313 0 2.575.214 3.756.608V34.205a27.04 27.04 0 0 0-3.756-.261c-14.867 0-26.919 12.1-26.919 27.028 0 14.928 12.052 27.029 26.92 27.029 14.657 0 26.585-11.763 26.918-26.4V32.333a34.174 34.174 0 0 0 19.407 6.01V23.888c-9.342 0-17.19-6.42-19.407-15.106Z" /><path fill="#FE2C55" d="M59.063 3.77a20.135 20.135 0 0 0 7.514 12.209 20.07 20.07 0 0 1-4.11-12.208h-3.404Zm19.68 19.762V34.57a34.174 34.174 0 0 1-19.406-6.011v29.268c-.333 14.637-12.261 26.4-26.919 26.4a26.742 26.742 0 0 1-17.069-6.128c4.937 6.044 12.432 9.9 20.824 9.9 14.658 0 26.587-11.763 26.92-26.4V32.331a34.174 34.174 0 0 0 19.406 6.01V23.886a20.02 20.02 0 0 1-3.755-.353Zm-42.569 10.41v11.921a11.837 11.837 0 0 0-3.756-.608c-6.569 0-11.894 5.347-11.894 11.943 0 4.263 2.224 8.004 5.57 10.117a11.923 11.923 0 0 1-1.815-6.344c0-6.596 5.325-11.943 11.894-11.943 1.313 0 2.576.213 3.756.607V34.203a27.044 27.044 0 0 0-3.755-.261Z" /></g><defs><clipPath id="tiktok-icon-e3f90ef7_a"><path fill="white" d="M0 0h88v88H0z" /></clipPath></defs></symbol>'};var Co=i(26890),jo=(i(45893),i(39712)),To=i(45949),Io=i(10668),Po=i(38554),Oo=i(71300),Lo=i(23434),Mo=i(98224);const Eo=()=>{const e=(0,de.useRef)(""),t=[Re.nT.searchHome,Re.nT.searchUser,Re.nT.searchVideo],{pathname:i}=(0,ue.TH)(),o=t.includes(i)&&!t.includes(e.current)||!t.includes(i),n=(0,de.useCallback)((t=>e.current=t),[]);return{needRefresh:o,setPathname:n,pathname:i}},Ao=({intersectionHandler:e,element:t,threshold:i})=>{const o=(0,de.useRef)();(0,de.useEffect)((()=>{const n=t=>{t[0].isIntersecting&&e()};try{const e={rootMargin:"0px",threshold:i};o.current=new IntersectionObserver(n,e),t.current&&o.current&&o.current.observe(t.current)}catch(e){console.error(e)}return()=>{var e;null===(e=o.current)||void 0===e||e.disconnect()}}),[])};var Do=i(97915),Fo=i(24703),Ro=i(38209),Bo=i.n(Ro),No=i(1029),Wo=i(29025),Uo=i(9472),qo=i(48659);function zo(){const{pathname:e}=(0,ue.TH)();return(0,de.useMemo)((()=>(0,ue.LX)(e,{path:qo.$J.liveGoLive,exact:!0})),[e])}var $o=i(53095),Ho=i(82346),Zo=i(68854),Vo=i(11348);let Go=class{constructor(e){this.service=e,this.reportErrorLog=e=>{var t;this.service.sendLog(null!==(t=null==e?void 0:e.stack)&&void 0!==t?t:null==e?void 0:e.message,"error")}}};Go=(0,b.__decorate)([(0,x.G)(),(0,b.__metadata)("design:paramtypes",[L.n])],Go);var Qo=i(59933),Jo=i.n(Qo);const Yo="REPORT_FIRST_FRAME_SUCCESS_FOR_OPEN_LIVE_FLAG";function Ko(){(0,To.D$)(Yo,"1")}function Xo(){(0,To.e8)(Yo)}var en;!function(e){e.TraceSuccess="live_sdk_go_live_trace_success",e.TraceError="live_sdk_go_live_trace_fail",e.CreateRoomInfoSuccess="live_sdk_create_room_info_success",e.CreateRoomInfoFail="live_sdk_craete_room_info_fail",e.GoLiveSuccess="live_sdk_openLive_success",e.GoLivePreviewFirstFrameSuccess="live_sdk_openLive_preview_first_frame_success",e.GoLivePlayerError="live_sdk_go_live_player_error",e.GoLiveError="live_sdk_openLive_error",e.GoLiveWarning="live_sdk_openLive_warning",e.GoLiveStreamkeyError="live_sdk_openLive_streamkey_error",e.GoLiveStreamurlError="live_sdk_openLive_serverUrl_error",e.EndLiveSuccess="live_sdk_end_live_success",e.EndLiveFail="live_sdk_end_live_fail",e.LoadingTooLong="live_sdk_go_live_page_loading_too_long",e.EndLiveDataSuccess="live_sdk_end_live_data_success",e.EndLiveDataFailed="live_sdk_end_live_data_fail"}(en||(en={}));let tn=class{constructor(e){this.service=e,this.defaultTag={where:"GoLive"},this.defaultMetrics={count:1},this.handlePlayerError=(e,t)=>{this.service.emitEvent("live_sdk_go_live_player_error",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{roomId:String(t),code:String(e.status),message:e.message}))},this.handleTraceSuccess=()=>{this.service.emitEvent("live_sdk_go_live_trace_success",this.defaultMetrics,this.defaultTag)},this.handleTraceError=({errorCode:e,errorMessage:t})=>{this.service.emitEvent("live_sdk_go_live_trace_fail",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleCreateRoomSuccess=()=>{this.service.emitEvent("live_sdk_openLive_success",this.defaultMetrics,this.defaultTag)},this.handleCreateRoomFirstFrameSuccess=()=>{"1"===(0,To.le)(Yo)&&(this.service.emitEvent("live_sdk_openLive_preview_first_frame_success",this.defaultMetrics,this.defaultTag),Xo())},this.reportGoLiveError=e=>{this.service.sendLog(null==e?void 0:e.message,"error")},this.handleCreateRoomFail=({errorCode:e,errorMessage:t})=>{this.service.sendLog(null!=t?t:"","error"),this.service.emitEvent("live_sdk_openLive_error",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleCreateRoomWarning=({errorCode:e,errorMessage:t})=>{this.service.emitEvent("live_sdk_openLive_warning",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleGoLiveStreamkeyError=()=>{this.service.emitEvent("live_sdk_openLive_streamkey_error",this.defaultMetrics,this.defaultTag)},this.handleGoLiveStreamurlError=()=>{this.service.emitEvent("live_sdk_openLive_serverUrl_error",this.defaultMetrics,this.defaultTag)},this.handleGetCreateRoomInfoSuccess=()=>{this.service.emitEvent("live_sdk_create_room_info_success",this.defaultMetrics,this.defaultTag)},this.handleGetCreateRoomInfoFail=({errorCode:e,errorMessage:t})=>{this.service.emitEvent("live_sdk_craete_room_info_fail",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleEndLiveSuccess=()=>{this.service.emitEvent("live_sdk_end_live_success",this.defaultMetrics,this.defaultTag)},this.handleEndLiveFail=()=>{this.service.emitEvent("live_sdk_end_live_fail",this.defaultMetrics,this.defaultTag)},this.handleLoadingTooLong=({errorCode:e,errorMessage:t})=>{this.service.emitEvent("live_sdk_go_live_page_loading_too_long",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleEndLiveDataFail=({errorCode:e,errorMessage:t})=>{this.service.emitEvent("live_sdk_end_live_data_fail",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleEndLiveDataSuccess=()=>{this.service.emitEvent("live_sdk_end_live_data_success",this.defaultMetrics,this.defaultTag)}}};function on(e){return(0,$o.z)((t=>{var i,o;return 0!==t.status_code&&(null===(i=t.data)||void 0===i?void 0:i.prompts)?((!e||e&&t.status_code&&(null==e?void 0:e(t.status_code)))&&ji.h.open({content:null===(o=t.data)||void 0===o?void 0:o.prompts,duration:3}),(0,Ho.of)(Object.assign(Object.assign({},t),{error:t}))):(0,Ho.of)(t)}))}tn=(0,b.__decorate)([(0,x.G)(),(0,b.__metadata)("design:paramtypes",[L.n])],tn);let nn=class{constructor(e){this.fetch=e,this.getLivePermission=()=>this.fetch.get("/webcast/room/live_podcast/",{baseUrlType:4}).pipe(on()),this.applyPermission=e=>this.fetch.post("/webcast/room/live_permission/apply/",{query:e,baseUrlType:4}).pipe(on()),this.getApplyInfo=e=>this.fetch.get("/webcast/room/live_permission/apply_info/",{query:e,baseUrlType:4}).pipe(on())}};nn=(0,b.__decorate)([(0,x.G)(),(0,b.__metadata)("design:paramtypes",[c.r])],nn);let an=class extends tt.D{constructor(e,t,i){super(),this.service=e,this.errorSlardar=t,this.goLiveSlardar=i,this.defaultState={}}setPermissionData(e,t){e.permissionInfo={showComputerLiveEntrance:t.showComputerLiveEntrance,hasOBSLivePermission:t.hasOBSLivePermission,hasLiveApplyPermission:t.hasLiveApplyPermission,showLiveStudio:t.showLiveStudio}}getLivePermission(e){return e.pipe((0,$o.z)((()=>this.service.getLivePermission().pipe((0,$o.z)((({data:e,error:t})=>{var i,o,n,a,s;if(t)return(0,Ho.of)(this.getActions().setPermissionData({showComputerLiveEntrance:!1,hasOBSLivePermission:!1,hasLiveApplyPermission:!1,showLiveStudio:!1}));if(null==e?void 0:e.can_be_live_podcast){const t=null!==(o=null===(i=null==e?void 0:e.live_scenario)||void 0===i?void 0:i.enable_live_third_party)&&void 0!==o&&o,r=!t&&null!==(a=null===(n=null==e?void 0:e.live_permission_apply)||void 0===n?void 0:n.enable_third_party)&&void 0!==a&&a,l=null!==(s=null==e?void 0:e.show_live_studio)&&void 0!==s&&s;return(0,Ho.of)(this.getActions().setPermissionData({showComputerLiveEntrance:t||r,hasOBSLivePermission:t,hasLiveApplyPermission:r,showLiveStudio:l}))}return(0,Ho.of)(this.getActions().setPermissionData({showComputerLiveEntrance:!1,hasOBSLivePermission:!1,hasLiveApplyPermission:!1,showLiveStudio:!1}))})),(0,Zo.K)((e=>(this.goLiveSlardar.handleTraceError({errorCode:"1001",errorMessage:e.message}),this.errorSlardar.reportErrorLog(e),Vo.E)))))))}};(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],an.prototype,"setPermissionData",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],an.prototype,"getLivePermission",null),an=(0,b.__decorate)([(0,ot.Y)("LivePermission"),(0,b.__metadata)("design:paramtypes",[nn,Go,tn])],an);var sn,rn,ln,dn,cn,un=i(35435),pn=i(93859),gn=i(10026),hn=i(5549),mn=i(20948),_n=i(87930);!function(e){e.GoLivePlayerError="livesdk_go_live_player_error",e.TakePageShow="livesdk_pm_live_takepage_show",e.ScreenshotClick="livesdk_cover_modify_screenshot_click",e.ScreenshotButtonShow="livesdk_cover_modify_screenshot_show",e.Take="livesdk_live_take",e.CoverChange="livesdk_cover_modify_click",e.WebTopicClick="livesdk_web_topic_click",e.AutoStopChange="livesdk_thirdparty_auto_stop",e.ServerUrlCopy="livesdk_server_url_copy",e.StreamKeyCopy="livesdk_stream_key_copy",e.StreamKeyChangePop="livesdk_stream_key_change_pop",e.ThirdPartyStatus="livesdk_thirdparty_status",e.ShareLinkCopy="livesdk_anchor_link_copy",e.EndLiveClick="livesdk_end_live_click",e.LiveOver="livesdk_live_over",e.AppealClick="livesdk_anchor_appeal_click",e.OBSRevokeAnchorPop="livesdk_obs_revoke_anchor_pop",e.OBSRevokeRemind="livesdk_obs_revoke_remind",e.LiveCenterEntranceShow="livesdk_anchor_live_center_entrance_show",e.LiveTakepageShow="livesdk_pm_live_takepage_show",e.LiveContentClick="livesdk_live_content_click",e.LiveContentResultShow="livesdk_live_content_result_show",e.LiveTopicClick="livesdk_live_topic_click",e.LiveMatureThemeIconClick="livesdk_mature_theme_icon_click",e.LiveMatureThemePopup="livesdk_mature_theme_popup",e.LiveMatureThemePopupClick="livesdk_mature_theme_popup_click"}(sn||(sn={})),function(e){e.FromObs="third_party",e.FromDirect="video_live"}(rn||(rn={})),function(e){e.On="on",e.Off="off"}(ln||(ln={})),function(e){e.On="on",e.Off="off"}(dn||(dn={})),function(e){e[e.Temp=0]="Temp",e[e.Permanent=1]="Permanent"}(cn||(cn={}));var vn;!function(e){e.GoLiveStreamKeyInfo="__tiktok_stream_key",e.GoLiveTopicId="goLive_topic_id",e.GoLiveGameTagId="goLive_game_tag_id",e.GoLiveTopicShow="__tiktok_topic_info",e.GoLiveEndStreamSetting="go_live_stream_setting",e.GoLivePermissionApply="go_live_permission_apply",e.HideMatureThemesRedDot="hide_go_live_mature_themes_red_dot",e.StudioDownloadVisited="studio_download_visited",e.CompleteSubscritionGuide="live_anchor_complete_subscription_guide",e.SubscriptionSubOnlyChat="live_subscription_sub_only_chat",e.SharePlatform="webapp-share-platform",e.LiveCreatorHubPopup="webapp-live-creator-hub-popup"}(vn||(vn={}));const yn=6048e5;let bn=class{constructor(){this.getGoLiveStreamKeyInfo=(e,t)=>{const i=(0,To.le)("__tiktok_stream_key");if(i){const{streamKey:e,expiration:o,roomId:n}=JSON.parse(i);if(o-Date.now()>1e3&&t===n)return{streamKey:e,expiration:o-Date.now(),roomId:n}}return{streamKey:e,roomId:t,expiration:yn}},this.setGoLiveStreamKeyInfo=(e,t)=>{const i={streamKey:e,roomId:t,expiration:Date.now()+yn};return(0,To.D$)("__tiktok_stream_key",JSON.stringify(i))},this.getGoLiveTopicId=e=>(0,To.le)("goLive_topic_id"+e),this.setGoLiveTopicId=(e,t)=>(0,To.D$)("goLive_topic_id"+t,e),this.getGoLiveGameTagId=e=>(0,To.le)("goLive_game_tag_id"+e),this.setGoLiveGameTagId=(e,t)=>(0,To.D$)("goLive_game_tag_id"+t,e),this.getGoLiveTopicShow=e=>!!e&&"0"===(0,To.le)(`__tiktok_topic_info${e}`,"0"),this.setGoLiveTopicShow=e=>(0,To.D$)(`__tiktok_topic_info${e}`,"1"),this.setGoLiveEndStreamSetting=e=>(0,To.D$)("go_live_stream_setting",e?"1":"0"),this.getGoLiveEndStreamSetting=()=>"1"===(0,To.le)("go_live_stream_setting","0"),this.setHideGoLiveMatureThemesRedDot=()=>(0,To.D$)("hide_go_live_mature_themes_red_dot","1"),this.getHideGoLiveMatureThemesRedDot=()=>"1"===(0,To.le)("hide_go_live_mature_themes_red_dot","0"),this.getLiveRoomPreviousPage=()=>{try{const{twoPrev:e}=JSON.parse((0,To.St)(ge.m8));return!(0,To.St)(ge.vN)&&e}catch(e){return!1}}}setHasAppliedPermission(e){return(0,To.D$)(`go_live_permission_apply${e}`,"1")}getHasApplyPermissionBefore(e){return"1"===(0,To.le)(`go_live_permission_apply${e}`,"0")}getHasCompleteSubscriptionGuide(){return"1"===(0,To.le)("live_anchor_complete_subscription_guide","0")}setHasCompleteSubscriptionGuide(){return(0,To.D$)("live_anchor_complete_subscription_guide","1")}getSubscriptionSubOnlyChat(){return"1"===(0,To.le)("live_subscription_sub_only_chat","0")}setSubscriptionSubOnlyChat(e){return(0,To.D$)("live_subscription_sub_only_chat",e?"1":"0")}get studioDownloadVisited(){return"1"===(0,To.le)("studio_download_visited","0")}setStudioDownloadVisited(){return(0,To.D$)("studio_download_visited","1")}getSharePlatform(e){const t=(0,To.le)("webapp-share-platform");return t?JSON.parse(t)[e]:{}}setSharePlatform(e,t){return(0,To.D$)("webapp-share-platform",JSON.stringify({[e]:t}))}sortSharePlatform(e,t){var i,o;const n=null!==(i=this.getSharePlatform(e))&&void 0!==i?i:{},a=null!==(o=n[t])&&void 0!==o?o:0;if(n[t]=a+1,a===Number.MAX_SAFE_INTEGER){const e=Object.keys(n).sort(((e,t)=>{var i,o;return(null!==(i=n[e])&&void 0!==i?i:0)-(null!==(o=n[t])&&void 0!==o?o:0)}));e.forEach(((e,t)=>{n[e]=t}))}this.setSharePlatform(e,n)}getLiveCreatorHubPopup(){return"0"===(0,To.le)("webapp-live-creator-hub-popup","0")}setLiveCreatorHubPopup(e){return(0,To.D$)("webapp-live-creator-hub-popup",e?"1":"0")}};bn=(0,b.__decorate)([(0,x.G)()],bn);var fn=i(80279),xn=i.n(fn),wn=i(90293);const kn=Object.values(qo.$J);function Sn(e){return kn.some((t=>xn()(t).test(e.replace(/\?(.*)/,""))))}var Cn;!function(e){e.VideoLive="video_live",e.ThirdParty="third_party",e.Audio="audio",e.ScreenShare="screen_share",e.SocialLive="social_live",e.LiveStudio="live_studio",e.Others="others"}(Cn||(Cn={}));var jn=i(7650);const Tn="ls_golive_livecontent_othergame",In="ls_golive_livecontent_other";var Pn=i(70526);let On=class{constructor(e){this.fetch=e,this.checkRoomAlive=e=>this.fetch.get("/webcast/room/check_alive/",{query:e,baseUrlType:4}),this.getRoomInfo=e=>this.fetch.get("/webcast/room/info/",{query:e,baseUrlType:4}),this.getTopicTagsAndGameTags=()=>this.fetch.get("/webcast/room/hashtag/list/",{baseUrlType:4}),this.sendLiveChat=e=>this.fetch.post("/webcast/room/chat/",{query:e,baseUrlType:4,headers:{"Content-Type":Pn.zv.FORM_ENCODE}}).pipe(on()),this.sendLiveEmoteChat=e=>this.fetch.post("/webcast/room/emote_chat/",{query:e,baseUrlType:4,headers:{"Content-Type":Pn.zv.FORM_ENCODE}}).pipe(on())}};On=(0,b.__decorate)([(0,x.G)(),(0,b.__metadata)("design:paramtypes",[c.r])],On);let Ln=class extends tt.D{constructor(e,t,i){super(),this.service=e,this.errorSlardar=t,this.t=i,this.defaultState={roomTopics:[],roomGameTags:[],roomGameTopic:null,roomInfo:null,warningText:null,requestId:void 0,hotLiveRoomInfo:null,loadingState:{roomInfo:0,roomTopics:0},enterRoomWithSSR:!(0,jn.y)()&&Boolean((0,ue.LX)(null===location||void 0===location?void 0:location.pathname,{path:qo.$J.liveRoom,exact:!0})),isGuestConnection:!1,isMultiGuestRoom:!1}}setRequestId(e,t){e.requestId=t}setWarningText(e,t){e.warningText=t}setRoomInfo(e,t){e.roomInfo=t}setHotLiveRoomInfo(e,t){e.hotLiveRoomInfo=t}setEnterRoomWithSSR(e,t){e.enterRoomWithSSR=t}setIsMultiGuestRoom(e,t){e.isMultiGuestRoom=t}setIsGuestConnection(e,t){e.isGuestConnection=t}setRoomTopicsAndGameTags(e,t){var i,o,n,a,s,r,l;e.roomTopics=null!==(n=null===(o=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.hashtag)||void 0===o?void 0:o.map((e=>Object.assign({id:0,title:"",image:{},namespace:0},e))))&&void 0!==n?n:[];const d={id:"0",show_name:(c=this.t)(In),short_name:c(In),full_name:c(In),game_category:[{game_type:0,title:""}]};var c;const u=function(e){return{id:"-1",show_name:e(Tn),short_name:e(Tn),full_name:e(Tn),game_category:[{game_type:3,title:""},{game_type:2,title:""},{game_type:1,title:""}]}}(this.t);e.roomGameTags=(null!==(s=null===(a=null==t?void 0:t.data)||void 0===a?void 0:a.game_tag_list)&&void 0!==s?s:[]).concat([d,u]).map((e=>Object.assign(Object.assign({},e),{id:`${e.id}`}))),e.roomGameTopic=null!==(l=null===(r=null==t?void 0:t.data)||void 0===r?void 0:r.game_hashtag)&&void 0!==l?l:null}setLoadingState(e,t){e.loadingState=Object.assign(Object.assign({},e.loadingState),t)}getRoomInfo(e){return e.pipe((0,un.w)((e=>this.service.getRoomInfo(e).pipe((0,pn.b)((({status_code:e})=>{(0,_n.k)(e,[0])})),(0,$o.z)((({status_code:e,data:t})=>0!==e?Vo.E:(0,Ho.of)(this.getActions().setRoomInfo(t)))),(0,gn.O)(this.getActions().setLoadingState({roomInfo:1})),(0,hn.l)(this.getActions().setLoadingState({roomInfo:2})),(0,Zo.K)((e=>(this.errorSlardar.reportErrorLog(e),(0,Ho.of)(this.getActions().setLoadingState({roomInfo:3})))))))))}getRoomTopics(e){return e.pipe((0,un.w)((()=>this.service.getTopicTagsAndGameTags().pipe((0,$o.z)((e=>(0,Ho.of)(this.getActions().setRoomTopicsAndGameTags(e)))),(0,gn.O)(this.getActions().setLoadingState({roomTopics:1})),(0,hn.l)(this.getActions().setLoadingState({roomTopics:2})),(0,Zo.K)((e=>(this.errorSlardar.reportErrorLog(e),(0,Ho.of)(this.getActions().setLoadingState({roomTopics:3})))))))))}};var Mn,En;(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Ln.prototype,"setRequestId",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Ln.prototype,"setWarningText",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Ln.prototype,"setRoomInfo",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Ln.prototype,"setHotLiveRoomInfo",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],Ln.prototype,"setEnterRoomWithSSR",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],Ln.prototype,"setIsMultiGuestRoom",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],Ln.prototype,"setIsGuestConnection",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Ln.prototype,"setRoomTopicsAndGameTags",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Ln.prototype,"setLoadingState",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],Ln.prototype,"getRoomInfo",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],Ln.prototype,"getRoomTopics",null),Ln=(0,b.__decorate)([(0,ot.Y)("Room"),(0,b.__param)(2,(0,w.t)(Z.s$)),(0,b.__metadata)("design:paramtypes",[On,Go,Function])],Ln),function(e){e.DefinitionSelectedKey="definition_selected_key",e.HideDefinitionRedDot="hide_definition_red_dot",e.Volume="live_player_volume",e.Muted="live_player_muted"}(Mn||(Mn={})),function(e){e.NetworkLagNoticeCount="live_quality_network_lag_notice_count",e.SwitchToAbrNoticeCount="live_quality_switch_abr_notice_count",e.ABRUpgradeNoticeCount="live_quality_abr_upgrade_notice_count",e.ABRDownGradeNoticeCount="live_quality_abr_downgrade_notice_count"}(En||(En={}));let An=class{constructor(){this.setDefinitionSelectKey=e=>(0,To.D$)("definition_selected_key",e),this.getDefinitionSelectKey=()=>(0,To.le)("definition_selected_key"),this.setHideDefinitionRedDot=()=>(0,To.D$)("hide_definition_red_dot","1"),this.getHideDefinitionRedDot=()=>"1"===(0,To.le)("hide_definition_red_dot","0"),this.setMuted=e=>(0,To.D$)("live_player_muted",String(e)),this.getMuted=()=>"1"===(0,To.le)("live_player_muted"),this.setVolume=e=>(0,To.D$)("live_player_volume",e.toString()),this.getVolume=()=>{let e=Number((0,To.le)("live_player_volume","60"));return(e<0||e>1e3||isNaN(e))&&(e=60),e},this.setDailyFrequencyControlCount=(e,t)=>{const i=new Date,o=`${i.getFullYear()}${i.getMonth()}${i.getDate()}`;return(0,To.D$)(e,`${o}-${t.toString()}`)},this.getDailyFrequencyControlCount=e=>{const t=new Date,i=`${t.getFullYear()}${t.getMonth()}${t.getDate()}`,o=(0,To.le)(e);if(!o)return 0;const[n,a]=o.split("-");return n===i?Number(a):0}}};An=(0,b.__decorate)([(0,x.G)()],An);var Dn=i(84715),Fn=i.n(Dn),Rn=i(87418);const Bn=Object.freeze(["auto","origin","uhd_60","uhd","hd_60","hd","sd","ld"]);function Nn(e,t){return t?(0,wn.stringifyUrl)({url:e,query:{_session_id:`${t}.${Date.now()}`}}):e}function Wn(e,t,i){const o=e.includes("/stage/");if(!o||"hd"!==t)return o&&"uhd"===t?{title:Rn.cK.hd,key:"hd"}:{title:i,key:t}}function Un(e,t,i){const o=e.map((e=>e.sdkKey));let n=o[0];if(t&&o.includes(t))n=t;else if(i&&t){const e=Object.keys(Rn.cK);let i=t;const a=o.length-1;for(;-1===o.indexOf(i);){const t=e.indexOf(i);if(i=e[t+1],!i||t>a)break}i!==t&&(n=i)}const a=function(e,t){return e.find((e=>e.sdkKey===t))}(e,n);return a||(console.error(`[stream] getMainStream: no stream found by ${t}`),null)}let qn=class extends tt.D{constructor(e,t){super(),this.bizContext=e,this.livePlayerStorage=t,this.defaultState={supportDefinition:!1,streamId:"",streamItems:[],currentDefinitionKey:"auto",abrDefinitionLabel:"",abrDefinitionKey:void 0,abrBitrate:0,networkStatus:"normal",canUpdateActiveStream:!0,isFatal:!1,needDestroyPlayer:!1}}setStreamId(e,t){e.streamId=t}setNetworkStatus(e,t){e.networkStatus=t}setStreamInfo(e,t){e.streamItems=t}clearStreamInfo(e){e.streamItems=[],e.abrDefinitionLabel="",e.isFatal=!1,e.streamId=""}setActiveStream(e,t){const{key:i,url:o}=t;e.streamItems=e.streamItems.map((e=>Object.assign(Object.assign({},e),{isActive:i===e.sdkKey,activeUrl:o})))}setCurrentDefinitionKey(e,t){e.currentDefinitionKey=t}setAbrDefinitionLabel(e,t){e.abrDefinitionLabel=t}setAbrDefinitionKey(e,t){e.abrDefinitionKey=t}setAbrBitrate(e,t){e.abrBitrate=t}setIsFatal(e,t){e.isFatal=t}setNeedDestroyPlayer(e,t){e.needDestroyPlayer=t}multiSetState(e,t){return Object.assign(Object.assign({},e),t)}updateAbrDefinition(e){return e.pipe((0,$o.z)((e=>{var t,i;return(0,Ho.of)(this.getActions().multiSetState({abrDefinitionLabel:null!==(t=null==e?void 0:e.definition)&&void 0!==t?t:"",abrDefinitionKey:null==e?void 0:e.sdkKey,abrBitrate:null!==(i=null==e?void 0:e.bitrate)&&void 0!==i?i:0}))})))}updateDefinition(e){return e.pipe((0,mn.M)(this.state$,this.bizContext.state$),(0,$o.z)((([e,t,{bizContext:i}])=>{var o,n,a;if("auto"===e)return(0,Ho.of)(this.getActions().setCurrentDefinitionKey(e));{const s=Un(t.streamItems,e),r=(null==i?void 0:i.isIOS)?null!==(o=null==s?void 0:s.url.mainHLS)&&void 0!==o?o:"":null!==(n=null==s?void 0:s.url.mainFLV)&&void 0!==n?n:"",l={key:null!==(a=null==s?void 0:s.sdkKey)&&void 0!==a?a:"",url:r};return(0,Ho.of)(this.getActions().setCurrentDefinitionKey(e),this.getActions().setActiveStream(l),this.getActions().updateAbrDefinition(s))}})))}updateDefinitionByBitrate(e){return e.pipe((0,mn.M)(this.state$),(0,$o.z)((([e,t])=>{const i=(o=t.streamItems,n=e,o.find((e=>e.bitrate===n)));var o,n;return(null==i?void 0:i.sdkKey)?(0,Ho.of)(this.getActions().updateAbrDefinition(i)):Vo.E})))}getDefaultStreamConfig(e,t){var i,o,n,a,s,r;const{streamData:l}=function(e){var t,i;try{const o={common:{},data:{}},n=JSON.parse(null!==(t=null==e?void 0:e.stream_data)&&void 0!==t?t:"");if(o.common=n.common,n.data)for(const e in n.data){if(n.data[e].main){const t=JSON.parse(n.data[e].main.sdk_params);o.data[e]={},o.data[e].main=n.data[e].main,o.data[e].main.sdk_params=t}if(n.data[e].backup){const t=JSON.parse(n.data[e].backup.sdk_params);o.data[e]=null!==(i=o.data[e])&&void 0!==i?i:{},o.data[e].backup=n.data[e].backup,o.data[e].backup.sdk_params=t}}return{streamData:o}}catch(e){return{streamData:{}}}}(e),d=null!==(o=null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.qualities)&&void 0!==o?o:[],c=null===(a=null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.default_quality)||void 0===a?void 0:a.sdk_key,u=d.length>0,p=this.livePlayerStorage.getDefinitionSelectKey(),g=""===p?"auto":p,h=function(e){return Fn()(e,(e=>Bn.indexOf(e.sdkKey)))}(function(e,t){var i,o,n,a,s;const r=[],l=function(e,t){let i=!1;if(e.data.origin){const o=t.find((e=>"origin"!==e.sdk_key)),n=(null==o?void 0:o.sdk_key)&&e.data[null==o?void 0:o.sdk_key].main.sdk_params.VCodec;n&&(i=e.data.origin.main.sdk_params.VCodec!==n)}return i}(e,t),d=e.common.session_id;for(const[c,u]of Object.entries(e.data)){let e=c;if(l&&"origin"===c)continue;let p=null!==(o=null===(i=t.find((e=>e.sdk_key===c)))||void 0===i?void 0:i.name)&&void 0!==o?o:Rn.cK[c];if(!p)continue;let g=u.main.sdk_params.vbitrate;"origin"===c&&(g=2e6);const h=Wn(u.main.flv,e,p);h&&(e=h.key,p=h.title,r.push({sdkKey:e,definition:p,bitrate:g,url:{mainFLV:Nn(u.main.flv,d),mainHLS:u.main.hls,backupFLV:(null===(n=u.backup)||void 0===n?void 0:n.flv)?Nn(null===(a=u.backup)||void 0===a?void 0:a.flv,d):"",backupHLS:null===(s=u.backup)||void 0===s?void 0:s.hls},activeUrl:"",vCodecKey:u.main.sdk_params.VCodec,isActive:!1,pullFailedCount:0}))}return r}(l,d)),m=Un(h,"auto"===g?c:g,!0),_=null!==(r=null!==(s=null==m?void 0:m.sdkKey)&&void 0!==s?s:c)&&void 0!==r?r:"origin";return{supportDefinition:u,currentDefinitionKey:"auto"===g?"auto":_,streamItems:h.map((e=>(e.sdkKey===_&&(e.isActive=!0,e.activeUrl=t?null==e?void 0:e.url.mainHLS:null==e?void 0:e.url.mainFLV),e))),defaultActiveStream:m}}updateRoomStream(e){return e.pipe((0,mn.M)(this.bizContext.state$),(0,$o.z)((([e,t])=>{var i,o,n;const{streamId:a,pullData:s}=e;if(!s)return(0,Ho.of)();const{supportDefinition:r,streamItems:l,currentDefinitionKey:d,defaultActiveStream:c}=this.getDefaultStreamConfig(s,Boolean(null===(i=t.bizContext)||void 0===i?void 0:i.isIOS));return(0,Ho.of)(this.getActions().multiSetState({isFatal:!1,supportDefinition:r,streamId:null!=a?a:"",currentDefinitionKey:d,streamItems:l,abrDefinitionLabel:null!==(o=null==c?void 0:c.definition)&&void 0!==o?o:"",abrDefinitionKey:null==c?void 0:c.sdkKey,abrBitrate:null!==(n=null==c?void 0:c.bitrate)&&void 0!==n?n:0}))})))}changeAvailableStream(e){return e.pipe((0,mn.M)(this.state$),(0,$o.z)((([e,t])=>{const i=t.streamItems.map((e=>e.isActive?Object.assign(Object.assign({},e),{pullFailedCount:e.pullFailedCount+1}):e)),o="auto"===t.currentDefinitionKey,n=[],a=function(e){let t=0;const i=function(e){return e.reduce(((e,t)=>(e.push(t.url.mainFLV),t.url.backupFLV&&e.push(t.url.backupFLV),e)),[])}(e).length;let o;const n=4*(2*e.length<i?2:1);for(;!o&&t<n;)o=e.find((e=>e.pullFailedCount===t)),t++;if(o){const t=function(e,t){var i,o;let n=e.url.mainFLV;switch(t){case 1:n=null!==(i=e.url.backupFLV)&&void 0!==i?i:e.url.mainHLS;break;case 2:n=e.url.backupFLV?e.url.mainHLS:e.url.mainFLV;break;case 3:n=null!==(o=e.url.backupHLS)&&void 0!==o?o:e.url.mainHLS;break;default:n=e.url.mainFLV}return n}(o,o.pullFailedCount%4);return function(e,t,i){return e.map((e=>Object.assign(Object.assign({},e),{isActive:t===e.sdkKey,activeUrl:i})))}(e,o.sdkKey,t)}return e.map((e=>Object.assign(Object.assign({},e),{isActive:!1})))}(i),s=a.find((e=>e.isActive));return s?o?n.push(this.getActions().updateAbrDefinition(s)):n.push(this.getActions().setCurrentDefinitionKey(s.sdkKey)):t.streamItems.length>0&&n.push(this.getActions().setIsFatal(!0)),(0,Ho.of)(this.getActions().setStreamInfo(a),...n)})))}};(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,String]),(0,b.__metadata)("design:returntype",void 0)],qn.prototype,"setStreamId",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,String]),(0,b.__metadata)("design:returntype",void 0)],qn.prototype,"setNetworkStatus",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Array]),(0,b.__metadata)("design:returntype",void 0)],qn.prototype,"setStreamInfo",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object]),(0,b.__metadata)("design:returntype",void 0)],qn.prototype,"clearStreamInfo",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],qn.prototype,"setActiveStream",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,String]),(0,b.__metadata)("design:returntype",void 0)],qn.prototype,"setCurrentDefinitionKey",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,String]),(0,b.__metadata)("design:returntype",void 0)],qn.prototype,"setAbrDefinitionLabel",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],qn.prototype,"setAbrDefinitionKey",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Number]),(0,b.__metadata)("design:returntype",void 0)],qn.prototype,"setAbrBitrate",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],qn.prototype,"setIsFatal",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],qn.prototype,"setNeedDestroyPlayer",null),(0,b.__decorate)([(0,it.j)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],qn.prototype,"multiSetState",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],qn.prototype,"updateAbrDefinition",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],qn.prototype,"updateDefinition",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],qn.prototype,"updateDefinitionByBitrate",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",nt.y)],qn.prototype,"updateRoomStream",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],qn.prototype,"changeAvailableStream",null),qn=(0,b.__decorate)([(0,ot.Y)("Stream"),(0,b.__metadata)("design:paramtypes",[pe.r,An])],qn);let zn=class{constructor(e){this.fetch=e,this.getCreateInfo=()=>this.fetch.get("/webcast/room/create_info/",{query:{aid:ge.CO},baseUrlType:5}),this.updateScreenshotStatus=e=>this.fetch.post("/webcast/room/screenshot_cover/update/",{query:e,baseUrlType:5,headers:{"Content-Type":Pn.zv.FORM_ENCODE}}),this.createRoom=e=>this.fetch.post("/webcast/room/create/",{query:e,baseUrlType:5,headers:{"Content-Type":Pn.zv.FORM_ENCODE}}).pipe(on((e=>[4003035,20063].includes(e)))),this.endLive=()=>this.fetch.post("/webcast/room/finish_abnormal/",{baseUrlType:5}),this.setTopicTag=e=>this.fetch.post("/webcast/room/hashtag/set/",{query:e,baseUrlType:4,headers:{"Content-Type":Pn.zv.FORM_ENCODE}}),this.uploadImage=e=>{const t=new FormData;return t.append("image",e),this.fetch.post("/webcast/room/upload/image/",{body:t,omitContentType:!0,baseUrlType:5})},this.getEndLiveInfo=e=>this.fetch.get("/webcast/data/data_center/room_stats/",{query:e,baseUrlType:5}),this.getLastBanRecord=e=>this.fetch.get("/webcast/review/get_latest_ban_record/",{query:Object.assign(Object.assign({},e),{ban_type:2}),baseUrlType:5})}};zn=(0,b.__decorate)([(0,x.G)(),(0,b.__metadata)("design:paramtypes",[c.r])],zn);let $n=class extends tt.D{constructor(e,t,i,o,n,a){super(),this.service=e,this.roomModule=t,this.roomService=i,this.streamModule=o,this.slardar=n,this.storage=a,this.defaultState={liveStatus:0,roomCreateInfo:null,showSuicidePrevention:!1,showAppealModal:!1,roomStats:null,isTempPermission:!1,streamKey:"",streamKeyExpiration:yn,loadingState:{createRoomInfo:0,roomCreateInfo:0,OBSAccessRecallInfo:0}}}setLiveStatus(e,t){e.liveStatus=t}setIsTempPermission(e,t){e.isTempPermission=t}setRoomCreateInfo(e,t){e.roomCreateInfo=t}setRoomStatsData(e,t){e.roomStats=t}setLoadingState(e,t){e.loadingState=Object.assign(Object.assign({},e.loadingState),t)}setSuicidePrevention(e,t){e.showSuicidePrevention=t}setStreamKey(e,t){e.streamKey=t.streamKey,e.streamKeyExpiration=t.expiration}setAppealVisible(e,t){e.showAppealModal=t}getCreateRoomInfo(e){return e.pipe((0,un.w)((e=>{const{shouldGetRoomInfo:t}=e;return this.service.getCreateInfo().pipe((0,pn.b)((({status_code:e})=>{(0,_n.k)(e,[0])})),(0,$o.z)((({data:e,status_code:i})=>{if(0!==i)return this.slardar.handleGetCreateRoomInfoFail({errorCode:i.toString(),errorMessage:""}),this.slardar.handleTraceError({errorCode:"1002",errorMessage:`status_code: ${i}`}),Vo.E;const{last_room_id_str:o,live_status:n,ban_status:a}=e,s=!(null==a?void 0:a.is_ban),r=[2,1,3].includes(n);var l;return s&&t&&(l=n,Jo()(l)&&(1===l?Ko():Xo())),s&&r&&t?this.roomService.getRoomInfo({is_anchor:!0,room_id:o}).pipe((0,$o.z)((({data:t})=>(this.slardar.handleGetCreateRoomInfoSuccess(),(0,Ho.of)(this.getActions().setRoomCreateInfo(e),...this.setRoomInfo(t),this.getActions().setLiveStatus(n)))))):(0,Ho.of)(this.getActions().setRoomCreateInfo(e),this.getActions().setLiveStatus(n))})),(0,gn.O)(this.getActions().setLoadingState({roomCreateInfo:1})),(0,hn.l)(this.getActions().setLoadingState({roomCreateInfo:2})),(0,Zo.K)((e=>(this.slardar.reportGoLiveError(e),this.slardar.handleTraceError({errorCode:"1002",errorMessage:e.message}),this.slardar.handleGetCreateRoomInfoFail({errorCode:"-1",errorMessage:e.message}),(0,Ho.of)(this.getActions().setLoadingState({roomCreateInfo:3}))))))})))}createRoomInfo(e){return e.pipe((0,mn.M)(this.roomModule.state$),(0,$o.z)((([e,t])=>this.service.createRoom(e).pipe((0,$o.z)((({data:i,status_code:o})=>{var n,a;if(o&&0!==o)switch(o){case 2403:return this.slardar.handleCreateRoomWarning({errorCode:o.toString(),errorMessage:""}),(0,Ho.of)(this.getActions().setSuicidePrevention(!0),this.getActions().setLoadingState({createRoomInfo:3}));case 10018:case 4003035:return this.slardar.handleCreateRoomWarning({errorCode:o.toString(),errorMessage:""}),(0,Ho.of)(this.getActions().setLiveStatus(-1),this.getActions().setLoadingState({createRoomInfo:3}));case 50004:case 20063:case 30009:return this.slardar.handleCreateRoomWarning({errorCode:o.toString(),errorMessage:""}),(0,Ho.of)(this.getActions().setLoadingState({createRoomInfo:3}));case 4003105:return i.prompts&&ji.h.open({content:i.prompts,duration:3}),this.slardar.handleCreateRoomWarning({errorCode:o.toString(),errorMessage:""}),(0,Ho.of)(this.getActions().setLoadingState({createRoomInfo:3}));default:throw new Error(`status_code: ${o}`)}this.slardar.handleCreateRoomSuccess(),Ko(),this.slardar.handleTraceSuccess();const s=t.roomGameTags.find((t=>t.id===e.game_tag_id));return r={anchor_id:null===(n=i.owner)||void 0===n?void 0:n.id_str,room_id:i.id_str,live_type:(null==i?void 0:i.live_type_third_party)?"third_party":"video_live",game_label:null==s?void 0:s.show_name,game_label_id:null==s?void 0:s.id,choose_hashtag_id:e.hashtag_id,choose_hashtag_name:null===(a=t.roomTopics.find((t=>t.id===e.hashtag_id)))||void 0===a?void 0:a.title,cover_type:1===e.screenshot_cover_status?"screen_shot":"user_upload"},Ji.W.event("livesdk_live_take",Object.assign({live_type:"third_party",send_gift_type:"open",event_type:"click",is_active_fans_show:0,show_active_user_ucnt:0,event_page:"live_take_button",game_label:r.game_label,game_label_id:r.game_label_id},r)),(0,Ho.of)(...this.setRoomInfo(i),this.getActions().setLiveStatus(1),this.getActions().setLoadingState({createRoomInfo:2}));var r})),(0,gn.O)(this.getActions().setLoadingState({createRoomInfo:1})),(0,Zo.K)((e=>(this.slardar.handleTraceError({errorCode:"1003",errorMessage:e.message}),this.slardar.handleCreateRoomFail({errorCode:"-1",errorMessage:e.message}),(0,Ho.of)(this.getActions().setLoadingState({createRoomInfo:3})))))))))}setRoomInfo(e){var t,i;const o=[],[,n]=function(e){if(e){const t=e.lastIndexOf("/");return[e.substr(0,t),e.substr(t+1)]}return[]}(function(e){var t,i;const o=null==e?void 0:e.stream_url,n=null===(t=null==o?void 0:o.push_urls)||void 0===t?void 0:t[0];return null!==(i=null!=n?n:null==o?void 0:o.rtmp_push_url)&&void 0!==i?i:""}(e));if(n&&e.id_str){let t=n;const{streamKey:i,expiration:a}=this.storage.getGoLiveStreamKeyInfo(t,e.id_str);t!==i?t=i:this.storage.setGoLiveStreamKeyInfo(t,e.id_str),o.push(this.getActions().setStreamKey({streamKey:t,expiration:a}))}return o.push(this.roomModule.getActions().setRoomInfo(e)),o.push(this.streamModule.getActions().updateRoomStream({pullData:null===(i=null===(t=e.stream_url)||void 0===t?void 0:t.live_core_sdk_data)||void 0===i?void 0:i.pull_data,streamId:e.id_str})),o}endLive(e){return e.pipe((0,$o.z)((()=>this.service.endLive().pipe((0,$o.z)((()=>(this.slardar.handleEndLiveSuccess(),(0,Ho.of)(this.getActions().setLiveStatus(4),this.streamModule.getActions().setStreamInfo([]))))),(0,Zo.K)((e=>(this.slardar.handleEndLiveFail(),this.slardar.reportGoLiveError(e),Vo.E)))))))}setTopicTag(e){return e.pipe((0,un.w)((e=>this.service.setTopicTag(e).pipe((0,at.U)((()=>this.noop())),(0,Zo.K)((e=>(this.slardar.reportGoLiveError(e),Vo.E)))))))}getRoomStatsData(e){return e.pipe((0,$o.z)((e=>this.service.getEndLiveInfo({room_id:e}).pipe((0,pn.b)((({status_code:e})=>{(0,_n.k)(e,[0])})),(0,$o.z)((({data:e})=>(0,Ho.of)(this.getActions().setRoomStatsData(e.room_stats)))),(0,Zo.K)((e=>(this.slardar.reportGoLiveError(e),Vo.E)))))))}};(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Number]),(0,b.__metadata)("design:returntype",void 0)],$n.prototype,"setLiveStatus",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],$n.prototype,"setIsTempPermission",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],$n.prototype,"setRoomCreateInfo",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],$n.prototype,"setRoomStatsData",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],$n.prototype,"setLoadingState",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],$n.prototype,"setSuicidePrevention",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],$n.prototype,"setStreamKey",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],$n.prototype,"setAppealVisible",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],$n.prototype,"getCreateRoomInfo",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],$n.prototype,"createRoomInfo",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],$n.prototype,"endLive",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],$n.prototype,"setTopicTag",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],$n.prototype,"getRoomStatsData",null),$n=(0,b.__decorate)([(0,ot.Y)("GoLive"),(0,b.__metadata)("design:paramtypes",[zn,Ln,On,qn,tn,bn])],$n);var Hn,Zn=i(33966);!function(e){e.Logo="click_logo",e.Click="click_navigation_bar",e.ClickHamburgerMenu="click_hamburger_menu",e.ClickEhWebEntrance="click_eh_web_entrance",e.EhWebEntranceShow="eh_web_entrance_show",e.ShowFollowingRedDot="red_dot_show",e.RemoveFollowingRedDot="red_dot_exit",e.ShowNewLabel="new_label_show",e.RemoveNewLabel="new_label_exit"}(Hn||(Hn={}));const Vn=e=>{Ji.W.event("click_navigation_bar",e)},Gn=e=>{Ji.W.event("eh_web_entrance_show",e)},Qn=e=>{Ji.W.event("click_eh_web_entrance",e)},Jn={id:"logo-dark-1ef9a37a",use:"logo-dark-1ef9a37a-usage",viewBox:"0 0 118 42",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 118 42" id="logo-dark-1ef9a37a"><path fill="#25F4EE" d="M9.875 16.842v-1.119A8.836 8.836 0 0 0 8.7 15.64c-4.797-.006-8.7 3.9-8.7 8.707a8.706 8.706 0 0 0 3.718 7.135A8.675 8.675 0 0 1 1.38 25.55c0-4.737 3.794-8.598 8.495-8.707Z" /><path fill="#25F4EE" d="M10.086 29.526c2.14 0 3.89-1.707 3.967-3.83l.006-18.968h3.463a6.78 6.78 0 0 1-.11-1.202h-4.726l-.006 18.969a3.978 3.978 0 0 1-3.967 3.829 3.93 3.93 0 0 1-1.846-.46 3.949 3.949 0 0 0 3.22 1.662Zm13.906-16.36v-1.055a6.506 6.506 0 0 1-3.583-1.068 6.571 6.571 0 0 0 3.583 2.123Z" /><path fill="#FE2C55" d="M20.409 11.043a6.54 6.54 0 0 1-1.616-4.315h-1.265a6.557 6.557 0 0 0 2.88 4.316ZM8.706 20.365a3.98 3.98 0 0 0-3.973 3.976c0 1.528.869 2.858 2.134 3.523a3.936 3.936 0 0 1-.754-2.321 3.98 3.98 0 0 1 3.973-3.976c.409 0 .805.07 1.175.185v-4.833a8.837 8.837 0 0 0-1.175-.083c-.07 0-.134.006-.204.006v3.708a3.999 3.999 0 0 0-1.176-.185Z" /><path fill="#FE2C55" d="M23.992 13.166v3.676c-2.453 0-4.727-.786-6.58-2.116v9.621c0 4.802-3.902 8.714-8.706 8.714a8.669 8.669 0 0 1-4.988-1.579 8.69 8.69 0 0 0 6.368 2.781c4.797 0 8.707-3.906 8.707-8.714v-9.621a11.25 11.25 0 0 0 6.579 2.116v-4.73c-.48 0-.94-.052-1.38-.148Z" /><path fill="black" d="M17.413 24.348v-9.622a11.251 11.251 0 0 0 6.58 2.116v-3.676a6.571 6.571 0 0 1-3.584-2.123 6.61 6.61 0 0 1-2.888-4.315H14.06l-.006 18.968a3.978 3.978 0 0 1-3.967 3.83A3.99 3.99 0 0 1 6.86 27.87a3.991 3.991 0 0 1-2.133-3.523A3.98 3.98 0 0 1 8.7 20.372c.409 0 .805.07 1.175.185v-3.708c-4.701.103-8.495 3.964-8.495 8.701 0 2.29.888 4.373 2.338 5.933a8.669 8.669 0 0 0 4.988 1.58c4.798 0 8.707-3.913 8.707-8.714Zm12.635-11.169h14.774l-1.354 4.232h-3.832v15.644h-4.778V17.41l-4.804.006-.006-4.238Zm38.984 0h15.12l-1.355 4.232h-4.17v15.644h-4.785V17.41l-4.804.006-.006-4.238ZM45.73 19.502h4.733v13.553h-4.708l-.026-13.553Zm6.617-6.374h4.733v9.257l4.689-4.61h5.646l-5.934 5.76 6.644 9.52h-5.213l-4.433-6.598-1.405 1.362v5.236H52.34V13.128h.006Zm50.143 0h4.734v9.257l4.688-4.61h5.647l-5.934 5.76 6.643 9.52h-5.206l-4.433-6.598-1.405 1.362v5.236h-4.734V13.128Zm-54.397 4.826a2.384 2.384 0 0 0 2.382-2.384 2.384 2.384 0 1 0-2.382 2.384Z" /><path fill="#25F4EE" d="M83.544 24.942a8.112 8.112 0 0 1 7.474-8.087 8.748 8.748 0 0 0-.709-.026c-4.478 0-8.106 3.631-8.106 8.113 0 4.482 3.628 8.113 8.106 8.113.21 0 .498-.013.71-.026-4.178-.326-7.475-3.823-7.475-8.087Z" /><path fill="#FE2C55" d="M92.858 16.83c-.217 0-.505.012-.716.025a8.111 8.111 0 0 1 7.468 8.087 8.112 8.112 0 0 1-7.468 8.087c.211.02.499.026.716.026 4.478 0 8.106-3.631 8.106-8.113 0-4.482-3.628-8.113-8.106-8.113Z" /><path fill="black" d="M91.58 28.887a3.94 3.94 0 0 1-3.94-3.945 3.94 3.94 0 1 1 7.882 0c0 2.18-1.77 3.945-3.942 3.945Zm0-12.058c-4.477 0-8.106 3.631-8.106 8.113 0 4.482 3.629 8.113 8.106 8.113 4.478 0 8.106-3.631 8.106-8.113 0-4.482-3.628-8.113-8.106-8.113Z" /></symbol>'};function Yn(e){const t=(0,de.useContext)(ne.e);return(0,de.useLayoutEffect)((()=>(t.add(Jn),()=>{t.remove("logo-dark-1ef9a37a")})),[]),(0,u.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,u.jsx)("use",{xlinkHref:"#logo-dark-1ef9a37a"},void 0)}),void 0)}const Kn={id:"logo-light-929eac50",use:"logo-light-929eac50-usage",viewBox:"0 0 118 30",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 118 30" id="logo-light-929eac50"><path fill="#25F4EE" d="M9.875 11.842v-1.119A8.836 8.836 0 0 0 8.7 10.64c-4.797-.006-8.7 3.9-8.7 8.707a8.706 8.706 0 0 0 3.718 7.135A8.675 8.675 0 0 1 1.38 20.55c0-4.737 3.794-8.598 8.495-8.707Z" /><path fill="#25F4EE" d="M10.087 24.526c2.14 0 3.89-1.707 3.966-3.83l.007-18.968h3.462a6.78 6.78 0 0 1-.109-1.202h-4.727l-.006 18.968a3.978 3.978 0 0 1-3.967 3.83 3.93 3.93 0 0 1-1.846-.46 3.949 3.949 0 0 0 3.22 1.662Zm13.905-16.36V7.111a6.506 6.506 0 0 1-3.584-1.067 6.572 6.572 0 0 0 3.584 2.122Z" /><path fill="#FE2C55" d="M20.41 6.044a6.54 6.54 0 0 1-1.617-4.316h-1.265a6.557 6.557 0 0 0 2.881 4.316ZM8.707 15.365a3.98 3.98 0 0 0-3.974 3.976c0 1.528.87 2.858 2.134 3.523a3.937 3.937 0 0 1-.754-2.321 3.98 3.98 0 0 1 3.973-3.976c.41 0 .805.07 1.176.185v-4.833a8.852 8.852 0 0 0-1.176-.083c-.07 0-.134.006-.204.006v3.708a3.999 3.999 0 0 0-1.175-.185Z" /><path fill="#FE2C55" d="M23.992 8.166v3.676a11.25 11.25 0 0 1-6.579-2.116v9.621c0 4.802-3.903 8.714-8.706 8.714a8.669 8.669 0 0 1-4.99-1.579 8.69 8.69 0 0 0 6.37 2.781c4.796 0 8.706-3.906 8.706-8.714v-9.621a11.25 11.25 0 0 0 6.579 2.116v-4.73a6.47 6.47 0 0 1-1.38-.148Z" /><path fill="white" d="M17.413 19.348V9.726a11.25 11.25 0 0 0 6.58 2.116V8.166a6.572 6.572 0 0 1-3.584-2.122 6.611 6.611 0 0 1-2.887-4.316h-3.463l-.006 18.968a3.978 3.978 0 0 1-3.967 3.83 3.99 3.99 0 0 1-3.225-1.656 3.991 3.991 0 0 1-2.134-3.523A3.98 3.98 0 0 1 8.7 15.372c.409 0 .805.07 1.176.185v-3.708c-4.702.103-8.496 3.964-8.496 8.701 0 2.29.888 4.373 2.338 5.933a8.669 8.669 0 0 0 4.989 1.58c4.797 0 8.706-3.913 8.706-8.715ZM30.048 8.179h14.775l-1.355 4.232h-3.832v15.644h-4.778V12.41l-4.804.006-.006-4.238Zm38.984 0h15.12l-1.354 4.232h-4.172v15.644h-4.784V12.41l-4.803.006-.007-4.238ZM45.73 14.502h4.733v13.553h-4.708l-.026-13.553Zm6.617-6.374h4.733v9.257l4.689-4.61h5.647l-5.934 5.76 6.643 9.52h-5.213l-4.433-6.598-1.405 1.362v5.236h-4.733V8.128h.006Zm50.143 0h4.734v9.257l4.688-4.61h5.647l-5.934 5.76 6.643 9.52h-5.206l-4.433-6.598-1.405 1.362v5.236h-4.734V8.128Zm-54.397 4.826a2.384 2.384 0 1 0-.002-4.771 2.384 2.384 0 0 0 .002 4.771Z" /><path fill="#25F4EE" d="M83.544 19.942a8.112 8.112 0 0 1 7.474-8.087 8.748 8.748 0 0 0-.709-.026c-4.478 0-8.106 3.631-8.106 8.113 0 4.482 3.628 8.113 8.106 8.113.21 0 .498-.013.71-.026-4.178-.326-7.475-3.823-7.475-8.087Z" /><path fill="#FE2C55" d="M92.858 11.83c-.217 0-.505.012-.715.025a8.111 8.111 0 0 1 7.467 8.087 8.111 8.111 0 0 1-7.467 8.087c.21.02.498.026.715.026 4.478 0 8.106-3.631 8.106-8.113 0-4.482-3.628-8.113-8.106-8.113Z" /><path fill="white" d="M91.58 23.887a3.94 3.94 0 0 1-3.94-3.945 3.94 3.94 0 1 1 7.882 0c0 2.18-1.77 3.945-3.941 3.945Zm0-12.058c-4.477 0-8.105 3.631-8.105 8.113 0 4.482 3.628 8.113 8.106 8.113 4.477 0 8.106-3.631 8.106-8.113 0-4.482-3.629-8.113-8.106-8.113Z" /></symbol>'};function Xn(e){const t=(0,de.useContext)(ne.e);return(0,de.useLayoutEffect)((()=>(t.add(Kn),()=>{t.remove("logo-light-929eac50")})),[]),(0,u.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,u.jsx)("use",{xlinkHref:"#logo-light-929eac50"},void 0)}),void 0)}var ea=i(97186);const ta=(0,je.Z)(ea.v,{target:"e1an6zpe0"})({fontSize:0},"label:StyledLinkLogo;");ta.defaultProps=Object.assign(Object.assign({},ta.defaultProps),{"data-e2e":"tiktok-logo"});const ia=(0,h.ZP)({resolved:{},chunkName:()=>"logo-muted-white.svg",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>i.e(1255).then(i.bind(i,53885)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>53885}),oa=(0,h.ZP)({resolved:{},chunkName:()=>"logo-muted-black.svg",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>i.e(2798).then(i.bind(i,34003)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>34003}),na=(0,de.memo)((function({isDark:e,isGrayFilter:t,style:i={}}){const o=(0,St.Q)(),{pathname:n}=(0,ue.TH)(),a=(0,se.qj)(Zn.h),{abTestVersion:s,language:r,user:l}=(0,Ue.m7)((0,Qe.Lh)((()=>["abTestVersion","language","user"]),[])),d=(0,de.useCallback)((e=>{var t,i;(0,Se.oC)(n)&&(e.preventDefault(),a.resetItemList({key:"foryou"}),a.getRecommendList({key:"foryou",routeName:null!==(i=null===(t=(0,Re.OJ)(n))||void 0===t?void 0:t.name)&&void 0!==i?i:Re.Ur.foryou,abTestVersion:s,language:r,user:l,pullType:1})),Ji.W.event("click_logo")}),[a,n,s,r,l]),c=o("TikTok i18n title"),p=(0,de.useMemo)((()=>e?t?(0,u.jsx)(ia,{height:42,width:118},void 0):(0,u.jsx)(Xn,{alt:c,height:42,width:118},void 0):t?(0,u.jsx)(oa,{height:42,width:118},void 0):(0,u.jsx)(Yn,{height:42,width:118,alt:c},void 0)),[e,t,c]);return(0,u.jsxs)(ta,Object.assign({to:Re.nT.home,onClick:d,style:Object.assign({position:"relative"},i),ariaLabel:o("accessibilityLabels_forYou_nav_tiktok_btn")},{children:[p,(0,u.jsx)("strong",{children:c},void 0)]}),void 0)}));var aa=i(31223),sa=i.n(aa),ra=i(4363),la=i.n(ra),da=i(66599);let ca=class{constructor(e){this.fetch=e}getUserDiscoverData(e,t){let i=28,o=17;return(0,Se.FZ)(e)?i=50:(0,Se.bf)(e)?(i=30,o=15):i=30,this.fetch.get("/node/share/discover",{query:{noUser:"0",count:i,scene:o,pageId:t,userId:t}}).pipe((0,at.U)((e=>e.body[0].exploreList)))}getFollowingUserList(e){return this.fetch.get("/api/user/list/",{query:e})}};var ua;ca=(0,b.__decorate)([(0,x.G)(),(0,b.__metadata)("design:paramtypes",[c.r])],ca),function(e){e.Recommend="suggest",e.Following="following",e.Follower="follower"}(ua||(ua={}));let pa=class extends tt.D{constructor(e,t){super(),this.service=e,this.user=t,this.defaultState={following:{list:[],hasMore:!0,loading:!0,maxCursor:0,minCursor:0,total:0},follower:{list:[],hasMore:!0,loading:!0,maxCursor:0,minCursor:0,total:0},suggest:{list:[],hasMore:!0,loading:!0,maxCursor:0,minCursor:0,total:0}}}setList(e,t){const{list:i,key:o,maxCursor:n,minCursor:a,total:s}=t;e[o].list=la()(e[o].list.concat(i)),e[o].maxCursor=n,e[o].minCursor=a,s&&(e[o].total=s)}resetList(e,t){const{key:i}=t;e[i].list=[],e[i].maxCursor=0,e[i].minCursor=0}setLoading(e,t){const{loading:i,key:o}=t;e[o].loading=i}getRecommendList(e){return e.pipe((0,st.z)((({pathname:e,userId:t=""})=>this.service.getUserDiscoverData(e,t).pipe((0,$o.z)((e=>{const t=e.map((({cardItem:e})=>({avatarLarger:e.cover,avatarMedium:e.cover,avatarThumb:e.cover,id:e.id,nickname:e.title,relation:e.extraInfo.relation,signature:e.description,uniqueId:e.subTitle.replace(/^@/,""),verified:e.extraInfo.verified,secUid:e.extraInfo.secUid,roomId:e.extraInfo.roomId}))).sort(((e,t)=>{var i,o;return(null!==(i=null==e?void 0:e.relation)&&void 0!==i?i:0)-(null!==(o=null==t?void 0:t.relation)&&void 0!==o?o:0)})).sort(((e,t)=>{var i,o,n,a;return(null!==(o=null===(i=null==t?void 0:t.roomId)||void 0===i?void 0:i.length)&&void 0!==o?o:0)-(null!==(a=null===(n=null==e?void 0:e.roomId)||void 0===n?void 0:n.length)&&void 0!==a?a:0)}));return(0,Ho.of)(this.user.getActions().multiSetUser(t),this.getActions().setList({key:"suggest",list:t.map((({uniqueId:e})=>e)),hasMore:!1}))})),(0,gn.O)(this.getActions().resetList({key:"suggest"}),this.getActions().setLoading({key:"suggest",loading:!0})),(0,hn.l)(this.getActions().setLoading({key:"suggest",loading:!1}),this.terminate()),(0,rt.n)({})))))}getFollowingList(e){return e.pipe((0,mn.M)(this.state$),(0,at.U)((([{count:e},t])=>Object.assign(Object.assign({},t.following),{count:e}))),(0,st.z)((({list:e,maxCursor:t=0,minCursor:i=0,count:o})=>this.service.getFollowingUserList({scene:21,maxCursor:t,minCursor:i,count:o}).pipe((0,$o.z)((t=>{const{maxCursor:i,minCursor:o,userList:n=[],total:a}=t;return(0,Ho.of)(this.user.getActions().multiSetUser(n.map((({user:e})=>e))),this.user.getActions().multiSetUserStats(n.map((({user:e,stats:t})=>({uniqueId:e.uniqueId,stats:t})))),this.getActions().setList({key:"following",list:n.sort(((e,t)=>{var i,o,n,a,s,r;return(null!==(n=null===(o=null===(i=null==t?void 0:t.user)||void 0===i?void 0:i.roomId)||void 0===o?void 0:o.length)&&void 0!==n?n:0)-(null!==(r=null===(s=null===(a=null==e?void 0:e.user)||void 0===a?void 0:a.roomId)||void 0===s?void 0:s.length)&&void 0!==r?r:0)})).map((({user:{uniqueId:e}})=>e)).filter((t=>!e||e.indexOf(t)<0)),maxCursor:i,minCursor:o,total:a}))})),(0,gn.O)(this.getActions().setLoading({key:"following",loading:!0})),(0,hn.l)(this.getActions().setLoading({key:"following",loading:!1})),(0,rt.n)({})))))}getFollowerList(e){return e.pipe((0,mn.M)(this.state$),(0,at.U)((([{count:e},t])=>Object.assign(Object.assign({},t.follower),{count:e}))),(0,st.z)((({list:e,maxCursor:t=0,minCursor:i=0,count:o})=>this.service.getFollowingUserList({scene:67,maxCursor:t,minCursor:i,count:o}).pipe((0,$o.z)((t=>{const{maxCursor:i,minCursor:o,userList:n=[],total:a}=t;return(0,Ho.of)(this.user.getActions().multiSetUser(n.map((({user:e})=>e))),this.user.getActions().multiSetUserStats(n.map((({user:e,stats:t})=>({uniqueId:e.uniqueId,stats:t})))),this.getActions().setList({key:"follower",list:n.map((({user:{uniqueId:e}})=>e)).filter((t=>!e||e.indexOf(t)<0)),maxCursor:i,minCursor:o,total:a}))})),(0,gn.O)(this.getActions().setLoading({key:"follower",loading:!0})),(0,hn.l)(this.getActions().setLoading({key:"follower",loading:!1})),(0,rt.n)({})))))}};(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],pa.prototype,"setList",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],pa.prototype,"resetList",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],pa.prototype,"setLoading",null),(0,b.__decorate)([(0,it.Qm)({payloadGetter:1}),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],pa.prototype,"getRecommendList",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],pa.prototype,"getFollowingList",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],pa.prototype,"getFollowerList",null),pa=(0,b.__decorate)([(0,ot.Y)("AccountList"),(0,b.__metadata)("design:paramtypes",[ca,da.z])],pa);var ga=i(68852),ha=i(51146),ma=i(43348),_a=i(94215),va=i(68457),ya=i(40013),ba=i(19813),fa=i(83236),xa=i(58590),wa=i(15679),ka=i(50894),Sa=i(35199),Ca=i(88683),ja=i(69988);const Ta=(0,Ke.Z)(ea.v,{target:"e85wp610"})({":hover":{textDecoration:"none"}},"label:StyledLink;"),Ia=(0,Ke.Z)("div",{target:"e85wp611"})((({theme:{colors:e}})=>({display:"flex",alignItems:"center",padding:"8px 12px",borderRadius:"4px",transition:"background-color 300ms",":hover":{backgroundColor:e.BGView},":active":{backgroundColor:e.BGInput}})),"label:DivUserContainer;"),Pa=(0,Ke.Z)("div",{target:"e85wp612"})((({theme:{direction:e}})=>[{display:"flex",flex:"1"},(0,Xe.YJ)({direction:e,paddingEnd:"24px"})]),"label:DivUserInfo;"),Oa=(0,Ke.Z)("div",{target:"e85wp613"})((({theme:{direction:e}})=>[{maxWidth:"450px",padding:"1px 0"},(0,Xe.YJ)({direction:e,paddingStart:"12px"})]),"label:DivUserDesc;"),La=(0,Ke.Z)("div",{target:"e85wp614"})({display:"flex",alignItems:"center",height:"22px",lineHeight:"22px"},"label:DivTopPart;"),Ma=(0,Ke.Z)("span",{target:"e85wp615"})((({theme:e})=>[(0,Xe.GI)({theme:e,fontFamily:"Proxima",fontWeight:"bold",typography:"P2"})]),"label:SpanUniqueId;"),Ea=(0,Ke.Z)("span",{target:"e85wp616"})((({theme:e,theme:{direction:t,colors:i}})=>[(0,Xe.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",lineHeight:"15px",typography:"P4"}),{color:i.TextSecondary},(0,Xe.YJ)({direction:t,paddingStart:"4px"})]),"label:SpanNickname;"),Aa=(0,Ke.Z)("div",{target:"e85wp617"})((({theme:e,theme:{colors:t}})=>[(0,Xe.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P3"}),{height:"20px",marginTop:"4px",color:t.TextSecondary}]),"label:DivBottomPart;"),Da=(0,Ke.Z)("p",{target:"e85wp618"})({maxWidth:"450px"},Xe.wj,"label:PSignature;"),Fa=(0,Ke.Z)("p",{target:"e85wp619"})({maxWidth:"450px"},Xe.wj,"label:POther;"),Ra=(0,Ke.Z)("span",{target:"e85wp6110"})((({theme:{direction:e}})=>(0,Xe.YJ)({direction:e,paddingStart:"8px"})),"label:SpanSecond;"),Ba=(0,Ke.Z)(ei.W,{target:"e85wp6111"})((({theme:{direction:e}})=>({flexShrink:0,"& > svg":[(0,Xe.YJ)({direction:e,marginEnd:"6px"})]})),"label:StyledFollowButton;"),Na=(0,Ke.Z)(ja.Z,{target:"e85wp6112"})((({theme:{direction:e}})=>(0,Xe.YJ)({direction:e,marginStart:"4px"})),"label:StyledVerifiedBadgeColor;"),Wa=(0,de.memo)((function({uniqueId:e,enterMethod:t,onClose:i}){const o=(0,St.Q)(),n=(0,se.mp)(da.z,{selector:t=>{const i=t.users[e],o=t.stats[e];if(!i)return null;const{verified:n,avatarThumb:a,secUid:s,nickname:r,roomId:l,id:d,relation:c,signature:u,secret:p}=i,{followerCount:g=0,videoCount:h=0}=null!=o?o:{};return{avatarThumb:a,secUid:s,verified:n,nickname:r,roomId:l,id:d,uniqueId:e,signature:u,relation:c,secret:p,followerCount:g,videoCount:h}},dependencies:[e]}),{id:a,nickname:s,secUid:r,signature:l,verified:d,followerCount:c,videoCount:p}=(0,Ue.m7)(n),g=(0,Ki.yl)({uniqueId:e,secUid:null!=r?r:""}),h=(0,Sa.zW)(n),{isShowLive:m}=h,_=m?xa.G:wa.D,v=(0,Sa.CN)({user:n,enterMethod:t}),y=(0,ka.Q)(),{handleFollow:b,text:f,isFollowing:x,relation:w}=(0,Ca.w)({uniqueId:e,onNeedLogin:y}),k=x?"default":"line",S=(0,de.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),b(e)}),[b]),C=(0,de.useCallback)((()=>{ba.W.handleEnterUser({to_user_id:a,enter_method:t}),null==i||i()}),[t,a,i]),j=(0,de.useCallback)((e=>{e.stopPropagation(),null==i||i()}),[i]);return(0,u.jsx)(Ta,Object.assign({to:g,onClick:C},{children:(0,u.jsxs)(Ia,{children:[(0,u.jsxs)(Pa,{children:[(0,u.jsx)(_,Object.assign({uniqueId:e,secUid:r,teaParams:v,shouldStopPropagation:!1,onClick:j},{children:(0,u.jsx)(fa.k,Object.assign({},h,{liveTheme:6,size:48}),void 0)}),void 0),(0,u.jsxs)(Oa,{children:[(0,u.jsxs)(La,{children:[(0,u.jsx)(Ma,{children:e},void 0),d&&(0,u.jsx)(Na,{width:14,height:14},void 0),(0,u.jsx)(Ea,{children:s},void 0)]},void 0),(0,u.jsx)(Aa,Object.assign({className:"bottom-part"},{children:l?(0,u.jsx)(Da,Object.assign({className:"signature"},{children:l}),void 0):(0,u.jsxs)(Fa,{children:[(0,u.jsxs)("span",{children:[o("Video"),": ",p]},void 0),(0,u.jsxs)(Ra,{children:[o("Followers"),": ",(0,Ue.BT)(c)]},void 0)]},void 0)}),void 0)]},void 0)]},void 0),(0,u.jsxs)(Ba,Object.assign({size:"small",id:a,buttonTheme:k,onClick:S},{children:[2===w?(0,u.jsx)(ya.Z,{},void 0):null,f]}),void 0)]},void 0)}),a)})),Ua=(0,Ke.Z)("div",{target:"exlovqy0"})({display:"flex",flexDirection:"column",position:"absolute",width:"700px",height:"500px",left:"50%",top:"50%",transform:"translate(-50%, -50%)",background:"#fff",boxShadow:"0 2px 12px rgba(0, 0, 0, .12)",borderRadius:"8px"},"label:DivAccountListModal;"),qa=(0,Ke.Z)("div",{target:"exlovqy1"})((({theme:{colors:e}})=>({position:"relative",height:"56px","::after":{position:"absolute",left:"0",bottom:"0",content:'""',width:"100%",height:"1px",transform:"scaleY(.5)",background:e.LinePrimary}})),"label:DivHeader;"),za=(0,Ke.Z)("div",{target:"exlovqy2"})((({theme:{direction:e}})=>[{display:"flex"},(0,Xe.YJ)({direction:e,marginStart:"14px"})]),"label:DivTabsContainer;"),$a=(0,Ke.Z)("div",{target:"exlovqy3"})((({theme:e,active:t,theme:{colors:i}})=>[(0,Xe.GI)({theme:e,fontFamily:"Proxima",fontWeight:t?"bold":"semiBold",typography:"P2"}),{position:"relative",margin:"24px 30px 0",color:t?i.TextPrimary:i.TextTertiary,cursor:"pointer"},t?{"::after":{position:"absolute",left:"0",bottom:"-10px",content:'""',width:"100%",height:"2px",background:i.TextPrimary}}:null]),"label:DivTab;"),Ha=(0,Ke.Z)("span",{target:"exlovqy4"})((({theme:{direction:e}})=>[(0,Xe.YJ)({direction:e,paddingStart:"4px"})]),"label:SpanCount;"),Za=(0,Ke.Z)("div",{target:"exlovqy5"})((({theme:{colors:e,direction:t}})=>[{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:"16px",width:"32px",height:"32px",background:e.BGView,borderRadius:"16px",cursor:"pointer"},(0,Xe.YJ)({direction:t,end:"16px"})]),"label:DivCloseBtn;"),Va=(0,Ke.Z)("div",{target:"exlovqy6"})((({isHidden:e})=>({flex:"1",overflowY:e?"hidden":"auto"})),"label:DivMain;"),Ga=(0,Ke.Z)("div",{target:"exlovqy7"})({boxSizing:"border-box",width:"100%",padding:"16px 0 16px 12px"},"label:DivUserList;"),Qa=(0,Ke.Z)("div",{target:"exlovqy8"})({boxSizing:"border-box",display:"flex",alignItems:"center",width:"100%",padding:"8px 12px"},"label:DivLoadingContainer;"),Ja=(0,Ke.Z)("div",{target:"exlovqy9"})({width:"48px",height:"48px",flexShrink:0},"label:DivAvatarContainer;"),Ya=(0,Ke.Z)("div",{target:"exlovqy10"})((({theme:{direction:e}})=>[{flexGrow:1},(0,Xe.YJ)({direction:e,marginStart:"12px"})]),"label:DivSkeletonTitleContainer;"),Ka=(0,Ke.Z)("div",{target:"exlovqy11"})({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},"label:DivEmptyContainer;"),Xa=(0,Ke.Z)("p",{target:"exlovqy12"})((({theme:e})=>[(0,Xe.GI)({theme:e,fontFamily:"Proxima",fontWeight:"bold",lineHeight:"24px",typography:"P1"})]),"label:PTitle;"),es=(0,Ke.Z)("p",{target:"exlovqy13"})((({theme:e,theme:{colors:t}})=>[(0,Xe.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P2"}),{marginTop:"8px",color:t.TextSecondary}]),"label:PDesc;"),ts={following:{title:"following",empty:"following_my_empty_desc"},follower:{title:"Followers",empty:"followers_my_empty_desc"},suggest:{title:"common_registration_username_suggested",empty:"profile_suggested_empty_toast"}},is=(0,de.memo)((function(e){var t;const{visible:i,type:o,shouldShowSuggested:n=!0}=e,a=(0,St.Q)(),{user:s}=null!==(t=(0,Qe.Lh)((()=>["user"]),[]))&&void 0!==t?t:{},r=(0,de.useRef)(null),[l,d]=(0,se.b7)(pa,{selector:e=>({following:Object.assign(Object.assign({},e.following),{hasMore:-1!==e.following.maxCursor}),follower:Object.assign(Object.assign({},e.follower),{hasMore:-1!==e.follower.maxCursor}),suggest:Object.assign(Object.assign({},e.suggest),{hasMore:!1})}),dependencies:[],equalFn:(e,t)=>sa()(e,t)}),c={following:"pop_up_following",follower:"pop_up_follower",suggest:"pop_up_suggest"},[p,g]=(0,de.useState)(s?o:"suggest");(0,de.useEffect)((()=>{const{loading:e,list:t}=l.follower;i&&!t.length&&e&&d.getFollowerList({count:20})}),[l,d,i]),(0,de.useEffect)((()=>{i&&g(o)}),[o,i]);const h=(0,de.useCallback)((e=>()=>{g(e),r.current&&(r.current.scrollTop=0)}),[g]),{list:m,loading:_,hasMore:v}=l[p],y=0!==m.length||_,b=(0,va.fB)((()=>{var e;if("suggest"===p||_||!v)return;const{scrollTop:t=0,scrollHeight:i=0}=null!==(e=null==r?void 0:r.current)&&void 0!==e?e:{};t&&i-t<480&&("following"===p?d.getFollowingList({count:20}):d.getFollowerList({count:20}))}),[d,p,_,v],200),f=(0,de.useMemo)((()=>Array.from({length:m.length?1:7}).fill(0)),[m.length]);return(0,u.jsx)(Xt.AR,Object.assign({isOpen:i,compact:!0,closeOnBackdropClick:!0,onClose:e.onClose},{children:(0,u.jsxs)(Ua,{children:[(0,u.jsxs)(qa,{children:[(0,u.jsxs)(za,{children:[s&&["following","follower"].map((e=>(0,u.jsxs)($a,Object.assign({active:p===e,onClick:h(e)},{children:[(0,u.jsx)("span",{children:a(ts[e].title)},void 0),(l[e].total||!l[e].loading)&&(0,u.jsx)(Ha,{children:(0,Ue.BT)(l[e].total)},void 0)]}),e))),n&&(0,u.jsx)($a,Object.assign({active:"suggest"===p,onClick:h("suggest")},{children:(0,u.jsx)("span",{children:a("common_registration_username_suggested")},void 0)}),void 0)]},void 0),(0,u.jsx)(Za,Object.assign({onClick:e.onClose},{children:(0,u.jsx)(ma.Z,{width:14,height:14,style:{color:"rgba(22, 24, 35, 0.75)"}},void 0)}),void 0)]},void 0),(0,u.jsx)(Va,Object.assign({isHidden:_&&!m.length,ref:r,onScroll:b},{children:y?(0,u.jsxs)(Ga,{children:[l[p].list.map((t=>(0,u.jsx)(Wa,{uniqueId:t,enterMethod:c[p],onClose:e.onClose},t))),_&&f.map(((e,t)=>(0,u.jsxs)(Qa,{children:[(0,u.jsx)(Ja,{children:(0,u.jsx)(_a.Od.Avatar,{},void 0)},void 0),(0,u.jsxs)(Ya,{children:[(0,u.jsx)(_a.Od.Title,{style:{width:"119px",height:"16px",margin:"4px 0 12px"}},void 0),(0,u.jsx)(_a.Od.Title,{style:{width:"254px",height:"12px"}},void 0)]},void 0),(0,u.jsx)(_a.Od.Button,{style:{width:"106px",height:"36px",flexShrink:0}},void 0)]},t)))]},void 0):(0,u.jsxs)(Ka,{children:[(0,u.jsx)(Xa,{children:a(ts[p].title)},void 0),(0,u.jsx)(es,{children:a(ts[p].empty)},void 0)]},void 0)}),void 0)]},void 0)}),void 0)}));var os=i(44663);const ns=(0,je.Z)("div",{target:"e797se20"})((({theme:e})=>[{padding:"8px",display:"flex",flexDirection:"row",alignItems:"center",position:"relative",borderRadius:"4px",":hover":{textDecoration:"none"}},(0,Xe.VZ)({theme:e})]),"label:DivUserLinkContainer;"),as=(0,je.Z)(fa.k,{target:"e797se22"})((({isSmall:e=!1})=>[({theme:{direction:t}})=>[(0,Xe.YJ)({direction:t,marginEnd:e?"6px":"12px"}),(0,Xe.f1)({max:1071,style:(0,Xe.YJ)({direction:t,marginStart:"2px",marginEnd:"0"})})],{flex:"0 0 48px"}]),"label:StyledUserAvatar;"),ss=(0,je.Z)(wa.D,{target:"e797se24"})([{flexGrow:1,height:"32px",":hover":{textDecoration:"none"}},(0,Xe.f1)({max:1071,style:{display:"none"}})],"label:StyledUserContentLink;"),rs=(Xe.wj,(0,je.Z)("div",{target:"e797se26"})({display:"flex",flexDirection:"row",alignItems:"center"},"label:DivUserTitleWrapper;")),ls=(0,je.Z)("span",{target:"e797se27"})((({theme:e})=>[(0,Xe.GI)({theme:e,typography:"P2",color:"TextPrimary",fontWeight:"bold",fontFamily:"Sofia"}),{marginTop:"-2px",maxWidth:"260px"}]),Xe.wj,"label:SpanUserTitle;"),ds=(0,je.Z)("p",{target:"e797se29"})((({theme:e})=>[(0,Xe.GI)({theme:e,fontWeight:"normal",typography:"P4",fontFamily:"Proxima",color:"TextSecondary"}),{lineHeight:"15px",maxWidth:"260px"}]),Xe.wj,"label:PUserDesc;"),cs=(0,je.Z)("div",{target:"e797se213"})((({theme:{direction:e}})=>[{padding:"8px",display:"flex",flexDirection:"row",alignItems:"center",height:"48px"},(0,Xe.f1)({max:1071,style:[{justifyContent:"center",width:"48px",height:"48px",marginBottom:"0",padding:"0 8px",borderRadius:"4px"},(0,Xe.YJ)({direction:e,marginStart:"2px"})]})]),"label:DivUserSkeletonContainerV2;"),us=(0,je.Z)("div",{target:"e797se214"})((({theme:{direction:e}})=>[{display:"flex",flexDirection:"column",justifyContent:"space-around",height:"48px"},(0,Xe.YJ)({direction:e,marginStart:"12px"}),(0,Xe.f1)({max:1071,style:{display:"none"}})]),"label:DivSkeletonTitleGroup;"),ps=(0,de.memo)((0,de.forwardRef)((function(e,t){const{itemType:i,uniqueId:o,e2ePrefix:n="",style:a,enterMethod:s="click_panel"}=e,r=(0,se.mp)(da.z,{selector:e=>{const t=e.users[o];if(!t)return null;const{verified:i,avatarThumb:n,secUid:a,nickname:s,roomId:r,id:l,relation:d}=t;return{avatarThumb:n,secUid:a,verified:i,nickname:s,roomId:r,id:l,uniqueId:o,relation:d}},dependencies:[o]}),{secUid:l,verified:d,nickname:c,relation:p}=(0,Ue.m7)(r),g=(0,Sa.zW)(r),{isShowLive:h}=g,m=h?xa.G:wa.D,_=(0,de.useRef)(null),v=(0,de.useRef)(null),y=(0,de.useCallback)((()=>{var e;null===(e=_.current)||void 0===e||e.focus()}),[]);(0,de.useImperativeHandle)(t,(()=>({get offsetTop(){var e,t;return null!==(t=null===(e=_.current)||void 0===e?void 0:e.offsetTop)&&void 0!==t?t:0},get offsetLeft(){var e,t;return null!==(t=null===(e=_.current)||void 0===e?void 0:e.offsetLeft)&&void 0!==t?t:0},setFocus:y})),[y]);const b=(0,Sa.CN)({user:r,enterMethod:s}),f=(0,de.useMemo)((()=>{if(h){let e="";return e="following"===i?"following":"suggest"===i?"recommend":"others",{enter_from_merge:e,enter_method:"suggested_others_photo"}}return{}}),[h,i]);(0,Sa.TB)({isShowLive:h,autoReport:!0,once:!0,enterMethod:"suggested_others_photo",reportTrigger:h,reportValidator:()=>void 0!==p,liveExtraParams:h?f:{},user:r});const{isInVideoFeedRedesign:x}=(0,Wo.y7)(),{isInUILayoutAlignment:w}=(0,Wo.hn)(),{isInHorizontalBoostUI:k}=(0,Wo.yk)(),{pathname:S}=(0,ue.TH)(),C=(0,Se.ws)(S)||(0,Se.Dj)(S)||(0,Se.Qu)(S)||(0,Se.bf)(S)||(0,Se.u7)(S)||(0,Se.cQ)(S),j=x||C||w||k,T=(0,de.useMemo)((()=>j?{maxWidth:"145px"}:{}),[j]),I=(0,de.useCallback)((()=>{h&&ba.W.handleEnterUser({to_user_id:null==r?void 0:r.id,enter_method:s}),Vn({target:h?"live_detail":"others_homepage"})}),[h,null==r?void 0:r.id,s]),P=(0,de.useCallback)((e=>{var t;13===e.keyCode&&(null===(t=v.current)||void 0===t||t.linkClick()),32===e.keyCode&&e.preventDefault()}),[]),O=(0,de.useCallback)((e=>{I(),(0,To.UW)(e)}),[I,To.UW]);return(0,u.jsxs)(ns,Object.assign({onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,ref:_,onKeyDown:P,role:"link",tabIndex:0,style:a},{children:[(0,u.jsx)(m,Object.assign({uniqueId:o,secUid:l,teaParams:b,"data-e2e":`${n}-user-avatar`,ref:v,onClick:O,extraQuery:f,tabIndex:-1},{children:(0,u.jsx)(as,Object.assign({liveTheme:6,size:32},g,{isShowLiveTag:!1}),void 0)}),void 0),(0,u.jsxs)(ss,Object.assign({uniqueId:o,secUid:l,teaParams:b,onClick:O,tabIndex:-1},{children:[(0,u.jsxs)(rs,{children:[(0,u.jsx)(ls,Object.assign({style:T,"data-e2e":`${n}-user-title`},{children:o}),void 0),d&&(0,u.jsx)("div",Object.assign({"data-e2e":`${n}-user-bluev`},{children:(0,u.jsx)(os.Q,{width:14,height:14},void 0)}),void 0)]},void 0),(0,u.jsx)(ds,Object.assign({style:T,"data-e2e":`${n}-user-desc`},{children:c}),void 0)]}),void 0)]}),void 0)}))),gs=(0,de.memo)((function(){return(0,u.jsxs)(cs,{children:[(0,u.jsx)(_a.Od.Avatar,{style:{width:32,height:32}},void 0),(0,u.jsxs)(us,{children:[(0,u.jsx)(_a.Od.Title,{style:{width:107,height:12}},void 0),(0,u.jsx)(_a.Od.Title,{style:{width:66,height:12}},void 0)]},void 0)]},void 0)}));var hs=i(52187);const ms=({color:e,position:t="relative",isBottom:i=!1})=>({position:t,[i?"::after":"::before"]:{content:'""',position:"absolute",left:"8px",right:"8px",[i?"bottom":"top"]:0,height:"1px",background:e,transform:"scaleY(0.5)"}}),_s=(0,je.Z)("div",{target:"e4a681b0"})((({theme:e,theme:{colors:t}})=>[{padding:"16px 0"},(0,Xe.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3"}),ms({color:t.LineSecondary}),(0,Xe.f1)({max:1071,style:{padding:"8px 0"}})]),"label:DivUserContainer;"),vs=(0,je.Z)("h2",{target:"e4a681b1"})([{padding:"0 8px",marginBottom:"8px"},({theme:e})=>(0,Xe.GI)({theme:e,fontWeight:"semiBold",typography:"P3"}),(0,Xe.f1)({max:1071,style:{display:"none"}})],"label:H2Title;"),ys=((0,Xe.f1)({max:1071,style:{display:"none"}}),(0,je.Z)("p",{target:"e4a681b3"})((({theme:e})=>(0,Xe.GI)({theme:e,color:"Primary",fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3"})),"label:PShowMoreText;")),bs=(0,je.Z)("button",{target:"e4a681b4"})([{background:"transparent",border:"none",padding:"0 8px",marginTop:"8px",cursor:"pointer"},(0,Xe.f1)({max:1071,style:{display:"none"}})],"label:ButtonShowMoreText;");bs.defaultProps=Object.assign(Object.assign({},bs.defaultProps),{"data-e2e":"see-all"});const fs=(0,je.Z)(hs.Z,{target:"e4a681b5"})((({up:e,theme:{direction:t}})=>[(0,Xe.YJ)({direction:t,marginStart:"4px"}),{transition:"all 0.3s",transform:e?"rotate(180deg)":"none",display:"none"}]),"label:StyledArrowDown;"),xs=(0,je.Z)("p",{target:"e4a681b6"})((({theme:e})=>[(0,Xe.GI)({theme:e,color:"TextTertiary",fontFamily:"Proxima",fontWeight:"normal",typography:"P3"}),{padding:"0 8px"},(0,Xe.f1)({max:1071,style:{display:"none"}})]),"label:PFollowEmptyHint;"),ws=(0,je.Z)("ul",{target:"e4a681b7"})({padding:0,margin:0,listStyleType:"none"},"label:UlAccountList;"),ks=(0,de.forwardRef)((function({title:e,listType:t,loading:i=!0,children:o},n){const a=(0,se.mp)(pa,{selector:e=>0===e[t].list.length,dependencies:[t]});return(0,u.jsxs)(_s,Object.assign({bottomBar:"following"===t,ref:n},{children:[(0,u.jsx)(vs,Object.assign({"data-e2e":`${t}-accounts`},{children:e}),void 0),a&&i?Array(1).fill("").map(((e,t)=>(0,u.jsx)(gs,{},t))):o]}),void 0)})),Ss=(0,de.memo)((0,de.forwardRef)((function(e,t){const i=(0,g.u)(),o=(0,St.Q)(),[n,a]=(0,de.useState)(!1),[s,r]=(0,de.useState)(!1),l=10,[{authorIdList:d,loading:c,hasMore:p,totalLength:h},m]=(0,se.b7)(pa,{selector:e=>{const{list:t,loading:i,maxCursor:o}=e.following;return{authorIdList:n?t:t.slice(0,l),loading:i,hasMore:-1!==o,totalLength:t.length}},dependencies:[n],equalFn:(e,t)=>sa()(e,t)}),_=(0,de.useRef)(0);_.current=d.length,(0,de.useImperativeHandle)(t,(()=>({handleHitBottom:v()})),[]);const{needRefresh:y,setPathname:b,pathname:f}=Eo();(0,de.useEffect)((()=>{y&&m.getFollowingList({count:l}),b(f)}),[m,y,l]);const{setPlaying:x}=(0,se.qj)(ga.x),w=(0,de.useRef)(!1),k=(0,de.useCallback)((()=>{w.current=!0,p&&n||a(!n),p&&m.getFollowingList({count:l}),!n||(p||!n)&&Vn({target:"see_more"})}),[m,p,n,l,x]),S=(0,de.useRef)([]),C=(0,de.useCallback)((e=>t=>{S.current[e]=t}),[]),{shouldShowToggle:j,showMoreText:T,isSeeMore:I}=(({hasMore:e,isShowingMore:t,totalLength:i,showNum:o,loading:n})=>{const a=(0,St.Q)(),s=e||!t;return{shouldShowToggle:Boolean(i)&&(e&&!t||!e&&i>o||!n),showMoreText:a(s?"feed_caption_see_more":"see_less"),isSeeMore:s}})({hasMore:p,isShowingMore:n,totalLength:h,showNum:l,loading:c}),P=w.current&&I&&p||!p&&!I,O=(0,de.useCallback)((()=>{var e;k(),(p&&I||!p&&I)&&(null===(e=S.current[_.current-1])||void 0===e||e.setFocus())}),[k,p,I]),L=(0,ha.w)(O,[k,p,I]),M=o("desktop_logged_in_profile"),E=(0,de.useCallback)((()=>{r(!1),x(!0)}),[x]);return(0,u.jsxs)(ks,Object.assign({loading:c,listType:"following",title:M},{children:[(0,u.jsx)(ws,{children:h?d.map(((e,t)=>e?(0,u.jsx)("li",{children:(0,u.jsx)(ps,{ref:C(t),uniqueId:e,e2ePrefix:"following",itemType:"following",enterMethod:"click_navigation"},void 0)},e):null)):(0,u.jsx)(xs,{children:o("sidenav_follow_hint")},void 0)},void 0),c?(0,u.jsx)("div",Object.assign({style:{marginTop:"4px"}},{children:(0,u.jsx)(gs,{},void 0)}),void 0):null,j&&(0,u.jsxs)(bs,Object.assign({"data-e2e":"following-see-all",onClick:k,onKeyDown:L,"aria-expanded":P,"aria-labelledby":"side-nav-following-see-all"},{children:[(0,u.jsx)(ys,Object.assign({id:"side-nav-following-see-all"},{children:T}),void 0),(0,u.jsx)(fs,{fill:i.colors.Primary,width:16,height:16,up:n},void 0)]}),void 0),(0,u.jsx)(is,{visible:s,type:"following",onClose:E},void 0)]}),void 0)})));var Cs=i(66046);const js=(0,de.memo)((function(e){const{onEnterItem:t,onLeaveItem:i}=e,o=(0,St.Q)(),{pathname:n}=(0,ue.TH)(),a=(0,se.mp)(Cs.R,{selector:e=>e.uniqueId,dependencies:[]}),s=(0,se.mp)(da.z,{selector:e=>e.users[null!=a?a:""],dependencies:[a]}),r=(0,de.useRef)(""),[l,d]=(0,de.useState)(!1),[c,p]=(0,de.useState)(!1),[{list:g,totalLength:h},m]=(0,se.b7)(pa,{selector:e=>{const{list:t}=e.suggest;return{list:t,totalLength:t.length}},dependencies:[l]}),{needRefresh:_,setPathname:v}=Eo();(0,de.useEffect)((()=>{var e;(0,Se.bf)(n)?r.current!==(null==s?void 0:s.id)&&s&&(r.current=null!==(e=s.id)&&void 0!==e?e:"",m.getRecommendList({pathname:n,userId:null==s?void 0:s.id})):(r.current="-1",_&&m.getRecommendList({pathname:n})),v(n)}),[m,_,n,v,s]);const{setPlaying:y}=(0,se.qj)(ga.x),b=(0,de.useCallback)((()=>{d(!l),!l&&Vn({target:"see_more"})}),[l,y]),f=(0,de.useRef)([]),x=(0,de.useRef)(null),w=(0,de.useCallback)((e=>t=>{f.current[e]=t}),[]),k=(0,de.useCallback)((()=>{var e;b(),!l&&(null===(e=f.current[4])||void 0===e||e.setFocus())}),[b,l]),S=(0,ha.w)(k,[b,l]),C=(0,de.useCallback)(((e,i)=>()=>{var o,n,a,s;null==t||t(e,(null!==(n=null===(o=f.current[i])||void 0===o?void 0:o.offsetTop)&&void 0!==n?n:0)+(null!==(s=null===(a=x.current)||void 0===a?void 0:a.offsetTop)&&void 0!==s?s:0),0)}),[t]),j=(0,de.useCallback)((e=>()=>{null==i||i(e)}),[i]),T=(0,de.useCallback)((()=>{p(!1),y(!0)}),[y]),I=(({pathname:e,user:t})=>{var i;const{user:o}=null!==(i=(0,Qe.Lh)((()=>["user"]),[]))&&void 0!==i?i:{};return!((0,Se.BL)(e)||(0,Se.ws)(e)||(0,Se.Dj)(e)||(0,Se.FZ)(e)&&!o||(0,Se.bf)(e)&&((null==t?void 0:t.secret)||void 0!==t&&(null==t?void 0:t.uniqueId)===(null==o?void 0:o.uniqueId)))})({pathname:n,user:s}),P=(0,de.useMemo)((()=>o(l?"see_less":"see_all")),[l,o]);return I?(0,u.jsxs)(ks,Object.assign({ref:x,listType:"suggest",title:o("sug_accounts")},{children:[(0,u.jsx)(ws,{children:g.map(((e,t)=>e?(0,u.jsx)("li",{children:(0,u.jsx)(ps,{itemType:"suggest",ref:w(t),onMouseEnter:C(e,t),onMouseLeave:j(e),uniqueId:e,e2ePrefix:"suggest",style:!l&&t>=5?{display:"none"}:void 0,enterMethod:"click_panel"},void 0)},e):null))},void 0),h>5&&(0,u.jsx)(bs,Object.assign({isRecommend:!0,onClick:b,onKeyDown:S,"aria-expanded":l,"aria-labelledby":"side-nav-suggest-see-all"},{children:(0,u.jsx)(ys,Object.assign({"data-e2e":"suggest-see-all",id:"side-nav-suggest-see-all"},{children:P}),void 0)}),void 0),(0,u.jsx)(is,{visible:c,type:"suggest",onClose:T},void 0)]}),void 0):null}));var Ts;!function(e){e.DiscoverLinkShow="discover_link_show",e.ClickDiscoverLink="click_discover_link"}(Ts||(Ts={}));let Is=class{constructor(e){this.fetch=e}getDiscoverList(e){return this.fetch.get("/node/share/discover/list",{query:{pageType:e}}).pipe((0,at.U)((e=>e.body.discoverList)))}};Is=(0,b.__decorate)([(0,x.G)(),(0,b.__metadata)("design:paramtypes",[c.r])],Is);let Ps=class extends tt.D{constructor(e){super(),this.service=e,this.defaultState={list:[],loading:!1}}setList(e,t){const{list:i}=t;e.list=i}setLoading(e,t){const{loading:i}=t;e.loading=i}getDiscoverList(e){return e.pipe((0,st.z)((({pageType:e})=>this.service.getDiscoverList(e).pipe((0,pn.b)((e=>{e.forEach(((e,t)=>{const{type:i,title:o,isInternalLink:n}=e;var a;a={link_type:i,order:t,content:o,is_experiment:n?1:0},Ji.W.event("discover_link_show",a)}))})),(0,at.U)((e=>this.getActions().setList({list:e}))),(0,gn.O)(this.getActions().setLoading({loading:!0})),(0,hn.l)(this.getActions().setLoading({loading:!1}),this.terminate()),(0,rt.n)({})))))}};(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Ps.prototype,"setList",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Ps.prototype,"setLoading",null),(0,b.__decorate)([(0,it.Qm)({payloadGetter:1}),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],Ps.prototype,"getDiscoverList",null),Ps=(0,b.__decorate)([(0,ot.Y)("DiscoverList"),(0,b.__metadata)("design:paramtypes",[Is])],Ps);var Os=i(28736),Ls=i(77180),Ms=i(72354);const Es=(0,Be.F4)({"0%":{transform:"translateX(-240px)"},"100%":{transform:"translateX(328px)"}}),As=(0,je.Z)("div",{target:"eikhr9j0"})((({theme:{colors:e}})=>({overflow:"hidden",width:"208px",height:"24px",marginBottom:"12px",borderRadius:"12px",background:e.BGPlaceholderOpaque})),"label:DivDiscoverSkeletonItem;"),Ds=(0,je.Z)("div",{target:"eikhr9j1"})({width:"120px",height:"24px",background:"linear-gradient(90deg, rgba(22, 24, 35, 0) 0%, rgba(22, 24, 35, .06) 50.52%, rgba(22, 24, 35, 0) 100%)",animation:`${Es} 1.5s cubic-bezier(0, 0, 1, 1) infinite`},"label:DivLinearGradient;"),Fs=(0,je.Z)("div",{target:"eikhr9j2"})((({theme:{colors:e}})=>[{position:"relative",boxSizing:"border-box",width:"100%",padding:"16px 8px 8px 8px","::after":{content:'""',position:"absolute",top:"0",width:"calc(100% - 16px)",height:"1px",background:e.LineSecondary,transform:"scaleY(.5)"}},(0,Xe.f1)({max:1071,style:{display:"none"}})]),"label:DivDiscoverContainer;"),Rs=(0,je.Z)("h2",{target:"eikhr9j3"})((({theme:e})=>[(0,Xe.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3"}),{paddingBottom:"16px"}]),"label:H2DiscoverTitle;");Rs.defaultProps=Object.assign(Object.assign({},Rs.defaultProps),{"data-e2e":"nav-discover-title"});const Bs=(0,je.Z)("ul",{target:"eikhr9j4"})({display:"flex",flexWrap:"wrap",width:"100%",padding:0,margin:0,listStyleType:"none"},"label:UlDiscoverListContainer;");Bs.defaultProps=Object.assign(Object.assign({},Bs.defaultProps),{"data-e2e":"nav-discover-list"});const Ns={display:"block",width:"fit-content",maxWidth:"100%",":hover":{textDecoration:"none"}},Ws=(0,je.Z)(qi.rU,{target:"eikhr9j5"})(Ns,"label:StyledLink;");Ws.defaultProps=Object.assign(Object.assign({},Ws.defaultProps),{"data-e2e":"nav-discover-href"});const Us=(0,je.Z)(ea.v,{target:"eikhr9j6"})(Ns,"label:StyledTmpLink;");Us.defaultProps=Object.assign(Object.assign({},Us.defaultProps),{"data-e2e":"nav-discover-href"});const qs=(0,je.Z)("div",{target:"eikhr9j7"})((({theme:e,theme:{colors:t,direction:i}})=>[{display:"flex",boxSizing:"border-box",width:"fit-content",maxWidth:"100%",height:"24px",marginBottom:"12px",padding:"3px 10px",border:`1px solid ${t.LinePrimary}`,borderRadius:"12px",background:t.BGSecondary2},(0,Xe.VZ)({theme:e}),(0,Xe.YJ)({direction:i,marginEnd:"8px"})]),"label:DivDiscoverItemContainer;"),zs=(0,je.Z)(Os.Z,{target:"eikhr9j9"})({flexShrink:0},"label:StyledNumber;"),$s=(0,je.Z)(Ls.Z,{target:"eikhr9j10"})({flexShrink:0},"label:StyledMusicNote;"),Hs=(0,je.Z)(Ms.Z,{target:"eikhr9j11"})({flexShrink:0},"label:StyledMagnifyingGlass;"),Zs=(0,je.Z)("p",{target:"eikhr9j12"})(Xe.wj,(({theme:e,theme:{direction:t}})=>[(0,Xe.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima",fontWeight:"normal",typography:"P3"}),{lineHeight:"18px"},(0,Xe.YJ)({direction:t,paddingStart:"6px"})]),"label:PText;"),Vs=(0,je.Z)("li",{target:"eikhr9j13"})({display:"block"},"label:LiItemContainer;"),Gs=function(){var e;const t=(0,St.Q)(),{pathname:i}=(0,ue.TH)(),{language:o}=null!==(e=(0,Qe.Lh)((()=>["language","abTestVersion"]),[]))&&void 0!==e?e:{},[{list:n,loading:a},s]=(0,se.b7)(Ps,{selector:e=>{const{list:t,loading:i}=e;return{list:t,loading:i}},dependencies:[]}),{needRefresh:r,setPathname:l}=Eo();(0,de.useEffect)((()=>{const e=(0,Se.C2)(i);r&&s.getDiscoverList({pageType:e}),l(i)}),[s,i]);const d=(0,de.useCallback)(((e,t)=>()=>{const{type:i,title:o,isInternalLink:n}=e;switch(a={link_type:i,order:t,content:o,is_experiment:n?1:0},Ji.W.event("click_discover_link",a),i){case 3:ba.W.handleEnterTagDetail({enter_method:"discover"});break;case 4:ba.W.handleEnterMusicDetail({enter_method:"discover"});break;default:ba.W.handleDiscoveryPage({enter_method:"discover"})}var a}),[]);return!a&&n.length<4?null:(0,u.jsxs)(Fs,{children:[(0,u.jsx)(Rs,{children:t("Discover")},void 0),a?(0,u.jsxs)("div",{children:[(0,u.jsx)(As,{children:(0,u.jsx)(Ds,{},void 0)},void 0),(0,u.jsx)(As,{children:(0,u.jsx)(Ds,{},void 0)},void 0)]},void 0):(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(Bs,{children:n.map(((e,t)=>{const{type:i,title:n}=e;let{link:a}=e,s=null;switch(a=`${a.replace("https://www.tiktok.com","")}?lang=${o}`,i){case 3:s=(0,u.jsx)(zs,{width:16,height:16},void 0);break;case 4:s=(0,u.jsx)($s,{width:16,height:16},void 0);break;default:s=(0,u.jsx)(Hs,{width:16,height:16},void 0)}return(0,u.jsx)(Vs,{children:(0,u.jsx)(Us,Object.assign({id:`sidenav-discover-list-item-${t}`,to:a,onClick:d(e,t)},{children:(0,u.jsxs)(qs,{children:[s,(0,u.jsx)(Zs,{children:n},void 0)]},void 0)}),t)},t)}))},void 0)},void 0)]},void 0)};var Qs=i(39198),Js=i(92326),Ys=i(27545),Ks=i(58948);const Xs=(0,je.Z)("div",{target:"e125wy4z0"})((({theme:{colors:e}})=>[{display:"none"},ms({color:e.LineSecondary}),(0,Xe.f1)({max:1071,style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"8px 0"}})]),"label:DivEhEntranceSideContainer;");Xs.defaultProps=Object.assign(Object.assign({},Xs.defaultProps),{"data-e2e":"eh-footer-icon"});const er=(0,je.Z)("div",{target:"e125wy4z1"})((({isDark:e})=>[{display:"block",width:"32px",height:"32px",margin:"8px",backgroundSize:"cover",backgroundImage:e?`url(${Js})`:`url(${Ks})`,": hover":{backgroundImage:e?`url(${Qs})`:`url(${Ys})`}}]),"label:DivEhEntranceSide;"),tr=function(){const{isDark:e}=(0,g.u)(),t=(0,de.useCallback)((()=>{Qn({enter_method:"click_banner"})}),[]),i=(0,de.useRef)(null);Ao({intersectionHandler:()=>{Gn({enter_method:"banner"})},element:i,threshold:[.5]});const o="https://effecthouse.tiktok.com/?utm_source=tiktok_webapp_main&utm_content=left_sidebar";return(0,u.jsx)(Xs,Object.assign({ref:i},{children:(0,u.jsx)(ea.v,Object.assign({forceSSR:!0,to:o,target:"_blank",onClick:t},{children:(0,u.jsx)(er,{isDark:e},void 0)}),o)}),void 0)};var ir=i(48088),or=i(39696),nr=i(27051),ar=i(93394);const sr={id:"eh-logo-dark-2dcd35a5",use:"eh-logo-dark-2dcd35a5-usage",viewBox:"0 0 18 18",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" id="eh-logo-dark-2dcd35a5"><path fill="white" d="M0 18V9a9 9 0 0 1 18 0v9H0Zm15.75-2.25V9a6.75 6.75 0 0 0-9.978-5.93 6.744 6.744 0 0 1 6.619 2.971A4.483 4.483 0 0 1 13.5 9v6.75h2.25ZM6.502 5.257A4.5 4.5 0 0 0 2.25 9.75v6H4.5V9c0-1.56.795-2.936 2.002-3.743Zm4.096 2.16A2.25 2.25 0 0 0 6.75 9v6.75h4.5v-6a4.48 4.48 0 0 0-.652-2.333Z" /></symbol>'};function rr(e){const t=(0,de.useContext)(ne.e);return(0,de.useLayoutEffect)((()=>(t.add(sr),()=>{t.remove("eh-logo-dark-2dcd35a5")})),[]),(0,u.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,u.jsx)("use",{xlinkHref:"#eh-logo-dark-2dcd35a5"},void 0)}),void 0)}const lr={id:"eh-logo-a5ac4daf",use:"eh-logo-a5ac4daf-usage",viewBox:"0 0 18 18",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" id="eh-logo-a5ac4daf"><path fill="black" d="M0 18V9a9 9 0 0 1 18 0v9H0Zm15.75-2.25V9a6.75 6.75 0 0 0-9.978-5.93 6.744 6.744 0 0 1 6.619 2.971A4.483 4.483 0 0 1 13.5 9v6.75h2.25ZM6.502 5.257A4.5 4.5 0 0 0 2.25 9.75v6H4.5V9c0-1.56.795-2.936 2.002-3.743Zm4.096 2.16A2.25 2.25 0 0 0 6.75 9v6.75h4.5v-6a4.48 4.48 0 0 0-.652-2.333Z" /></symbol>'};function dr(e){const t=(0,de.useContext)(ne.e);return(0,de.useLayoutEffect)((()=>(t.add(lr),()=>{t.remove("eh-logo-a5ac4daf")})),[]),(0,u.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,u.jsx)("use",{xlinkHref:"#eh-logo-a5ac4daf"},void 0)}),void 0)}const cr=(0,je.Z)("div",{target:"el3hfgg0"})((({theme:{colors:e,direction:t}})=>[{position:"relative",paddingTop:"16px","::before":{content:'""',position:"absolute",left:"8px",right:"8px",top:0,height:"1px",background:e.LineSecondary,transform:"scaleY(0.5)"}},(0,Xe.YJ)({direction:t,paddingStart:"8px"}),(0,Xe.f1)({max:1071,style:{display:"none"}})]),"label:DivFooterContainer;"),ur=(0,je.Z)("div",{target:"el3hfgg1"})({marginBottom:"8px"},"label:DivLinkContainer;"),pr=e=>[(0,Xe.GI)({theme:e,color:"TextTertiary",fontFamily:"Proxima",fontWeight:"semiBold",typography:"P4",isLink:!0}),{display:"inline-block",marginRight:"6px",marginTop:"5px"}],gr=(0,je.Z)("span",{target:"el3hfgg2"})((({theme:e})=>pr(e)),"label:SpanCopyright;");gr.defaultProps=Object.assign(Object.assign({},gr.defaultProps),{"data-e2e":"copyright"});const hr=(0,je.Z)(ea.v,{target:"el3hfgg3"})((({theme:e})=>pr(e)),"label:StyledNavLink;"),mr=(0,je.Z)("div",{target:"el3hfgg4"})({marginBottom:"8px",position:"relative"},"label:DivMoreContainer;"),_r=(0,je.Z)("div",{target:"el3hfgg5"})((({theme:{direction:e}})=>[(0,Xe.YJ)({direction:e,paddingEnd:"8px"}),{height:"50px",textAlign:"center",position:"relative",marginBottom:"30px"}]),"label:DivEffectHouseEntranceContainer;");_r.defaultProps=Object.assign(Object.assign({},_r.defaultProps),{"data-e2e":"eh-footer-banner"});const vr=(0,je.Z)("div",{target:"el3hfgg6"})((({theme:{direction:e}})=>(0,Xe.YJ)({direction:e})),{position:"absolute",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",maxWidth:"200px"},"label:DivEntranceTextContainer;"),yr=(0,je.Z)(ea.v,{target:"el3hfgg7"})([{display:"flex",alignItems:"center",justifyContent:"center",":hover":{[`${vr}`]:{transform:"scale(1.06)",transition:"transform 200ms cubic-bezier(0.25, 0, 0.25, 1)",textDecoration:"none"}}}],"label:StyledEHEntranceLink;"),br=(0,je.Z)("img",{target:"el3hfgg8"})({height:"52px",borderRadius:"8px"},"label:ImgEffectBg;"),fr=(0,je.Z)(rr,{target:"el3hfgg10"})((({theme:{direction:e}})=>[(0,Xe.YJ)({direction:e,marginEnd:"9px"}),{width:"19px",height:"19px",marginTop:"2px"}]),"label:StyledEHLogoDark;"),xr=(0,je.Z)("h4",{target:"el3hfgg11"})((({theme:e})=>[(0,Xe.GI)({theme:e,typography:"P2",color:"TextPrimary",fontWeight:"semiBold",fontFamily:"Sofia"})]),{display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},"label:H4EhText;"),wr=(0,je.Z)(dr,{target:"el3hfgg12"})((({theme:{direction:e}})=>[(0,Xe.YJ)({direction:e,marginEnd:"9px"}),{width:"19px",height:"19px",marginTop:"2px"}]),"label:StyledEHLogo;"),kr=(0,je.Z)("span",{target:"el3hfgg13"})((({theme:e})=>pr(e)),{cursor:"pointer"},"label:SpanMoreText;");kr.defaultProps=Object.assign(Object.assign({},kr.defaultProps),{"data-e2e":"more-link"});const Sr=(0,je.Z)("div",{target:"el3hfgg14"})({padding:"15px 16px 20px",width:"fit-content",maxWidth:"200px"},"label:DivMorePopupWrapper;"),Cr=(0,je.Z)(ea.v,{target:"el3hfgg15"})((({theme:e})=>[(0,Xe.GI)({theme:e,typography:"P2",fontWeight:"semiBold"}),{display:"block",":hover":{textDecoration:"none",color:e.colors.Primary},"& + &":{marginTop:"20px"}}]),"label:StyledMoreLink;"),jr=(0,de.memo)((function({navList:e,e2e:t}){return(0,u.jsx)(ur,{children:e.map((e=>(0,u.jsx)(hr,Object.assign({forceSSR:!0,to:e.href,"data-e2e":t,target:"_blank"},{children:e.title}),e.href)))},void 0)}));var Tr;!function(e){e.Sidebar="sidebar",e.Footer="footer"}(Tr||(Tr={}));const Ir="copyright-policy",Pr=[{title:"terms",key:"terms-of-service",href:""},{title:"privacy",key:"privacy-policy-row",href:""},{title:"copyright",key:"copyright-policy",href:""}];function Or(e){var t;return null!==(t=null==e?void 0:e.children.filter((({placements:e=[]})=>0===e.length||e.includes("sidebar"))))&&void 0!==t?t:[]}const Lr=(0,de.memo)((function({lang:e}){var t;const i=(0,St.Q)(),{active:o,handleMouseEnter:n,handleMouseLeave:a}=(0,ir.R)(),{isDark:s}=(0,g.u)(),{region:r}=(0,se.mp)(Q.G,{selector:e=>{var t;return{region:null===(t=e.appContext)||void 0===t?void 0:t.region}},dependencies:[]}),{navList:l=[],$legalList:d}=(0,se.mp)(pe.r,{selector:e=>{var t,o,n;return{$legalList:null===(o=null===(t=e.bizContext)||void 0===t?void 0:t.navList.find((({title:e})=>e===i("Legal"))))||void 0===o?void 0:o.children,navList:null===(n=e.bizContext)||void 0===n?void 0:n.navList}},dependencies:[]}),{pageList:c,programList:p,legalList:h}=(0,de.useMemo)((()=>{const t=[{title:i("help"),key:"help-center",href:`https://support.tiktok.com/${e}`},{title:i("safety"),key:"safety-center",href:`https://www.tiktok.com/safety?lang=${e}`},...Pr.reduce(((t,o)=>{var n;const a=(null!=d?d:[]).map((({key:e})=>e)).indexOf(o.key);return o.key===Ir&&(t.push({title:i("help_center_creator_portal"),key:"create-portal",href:"https://www.tiktok.com/creators/creator-portal/en-us/"}),t.push({title:i("Community Guidelines"),key:"community-guidelines",href:`https://www.tiktok.com/community-guidelines?lang=${e}`})),a>=0&&t.push(Object.assign(Object.assign({},o),{title:i(o.title),href:null!==(n=null==d?void 0:d[a].href)&&void 0!==n?n:""})),t}),[])],o=Or(l[0]),n=Or(l[1]);return n.splice(3,0,{href:`https://www.tiktok.com/transparency?lang=${e}`,key:"transparency",title:i("Transparency")}),{pageList:o,programList:n,legalList:t}}),[d,e,l,i]),m=(0,Qe.Lh)((()=>["abTestVersion"]),[]),_="v2"===(null!==(t=(0,He.N8)(null==m?void 0:m.abTestVersion,"studio_web_eh_entrance"))&&void 0!==t?t:"v1"),v=(0,de.useCallback)((()=>{Qn({enter_method:"click_banner"})}),[]),y=(0,de.useRef)(null);Ao({intersectionHandler:()=>{Gn({enter_method:"banner"})},element:y,threshold:[.5]});const b=`${(new Date).getFullYear()} TikTok`,f=(null!=d?d:[]).filter((e=>-1===h.findIndex((({key:t})=>t===e.key))||e.key===Ir));"DE"===(null==r?void 0:r.trim().toUpperCase())&&f.splice(3,0,{href:"https://www.tiktok.com/transparency/de-de/netzdg-about/",key:"netzdg",title:"NetzDG"}),"AT"===(null==r?void 0:r.trim().toUpperCase())&&f.push({href:"https://www.tiktok.com/transparency/de-de/koplg-about/",key:"kopig",title:"KoPi-G"});const x="https://effecthouse.tiktok.com/?utm_source=tiktok_webapp_main&utm_content=left_sidebar";return(0,u.jsxs)(cr,{children:[_&&(0,u.jsx)(_r,Object.assign({ref:y},{children:(0,u.jsxs)(yr,Object.assign({forceSSR:!0,to:x,target:"_blank",onClick:v},{children:[(0,u.jsx)(br,{src:s?nr:ar,alt:"eh-background"},void 0),(0,u.jsxs)(vr,{children:[s?(0,u.jsx)(fr,{},void 0):(0,u.jsx)(wr,{},void 0),(0,u.jsx)(xr,{children:i("webapp_ttehEntrance_createEffects")},void 0)]},void 0)]}),x)}),void 0),(0,u.jsx)(jr,{navList:c,e2e:"page-link"},void 0),(0,u.jsx)(jr,{navList:p,e2e:"program-link"},void 0),(0,u.jsx)(jr,{navList:h,e2e:"legal-link"},void 0),f.length>0&&(0,u.jsx)(mr,{children:(0,u.jsxs)(kr,Object.assign({onMouseEnter:n,onMouseLeave:a},{children:[i("more"),(0,u.jsx)(or.G,Object.assign({active:o,placement:"topLeft",verticalOffset:5},{children:(0,u.jsx)(Sr,{children:f.map((({title:e,href:t})=>(0,u.jsx)(Cr,Object.assign({forceSSR:!0,to:t,target:"_blank"},{children:e}),e)))},void 0)}),void 0)]}),void 0)},void 0),(0,u.jsxs)(gr,{children:["© ",b]},void 0)]},void 0)}));var Mr=i(14500);const Er="https://livecenter.tiktok.com",Ar="=+~#$@",Dr={"[]":/\[([^[\]]+)\]/g,"{}":/\{([^{}]*)\}/g,"%s":/%s/g,"<>":/<([^<>]*)>/g},Fr=({text:e,matchArr:t,replaceComponents:i})=>{const[o,n]=(0,de.useState)([]);return(0,de.useEffect)((()=>{let o=[];const a=[],s=Dr[t];let r=e;r=e.replace(s,((...e)=>(a.push(e[1]),Ar))),o=r.split(Ar);const l=[];o.forEach(((e,t)=>{if(l.push(e),a.length>t&&i.length>0){const e=i[t%i.length];l.push((0,u.jsx)(e,{text:a[t],matchIndex:t},t))}})),n(l)}),[e,t,i]),(0,u.jsx)(u.Fragment,{children:o},void 0)};var Rr=i(70040);const Br={id:"video-warning-ef2c7903",use:"video-warning-ef2c7903-usage",viewBox:"0 0 84 81",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 84 81" id="video-warning-ef2c7903"><path fill="white" d="M36.802 9.019c2.308-4.005 8.088-4.005 10.396 0l31.117 53.985c2.305 4-.582 8.996-5.199 8.996H10.884c-4.617 0-7.504-4.996-5.199-8.996L36.802 9.019Z" /><path fill="url(#video-warning-ef2c7903_a)" d="M38.522 10.121c1.534-2.699 5.422-2.699 6.956 0l30.627 53.903C77.62 66.69 75.694 70 72.627 70H11.373c-3.067 0-4.993-3.31-3.478-5.976l30.627-53.903Z" /><path fill="white" d="M38.5 28a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v23a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1V28Z" /><circle cx="41.5" cy="59" r="3" fill="white" /><defs><linearGradient id="video-warning-ef2c7903_a" x1="33.5" x2="64" y1="20.5" y2="67" gradientUnits="userSpaceOnUse"><stop stop-color="#FF796B" /><stop offset="1" stop-color="#FF4C3A" /></linearGradient></defs></symbol>'};function Nr(e){const t=(0,de.useContext)(ne.e);return(0,de.useLayoutEffect)((()=>(t.add(Br),()=>{t.remove("video-warning-ef2c7903")})),[]),(0,u.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,u.jsx)("use",{xlinkHref:"#video-warning-ef2c7903"},void 0)}),void 0)}const Wr=(0,Rr.Z)("div",{target:"e1m9td0x0"})({width:400,display:"flex",flexDirection:"column",alignItems:"center",padding:"36px 19px 32px 19px"},"label:DivContainer;"),Ur=(0,Rr.Z)(Nr,{target:"e1m9td0x1"})([{width:83,height:81,marginBottom:24}],"label:StyledVideoWarningIcon;"),qr=(0,Rr.Z)("div",{target:"e1m9td0x2"})((({theme:e})=>[(0,Xe.GI)({theme:e,typography:"P3",fontFamily:"Proxima",color:"TextPrimary"}),{textAlign:"center",marginBottom:24}]),"label:DivContent;"),zr=(0,Rr.Z)("div",{target:"e1m9td0x3"})((({theme:e})=>[(0,Xe.GI)({theme:e,typography:"P4",fontFamily:"Proxima",color:"TextTertiary"}),{marginBottom:24}]),"label:DivTips;"),$r=(0,Rr.Z)("span",{target:"e1m9td0x4"})((({theme:e})=>[(0,Xe.GI)({theme:e,typography:"P4",fontFamily:"Proxima",color:"Primary"}),{marginBottom:24}]),"label:SpanTipsHighlight;"),Hr=(0,Rr.Z)(ei.W,{target:"e1m9td0x5"})((({theme:e,theme:{colors:t}})=>[(0,Xe.GI)({theme:e,typography:"P3",fontFamily:"Proxima",color:"ConstTextInverse",fontWeight:"semiBold"}),{padding:"12px auto",textAlign:"center",width:"100%",backgroundColor:t.Primary,":hover":{backgroundColor:t.Primary}}]),"label:StyledButton;"),Zr=function({onOkClick:e,visible:t,duration:i}){const o=(0,St.Q)(),n=(0,de.useMemo)((()=>[({text:e})=>(0,u.jsx)($r,{children:e},void 0)]),[]);return(0,u.jsx)(di.u_,Object.assign({visible:t,maskClosable:!1},{children:(0,u.jsxs)(Wr,{children:[(0,u.jsx)(Ur,{},void 0),(0,u.jsx)(qr,{children:o("pm_mt_obs_revoke_desc")},void 0),(0,u.jsx)(zr,{children:(0,u.jsx)(Fr,{text:o("pm_mt_revoke_duration",{num:i,number:i}).replace("%s",i),matchArr:"%s",replaceComponents:n},void 0)},void 0),(0,u.jsx)(Hr,Object.assign({type:"submit",onClick:e},{children:o("pm_mt_modal_revoke_confirm_btn")}),void 0)]},void 0)}),void 0)},Vr=(0,je.Z)("div",{target:"enmnmya0"})((({theme:e})=>[(0,Xe.GI)({theme:e,fontFamily:"Proxima",typography:"P3",color:"ConstTextInverse",fontWeight:"normal"}),{display:"none",position:"fixed",left:0,top:0,padding:"12px",borderRadius:"8px",zIndex:100,background:"#4b4b4b"},(0,Xe.f1)({max:1071,style:{display:"block"}})]),"label:DivNavHintContainer;"),Gr=function({text:e,active:t,containerRef:i,scrollRef:o}){const{transform:n}=function({containerRef:e,scrollRef:t}){const{direction:i}=(0,g.u)(),[o,n]=(0,de.useState)(-1e3),[a,s]=(0,de.useState)(-1e3),r=()=>{var t,o;if(!e.current)return;const a=e.current.getBoundingClientRect();s(null!==(t="ltr"===i?a.left+a.width+12:a.left-12)&&void 0!==t?t:0),n(null!==(o=a.top+a.height/2)&&void 0!==o?o:0)},l=(0,va.fB)(r,[e,i],200),d=(0,de.useCallback)(r,[e,i]);return(0,de.useEffect)((()=>{var e;const i=null===(e=t.current)||void 0===e?void 0:e.dom;return window.addEventListener("resize",l),null==i||i.addEventListener("scroll",d),window.addEventListener("recalculate-tip-position",d),l(),()=>{window.removeEventListener("resize",l),window.removeEventListener("recalculate-tip-position",d),null==i||i.removeEventListener("scroll",d)}}),[e,l,d,t]),{top:o,left:a,transform:`translate(${"ltr"===i?"0":"-100%"}, -50%) translate(${a}px, ${o}px)`}}({containerRef:i,scrollRef:o});return t?(0,y.createPortal)((0,u.jsx)(Vr,Object.assign({style:{transform:n}},{children:e}),void 0),document.body):null},Qr=(0,je.Z)("div",{target:"e1k5k7j00"})((({theme:{colors:e,direction:t}})=>[{padding:"8px",position:"relative","::before":{content:'""',position:"absolute",left:"8px",top:"0px",right:"8px",height:"1px",background:e.LineSecondary,transform:"scaleY(0.5)"}},(0,Xe.f1)({max:1071,style:{[`${Kr}`]:{display:"none"},[`${el}`]:[(0,Xe.YJ)({direction:t,marginEnd:"0"})]}})]),"label:DivGoLiveEntranceContainer;"),Jr=(0,je.Z)(ea.v,{target:"e1k5k7j01"})((({theme:e})=>[(0,Xe.GI)({theme:e,typography:"P2",fontWeight:"bold",fontFamily:"Proxima"}),{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",height:"36px",background:e.colors.BGInput,":hover":{textDecoration:"none"}},(0,Xe.VZ)({theme:e,hover:"rgba(22, 24, 35, 0.1)",active:"rgba(22, 24, 35, 0.14)"})]),"label:StyledLink;"),Yr=(0,je.Z)("div",{target:"e1k5k7j02"})((({theme:e})=>[(0,Xe.GI)({theme:e,typography:"P2",fontWeight:"bold",fontFamily:"Proxima"}),{textAlign:"center",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",height:"36px",background:e.colors.BGInput,":hover":{textDecoration:"none"}},(0,Xe.VZ)({theme:e,hover:"rgba(22, 24, 35, 0.1)",active:"rgba(22, 24, 35, 0.14)"})]),"label:DivText;"),Kr=(0,je.Z)("span",{target:"e1k5k7j03"})((({theme:{colors:e},isLiveStreaming:t,isDisabled:i})=>({color:i?e.TextQuaternary:t?e.Primary:e.TextPrimary})),"label:SpanText;"),Xr=[(0,Be.F4)({"0%":{y:"4px",height:"10px"},"40%":{y:"4px",height:"12px"},"70%":{y:"4px",height:"6px"},"100%":{y:"4px",height:"10px"}}),(0,Be.F4)({"0%":{y:"4px",height:"6px"},"40%":{y:"4px",height:"10px"},"70%":{y:"4px",height:"12px"},"100%":{y:"4px",height:"6px"}}),(0,Be.F4)({"0%":{y:"4px",height:"8px"},"40%":{y:"4px",height:"12px"},"70%":{y:"4px",height:"6px"},"100%":{y:"4px",height:"8px"}})],el=(0,je.Z)("svg",{target:"e1k5k7j04"})((({isLiveStreaming:e,theme:{direction:t}})=>[(0,Xe.YJ)({direction:t,marginEnd:"4px"}),e?{rect:{transformOrigin:"center",transform:"rotateZ(180deg)",":nth-of-type(1)":{animation:`${Xr[0]} .5s ease-out infinite`},":nth-of-type(2)":{animation:`${Xr[1]} .5s ease-out infinite`},":nth-of-type(3)":{animation:`${Xr[2]} .5s ease-out infinite`}}}:null]),"label:SvgLiveIcon;"),tl=(0,de.memo)((function({isLiveStreaming:e,isDisabled:t}){const{colors:i}=(0,g.u)(),o=t?i.TextQuaternary:e?i.Primary:i.Primary2;return(0,u.jsxs)(el,Object.assign({isLiveStreaming:!t&&e,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:[(0,u.jsx)("rect",{x:"4.1665",y:"4.16797",width:"2.69231",height:"11.6667",rx:"0.5",fill:o},void 0),(0,u.jsx)("rect",{x:"8.65381",y:"9.02734",width:"2.69231",height:"6.80555",rx:"0.5",fill:o},void 0),(0,u.jsx)("rect",{x:"13.1406",y:"7.08594",width:"2.69231",height:"8.75",rx:"0.5",fill:o},void 0)]}),void 0)})),il=function({scrollRef:e}){var t,i;const o=(0,St.Q)(),[n,a]=(0,de.useState)(!1),[s,r]=(0,de.useState)(!1),l=function(){const{liveStatus:e}=(0,se.mp)($n);return[1,2,3].includes(e)}(),{permissionInfo:d}=(0,se.mp)(an),{roomCreateInfo:c}=(0,se.mp)($n),p=1===Number(null===(t=null==c?void 0:c.obs_accees_recall_info)||void 0===t?void 0:t.status),g=(h=Number(null===(i=null==c?void 0:c.obs_accees_recall_info)||void 0===i?void 0:i.duration),parseInt((h/86400).toString())||1).toString();var h;const{user:m,lang:_}=(0,se.mp)(Q.G,{dependencies:[],selector:({appContext:e,lang:t})=>{var i,o,n;return{user:{uniqueId:null===(i=null==e?void 0:e.user)||void 0===i?void 0:i.uniqueId,secUid:null===(o=null==e?void 0:e.user)||void 0===o?void 0:o.secUid,uid:null===(n=null==e?void 0:e.user)||void 0===n?void 0:n.uid},lang:t}}}),v=(0,Ze.fz)(Mr.yB),y=o(p?"go_live":l?"live_on_status":"go_live"),b=(0,de.useRef)(null),f=(0,de.useCallback)((()=>{var e;if(!l&&!p){const t=(0,To.le)(ge.AH);v.handleLiveStreamEntranceClick({anchor_id:null!==(e=m.uid)&&void 0!==e?e:"",is_notified:t?0:1,is_application_needed:(null==d?void 0:d.hasLiveApplyPermission)?1:0})}p&&a(!0),(0,To.D$)(ge.AH,JSON.stringify({name:m.uniqueId}))}),[l,v,m.uid,m.uniqueId,null==d?void 0:d.hasLiveApplyPermission,p]),x=(0,de.useCallback)((()=>{r(!0)}),[]),w=(0,de.useCallback)((()=>{r(!1)}),[]),k=`${Er}/producer?enter_from=webapp`,S=(0,wn.stringifyUrl)({url:k,query:{lang:_}}),C=(0,de.useMemo)((()=>p?(0,u.jsxs)(Yr,Object.assign({onClick:f},{children:[(0,u.jsx)(tl,{isDisabled:!0,isLiveStreaming:l},void 0),(0,u.jsx)(Kr,Object.assign({isLiveStreaming:l,"data-e2e":"go-live-entrance-text",isDisabled:!0},{children:y}),void 0)]}),void 0):(0,u.jsxs)(Jr,Object.assign({forceSSR:!0,to:S,onClick:f},{children:[(0,u.jsx)(tl,{isDisabled:!1,isLiveStreaming:l},void 0),(0,u.jsx)(Kr,Object.assign({isLiveStreaming:l,"data-e2e":"go-live-entrance-text",isDisabled:!1},{children:y}),void 0)]}),void 0)),[p,!1,S,l,f,y]),j=(0,de.useCallback)((()=>a(!1)),[]);return(0,de.useEffect)((()=>{var e,t;n&&(t={anchor_id:null!==(e=m.uid)&&void 0!==e?e:""},Ji.W.event("livesdk_obs_revoke_remind",t))}),[n,m.uid]),(0,u.jsxs)(Qr,Object.assign({ref:b,onMouseEnter:x,onMouseLeave:w,"data-e2e":"go-live-entrance"},{children:[C,(0,u.jsx)(Gr,{active:s,text:y,scrollRef:e,containerRef:b},void 0),(0,u.jsx)(Zr,{visible:n,onOkClick:j,duration:g},void 0)]}),void 0)},ol=(0,je.Z)("div",{target:"efna91q0"})([{position:"relative",padding:"20px 8px 24px 8px",margin:"0","::before":{content:'""',position:"absolute",height:"1px",left:"8px",right:"8px",background:"rgba(22, 24, 35, .12)",transform:"scaleY(.5)",top:"0"}},(0,Xe.f1)({max:1071,style:{display:"none"}})],"label:DivFrameContainer;"),nl=(0,je.Z)("p",{target:"efna91q1"})((({theme:e})=>(0,Xe.GI)({theme:e,typography:"P2",color:"TextTertiary"})),"label:PLoginHint;");nl.defaultProps=Object.assign(Object.assign({},nl.defaultProps),{"data-e2e":"nav-login-tip"});const al=(0,je.Z)(ei.W,{target:"efna91q2"})({marginTop:"20px",width:"100%"},"label:StyledLogin;");al.defaultProps=Object.assign(Object.assign({},al.defaultProps),{"data-e2e":"nav-login-button"});const sl=function(){var e,t;const i=(0,St.Q)(),o=(0,se.qj)(Ti.r),n=(0,Qe.Lh)((()=>["abTestVersion"]),[]),a=null!==(e=(0,He.N8)(null==n?void 0:n.abTestVersion,"search_video"))&&void 0!==e?e:"v1",{user:s}=null!==(t=(0,Qe.Lh)((()=>["user"]),[]))&&void 0!==t?t:{},r=Boolean(s),l=(0,de.useCallback)((()=>{o.openModal({query:{enter_method:"click_navigation",enter_from:Ji.W.commonParams.page_name,redirect_url:(0,pt.AY)(),type:"general_search"!==Ji.W.commonParams.page_name&&"search_video"!==Ji.W.commonParams.page_name&&"search_user"!==Ji.W.commonParams.page_name||"v3"!==a&&"v4"!==a||r?"":"loginsearchmore"}}),Vn({target:"login"})}),[o,a,r]);return(0,u.jsxs)(ol,{children:[(0,u.jsx)(nl,{children:i("sidenav_login_cta")},void 0),(0,u.jsx)(al,Object.assign({buttonTheme:"line",onClick:l},{children:i("Log In")}),void 0)]},void 0)};var rl,ll=i(47245),dl=i(91747),cl=i(76760),ul=i(36346),pl=i(33567),gl=i(66020),hl=i(47545),ml=i(52260),_l=i(51963),vl=i(72700);function yl(){const{canShowliveEntry:e}=function(){const e=(0,Qe.Lh)((()=>["user","abTestVersion"]),[]),t=(0,Je.h)((()=>["liveSuggestConfig","liveCommonConfig"]),[]),i=function(){var e;const{botType:t}=null!==(e=(0,Qe.Lh)((()=>["botType"]),[]))&&void 0!==e?e:{};return"others"!==t}();return(0,de.useMemo)((()=>{var o,n,a;if((null===(o=null==t?void 0:t.liveCommonConfig)||void 0===o?void 0:o.regionEntry)||i)return{canShowliveEntry:!0,canLoadFeed:!0,canEnterRoom:!0};const s=null===(n=null==t?void 0:t.liveSuggestConfig)||void 0===n?void 0:n.isBlockedArea,r=null===(a=null==t?void 0:t.liveSuggestConfig)||void 0===a?void 0:a.isRiskArea,l=Boolean(null==e?void 0:e.user);return s?{canShowliveEntry:!1,canLoadFeed:!1,canEnterRoom:!1}:r&&!l?{canShowliveEntry:!0,canLoadFeed:!1,canEnterRoom:!1}:{canShowliveEntry:!0,canLoadFeed:!0,canEnterRoom:!0}}),[i,t,e])}();return e}!function(e){e.Show="livesdk_live_tab_show"}(rl||(rl={}));var bl,fl=i(64176),xl=i(3148);!function(e){e.SwitchFeedMode="switch_feed_mode"}(bl||(bl={}));var wl=i(85941);const kl={path:"/",Icon:cl.Z,ActiveIcon:ul.Z,text:"for_you",teaReport:()=>{Vn({target:"trending"}),ba.W.handleEnterTrending({enter_method:"navigation_bar"})},linkProps:{"data-e2e":"nav-foryou",disableAutoLang:!0}},Sl={path:"/following",Icon:pl.Z,ActiveIcon:gl.Z,text:"Following",teaReport:()=>{Vn({target:"following"}),ba.W.handleEnterFollowing({enter_method:"navigation_bar"})},linkProps:{"data-e2e":"nav-following",disableAutoLang:!1}},Cl={path:"/explore",Icon:ll.Z,ActiveIcon:dl.Z,text:"pc_web_explore_main_header",teaReport:()=>{Vn({target:"explore"}),ba.W.handleEnterExplore({enter_method:"click_explore_tab"})},linkProps:{"data-e2e":"nav-explore",disableAutoLang:!1}},jl={path:"/live",Icon:hl.Z,ActiveIcon:ml.Z,text:"LIVE",teaReport:()=>{Vn({target:"live"}),ba.W.handleEnterLiveDiscover({enter_method:"navigation_bar"})},linkProps:{"data-e2e":"nav-live",disableAutoLang:!1}};function Tl({currentPath:e,configPath:t}){return e===t}const Il=function(e){const{text:t,path:i,onClick:o,onLoad:n,onCheckActive:a=Tl,Container:s=wl.Ej,Icon:r,ActiveIcon:l,linkProps:d,teaReport:c,scrollRef:p,forceSSR:h}=e,m=(0,St.Q)(),{pathname:_}=(0,ue.TH)(),{colors:v}=(0,g.u)(),[y,b]=(0,de.useState)(a({configPath:i,currentPath:_})),f=y?l:r,[x,w]=(0,de.useState)(!1),k=(0,de.useCallback)((e=>{c(),null==o||o(e)}),[o,c]);(0,de.useEffect)((()=>{b(a({configPath:i,currentPath:location.pathname}))}),[a,i,_]),(0,de.useEffect)((()=>{null==n||n()}),[n]);const S=(0,de.useRef)(null),C=(0,de.useCallback)((()=>{w(!0)}),[]),j=(0,de.useCallback)((()=>{w(!1)}),[]);return(0,u.jsx)("li",{children:(0,u.jsx)("div",Object.assign({ref:S},{children:(0,u.jsxs)(s,Object.assign({to:i,onClick:k},d,{forceSSR:h,onMouseEnter:C,onMouseLeave:j},{children:[(0,u.jsx)(f,{fill:y?v.Primary:v.Primary2,width:32,height:32},void 0),(0,u.jsx)(wl.EZ,Object.assign({active:y},{children:m(t)}),void 0),e.topRightBadge,(0,u.jsx)(Gr,{active:x,text:m(t),scrollRef:p,containerRef:S},void 0)]}),void 0)}),void 0)},void 0)},Pl=(0,de.memo)((function({scrollRef:e}){const t=yl(),{pathname:i}=(0,ue.TH)(),o=(0,se.qj)(Zn.h),[{enterForyou:n},{setEnterForyou:a}]=(0,se.b7)(_l.e),[s,r]=(0,de.useState)(!1),l=(0,St.Q)(),{lang:d=""}=(0,se.mp)(Q.G,{selector:({appContext:e})=>{const{language:t}=null!=e?e:{};return{lang:t}},dependencies:[]}),{hasVisitedFollowing:c,redDotCount:p}=(0,se.mp)(vl.r);(0,de.useEffect)((()=>{!(0,Se.oC)(i)&&a(!1)}),[a,i]);const g=(0,de.useCallback)((()=>n&&(0,Se.cQ)(i)||(0,Se.oC)(i)),[i,n]),{abTestVersion:h,language:m,user:_}=(0,Ue.m7)((0,Qe.Lh)((()=>["abTestVersion","language","user"]),[])),v=(0,de.useCallback)((e=>{var t,n;(0,Se.oC)(i)&&(e.preventDefault(),o.resetItemList({key:"foryou"}),o.getRecommendList({key:"foryou",routeName:null!==(n=null===(t=(0,Re.OJ)(i))||void 0===t?void 0:t.name)&&void 0!==n?n:Re.Ur.foryou,abTestVersion:h,language:m,user:_,pullType:1}))}),[o,i,h,m,_]),y=!c&&p>0;(0,de.useEffect)((()=>{y&&Ji.W.event("red_dot_show")}),[y]),(0,de.useEffect)((()=>{if((0,Se.Ho)(i))return r(!1),void(0,To.D$)(ge.CG,"1");(0,To.le)(ge.CG)||(r(!0),Ji.W.event("new_label_show"))}),[i]);const b=(0,de.useCallback)((()=>{var e;y&&(e={enter_method:"click_homepage_follow"},Ji.W.event("red_dot_exit",e))}),[y]),f=(0,de.useCallback)((()=>{var e;s&&(e={enter_method:"click_explore_tab"},Ji.W.event("new_label_exit",e))}),[s]),x=(0,de.useMemo)((()=>y?(0,u.jsx)(wl.i8,{children:(0,u.jsx)(wl.LU,{children:(0,u.jsx)("circle",{cx:3,cy:3,r:3,fill:"#FE2C55"},void 0)},void 0)},void 0):void 0),[y]),w=(0,de.useMemo)((()=>s?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(wl.Iu,{children:l("Inbox_New")},void 0),(0,u.jsx)(wl.bg,{children:(0,u.jsx)(wl.LU,{children:(0,u.jsx)("circle",{cx:3,cy:3,r:3,fill:"#FE2C55"},void 0)},void 0)},void 0)]},void 0):void 0),[s,l]);kl.path=`/${d}`;const k=Sn(i),S=(0,de.useCallback)((()=>{Ji.W.event("livesdk_live_tab_show")}),[]),{tooltipText:C,tooltipTheme:j,feedMode:T,showTip:I,isRealInVideoFeedRedesign:P,handleFeedToggleIconEnter:O,handleFeedToggleIconLeave:L,handleSwitchFeedMode:M}=(()=>{const[e,t]=(0,de.useState)(!1),[i,o]=(0,de.useState)(!1),{isRealInVideoFeedRedesign:n}=(0,Wo.y7)(),a=(0,St.Q)(),{feedMode:s,switchFeedMode:r}=(0,de.useContext)(ye.yb),l=(0,de.useMemo)((()=>a(e?"pc_web_column_mode_tooltip":"swiper_mode"===s?"pc_web_browser_mode_btn":"pc_web_column_mode_btn")),[s,e,a]),d=(0,de.useMemo)((()=>e?"blue":"black"),[e]),c=(0,de.useCallback)((()=>{o(!0)}),[]),u=(0,de.useCallback)((()=>{o(!1)}),[]),p=(0,de.useCallback)((i=>{(0,To.NS)(i);const o="swiper_mode"===s?"one_column_mode":"swiper_mode";var n;r(o),n={from_mode:"swiper_mode"===s?"swiper_mode":"one_column_mode",to_mode:"swiper_mode"===o?"swiper_mode":"one_column_mode",enter_method:"switch_button"},Ji.W.event("switch_feed_mode",n),e&&t(!1),le.Z.set(ge.qC,o,{secure:!0,expires:300,domain:"www.tiktok.com"})}),[s,e,r]),g=(0,de.useRef)(0),h=(0,de.useCallback)((()=>{xl.F3.setItem("feed_mode_toggle_guide_shown",!0),setTimeout((()=>{t(!1)}),3e3)}),[]);return(0,de.useEffect)((()=>{n&&(xl.F3.getItem("feed_mode_toggle_guide_shown")||(t(!0),g.current=window.setTimeout((()=>{h()}),3e3),window.addEventListener("swiper_mode_onboarding_showing",(()=>{t(!1),window.clearTimeout(g.current)})),window.addEventListener("swiper_mode_onboarding_dismissed",(()=>{t(!0),h()}))))}),[n,h]),{feedMode:s,tooltipText:l,tooltipTheme:d,isRealInVideoFeedRedesign:n,showTip:e||i,handleFeedToggleIconEnter:c,handleFeedToggleIconLeave:u,handleSwitchFeedMode:p}})(),{isExploreEnable:E}=(0,Wo.Rj)();return(0,u.jsx)(wl.Or,{children:(0,u.jsxs)(wl.g3,{children:[P&&(0,u.jsx)(fl.u,Object.assign({overlay:C,tooltipTheme:j,visible:I,placement:"bottom"},{children:(0,u.jsx)(wl.Ml,Object.assign({onClick:M,onMouseEnter:O,onMouseLeave:L},{children:(0,u.jsx)(wl.el,{isHorizontal:"one_column_mode"===T},void 0)}),void 0)}),void 0),(0,u.jsx)(Il,Object.assign({},kl,{scrollRef:e,onClick:v,onCheckActive:g}),void 0),(0,u.jsx)(Il,Object.assign({},Sl,{onClick:b,topRightBadge:x,scrollRef:e}),void 0),E&&(0,u.jsx)(Il,Object.assign({},Cl,{scrollRef:e,topRightBadge:w,onClick:f}),void 0),t&&(0,u.jsx)(Il,Object.assign({onLoad:S,forceSSR:!k,Container:wl.Ej,scrollRef:e},jl),void 0)]},void 0)},void 0)}));var Ol=i(94328),Ll=i(53046);let Ml=class extends tt.D{constructor(){super(...arguments),this.defaultState={profileUserId:null,itemOffset:0,offsetLeft:0}}setShowing(e,t){e.profileUserId=t.userId,t.itemOffset&&(e.itemOffset=t.itemOffset),t.offsetLeft&&(e.offsetLeft=t.offsetLeft)}itemEnter(e){return e.pipe((0,un.w)((({userId:e,itemOffset:t,offsetLeft:i,timeout:o})=>(0,Ol.H)(o).pipe((0,Ll.h)(this.getActions().setShowing({userId:e,itemOffset:t,offsetLeft:i}))))))}};(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Ml.prototype,"setShowing",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],Ml.prototype,"itemEnter",null),Ml=(0,b.__decorate)([(0,ot.Y)("SideNavigation")],Ml);const El=(0,de.memo)((function({lang:e,slot:t,transStatus:i,extraTop:o,extraWidth:n}){var a;const{user:s}=(0,se.mp)(Q.G,{selector:e=>{var t;return{user:null===(t=e.appContext)||void 0===t?void 0:t.user,isSideNavActive:e.sideNavActive}},dependencies:[]}),r=(0,Qe.Lh)((()=>["abTestVersion","region"]),[]),l="v2"===(null!==(a=(0,He.N8)(null==r?void 0:r.abTestVersion,"studio_web_eh_entrance"))&&void 0!==a?a:"v1"),{pathname:d}=(0,ue.TH)(),c=zo(),{permissionInfo:p}=(0,se.mp)(an),g=Boolean(s),h=(0,de.useRef)(null),m=(0,de.useRef)(null),[{profileUserId:_,offsetTop:v,offsetLeft:y},b]=(0,se.b7)(Ml,{selector:({profileUserId:e,itemOffset:t,offsetLeft:i})=>({profileUserId:e,offsetTop:t,offsetLeft:i}),dependencies:[]}),{isMacElectronApp:f}=(0,No.R)(),x=(0,Wo.JZ)(),[w,k]=(0,de.useState)(!1),S=(0,de.useCallback)(((e,t,i)=>{var o,n;const a=document.documentElement.scrollTop||document.body.scrollTop,s=null!==(n=null===(o=m.current)||void 0===o?void 0:o.scrollTop)&&void 0!==n?n:0;let r;window.innerWidth<1072?(r=t-s+a-Xe.Mz+20,k(!0)):(r=t-s+a+10,k(!1)),b.itemEnter({userId:e,itemOffset:r,timeout:1e3,offsetLeft:i})}),[b]),C=(0,de.useCallback)((()=>{b.itemEnter({userId:null,timeout:0})}),[b]),j=(0,de.useCallback)((()=>{b.itemEnter({userId:_,timeout:0})}),[b,_]),T=(0,de.useCallback)((()=>{b.itemEnter({userId:null,timeout:500})}),[b]),I=(0,de.useCallback)((()=>{_&&b.itemEnter({userId:null,timeout:0})}),[b,_]);(0,de.useEffect)((()=>{const e=Bo()((()=>{b.itemEnter({userId:null,timeout:0})}),1e3);return window.addEventListener("scroll",e),()=>{window.addEventListener("scroll",e)}}),[b]);const P=(0,se.qj)($n);(0,de.useEffect)((()=>{(null==s?void 0:s.uid)&&!c&&(null==p?void 0:p.showComputerLiveEntrance)&&P.getCreateRoomInfo({})}),[P,s,null==p?void 0:p.showComputerLiveEntrance,c]);const O=w,L=(0,se.qj)(an);return(0,de.useEffect)((()=>{(null==s?void 0:s.uid)&&L.getLivePermission()}),[L,s]),(0,de.useEffect)((()=>{_&&T()}),[T,d]),(0,X.Xi)("sidebar"),(0,u.jsxs)(wl.dS,Object.assign({transStatus:i,extraWidth:n},{children:[(0,u.jsxs)(wl.WZ,Object.assign({extraTop:o,extraWidth:n,Wrapper:wl.T8,onScroll:I,ref:m},{children:[f&&(0,u.jsx)(na,{style:{marginBottom:"8px",marginInlineStart:"8px"}},void 0),(0,u.jsx)(Pl,{scrollRef:m},void 0),(null==p?void 0:p.showComputerLiveEntrance)&&(0,u.jsx)(il,{scrollRef:m},void 0),!g&&(0,u.jsx)(sl,{},void 0),t||(0,u.jsxs)(u.Fragment,{children:[!x&&(0,u.jsx)(js,{onEnterItem:S,onLeaveItem:C},void 0),g&&(0,u.jsx)(Ss,{ref:h},void 0),l&&(0,u.jsx)(tr,{},void 0),!x&&(0,u.jsx)(Gs,{},void 0),(0,u.jsx)(wl.NI,{},void 0)]},void 0),(0,u.jsx)(Lr,{lang:e},void 0)]}),void 0),_&&(0,u.jsx)(Uo.C,{followTheme:"primary",paddingTop:24,paddingStart:O?20:0,hideSignature:!0,fixedLeft:O?52:y,top:v,uniqueId:_,onMouseEnter:j,onMouseLeave:T},void 0)]}),void 0)}));var Al=i(59245),Dl=i.n(Al),Fl=i(6718);let Rl=class{constructor(e){this.fetch=e,this.initTargetIdcRequest=()=>this.fetch.get("/passport/web/account/info/",{baseUrlType:2,query:{aid:1459}})}checkTTwid(){return(0,b.__awaiter)(this,void 0,void 0,(function*(){const e=new Fl.t({aid:ge.CO,service:"www.tiktok.com",union:!1,unionHost:""});try{yield e.checkWebId()}catch(e){console.error(e)}}))}};Rl=(0,b.__decorate)([(0,x.G)(),(0,b.__metadata)("design:paramtypes",[c.r])],Rl);var Bl=i(22240),Nl=i(270);const Wl=[{"@font-face":{fontFamily:"ProximaNova",src:'local("ProximaNova-Regular"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/Proxima-Nova-Regular.woff2) format("woff2"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/Proxima-Nova-Regular.woff) format("woff"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/Proxima-Nova-Regular.otf) format("opentype")',fontWeight:400,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"ProximaNova",src:'local("ProximaNova-Semibold"),url(//lf16-tiktok-common.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/fonts/ProximaNova-Semibold.woff2) format("woff2"),url(//lf16-tiktok-common.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/fonts/ProximaNova-Semibold.woff) format("woff"),url(//lf16-tiktok-common.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/fonts/ProximaNova-Semibold.otf) format("opentype")',fontWeight:600,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"ProximaNova",src:'local("ProximaNova-Bold"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/Proxima-Nova-Bold.woff) format("woff"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/Proxima-Nova-Bold.otf) format("opentype")',fontWeight:700,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"SofiaPro",src:'local("SofiaPro-Regular"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-regular.woff) format("woff"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-regular.otf) format("opentype")',fontWeight:400,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"SofiaPro",src:'local("SofiaPro-Medium"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-medium.woff) format("woff"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-medium.otf) format("opentype")',fontWeight:500,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"SofiaPro",src:'local("SofiaPro-Semibold"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-semibold.otf) format("opentype")',fontWeight:600,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"SofiaPro",src:'local("SofiaPro-Bold"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-bold.woff) format("woff"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-bold.otf) format("opentype")',fontWeight:700,fontStyle:"normal",fontDisplay:"swap"}}],Ul=[{"*, *::before, *::after":{boxSizing:"border-box",userSelect:"unset"},"body,h1,h2,h3,h4,p,figure,blockquote,dl,dd":{margin:0},'ul[role="list"], ol[role="list"]':{listStyle:"none"},"html:focus-within":{scrollBehavior:"smooth"},body:{minHeight:"100vh",textRendering:"optimizeSpeed",lineHeight:1.5},"a:not([class])":{textDecorationSkipInk:"auto"},"img, picture":{maxWidth:"100%",display:"block"},"input,button,textarea,select":{font:"inherit"},"@media (prefers-reduced-motion: reduce)":{"html:focus-within":{scrollBehavior:"auto"},"*,*::before,*::after":{animationDuration:"0.01ms !important",animationIterationCount:"1 !important",transitionDuration:"0.01ms !important",scrollBehavior:"auto !important"}},"@supports (-webkit-touch-callout: none)":{body:{minHeight:"-webkit-fill-available"}}}];var ql=i(62778);const zl=(0,je.Z)("div",{target:"eyhjz840"})({height:"100vh",display:"flex",flexDirection:"column"},"label:DivErrorBoundaryContainer;");class $l extends de.Component{constructor(){super(...arguments),this.state={isNetOffline:!1,hasError:!1},this.handleOnlineStatusChange=()=>{this.setState({isNetOffline:!navigator.onLine})}}get iconElem(){const{hasError:e}=this.state;return e?(0,u.jsx)(Te.Z,{width:90,height:90,fill:"rgba(128, 130, 133, 1)"},void 0):(0,u.jsx)(ql.Z,{width:90,height:90,fill:"rgba(128, 130, 133, 1)"},void 0)}get text(){const{hasError:e}=this.state;return e?{title:"Page not available",desc:"server_error_sub",button:"try_again_btn"}:{title:"network_error_title",desc:"network_error_sub",button:"try_again_btn"}}componentDidMount(){window.addEventListener("online",this.handleOnlineStatusChange),window.addEventListener("offline",this.handleOnlineStatusChange)}componentWillUnmount(){window.removeEventListener("online",this.handleOnlineStatusChange),window.removeEventListener("offline",this.handleOnlineStatusChange)}handleRetry(){window.location.reload()}componentDidCatch(e,t){const{onCatchError:i}=this.props;i(e,t),this.setState({hasError:!0})}render(){const{isNetOffline:e,hasError:t}=this.state,{children:i,isMobile:o}=this.props,{t:n}=this.context;if(e||t){const{title:e,desc:t,button:i}=this.text;return o?(0,u.jsx)(zl,{children:(0,u.jsx)(Ie.T,{brightness:0,isFullScreen:!0,iconElem:this.iconElem,title:n(e),desc:n(t),buttonText:n(i),onButtonClick:this.handleRetry},void 0)},void 0):(0,u.jsx)(Ie.T,{isFullScreen:!0,onButtonClick:this.handleRetry,iconElem:this.iconElem,title:n(e),desc:n(t),buttonText:n(i)},void 0)}return i}}$l.contextType=Z.LX;let Hl=class{constructor(e){this.fetch=e}reportRenderError(e){return this.fetch.get("/node-webapp/page/error",{query:{page:e}})}};function Zl({children:e,isMobile:t,path2PidFunc:i,delayFonts:o=!1}){const[n]=(0,se.b7)(pe.r,{selector:e=>({bizContext:e.bizContext&&Dl()(e.bizContext,"statusCode"),bizInitialized:e.initialized}),dependencies:[]}),{pathname:a}=(0,ue.TH)(),s=(0,Ze.fz)(Rl);(0,de.useEffect)((()=>{var e;!(null===(e=n.bizContext)||void 0===e?void 0:e.isBot)&&s.checkTTwid(),s.initTargetIdcRequest().subscribe()}),[]);const r=(0,de.useContext)(J.Il),l=(0,Ze.fz)(Pn.GV);(0,Bl.L)((()=>{r&&n.bizContext&&l.setContext(r,n.bizContext)}),[l,r,n.bizContext]);const{GlobalModalProvider:d,value:c}=(0,Nl.R)(),{value:p}=(0,de.useContext)(fe.hb),h=(0,de.useMemo)((()=>(0,fe.gh)({isDark:p,isMobile:t,lang:null==r?void 0:r.language})),[p,t,null==r?void 0:r.language]),m=(f={isDark:p,lang:null==r?void 0:r.language,isMobile:t,withFonts:!o},(0,de.useMemo)((()=>function(e,t,i=!0){return[Ul,{body:{fontFamily:e.fontFamilies.Proxima,fontSize:e.text.fontSize,color:e.colors.TextPrimary,backgroundColor:e.colors.BGPrimary,overscrollBehavior:"contain",direction:e.direction,a:{color:e.colors.TextPrimary,transition:"color 250ms",textDecoration:"none",cursor:"pointer"},"a:visited":{color:e.colors.TextPrimary},"a:hover":{color:e.colors.TextPrimary,textDecoration:"underline"},"a:active":{color:e.colors.TextPrimary},"a:focus":{color:e.colors.TextPrimary},input:{"::-ms-clear":{display:"none",width:0,height:0},"::-ms-reveal":{display:"none",width:0,height:0},"::-webkit-search-decoration, ::-webkit-search-cancel-button, ::-webkit-search-results-button, ::-webkit-search-results-decoration":{display:"none"}},"&.hidden":{overflow:"hidden",display:"block"},WebkitFontSmoothing:"antialiased"}},...i?Wl:[],{html:t?{}:{body:{overflowY:"overlay"},"*":{"::-webkit-scrollbar":{borderRadius:"0",width:"8px"},"::-webkit-scrollbar-track":{borderRadius:"0",backgroundColor:"rgba(0, 0, 0, 0)"},"::-webkit-scrollbar-thumb":{borderRadius:"4px",backgroundColor:e.colors.BGPlaceholderDefault}}}}]}((0,fe.gh)(f),f.isMobile,f.withFonts)),[f])),_=(0,Ze.fz)(L.n),v=(0,Ze.fz)(Hl),y=(0,de.useMemo)((()=>i(a)),[a]),b=(0,de.useCallback)(((e,t)=>{try{v.reportRenderError(y),_.captureMessage(`Page render Error: ${e.message}`,"fatal",{page:y}),console.info("Error occurs in render time:",e),console.info("Error occurs in component:",t.componentStack)}catch(e){console.error("Error occurs when reporting error:",e)}}),[v,y,_]);var f;return(0,u.jsx)(d,Object.assign({value:c},{children:(0,u.jsx)(g.a,Object.assign({theme:h},{children:(0,u.jsxs)($l,Object.assign({onCatchError:b,isMobile:t},{children:[(0,u.jsx)(Be.xB,{styles:m},void 0),e]}),void 0)}),void 0)}),void 0)}Hl=(0,b.__decorate)([(0,x.G)(),(0,b.__metadata)("design:paramtypes",[c.r])],Hl);var Vl=i(72083),Gl=i(73090),Ql=i(60871),Jl=i(4825),Yl=i(50121),Kl=i(53120),Xl=i(36061);const ed=(0,je.Z)("div",{target:"e8cpz260"})({padding:"29px 26px 48px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",borderBottom:"1px solid #979797",transition:"all .3s cubic-bezier"},(0,Xe.f1)({max:Xt.gq[Xt.T9.Medium]-1,style:{padding:"48px 0",flexDirection:"column",alignItems:"center"}}),"label:DivContainer;"),td=(0,je.Z)("div",{target:"e8cpz261"})({display:"flex",flexDirection:"column",alignItems:"center"},"label:DivWrapper;"),id=(0,je.Z)("p",{target:"e8cpz262"})({fontSize:"24px",lineHeight:"24px",marginBottom:"16px"},(({theme:e})=>(0,Xe.GI)({theme:e,fontFamily:"Sofia",fontWeight:"semiBold"})),"label:PTitle;"),od=(0,je.Z)("div",{target:"e8cpz263"})({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},(0,Xe.f1)({max:Xt.gq[Xt.T9.Medium]-1,style:{flexDirection:"column"}}),"label:DivIconContainer;"),nd=(0,je.Z)("a",{target:"e8cpz264"})({margin:"0 4px",width:"170px",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",textDecoration:"none",":active, :hover, :link, :visited":{textDecoration:"none"}},(({withBorder:e})=>e?{border:"1px solid rgba(255, 255, 255, .5)",borderRadius:"8px"}:null),(({theme:e})=>(0,Xe.GI)({theme:e,fontFamily:"Sofia",fontWeight:"bold",typography:"P1",color:"ConstTextInverse",isLink:!0})),(0,Xe.f1)({max:Xt.gq[Xt.T9.Medium]-1,style:{marginBottom:"20px"}}),"label:AIconContainer;");var ad;!function(e){e.Apple="apple",e.Amazon="amazon",e.Google="google",e.Download="download",e.Microsoft="microsoft"}(ad||(ad={}));const sd={amazon:{backgroundPosition:"0 0"},apple:{backgroundPosition:"0 -53px"},google:{backgroundPosition:"0 -106px"}},rd=(0,je.Z)("img",{target:"e8cpz265"})((({platform:e,lang:t})=>function(e,t){return"download"===e?{backgroundImage:"url('https://p16-ttug-sg.ibyteimg.com/img/ttfe-malisg/tiktok_web/store-badge/download.png~296x0.image')"}:"microsoft"!==e?Object.assign(Object.assign({},sd[e]),{backgroundImage:`url(https://p16-ttug-sg.ibyteimg.com/img/ttfe-malisg/tiktok_web/store-badge/${t}.png~296x0.image)`}):void 0}(e,t)),{width:"170px",height:"50px",backgroundSize:"170px",objectFit:"cover",backgroundRepeat:"no-repeat",boxSizing:"border-box",lineHeight:0},"label:ImgIcon;"),ld=(0,je.Z)("img",{target:"e8cpz266"})({marginRight:"8px",width:"20px"},"label:ImgQRCode;"),dd=(0,je.Z)("p",{target:"e8cpz267"})({marginBottom:"60px",textAlign:"center"},(({theme:e})=>(0,Xe.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia",fontWeight:"bold",typography:"H3"})),"label:PQRTitle;"),cd=(0,je.Z)("div",{target:"e8cpz268"})({display:"flex",flexDirection:"column",alignItems:"center",padding:"80px 85px"},"label:DivBodyContainer;"),ud=(0,je.Z)(Xl.Z,{target:"e8cpz269"})({display:"block"},"label:StyledQrBg;"),pd=(0,je.Z)("div",{target:"e8cpz2610"})({position:"relative",width:"202px",height:"202px"},"label:DivQRCodeWrapper;"),gd=(0,je.Z)("img",{target:"e8cpz2611"})({width:"200px",position:"absolute",left:"1px",top:"1px",borderRadius:"8px",overflow:"hidden"},"label:ImgQRCodeDownload;"),hd=function(e){const t=(0,St.Q)(),[i,o]=(0,de.useState)(!1),n=(0,se.mp)(Q.G,{selector:e=>{var t;return"t"===(null===(t=e.appContext)||void 0===t?void 0:t.appType)?Yl:Jl},dependencies:[]}),a=(0,de.useCallback)((e=>{e.preventDefault(),o(!0)}),[]),s=(0,de.useCallback)((()=>{o(!1)}),[]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(nd,Object.assign({onClick:a,withBorder:!0,href:"#"},{children:[(0,u.jsx)(ld,{src:"https://lf16-tiktok-common.ibytedtos.com/obj/tiktok-web-common-sg/mtact/static/images/share/video/ic-qrcode.svg"},void 0),(0,u.jsx)("span",{children:"QR CODE"},void 0)]}),void 0),(0,u.jsxs)(Xt.AR,Object.assign({isOpen:i,onClose:s},{children:[(0,u.jsx)(Xt.EZ,{},void 0),(0,u.jsxs)(cd,{children:[(0,u.jsx)(dd,{children:t("QR CODE Text")},void 0),(0,u.jsxs)(pd,{children:[(0,u.jsx)(ud,{width:"202",height:"202"},void 0),(0,u.jsx)(gd,{src:n},void 0)]},void 0)]},void 0)]}),void 0)]},void 0)},md=function(e){const t=(0,St.Q)(),{language:i}=(0,Ue.m7)((0,Qe.Lh)((()=>["language"]),[])),o=(0,Ue.m7)((0,Je.h)((()=>["downloadLink","isAndroid","isIOS"]),[])),{iconLanguage:n,iconConfig:a}=(0,de.useMemo)((()=>(0,Vl.lk)(Object.assign({lang:i},o))),[i,o]),s=(0,de.useCallback)((e=>{Kl.Fx.handleClickAppStore(e)}),[]);return(0,u.jsx)(ed,{children:(0,u.jsxs)(td,{children:[(0,u.jsx)(id,{children:t("pc_reflow_download")},void 0),(0,u.jsxs)(od,{children:[(0,u.jsx)(hd,{},void 0),a.map((({alt:e,href:t,platform:i})=>(0,u.jsx)(nd,Object.assign({withBorder:"microsoft"===i,href:t,target:"_blank",rel:"nofollow noopener noreferrer",onClick:s.bind(null,i)},{children:(0,u.jsx)(rd,{src:"microsoft"===i?(0,Gl.Aq)(n):Ql,platform:i,alt:e,lang:n},void 0)}),i)))]},void 0)]},void 0)},void 0)};var _d,vd=i(36564),yd=i(91623),bd=i.n(yd);!function(e){e.ClickLanguage="click_change_language",e.ChangeLanguage="change_langauage"}(_d||(_d={}));const fd=e=>{Ji.W.event("click_change_language",e)};function xd(){return(0,de.useCallback)((({lang:e,url:t,currentLang:i,isMobile:o})=>{var n;n={language:i,to_language:e,enter_method:o?"top_bar":void 0},Ji.W.event("change_langauage",n),bd().remove(N.ci,{domain:"www.tiktok.com"}),bd().set(N.ci,e,{secure:!0,expires:300,domain:".tiktok.com"}),window.location.replace(t)}),[])}const wd=(0,je.Z)("div",{target:"e1g150f60"})({boxSizing:"border-box",position:"relative",width:"172px",height:"36px",padding:"0 16px",display:"flex",border:"1px solid #8a8b91",borderRadius:"2px",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},(({theme:e})=>[(0,Xe.GI)({theme:e,typography:"P2",fontFamily:"Proxima",fontWeight:"normal"}),(0,Xe.YJ)({direction:e.direction,textAlign:"end"})]),"label:DivLangSelectionContainer;"),kd=(0,je.Z)("p",{target:"e1g150f61"})({display:"block",lineHeight:"36px",fontSize:"14px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},"label:PLabel;"),Sd=(0,je.Z)("select",{target:"e1g150f62"})({position:"absolute",left:0,right:0,top:0,width:"100%",height:"100%",opacity:0},"label:SelectLangForm;"),Cd=N.tF.map((e=>{const{label:t,value:i}=e;return(0,u.jsx)("option",Object.assign({value:i},{children:t}),i)})),jd=function(){const e=(0,se.mp)(Q.G,{selector:e=>{var t,i;return null!==(i=null===(t=e.appContext)||void 0===t?void 0:t.language)&&void 0!==i?i:"en"},dependencies:[]}),t=(0,de.useMemo)((()=>{var t;return null===(t=N.tF.find((({value:t})=>t===e)))||void 0===t?void 0:t.label}),[e]),{pathname:i,search:o}=(0,ue.TH)(),n=xd(),a=(0,de.useCallback)((t=>{const{value:a}=t.target;let s;s=(0,Se.Hg)(i)?`/${a}`:(0,wn.stringifyUrl)({url:i,query:Object.assign(Object.assign({},(0,wn.parse)(o)),{lang:a})}),n({url:s,lang:a,currentLang:e,isMobile:!0})}),[e,i,n,o]),s=(0,de.useCallback)((()=>{fd({language:e})}),[e]);return(0,u.jsxs)(wd,{children:[(0,u.jsx)(kd,{children:(0,u.jsx)("span",{children:t},void 0)},void 0),(0,u.jsx)(vd.Z,{width:30,height:30,fill:"#B0B0B4"},void 0),(0,u.jsx)(Sd,Object.assign({value:e,onChange:a,onClick:s},{children:Cd}),void 0)]},void 0)},Td=(0,je.Z)("div",{target:"eks331y0"})((({theme:{direction:e,colors:t}})=>[{flex:"1 1 0%",maxWidth:"226px",color:t.ConstTextInverse},(0,Xe.YJ)({direction:e,paddingEnd:"8px"}),(0,Xe.f1)({max:Xt.gq[Xt.T9.Medium]-1,style:{flex:"auto",padding:0,marginTop:"32px"}})]),"label:DivContainer;"),Id=(0,je.Z)("h4",{target:"eks331y1"})({fontSize:"14px",lineHeight:"28px",margin:0},(({theme:e})=>(0,Xe.GI)({theme:e,fontFamily:"Sofia",fontWeight:"bold"})),"label:H4Title;"),Pd=(0,je.Z)("span",{target:"eks331y2"})({},"label:SpanContent;"),Od=(0,je.Z)("a",{target:"eks331y3"})({display:"block",textDecoration:"none",position:"relative",[`:hover ${Pd}`]:{paddingBottom:"2px",borderBottom:"2px solid #ccc"},fontSize:"14px",lineHeight:"28px"},(({theme:e})=>[(0,Xe.GI)({theme:e,fontFamily:"Sofia",fontWeight:"medium",color:"ConstTextInverse3",isLink:!0}),{":link, :hover, :active, :visited":{textDecoration:"none",color:e.colors.ConstTextInverse3}}]),"label:ALink;"),Ld=function(e){const t=(0,se.mp)(pe.r,{selector:e=>{var t;const i=null===(t=e.bizContext)||void 0===t?void 0:t.navList;return(null!=i?i:[]).map((e=>{const t=Object.assign({},e);return t.children=t.children.filter((({placements:e=[]})=>0===e.length||e.includes("footer"))),t}))},dependencies:[]});return(0,u.jsx)(u.Fragment,{children:t.map((({title:e,children:t})=>(0,u.jsx)(de.Fragment,{children:(0,u.jsxs)(Td,{children:[(0,u.jsx)(Id,{children:e},void 0),t.map((({title:e,href:t,newWindow:i=!1})=>(0,u.jsx)(Od,Object.assign({href:t,target:i?"_blank":void 0,rel:"noreferrer"},{children:(0,u.jsx)(Pd,{children:e},void 0)}),e)))]},void 0)},e)))},void 0)},Md=(0,je.Z)("div",{target:"e1j0kpjo0"})((({theme:{colors:e}})=>({width:"100%",color:e.ConstTextInverse,backgroundColor:e.ConstBGInverse})),(({hasPaddingBottom:e})=>[{paddingBottom:e?"24px":0},(0,Xe.f1)({max:Xt.gq[Xt.T9.Medium]-1,style:{paddingBottom:e?"80px":0,textAlign:"center"}})]),"label:DivFooterContainer;"),Ed=(0,je.Z)("footer",{target:"e1j0kpjo1"})({position:"relative",display:"flex",flexDirection:"row",alignItems:"flex-start",paddingTop:"40px"},(({theme:{direction:e}})=>(0,Xe.YJ)({direction:e,paddingStart:"378px"})),(0,Xe.f1)({max:Xt.gq[Xt.T9.Medium]-1,style:{padding:"40px 0 0",flexDirection:"column",alignItems:"center"}}),"label:FooterWrapper;"),Ad=(0,je.Z)("div",{target:"e1j0kpjo2"})({display:"block",position:"absolute",top:"43px","& > strong":{visibility:"hidden",position:"absolute",left:0,top:0}},(({theme:{direction:e}})=>[(0,Xe.YJ)({direction:e,start:"144px"}),(0,Xe.f1)({max:Xt.gq[Xt.T9.Medium]-1,style:Object.assign({position:"relative",top:0},(0,Xe.YJ)({direction:e,start:"0"}))})]),"label:DivLogoWrapper;"),Dd=(0,je.Z)("div",{target:"e1j0kpjo3"})({padding:"0 144px",marginTop:"60px",display:"flex",flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between"},(0,Xe.f1)({max:Xt.gq[Xt.T9.Medium]-1,style:{padding:0,marginTop:"72px",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"}}),"label:DivBottomWrapper;"),Fd=(0,je.Z)("div",{target:"e1j0kpjo4"})((({theme:e})=>(0,Xe.GI)({theme:e,fontFamily:"Sofia",fontWeight:"medium",typography:"P3",color:"ConstTextInverse3"})),{lineHeight:"24px"},(0,Xe.f1)({max:Xt.gq[Xt.T9.Medium]-1,style:{marginTop:"20px"}}),"label:DivCopyright;"),Rd=(new Date).getFullYear(),Bd=function({hideContent:e,hideDownload:t,hideLanguageSelection:i}){const o=(0,St.Q)(),{config:n}=(0,Ue.m7)((0,Je.h)((()=>["config"]),[]));return(0,u.jsxs)(Md,Object.assign({hasPaddingBottom:!e},{children:[!t&&!(null==n?void 0:n.shouldBlock)&&(0,u.jsx)(md,{},void 0),(0,u.jsxs)(Ed,{children:[(0,u.jsxs)(Ad,{children:[(0,u.jsx)(na,{isDark:!0,isGrayFilter:null==n?void 0:n.isGrayFilter},void 0),(0,u.jsx)("strong",{children:o("TikTok i18n title")},void 0)]},void 0),(0,u.jsx)(Ld,{},void 0)]},void 0),(0,u.jsxs)(Dd,{children:[i?(0,u.jsx)("div",{},void 0):(0,u.jsx)(jd,{},void 0),(0,u.jsxs)(Fd,{children:["© ",Rd," TikTok"]},void 0)]},void 0)]}),void 0)};var Nd=i(78392),Wd=i(3980),Ud=i(84991);const qd=(0,Ke.Z)(ei.W,{target:"e145h5950"})((({theme:e,isFocus:t})=>[{position:"absolute",top:t?"6px":"-9999px",zIndex:99999,padding:"0 48px",height:"48px",fontSize:"1rem",fontWeight:700,background:e.colors.BGPrimary,border:"1px solid #e3e3e5",borderRadius:"4px"},(0,Xe.YJ)({direction:e.direction,start:"8px"})]),"label:StyledButton;");function zd(){const e=(0,St.Q)(),{pathname:t}=(0,ue.TH)(),i=(0,pt.BB)(t),o=[String("homepage_hot"),String("homepage_follow")],n=(0,de.useMemo)((()=>"unknown"===i?"":`main-content-${i}`),[i]),[a,s]=(0,de.useState)(!1),r=(0,de.useCallback)((()=>{s(!0)}),[]),l=(0,de.useCallback)((()=>{s(!1)}),[]),d=(0,de.useCallback)((e=>{e.preventDefault(),(e=>{var t;try{if(!e)return;const i=document.querySelector(`#${e}`);if(!i)return;const o=(0,Ud.s2)(i);o.length>0?null===(t=o[0])||void 0===t||t.focus():i.focus()}catch(e){}})(n)}),[n]);return o.includes(i)?(0,u.jsx)(qd,Object.assign({isFocus:a,onFocus:r,onBlur:l,onClick:d},{children:e("accessibilityLabels_home_skipContentFeed")}),void 0):null}const $d=(0,je.Z)("div",{target:"e10win0d0"})((({theme:{colors:e}})=>[{display:"flex",justifyContent:"space-around",boxShadow:`0px 1px 1px ${e.ShadowPrimary}`,height:Xe.Mz,width:"100%",top:0,position:"fixed",alignItems:"center",background:e.BGPrimary,zIndex:1e3}]),"label:DivHeaderContainer;"),Hd=(0,je.Z)("div",{target:"e10win0d1"})({width:"100%",display:"flex",height:"100%",flexDirection:"row",justifyContent:"space-between",alignItems:"center",position:"relative"},(({needAfter:e=!1,paddingInlineEnd:t=0,theme:{colors:i,direction:o="ltr"}})=>({":after":{display:e?"block":"none",content:'""',width:"1px",height:"24px",background:i.LinePrimary,position:"absolute",top:"50%",transform:"translateY(-50%)",right:"ltr"===o?t-20+"px":"unset",left:"ltr"===o?"unset":t-20+"px"}})),(({expand:e})=>e?{}:{maxWidth:Xe.XP}),(({theme:{direction:e},paddingInlineEnd:t=24})=>(0,Xe.YJ)({direction:e,paddingStart:"20px",paddingEnd:`${t}px`})),"label:DivHeaderWrapperMain;"),Zd=(0,je.Z)(Hd,{target:"e10win0d2"})([{maxWidth:"100%"},({theme:{direction:e},paddingInlineEnd:t=24})=>(0,Xe.YJ)({direction:e,paddingStart:"16px",paddingEnd:`${t}px`})],"label:StyledDivHeaderWrapperMainV2;");var Vd=i(20149),Gd=i(90012),Qd=i(78658);let Jd=class{constructor(e){this.fetch=e}getReportNotices(e){return this.fetch.get("/aweme/v1/report/inbox/notice",{query:e,baseUrlType:2})}getReportList(e){return this.fetch.get("/node/report/inbox/list",{query:e,baseUrlType:2})}getReportDetail(e){return this.fetch.get("/node/report/inbox/detail",{query:e,baseUrlType:2})}};Jd=(0,b.__decorate)([(0,x.G)(),(0,b.__metadata)("design:paramtypes",[c.r])],Jd);let Yd=class{constructor(e){this.fetch=e}getNoticeCount(){return this.fetch.get("/api/notice/count/",{query:{source:7},baseUrlType:2})}getWebNoticeCount(){return this.fetch.get("/api/inbox/notice_count/",{baseUrlType:2})}};Yd=(0,b.__decorate)([(0,x.G)(),(0,b.__metadata)("design:paramtypes",[c.r])],Yd);let Kd=class extends tt.D{constructor(e,t,i,o){super(),this.service=e,this.reportInboxService=t,this.bizContext=i,this.followingRedDotModule=o,this.defaultState={noticeCount:[],reportInbox:{noticeList:[],count:0},isFooterRequest:!1}}setNoticeCount(e,t){e.noticeCount=t}setIsFooterRequest(e,t){e.isFooterRequest=t}setReportInboxNoticeList(e,t){e.reportInbox.noticeList=t}setReportInboxNoticeCount(e,t){e.reportInbox.count=t}updateNoticeList(e,t,i){var o;if(0===e.status_code){let n=0;const a=(null!==(o=e.notice_count)&&void 0!==o?o:[]).filter((e=>(5===e.group&&e.count>0&&(n=e.count),!(661!==e.group||!t||!i)||[500,2,7,3,6].indexOf(e.group)>=0&&500!==e.group)));return(0,Ho.of)(this.getActions().setNoticeCount(a),this.getActions().setIsFooterRequest(!0),this.followingRedDotModule.getActions().setRedDotCount(n))}return(0,Ho.of)(this.noop())}fetchNoticeCount(e){return e.pipe((0,$o.z)((({isSystemNotificationV2:e,useInboxNoticeCountApiV2:t})=>t?this.service.getWebNoticeCount().pipe((0,pn.b)((e=>{(0,_n.k)(e.status_code,[0])})),(0,$o.z)((t=>this.updateNoticeList(t,e,!0))),(0,rt.n)({})):this.service.getNoticeCount().pipe((0,pn.b)((e=>{(0,_n.k)(e.status_code,[0])})),(0,$o.z)((t=>this.updateNoticeList(t,e,!1))),(0,rt.n)({})))))}fetchReportInbox(e){return e.pipe((0,mn.M)(this.bizContext.state$),(0,st.z)((([{region:e="",language:t=""},{bizContext:i}])=>this.reportInboxService.getReportNotices({request_tag_from:(null==i?void 0:i.isMobile)?"h5":"pc",carrier_region:e,sys_region:e,current_region:e,locale:t}).pipe((0,$o.z)((({notice_lists:e})=>{var t;if(!e)return[this.noop()];const{notice_list:i}=e[0];if(!i)return[this.noop()];const o=!1===(null===(t=i[0])||void 0===t?void 0:t.has_read)?1:0;return[this.getActions().setReportInboxNoticeList(i),this.getActions().setReportInboxNoticeCount(o)]})),(0,rt.n)({})))))}};(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Array]),(0,b.__metadata)("design:returntype",void 0)],Kd.prototype,"setNoticeCount",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],Kd.prototype,"setIsFooterRequest",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Array]),(0,b.__metadata)("design:returntype",void 0)],Kd.prototype,"setReportInboxNoticeList",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Number]),(0,b.__metadata)("design:returntype",void 0)],Kd.prototype,"setReportInboxNoticeCount",null),(0,b.__decorate)([(0,it.Qm)({payloadGetter:1}),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],Kd.prototype,"fetchNoticeCount",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],Kd.prototype,"fetchReportInbox",null),Kd=(0,b.__decorate)([(0,ot.Y)("InboxTooltip"),(0,b.__metadata)("design:paramtypes",[Yd,Jd,pe.r,vl.r])],Kd);const Xd=/^\(\d+\+?\)/;var ec=i(82576),tc=i(22022);const ic=(0,Ke.Z)("div",{target:"e1nx07zo0"})((({theme:{direction:e},removeMarginLeft:t})=>(0,Xe.YJ)({direction:e,marginStart:t?"0px":"16px"})),{cursor:"pointer",height:"32px",padding:"3px 3px 0",position:"relative"},"label:DivMessageIconContainer;");ic.defaultProps=Object.assign(Object.assign({},ic.defaultProps),{"data-e2e":"top-dm-icon"});const oc=({theme:{direction:e}})=>({width:"26px",height:"26px",transform:"rtl"===e?"rotateY(180deg)":"none"}),nc=(0,Ke.Z)(ec.Z,{target:"e1nx07zo1"})(oc,"label:StyledIcon;"),ac=(0,Ke.Z)(tc.Z,{target:"e1nx07zo2"})(oc,"label:StyledActiveIcon;"),sc=(0,Ke.Z)("sup",{target:"e1nx07zo3"})((({theme:e,long:t})=>[(0,Xe.GI)({theme:e,fontFamily:"Proxima",typography:"P3",color:"ConstTextInverse",fontWeight:"semiBold"}),(0,Xe.YJ)({direction:e.direction,start:"16px"}),{position:"absolute",top:"-7px",minWidth:"20px",borderRadius:"10px",height:"20px",background:e.colors.Primary,textAlign:"center",padding:t?"0 6px":"0"}]),"label:SupMsgBadge;"),rc=function({removeMarginLeft:e}){const{pathname:t}=(0,ue.TH)(),i=t.startsWith("/message")?ac:nc,o=(0,St.Q)(),n=(0,se.mp)(Q.G,{dependencies:[],selector:e=>e.lang}),a=(0,se.mp)(Qd.O,{dependencies:[],selector:e=>e.messageCount});!function(){const e=(0,W.N)(),{user:t,encryptedWebid:i,lang:o,appType:n,abTestVersion:a,env:s,wid:r,$apiUrl:l,$wsUrl:d}=(0,se.mp)(Q.G,{dependencies:[],selector:t=>{var i,o,n,a,s,r;return{user:null===(i=t.appContext)||void 0===i?void 0:i.user,wid:null===(o=t.appContext)||void 0===o?void 0:o.wid,encryptedWebid:null===(n=t.appContext)||void 0===n?void 0:n.encryptedWebid,appType:null===(a=t.appContext)||void 0===a?void 0:a.appType,lang:t.lang,env:null===(s=t.appContext)||void 0===s?void 0:s.env,$apiUrl:e.imApi,$wsUrl:e.imFrontier,abTestVersion:null===(r=t.appContext)||void 0===r?void 0:r.abTestVersion}}}),c=(0,se.qj)(Qd.O),u=(0,Ze.fz)(Pn.GV);(0,de.useEffect)((()=>{u.getRiskParams(0).then((e=>{var n;Object.keys(e).forEach((t=>{void 0!==e[t]?e[t]=String(e[t]):e[t]=""})),e.referer||(e.referer=window.location.href);const s={appId:1459,userId:null!==(n=null==t?void 0:t.uid)&&void 0!==n?n:"",secUid:null==t?void 0:t.secUid,deviceId:null!=r?r:"",appKey:"e1bd35ec9db7b8d846de66ed140b1ad9",fpId:9,method:1,apiUrl:l,frontierUrl:d,headers:Object.assign(Object.assign({},e),{from_appID:"1988",app_language:o,app_name:"tiktok_web",channel:"web",user_agent:navigator.userAgent}),extended:{device_id:void 0,ttwid:window.decodeURIComponent(null!=i?i:"")},timeout:5e3,disableInitPull:!0,eventListner(e){c.handleImEvent(Object.assign(Object.assign({},e),{abTestVersion:a}))}};Object.assign(s,{debug:!1,service:5,withCredentials:!0}),c.initSDK(s)}))}),[n,null==s?void 0:s.name,null==t?void 0:t.secUid,null==t?void 0:t.uid,r,i,c,o,u,l,d,a])}(),function(){const e=(0,se.mp)(Qd.O,{dependencies:[],selector:e=>e.messageCount}),t=(0,se.mp)(Kd,{dependencies:[],selector:e=>e.noticeCount.reduce(((e,{count:t})=>e+t),0)}),i=(0,de.useMemo)((()=>e+t),[e,t]);(0,de.useEffect)((()=>{if(i>0){const e=(0,Ue.a1)(i);Xd.test(document.title)?document.title=document.title.replace(Xd,`(${e})`):document.title=`(${e})${document.title}`}else document.title=document.title.replace(Xd,"")}),[i])}();const s=(0,de.useCallback)((()=>{Gd.R.handleEnterChatList(a)}),[a]),r=(0,Ue.a1)(a),l=(0,Oo.qO)(n);return(0,u.jsx)(fl.u,Object.assign({overlay:o("webdm_message_button"),placement:"bottom"},{children:(0,u.jsxs)(ic,Object.assign({removeMarginLeft:e},{children:[(0,u.jsx)(ea.v,Object.assign({forceSSR:!1,to:l,onClick:s,ariaLabel:o("accessibilityLabels_forYou_nav_messages_btn")},{children:(0,u.jsx)("span",{children:(0,u.jsx)(i,{},void 0)},void 0)}),void 0),a>0&&(0,u.jsx)(sc,Object.assign({long:a>10},{children:r}),void 0)]}),void 0)}),void 0)};var lc=i(78662),dc=i(80416);const cc={id:"eh-header-logo-5ee495d6",use:"eh-header-logo-5ee495d6-usage",viewBox:"0 0 22 22",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" id="eh-header-logo-5ee495d6"><path fill="black" d="M0 22V11C0 4.925 4.925 0 11 0s11 4.925 11 11v11H0Zm19.25-2.75V11A8.25 8.25 0 0 0 7.055 3.753a8.243 8.243 0 0 1 8.09 3.632A5.479 5.479 0 0 1 16.5 11v8.25h2.75ZM7.946 6.425a5.5 5.5 0 0 0-5.196 5.492v7.333H5.5V11c0-1.908.971-3.589 2.446-4.575Zm5.008 2.64A2.75 2.75 0 0 0 8.25 11v8.25h5.5v-7.333c0-1.044-.291-2.02-.796-2.852Z" /><path fill="url(#eh-header-logo-5ee495d6_a)" d="M0 22V11C0 4.925 4.925 0 11 0s11 4.925 11 11v11H0Zm19.25-2.75V11A8.25 8.25 0 0 0 7.055 3.753a8.243 8.243 0 0 1 8.09 3.632A5.479 5.479 0 0 1 16.5 11v8.25h2.75ZM7.946 6.425a5.5 5.5 0 0 0-5.196 5.492v7.333H5.5V11c0-1.908.971-3.589 2.446-4.575Zm5.008 2.64A2.75 2.75 0 0 0 8.25 11v8.25h5.5v-7.333c0-1.044-.291-2.02-.796-2.852Z" /><path fill="url(#eh-header-logo-5ee495d6_b)" fill-opacity=".6" d="M0 22V11C0 4.925 4.925 0 11 0s11 4.925 11 11v11H0Zm19.25-2.75V11A8.25 8.25 0 0 0 7.055 3.753a8.243 8.243 0 0 1 8.09 3.632A5.479 5.479 0 0 1 16.5 11v8.25h2.75ZM7.946 6.425a5.5 5.5 0 0 0-5.196 5.492v7.333H5.5V11c0-1.908.971-3.589 2.446-4.575Zm5.008 2.64A2.75 2.75 0 0 0 8.25 11v8.25h5.5v-7.333c0-1.044-.291-2.02-.796-2.852Z" /><path fill="url(#eh-header-logo-5ee495d6_c)" fill-opacity=".6" d="M0 22V11C0 4.925 4.925 0 11 0s11 4.925 11 11v11H0Zm19.25-2.75V11A8.25 8.25 0 0 0 7.055 3.753a8.243 8.243 0 0 1 8.09 3.632A5.479 5.479 0 0 1 16.5 11v8.25h2.75ZM7.946 6.425a5.5 5.5 0 0 0-5.196 5.492v7.333H5.5V11c0-1.908.971-3.589 2.446-4.575Zm5.008 2.64A2.75 2.75 0 0 0 8.25 11v8.25h5.5v-7.333c0-1.044-.291-2.02-.796-2.852Z" /><defs><linearGradient id="eh-header-logo-5ee495d6_a" x1="0" x2="22" y1="0" y2="22" gradientUnits="userSpaceOnUse"><stop stop-color="#FF698D" stop-opacity=".806" /><stop offset=".318" stop-color="#926BFF" /><stop offset=".538" stop-color="#294FFF" stop-opacity=".85" /><stop offset=".807" stop-color="#0075FF" /><stop offset="1" stop-color="#00D1FF" /></linearGradient><radialGradient id="eh-header-logo-5ee495d6_b" cx="0" cy="0" r="1" gradientTransform="rotate(137.121 8.563 5.382) scale(19.105)" gradientUnits="userSpaceOnUse"><stop stop-color="#FF00E5" /><stop offset="1" stop-color="#FF00E5" stop-opacity="0" /></radialGradient><radialGradient id="eh-header-logo-5ee495d6_c" cx="0" cy="0" r="1" gradientTransform="rotate(-40.03 25.148 1.387) scale(16.3248)" gradientUnits="userSpaceOnUse"><stop stop-color="#00FFFF" /><stop offset="1" stop-color="#000AFF" stop-opacity="0" /></radialGradient></defs></symbol>'};function uc(e){const t=(0,de.useContext)(ne.e);return(0,de.useLayoutEffect)((()=>(t.add(cc),()=>{t.remove("eh-header-logo-5ee495d6")})),[]),(0,u.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,u.jsx)("use",{xlinkHref:"#eh-header-logo-5ee495d6"},void 0)}),void 0)}const pc="header-more-menu-icon",gc="header-setting-popup-list",hc="language-selection-menu-header";let mc=class{constructor(e){this.fetch=e}postScheduleRecord(e){return this.fetch.post("/api/v1/post_schedule/ack/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken})})}updateRedDot(e){return this.fetch.post("/api/reddot/report",{query:Object.assign({},e)})}};mc=(0,b.__decorate)([(0,x.G)(),(0,b.__metadata)("design:paramtypes",[c.r])],mc);const _c="upload-long-video",vc="series-tip";var yc,bc;!function(e){e[e.None=0]="None",e[e.Upload=1]="Upload",e[e.Inbox=2]="Inbox",e[e.EditProfile=3]="EditProfile",e[e.LiveCreatorTooltip=4]="LiveCreatorTooltip",e[e.DarkMode=5]="DarkMode",e[e.Series=6]="Series"}(yc||(yc={})),function(e){e[e.Schedule=0]="Schedule",e[e.LongVideo=1]="LongVideo",e[e.Podcast=2]="Podcast"}(bc||(bc={}));let fc=class extends tt.D{constructor(e,t){var i,o,n,a,s;super(),this.service=e,this.home=t,this.defaultState={tooltipPriority:5,uploadTooltipType:0,redDot:null!==(n=null===(o=null===(i=this.home.state.appContext)||void 0===i?void 0:i.user)||void 0===o?void 0:o.redDot)&&void 0!==n?n:[]};const r=null===(a=this.home.state.appContext)||void 0===a?void 0:a.user,l=(null!==(s=null==r?void 0:r.longVideoMinutes)&&void 0!==s?s:0)>0;return(null==r?void 0:r.showScheduleTips)?(this.state.tooltipPriority=1,void(this.state.uploadTooltipType=0)):l&&!xl.iv.getItem(_c)?(this.state.tooltipPriority=1,void(this.state.uploadTooltipType=1)):void(!(null==r?void 0:r.hasCollectionsAccess)||xl.iv.getItem(vc)||(this.state.tooltipPriority=6))}setTooltipPriority(e,t){e.tooltipPriority=t}deleteTypeRedDot(e,t){const i=[...e.redDot],o=i.indexOf(t);i.splice(o,1),e.redDot=i}postScheduleRecord(e){return e.pipe((0,$o.z)((e=>this.service.postScheduleRecord(e).pipe((0,at.U)((()=>this.noop()))))))}updateRedDot(e){return e.pipe((0,$o.z)((({redirect:e,type:t})=>this.service.updateRedDot({type:t}).pipe((0,pn.b)((()=>{e&&(location.href=e)})),(0,at.U)((()=>this.getActions().deleteTypeRedDot(t)))))))}};(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Number]),(0,b.__metadata)("design:returntype",void 0)],fc.prototype,"setTooltipPriority",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Number]),(0,b.__metadata)("design:returntype",void 0)],fc.prototype,"deleteTypeRedDot",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],fc.prototype,"postScheduleRecord",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],fc.prototype,"updateRedDot",null),fc=(0,b.__decorate)([(0,ot.Y)("Header"),(0,b.__metadata)("design:paramtypes",[mc,Q.G])],fc);const xc=(0,je.Z)("div",{target:"efubjyv0"})((({theme:{direction:e}})=>(0,Xe.YJ)({direction:e,marginStart:"24px"})),{position:"relative",width:"32px",height:"32px",background:"center no-repeat",backgroundSize:"cover",borderRadius:"50%",cursor:"pointer"},"label:DivProfileContainer;");xc.defaultProps=Object.assign(Object.assign({},xc.defaultProps),{"data-e2e":"profile-icon"});const wc=(0,de.memo)((function(e){var t;const{children:i,style:o={},id:n,ariaLabel:a,ariaExpanded:s,hasPopup:r=!0}=e,{appContext:l}=(0,se.mp)(Q.G);return(0,u.jsx)(xc,Object.assign({id:n,tabIndex:r?0:void 0,style:Object.assign({backgroundImage:`url(${null===(t=null==l?void 0:l.user)||void 0===t?void 0:t.avatarUri[0]})`},o),onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onKeyDown:e.onKeyDown,role:"button","aria-label":a,"aria-expanded":s,"aria-haspopup":r?"true":void 0,"aria-controls":s?gc:""},{children:i}),void 0)}));var kc;!function(e){e.DarkModeShow="dark_mode_show",e.DarkModeClick="dark_mode_click",e.DarkModePopUpShow="dark_mode_pop_up_show",e.DarkModePopUpClose="dark_mode_pop_up_close",e.DarkModePopUpDisappear="dark_mode_pop_up_disappear"}(kc||(kc={}));const Sc={handleDarkModeShow:()=>{Ji.W.event("dark_mode_show")},handleDarkModeClick:()=>{Ji.W.event("dark_mode_click")},handleDarkModePopUpShow:()=>{Ji.W.event("dark_mode_pop_up_show")},handleDarkModePopUpClose:()=>{Ji.W.event("dark_mode_pop_up_close")},handleDarkModePopUpDisappear:()=>{Ji.W.event("dark_mode_pop_up_disappear")}},Cc=(0,je.Z)("div",{target:"ercuxj60"})({padding:"16px",width:"264px",wordBreak:"break-word"},"label:DivTipWrapper;"),jc=(0,je.Z)("h3",{target:"ercuxj61"})((({theme:e})=>(0,Xe.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{marginBottom:"4px"},"label:H3TipTitle;"),Tc=(0,je.Z)("p",{target:"ercuxj62"})((({theme:e})=>(0,Xe.GI)({theme:e,typography:"P3",color:"ConstTextInverse"})),"label:PTipDesc;"),Ic=(0,je.Z)("div",{target:"ercuxj63"})({display:"flex",justifyContent:"flex-end"},"label:DivButtonWrapper;"),Pc=(0,je.Z)("button",{target:"ercuxj65"})(Xe.Ph,(({theme:e})=>(0,Xe.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{cursor:"pointer"},"label:ButtonCancel;"),Oc=(0,de.memo)((({userPopupActive:e})=>{const{colors:t,direction:i}=(0,g.u)(),o=(0,St.Q)(),[n,a]=(0,de.useState)(!1),[{tooltipPriority:s},r]=(0,se.b7)(fc),l=(0,de.useRef)(!1),d=(0,de.useRef)(null),c=(0,de.useCallback)((e=>{var t;e.target===d.current||(null===(t=d.current)||void 0===t?void 0:t.contains(e.target))||(a(!1),Sc.handleDarkModePopUpDisappear(),r.setTooltipPriority(3),window.removeEventListener("click",c))}),[r]),p=(0,de.useCallback)((e=>{a(!1),Sc[null!=e?e:"handleDarkModePopUpDisappear"](),r.setTooltipPriority(3),window.removeEventListener("click",c)}),[r,c]);(0,de.useEffect)((()=>{let e;return n&&(e=window.setTimeout((()=>{l.current=!0,p()}),5e3),window.addEventListener("click",c)),()=>{clearTimeout(e),n&&!l.current&&(Sc.handleDarkModePopUpDisappear(),r.setTooltipPriority(3)),window.removeEventListener("click",c)}}),[n,c]);const{pathname:h}=(0,ue.TH)(),m=Ce(h);(0,de.useEffect)((()=>{const e=(0,To.le)(ge.HW);Number(e)<2&&5===s&&m?(a(!0),Sc.handleDarkModePopUpShow(),(0,To.D$)(ge.HW,String(Number(e)+1))):(a(!1),5===s&&r.setTooltipPriority(3))}),[s]),(0,de.useEffect)((()=>{e&&n&&(l.current=!0,p())}),[e,n]);const _=(0,de.useCallback)((()=>{l.current=!0,p("handleDarkModePopUpClose")}),[p]),v="ltr"===i?"bottomRight":"bottomLeft";return(0,u.jsx)(or.G,Object.assign({active:n,backgroundColor:t.ConstSecondary2,placement:v,arrowMargin:"16px",margin:"-12px"},{children:(0,u.jsxs)(Cc,Object.assign({ref:d},{children:[(0,u.jsx)(jc,{children:o("pc_web_dark_mode_popup_header")},void 0),(0,u.jsx)(Tc,{children:o("pc_web_dark_mode_popup_body")},void 0),(0,u.jsx)(Ic,{children:(0,u.jsx)(Pc,Object.assign({onClick:_},{children:o("editprofile_close")}),void 0)},void 0)]}),void 0)}),void 0)}));var Lc,Mc=i(18939),Ec=i(80376),Ac=i(78249),Dc=i(13380),Fc=i(32518),Rc=i(67929),Bc=i.n(Rc);!function(e){e.MessagePopShow="message_pop_notice_show",e.ChangeNoticeTab="change_notification_tab",e.EnterFollowRequest="enter_follow_request",e.FollowRequestAction="follow_request_action",e.EnterFoldMessage="enter_folded_message",e.SystemNotificationShow="system_notification_show",e.SystemNotificationClick="system_notification_click",e.ChangeSystemNotificationTab="change_system_notification_tab"}(Lc||(Lc={}));const Nc="homepage_message";let Wc=class{handlePopShow(e){Ji.W.event("message_pop_notice_show",e)}handleChangeTab(e){Ji.W.event("change_notification_tab",this.getNoticeParams(e))}handleEnterFollow(e){Ji.W.event("enter_follow_request",this.getNoticeParams(e))}handleFollowRequestAction(e){Ji.W.event("follow_request_action",Bc()(e,{enter_from:"follow_request_page",previous_page:"homepage_message"}))}handleEnterFold(e){Ji.W.event("enter_folded_message",Bc()(e,{enter_from:Nc,account_type:"like"}))}handleSystemNotificationShow(){Ji.W.event("system_notification_show",this.getNoticeParams({}))}handleSystemNotificationClick(e){Ji.W.event("system_notification_click",this.getNoticeParams({enter_from:"system_notification_page",enter_method:e.enter_method}))}handleChangeSystemNotificationTab(e){Ji.W.event("change_system_notification_tab",this.getNoticeParams(e))}getNoticeParams(e){return Bc()(e,{enter_from:Nc,page_name:Nc,previous_page:Ji.W.commonParams.page_name})}};Wc=(0,b.__decorate)([(0,x.G)()],Wc);let Uc=class{constructor(e){this.fetch=e}getNoticeGroupData(e){return this.fetch.get("/api/notice/multi/",{query:e,baseUrlType:2})}getSystemNoticeGroupData(e){return this.fetch.get("/api/inbox/notice_list/",{query:e,baseUrlType:2})}getNoticeDiggList(e){return this.fetch.get("/api/notice/digg/list/",{query:e})}getNoticeFollowRequestList(e){return this.fetch.get("/api/user/following/request/list/",{query:e})}postFollowReplyApprove(e){return this.fetch.post("/api/commit/follow/request/approve/",{query:{from_user_id:e,from:33},headers:{[Pn.eD]:this.fetch.csrfToken}})}postFollowReplyReject(e){return this.fetch.post("/api/commit/follow/request/reject/",{query:{from_user_id:e,from:33},headers:{[Pn.eD]:this.fetch.csrfToken}})}};Uc=(0,b.__decorate)([(0,x.G)(),(0,b.__metadata)("design:paramtypes",[c.r])],Uc);var qc=i(6943),zc=i(55279),$c=i(6173),Hc=i(82442),Zc=i(28234),Vc=i(81794),Gc=i(57654),Qc=i(60722),Jc=i(23514),Yc=i(78848),Kc=i(62854),Xc=i(59051),eu=i(9408),tu=i(40373),iu=i(11932),ou=i(15445),nu=i(17171),au=i(3557),su=i(9305);const ru=({src:e})=>{const t=/^https?:\/\/[a-zA-Z0-9-]+-sg/.test(e)?"t.tiktok.com":"m.tiktok.com";return(0,wn.stringifyUrl)({url:`https://${t}/node-a/video/playsv`,query:{play_url:e}})},lu=e=>33===e.type&&Boolean(e.follow),du=e=>41===e.type&&Boolean(e.digg),cu=e=>31===e.type&&Boolean(e.comment),uu=e=>21===e.type&&Boolean(e.duet),pu=e=>45===e.type&&Boolean(e.at),gu=e=>213===e.type&&Boolean(e.template_notice),hu={2:47,6:21};function mu(e){var t;return null!==(t=hu[e])&&void 0!==t?t:e}var _u;!function(e){e[e.All=500]="All",e[e.Like=3]="Like",e[e.Comment=2]="Comment",e[e.Mention=6]="Mention",e[e.Follow=7]="Follow"}(_u||(_u={}));const vu=[500,3,2,6,7];var yu;!function(e){e[e.All=661]="All",e[e.AccountUpdates=47]="AccountUpdates",e[e.TikTok=12]="TikTok",e[e.CreatorMonetization=61]="CreatorMonetization",e[e.AdsSupport=21]="AdsSupport",e[e.BusinessAccount=82]="BusinessAccount",e[e.Promotions=81]="Promotions",e[e.BrandActivity=212]="BrandActivity",e[e.TikTokPlatform=215]="TikTokPlatform",e[e.AdsFeedback=218]="AdsFeedback",e[e.Missions=223]="Missions",e[e.TransactionAssistant=224]="TransactionAssistant",e[e.CreatorProgram=249]="CreatorProgram",e[e.Live=254]="Live",e[e.ScreenTime=255]="ScreenTime",e[e.MLBB=256]="MLBB",e[e.Series=262]="Series",e[e.CreatorMarketplace=272]="CreatorMarketplace",e[e.Effects=274]="Effects"}(yu||(yu={}));const bu={661:{value:661,label:"inbox_all_activity"},47:{value:47,label:"system_notifications_inbox_channel_name_accountupdates"},12:{value:12,label:"system_notifications_inbox_channel_name_tiktok"},61:{value:61,label:"system_notifications_inbox_channel_name_creatormonetization"},21:{value:21,label:"system_notifications_inbox_channel_name_adssupport"},82:{value:82,label:"system_notifications_inbox_channel_name_businessaccount"},81:{value:81,label:"promote_title"},212:{value:212,label:"TTweb_inbox_systemNotificationchannel_brandActivity_name"},215:{value:215,label:"TTweb_inbox_systemNotificationchannel_tiktokPlatform_name"},218:{value:218,label:"TTweb_inbox_systemNotificationchannel_adsFeedback_name"},223:{value:223,label:"TTweb_inbox_systemNotificationchannel_missions_name"},224:{value:224,label:"system_notifications_inbox_channel_name_transactionassistant"},249:{value:249,label:"TTweb_inbox_systemNotificationchannel_creatorProgram_name"},254:{value:254,label:"system_notifications_inbox_channel_name_live"},255:{value:255,label:"TTweb_inbox_systemNotificationchannel_screenTime_name"},256:{value:256,label:"TTweb_inbox_systemNotificationchannel_mlbb_name"},262:{value:262,label:"TTweb_inbox_systemNotificationchannel_series_name"},272:{value:272,label:"TTweb_inbox_systemNotificationchannel_creatorMarketplace_name"},274:{value:274,label:"TTweb_inbox_systemNotificationchannel_effects_name"}},fu={661:"all",47:"account_updates",12:"tiktok",61:"creator_monetization",21:"ads_support",82:"business_account",81:"promotions",212:"brand_activity",215:"tiktok_platform",218:"ads_feedback",223:"missions",224:"transaction_assistant",249:"creator_program",254:"live",255:"screen_time",256:"mlbb",262:"series",272:"creator_marketplace",274:"effects"};var xu;!function(e){e[e.Approve=0]="Approve",e[e.Reject=1]="Reject"}(xu||(xu={}));const wu={500:"all",2:"comments",7:"followers",3:"likes",6:"mentions"};let ku=class extends tt.D{constructor(e,t,i){super(),this.report=e,this.service=t,this.user=i,this.defaultNoticeList={has_more:1,max_time:0,min_time:0,notice_list:[],loading:!1},this.defaultFollowRequest={has_more:!1,min_time:0,total:0,users:[],loading:!1},this.defaultState={diggList:{users:[],loading:!1,has_more:1,max_cursor:0,min_cursor:0},activeGroup:500,activeSystemNoticeGroup:null,noticeList:this.defaultNoticeList,followRequest:this.defaultFollowRequest,latestSystemNotice:null}}setActiveGroup(e,t){e.activeGroup=t}setActiveSystemNoticeGroup(e,t){e.activeSystemNoticeGroup=t}setNoticeList(e,t){e.noticeList=t}setNoticeListLoading(e,t){e.noticeList.loading=t}setLatestSystemNotice(e,t){e.latestSystemNotice=t}changeActiveGroup(e){return e.pipe((0,pn.b)((({group:e})=>{this.report.handleChangeTab({to_tab_name:wu[e]})})),(0,$o.z)((({group:e,hasSystemNotification:t})=>(0,Ho.of)(this.getActions().setActiveGroup(e),this.getActions().setNoticeList(this.defaultNoticeList),this.getActions().fetchNoticeData(),500===e&&t?this.getActions().fetchLatestSystemNotice():this.noop()))))}changeActiveSystemNoticeGroup(e){return e.pipe((0,pn.b)((e=>{this.report.handleChangeSystemNotificationTab({to_tab_name:fu[e]})})),(0,$o.z)((e=>(0,Ho.of)(this.getActions().setActiveSystemNoticeGroup(e),this.getActions().setNoticeList(this.defaultNoticeList),this.getActions().fetchSystemNoticeData()))))}fetchNoticeData(e){return e.pipe((0,mn.M)(this.state$),(0,un.w)((([e,{activeGroup:t,noticeList:i}])=>{if(i.loading||!i.has_more)return Vo.E;const o={count:20,is_mark_read:1,group:t,max_time:i.max_time,min_time:i.min_time};return this.service.getNoticeGroupData({aid:1988,group_list:JSON.stringify([o])}).pipe((0,pn.b)((e=>{(0,_n.k)(e.status_code,[0])})),(0,$o.z)((e=>{var t;if(0===e.status_code){const{notice_lists:o}=e;if(!(null==o?void 0:o.length))return(0,Ho.of)(this.getActions().setNoticeList({has_more:0,min_time:i.min_time,max_time:i.max_time,notice_list:i.notice_list,loading:!1}));const{has_more:n,max_time:a,min_time:s,notice_list:r=[]}=o[0];return r.forEach((e=>{(e=>{var t,i,o,n,a,s,r,l,d,c,u,p,g,h,m,_,v,y,b,f;if(du(e)){const s=null===(o=null===(i=null===(t=e.digg.aweme)||void 0===t?void 0:t.video)||void 0===i?void 0:i.cover)||void 0===o?void 0:o.url_list;if(0!==(null===(a=null===(n=e.digg.aweme)||void 0===n?void 0:n.status)||void 0===a?void 0:a.private_status)&&s){const e=ru({src:s[0]});s[0]=e}}if(cu(e)){const t=null===(l=null===(r=null===(s=e.comment.aweme)||void 0===s?void 0:s.video)||void 0===r?void 0:r.cover)||void 0===l?void 0:l.url_list;if(0!==(null===(c=null===(d=e.comment.aweme)||void 0===d?void 0:d.status)||void 0===c?void 0:c.private_status)&&t){const e=ru({src:t[0]});t[0]=e}}if(uu(e)){const t=null===(g=null===(p=null===(u=e.duet.aweme)||void 0===u?void 0:u.video)||void 0===p?void 0:p.cover)||void 0===g?void 0:g.url_list;if(0!==(null===(m=null===(h=e.duet.aweme)||void 0===h?void 0:h.status)||void 0===m?void 0:m.private_status)&&t){const e=ru({src:t[0]});t[0]=e}}if(pu(e)){const t=null===(y=null===(v=null===(_=e.at.aweme)||void 0===_?void 0:_.video)||void 0===v?void 0:v.cover)||void 0===y?void 0:y.url_list;if(0!==(null===(f=null===(b=e.at.aweme)||void 0===b?void 0:b.status)||void 0===f?void 0:f.private_status)&&t){const e=ru({src:t[0]});t[0]=e}}})(e)})),(0,Ho.of)(this.user.getActions().multiSetUser(this.getNoticeUsers(r)),this.getActions().setNoticeList({has_more:n,max_time:a,min_time:s,notice_list:[...null!==(t=i.notice_list)&&void 0!==t?t:[],...r],loading:!1}))}return(0,Ho.of)(this.noop())})),(0,gn.O)(this.getActions().setNoticeListLoading(!0)),(0,hn.l)(this.getActions().setNoticeListLoading(!1)),(0,rt.n)({}))})))}fetchSystemNoticeData(e){return e.pipe((0,mn.M)(this.state$),(0,un.w)((([e,{activeSystemNoticeGroup:t,noticeList:i}])=>i.loading||!i.has_more||null==t?Vo.E:this.service.getSystemNoticeGroupData({aid:1988,group_list:JSON.stringify([{count:20,is_mark_read:1,group:t,max_time:i.max_time,min_time:i.min_time}])}).pipe((0,$o.z)((e=>{var t;if(0!==e.status_code)return(0,Ho.of)(this.noop());const{notice_lists:o}=e;if(!(null==o?void 0:o.length))return(0,Ho.of)(this.getActions().setNoticeList({has_more:0,min_time:i.min_time,max_time:i.max_time,notice_list:i.notice_list,loading:!1}));const{has_more:n,max_time:a,min_time:s,notice_list:r=[]}=o[0];return(0,Ho.of)(this.getActions().setNoticeList({has_more:n?1:0,max_time:a,min_time:s,notice_list:[...null!==(t=i.notice_list)&&void 0!==t?t:[],...r],loading:!1}))})),(0,gn.O)(this.getActions().setNoticeListLoading(!0)),(0,hn.l)(this.getActions().setNoticeListLoading(!1)),(0,rt.n)({})))))}fetchLatestSystemNotice(e){return e.pipe((0,un.w)((e=>this.service.getSystemNoticeGroupData({aid:1988,group_list:JSON.stringify([{count:1,is_mark_read:1,group:661,max_time:0,min_time:0}])}).pipe((0,$o.z)((e=>{var t,i;if(0!==e.status_code)return(0,Ho.of)(this.noop());const{notice_lists:o}=e;return(null==o?void 0:o.length)?(0,Ho.of)(this.getActions().setLatestSystemNotice(null!==(i=null===(t=o[0].notice_list)||void 0===t?void 0:t[0])&&void 0!==i?i:null)):(0,Ho.of)(this.getActions().setLatestSystemNotice(null))}))))))}setDiggList(e,t){e.diggList.users=t}setDiggListLoading(e,t){e.diggList.loading=t}fetchDiggListData(e){return e.pipe((0,mn.M)(this.state$),(0,st.z)((([{ref_id:e},{diggList:t}])=>{if(t.loading||!t.has_more)return Vo.E;const i={count:20,max_cursor:t.max_cursor,min_cursor:t.min_cursor,digg_type:1,ref_id:e,aid:1988};return this.service.getNoticeDiggList(i).pipe((0,$o.z)((e=>{var t;const i=(null!==(t=e.digg_infos)&&void 0!==t?t:[]).map((({simple_user:e})=>(0,Ue.yk)(e)));return(0,Ho.of)(this.user.getActions().multiSetUser(i),this.getActions().setDiggList(i.map((({uniqueId:e})=>e))))})),(0,gn.O)(this.getActions().setDiggListLoading(!0)),(0,hn.l)(this.getActions().setDiggListLoading(!1)))})))}setNoticeFollowRequest(e,t){e.followRequest=t}setNoticeFollowRequestLoading(e,t){e.followRequest.loading=t}fetchNoticeFollowRequest(e){return e.pipe((0,mn.M)(this.state$),(0,$o.z)((([{uid:e,refresh:t},{followRequest:i}])=>{const o={user_id:e,count:20,max_time:t?0:i.min_time,aid:1988};return this.service.getNoticeFollowRequestList(o).pipe((0,pn.b)((e=>{(0,_n.k)(e.status_code,[0])})),(0,$o.z)((e=>{var o;if(0===e.status_code){const n=(null!==(o=e.request_users)&&void 0!==o?o:[]).map((e=>(0,Ue.yk)(e))),a=n.map((({uniqueId:e})=>e));return(0,Ho.of)(this.user.getActions().multiSetUser(n),this.getActions().setNoticeFollowRequest({has_more:e.has_more,loading:!1,min_time:e.min_time,total:e.total,users:t?a:i.users.concat(a),from:"fetchNoticeFollowRequest"}))}return(0,Ho.of)(this.noop())})),(0,gn.O)(this.getActions().setNoticeFollowRequestLoading(!0)),(0,hn.l)(this.getActions().setNoticeFollowRequestLoading(!1)),(0,rt.n)({}))})))}setNoticeFollowRequestReply(e,t){const i=e.followRequest.users.indexOf(t);if(i>=0){e.followRequest.users.splice(i,1);const{total:t}=e.followRequest;e.followRequest.total="string"==typeof t?t.replace(/(.+?)(\d0*$)/,((e,t,i)=>t+String(Number(i)-1))):t-1}}postFollowReply(e){return e.pipe((0,pn.b)((({approveOrReject:e,uid:t=""})=>{this.report.handleFollowRequestAction({action:0===e?"accept":"delete",to_user_id:t})})),(0,$o.z)((({approveOrReject:e,uniqueId:t,uid:i=""})=>(0===e?this.service.postFollowReplyApprove(i):this.service.postFollowReplyReject(i)).pipe((0,Ll.h)(this.getActions().setNoticeFollowRequestReply(t))))))}getNoticeUsers(e){return e.reduce(((e,t)=>{var i;return lu(t)&&e.push((0,Ue.yk)(t.follow.from_user)),du(t)&&(null===(i=t.digg.from_user)||void 0===i||i.forEach((t=>e.push((0,Ue.yk)(t))))),cu(t)&&e.push((0,Ue.yk)(t.comment.comment.user)),uu(t)&&e.push((0,Ue.yk)(t.duet.aweme.author)),pu(t)&&t.at.user_info&&e.push((0,Ue.yk)(t.at.user_info)),e}),[])}};(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Number]),(0,b.__metadata)("design:returntype",void 0)],ku.prototype,"setActiveGroup",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Number]),(0,b.__metadata)("design:returntype",void 0)],ku.prototype,"setActiveSystemNoticeGroup",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],ku.prototype,"setNoticeList",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],ku.prototype,"setNoticeListLoading",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],ku.prototype,"setLatestSystemNotice",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],ku.prototype,"changeActiveGroup",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],ku.prototype,"changeActiveSystemNoticeGroup",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],ku.prototype,"fetchNoticeData",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],ku.prototype,"fetchSystemNoticeData",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],ku.prototype,"fetchLatestSystemNotice",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Array]),(0,b.__metadata)("design:returntype",void 0)],ku.prototype,"setDiggList",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],ku.prototype,"setDiggListLoading",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],ku.prototype,"fetchDiggListData",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],ku.prototype,"setNoticeFollowRequest",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],ku.prototype,"setNoticeFollowRequestLoading",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],ku.prototype,"fetchNoticeFollowRequest",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,String]),(0,b.__metadata)("design:returntype",void 0)],ku.prototype,"setNoticeFollowRequestReply",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],ku.prototype,"postFollowReply",null),ku=(0,b.__decorate)([(0,ot.Y)("Notice"),(0,b.__metadata)("design:paramtypes",[Wc,Uc,da.z])],ku);const Su={id:"header-arrow-c7e050e5",use:"header-arrow-c7e050e5-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="header-arrow-c7e050e5"><path fill-rule="evenodd" d="m4.123 12 7.586 7.586a.5.5 0 0 1 0 .707l-1.414 1.414a.5.5 0 0 1-.707 0L.94 13.061a1.5 1.5 0 0 1 0-2.122l8.647-8.646a.5.5 0 0 1 .707 0l1.414 1.414a.5.5 0 0 1 0 .707L4.123 12z" clip-rule="evenodd" /></symbol>'};function Cu(e){const t=(0,de.useContext)(ne.e);return(0,de.useLayoutEffect)((()=>(t.add(Su),()=>{t.remove("header-arrow-c7e050e5")})),[]),(0,u.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,u.jsx)("use",{xlinkHref:"#header-arrow-c7e050e5"},void 0)}),void 0)}let ju=class extends tt.D{constructor(e,t){super(),this.service=e,this.t=t,this.defaultState={reportDetail:{isLoading:!1,data:null},reportList:{data:[],hasNextPage:!0,pageCount:0},activeReport:null}}setReportDetail(e,t){e.reportDetail.data=t}setReportDetailLoading(e,t){e.reportDetail.isLoading=t}setReportListData(e,t){e.reportList.data.push(...t.data),e.reportList.hasNextPage=t.hasNextPage,e.reportList.pageCount=t.pageCount}setActiveReport(e,t){e.activeReport=t}getReportDetail(e){return e.pipe((0,st.z)((({reportId:e,reportType:t})=>this.service.getReportDetail({report_id:e,report_type:t}).pipe((0,at.U)((({body:{detail:e}})=>e?this.getActions().setReportDetail(e):this.noop())),(0,gn.O)(this.getActions().setReportDetailLoading(!0)),(0,hn.l)(this.getActions().setReportDetailLoading(!1)),(0,rt.n)({callback:this.commonToastError})))))}getReportList(e){return e.pipe((0,mn.M)(this.state$),(0,st.z)((([e,{reportList:{pageCount:t,hasNextPage:i}}])=>i?this.service.getReportList({start:t,count:15}).pipe((0,at.U)((({body:{status_code:e,list:i,has_more:o}})=>0!==e?this.noop():this.getActions().setReportListData({data:null!=i?i:[],hasNextPage:o,pageCount:t+15}))),(0,rt.n)({callback:this.commonToastError})):(0,Ho.of)(this.noop()))))}updateActiveReport(e){return e.pipe((0,$o.z)((e=>[this.getActions().setActiveReport(e)])))}commonToastError(){ji.h.destroy(),ji.h.open({content:this.t(ge.kU),duration:3,widthType:"half"})}};(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],ju.prototype,"setReportDetail",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],ju.prototype,"setReportDetailLoading",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],ju.prototype,"setReportListData",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],ju.prototype,"setActiveReport",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],ju.prototype,"getReportDetail",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],ju.prototype,"getReportList",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],ju.prototype,"updateActiveReport",null),ju=(0,b.__decorate)([(0,ot.Y)("ReportInbox"),(0,b.__param)(1,(0,w.t)(Z.s$)),(0,b.__metadata)("design:paramtypes",[Jd,Function])],ju);var Tu=i(21145);const Iu={id:"violation-icon-9fe129d6",use:"violation-icon-9fe129d6-usage",viewBox:"0 0 21 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 20" id="violation-icon-9fe129d6"><rect width="1.501" height="17.768" fill="#fff" rx=".5" transform="scale(1 -1) rotate(45.638 27.162 10.536)" /><path fill="#fff" fill-rule="evenodd" d="M10.57 14.556c1.11 0 2.163-.17 3.11-.472L12.5 12.93a.512.512 0 0 1-.058-.068 9.006 9.006 0 0 1-1.873.193c-1.802 0-3.368-.514-4.445-1.267-1.08-.757-1.557-1.658-1.557-2.484 0-.826.476-1.728 1.557-2.485a5.44 5.44 0 0 1 .075-.051L5.11 5.702c-1.266.94-2.043 2.207-2.043 3.602 0 2.9 3.36 5.252 7.503 5.252zM7.475 4.518c.943-.3 1.99-.466 3.093-.466 4.144 0 7.503 2.351 7.503 5.252 0 1.39-.77 2.652-2.03 3.592l-1.09-1.066a5.9 5.9 0 0 0 .062-.042c1.08-.757 1.557-1.658 1.557-2.484 0-.826-.476-1.728-1.557-2.485-1.076-.753-2.643-1.267-4.445-1.267-.65 0-1.268.067-1.844.188l-1.25-1.222z" clip-rule="evenodd" /><path fill="#fff" fill-rule="evenodd" d="M11.357 11.81a2.626 2.626 0 0 1-3.31-3.236l3.31 3.236zM9.803 6.792a2.626 2.626 0 0 1 3.296 3.224L9.804 6.792z" clip-rule="evenodd" /></symbol>'};function Pu(e){const t=(0,de.useContext)(ne.e);return(0,de.useLayoutEffect)((()=>(t.add(Iu),()=>{t.remove("violation-icon-9fe129d6")})),[]),(0,u.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,u.jsx)("use",{xlinkHref:"#violation-icon-9fe129d6"},void 0)}),void 0)}var Ou=i(51722),Lu=i.n(Ou);function Mu(e){if(isNaN(Number(e)))return"";const t=Lu().unix(Number(e)),i=e=>e.toString().padStart(2,"0"),o=i(t.month()+1),n=i(t.date()),a=i(t.hour()),s=i(t.minute()),r=i(t.second());return`${t.year()}-${o}-${n} ${a}:${s}:${r}`}const Eu=(0,Ke.Z)("div",{target:"egjh0py0"})({display:"flex",padding:"10px 0"},"label:DivItemContainer;"),Au=(0,Ke.Z)("div",{target:"egjh0py1"})((({theme:{direction:e,colors:t}})=>[{height:"48px",width:"48px",borderRadius:"50%",border:`1px solid ${t.LinePrimary}`,backgroundColor:t.BGTertiary,display:"flex",alignItems:"center",justifyContent:"center","> svg > path":{fill:t.TextPrimary}},(0,Xe.YJ)({direction:e,marginEnd:"12px"})]),"label:DivLogoContainer;"),Du=(0,Ke.Z)("img",{target:"egjh0py2"})((({theme:{direction:e}})=>[{height:"48px",width:"48px",borderRadius:"50%"},(0,Xe.YJ)({direction:e,marginEnd:"12px"})]),"label:ImgLeftIcon;"),Fu=(0,Ke.Z)("img",{target:"egjh0py3"})((({theme:{colors:e}})=>({objectFit:"cover",backgroundColor:e.TextTertiary})),"label:ImgCover;"),Ru=(0,Ke.Z)("div",{target:"egjh0py4"})({flex:1,display:"flex",justifyContent:"space-between"},"label:DivRightContent;"),Bu=(0,Ke.Z)("div",{target:"egjh0py5"})((({theme:{colors:e,direction:t}})=>[{flex:1,color:e.TextPrimary},(0,Xe.YJ)({direction:t,marginEnd:"12px"})]),"label:DivDialogContent;"),Nu=(0,Ke.Z)("span",{target:"egjh0py6"})((({theme:e})=>[(0,Xe.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3"}),{lineHeight:"17px"}]),"label:SpanTitle;"),Wu=(0,Ke.Z)("div",{target:"egjh0py7"})((({theme:e})=>[(0,Xe.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P3"}),{lineHeight:"17px"}]),"label:DivContent;"),Uu=(0,Ke.Z)("span",{target:"egjh0py8"})((({theme:e})=>[(0,Xe.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P3",color:"TextQuaternary"}),{lineHeight:"17px"}]),"label:SpanTime;"),qu=(0,Ke.Z)("div",{target:"egjh0py9"})({width:"42px",height:"56px",borderRadius:"2px",overflow:"hidden",position:"relative"},"label:DivImgWrapper;"),zu=(0,Ke.Z)("div",{target:"egjh0py10"})((({theme:{direction:e}})=>[{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",width:"100%",height:"100%",top:0,backgroundColor:"rgba(0, 0, 0, .5)"},(0,Xe.YJ)({direction:e,start:0})]),"label:DivViolationMask;"),$u=({item:e,isV2:t})=>{const[i,o]=(0,de.useState)(!1),n=(0,de.useCallback)((()=>{o(!0)}),[]),{title:a="",content:s="",time:r="",cover_url:l="",avatar_url:d="",has_mask:c=!1}=e;return(0,u.jsxs)(Eu,Object.assign({role:"listitem",tabIndex:0,"aria-label":s},{children:[d&&""!==d?(0,u.jsx)(Du,{src:d||Tu},void 0):(0,u.jsx)(Au,{children:(0,u.jsx)($c.L,{size:32},void 0)},void 0),(0,u.jsxs)(Ru,{children:[(0,u.jsxs)(Bu,{children:[(0,u.jsx)(Nu,{children:a},void 0),(0,u.jsxs)(Wu,{children:[s," ",(0,u.jsx)(Uu,{children:t?Mu(r):r},void 0)]},void 0)]},void 0),l&&(0,u.jsxs)(qu,{children:[(0,u.jsx)(Fu,{width:"100%",height:"100%",src:l,onLoad:n},void 0),c&&i&&(0,u.jsx)(zu,{children:(0,u.jsx)(Pu,{width:20,height:20},void 0)},void 0)]},void 0)]},void 0)]}),void 0)},Hu=(0,Ke.Z)("div",{target:"eaptjjg0"})((({theme:{direction:e}})=>[{paddingTop:"8px",display:"flex",flexGrow:1,flexDirection:"column",alignItems:"stretch",overflowY:"auto"},(0,Xe.YJ)({direction:e,paddingStart:"16px",paddingEnd:"24px"})]),"label:DivReportDetail;"),Zu=({reportId:e,reportType:t})=>{const{reportDetail:{isLoading:i,data:o}}=(0,se.mp)(ju),n=(0,se.qj)(ju),a=(0,de.useCallback)((()=>{n.getReportDetail({reportId:e,reportType:t})}),[e,t,n]);if((0,de.useEffect)((()=>{a()}),[a]),i)return(0,u.jsx)(Ii.g,{center:!0,size:"small"},void 0);if(!o)return(0,u.jsx)("div",{},void 0);const{text_infos:s}=o,r=void 0!==t;return(0,u.jsx)(Hu,Object.assign({role:"list"},{children:null==s?void 0:s.map(((e,t)=>(0,u.jsx)($u,{item:e,isV2:r},t)))}),void 0)};var Vu=i(4776),Gu=i(87458);const Qu={id:"flag-icon-b16ff881",use:"flag-icon-b16ff881-usage",viewBox:"0 0 32 32",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" id="flag-icon-b16ff881"><path fill-rule="evenodd" d="M16.58 6.023c-2.175-1.546-4.752-1.507-6.651-1.157a14.519 14.519 0 0 0-3.097.948 8.763 8.763 0 0 0-.252.116l-.016.008-.006.003-.004.001A1 1 0 0 0 6 6.838v20.495c0 .369.298.667.667.667h.666A.667.667 0 0 0 8 27.333v-8.247l.233-.09c.515-.19 1.236-.42 2.059-.57 1.674-.31 3.597-.27 5.129.819 2.174 1.546 4.751 1.506 6.65 1.156a14.515 14.515 0 0 0 3.097-.948 8.48 8.48 0 0 0 .253-.116l.015-.007h.001l.005-.003.003-.002A1 1 0 0 0 26 18.43V6.838a1 1 0 0 0-1.444-.896h-.001l-.006.003a3.144 3.144 0 0 1-.186.085 12.52 12.52 0 0 1-2.654.812c-1.675.309-3.598.27-5.13-.82zm-6.288.81c1.674-.308 3.597-.269 5.129.82 2.174 1.546 4.751 1.506 6.65 1.156a14.358 14.358 0 0 0 1.929-.5v9.464a12.486 12.486 0 0 1-2.292.661c-1.674.309-3.597.27-5.129-.82-2.174-1.545-4.751-1.506-6.65-1.156a14.35 14.35 0 0 0-1.929.5V7.495l.233-.09c.515-.19 1.236-.42 2.059-.57z" clip-rule="evenodd" /></symbol>'};function Ju(e){const t=(0,de.useContext)(ne.e);return(0,de.useLayoutEffect)((()=>(t.add(Qu),()=>{t.remove("flag-icon-b16ff881")})),[]),(0,u.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,u.jsx)("use",{xlinkHref:"#flag-icon-b16ff881"},void 0)}),void 0)}const Yu={id:"right-arrow-5237fc96",use:"right-arrow-5237fc96-usage",viewBox:"0 0 17 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 16" id="right-arrow-5237fc96"><path fill-opacity=".5" fill-rule="evenodd" d="M12.305 7.529 6.874 2.098a.333.333 0 0 0-.472 0l-.471.471a.333.333 0 0 0 0 .471L10.891 8l-4.96 4.96a.333.333 0 0 0 0 .471l.471.471c.13.13.342.13.472 0l5.43-5.43a.667.667 0 0 0 0-.943z" clip-rule="evenodd" /></symbol>'};function Ku(e){const t=(0,de.useContext)(ne.e);return(0,de.useLayoutEffect)((()=>(t.add(Yu),()=>{t.remove("right-arrow-5237fc96")})),[]),(0,u.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,u.jsx)("use",{xlinkHref:"#right-arrow-5237fc96"},void 0)}),void 0)}const Xu={101:"report_inbox_video",102:"report_inbox_comment",103:"report_inbox_account",107:"report_inbox_live",130:"report_inbox_livecomment",106:"report_inbox_directmessage",115:"report_inbox_directmessage",123:"report_inbox_directmessage",105:"report_inbox_sound",119:"report_inbox_hashtag",141:"shoutouts_detail_comment_report_title",142:"tns_intro_reporter_title",160:"%s - qareport_question",230:"profile_page_events_list",210:"photo_name_nocaption"},ep={1:"report_inbox_inreview",3:"report_inbox_violation",2:"report_inbox_noviolation"},tp=(0,Ke.Z)("div",{target:"e1cbfxtu0"})((({theme:{colors:e,direction:t},isNotice:i,isMobile:o=!1})=>[{height:"68px",minHeight:"68px",display:"flex",flexDirection:"row",alignItems:"center",position:"relative",cursor:"pointer",":hover":o?{}:{backgroundColor:e.BGPlaceholderDefault}},(0,Xe.YJ)({direction:t,paddingStart:"16px",paddingEnd:i?"16px":"24px"})]),"label:DivReportItemContainer;"),ip=(0,Ke.Z)("div",{target:"e1cbfxtu1"})((({theme:{colors:e}})=>[{minWidth:"48px",width:"48px",height:"48px",borderRadius:"24px",border:`1px solid ${e.LinePrimary}`,backgroundColor:e.BGTertiary,display:"flex",justifyContent:"center",alignItems:"center","> svg > path":{fill:e.TextPrimary}}]),"label:DivFlagContainer;"),op=(0,Ke.Z)("div",{target:"e1cbfxtu2"})((({theme:{direction:e}})=>[{display:"flex",flexGrow:1,flexDirection:"column",justifyContent:"center",overflow:"hidden",wordWrap:"break-word"},(0,Xe.YJ)({direction:e,marginStart:"12px"})]),"label:DivReportItemContent;"),np=(0,Ke.Z)("div",{target:"e1cbfxtu3"})((({theme:{direction:e,colors:t}})=>[Object.assign(Object.assign({minWidth:"16px",width:"16px",height:"16px"},"rtl"===e&&{transform:"rotate(180deg)"}),{"> svg > path":{fill:t.TextPrimary}})]),"label:DivArrowContainer;"),ap=(0,Ke.Z)("span",{target:"e1cbfxtu4"})((({theme:e,isNotice:t})=>[(0,Xe.GI)({theme:e,fontFamily:"Proxima",typography:"P3",color:"TextPrimary",fontWeight:"semiBold"}),{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:t?"normal":"nowrap",lineHeight:"17px"}]),"label:SpanTitle;"),sp=(0,Ke.Z)("span",{target:"e1cbfxtu5"})((({theme:e,isNotice:t})=>[(0,Xe.GI)({theme:e,fontFamily:"Proxima",typography:"P3",fontWeight:"normal",color:t?"TextPrimary":"TextTertiary"}),{lineHeight:"17px"}]),"label:SpanSubtitle;"),rp=(0,Ke.Z)("span",{target:"e1cbfxtu6"})((({theme:e})=>[(0,Xe.GI)({theme:e,fontFamily:"Proxima",typography:"P3",fontWeight:"normal",color:"TextQuaternary"}),{lineHeight:"17px"}]),"label:SpanTimestamp;"),lp=(0,Ke.Z)("div",{target:"e1cbfxtu7"})((({theme:{direction:e}})=>[{position:"relative",width:"42px",minWidth:"42px",height:"56px",minHeight:"56px",borderRadius:"2px",overflow:"hidden"},(0,Xe.YJ)({direction:e,marginStart:"12px"})]),"label:DivCoverImageWrapper;"),dp=(0,Ke.Z)("img",{target:"e1cbfxtu8"})((({theme:{colors:e},isNotLoaded:t})=>[Object.assign({width:"100%",height:"100%",objectFit:"cover"},t?{backgroundColor:e.TextTertiary}:{})]),"label:ImgCoverImage;"),cp=(0,Ke.Z)("div",{target:"e1cbfxtu9"})({display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",width:"100%",height:"100%",top:0,left:0,backgroundColor:"rgba(0, 0, 0, .5)"},"label:DivViolationMask;"),up=(0,Ke.Z)("span",{target:"e1cbfxtu10"})({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:"70%",float:"left"},"label:SpanReportBoxRow;"),pp=({report:e,index:t,onClick:i,onKeyDown:o})=>{const{timeTranslator:n}=(0,Gu.e)(),a=(0,St.Q)(),{isMobile:s}=(0,Ue.m7)((0,Je.h)((()=>["isMobile"]),[])),[r,l]=(0,de.useState)(!1),d=Xu[e.report_type]?a(Xu[e.report_type]):"",c=n(1e3*Number(e.modify_time)),p=(0,de.useCallback)((()=>{i()}),[i]),g=(0,de.useCallback)((()=>{l(!0)}),[]),h=ep[e.status]?a(ep[e.status]):"";return(0,u.jsxs)(tp,Object.assign({onClick:p,onKeyDown:o,isMobile:s,tabIndex:0,role:"button","aria-labelledby":`report-item-content-${t}`},{children:[(0,u.jsx)(ip,{children:(0,u.jsx)(Ju,{width:32,height:32},void 0)},void 0),(0,u.jsxs)(op,Object.assign({id:`report-item-content-${t}`},{children:[(0,u.jsx)(ap,{children:(()=>{if(e.title)return e.title;if(160===e.report_type){const t=` - ${a("qareport_question")||"Question"}`;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(up,{children:e.object_desc},void 0),(0,u.jsx)("span",{children:t.padStart(t.length+1)},void 0)]},void 0)}return d.replace("%s",e.object_owner_name||e.object_desc||"")})()},void 0),(0,u.jsxs)(sp,{children:[a("report_inbox_status"),": ",h,(0,u.jsx)(rp,{children:c.padStart(c.length+1)},void 0)]},void 0)]}),void 0),e.cover_image?(0,u.jsxs)(lp,{children:[(0,u.jsx)(dp,{isNotLoaded:!r,src:e.cover_image,onLoad:g},void 0),3===e.status&&r&&(0,u.jsx)(cp,{children:(0,u.jsx)(Pu,{width:20,height:20},void 0)},void 0)]},void 0):(0,u.jsx)(np,{children:(0,u.jsx)(Ku,{width:16,height:16},void 0)},void 0)]}),void 0)},gp=(0,Ke.Z)("div",{target:"eq5dlep0"})({display:"flex",flexGrow:1,flexDirection:"column",alignItems:"stretch",overflow:"auto",height:"100%"},"label:DivReportList;"),hp=()=>{const{reportList:{data:e,hasNextPage:t}}=(0,se.mp)(ju),i=(0,se.qj)(ju),o=(0,de.useRef)(null);(0,de.useEffect)((()=>{e.length>0||i.getReportList()}),[i,e.length]);const n=(0,de.useCallback)((()=>{i.getReportList()}),[i]),a=(0,de.useCallback)((e=>()=>{i.updateActiveReport({reportId:e.report_id,reportType:e.report_type})}),[i]),s=(0,de.useCallback)((e=>t=>{13!==t.keyCode&&32!==t.keyCode||i.updateActiveReport({reportId:e.report_id,reportType:e.report_type})}),[i]);return(0,Vu.s)({elemRef:o,onHitBottom:n,bottomThreshold:200,throttle:200}),(0,u.jsxs)(gp,Object.assign({ref:o},{children:[e.map(((e,t)=>(0,u.jsx)(pp,{report:e,index:t,onClick:a(e),onKeyDown:s(e)},t))),t&&(0,u.jsx)("div",{children:(0,u.jsx)(Ii.g,{center:!0,size:"small"},void 0)},void 0)]}),void 0)},mp=(0,Ke.Z)("div",{target:"e115u39r0"})({height:"100%",width:"100%",display:"flex",flexDirection:"column",alignItems:"stretch",overflow:"hidden"},"label:DivReportInboxContainer;"),_p=(0,Ke.Z)("div",{target:"e115u39r1"})({display:"flex",flexDirection:"row",alignItems:"center",padding:"0 16px",margin:"24px 0 18px"},"label:DivHeader;"),vp=(0,Ke.Z)("span",{target:"e115u39r2"})((({theme:e})=>[(0,Xe.GI)({theme:e,fontFamily:"Sofia",typography:"H4",color:"TextPrimary",fontWeight:"bold"})]),"label:SpanHeaderTitle;"),yp=(0,Ke.Z)("div",{target:"e115u39r3"})((({theme:{direction:e,colors:t}})=>[Object.assign(Object.assign({width:"24px",height:"24px",cursor:"pointer"},"rtl"===e&&{transform:"rotate(180deg)"}),{"> svg > path":{fill:t.TextPrimary}})]),"label:DivBackButton;"),bp=({onClose:e})=>{var t,i;const{reportDetail:o,activeReport:n}=(0,se.mp)(ju),a=(0,St.Q)(),s=(0,se.qj)(ju),r=(0,de.useCallback)((()=>{null===n?e():s.setActiveReport(null)}),[n,s,e]),l=(0,de.useCallback)((e=>{13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),e.stopPropagation(),r())}),[r]),d=a("report_inbox_title"),c=null!==n&&null!==(i=null===(t=o.data)||void 0===t?void 0:t.tab_title)&&void 0!==i?i:d,p=null!==n?"Back to report list":"Back to notification list";return(0,u.jsxs)(mp,{children:[(0,u.jsxs)(_p,{children:[(0,u.jsx)(yp,Object.assign({onClick:r,onKeyDown:l,tabIndex:0,role:"button","aria-label":p},{children:(0,u.jsx)(Cu,{width:24,height:24},void 0)}),void 0),(0,u.jsx)(vp,{children:c},void 0)]},void 0),null!==n?(0,u.jsx)(Zu,{reportId:n.reportId,reportType:n.reportType},void 0):(0,u.jsx)(hp,{},void 0)]},void 0)};var fp=i(3984),xp=i(5687),wp=i(65077),kp=i(10623),Sp=i(16871),Cp=i(23370),jp=i(4657);const Tp=(0,Ke.Z)("div",{target:"e1d0xjxi0"})({padding:"88px 32px 0",display:"flex",flexDirection:"column",alignItems:"center"},"label:DivErrorContainer;"),Ip=(0,Ke.Z)("p",{target:"e1d0xjxi1"})((({theme:e})=>(0,Xe.GI)({theme:e,typography:"P2",fontWeight:"semiBold"})),{marginTop:"20px"},"label:PErrorTitle;"),Pp=(0,Ke.Z)("p",{target:"e1d0xjxi2"})((({theme:e})=>(0,Xe.GI)({theme:e,typography:"H6",color:"TextSecondary"})),{marginTop:"12px",textAlign:"center"},"label:PErrorDesc;"),Op={500:{title:"inbox_all_activity",desc:"inbox_default_text",Icon:wp.Z},2:{title:"Inbox_Comments_on_your_videos",desc:"Inbox_When_someone_comments_on__one_of_your_videos_you_ll_see_it_here",Icon:kp.Z},7:{title:"Inbox_New_followers",desc:"Inbox_When_someone_new_follows_you_you_ll_see_it_here",Icon:Sp.Z},3:{title:"Inbox_Likes_on_your_videos",desc:"Inbox_When_someone_likes_one_of_your_videos_you_ll_see_it_here",Icon:Cp.Z},6:{title:"Inbox_Mentions_of_You",desc:"Inbox_When_someone_mentions_you_you_ll_see_it_here",Icon:jp.Z}},Lp=(0,de.memo)((function({type:e}){const t=(0,St.Q)(),{colors:i}=(0,g.u)(),{title:o,desc:n,Icon:a}=Op[e];return(0,u.jsxs)(Tp,{children:[(0,u.jsx)(a,{width:70,height:70,fill:i.TextQuaternary},void 0),(0,u.jsx)(Ip,{children:t(o)},void 0),(0,u.jsx)(Pp,{children:t(n)},void 0)]},void 0)})),Mp=({item:e,onClick:t})=>{var i,o,n,a,s,r,l;const{isMobile:d=!1}=null!==(i=(0,Je.h)((()=>["isMobile"]),[]))&&void 0!==i?i:{},{timeTranslator:c}=(0,Gu.e)(),p=c(1e3*Number(e.create_time)),g=null!==(a=null===(n=null===(o=e.template_notice)||void 0===o?void 0:o.notice)||void 0===n?void 0:n.content)&&void 0!==a?a:"",h=(0,de.useCallback)((()=>{d?window.location.href="/report/inbox":null==t||t()}),[d,t]),m=(0,de.useCallback)((e=>{13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),e.stopPropagation(),h())}),[h]);return(0,u.jsxs)(tp,Object.assign({isNotice:!0,onClick:h,onKeyDown:m,tabIndex:0,role:"button","aria-labelledby":"notice-report-title"},{children:[(0,u.jsx)(ip,{children:(0,u.jsx)(Ju,{width:32,height:32},void 0)},void 0),(0,u.jsx)(op,{children:(0,u.jsxs)(ap,Object.assign({isNotice:!0,id:"notice-report-title"},{children:[null===(l=null===(r=null===(s=e.template_notice)||void 0===s?void 0:s.notice)||void 0===r?void 0:r.title)||void 0===l?void 0:l.title,":",(0,u.jsxs)(sp,Object.assign({isNotice:!0},{children:[g.padStart(g.length+1),(0,u.jsx)(rp,{children:p.padStart(p.length+1)},void 0)]}),void 0)]}),void 0)},void 0),(0,u.jsx)(np,{children:(0,u.jsx)(Ku,{width:16,height:16},void 0)},void 0)]}),void 0)};var Ep=i(57317);function Ap({beforeStart:e,href:t,shouldUsePush:i,state:o}){const n=(0,xp.e)();return t=(0,Ep.ot)(t),(0,de.useCallback)((a=>{null==e||e(a),n(a,{href:t,shouldUsePush:i,state:o})}),[e,n,t,i,o])}function Dp(e){let t=e.target;for(;!((null==t?void 0:t.dataset.method)||t===e.currentTarget&&t);)t=t.parentElement;return t.dataset.method}function Fp({uniqueId:e,onClick:t,enter_method:i,enter_from:o,previous_page:n,shouldHandleDom:a}){const s=(0,se.mp)(Q.G,{selector:t=>{var i;const{appContext:o}=t;return(null==o?void 0:o.user)&&(null===(i=null==o?void 0:o.user)||void 0===i?void 0:i.uniqueId)===e},dependencies:[e]});return(0,de.useCallback)((e=>{var r;let l=i;a&&(l=null!==(r=Dp(e))&&void 0!==r?r:i),null==t||t(e);const d={enter_method:l,page_name:null!=o?o:"homepage_message",enter_from:null!=o?o:"homepage_message",previous_page:null!=n?n:Ji.W.commonParams.page_name};s?ba.W.handleEnterProfile(d):ba.W.handleEnterUser(d)}),[i,a,t,s,o,n])}function Rp(e){const{vid:t,authorId:i}=e;return(0,de.useCallback)((()=>{ba.W.handleEnterVideo({enter_method:"click_noti",group_id:t,to_group_id:t,to_author_id:i})}),[i,t])}var Bp=i(75311);const Np=({theme:e})=>[(0,Xe.GI)({theme:e,typography:"H6"}),Xe.gi,{display:"flex",flexDirection:"row",padding:"10px 16px",alignItems:"flex-start",cursor:"pointer",":hover":{background:e.colors.BGView}}],Wp=(0,Ke.Z)("div",{target:"exfus50"})(Np,"label:DivItemContainer;"),Up=(0,Ke.Z)("div",{target:"exfus51"})({position:"relative",width:"48px",height:"48px",flex:"0 0 48px"},"label:DivAvatarContainer;"),qp=(0,Ke.Z)(Bp.q,{target:"exfus52"})((({size:e,multiple:t,theme:i})=>t?{position:"absolute",border:`1px solid ${i.colors.BGPrimary}`,background:i.colors.BGPrimary,boxSizing:"content-box",":first-of-type":{right:0,top:0},":last-of-type":{left:0,bottom:0}}:{flex:`0 0 ${e}px`}),"label:StyledAvatar;"),zp=(0,Ke.Z)(ei.W,{target:"exfus53"})({alignSelf:"center",flex:"0 0 auto","& > svg":{marginRight:"6px"}},"label:StyledFollowButton;"),$p=(0,Ke.Z)("div",{target:"exfus54"})({flex:"0 0 42px",width:"42px",height:"56px",background:"center no-repeat",backgroundSize:"cover",borderRadius:"2px"},"label:DivVideoCover;"),Hp=(0,Ke.Z)(ea.v,{target:"exfus55"})({flex:"0 0 42px",width:"42px",height:"56px",background:"center no-repeat",backgroundSize:"cover",borderRadius:"2px"},"label:StyledLinkVideoCover;"),Zp=(0,Ke.Z)("div",{target:"exfus56"})({padding:"0 12px",flex:"1 1 auto"},"label:DivContentContainer;"),Vp=({theme:e})=>({fontWeight:e.fontWeights.semiBold}),Gp=({theme:e})=>({fontWeight:e.fontWeights.semiBold,"&:focus":{outline:"none"},"&:focus-visible":{outline:`2px solid ${e.colors.Negative}`}}),Qp=(0,Ke.Z)("p",{target:"exfus57"})(Vp,"label:PTitleText;"),Jp=(0,Ke.Z)("a",{target:"exfus58"})(Gp,"label:ATitleLink;"),Yp=(0,Ke.Z)(ea.v,{target:"exfus59"})(Vp,"label:StyledTitleTextLink;"),Kp=(0,Ke.Z)("p",{target:"exfus510"})((0,Xe.FC)(7),(({theme:e})=>({color:e.colors.TextTertiary,maxHeight:130,wordBreak:"break-word"})),"label:PDescText;"),Xp=(0,Ke.Z)("span",{target:"exfus511"})((({theme:{colors:e}})=>({color:e.TextPrimary})),"label:SpanPrimary;"),eg=(0,Ke.Z)(Kp,{target:"exfus512"})((({theme:e})=>({position:"relative",paddingLeft:"8px",marginTop:"4px",lineClamp:1,WebkitLineClamp:1,"::before":{content:'""',position:"absolute",top:0,left:0,width:"2px",height:"100%",background:e.colors.LineSecondary}})),"label:StyledExtraText;"),tg=(0,Ke.Z)("div",{target:"exfus513"})({marginTop:"8px"},"label:DivFollowReqButtonWrapper;"),ig=(0,Ke.Z)(ei.W,{target:"exfus514"})({display:"inline-flex",":not(:first-of-type)":{marginLeft:"8px"}},"label:StyledFollowReqButton;"),og=(0,Ke.Z)(qi.rU,{target:"exfus515"})((({theme:e})=>({"&:focus":{outline:"none"},"&:focus-visible":{outline:`2px solid ${e.colors.Negative}`}})),"label:StyledLink;"),ng=(0,Ke.Z)("div",{target:"exfus516"})([Np,{alignItems:"center"}],"label:DivSystemNotifItemContainer;"),ag=(0,Ke.Z)("div",{target:"exfus517"})([{minWidth:"48px",width:"48px",height:"48px",borderRadius:"24px",border:"1px solid rgba(22, 24, 35, 1)",backgroundColor:"rgba(22, 24, 35, 1)",display:"flex",justifyContent:"center",alignItems:"center"}],"label:DivSystemNotifIconContainer;"),sg=(0,Ke.Z)("div",{target:"exfus518"})((({theme:{direction:e,colors:t}})=>[Object.assign(Object.assign({minWidth:"16px",width:"16px",height:"16px"},"rtl"===e&&{transform:"rotate(180deg)"}),{"> svg > path":{fill:t.TextTertiary}})]),"label:DivArrowContainer;"),rg=(0,Ke.Z)("p",{target:"exfus519"})((0,Xe.FC)(2),(({theme:e})=>({color:e.colors.TextTertiary,maxHeight:130,wordBreak:"break-word"})),"label:PSystemNotifDescText;"),lg=(0,Ke.Z)("div",{target:"exfus520"})((({theme:e})=>({alignItems:"flex-start",backgroundColor:e.isDark?"rgba(54, 54, 54, 1)":"rgba(245, 245, 245, 1)",display:"flex",flexDirection:"column",borderRadius:"4px",margin:"0px 16px",marginBottom:"22px",padding:"16px",":hover":{cursor:"pointer"}})),"label:DivSystemNotifListItem;"),dg=(0,Ke.Z)("div",{target:"exfus521"})({display:"flex",alignItems:"center"},"label:DivSystemNotifListItemHeader;"),cg=(0,Ke.Z)("div",{target:"exfus522"})((({theme:e})=>({alignItems:"center",justifyContent:"center",display:"flex",borderRadius:"16px",border:"1px solid "+(e.isDark?"rgba(62, 62, 62, 1)":"rgba(232, 232, 232, 1)"),backgroundColor:e.isDark?"rgba(62, 62, 62, 1)":"rgba(232, 232, 232, 1)",color:e.colors.TextPrimary,minWidth:"32px",width:"32px",height:"32px",marginInlineEnd:"8px"})),"label:DivSystemNotifListItemHeaderIcon;"),ug=(0,Ke.Z)("div",{target:"exfus523"})({marginTop:"8px",flex:1},"label:DivSystemNotifListItemBody;"),pg=(0,Ke.Z)("hr",{target:"exfus524"})((({theme:e})=>({color:e.isDark?"rgb(255, 255, 255)":"rgb(22, 24, 35)",opacity:.1,borderTop:"1px solid",margin:"12px 0px 8px 0px",width:"100%"})),"label:HrDivider;"),gg=(0,de.memo)((function({item:e}){var t,i,o,n,a;const s=(0,se.mp)(da.z,{selector:t=>{var i;return t.users[null!==(i=e.comment.comment.user.unique_id)&&void 0!==i?i:""]},dependencies:[e]}),{businessPermission:r}=(0,se.mp)(Lo.Y),{user:l}=(0,Ue.m7)((0,Qe.Lh)((()=>["user"]),[])),d=e.comment.aweme,c=r.comment&&(null==d?void 0:d.author.uid)===(null==l?void 0:l.uid)?`/business-suite/comments?video_id=${null==d?void 0:d.aweme_id}&comment_id=${e.comment.comment.cid}&from=homepage`:`/@${null==d?void 0:d.author.uid}/video/${null==d?void 0:d.aweme_id}`,p=(0,Ki.yl)({uniqueId:null!==(t=null==s?void 0:s.uniqueId)&&void 0!==t?t:"",secUid:null==s?void 0:s.secUid}),g=Rp({vid:null==d?void 0:d.aweme_id,authorId:null==d?void 0:d.author.uid}),{handleBefore:h,state:m}=(0,de.useMemo)((()=>({handleBefore:()=>{xl.To.setItem("highlight_comment",{id:e.comment.comment.cid,groupId:e.comment.aweme.aweme_id,uid:null==s?void 0:s.id,uniqueId:null==s?void 0:s.uniqueId,show:!0}),g()},state:{browserMode:!0,cid:e.comment.comment.cid,vid:e.comment.aweme.aweme_id}})),[g,e.comment.aweme.aweme_id,e.comment.comment.cid,null==s?void 0:s.id,null==s?void 0:s.uniqueId]),_=Ap({href:`${c}${r.comment?"":"?browserMode=1"}`,state:m,shouldUsePush:!0,beforeStart:h}),v=Fp({uniqueId:null==s?void 0:s.uniqueId,onClick:To.UW,enter_method:"click_head"}),y=Fp({uniqueId:null==s?void 0:s.uniqueId,onClick:To.UW,enter_method:"click_name"}),b=(0,de.useCallback)((e=>{e.stopPropagation(),ba.W.handleEnterVideo({enter_method:"click_noti",group_id:null==d?void 0:d.aweme_id,to_group_id:null==d?void 0:d.aweme_id,to_author_id:null==d?void 0:d.author.uid})}),[null==d?void 0:d.author.uid,null==d?void 0:d.aweme_id]);return s?(0,u.jsxs)(Wp,Object.assign({"data-e2e":"inbox-list-item",onClick:_},{children:[(0,u.jsx)(ea.v,Object.assign({to:p,onClick:v},{children:(0,u.jsx)(qp,{size:48,src:s.avatarThumb,multiple:!1,alt:""},void 0)}),void 0),(0,u.jsxs)(Zp,{children:[(0,u.jsx)(Yp,Object.assign({"data-e2e":"inbox-title",to:p,onClick:y},{children:s.nickname}),void 0),(0,u.jsx)(hg,{item:e,user:s},void 0)]},void 0),(0,u.jsx)(ea.v,Object.assign({to:c,onClick:b},{children:(0,u.jsx)($p,{style:{backgroundImage:`url(${null===(a=null===(n=null===(o=null===(i=e.comment.aweme)||void 0===i?void 0:i.video)||void 0===o?void 0:o.cover)||void 0===n?void 0:n.url_list)||void 0===a?void 0:a[0]})`}},void 0)}),void 0)]}),void 0):(0,_n.G)(["user"])})),hg=(0,de.memo)((function({item:e}){var t,i,o,n;const{timeTranslator:a,t:s}=(0,Gu.e)(),{user:r}=(0,Ue.m7)((0,Qe.Lh)((()=>["user"]),[])),{comment:l,create_time:d}=e,{comment_type:c,reply_comment:p}=l,g=(0,u.jsxs)(u.Fragment,{children:[" ",a(1e3*Number(d))]},void 0),h=null===(t=null==p?void 0:p.user)||void 0===t?void 0:t.uid;if(2===c||11===c){const e=h===(null==r?void 0:r.uid),t=e?"Inbox_replied_to_your_comment":"Inbox_commented";return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Kp,Object.assign({"data-e2e":"inbox-content"},{children:[(0,u.jsx)(Xp,{children:`${s(t).replace(/%(s|@)/g,"")}${e?": ":""}${null!==(i=l.comment.text)&&void 0!==i?i:""}`},void 0),g]}),void 0),(0,u.jsx)(eg,{children:`${null!==(n=null===(o=null==p?void 0:p.user)||void 0===o?void 0:o.nickname)&&void 0!==n?n:""}: ${null==p?void 0:p.text}`},void 0)]},void 0)}return 17===c||18===c?(0,u.jsxs)(Kp,Object.assign({"data-e2e":"inbox-content"},{children:[(0,u.jsx)(Xp,{children:s("inbox_videoreply")},void 0),g]}),void 0):(0,u.jsxs)(Kp,Object.assign({"data-e2e":"inbox-content"},{children:[(0,u.jsx)(Xp,{children:s("Inbox_commented").replace(/%(s|@)/g,"")+l.comment.text},void 0),g]}),void 0)})),mg=(0,de.memo)((function({item:e}){var t,i,o,n,a,s;const{t:r,timeTranslator:l}=(0,Gu.e)(),d=(0,se.mp)(da.z,{selector:t=>{var i;return t.users[null!==(i=e.duet.aweme.author.unique_id)&&void 0!==i?i:""]},dependencies:[e]}),c=(0,Ki.fH)({videoId:e.duet.aweme.aweme_id,uniqueId:null!==(t=null==d?void 0:d.uniqueId)&&void 0!==t?t:"",secUid:null==d?void 0:d.secUid}),p=(0,Ki.yl)({uniqueId:null!==(i=null==d?void 0:d.uniqueId)&&void 0!==i?i:"",secUid:null==d?void 0:d.secUid}),g=Fp({uniqueId:null==d?void 0:d.uniqueId,enter_method:"click_head"}),h=Fp({uniqueId:null==d?void 0:d.uniqueId,enter_method:"click_name"}),m=Ap({href:c,shouldUsePush:!0,beforeStart:Rp({vid:e.duet.aweme.aweme_id,authorId:e.duet.aweme.author.uid})});return d?(0,u.jsxs)(Wp,Object.assign({"data-e2e":"inbox-list-item",onClick:m},{children:[(0,u.jsx)(ea.v,Object.assign({to:p,onClick:g},{children:(0,u.jsx)(qp,{size:48,src:d.avatarThumb,alt:""},void 0)}),void 0),(0,u.jsxs)(Zp,{children:[(0,u.jsx)(Yp,Object.assign({"data-e2e":"inbox-title",to:p,onClick:h},{children:d.nickname}),void 0),(0,u.jsxs)(Kp,Object.assign({"data-e2e":"inbox-content"},{children:[r("Inbox_created_a_duet_with_you").replace(/%(s|#)/g,"")," ",l(1e3*Number(e.create_time))]}),void 0)]},void 0),(0,u.jsx)($p,{style:{backgroundImage:`url(${null===(s=null===(a=null===(n=null===(o=e.duet.aweme)||void 0===o?void 0:o.video)||void 0===n?void 0:n.cover)||void 0===a?void 0:a.url_list)||void 0===s?void 0:s[0]})`}},void 0)]}),void 0):(0,_n.G)(["user"])})),_g=(0,de.memo)((function({item:e}){var t,i,o;const n=(0,se.mp)(Q.G,{selector:e=>{const{lang:t}=e;return"ja-JP"===t||"zh-Hant-TW"===t||"zh-Hans"===t?"。":"."},dependencies:[]}),{t:a,timeTranslator:s}=(0,Gu.e)(),r=(0,se.mp)(da.z,{selector:t=>{var i;return t.users[null!==(i=e.follow.from_user.unique_id)&&void 0!==i?i:""]},dependencies:[e.follow.from_user.unique_id]}),{handleFollow:l,isFollowing:d,text:c,relation:p}=(0,Ca.w)({uniqueId:null!==(t=null==r?void 0:r.uniqueId)&&void 0!==t?t:"",followerStatus:null===(i=null==r?void 0:r.extraInfo)||void 0===i?void 0:i.followerStatus,prevent:!0,teaParams:{enter_from:"homepage_message",page_name:"homepage_message",page_type:Ji.W.commonParams.page_name,previous_page:Ji.W.commonParams.page_name}}),g=(0,de.useCallback)((e=>{13!==e.keyCode&&32!==e.keyCode||l(e)}),[l]),h=0===e.follow.follow_button_type?a("Inbox_is_following_you").replace(/%s/g,"")+n:a("Inbox_started_following_you").replace(/%s/g,"")+n,m=s(1e3*Number(e.create_time)),_=(0,Ki.yl)({uniqueId:null!==(o=null==r?void 0:r.uniqueId)&&void 0!==o?o:"",secUid:null==r?void 0:r.secUid}),v=Ap({href:_,shouldUsePush:!0,beforeStart:Fp({uniqueId:e.follow.from_user.unique_id,enter_method:"click_noti",shouldHandleDom:!0})});return r?(0,u.jsxs)(Wp,Object.assign({"data-e2e":"inbox-list-item",onClick:v},{children:[(0,u.jsx)(Bp.q,{size:48,src:r.avatarThumb,style:{flex:"0 0 48px"},"data-method":"click_head",alt:""},void 0),(0,u.jsxs)(Zp,{children:[(0,u.jsx)(Jp,Object.assign({"data-e2e":"inbox-title",href:_,onClick:To.PF,"data-method":"click_name"},{children:r.nickname}),void 0),(0,u.jsxs)(Kp,Object.assign({"data-e2e":"inbox-content"},{children:[h," ",m]}),void 0)]},void 0),(0,u.jsxs)(zp,Object.assign({"data-e2e":2===p?"":"follow-back",onClick:l,onKeyDown:g,size:"tiny",buttonTheme:d?"default":"primary"},{children:[2===p?(0,u.jsx)(ya.Z,{},void 0):null,c]}),void 0)]}),void 0):(0,_n.G)(["user"])}));var vg;!function(e){e[e.Single=48]="Single",e[e.Multiple=36]="Multiple"}(vg||(vg={}));const yg=(0,de.memo)((function({item:e,onClick:t}){var i,o,n;const a=(0,se.mp)(da.z,{selector:t=>{var i;return null===(i=e.digg.from_user)||void 0===i?void 0:i.map((({unique_id:e})=>t.users[null!=e?e:""]))},dependencies:[e.digg.from_user]}),s=`/@${e.digg.aweme.author.uid}/video/${e.digg.aweme.aweme_id}`,r=(0,de.useCallback)((i=>{i.preventDefault(),i.stopPropagation(),t(e)}),[e,t]),l=(0,de.useCallback)((t=>{t.stopPropagation(),ba.W.handleEnterVideo({enter_method:"click_noti",group_id:e.digg.aweme.aweme_id,to_group_id:e.digg.aweme.aweme_id,to_author_id:e.digg.aweme.author.uid})}),[e.digg.aweme.author.uid,e.digg.aweme.aweme_id]);return(0,u.jsxs)(Wp,Object.assign({"data-e2e":"inbox-list-item",onClick:r},{children:[(0,u.jsx)(bg,{users:a},void 0),(0,u.jsxs)(Zp,{children:[(0,u.jsx)(Qp,Object.assign({"data-e2e":"inbox-title",onClick:To.UW},{children:(0,u.jsx)(xg,{users:a,merge_count:e.digg.merge_count},void 0)}),void 0),(0,u.jsx)(fg,{item:e},void 0)]},void 0),(0,u.jsx)(Hp,{onClick:l,to:s,style:{backgroundImage:`url(${null===(n=null===(o=null===(i=e.digg.aweme)||void 0===i?void 0:i.video)||void 0===o?void 0:o.cover.url_list)||void 0===n?void 0:n[0]})`}},void 0)]}),void 0)})),bg=(0,de.memo)((function({users:e}){var t,i,o,n,a;const s=Boolean(null==e?void 0:e[1]),r=Fp({uniqueId:null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.uniqueId,enter_method:"click_head"});if(!s){const{uniqueId:t="",secUid:n}=null!==(i=null==e?void 0:e[0])&&void 0!==i?i:{},a=(0,Ki.yl)({uniqueId:t,secUid:n});return(0,u.jsx)(Up,Object.assign({onClick:To.UW},{children:(0,u.jsx)(og,Object.assign({to:a,onClick:r},{children:(0,u.jsx)(qp,{size:48,src:null===(o=null==e?void 0:e[0])||void 0===o?void 0:o.avatarThumb,alt:""},void 0)}),void 0)}),void 0)}return(0,u.jsxs)(Up,Object.assign({"data-e2e":"inbox-avatar-multiple"},{children:[(0,u.jsx)(qp,{size:36,multiple:!0,src:null===(n=null==e?void 0:e[1])||void 0===n?void 0:n.avatarThumb,alt:""},void 0),(0,u.jsx)(qp,{size:36,multiple:!0,src:null===(a=null==e?void 0:e[0])||void 0===a?void 0:a.avatarThumb,alt:""},void 0)]}),void 0)})),fg=(0,de.memo)((function({item:e}){var t,i,o,n;const{t:a,timeTranslator:s}=(0,Gu.e)(),r=(0,se.mp)(Q.G,{selector:e=>{const{lang:t}=e;return"ja-JP"===t||"zh-Hant-TW"===t||"zh-Hans"===t?"。":"."},dependencies:[]}),l=void 0!==e.digg.aweme.image_post_info,d=s(1e3*Number(e.create_time),!0);if(1===e.digg.digg_type){if(l){const n=null!==(o=null===(i=null===(t=e.digg.aweme.image_post_info)||void 0===t?void 0:t.images)||void 0===i?void 0:i.length)&&void 0!==o?o:0;return(0,u.jsxs)(Kp,Object.assign({"data-e2e":"inbox-content"},{children:[a("photomode_inbox_liked",{num:n})," ",d]}),void 0)}return(0,u.jsxs)(Kp,Object.assign({"data-e2e":"inbox-content"},{children:[a("Inbox_liked_your_video").replace(/%s/g,"")+r," ",d]}),void 0)}if(3===e.digg.digg_type){const{text:t,user:i}=null!==(n=e.digg.comment)&&void 0!==n?n:{};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Kp,Object.assign({"data-e2e":"inbox-content"},{children:[a("Inbox_liked_your_comment").replace(/%s/g,"")+r," ",d]}),void 0),(0,u.jsxs)(eg,{children:[null==i?void 0:i.nickname,": ",t]},void 0)]},void 0)}return null})),xg=function({merge_count:e,users:t}){const i=(0,St.Q)();return(null==t?void 0:t[1])?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(wg,{user:null==t?void 0:t[0]},void 0),","," ",(0,u.jsx)(wg,{user:null==t?void 0:t[1]},void 0),"number"==typeof e&&e>2&&(0,u.jsxs)(u.Fragment,{children:[" ",i("Inbox_and")," ",i("Inbox_others").replace(/%d/,String(e-2))]},void 0)]},void 0):(0,u.jsx)(wg,{user:null==t?void 0:t[0]},void 0)},wg=function({user:e}){const t=Fp({uniqueId:null==e?void 0:e.uniqueId,enter_method:"click_name"});if(!e)return null;const{uniqueId:i,secUid:o}=e,n=(0,Ki.yl)({uniqueId:i,secUid:o});return(0,u.jsx)(og,Object.assign({to:n,onClick:t},{children:e.nickname}),void 0)},kg=(0,de.memo)((function({item:e}){var t,i,o,n,a,s,r;const l=(0,se.mp)(da.z,{selector:t=>{var i,o;return t.users[null!==(o=null===(i=e.at.user_info)||void 0===i?void 0:i.unique_id)&&void 0!==o?o:""]},dependencies:[e]}),d=e.at.aweme,c=`/@${null==d?void 0:d.author.uid}/video/${null==d?void 0:d.aweme_id}`,p=(0,Ki.yl)({uniqueId:null!==(t=null==l?void 0:l.uniqueId)&&void 0!==t?t:"",secUid:null==l?void 0:l.secUid}),{schema_url:g}=e.at,h=(null!==(i=null==g?void 0:g.match(/cid=(\d+)/))&&void 0!==i?i:[])[1],m=(null!==(o=null==g?void 0:g.match(/detail\/(\d+)/))&&void 0!==o?o:[])[1],_=(0,de.useMemo)((()=>{if(h)return{browserMode:!0,cid:h,vid:m}}),[h,m]),v=Rp({vid:null==d?void 0:d.aweme_id,authorId:null==d?void 0:d.author.uid}),y=Fp({uniqueId:null==l?void 0:l.uniqueId,onClick:To.UW,enter_method:"click_head"}),b=Fp({uniqueId:null==l?void 0:l.uniqueId,onClick:To.UW,enter_method:"click_name"}),f=Ap({href:`${c}?browserMode=1`,state:_,shouldUsePush:!0,beforeStart:(0,de.useCallback)((()=>{v(),h&&xl.To.setItem("highlight_comment",{id:h,groupId:m,show:!0})}),[h,v,m])}),x=(0,de.useCallback)((e=>{e.stopPropagation(),ba.W.handleEnterVideo({enter_method:"click_noti",group_id:null==d?void 0:d.aweme_id,to_group_id:null==d?void 0:d.aweme_id,to_author_id:null==d?void 0:d.author.uid})}),[null==d?void 0:d.author.uid,null==d?void 0:d.aweme_id]);return l?(0,u.jsxs)(Wp,Object.assign({"data-e2e":"inbox-list-item",onClick:f},{children:[(0,u.jsx)(ea.v,Object.assign({to:p,onClick:y},{children:(0,u.jsx)(qp,{size:48,src:l.avatarThumb,alt:""},void 0)}),void 0),(0,u.jsxs)(Zp,{children:[(0,u.jsx)(Yp,Object.assign({"data-e2e":"inbox-title",to:p,onClick:b},{children:l.nickname}),void 0),(0,u.jsx)(Sg,{item:e},void 0)]},void 0),(0,u.jsx)(ea.v,Object.assign({to:c,onClick:x},{children:(0,u.jsx)($p,{style:{backgroundImage:`url(${null===(r=null===(s=null===(a=null===(n=e.at.aweme)||void 0===n?void 0:n.video)||void 0===a?void 0:a.cover)||void 0===s?void 0:s.url_list)||void 0===r?void 0:r[0]})`}},void 0)}),void 0)]}),void 0):(0,_n.G)(["user"])})),Sg=({item:e})=>{var t,i,o,n;const{t:a,timeTranslator:s}=(0,Gu.e)(),{create_time:r,at:l}=e,{sub_type:d,content:c,reply_comment:p,aweme:g}=l,h=void 0!==(null==g?void 0:g.image_post_info),m=(0,u.jsxs)(u.Fragment,{children:[" ",s(1e3*Number(r))]},void 0);if(1===d){if(h){const e=null!==(o=null===(i=null===(t=null==g?void 0:g.image_post_info)||void 0===t?void 0:t.images)||void 0===i?void 0:i.length)&&void 0!==o?o:0;return(0,u.jsxs)(Kp,Object.assign({"data-e2e":"inbox-content"},{children:[a("in_app_push_mention_in_photo",{num:e}),m]}),void 0)}return(0,u.jsxs)(Kp,Object.assign({"data-e2e":"inbox-content"},{children:[a("Inbox_mentioned_you_in_a_video").replace(/%(s|#)/g,""),m]}),void 0)}return 2===d?(0,u.jsxs)(Kp,Object.assign({"data-e2e":"inbox-content"},{children:[(0,u.jsx)(Xp,{children:a("Inbox_mentioned_you_in_a_comment").replace("%@"," ").replace("%#","")+c},void 0),m]}),void 0):5===d?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Kp,Object.assign({"data-e2e":"inbox-content"},{children:[(0,u.jsx)(Xp,{children:a("Inbox_replied_to_your_comment").replace("%s","")+c},void 0),m]}),void 0),(0,u.jsx)(eg,{children:null!==(n=null==p?void 0:p.text)&&void 0!==n?n:""},void 0)]},void 0):null},Cg=(0,de.memo)((function({item:e,onLikeClick:t,onReportInboxClick:i}){const o=(0,de.useCallback)((e=>{t(e)}),[t]);return lu(e)?(0,u.jsx)(_g,{item:e},void 0):du(e)?(0,u.jsx)(yg,{item:e,onClick:o},void 0):cu(e)?(0,u.jsx)(gg,{item:e},void 0):uu(e)?(0,u.jsx)(mg,{item:e},void 0):pu(e)?(0,u.jsx)(kg,{item:e},void 0):gu(e)?(0,u.jsx)(Mp,{item:e,onClick:i},void 0):null}));var jg=i(91829);const Tg={id:"system-notif-inbox-icon-1efa9bd8",use:"system-notif-inbox-icon-1efa9bd8-usage",viewBox:"0 0 18 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 16" id="system-notif-inbox-icon-1efa9bd8"><path fill="white" d="M14.24 0c.828 0 1.56.454 1.808 1.123l1.78 4.81c.113.307.172.63.172.955V14.4c0 .425-.2.832-.555 1.131-.355.3-.837.469-1.34.469H1.895a2.08 2.08 0 0 1-1.34-.469C.2 15.232 0 14.824 0 14.4V6.888c0-.325.059-.648.173-.955l1.78-4.81C2.202.455 2.934 0 3.762 0H14.24Zm-.918 2.133H4.678c-.284 0-.54.15-.651.379l-.031.079-.982 3.16a.5.5 0 0 0 .477.649h11.017a.5.5 0 0 0 .478-.648l-.983-3.161c-.083-.27-.363-.457-.681-.458Z" /></symbol>'};function Ig(e){const t=(0,de.useContext)(ne.e);return(0,de.useLayoutEffect)((()=>(t.add(Tg),()=>{t.remove("system-notif-inbox-icon-1efa9bd8")})),[]),(0,u.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,u.jsx)("use",{xlinkHref:"#system-notif-inbox-icon-1efa9bd8"},void 0)}),void 0)}const Pg=(0,de.memo)((function(e){var t,i;const o=(0,St.Q)(),n=bu[mu(e.systemNotif.type)],a=n?o(n.label):null;return a?(0,u.jsxs)(ng,Object.assign({onClick:e.onClick},{children:[(0,u.jsx)(ag,{children:(0,u.jsx)(Ig,{width:16,height:16},void 0)},void 0),(0,u.jsxs)(Zp,{children:[(0,u.jsx)(Qp,{children:o("system_notifications_inbox_header")},void 0),(0,u.jsxs)(rg,{children:[a,": ",null===(i=null===(t=e.systemNotif.template_notice)||void 0===t?void 0:t.notice)||void 0===i?void 0:i.content]},void 0)]},void 0),(0,u.jsx)(sg,{children:(0,u.jsx)(jg.Z,{style:{fontSize:16}},void 0)},void 0)]}),void 0):null})),Og=(0,de.memo)((function({uniqueId:e}){var t;const i=(0,St.Q)(),o=(0,se.mp)(da.z,{selector:t=>t.users[e],dependencies:[e]}),n=(0,se.qj)(ku),a=(0,de.useCallback)((t=>i=>{i.preventDefault(),i.stopPropagation(),n.postFollowReply({approveOrReject:t,uniqueId:e,uid:null==o?void 0:o.id})}),[n,e,null==o?void 0:o.id]),s=(0,de.useCallback)((t=>i=>{13!==i.keyCode&&32!==i.keyCode||(i.preventDefault(),i.stopPropagation(),n.postFollowReply({approveOrReject:t,uniqueId:e,uid:null==o?void 0:o.id}))}),[n,e,null==o?void 0:o.id]),r=(0,Ki.yl)({uniqueId:null!==(t=null==o?void 0:o.uniqueId)&&void 0!==t?t:"",secUid:null==o?void 0:o.secUid}),l=Ap({href:r,shouldUsePush:!0,beforeStart:Fp({uniqueId:null==o?void 0:o.uniqueId,enter_method:"click_noti",enter_from:"follow_request_page",previous_page:"homepage_message",shouldHandleDom:!0})}),d=function({uniqueId:e,onKeyDown:t,enter_method:i,enter_from:o,previous_page:n,shouldHandleDom:a}){const s=(0,se.mp)(Q.G,{selector:t=>{var i;const{appContext:o}=t;return(null==o?void 0:o.user)&&(null===(i=null==o?void 0:o.user)||void 0===i?void 0:i.uniqueId)===e},dependencies:[e]});return(0,de.useCallback)((e=>{var r;let l=i;a&&(l=null!==(r=Dp(e))&&void 0!==r?r:i),null==t||t(e);const d={enter_method:l,page_name:null!=o?o:"homepage_message",enter_from:null!=o?o:"homepage_message",previous_page:null!=n?n:Ji.W.commonParams.page_name};s?ba.W.handleEnterProfile(d):ba.W.handleEnterUser(d)}),[i,a,t,s,o,n])}({uniqueId:null==o?void 0:o.uniqueId,enter_method:"click_noti",enter_from:"follow_request_page",previous_page:"homepage_message",shouldHandleDom:!0}),c=function({beforeStart:e,href:t,shouldUsePush:i,state:o}){const n=(0,xp.e)();return t=(0,Ep.ot)(t),(0,de.useCallback)((a=>{null==e||e(a),n(a,{href:t,shouldUsePush:i,state:o})}),[e,n,t,i,o])}({href:r,shouldUsePush:!0,beforeStart:d}),p=(0,de.useCallback)((e=>{13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),e.stopPropagation(),c(e))}),[c]);return o?(0,u.jsxs)(Wp,Object.assign({"data-e2e":"inbox-list-item",onClick:l,onKeyDown:p,tabIndex:0,role:"listitem","aria-label":`Go to ${o.nickname}'s page`},{children:[(0,u.jsx)(qp,{size:48,src:o.avatarThumb,"data-method":"click_head",alt:""},void 0),(0,u.jsxs)(Zp,{children:[(0,u.jsx)(Jp,Object.assign({"data-e2e":"inbox-title",href:r,onClick:To.PF,"data-method":"click_name",tabIndex:-1},{children:o.uniqueId}),void 0),(0,u.jsx)(Kp,{children:o.nickname},void 0),(0,u.jsxs)(tg,{children:[(0,u.jsx)(ig,Object.assign({size:"tiny",onClick:a(1),onKeyDown:s(1),"aria-label":i("delete")},{children:i("delete")}),void 0),(0,u.jsx)(ig,Object.assign({"data-e2e":"inbox-request-accept",size:"tiny",buttonTheme:"primary",onClick:a(0),onKeyDown:s(0),"aria-label":i("inbox_request_accept")},{children:i("inbox_request_accept")}),void 0)]},void 0)]},void 0)]}),void 0):(0,_n.G)(["user"])}));var Lg=i(58718);const Mg=(0,Ke.Z)("div",{target:"e11z9zg00"})({flex:"1 1 auto",overflow:"auto"},"label:DivInboxContentContainer;"),Eg=(0,Ke.Z)("p",{target:"e11z9zg01"})((({theme:e})=>(0,Xe.GI)({theme:e,typography:"P3",fontWeight:"semiBold",color:"TextTertiary"})),{padding:"0 16px",marginTop:"8px"},"label:PTimeGroupTitle;"),Ag=(0,Ke.Z)(ea.v,{target:"e11z9zg02"})({display:"block",width:"54px",height:"72px",background:"center no-repeat",backgroundSize:"cover",borderRadius:"2px",margin:"auto"},"label:StyledAnchor;"),Dg=(0,Ke.Z)("p",{target:"e11z9zg03"})((({theme:e})=>(0,Xe.GI)({theme:e,typography:"H6",color:"TextTertiary"})),Xe.wj,{padding:"8px 48px 2px"},"label:PCommentText;"),Fg=(0,Ke.Z)("div",{target:"e11z9zg04"})((({theme:{colors:e}})=>({height:"1px",background:e.LineSecondary,transform:"scaleY(0.5)",margin:"8px 16px"})),"label:DivSplit;"),Rg=(0,Ke.Z)("div",{target:"e11z9zg05"})({cursor:"pointer",display:"flex",flexDirection:"row",alignItems:"center",marginBottom:"8px"},(({theme:{direction:e}})=>(0,Xe.YJ)({direction:e,marginStart:"16px",marginEnd:"auto"})),"label:DivBack;"),Bg=(0,Ke.Z)(Lg.Z,{target:"e11z9zg06"})((({theme:{direction:e}})=>"ltr"===e?null:{transform:"rotate(180deg)"}),"label:StyledChevronLeftOffset;"),Ng=(0,Ke.Z)("div",{target:"e11z9zg07"})((({theme:e})=>(0,Xe.GI)({theme:e,typography:"P3"})),{padding:"8px 24px 8px 16px",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},"label:DivFollowReqEntranceContainer;"),Wg=(0,Ke.Z)("span",{target:"e11z9zg08"})({display:"flex",flexDirection:"row",alignItems:"center"},"label:SpanHintContainer;"),Ug=(0,Ke.Z)("i",{target:"e11z9zg09"})((({theme:{colors:e,direction:t}})=>[{width:"8px",height:"8px",borderRadius:"8px",background:e.Primary},(0,Xe.YJ)({direction:t,marginEnd:"8px"})]),"label:IDot;"),qg=(0,Ke.Z)("span",{target:"e11z9zg010"})((({theme:{colors:e,direction:t}})=>[{color:e.TextTertiary,marginRight:"8px"},(0,Xe.YJ)({direction:t,marginEnd:"8px"})]),"label:SpanHintText;"),zg=(0,Ke.Z)("ul",{target:"e11z9zg011"})({padding:0,margin:0,listStyleType:"none"},"label:UlInboxItemListContainer;"),$g=(0,Ke.Z)("li",{target:"e11z9zg012"})({padding:0,margin:0,listStyleType:"none"},"label:LiInboxItemWrapper;"),Hg=(0,de.memo)((function(e){const t=(0,St.Q)(),i=(0,de.useMemo)((()=>t("Back")),[t]);return(0,u.jsxs)(Rg,Object.assign({"data-e2e":"inbox-second-back",onClick:e.onClickBack,onKeyDown:e.onBackKeyDown,tabIndex:0,role:"button","aria-label":i},{children:[(0,u.jsx)(Lg.Z,{},void 0),(0,u.jsx)("span",{children:i},void 0)]}),void 0)})),Zg=(0,de.memo)((function(e){const{item:t}=e;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Hg,{onClickBack:e.onClickBack,onBackKeyDown:e.onBackKeyDown},void 0),(0,u.jsx)(Mg,Object.assign({"data-e2e":"inbox-list",role:"list"},{children:t.users.map((e=>(0,u.jsx)(Og,{uniqueId:e},e)))}),void 0)]},void 0)}));var Vg=i(59754);const Gg=(0,de.memo)((function(e){const{total:t}=e,i=(0,St.Q)(),{colors:o}=(0,g.u)();return(0,u.jsxs)(Ng,Object.assign({"data-e2e":"inbox-follow-request",onClick:e.onClick,onKeyDown:e.onKeyDown,tabIndex:0,role:"button","aria-labelledby":"inbox-follow-req-entrance-header"},{children:[(0,u.jsx)("h4",Object.assign({id:"inbox-follow-req-entrance-header"},{children:i("Inbox_Follow_requests")}),void 0),(0,u.jsxs)(Wg,{children:[(0,u.jsx)(Ug,{},void 0),(0,u.jsx)(qg,{children:t},void 0),(0,u.jsx)(Vg.Z,{fill:o.TextTertiary,width:12,height:12},void 0)]},void 0)]}),void 0)})),Qg=(0,de.memo)((function({uniqueId:e}){var t;const i=(0,se.mp)(da.z,{selector:t=>t.users[e],dependencies:[e]}),{handleFollow:o,isFollowing:n,text:a,relation:s}=(0,Ca.w)({uniqueId:e,prevent:!0,teaParams:{enter_from:"homepage_message"}}),r=(0,de.useCallback)((e=>{13!==e.keyCode&&32!==e.keyCode||o(e)}),[o]),l=(0,Ki.yl)({uniqueId:null!==(t=null==i?void 0:i.uniqueId)&&void 0!==t?t:"",secUid:null==i?void 0:i.secUid}),d=Ap({href:l,shouldUsePush:!0,beforeStart:Fp({uniqueId:e,enter_method:"click_noti",shouldHandleDom:!0})});return i?(0,u.jsxs)(Wp,Object.assign({"data-e2e":"inbox-list-item",onClick:d},{children:[(0,u.jsx)(qp,{size:48,src:i.avatarThumb,"data-method":"click_head",alt:""},void 0),(0,u.jsxs)(Zp,{children:[(0,u.jsx)(Jp,Object.assign({"data-e2e":"inbox-title",href:l,onClick:To.PF,"data-method":"click_name"},{children:i.uniqueId}),void 0),(0,u.jsx)(Kp,Object.assign({"data-e2e":"inbox-content"},{children:i.nickname}),void 0)]},void 0),(0,u.jsxs)(zp,Object.assign({onClick:o,onKeyDown:r,size:"tiny",buttonTheme:n?"default":"primary"},{children:[2===s?(0,u.jsx)(ya.Z,{},void 0):null,a]}),void 0)]}),void 0):(0,_n.G)(["user"])})),Jg=(0,de.memo)((function(e){var t,i,o;const{item:n}=e,a=(0,St.Q)(),[{loading:s,users:r},l]=(0,se.b7)(ku,{selector:e=>e.diggList,dependencies:[]});(0,de.useEffect)((()=>{var e,t;return l.fetchDiggListData({ref_id:null!==(t=null===(e=n.digg.comment)||void 0===e?void 0:e.cid)&&void 0!==t?t:n.digg.aweme.aweme_id}),()=>{l.setDiggList([]),l.setDiggListLoading(!1)}}),[l,n.digg.aweme.aweme_id,null===(t=n.digg.comment)||void 0===t?void 0:t.cid]);const d=(0,de.useCallback)((()=>s&&!r.length?(0,u.jsx)(Ii.g,{size:"small",center:!0},void 0):r.map((e=>(0,u.jsx)(Qg,{uniqueId:e},e)))),[s,r]),c=(0,Ep.ot)(`/@${n.digg.aweme.author.uid}/video/${n.digg.aweme.aweme_id}`),p=(0,de.useCallback)((()=>{location.href=c}),[c]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Rg,Object.assign({"data-e2e":"inbox-second-back",onClick:e.onClickBack,onKeyDown:e.onBackKeyDown,tabIndex:0,role:"button","aria-label":a("Back")},{children:[(0,u.jsx)(Bg,{},void 0),(0,u.jsx)("span",{children:a("Back")},void 0)]}),void 0),(0,u.jsxs)(Mg,Object.assign({"data-e2e":"inbox-list"},{children:[(0,u.jsx)(Ag,{to:c,style:{backgroundImage:`url(${null===(i=n.digg.aweme.video.cover.url_list)||void 0===i?void 0:i[0]})`},onClick:p},void 0),(null===(o=n.digg.comment)||void 0===o?void 0:o.text)&&(0,u.jsx)(Dg,{children:n.digg.comment.text},void 0),(0,u.jsx)(Fg,{},void 0),d()]}),void 0)]},void 0)}));var Yg;!function(e){e[e.New=0]="New",e[e.Today=1]="Today",e[e.Yesterday=2]="Yesterday",e[e.ThisWeek=3]="ThisWeek",e[e.ThisMonth=4]="ThisMonth",e[e.Previous=5]="Previous"}(Yg||(Yg={}));const Kg={0:"Inbox_New",1:"Inbox_Today",2:"Inbox_Yesterday",3:"Inbox_This_Week",4:"Inbox_This_Month",5:"Inbox_Previous"},Xg=[0,1,6,(new Date).getDate()].map((e=>function(e=0){return(new Date).setHours(0,0,0,0)/1e3-86400*e}(e))),eh=e=>{if(!e||!e.has_read)return 0;const t=Xg.findIndex((t=>t<e.create_time));return-1===t?5:t+1},th=(0,de.memo)((function(e){var t;const{activeGroup:i,item:o,likeItem:n,systemNotifItem:a,reportInboxList:s,onLikeItemChange:r,followItem:l,showFollow:d,onFollowChange:c,onHitBottom:p,onReportInboxClick:g,onSystemNotifItemClick:h}=e,m=(0,Ze.fz)(Wc),_=(0,de.useCallback)((()=>{r(null)}),[r]),v=(0,de.useCallback)((e=>{13!==e.keyCode&&32!==e.keyCode||r(null)}),[r]),y=(0,de.useRef)(null);(0,fp.s)({elementRef:y,onHitBottom:p,threshold:100});const b=(0,de.useCallback)((()=>{c(!1)}),[c]),f=(0,de.useCallback)((e=>{13!==e.keyCode&&32!==e.keyCode||c(!1)}),[c]),x=(0,de.useCallback)((()=>{c(!0),m.handleEnterFollow({request_cnt:Number(l.total)})}),[l.total,c,m]),w=(0,de.useCallback)((e=>{13!==e.keyCode&&32!==e.keyCode||x()}),[x]);return n?(0,u.jsx)(Jg,{item:n,onClickBack:_,onBackKeyDown:v},void 0):d?(0,u.jsx)(Zg,{onClickBack:b,onBackKeyDown:f,item:l},void 0):(0,u.jsxs)(Mg,Object.assign({"data-e2e":"inbox-list",id:"header-inbox-list",ref:y,tabIndex:0,role:"tabpanel","aria-labelledby":`inbox-tab-${vu.indexOf(i)}`},{children:[500===i&&Boolean(l.total)&&(0,u.jsx)(Gg,{onClick:x,onKeyDown:w,total:l.total},void 0),(0,u.jsx)(oh,{item:o,onLikeItemChange:e.onLikeItemChange,reportInboxList:s,activeGroup:i,onReportInboxClick:g,systemNotifItem:a,onSystemNotifItemClick:h},void 0),Boolean(null===(t=o.notice_list)||void 0===t?void 0:t.length)&&o.loading&&(0,u.jsx)(Ii.g,{center:!0,size:"small"},void 0)]}),void 0)})),ih={preventDefault:v()},oh=(0,de.memo)((function({item:e,onLikeItemChange:t,activeGroup:i,reportInboxList:o,onReportInboxClick:n,systemNotifItem:a,onSystemNotifItemClick:s}){var r,l;const d=(0,St.Q)(),c=o[0],p=(0,Ze.fz)(Wc),g=(0,xp.e)(),h=(0,Wo.bG)(),m=(0,de.useCallback)((e=>{var o,n,a;if(3===(null==e?void 0:e.digg.digg_type)||1===(null===(o=null==e?void 0:e.digg.from_user)||void 0===o?void 0:o.length)){const t=`/@${e.digg.aweme.author.uid}/video/${e.digg.aweme.aweme_id}`;let i;return 3===e.digg.digg_type&&(null===(n=e.digg.comment)||void 0===n?void 0:n.cid)&&(xl.To.setItem("highlight_comment",{id:e.digg.comment.cid,groupId:e.digg.aweme.aweme_id,show:!0}),i={browserMode:!0,cid:e.digg.comment.cid,vid:e.digg.aweme.aweme_id}),ba.W.handleEnterVideo({enter_method:"click_noti",group_id:e.digg.aweme.aweme_id,to_group_id:e.digg.aweme.aweme_id,to_author_id:e.digg.aweme.author.uid}),void g(ih,{href:t,state:i,shouldUsePush:!0})}t(e),p.handleEnterFold({tab_name:500===i?"all":"likes",group_id:null!==(a=null==e?void 0:e.digg.aweme.aweme_id)&&void 0!==a?a:""})}),[i,g,t,p]),_=(0,de.useMemo)((()=>{var t,o;if(500!==i||!c)return null!==(t=e.notice_list)&&void 0!==t?t:[];const n=eh(c),a=(null!==(o=e.notice_list)&&void 0!==o?o:[]).slice();for(let e=0;e<a.length;e++){const t=a[e],i=eh(t);if(0===n&&0!==i)return a.splice(e,0,c),a;if(c.create_time>t.create_time)return a.splice(e,0,c),a}return a.push(c),a}),[i,c,e.notice_list]),v=h&&null!=a&&500===i,y=v?(0,u.jsx)(Pg,{systemNotif:a,onClick:s},void 0):null;(0,de.useEffect)((()=>{v&&p.handleSystemNotificationShow()}),[p,v]);let b=eh(null==_?void 0:_[0]);const f=(0,de.useMemo)((()=>{const e=[];let t=0;if(null==_||_.map(((i,o)=>{if(0===o||0===b&&i.has_read||i.create_time<Xg[b-1]){if(b=eh(i),0!==o){const i=_.slice(t,o);e.push(i)}t=o}return i})),t<_.length){const i=_.slice(t);e.push(i)}if(v){const t=eh(a),i=Object.assign(Object.assign({},a),{isSystemNotif:!0});for(let o=0;o<e.length;o++){const n=e[o];if(t===eh(n[0])){n.splice(0,0,i);break}if(a.create_time>n[0].create_time){e.splice(o,0,[i]);break}if(o===e.length-1&&a.create_time<n[0].create_time){e.push([i]);break}}0===e.length&&e.push([i])}return e}),[b,_,v]);return e.loading&&!(null===(r=e.notice_list)||void 0===r?void 0:r.length)?(0,u.jsx)(Ii.g,{center:!0,size:"small"},void 0):f.length?(0,u.jsx)(u.Fragment,{children:null===(l=null!=f?f:[])||void 0===l?void 0:l.map((e=>{const t=eh(e[0]),i=(0,u.jsx)(Eg,{children:d(Kg[t])},t);return(0,u.jsxs)(u.Fragment,{children:[i,(0,u.jsx)(zg,{children:e.map((e=>!0===e.isSystemNotif?(0,u.jsx)($g,{children:y},e.nid):(0,u.jsx)($g,{children:(0,u.jsx)(Cg,{item:e,onLikeClick:m,onReportInboxClick:n},void 0)},e.nid)))},void 0)]},void 0)}))},void 0):(0,u.jsx)(Lp,{type:i},void 0)})),nh=(0,Ke.Z)("div",{target:"e1bp8k4k0"})((({theme:{direction:e}})=>[{paddingTop:"24px",flex:"0 0 auto"},(0,Xe.YJ)({direction:e,paddingStart:"16px"})]),"label:DivInboxHeaderContainer;"),ah=(0,Ke.Z)("h2",{target:"e1bp8k4k1"})([({theme:e})=>(0,Xe.GI)({theme:e,fontFamily:"Sofia",fontWeight:"bold",typography:"H4",color:"TextPrimary"}),({clickable:e=!1})=>({":hover":{cursor:e?"pointer":"auto"}}),{display:"flex"}],"label:H2InboxTitle;"),sh=(0,Ke.Z)("div",{target:"e1bp8k4k2"})({marginInlineEnd:"22px"},"label:DivTitleIconContainer;"),rh=(0,Ke.Z)("div",{target:"e1bp8k4k3"})((({theme:e})=>(0,Xe.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3",color:"TextPrimary"})),{marginTop:"16px",display:"flex",flexDirection:"row",flexWrap:"wrap"},"label:DivGroupContainer;"),lh=e=>({0:{color:e.TextPrimary,background:e.BGPlaceholderDefault,":hover":{background:e.ShadowPrimary}},1:{color:e.BGPrimary,background:e.TextPrimary}}),dh=(0,Ke.Z)("button",{target:"e1bp8k4k4"})((({theme:{colors:e,direction:t},active:i})=>[lh(e)[Number(i)],{":not(:last-child)":[(0,Xe.YJ)({direction:t,marginEnd:"8px"})]},{border:"none",padding:"2px 8px",marginBottom:"12px",textAlign:"center",cursor:"pointer",borderRadius:"12px",transition:"all 300ms"}]),"label:ButtonGroupItem;"),ch={500:"Inbox_All",3:"Inbox_Likes",2:"Inbox_Comments",6:"Inbox_Mentions",7:"Followers"},uh=["all","likes","comments","mentions","followers"],ph=(0,de.memo)((0,de.forwardRef)((({value:e,onChange:t,onKeyDown:i},o)=>{const n=(0,St.Q)(),a=(0,de.useCallback)((e=>()=>{t(e)}),[t]),s=(0,de.useRef)(null),r=(0,de.useCallback)((e=>{var t,i;null===(i=null===(t=s.current)||void 0===t?void 0:t.children[vu.indexOf(e)])||void 0===i||i.focus()}),[]);return(0,de.useImperativeHandle)(o,(()=>({setFocus:r}))),(0,u.jsxs)(nh,{children:[(0,u.jsx)(ah,Object.assign({id:"header-inbox-title"},{children:n("Inbox_Notifications")}),void 0),(0,u.jsx)(rh,Object.assign({"data-e2e":"inbox-bar",id:"header-inbox-bar",onKeyDown:i,ref:s,role:"tablist","aria-labelledby":"header-inbox-title"},{children:vu.map(((t,i)=>(0,u.jsx)(dh,Object.assign({"data-e2e":uh[i],id:`inbox-tab-${i}`,active:t===e,tabIndex:t===e?0:-1,onClick:a(t),role:"tab","aria-selected":t===e,"aria-controls":"header-inbox-list"},{children:n(ch[t])}),t)))}),void 0)]},void 0)}))),gh=(0,Ke.Z)("div",{target:"e32s1fi0"})({height:"100%",display:"flex",flexDirection:"column"},"label:DivInboxContainer;");var hh=i(66881);const mh=(0,de.memo)((function(e){var t,i,o,n,a,s;const{t:r,timeTranslator:l}=(0,Gu.e)(),[d,c]=(0,de.useState)(!1),p=(0,de.useCallback)((()=>{c(!1)}),[]),g=(0,Ze.fz)(Wc),h=(0,de.useCallback)((()=>{var t,i;1!==e.notice.display_type&&(2===e.notice.display_type?(g.handleSystemNotificationClick({enter_method:"click_get_app_for_pc"}),c(!0)):3===e.notice.display_type&&(g.handleSystemNotificationClick({}),window&&void 0!==(null===(t=e.notice.template_notice)||void 0===t?void 0:t.schema_url)&&(window.location.href=null===(i=e.notice.template_notice)||void 0===i?void 0:i.schema_url)))}),[g,e.notice.display_type,null===(t=e.notice.template_notice)||void 0===t?void 0:t.schema_url]),m=(0,de.useMemo)((()=>2!==e.notice.display_type?null:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(pg,{},void 0),(0,u.jsx)(Xt.iK,Object.assign({type:"P3-Regular"},{children:r("system_notifications_details_button")}),void 0)]},void 0)),[e.notice.display_type,r]),_=bu[mu(e.notice.type)],v=_?r(_.label):null,y=null===(n=null===(o=null===(i=e.notice.template_notice)||void 0===i?void 0:i.notice)||void 0===o?void 0:o.title)||void 0===n?void 0:n.title,b=null===(s=null===(a=e.notice.template_notice)||void 0===a?void 0:a.notice)||void 0===s?void 0:s.content;if(null==v||null==y||null==b)return null;const f=null!=e.notice.create_time?(0,u.jsxs)(Xt.iK,Object.assign({type:"P4-Regular",color:"TextQuaternary"},{children:[" ",l(1e3*e.notice.create_time,!0)]}),void 0):null,x=function(e){switch(e){case 661:return qc.Z;case 47:return zc.Z;case 12:return $c.Z;case 61:return Hc.Z;case 21:return Zc.Z;case 82:return Vc.Z;case 81:return Gc.Z;case 212:return Qc.Z;case 215:return Jc.Z;case 218:return Yc.Z;case 223:return Kc.Z;case 224:return Xc.Z;case 249:return eu.Z;case 254:return tu.Z;case 255:return iu.Z;case 256:return ou.Z;case 262:return nu.Z;case 272:return au.C;case 274:return su.Z;default:return}}(mu(e.notice.type));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(lg,Object.assign({onClick:h},{children:[(0,u.jsxs)(dg,{children:[(0,u.jsx)(cg,{children:x&&(0,u.jsx)(x,{style:{fontSize:16}},void 0)},void 0),(0,u.jsx)(Xt.iK,Object.assign({type:"P3-Semibold"},{children:v}),void 0)]},void 0),(0,u.jsx)(pg,{},void 0),(0,u.jsx)(Xt.iK,Object.assign({type:"P3-Semibold"},{children:y}),void 0),(0,u.jsx)(ug,{children:(0,u.jsxs)(Xt.iK,Object.assign({type:"P4-Regular"},{children:[b,f]}),void 0)},void 0),m]}),void 0),d&&(0,u.jsx)(hh._,{visible:d,onClose:p},void 0)]},void 0)})),_h=(0,de.memo)((function({noticeItem:e,onHitBottom:t}){var i;const o=(0,de.useRef)(null);return(0,fp.s)({elementRef:o,onHitBottom:t,threshold:100}),(0,u.jsxs)(Mg,Object.assign({ref:o,tabIndex:0,role:"tabpanel"},{children:[(null!==(i=e.notice_list)&&void 0!==i?i:[]).map((e=>(0,u.jsx)($g,{children:(0,u.jsx)(mh,{notice:e},void 0)},e.nid))),e.loading&&(0,u.jsx)(Ii.g,{center:!0,size:"small"},void 0)]}),void 0)}));var vh=i(67364);const yh=(0,de.memo)((({onHeaderClick:e})=>{const t=(0,St.Q)(),i=(0,u.jsx)(sh,{children:(0,u.jsx)(vh.Z,{fontSize:18},void 0)},void 0);return(0,u.jsx)(nh,{children:(0,u.jsxs)(ah,Object.assign({id:"header-inbox-title",onClick:e,clickable:null!=e},{children:[i,t("system_notifications_inbox_header")]}),void 0)},void 0)})),bh=(0,Ke.Z)("div",{target:"ewlck080"})({height:"100%",display:"flex",flexDirection:"column"},"label:DivInboxContainer;"),fh=(0,Ke.Z)("div",{target:"ewlck081"})({padding:"20px 16px"},"label:DivListBox;"),xh=(0,de.memo)((function(e){var t,i;const o=(0,St.Q)(),[n,a]=(0,se.b7)(ku),[s,r]=(0,de.useState)([661]);(0,de.useEffect)((()=>{var e;if(661!==n.activeSystemNoticeGroup)return;if(!(null===(e=n.noticeList.notice_list)||void 0===e?void 0:e.length))return void r([661]);const t=[],i=new Set;n.noticeList.notice_list.forEach((e=>{const o=mu(e.type);i.has(o)||(t.push(o),i.add(o))})),r([661,...t])}),[n.activeSystemNoticeGroup,n.noticeList.notice_list]);const l=(0,de.useRef)(!0),d=(0,de.useCallback)((()=>{l.current||(l.current=!0,a.fetchSystemNoticeData())}),[a]);(0,de.useEffect)((()=>{l.current=Boolean(n.noticeList.loading)}),[n.noticeList.loading]);const c=(0,de.useMemo)((()=>s.map((e=>null==bu[e]?null:{value:e.toString(),label:o(bu[e].label,{},bu[e].label)})).filter((e=>null!=e))),[s,o]),p=(0,de.useCallback)((e=>{Object.entries(bu).forEach((t=>{t[0].toString()===e&&a.changeActiveSystemNoticeGroup(t[1].value)}))}),[a]),g=(0,u.jsx)(yh,{onHeaderClick:e.onBack},void 0),h=(0,u.jsx)(fh,{children:(0,u.jsx)(Xt.br,{block:!0,label:"",hideLabel:!0,value:null!==(i=null===(t=n.activeSystemNoticeGroup)||void 0===t?void 0:t.toString())&&void 0!==i?i:"",onChange:p,placeholder:"",options:c,size:"small"},void 0)},void 0),m=(0,u.jsx)(_h,{onHitBottom:d,noticeItem:n.noticeList},void 0);return(0,u.jsxs)(bh,{children:[g,h,m]},void 0)}));var wh;!function(e){e.Main="main",e.ReportInbox="report-inbox",e.SystemNotif="system-notif"}(wh||(wh={}));const kh=(0,de.memo)((function(){const[e,t]=(0,de.useState)("main"),i=(0,de.useCallback)((()=>{t("report-inbox")}),[]),o=(0,de.useCallback)((()=>{t("main")}),[]),n=(0,se.mp)(Q.G,{selector:e=>{var t,i,o,n,a;return{uid:null!==(o=null===(i=null===(t=e.appContext)||void 0===t?void 0:t.user)||void 0===i?void 0:i.uid)&&void 0!==o?o:"",did:null!==(a=null===(n=e.appContext)||void 0===n?void 0:n.wid)&&void 0!==a?a:""}},dependencies:[]}),a=(0,se.mp)(Kd,{selector:e=>e.reportInbox.noticeList,dependencies:[]}),[{activeGroup:s,noticeList:r,followRequest:l,latestSystemNotice:d},c]=(0,se.b7)(ku,{selector:e=>{const{activeGroup:t,noticeList:i,followRequest:o,latestSystemNotice:n}=e;return{activeGroup:t,noticeList:i,followRequest:o,latestSystemNotice:n}},dependencies:[]}),[p,g]=(0,de.useState)(null),[h,m]=(0,de.useState)(!1),[_,v]=(0,de.useState)(vu.indexOf(s)),y=(0,Wo.bG)(),b=(0,de.useCallback)((e=>{c.changeActiveGroup({group:e,hasSystemNotification:y}),g(null),m(!1),v(vu.indexOf(e))}),[c,y]),f=(0,Ze.fz)(Wc),x=(0,de.useCallback)((()=>{f.handleChangeTab({to_tab_name:"system"}),t("system-notif"),c.changeActiveSystemNoticeGroup(661)}),[c,f]);(0,de.useEffect)((()=>{h||setTimeout((()=>{c.fetchNoticeFollowRequest(Object.assign(Object.assign({},n),{refresh:!0}))}),2e3)}),[c,n,h]),(0,de.useEffect)((()=>{l.has_more||0!==l.total?l.has_more&&l.users.length<=10&&c.fetchNoticeFollowRequest(n):m(!1)}),[c,l.has_more,l.total,l.users.length,n]);const w=(0,de.useRef)(!0),k=(0,de.useRef)(null),S=(0,de.useCallback)((()=>{w.current||(w.current=!0,c.fetchNoticeData())}),[c]),C=(0,de.useCallback)((e=>{var t,i,o,n;switch(e.keyCode){case 39:e.stopPropagation(),e.preventDefault();const a=_<vu.length-1?_+1:0;v(a),b(vu[a]),null===(t=k.current)||void 0===t||t.setFocus(vu[a]);break;case 37:e.stopPropagation(),e.preventDefault();const s=0===_?vu.length-1:_-1;v(s),b(vu[s]),null===(i=k.current)||void 0===i||i.setFocus(vu[s]);break;case 36:v(0),b(vu[0]),null===(o=k.current)||void 0===o||o.setFocus(vu[0]);break;case 35:v(vu.length-1),b(vu[vu.length-1]),null===(n=k.current)||void 0===n||n.setFocus(vu[vu.length-1]);break;default:return}}),[_,b]);(0,de.useEffect)((()=>{w.current=Boolean(r.loading)}),[r.loading]),(0,de.useEffect)((()=>{y&&c.fetchLatestSystemNotice()}),[c,y]);const j=(0,de.useCallback)((()=>{t("main"),b(500)}),[b]);return"report-inbox"===e?(0,u.jsx)(bp,{onClose:o},void 0):"system-notif"===e?(0,u.jsx)(xh,{onBack:j},void 0):(0,u.jsxs)(gh,Object.assign({"data-e2e":"inbox-notifications"},{children:[(0,u.jsx)(ph,{value:s,onChange:b,onKeyDown:C,ref:k},void 0),(0,u.jsx)(th,{activeGroup:s,item:r,onHitBottom:S,likeItem:p,onLikeItemChange:g,followItem:l,showFollow:h,onFollowChange:m,reportInboxList:a,onReportInboxClick:i,systemNotifItem:d,onSystemNotifItemClick:x},void 0)]}),void 0)}));var Sh=i(48780),Ch=i(70575),jh=i(34700);const Th=(0,je.Z)("div",{target:"e18kkhh40"})((({theme:{direction:e}})=>(0,Xe.YJ)({direction:e,marginStart:"16px"})),{position:"relative"},"label:DivHeaderInboxContainer;");Th.defaultProps=Object.assign(Object.assign({},Th.defaultProps),{"data-e2e":"inbox-icon"});const Ih={cursor:"pointer",display:"block"},Ph=(0,je.Z)(Sh.Z,{target:"e18kkhh41"})(Ih,"label:StyledInboxIcon;"),Oh=(0,je.Z)(Ch.Z,{target:"e18kkhh42"})(Ih,"label:StyledInboxIconActive;"),Lh=(0,je.Z)("sup",{target:"e18kkhh43"})((({long:e,theme:t})=>[(0,Xe.GI)({theme:t,fontFamily:"Proxima",typography:"P3",fontWeight:"semiBold",color:"ConstTextInverse"}),(0,Xe.YJ)({direction:t.direction,start:"16px"}),{background:t.colors.Primary,minWidth:"20px",height:"20px",display:"flex",justifyContent:"center",borderRadius:"10px",position:"absolute",top:"-20%"},e?{padding:"0 6px"}:{}]),"label:SupBadge;"),Mh=(0,je.Z)("div",{target:"e18kkhh44"})((({theme:e})=>(0,Xe.GI)({theme:e,typography:"P4",color:"ConstTextInverse",fontWeight:"semiBold"})),{display:"flex",padding:"12px",fontSize:"12px"},"label:DivTipWrapper;"),Eh=(0,je.Z)("span",{target:"e18kkhh47"})({display:"flex",alignItems:"center",justifyContent:"center","& + &":{marginLeft:"16px"},b:{marginLeft:"2px",fontWeight:600}},"label:SpanTipItem;"),Ah=(0,je.Z)(jh.Z,{target:"e18kkhh48"})({position:"absolute",top:"-8px"},(({theme:{direction:e}})=>(0,Xe.YJ)({direction:e,end:"70px"})),"label:StyledArrow;"),Dh=(0,je.Z)("div",{target:"e18kkhh49"})((({theme:{colors:e,direction:t},state:i,duration:o})=>[{display:i===Ne.Wj?"none":"block",position:"absolute",width:"376px",height:"640px",top:"45px",background:e.BGSecondary,borderRadius:"8px",boxShadow:"0 -4px 32px rgba(0, 0, 0, 0.12)",transition:`all ${o}ms linear`,zIndex:1e3,opacity:Number(i===Ne.cn)},(0,Xe.YJ)({direction:t,end:"-66px"})]),"label:DivHeaderInboxWrapper;"),Fh={width:16,height:16},Rh={2:(0,u.jsx)(Ec.Z,Object.assign({},Fh),void 0),3:(0,u.jsx)(Ac.Z,Object.assign({},Fh),void 0),6:(0,u.jsx)(Dc.Z,Object.assign({},Fh),void 0),7:(0,u.jsx)(Fc.Z,Object.assign({},Fh),void 0)},Bh=(0,de.memo)((function(){var e;const t=(0,St.Q)(),i=(0,g.u)(),{pathname:o}=(0,ue.TH)(),[{noticeList:n,reportInboxNoticeCount:a},s]=(0,se.b7)(Kd,{selector:e=>({noticeList:e.noticeCount,reportInboxNoticeCount:e.reportInbox.count}),dependencies:[]}),[{tooltipPriority:r},l]=(0,se.b7)(fc),{totalText:d,totalLong:c,countList:p,isShowTotal:h,totalUnreadCount:m}=(0,de.useMemo)((()=>{const e=n.reduce(((e,{count:t})=>e+t),0),t=e+a;return{isShowTotal:e>0,totalText:(0,Ue.a1)(t),totalLong:t>10,countList:n.filter((e=>e.count>=0)),totalUnreadCount:t}}),[n,a]),_=function(){const[e,t]=(0,de.useState)(!1);return(0,de.useEffect)((()=>(t(!0),()=>{t(!1)})),[]),e}(),[v,y]=(0,de.useState)(!1);(0,de.useEffect)((()=>{let e;return h&&2===r&&(y(!0),e=window.setTimeout((()=>{y(!1),l.setTooltipPriority(5)}),5e3)),()=>{e&&clearTimeout(e)}}),[r,h,l]);const b=(0,de.useRef)(null),{handleEnter:f}=function({showTip:e}){const t=(0,de.useRef)(0),i=(0,Ze.fz)(Wc),{total:o,countList:n}=(0,se.mp)(Kd,{dependencies:[],selector:e=>{const t=e.noticeCount;return{total:t.reduce(((e,{count:t})=>e+t),0),countList:t.filter((e=>e.count>=0))}}});(0,de.useEffect)((()=>{t.current=Date.now()}),[]);const a=(0,de.useCallback)((()=>{const e=Date.now()-t.current;ba.W.handleEnterMessage({show_cnt:o,enter_within_30s:e<3e4?1:0})}),[o]);return(0,de.useEffect)((()=>{if(e){const e=n.reduce(((e,{group:t,count:i})=>{switch(t){case 2:e.comment_cnt=i;break;case 3:e.like_cnt=i;break;case 6:e.mention_cnt=i;break;case 7:e.follower_cnt=i}return e}),{like_cnt:0,comment_cnt:0,mention_cnt:0,follower_cnt:0});i.handlePopShow(e)}}),[n,i,e]),{handleEnter:a}}({showTip:v}),[x,w]=(0,de.useState)(!1),k=(0,de.useCallback)((()=>{w(!x),s.setNoticeCount([]),s.setReportInboxNoticeCount(0),x||f()}),[s,f,x]),S=(0,de.useCallback)((e=>{e&&(e.preventDefault(),e.stopPropagation()),k()}),[k]),C=(0,de.useCallback)((e=>{13===e.keyCode||32===e.keyCode?(e.stopPropagation(),e.target===b.current&&(k(),32===e.keyCode&&e.preventDefault())):27===e.keyCode?x&&w(!1):9===e.keyCode&&(e.shiftKey&&e.target===b.current&&x&&w(!1),setTimeout((()=>{var e,t;!(null===(t=Array.from(null===(e=b.current)||void 0===e?void 0:e.querySelectorAll("*")))||void 0===t?void 0:t.includes(document.activeElement))&&x&&w(!1)}),0))}),[k,x]);(0,de.useEffect)((()=>{-1!==location.search.indexOf("open_inbox=1")&&S()}),[]);const j=(0,de.useMemo)((()=>x?Oh:Ph),[x]),{hideModal:T}=(0,Nl.J)(),I=(0,de.useCallback)((e=>{e.preventDefault(),e.stopPropagation()}),[]),P=(0,de.useCallback)((e=>{32!==e.keyCode&&38!==e.keyCode&&40!==e.keyCode||(e.stopPropagation(),e.preventDefault())}),[]),{region:O,language:L,abTestVersion:M}=(0,Ue.m7)((0,Qe.Lh)((()=>["region","language","abTestVersion"]),[])),E="v2"===(null!==(e=(0,He.N8)(M,"has_system_notification_inbox"))&&void 0!==e?e:"v1"),A=(0,Wo.Iu)();(0,de.useEffect)((()=>{s.fetchNoticeCount({isSystemNotificationV2:E,useInboxNoticeCountApiV2:A}),s.fetchReportInbox({region:O,language:L})}),[s,O,L,E,A]);const D=(0,de.useRef)(null),F=(0,de.useRef)(!1),R=(0,de.useCallback)((()=>{F.current=!0}),[]),B=(0,de.useCallback)((()=>{F.current=!1}),[]);(0,de.useEffect)((()=>{const e=()=>{F.current||w(!1)};return window.addEventListener("click",e),()=>{window.removeEventListener("click",e)}}),[]),(0,de.useEffect)((()=>{x&&w(!1)}),[o]);const N=(0,de.useRef)(!1),W=(0,se.qj)(ku);(0,de.useEffect)((()=>{x&&!N.current&&(W.fetchNoticeData(),N.current=!0)}),[W,x]);const U=(0,de.useCallback)((()=>(T(),!0)),[T]),q=(0,de.useMemo)((()=>t("accessibilityLabels_forYou_btn_inbox",{number:m})),[t,m]);return(0,u.jsxs)(Th,Object.assign({tabIndex:0,onClick:S,onKeyDown:C,ref:b,role:"button","aria-expanded":x,"aria-label":q},{children:[(0,u.jsx)(ue.NL,{when:x,message:U},void 0),x?(0,u.jsx)(j,{width:32,height:32},void 0):(0,u.jsx)(fl.u,Object.assign({placement:"bottom",overlay:t("Inbox")},{children:(0,u.jsx)("span",{children:(0,u.jsx)(j,{width:32,height:32},void 0)},void 0)}),void 0),(h||a>0)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(or.G,Object.assign({active:v,placement:p.length>2?"bottomRight":"bottom",margin:"-54px",arrowMargin:"52px",backgroundColor:i.colors.Primary},{children:(0,u.jsx)(Mh,{children:p.filter((({count:e})=>e>0)).map((({group:e,count:t})=>(0,u.jsxs)(Eh,{children:[Rh[e],(0,u.jsx)("b",{children:(0,Ue.BT)(t)},void 0)]},e)))},void 0)}),void 0),!v&&(0,u.jsx)(Lh,Object.assign({long:c},{children:d}),void 0)]},void 0),_&&(0,u.jsx)(Ne.ZP,Object.assign({timeout:200,in:x,nodeRef:D},{children:e=>(0,u.jsx)(Mc.ZP,Object.assign({autoFocus:!1,disabled:!x,returnFocus:!0},{children:(0,u.jsxs)(Dh,Object.assign({ref:D,state:e,duration:200,onClick:I,onKeyDown:P,onMouseEnter:R,onMouseLeave:B,role:"dialog","aria-label":t("Inbox_Notifications")},{children:[(0,u.jsx)(Ah,{width:24,height:8,fill:i.colors.BGSecondary},void 0),(0,u.jsx)(kh,{},void 0)]}),void 0)}),void 0)}),void 0)]}),void 0)})),Nh=({children:e})=>{const[t,i]=(0,de.useState)(!1),o=(0,Ze.fz)(bn),{direction:n}=(0,g.u)(),a=(0,de.useMemo)((()=>({offset:"ltr"===n?[30,20]:[-30,20]})),[n]),s=(0,de.useMemo)((()=>"ltr"===n?"bottomRight":"bottomLeft"),[n]),{tooltipPriority:r}=(0,se.mp)(fc),l=(0,Je.h)((()=>["liveAnchorEntrance"]),[]),d=(0,de.useMemo)((()=>{var e;return null===(e=null==l?void 0:l.liveAnchorEntrance)||void 0===e?void 0:e.creatorHub}),[l]),c=(0,de.useMemo)((()=>({width:180,padding:12,fontSize:14})),[]),p=(0,St.Q)();(0,de.useEffect)((()=>{if(d){const e=o.getLiveCreatorHubPopup()&&4===r;i(e)}}),[d,o,r]);const h=(0,de.useCallback)((e=>{e||(i(!1),o.setLiveCreatorHubPopup(!0))}),[o]);return(0,u.jsx)(fl.u,Object.assign({visible:t,trigger:"click",tooltipTheme:"blue",placement:s,align:a,overlay:p("live_creator_hub_home_desc",{},"Explore the endless possibilities of TikTok LIVE. It's the place to be for real-time fun, expression, creativity, and connection."),overlayInnerStyle:c,onVisibleChange:h},{children:e}),void 0)};var Wh=i(17919);const Uh=(0,je.Z)("div",{target:"e5vohn00"})({padding:"16px",width:"264px",wordBreak:"break-word"},"label:DivTipWrapper;"),qh=(0,je.Z)("h3",{target:"e5vohn01"})((({theme:e})=>(0,Xe.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{marginBottom:"4px"},"label:H3TipTitle;"),zh=(0,je.Z)("p",{target:"e5vohn02"})((({theme:e})=>(0,Xe.GI)({theme:e,typography:"P3",color:"ConstTextInverse"})),"label:PTipDesc;"),$h=(0,je.Z)("div",{target:"e5vohn03"})({display:"flex",justifyContent:"flex-end"},"label:DivButtonWrapper;"),Hh=(0,je.Z)(qi.rU,{target:"e5vohn04"})((({theme:e})=>(0,Xe.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),(({theme:e})=>(0,Xe.YJ)({direction:e.direction,marginStart:"16px"})),{color:"#ffffff!important",cursor:"pointer","&:hover":{textDecoration:"none"}},"label:StyledLink;"),Zh=(0,je.Z)("button",{target:"e5vohn05"})(Xe.Ph,(({theme:e})=>(0,Xe.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{cursor:"pointer"},"label:ButtonCancel;"),Vh=(0,de.memo)((({uniqueId:e,secUid:t,userPopupActive:i})=>{const{colors:o,direction:n}=(0,g.u)(),a=(0,St.Q)(),{pathname:s}=(0,ue.TH)(),r=(0,Se.Xq)(s),l="fyp"===r?"homepage_hot_tooltip":`${r}_tooltip`,[d,c]=(0,de.useState)(!1),[{tooltipPriority:p},h]=(0,se.b7)(fc),m=(0,Se.bf)(s)&&s.replace("/@","")===e,_=(0,de.useRef)(!1);(0,de.useEffect)((()=>{let e;return d&&(e=window.setTimeout((()=>{_.current=!0,Wh.p.handleCloseProfileTooltip({enter_from:l,close_method:"auto_cancel"}),c(!1)}),5e3)),()=>clearTimeout(e)}),[d]),(0,de.useEffect)((()=>()=>{d&&!_.current&&Wh.p.handleCloseProfileTooltip({enter_from:l,close_method:"other"})}),[d]),(0,de.useEffect)((()=>{(0,To.le)(ge.S0)||m||3!==p?(c(!1),3===p&&h.setTooltipPriority(4)):(c(!0),Wh.p.handleShowProfileTooltip({enter_from:l}),(0,To.D$)(ge.S0,"1"))}),[p]),(0,de.useEffect)((()=>{i&&d&&(_.current=!0,Wh.p.handleCloseProfileTooltip({enter_from:l,close_method:"other"}),c(!1))}),[i,l,d]);const v=(0,de.useCallback)((()=>{Wh.p.handleCloseProfileTooltip({enter_from:l,close_method:"edit_profile"}),Wh.p.handleClickEditProfile({enter_from:l}),(0,To.D9)(ge.OB,l),_.current=!0,c(!1)}),[l]),y=(0,de.useCallback)((()=>{_.current=!0,c(!1),Wh.p.handleCloseProfileTooltip({enter_from:l,close_method:"cancel"})}),[l]),b=(0,Ep.ot)({pathname:(0,Ki.yl)({uniqueId:e,secUid:t}),search:{}}),f=(0,de.useMemo)((()=>({pathname:b})),[b]),x="ltr"===n?"bottomRight":"bottomLeft";return(0,u.jsx)(or.G,Object.assign({active:d,backgroundColor:o.ConstSecondary2,placement:x,arrowMargin:"16px",margin:"-12px"},{children:(0,u.jsxs)(Uh,{children:[(0,u.jsx)(qh,{children:a("editprofile_feedtooltip_title")},void 0),(0,u.jsx)(zh,{children:a("editprofile_feedtooltip_subtitle")},void 0),(0,u.jsxs)($h,{children:[(0,u.jsx)(Zh,Object.assign({onClick:y},{children:a("editprofile_close")}),void 0),(0,u.jsx)(Hh,Object.assign({to:f,onClick:v},{children:a("editprofile_editprofile")}),void 0)]},void 0)]},void 0)}),void 0)}));var Gh,Qh,Jh=i(63639);!function(e){e.LiveRechargeShow="livesdk_recharge_show",e.LiveRechargeClick="livesdk_recharge_click",e.LiveRechargeCashierShow="livesdk_web_cashier_show",e.LiveRechargePay="livesdk_recharge_pay",e.LiveRechargeSuccess="livesdk_recharge_success",e.LiveRechargeFailed="livesdk_recharge_failed",e.LiveBillingAddressClick="livesdk_billing_address_click",e.LiveBillingAddressEntranceClick="livesdk_billing_address_entrance_click",e.LiveWebGetCoinShow="livesdk_web_getcoin_show",e.LiveWebGetCoinClick="livesdk_web_getcoin_click",e.LiveWebPayFeedbackShow="livesdk_web_pay_feedback_show",e.LiveWebPayFeedbackClick="livesdk_web_pay_feedback_click",e.LiveWebPayMethodClick="livesdk_web_pay_method_click",e.LiveWebLinkEWalletShow="livesdk_link_ewallet_show",e.LiveWebLinkEWalletClick="livesdk_link_ewallet_click",e.LiveWebLinkEWalletSuccess="livesdk_link_ewallet_success",e.LiveWebLinkEWalletFailed="livesdk_link_ewallet_failed",e.LiveRechargeExchangeEntranceShow="livesdk_recharge_exchange_entrance_show",e.LiveRechargeExchangeEntranceClick="livesdk_recharge_exchange_entrance_click",e.LiveRechargeExchangeClick="livesdk_recharge_exchange_click",e.LiveRechargeExchangePopupShow="livesdk_recharge_exchange_popup_show",e.LiveRechargeExchangeConfirm="livesdk_recharge_exchange_confirm",e.LiveRechargeExchangeCancel="livesdk_recharge_exchange_cancel",e.LiveRechargeExchangeSuccess="livesdk_recharge_exchange_success",e.LiveRechargeExchangeFailed="livesdk_recharge_exchange_failed",e.LiveRechargeExchangePackageShow="livesdk_recharge_exchange_package_show",e.LiveRechargeExchangePreview="livesdk_recharge_exchange_preview",e.LiveRechargeLogoutClick="livesdk_logout_click",e.LiveBillingAddressShow="livesdk_billing_address_show",e.LiveBillingAddressConfirm="livesdk_billing_address_confirm",e.LiveBillingAddressCancel="livesdk_billing_address_cancel",e.LiveBillingAddressFailed="livesdk_billing_address_failed",e.LiveRechargeNoticeShow="livesdk_webapp_top_notice_show",e.LiveRechargeNoticeClick="livesdk_webapp_top_notice_click",e.LiveRechargeNoticeClose="livesdk_webapp_top_notice_close",e.LiveAbnormalFeatureToast="livesdk_feature_abnormal_toast",e.LiveKycReminderPopup="livesdk_kyc_reminder_popup",e.LiveKycReminderPopupClick="livesdk_kyc_reminder_popup_click",e.LiveKycPopupShow="livesdk_kyc_popup_show",e.LiveKycPopupClick="livesdk_kyc_popup_click",e.LivePaymentBindShow="livesdk_payment_bind_show",e.LivePaymentBindClick="livesdk_payment_bind_click",e.LivePaymentBindSuccess="livesdk_payment_bind_success",e.LivePaymentBindFail="livesdk_payment_bind_fail",e.LiveRechargePackageShow="livesdk_recharge_package_show",e.LiveRechargeBanPopupShow="livesdk_recharge_ban_popup_show",e.LiveRechargeBanPopupClick="livesdk_recharge_ban_popup_click",e.LiveRechargePackagePreview="livesdk_recharge_package_preview",e.LiveRechargeCompletedEducationPopupShow="livesdk_payment_completed_popup_show",e.LiveRechargeCompletedEducationPopupClick="livesdk_payment_completed_click",e.LiveRechargeNegativeBalancePopupShow="livesdk_negative_balance_popup_show",e.LiveRechargeNegativeBalancePopupClick="livesdk_negative_balance_click",e.LiveRechargeLimitToastShow="livesdk_wallet_limit_toast_show",e.LiveRechargeLimitPopupShow="livesdk_wallet_limit_popup_show",e.LiveRechargeLimitPopupClick="livesdk_wallet_limit_popup_click"}(Gh||(Gh={})),function(e){e.TIKTOKM="1233",e.TIKTOKT="1180",e.LITE="1340",e.RESSO="1811",e.WEBAPP="1988"}(Qh||(Qh={}));let Yh=class{constructor(){this.handleRechargeShow=e=>{Ji.W.event("livesdk_recharge_show",e)},this.handleRechargeClick=e=>{Ji.W.event("livesdk_recharge_click",e)},this.handleCashierShow=e=>{Ji.W.event("livesdk_web_cashier_show",e)},this.handlePayAction=e=>{Ji.W.event("livesdk_recharge_pay",e)},this.handleRechargeSuccess=e=>{Ji.W.event("livesdk_recharge_success",e)},this.handleRechargeFailed=e=>{Ji.W.event("livesdk_recharge_failed",e)},this.handleBillingAddressClick=e=>{Ji.W.event("livesdk_billing_address_click",e)},this.handleBillingAddressEntranceClick=e=>{Ji.W.event("livesdk_billing_address_entrance_click",e)},this.handleLiveWebGetCoinShow=e=>{Ji.W.event("livesdk_web_getcoin_show",e)},this.handleLiveWebGetCoinClick=e=>{Ji.W.event("livesdk_web_getcoin_click",e)},this.handleRechargeFeedbackShow=e=>{Ji.W.event("livesdk_web_pay_feedback_show",e)},this.handleRechargeFeedbackClick=e=>{Ji.W.event("livesdk_web_pay_feedback_click",e)},this.handleRechargeCashierSelectPaymentMethod=e=>{Ji.W.event("livesdk_web_pay_method_click",e)},this.handleRechargeCashierEWalletShow=e=>{Ji.W.event("livesdk_link_ewallet_show",e)},this.handleRechargeCashierEWalletClick=e=>{Ji.W.event("livesdk_link_ewallet_click",e)},this.handleRechargeCashierEWalletSuccess=e=>{Ji.W.event("livesdk_link_ewallet_success",e)},this.handleRechargeCashierEWalletFailed=e=>{Ji.W.event("livesdk_link_ewallet_failed",e)},this.handleExchangeEntranceShow=e=>{Ji.W.event("livesdk_recharge_exchange_entrance_show",e)},this.handleExchangeEntranceClick=e=>{Ji.W.event("livesdk_recharge_exchange_entrance_click",e)},this.handleExchangeClick=e=>{Ji.W.event("livesdk_recharge_exchange_click",e)},this.handleExchangePopupShow=e=>{Ji.W.event("livesdk_recharge_exchange_popup_show",e)},this.handleExchangeConfirm=e=>{Ji.W.event("livesdk_recharge_exchange_confirm",e)},this.handleExchangeCancel=e=>{Ji.W.event("livesdk_recharge_exchange_cancel",e)},this.handleExchangeSuccess=e=>{Ji.W.event("livesdk_recharge_exchange_success",e)},this.handleExchangeFailed=e=>{Ji.W.event("livesdk_recharge_exchange_failed",e)},this.handleExchangePackageShow=e=>{Ji.W.event("livesdk_recharge_exchange_package_show",e)},this.handleExchangePreview=e=>{Ji.W.event("livesdk_recharge_exchange_preview",e)},this.handleRechargeLogoutClick=e=>{Ji.W.event("livesdk_logout_click",e)},this.handleBillingAddressShow=e=>{Ji.W.event("livesdk_billing_address_show",e)},this.handleBillingAddressConfirm=e=>{Ji.W.event("livesdk_billing_address_confirm",e)},this.handleBillingAddressCancel=e=>{Ji.W.event("livesdk_billing_address_cancel",e)},this.handleBillingAddressFailed=e=>{Ji.W.event("livesdk_billing_address_failed",e)},this.handleNoticeShow=e=>{Ji.W.event("livesdk_webapp_top_notice_show",e)},this.handleNoticeClick=e=>{Ji.W.event("livesdk_webapp_top_notice_click",e)},this.handleNoticeClose=e=>{Ji.W.event("livesdk_webapp_top_notice_close",e)},this.handleAbnormalFeatureToast=e=>{Ji.W.event("livesdk_feature_abnormal_toast",e)},this.liveKycReminderPopup=e=>{Ji.W.event("livesdk_kyc_reminder_popup",e)},this.liveKycReminderPopupClick=e=>{Ji.W.event("livesdk_kyc_reminder_popup_click",e)},this.liveKycPopupShow=e=>{Ji.W.event("livesdk_kyc_popup_show",e)},this.liveKycPopupClick=e=>{Ji.W.event("livesdk_kyc_popup_click",e)},this.handlePaymentBindShow=e=>{Ji.W.event("livesdk_payment_bind_show",e)},this.handlePaymentBindClick=e=>{Ji.W.event("livesdk_payment_bind_click",e)},this.handlePaymentBindSuccess=e=>{Ji.W.event("livesdk_payment_bind_success",e)},this.handlePaymentBindFail=e=>{Ji.W.event("livesdk_payment_bind_fail",e)},this.handleRechargePackageShow=e=>{Ji.W.event("livesdk_recharge_package_show",e)},this.handleRechargeBanPopupShow=e=>{Ji.W.event("livesdk_recharge_ban_popup_show",e)},this.handleRechargeBanPopupClick=e=>{Ji.W.event("livesdk_recharge_ban_popup_click",e)},this.handleRechargePackagePreview=e=>{Ji.W.event("livesdk_recharge_package_preview",e)},this.handleRechargeCompletedEducationPopupShow=e=>{Ji.W.event("livesdk_payment_completed_popup_show",e)},this.handleRechargeCompletedEducationPopupClick=e=>{Ji.W.event("livesdk_payment_completed_click",e)},this.handleNegativeBalancePopupShow=e=>{Ji.W.event("livesdk_negative_balance_popup_show",e)},this.handleNegativeBalancePopupClick=e=>{Ji.W.event("livesdk_negative_balance_click",e)},this.handleRechargeLimitToastShow=e=>{Ji.W.event("livesdk_wallet_limit_toast_show",e)},this.handleRechargeLimitPopupShow=e=>{Ji.W.event("livesdk_wallet_limit_popup_show",e)},this.handleRechargeLimitPopupClick=e=>{Ji.W.event("livesdk_wallet_limit_popup_click",e)},this.incentiveBannerShow=e=>{Ji.W.event("livesdk_kyc_incentive_banner_show",e)},this.kycCouponShow=e=>{Ji.W.event("livesdk_kyc_coupon_show",e)},this.kycCouponRuleShow=e=>{Ji.W.event("livesdk_kyc_coupon_rule_show",e)},this.kycCouponCashierShow=e=>{Ji.W.event("livesdk_kyc_coupon_cashier_show",e)},this.kycCouponFreezeFirstReminder=e=>{Ji.W.event("livesdk_kyc_coupon_freeze_first_reminder_popup_show",e)},this.kycCouponFreezeFirstReminderClick=e=>{Ji.W.event("livesdk_kyc_coupon_freeze_first_reminder_popup_click",e)},this.kycCouponFreezeSecondReminderClick=e=>{Ji.W.event("livesdk_kyc_coupon_freeze_second_reminder_popup_click",e)},this.kycCouponFreezeSecondReminderShow=e=>{Ji.W.event("livesdk_kyc_coupon_freeze_second_reminder_popup_show",e)},this.cashierClose=(e,{beacon:t}={})=>{t?Ji.W.beconEvent("livesdk_cashier_close",e):Ji.W.event("livesdk_cashier_close",e)},this.customRechargeShow=e=>{Ji.W.event("livesdk_custom_recharge_show",e)},this.customSwitchEntranceClick=e=>{Ji.W.event("livesdk_custom_switch_entrance_click",e)},this.customSwitchOptionsClick=e=>{Ji.W.event("livesdk_custom_switch_options_click",e)},this.customInputTotalFaqClick=e=>{Ji.W.event("livesdk_web_pay_total_info_click",e)},this.exchangeBillingAddressEntranceShow=e=>{Ji.W.event("livesdk_exchange_billing_address_entrance_show",e)},this.exchangeBillingAddressEntranceClick=e=>{Ji.W.event("livesdk_exchange_billing_address_entrance_click",e)}}};Yh=(0,b.__decorate)([(0,x.G)()],Yh);var Kh=i(51858),Xh=i(89300),em=i.n(Xh),tm=i(24465),im=i.n(tm);const om=4005205,nm=[42030,42031,42032,4005265,4005266,4005267,4005268,4005269,4005270,4005271];var am=i(487);let sm=class{start(){try{am.Z.start()}catch(e){console.error("Slardar.start() failed: ",e)}}config(e){try{am.Z.config(e)}catch(e){console.error("Slardar.config() failed: ",e)}}context(e){try{Object.entries(e).forEach((([e,t])=>{var i;return null===(i=am.Z.context)||void 0===i?void 0:i.set(e,t)}))}catch(e){console.error("Slardar.context.set() failed: ",e)}}emitEvent(e,t,i){var o;try{null===(o=am.Z.sendEvent)||void 0===o||o.call(am.Z,{name:e,categories:i,metrics:t})}catch(e){console.error("Slardar.sendEvent() failed: ",e)}}sendLog(e,t,i){var o;try{null===(o=am.Z.sendLog)||void 0===o||o.call(am.Z,{content:e,level:t,extra:i})}catch(e){console.error("Slardar.sendLog() failed: ",e)}}};var rm;sm=(0,b.__decorate)([(0,x.G)()],sm),function(e){e.GetPackagesError="live_sdk_get_packages_error",e.GetBasePackageError="live_sdk_get_basepackage_error",e.PlaceOrderError="live_sdk_place_exchange_order_error"}(rm||(rm={}));let lm=class{constructor(e){this.service=e,this.defaultTag={where:"Exchange"},this.defaultMetrics={count:1},this.reportError=e=>{this.service.sendLog(null==e?void 0:e.message,"error")},this.handlePackagesFail=e=>{this.reportError(e),this.service.emitEvent("live_sdk_get_packages_error",this.defaultMetrics,this.defaultTag)},this.handleBasePackageFail=e=>{this.reportError(e),this.service.emitEvent("live_sdk_get_basepackage_error",this.defaultMetrics,this.defaultTag)},this.handlePlaceOrderFail=e=>{this.reportError(e),this.service.emitEvent("live_sdk_place_exchange_order_error",this.defaultMetrics,this.defaultTag)}}};function dm(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:null!=e?e:"USD",roundingMode:"ceil"})}lm=(0,b.__decorate)([(0,x.G)(),(0,b.__metadata)("design:paramtypes",[sm])],lm);const cm=({coins:e,isCustom:t,price:i,realDot:o,localPrice:n,localRealDot:a,localCurrency:s=""})=>{let r;return r=t?function({coins:e,unitPrice:t,unitPriceRealDot:i,localCurrency:o,localUnitPrice:n,localUnitPriceRealDot:a}){const s=e*t,r=e*(t/Math.pow(10,i)),l=dm().format(r);let d="";if(n&&a){const t=e*(n/Math.pow(10,a));d=dm(o).format(t)}return{showAmount:l,totalPrice:s,localShowAmount:d}}({coins:e,unitPrice:i,unitPriceRealDot:o,localCurrency:s,localUnitPrice:n,localUnitPriceRealDot:a}):function({packagePrice:e,packagePriceRealDot:t,localCurrency:i,localPackagePrice:o,localPackagePriceRealDot:n}){const a=e/Math.pow(10,t),s=dm().format(a);let r="";if(o&&n){const e=o/Math.pow(10,n);r=dm(i).format(e)}return{showAmount:s,totalPrice:e,localShowAmount:r}}({packagePrice:i,packagePriceRealDot:o,localCurrency:s,localPackagePrice:n,localPackagePriceRealDot:a}),r};var um;!function(e){e[e.SLARDAR=0]="SLARDAR",e[e.TEA=1]="TEA"}(um||(um={}));const pm={key:"rd_live_webapp_recharge_get_coins_api_err",platform:0},gm={key:"rd_live_webapp_recharge_get_permission_api_err",platform:0},hm={key:"rd_live_webapp_recharge_get_permission_api_referrer",platform:0},mm={key:"rd_live_webapp_recharge_place_order_result_api_err",platform:0},_m={key:"rd_live_webapp_recharge_place_order_result_api_res",platform:0},vm={key:"rd_live_webapp_recharge_place_order_result_api_send",platform:0},ym={key:"rd_live_webapp_recharge_save_address_api_err",platform:0},bm={key:"rd_live_webapp_exchange_diamond_exchange_api_err",platform:0},fm={key:"rd_live_webapp_exchange_diamond_exchange_api_success",platform:0},xm={key:"rd_live_webapp_transaction_history_getTransactionHistoryList_api_err",platform:0},wm={key:"rd_live_webapp_transaction_history_load_transaction_history_api_err",platform:0},km={key:"rd_live_webapp_update_coins_amt_err",platform:0};let Sm=class{constructor(e){this.service=e,this.defaultMetrics={count:1},this.handleReport=(e,t)=>{switch(e.platform){case 0:this.service.emitEvent(e.key,this.defaultMetrics,Object.assign(Object.assign({},t),{version:"wallet_v2"}));break;case 1:Ji.W.event(e.key,null!=t?t:{});break;default:console.error(`rdLog platform ${e.platform} not registered`)}}}};Sm=(0,b.__decorate)([(0,x.G)(),(0,b.__metadata)("design:paramtypes",[sm])],Sm);var Cm=i(20552),jm=i.n(Cm);const Tm=["ByteLocale","trill","musical_ly"];Lu().extend(jm());const Im=(e,t,i)=>{var o,n,a;let s=0;const r=(null==e?void 0:e.currency_price)&&null!==(o=null==e?void 0:e.currency_price[0].price)&&void 0!==o?o:0,l=(null==e?void 0:e.currency_price)&&null!==(n=null==e?void 0:e.currency_price[0].price_dot)&&void 0!==n?n:0,d=(null==e?void 0:e.currency_price)&&null!==(a=e.currency_price[0].keep_dot)&&void 0!==a?a:0;if(t){const e=i*r;if(0===e)return 0;let t=l-d,o=e,n=!1;if(d>=l)for(let e=l;e<d;e++)o*=10;for(;t>0;)o%10>0&&(n=!0),t--,o=Math.trunc(o/10);const a=n?Number(o)+1:Number(o);if(0===d)return a;const s=a.toString().split(""),c=s.splice(-d);for(;d>c.length;)c.unshift("0");const u=c.length>0?`.${c.join("")}`:"",p=s.join("");return Number(`${p}${u}`)}{if(s=r,d>=l)for(let e=l;e<d;e++)s*=10;const e=s.toString().split("");let t=[];if(e.length<d)for(let t=e.length;t<d;t++)e.unshift("0");t=0===d&&0!==l?e.splice(d-l):0===d&&0===l?e.splice(e.length):e.splice(-d);const i=t.length>0?`.${t.join("")}`:"",o=e.join("");return Number(`${o}${i}`)}},Pm=(e,t,i)=>{let o=e;if(i>=t)for(let e=t;e<i;e++)o*=10;else{let e=!1;for(let n=i;n<t;n++)o%10>0&&(e=!0),o=Math.floor(o/10);e&&(o+=1)}return o},Om=(e,t)=>e/Math.pow(10,t),Lm=(e,t)=>{let i;return i="undefined"!=typeof window&&new RegExp(`(${Tm.join("|")})`,"ig").test(window.navigator.userAgent)?"recharge"===e?"official_web_mobile_recharge_inapp_guide":"official_web_mobile_income_exchange_inapp_guide":t?"recharge"===e?"official_web_mobile_recharge_browser":"official_web_mobile_income_exchange_browser":"recharge"===e?"official_web_pc_recharge":"official_web_pc_income_exchange",i},Mm=(e,t)=>{var i;const{orderInfo:o,exchangeState:n}=e,{extra:a}=o,{extra:s}=n,r="recharge"===t?null==a?void 0:a.custom_error:null==s?void 0:s.custom_error,l=(null==r?void 0:r.extra)&&JSON.parse(r.extra);return null===(i=null==l?void 0:l.custom_error_tracking)||void 0===i?void 0:i.hit_scenario},Em=(e,t)=>{const{orderInfo:i,exchangeState:o}=e,{extra:n}=i,{extra:a}=o,s="recharge"===t?null==n?void 0:n.custom_error:null==a?void 0:a.custom_error,r=(null==s?void 0:s.extra)&&JSON.parse(s.extra);return(null==r?void 0:r.custom_error_tracking)||{}},Am=Object.values(Kh.Tp).map((e=>{var t;return null===(t=e.match(/\/coin\/([^/@:]+)\/?.*/))||void 0===t?void 0:t[1]})).filter((e=>Boolean(e))),Dm=(e,t,i)=>{var o;return{hit_entry:Lm(t,i),entry_type:t,request_id:e.reportState.coinsConfigLogId,hit_scenario:Mm(e,t),log_id:null===(o=Em(e,t))||void 0===o?void 0:o.log_id}};var Fm=i(40235);let Rm=class{constructor(e){this.fetch=e}getPermission(e){return this.fetch.get("/webcast/wallet_api/diamond_buy/permission/",{query:e,baseUrlType:4,requireSecSdk:!0})}getCoinsConfig(e){return this.fetch.get("/webcast/diamond/",{query:e,baseUrlType:4,requireSecSdk:!0})}getNonce(){return this.fetch.get("/webcast/wallet_api/diamond_buy/nonce",{baseUrlType:4,requireSecSdk:!0})}placeOrder(e){return this.fetch.get("/webcast/wallet_api/diamond_buy_external/",{query:e,baseUrlType:4,requireSecSdk:!0})}getTransactionHistory(e){return this.fetch.get("/webcast/wallet_api/query_web_order/",{query:e,baseUrlType:4,requireSecSdk:!0})}getInvoiceAddressApi(e){return this.fetch.get("/webcast/wallet_api/invoice/download/",{query:e,baseUrlType:4,requireSecSdk:!0})}getNoticeContent(){return this.fetch.get("/webcast/wallet_api_tiktok/notifycenter/notices",{query:{view_name:"recharge"},baseUrlType:4,requireSecSdk:!0})}getExchangePackages(e){return this.fetch.post("/webcast/recharge/packages/",{query:e,baseUrlType:4,requireSecSdk:!0})}exchangeEarningsToCoins(e){return this.fetch.post("/webcast/wallet_api/diamond_exchange/",{query:e,baseUrlType:4,requireSecSdk:!0})}verifyZipCode(e){return this.fetch.get("/webcast/wallet_api/verify_zip_code/",{query:e,baseUrlType:4,requireSecSdk:!0})}saveBillingAddress(e){return this.fetch.post("/webcast/wallet_api/save_billing_address_info/",{query:e,body:(0,Fm.stringify)(e),baseUrlType:4,requireSecSdk:!0})}getBillingAddress(){return this.fetch.get("/webcast/wallet_api_tiktok/get_default_location",{baseUrlType:4,requireSecSdk:!0})}updateBillingAddress(e){return this.fetch.post("/webcast/wallet_api_tiktok/update_billing_address",{body:JSON.stringify(e),headers:{"Content-Type":"application/json"},baseUrlType:4,requireSecSdk:!0})}};var Bm,Nm;Rm=(0,b.__decorate)([(0,x.G)(),(0,b.__metadata)("design:paramtypes",[c.r])],Rm),function(e){e[e.WebAppPage=2]="WebAppPage",e[e.WebAppH5=3]="WebAppH5"}(Bm||(Bm={})),function(e){e.Default="default",e.From3ds="From3ds"}(Nm||(Nm={}));let Wm=class extends tt.D{constructor(e,t,i,o,n){super(),this.service=e,this.bizContext=t,this.report=i,this.exchangeSlardar=o,this.rdReport=n,this.defaultState={userState:{loadingState:0,hasRechargePermission:!1,showEntry:!1,notLoggedIn:!0,coins:0,exchangePermission:{currency:"",enable:!1,has_short_video_gift:!1,price_dot:0,region:"",revenue:0,unit_price:0},webRechargeInputOption:0,showInputTooltip:!0,showRechargeAmountAdjustedText:!0},orderInfo:{loadingState:0},coins:{loadingState:0,coinsData:[]},coinsExtra:{},exchangePackages:{loadingState:0,formattedPackages:[],requestId:""},exchangeState:{loadingState:0,dontToast:!1,showFailureModal:!1},nonce:{loadingState:0,nonce:"",expiredAt:Date.now()},customerCoinId:0,customCoinIndex:-1,customCoinMaxNum:0,customCoinMinNum:0,priceUnit:"",apUnitPrice:{},gpUnitPrice:{},merchantId:"",paymentMethod:"",paymentState:{selectedComboId:0,coinAmount:0,priceDot:0,keepDot:0,totalPrice:0,coinPrice:0,price:0,currency:"",selectedComboIndex:-1,isCustom:!1,isUseVoucher:!1},transactionHistory:{loadingState:0,total:0,pageNumber:1,pageSize:8,pageData:[],extraData:void 0,totalData:[],isWebRechargedBefore:void 0},noticeData:{loadingState:0,notices:[]},inAppState:{hideHeader:!1,hidePadding:!1,rechargeFrom:"others",fullSheet:!1},reportState:{coinsConfigLogId:""},cashierModalLoaded:!1,billingAddress:{postalCode:"",validating:!1,validated:!1,isValid:!1,hasClickedConfirm:!1,isSaved:!1},showVerifyNow:!1,errorPrompt:"",region:void 0,kycErrorInfo:void 0,showRechargeLimitModal:!1,kycActivityPopup:{show:!1,popupEntrance:""},showVoucherSheet:!1,voucherConfirmPopup:{show:!1,scenario:"after_buy_now"},blockNavigation:!1,customRechargePanelState:{mobileInputVisible:!1,inputBy:0,actionSheetOpen:!1},locationData:{loadingState:2,billingAddress:{}}}}setUserPermission(e,t){e.userState=Object.assign(Object.assign({},e.userState),im()(t,em()))}setLocationData(e,t){e.locationData=t}setNotice(e,t){e.noticeData=Object.assign(Object.assign({},e.noticeData),t)}setCoinsConfig(e,t){e.coins=Object.assign(Object.assign({},e.coins),t)}setCoinsExtra(e,t){e.coinsExtra=Object.assign(Object.assign({},e.coinsExtra),t)}setPaymentState(e,t){e.paymentState=Object.assign(Object.assign({},e.paymentState),t)}setPaymentMethod(e,t){e.paymentMethod=t}setExchangePackages(e,t){e.exchangePackages=Object.assign(Object.assign({},e.exchangePackages),t)}setExchangeState(e,t){e.exchangeState=Object.assign(Object.assign({},e.exchangeState),t)}setCustomCoin(e,t){const{customerCoinId:i,customCoinMaxNum:o,customCoinMinNum:n,priceUnit:a,apUnitPrice:s,gpUnitPrice:r,merchantId:l,customCoinIndex:d}=t;e.customerCoinId=i,e.customCoinMaxNum=o,e.customCoinMinNum=n,e.priceUnit=a,e.apUnitPrice=s,e.gpUnitPrice=r,e.merchantId=l,e.customCoinIndex=d}reportUpdatingBillingAddress(e,t){var i,o;this.report.exchangeBillingAddressEntranceClick({charge_reason:"anchor_income",request_page:t.isMobile?"mobile_h5":"webapp",enter_from:null!==(i=e.reportState.enterFrom)&&void 0!==i?i:"",charge_from:null!==(o=e.refhash)&&void 0!==o?o:""})}updateOrder(e,t){e.orderInfo=Object.assign(Object.assign({},e.orderInfo),t)}updateNonce(e,t){t.nonce?e.nonce=Object.assign(Object.assign(Object.assign({},e.nonce),t),{loadingState:3,expiredAt:Date.now()+24e4}):e.nonce=Object.assign(Object.assign({},e.nonce),t)}setTransactionHistory(e,t){e.transactionHistory=Object.assign(Object.assign({},e.transactionHistory),t)}setTransactionSize(e,t){e.transactionHistory=Object.assign(Object.assign({},e.transactionHistory),{pageSize:t.pageSize,pageNumber:t.pageNumber})}setInAppState(e,t){e.inAppState=Object.assign(Object.assign({},e.inAppState),t)}setRefHash(e,t){t&&!Am.includes(t)&&7===(null==t?void 0:t.length)&&(e.refhash=t)}setEnterAppId(e,t){t&&(e.reportState.enterAppId=t)}setReportState(e,t){e.reportState=Object.assign(Object.assign({},e.reportState),t)}setEnterFrom(e,t){e.reportState.enterFrom=t}setMobileInputVisible(e,t){e.customRechargePanelState.mobileInputVisible=t}setCashierModalLoaded(e,t){e.cashierModalLoaded=t}setBillingAddress(e,t){e.billingAddress=Object.assign(Object.assign({},e.billingAddress),t)}setDefaultSelectedMethod(e,t){e.defaultSelectedMethod=Object.assign(Object.assign({},e.defaultSelectedMethod),t)}setShowVerifyNow(e,t){e.showVerifyNow=t}setErrorPrompt(e,t){e.errorPrompt=t}setRegion(e,t){e.region=t}resetErrorState(e){var t,i;e.orderInfo.statusCode=void 0,e.orderInfo.noPrompts=!1,e.exchangeState.statusCode=void 0,e.exchangeState.dontToast=!1,(null===(t=e.orderInfo)||void 0===t?void 0:t.extra)&&(e.orderInfo.extra=void 0),(null===(i=e.exchangeState)||void 0===i?void 0:i.extra)&&(e.exchangeState.extra=void 0)}setKycErrorInfo(e,t){e.kycErrorInfo=t}setGridColCount(e,t){e.gridColCount=t}setShowRechargeLimitModal(e,t){e.showRechargeLimitModal=t}setKycActivityPopup(e,t){e.kycActivityPopup=Object.assign(Object.assign({},e.kycActivityPopup),t)}setShowVoucherSheet(e,t){e.showVoucherSheet=t}setVoucherConfirmPopup(e,t){e.voucherConfirmPopup=Object.assign(Object.assign({},e.voucherConfirmPopup),t),e.reportState.voucherSecondReminderPopupScenario=t.voucherSecondReminderPopupScenario}setBlockNavigation(e,t){e.blockNavigation=t}setPrevPaymentState(e,t){e.prevPaymentState=Object.assign(Object.assign({},e.prevPaymentState),t)}setOrderPaymentState(e,t){e.orderPaymentState=t}setCustomRechargePanelState(e,t){e.customRechargePanelState=Object.assign(Object.assign({},e.customRechargePanelState),t)}initPayment(e){return e.pipe((0,$o.z)((()=>(0,Ho.of)(this.getActions().updateOrder({orderData:void 0,loadingState:0})))))}updateCoinsAmount(e){return e.pipe((0,mn.M)(this.state$,this.bizContext.state$),(0,$o.z)((([e,t,i])=>{var o,n,a,s;const{isMobile:r}=null!==(o=i.bizContext)&&void 0!==o?o:{},{coinComboIndex:l,useVoucher:d=!0}=e;if(l<0)return(0,Ho.of)();const{coins:c,coinsExtra:u,customRechargePanelState:p}=t,{voucher_list:g}=u,{coinsData:h}=c,m=h[l];if(!m)return(0,Ho.of)();let _=1===m.stall_type?e.coinAmount:m.diamond_count;if(null==_)return(0,Ho.of)();const{inputBy:v}=p;let y,b,f=0,x=!1;if(d&&(null==g?void 0:g[0])&&0!==_){const{max_order_coins_amount:e,min_order_coins_amount:t}=g[0],i=e||Number.MAX_SAFE_INTEGER,o=t||0;_<=Number(i)&&_>=Number(o)&&(x=!0);const{DiscountAmount:n,AmountDecimalPosition:a}=JSON.parse((null==g?void 0:g[0]).reward_detail);x&&([b,y]=((e,t,i,o,n)=>{var a,s,r,l,d,c;const u=null===(s=null===(a=null==e?void 0:e.currency_price)||void 0===a?void 0:a[0])||void 0===s?void 0:s.price,p=null===(l=null===(r=null==e?void 0:e.currency_price)||void 0===r?void 0:r[0])||void 0===l?void 0:l.price_dot,g=null===(c=null===(d=null==e?void 0:e.currency_price)||void 0===d?void 0:d[0])||void 0===c?void 0:c.keep_dot;if(null==u||null==p||null==g)throw new Error("price cannot be undefined");let h;h=i?Im(e,!0,t)*Math.pow(10,p):u;const m=Pm(h*o,p+n,g),_=((e,t,i,o)=>{let n=e,a=i;const s=Math.max(t,o);for(let e=t;e<s;e++)n*=10;for(let e=o;e<s;e++)a*=10;return Pm(n-a,s,o)})(h,p,m,g);return[Om(m,g),Om(_,g)]})(m,_,1===(null==m?void 0:m.stall_type),n,a))}1===(null==m?void 0:m.stall_type)?(_=e.coinAmount,m&&(f=Im(m,!0,_))):m&&(f=Im(m,!1,_));const w=(null!==(n=m.currency_price)&&void 0!==n?n:[])[0],{currency:k,price:S,price_dot:C,keep_dot:j}=w;let T;return r&&1===(null==m?void 0:m.stall_type)&&(T=v),(0,Ho.of)(this.getActions().setPaymentState({selectedComboId:Number(m.id),selectedComboIndex:l,coinAmount:_,totalPrice:f,currency:k,price:S,priceDot:C,keepDot:j,isCustom:1===m.stall_type,isUseVoucher:x,discountedPrice:y,discountAmount:b,voucherToken:x?null===(a=null==g?void 0:g[0])||void 0===a?void 0:a.voucher_token:void 0,voucherType:x?null===(s=null==g?void 0:g[0])||void 0===s?void 0:s.voucher_type:void 0,inputOption:T}))})),(0,Zo.K)((e=>(this.rdReport.handleReport(km,e),[]))))}fetchPermission(e){return e.pipe((0,$o.z)((({user:e,region:t})=>{const i=void 0!==typeof window?null===window||void 0===window?void 0:window.location.pathname:"";return this.rdReport.handleReport(hm,{path:i}),this.service.getPermission({user_id:null==e?void 0:e.uid,local_country:t,live_id:12}).pipe((0,$o.z)((t=>{var o,n,a,s,r,l,d;if(null==t?void 0:t.data){const d={hasRechargePermission:null===(o=t.data)||void 0===o?void 0:o.is_allow,showEntry:t.data.is_show,coins:(null===(n=t.data)||void 0===n?void 0:n.coins)||0,exchangePermission:null===(a=t.data)||void 0===a?void 0:a.exchange,loadingState:3,notLoggedIn:20003===t.status_code,webRechargeInputOption:null===(s=t.data)||void 0===s?void 0:s.web_recharge_input_option,showInputTooltip:null===(r=t.data)||void 0===r?void 0:r.show_input_tooltip,showRechargeAmountAdjustedText:null===(l=t.data)||void 0===l?void 0:l.show_recharge_amount_adjusted_text},c=[this.getActions().setUserPermission(d),this.getActions().fetchExchangePackages()];return i!==Kh.Tp.coinTransactions&&c.push(this.getActions().getTransactionHistoryList({pageNumber:1,pageSize:1,user:e})),c}return this.rdReport.handleReport(gm,Object.assign(Object.assign({},t),{statusCode:null==t?void 0:t.status_code,errorMessage:null===(d=t.data)||void 0===d?void 0:d.prompts})),(0,Ho.of)(this.getActions().setUserPermission({loadingState:4}))})),(0,gn.O)(this.getActions().setUserPermission({loadingState:1})),(0,Zo.K)((e=>(this.rdReport.handleReport(gm,{error:e}),(0,Ho.of)(this.getActions().setUserPermission({loadingState:4}))))))})))}fetchNotice(e){return e.pipe((0,$o.z)((()=>this.service.getNoticeContent().pipe((0,$o.z)((e=>{var t,i;if(null==e?void 0:e.data){const o=(null!==(t=localStorage.getItem("webapp_recharge_hidden_notices_history"))&&void 0!==t?t:"").split(","),n=null===(i=e.data.notices)||void 0===i?void 0:i.filter((e=>!o.includes(e.id)));return(0,Ho.of)(this.getActions().setNotice({loadingState:3,notices:null!=n?n:[]}))}return(0,Ho.of)(this.getActions().setNotice({loadingState:4}))})),(0,gn.O)(this.getActions().setNotice({loadingState:1})),(0,Zo.K)((()=>(0,Ho.of)(this.getActions().setNotice({loadingState:4}))))))))}placeOrder(e){return e.pipe((0,mn.M)(this.state$,this.bizContext.state$),(0,st.z)((([e,t,i])=>{var o,n,a,s;const{type:r="default",skipKyc:l,user:d,region:c,useWalletCashier:u,skipVoucherConfirm:p,voucherToken:g,billing_address:h}=e,{paymentState:m,customerCoinId:_,refhash:v,coinsExtra:y,reportState:b}=t,{voucher_list:f}=y,{pageType:x,enterAppId:w}=b,{geo:k,isMobile:S}=null!==(o=i.bizContext)&&void 0!==o?o:{};if(!c)return(0,Ho.of)(this.getActions().updateOrder({loadingState:4,prompts:""}));let C={use_wallet_cashier:u,enter_appid:w?Number(w):void 0,billing_address:h,source:(null===(n=i.bizContext)||void 0===n?void 0:n.isMobile)?3:2};if("undefined"!=typeof window&&"true"===localStorage.getItem("recharge_custom_amt_hint_shown")&&(C=Object.assign(Object.assign({},C),{show_recharge_amount_adjusted_text:!0})),"AE"===c&&(C.sub_region=null==k?void 0:k[0]),"default"===r){const{selectedComboId:e,currency:t,coinAmount:i,totalPrice:o,keepDot:n,price:s,isUseVoucher:r,inputOption:d}=m;let c=s.toString();if(r&&!p){const{voucher_token:e,voucher_type:t,voucher_template_id:i}=null!==(a=null==f?void 0:f[0])&&void 0!==a?a:{};return this.report.kycCouponFreezeFirstReminder({page_type:x,popup_entrance:"official_web_recharge",voucher_token:e,voucher_type:t,voucher_template_id:i}),(0,Ho.of)(this.getActions().setVoucherConfirmPopup({show:!0,scenario:"after_buy_now"}))}if(e===_){const e=o.toString().split("."),t=(e[1]||"").padEnd(n,"0").split("").slice(0,n).join("");c=`${e[0]}${t}`,S&&void 0!==d&&(C=Object.assign(Object.assign({},C),{web_recharge_input_option:d}))}C=Object.assign(Object.assign({},C),{diamond_id:e,currency:t,coins_count:i,local_amount:c,refhash:v,skip_kyc_reminder:l})}else if("From3ds"===r){const{diamond_id:t,coins_count:i,local_amount:o,currency:n}=e;if(!(t&&i&&o&&n))return(0,Ho.of)(this.getActions().updateOrder({loadingState:4,prompts:""}));C=Object.assign(Object.assign({},C),{diamond_id:t,currency:n,coins_count:i,local_amount:o,refhash:v})}return m.isUseVoucher&&((null==f?void 0:f[0].voucher_token)?C=Object.assign(Object.assign({},C),{voucher_token_list:JSON.stringify([f[0].voucher_token])}):g&&(C=Object.assign(Object.assign({},C),{voucher_token_list:JSON.stringify([g])}))),this.rdReport.handleReport(vm,C),this.service.placeOrder(C).pipe((0,$o.z)((e=>{var o,n,a,s,r,l,c,p,g,h;if(0===e.status_code&&e.data){const{nonce:i,order_info_using_voucher:o}=e.data;this.rdReport.handleReport(_m,e);const n=[this.getActions().setOrderPaymentState(m),this.getActions().updateOrder({orderData:e.data,loadingState:3})];return!u&&o&&n.push(this.getActions().setCoinsExtra({voucher_list:[]}),this.getActions().updateCoinsAmount({coinComboIndex:t.paymentState.selectedComboIndex,coinAmount:t.paymentState.coinAmount,useVoucher:!1})),i?n.push(this.getActions().updateNonce({nonce:e.data.nonce})):n.push(this.getActions().getNonce()),n}{const u=Object.assign(Object.assign({},e),{statusCode:null==e?void 0:e.status_code,errorMessage:null===(o=e.data)||void 0===o?void 0:o.prompts});if(this.rdReport.handleReport(mm,Object.assign({},u)),null===(n=null==e?void 0:e.extra)||void 0===n?void 0:n.custom_error){if(1===e.extra.custom_error.prompt_type)return(0,Ho.of)(this.getActions().resetErrorState(),this.getActions().updateOrder(Object.assign(Object.assign({},u),{loadingState:4,noPrompts:!0})),this.getActions().setShowRechargeLimitModal(!0));2===e.extra.custom_error.prompt_type&&this.report.handleRechargeLimitToastShow(Object.assign(Object.assign({},Dm(t,"recharge",null===(a=i.bizContext)||void 0===a?void 0:a.isMobile)),{error_code:e.status_code}))}return 4005284===(null==e?void 0:e.status_code)?[this.getActions().setErrorPrompt(null!==(r=null===(s=e.data)||void 0===s?void 0:s.prompts)&&void 0!==r?r:""),this.getActions().updateOrder(Object.assign(Object.assign({},u),{loadingState:4,noPrompts:!0,showFailureModal:!0}))]:nm.includes(e.status_code)?[this.getActions().setErrorPrompt(null!==(c=null===(l=e.data)||void 0===l?void 0:l.prompts)&&void 0!==c?c:""),this.getActions().updateOrder(Object.assign(Object.assign({},u),{loadingState:4,noPrompts:!0})),this.getActions().setKycErrorInfo(null!==(p=e.extra)&&void 0!==p?p:void 0),this.getActions().setShowVerifyNow(!0)]:((null==e?void 0:e.status_code)===om&&this.report.handleAbnormalFeatureToast({user_id:null==d?void 0:d.uid,scenario:"recharge"}),4005192===e.status_code?(0,Ho.of)(this.getActions().resetErrorState(),this.getActions().updateOrder(Object.assign(Object.assign({},u),{loadingState:4,redirectToPaymentResult:!0}))):(0,Ho.of)(this.getActions().resetErrorState(),this.getActions().updateOrder(Object.assign(Object.assign({},u),{loadingState:4})),this.getActions().setErrorPrompt(null!==(h=null===(g=e.data)||void 0===g?void 0:g.prompts)&&void 0!==h?h:"")))}})),(0,gn.O)(this.getActions().updateOrder({loadingState:(null===(s=C.billing_address)||void 0===s?void 0:s.length)?2:1})),(0,Zo.K)((e=>{this.rdReport.handleReport(mm,{error:e});let t="";return/Network/.test(null==e?void 0:e.message)&&(t="Network issue, please try again"),(0,Ho.of)(this.getActions().updateOrder({loadingState:4,prompts:t}))})))})))}fetchExchangePackages(e){return e.pipe((0,mn.M)(this.state$),(0,st.z)((([e,t])=>{var i;if(!(null===(i=t.userState)||void 0===i?void 0:i.exchangePermission))return(0,Ho.of)(this.noop());const{region:o,revenue:n,unit_price:a}=t.userState.exchangePermission;return this.service.getExchangePackages({currency:"USD",package_region:o,type:101,balance:n,balance_real_dot:2}).pipe((0,$o.z)((e=>{var t;if(null==e?void 0:e.data){const i=function(e,t){return Math.floor(e/t*100)}(n,a),o=((e,t)=>{var i,o;const n=null==t?void 0:t.base_package,a=null==t?void 0:t.list;if(!n||!(null==a?void 0:a.length))return[];const s=null==t?void 0:t.default_coin_number,r=Number(null==s?void 0:s.thumbpackage_coin_number)||0,l=Number(null==s?void 0:s.selectedpackage_coin_number)||0,d=[],c=null===(i=null==t?void 0:t.currency_info)||void 0===i?void 0:i.code,u=null===(o=null==t?void 0:t.local_currency_info)||void 0===o?void 0:o.code;for(const t of a){const{coins:i,giving_coins:o,original_price:n,real_dot:a,local_price:s,local_price_real_dot:p,id:g,price:h}=t,m=Number(i)+Number(o);if(m>e)continue;const _=Boolean(n),v={coins:m,isCustom:!1,realDot:Number(a),localCurrency:u,localPrice:Number(s),localRealDot:Number(p)};let y="0.00";if(_){const{showAmount:e}=cm(Object.assign(Object.assign({},v),{price:Number(n)}));y=e}const{showAmount:b,localShowAmount:f}=cm(Object.assign(Object.assign({},v),{price:Number(h)}));d.push({isCustom:!1,id:Number(g),coins:m,price:Number(h),realDot:Number(a),localPrice:Number(s),localRealDot:Number(p),isDiscounted:_,originalPrice:y,showAmount:b,localShowAmount:f,currency:c,localCurrency:u,isRecommended:m===r,isDefaultSelected:m===l})}const{showAmount:p,localShowAmount:g}=cm({coins:e,isCustom:!0,price:Number(n.price),realDot:Number(n.real_dot),localCurrency:u,localPrice:Number(n.local_price),localRealDot:Number(n.local_price_real_dot)}),h={isCustom:!0,id:Number(n.id),coins:e,price:Number(n.price),realDot:Number(n.real_dot),localPrice:Number(n.local_price),localRealDot:Number(n.local_price_real_dot),isDiscounted:!1,originalPrice:"0.00",showAmount:p,localShowAmount:g,currency:c,localCurrency:u},m=d[d.length-1];return(Math.abs((null==m?void 0:m.coins)-e)>10||0===d.length)&&d.push(Object.assign(Object.assign({},h),{isRecommended:!0,isDefaultSelected:!0})),d.push(h),d})(i,null==e?void 0:e.data),s=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.log_id;return(0,Ho.of)(this.getActions().setExchangePackages({loadingState:3,formattedPackages:o,requestId:s}))}return(0,Ho.of)(this.getActions().setExchangePackages({loadingState:4}))})),(0,gn.O)(this.getActions().setExchangePackages({loadingState:1})),(0,Zo.K)((e=>(this.exchangeSlardar.handlePackagesFail(e),(0,Ho.of)(this.getActions().setExchangePackages({loadingState:4}))))))})))}placeExchangeOrder(e){return e.pipe((0,mn.M)(this.state$),(0,st.z)((([e,t])=>{const{exchangeOrderInfo:i,isMobile:o=!1,reportParams:n,skipKyc:a,onSuccess:s,onError:r,region:l,user:d}=e;return this.service.exchangeEarningsToCoins({diamond_id:i.selectedPackageId,way:1,source:o?3:2,currency:null==i?void 0:i.currency,currency_dot:null==i?void 0:i.realDot,coins_count:i.coinAmount,local_amount:i.totalPrice,skip_kyc_reminder:a}).pipe((0,$o.z)((e=>{var i,a,c,u,p,g,h,m,_,v,y,b;if(e.data&&1===e.data.status)return null==s||s(),this.report.handleExchangeSuccess(n),this.rdReport.handleReport(fm),(0,Ho.of)(this.getActions().setExchangeState({loadingState:3,statusCode:e.data.status}),this.getActions().fetchBalanceAndHistory({region:l,user:d}));{null==r||r();const s=Object.assign(Object.assign({},e),{loadingState:4,statusCode:null!==(i=null==e?void 0:e.status_code)&&void 0!==i?i:"",prompts:null!==(c=null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.prompts)&&void 0!==c?c:""});if(this.report.handleExchangeFailed(Object.assign(Object.assign({},n),{error_code:null===(u=e.data)||void 0===u?void 0:u.status})),this.rdReport.handleReport(bm,{error:JSON.stringify(e)}),null===(p=null==e?void 0:e.extra)||void 0===p?void 0:p.custom_error){if(1===e.extra.custom_error.prompt_type)return(0,Ho.of)(this.getActions().resetErrorState(),this.getActions().setExchangeState(Object.assign(Object.assign({},s),{dontToast:!0})),this.getActions().setShowRechargeLimitModal(!0));2===e.extra.custom_error.prompt_type&&this.report.handleRechargeLimitToastShow(Object.assign(Object.assign({},Dm(t,"exchange",o)),{error_code:e.status_code}))}return e.status_code===om&&this.report.handleAbnormalFeatureToast({user_id:null==d?void 0:d.uid,scenario:"recharge_page_exchange"}),4005285===(null==e?void 0:e.status_code)?[this.getActions().setErrorPrompt(null!==(h=null===(g=e.data)||void 0===g?void 0:g.prompts)&&void 0!==h?h:""),this.getActions().setExchangeState(Object.assign(Object.assign({},s),{dontToast:!0,showFailureModal:!0}))]:nm.includes(e.status_code)?[this.getActions().setErrorPrompt(null!==(_=null===(m=e.data)||void 0===m?void 0:m.prompts)&&void 0!==_?_:""),this.getActions().setExchangeState(Object.assign(Object.assign({},s),{dontToast:!0})),this.getActions().setKycErrorInfo(null!==(v=e.extra)&&void 0!==v?v:void 0),this.getActions().setShowVerifyNow(!0)]:(0,Ho.of)(this.getActions().resetErrorState(),this.getActions().setExchangeState(s),this.getActions().setErrorPrompt(null!==(b=null===(y=e.data)||void 0===y?void 0:y.prompts)&&void 0!==b?b:""))}})),(0,gn.O)(this.getActions().setExchangeState({loadingState:1})),(0,hn.l)(this.getActions().setExchangeState({loadingState:0})),(0,Zo.K)((e=>{null==r||r(),this.exchangeSlardar.handlePlaceOrderFail(e),this.rdReport.handleReport(bm,e);let t="";return/Network/.test(null==e?void 0:e.message)&&(t="Network issue, please try again"),(0,Ho.of)(this.getActions().setExchangeState({loadingState:4,prompts:t}))})))})))}fetchCoinsConfig(e){return e.pipe((0,mn.M)(this.state$),(0,st.z)((([e,t])=>{var i;const{refHash:o}=e;let n="others";return o&&!Am.includes(o)&&(n=o),this.service.getCoinsConfig({recommend_strategy_param:JSON.stringify({charge_from:n,enter_appid:null===(i=null==t?void 0:t.reportState)||void 0===i?void 0:i.enterAppId})}).pipe((0,$o.z)((i=>{var o,n,a,s,r,l,d,c,u,p,g,h,m,_,v,y,b,f,x,w,k,S,C,j,T,I,P;if(0===i.status_code&&i.data&&i.extra){if(0===(null===(o=i.data)||void 0===o?void 0:o.length))throw new Error("empty diamond list");let e=(e=>{const t=[];let i=null,o=0;for(const n of e)1===n.stall_type?i=n:t.push(Object.assign(Object.assign({},n),{index:o++}));return i&&t.push(Object.assign(Object.assign({},i),{index:o})),t})(i.data),t=-1;return e=e.map(((e,o)=>{var n,a,s;return(null===(n=i.extra)||void 0===n?void 0:n.use_default_packet)&&(0===e.stall_type&&e.id===(null===(a=i.extra)||void 0===a?void 0:a.recommended_packet_id)||2===e.stall_type&&e.diamond_count===(null===(s=i.extra)||void 0===s?void 0:s.default_packet_coin))?(t=o,Object.assign(Object.assign({},e),{isDefaultPackage:1})):Object.assign(Object.assign({},e),{isDefaultPackage:0})})),-1===t&&(null===(n=i.extra)||void 0===n?void 0:n.use_default_packet)&&(t=0,e[0].isDefaultPackage=1),(0,Ho.of)(this.getActions().setCoinsConfig({coinsData:e}),this.getActions().setCoinsExtra(i.extra),this.getActions().updateCoinsAmount(i.extra.use_default_packet?{coinComboIndex:t,coinAmount:0}:{coinComboIndex:-1,coinAmount:0}),this.getActions().setCustomCoin({customerCoinId:(null===(a=null==i?void 0:i.extra)||void 0===a?void 0:a.customized_ids)?null===(s=null==i?void 0:i.extra)||void 0===s?void 0:s.customized_ids[0]:0,customCoinIndex:e.length-1,customCoinMaxNum:null!==(l=null===(r=null==i?void 0:i.extra)||void 0===r?void 0:r.max_customized_diamond_cnt)&&void 0!==l?l:0,customCoinMinNum:null!==(d=null==i?void 0:i.extra.min_customized_diamond_cnt)&&void 0!==d?d:0,priceUnit:(null===(c=null==i?void 0:i.data[0])||void 0===c?void 0:c.currency_price)&&null!==(g=null===(p=null===(u=null==i?void 0:i.data[0])||void 0===u?void 0:u.currency_price[0])||void 0===p?void 0:p.price_show_form)&&void 0!==g?g:"",apUnitPrice:null!==(m=null===(h=null==i?void 0:i.extra)||void 0===h?void 0:h.ap_unit_price)&&void 0!==m?m:{},gpUnitPrice:null!==(v=null===(_=null==i?void 0:i.extra)||void 0===_?void 0:_.gp_unit_price)&&void 0!==v?v:{},merchantId:null!==(b=null===(y=null==i?void 0:i.extra)||void 0===y?void 0:y.merchant_id)&&void 0!==b?b:""}),this.getActions().setRegion(null!==(x=null===(f=null==i?void 0:i.extra)||void 0===f?void 0:f.region)&&void 0!==x?x:void 0),this.getActions().setReportState({coinsConfigLogId:i.extra.request_id}),this.getActions().setCoinsConfig({loadingState:3}))}return this.report.handleRechargeFailed({error_code:null!==(w=String(null==i?void 0:i.status_code))&&void 0!==w?w:"unknown",message:null!==(S=null===(k=null==i?void 0:i.data)||void 0===k?void 0:k.prompts)&&void 0!==S?S:"some error in get_coins",error_from:"get_coins",enter_appid:null===(C=null==t?void 0:t.reportState)||void 0===C?void 0:C.enterAppId,charge_from:null!==(j=t.refhash)&&void 0!==j?j:"",request_page:e.isMobile?"mobile_h5":"webapp",is_web_recharged_before:t.transactionHistory.isWebRechargedBefore?"yes":"no",recharge_type:"feature_available",order_id:null!==(I=null===(T=t.orderInfo.orderData)||void 0===T?void 0:T.order_id)&&void 0!==I?I:"",event_module:(null==t?void 0:t.paymentState.isCustom)?"customized":"normal",recharge_from:t.inAppState.rechargeFrom,pay_method:t.paymentMethod}),this.rdReport.handleReport(pm,Object.assign(Object.assign({},i),{statusCode:null==i?void 0:i.status_code,errorMessage:null===(P=i.data)||void 0===P?void 0:P.prompts})),(0,Ho.of)(this.getActions().setCoinsConfig({loadingState:4}))})),(0,gn.O)(this.getActions().setCoinsConfig({loadingState:1})),(0,Zo.K)((e=>(this.rdReport.handleReport(pm,{error:e}),(0,Ho.of)(this.getActions().setCoinsConfig({loadingState:4}))))))})))}getTransactionHistoryList(e){return e.pipe((0,st.z)((e=>{const{pageSize:t,pageNumber:i,user:o}=e;if(!o)return(0,Ho.of)(this.noop());const n=o.uid;return this.service.getTransactionHistory({page:i,count:t,user_id:n}).pipe((0,$o.z)((e=>(0,Ho.of)(this.getActions().setTransactionHistory({pageData:e.data.list_recharge_order,extraData:e.extra,total:e.data.total_count,pageNumber:i,pageSize:t,loadingState:3,isWebRechargedBefore:0!==e.data.total_count})))),(0,gn.O)(this.getActions().setTransactionHistory({loadingState:1})),(0,Zo.K)((e=>(this.rdReport.handleReport(xm,{pageSize:String(t),pageNumber:String(i),error:e}),(0,Ho.of)(this.getActions().setTransactionHistory({loadingState:4}))))))})))}loadTransactionHistory(e){return e.pipe((0,mn.M)(this.state$),(0,un.w)((([e,t])=>{const{pageSize:i,pageNumber:o,totalData:n}=t.transactionHistory;if(!e)return(0,Ho.of)(this.noop());const a=e.uid;return this.service.getTransactionHistory({page:o,count:i,user_id:a}).pipe((0,$o.z)((e=>(0,Ho.of)(this.getActions().setTransactionHistory({pageData:e.data.list_recharge_order,totalData:[...n,...e.data.list_recharge_order],total:e.data.total_count,pageNumber:o+1,pageSize:i,loadingState:3,isWebRechargedBefore:0!==e.data.total_count})))),(0,gn.O)(this.getActions().setTransactionHistory({loadingState:1})),(0,Zo.K)((e=>(this.rdReport.handleReport(wm,{page:String(o),count:String(i),error:e}),(0,Ho.of)(this.getActions().setTransactionHistory({loadingState:4}))))))})))}getNonce(e){return e.pipe((0,$o.z)((()=>this.service.getNonce().pipe((0,$o.z)((e=>{var t;return 0===e.status_code?(0,Ho.of)(this.getActions().updateNonce({nonce:null===(t=e.data)||void 0===t?void 0:t.nonce,loadingState:3})):(0,Ho.of)(this.getActions().updateNonce({loadingState:4}))})),(0,gn.O)(this.getActions().updateNonce({loadingState:1}))))))}init(e){return e.pipe((0,$o.z)((e=>{const{refHash:t,user:i,enterAppId:o,region:n}=e;return[this.getActions().setRefHash(null!=t?t:""),this.getActions().setEnterAppId(o),this.getActions().fetchPermission({user:i,region:n}),this.getActions().fetchCoinsConfig({}),this.getActions().fetchNotice()]})),(0,Zo.K)((()=>(0,Ho.of)(this.noop()))))}fetchBalanceAndHistory(e){return e.pipe((0,mn.M)(this.bizContext.state$),(0,$o.z)((([{region:e,user:t},i])=>{var o;return(null===(o=i.bizContext)||void 0===o?void 0:o.isMobile)?[this.getActions().fetchPermission({region:e,user:t}),this.getActions().setTransactionHistory({pageNumber:1,pageSize:12,totalData:[],containerScrollTop:0})]:(0,Ho.of)(this.getActions().fetchPermission({region:e,user:t}))})))}updateInAppState(e){return e.pipe((0,$o.z)((e=>[this.getActions().setInAppState(e)])),(0,Zo.K)((()=>(0,Ho.of)(this.noop()))))}verifyPostalCode(e){return e.pipe((0,mn.M)(this.state$),(0,un.w)((([e,t])=>{var i;const o=null!==(i=t.region)&&void 0!==i?i:e;return this.service.verifyZipCode({region:o,zip_code:t.billingAddress.postalCode}).pipe((0,$o.z)((e=>{var t;return(0,Ho.of)(this.getActions().setBillingAddress({isValid:null===(t=e.data)||void 0===t?void 0:t.is_valid,validating:!1,validated:!0}))})),(0,Zo.K)((()=>(0,Ho.of)(this.getActions().setBillingAddress({validating:!1})))),(0,gn.O)(this.getActions().setBillingAddress({validating:!0})))})))}saveBillingAddress(e){return e.pipe((0,mn.M)(this.state$,this.bizContext.state$),(0,$o.z)((([e,t,i])=>{var o,n,a,s;const r=null!==(o=t.region)&&void 0!==o?o:e,l=null===(n=i.bizContext)||void 0===n?void 0:n.isMobile,{paymentState:d}=t,{isCustom:c,coinAmount:u}=d,p={enter_from:null!==(a=t.reportState.enterFrom)&&void 0!==a?a:"",is_web_recharged_before:t.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:l?"mobile_h5":"webapp",event_module:c?"customized":"normal",recharge_package:u,charge_from:null!==(s=t.refhash)&&void 0!==s?s:""};return this.service.saveBillingAddress({region:r,zip_code:t.billingAddress.postalCode}).pipe((0,$o.z)((e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.is_saved)?(0,Ho.of)(this.getActions().setBillingAddress({isSaved:!0})):(this.report.handleBillingAddressFailed(p),this.rdReport.handleReport(ym),(0,Ho.of)(this.getActions().updateOrder({loadingState:4})))})),(0,Zo.K)((e=>(this.report.handleBillingAddressFailed(p),this.rdReport.handleReport(ym,{error:e}),(0,Ho.of)(this.getActions().updateOrder({loadingState:4}))))))})))}getBillingAddress(e){return e.pipe((0,mn.M)(this.state$,this.bizContext.state$),(0,$o.z)((()=>this.service.getBillingAddress().pipe((0,$o.z)((e=>{if(e.data){const{city:t="",country:i="",county:o="",state:n=""}=e.data;let a={};return a=""===t&&""===i&&""===o&&""===n?{city_name:"",country_name:"Canada",county_name:"",state_name:"Ontario"}:{city_name:t,country_name:i,county_name:o,state_name:n},(0,Ho.of)(this.getActions().setLocationData({loadingState:3,billingAddress:a}))}return(0,Ho.of)(this.getActions().setLocationData({loadingState:4,billingAddress:{}}))})),(0,gn.O)(this.getActions().setLocationData({loadingState:2,billingAddress:{}})),(0,Zo.K)((()=>(0,Ho.of)(this.getActions().setLocationData({loadingState:4,billingAddress:{}}))))))))}updateBillingAddress(e){return e.pipe((0,mn.M)(this.state$,this.bizContext.state$),(0,st.z)((([e,t])=>{var i;const{state_name:o,county_name:n,city_name:a,country_name:s}=e,{locationData:r}=t,l={city:null!=a?a:"",country_code:null!=s?s:"",county:null!=n?n:"",state_code:null!=o?o:""},d={city_name:a,country_name:s,county_name:n,state_name:o};return this.service.updateBillingAddress(l).pipe((0,$o.z)((e=>{var t,i;return(null===(t=e.data)||void 0===t?void 0:t.is_saved)?(0,Ho.of)(this.getActions().setLocationData({loadingState:3,billingAddress:null!=d?d:{}})):(0,Ho.of)(this.getActions().setLocationData({loadingState:4,billingAddress:null!==(i=null==r?void 0:r.billingAddress)&&void 0!==i?i:{}}))})),(0,gn.O)(this.getActions().setLocationData({loadingState:JSON.stringify(d)===JSON.stringify(null==r?void 0:r.billingAddress)?1:2,billingAddress:null!==(i=null==r?void 0:r.billingAddress)&&void 0!==i?i:""})),(0,Zo.K)((()=>{var e;return(0,Ho.of)(this.getActions().updateOrder({loadingState:4,billingAddress:null!==(e=null==r?void 0:r.billingAddress)&&void 0!==e?e:""}))})))})))}};(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setUserPermission",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setLocationData",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setNotice",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setCoinsConfig",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setCoinsExtra",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setPaymentState",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,String]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setPaymentMethod",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setExchangePackages",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setExchangeState",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setCustomCoin",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"reportUpdatingBillingAddress",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"updateOrder",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"updateNonce",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setTransactionHistory",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setTransactionSize",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setInAppState",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,String]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setRefHash",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,String]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setEnterAppId",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setReportState",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,String]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setEnterFrom",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setMobileInputVisible",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setCashierModalLoaded",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setBillingAddress",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setDefaultSelectedMethod",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setShowVerifyNow",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,String]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setErrorPrompt",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setRegion",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"resetErrorState",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setKycErrorInfo",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Number]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setGridColCount",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setShowRechargeLimitModal",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setKycActivityPopup",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setShowVoucherSheet",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setVoucherConfirmPopup",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setBlockNavigation",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setPrevPaymentState",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setOrderPaymentState",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Object]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"setCustomRechargePanelState",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"initPayment",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"updateCoinsAmount",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"fetchPermission",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"fetchNotice",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"placeOrder",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",nt.y)],Wm.prototype,"fetchExchangePackages",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"placeExchangeOrder",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"fetchCoinsConfig",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"getTransactionHistoryList",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"loadTransactionHistory",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"getNonce",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"init",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"fetchBalanceAndHistory",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"updateInAppState",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"verifyPostalCode",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"saveBillingAddress",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"getBillingAddress",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],Wm.prototype,"updateBillingAddress",null),Wm=(0,b.__decorate)([(0,ot.Y)("Recharge"),(0,b.__metadata)("design:paramtypes",[Rm,pe.r,Yh,lm,Sm])],Wm);const Um=(0,je.Z)("div",{target:"equhrky0"})((({theme:{direction:e}})=>(0,Xe.YJ)({direction:e,marginStart:"16px"})),{cursor:"pointer",height:"32px",position:"relative",width:"32px",display:"flex",alignItems:"center",justifyContent:"center"},"label:DivRechargeContainer;");Um.defaultProps=Object.assign(Object.assign({},Um.defaultProps),{"data-e2e":"recharge-icon"});const qm=(0,je.Z)("span",{target:"equhrky1"})({width:"24px",height:"24px",display:"block"},"label:SpanLogoContainer;"),zm=(0,je.Z)("span",{target:"equhrky2"})((({theme:{direction:e}})=>(0,Xe.YJ)({direction:e,marginEnd:"8px"})),{width:"20px",height:"20px",display:"block"},"label:SpanLogoContainerInner;"),$m=(0,je.Z)("div",{target:"equhrky3"})((({theme:{direction:e}})=>(0,Xe.YJ)({direction:e,marginStart:"16px"})),{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",cursor:"pointer",height:"36px",position:"relative",padding:"7px 16px",borderRadius:"2px",border:"1px solid rgba(22, 24, 35, 0.12)",boxSizing:"border-box"},"label:DivRechargeContainerWithText;");$m.defaultProps=Object.assign(Object.assign({},$m.defaultProps),{"data-e2e":"recharge-icon"});const Hm=(0,je.Z)("h2",{target:"equhrky4"})((({theme:{direction:e}})=>(0,Xe.YJ)({direction:e})),{fontFamily:"Proxima Nova",height:"24px",position:"relative",fontStyle:"normal",whiteSpace:"nowrap",fontWeight:600,fontSize:"16px",lineHeight:"24px",color:"#161823"},"label:H2RechargeTextContainer;"),Zm="HAS_ENTERED_KEY",Vm="HAS_ENTERED_VALUE";var Gm;!function(e){e[e.Showing=0]="Showing",e[e.Clicking=1]="Clicking"}(Gm||(Gm={}));const Qm=()=>(0,u.jsx)(zm,{children:(0,u.jsx)(Jh.Z,{width:20,height:20},void 0)},void 0),Jm=()=>{const e=(0,St.Q)();return(0,u.jsx)(fl.u,Object.assign({placement:"bottom",overlay:e("WebApp_coin_recharge_1")},{children:(0,u.jsx)(qm,{children:(0,u.jsx)(Jh.Z,{width:22.5,height:22.5},void 0)},void 0)}),void 0)},Ym=()=>{const e=(0,St.Q)(),t=(0,ue.k6)(),i=(0,Ze.fz)(Yh),o=(0,se.mp)(Wm),n=o.userState.showEntry,a=(0,de.useCallback)((()=>{i.handleLiveWebGetCoinShow({show_page:"live_page",is_web_recharged_before:o.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:"webapp",style:"icon_and_text"})}),[o.transactionHistory.isWebRechargedBefore,i]);(0,de.useEffect)((()=>{a()}),[a]);const s=(0,de.useCallback)((()=>{i.handleLiveWebGetCoinClick({show_page:"live_page",is_web_recharged_before:o.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:"webapp",style:"icon_and_text"})}),[o.transactionHistory.isWebRechargedBefore,i]),r=(0,de.useCallback)((()=>{t.push(`${Kh.O5.coin}?enter_from=web_live_nav`)}),[t]),l=(0,de.useCallback)((()=>{s(),r()}),[s,r]);return n?(0,u.jsxs)($m,Object.assign({onClick:l},{children:[(0,u.jsx)(Qm,{},void 0),(0,u.jsx)(Hm,{children:e("WebApp_coin_recharge_1")},void 0)]}),void 0):null},Km=()=>{const[e,t]=(0,de.useState)(!0),[i,o]=(0,de.useState)(!1),n=(0,ue.k6)(),a=(0,St.Q)(),s=(0,Ze.fz)(Yh),r=(0,Qe.Lh)((()=>["abTestVersion"]),[]),l=(0,se.mp)(Wm),d=l.userState.showEntry,c=(0,He.N8)(null==r?void 0:r.abTestVersion,"expose_recharge_entry_pc"),p=void 0===c||"v1"===c,g=void 0!==c&&"v2"===c,h=g&&e;(0,de.useEffect)((()=>{e&&g&&(0,To.le)(Zm)===Vm&&t(!1),o(!0)}),[e,g]);const m=(0,de.useCallback)((e=>{const t={show_page:"main_page",is_web_recharged_before:l.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:"webapp",style:h?"icon_and_text":"icon_only"};0===e?s.handleLiveWebGetCoinShow(t):1===e&&s.handleLiveWebGetCoinClick(t)}),[s,l.transactionHistory.isWebRechargedBefore,h]),_=(0,de.useCallback)((()=>{m(0)}),[m]);(0,de.useEffect)((()=>{i&&d&&!p&&_()}),[i,e,d,p,_]);const v=(0,de.useCallback)((()=>{(0,To.D$)(Zm,Vm)}),[]),y=(0,de.useCallback)((()=>{n.push(`${Kh.O5.coin}?enter_from=web_main_nav`)}),[n]),b=(0,de.useCallback)((()=>{m(1)}),[m]),f=(0,de.useCallback)((()=>{g&&e&&v(),b(),y()}),[g,e,v,y,b]);return!d||p?null:h?(0,u.jsxs)($m,Object.assign({onClick:f},{children:[(0,u.jsx)(Qm,{},void 0),(0,u.jsx)(Hm,{children:a("WebApp_coin_recharge_1")},void 0)]}),void 0):(0,u.jsx)(Um,Object.assign({onClick:f},{children:(0,u.jsx)(Jm,{},void 0)}),void 0)},Xm=({alwaysShowRechargeIconAndText:e})=>e?(0,u.jsx)(Ym,{},void 0):(0,u.jsx)(Km,{},void 0);var e_;!function(e){e.ShowCollectionsTooltip="show_collections_tooltip",e.EnterCollectionsPage="enter_collections_page"}(e_||(e_={}));const t_=(0,je.Z)("div",{target:"e15tt1x80"})({padding:"12px",width:"180px",wordBreak:"break-word"},"label:DivTipWrapper;"),i_=(0,je.Z)("p",{target:"e15tt1x81"})((({theme:e})=>(0,Xe.GI)({theme:e,typography:"P3",color:"ConstTextInverse"})),"label:PTipDesc;"),o_=(0,de.memo)((({userPopupActive:e})=>{const t=(0,St.Q)(),{colors:i,direction:o}=(0,g.u)(),[n,a]=(0,de.useState)(!1),{tooltipPriority:s}=(0,se.mp)(fc),r="ltr"===o?"bottomRight":"bottomLeft";return(0,de.useEffect)((()=>{xl.iv.getItem(vc)||6!==s?a(!1):(a(!0),Ji.W.event("show_collections_tooltip"),xl.iv.setItem(vc,!0))}),[s]),(0,de.useEffect)((()=>{let e;return n&&(e=window.setTimeout((()=>{a(!1)}),15e3)),()=>clearTimeout(e)})),(0,de.useEffect)((()=>{e&&n&&a(!1)}),[n,e]),(0,u.jsx)(or.G,Object.assign({active:n,backgroundColor:i.ConstSecondary2,placement:r,arrowMargin:"16px",margin:"-12px"},{children:(0,u.jsx)(t_,{children:(0,u.jsx)(i_,{children:t("tiktok_series_webapp_tooltip_get_started")},void 0)},void 0)}),void 0)}));var n_=i(98811),a_=i(60996),s_=i(48391),r_=i(2571),l_=i(61173),d_=i(28387),c_=i(53236),u_=i(82603),p_=i(33207),g_=i(28053),h_=i(77986),m_=i(48199),__=i(12628),v_=i(75617),y_=i(91110);const b_={id:"tiktok_series-bbcfbda2",use:"tiktok_series-bbcfbda2-usage",viewBox:"0 0 48 48",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" id="tiktok_series-bbcfbda2"><path fill-rule="evenodd" d="M15.83 4A3.83 3.83 0 0 0 12 7.83V12H7.83A3.83 3.83 0 0 0 4 15.83v24.34A3.83 3.83 0 0 0 7.83 44h24.34A3.83 3.83 0 0 0 36 40.17v-4.34h4.17A3.83 3.83 0 0 0 44 32V7.83A3.83 3.83 0 0 0 40.17 4H15.83zm16.34 8H16V8h24v23.83h-4v-16A3.83 3.83 0 0 0 32.17 12zM8 40V16h24v24H8z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M19.57 37h1.1c.42 0 .76-.32.76-.71v-1.11c1.5-.2 2.64-.74 3.41-1.52A4.09 4.09 0 0 0 26 30.74c0-1.42-.63-2.39-1.56-3.05a9.05 9.05 0 0 0-3-1.23v-2.51c.65.2 1.28.5 1.81.95.33.26.85.25 1.13-.1l1.03-1.27c.23-.29.2-.7-.1-.95a7.76 7.76 0 0 0-3.88-1.69v-1.18c0-.4-.34-.71-.76-.71h-1.1c-.41 0-.76.32-.76.71v1.15c-2.65.36-4.44 2.04-4.44 4.22 0 1.38.6 2.32 1.51 2.96.84.6 1.92.93 2.93 1.19v2.95a5.68 5.68 0 0 1-2.47-1.31.8.8 0 0 0-1.16.09l-1.04 1.33c-.2.28-.19.67.09.92 1.1 1 2.63 1.75 4.58 1.97v1.1c0 .4.35.72.76.72zm2.97-6.04c0 .44-.27.97-1.1 1.23v-2.27c.34.13.6.27.79.42.2.18.3.37.3.62zm-4.7-6.06c0-.46.3-.87.97-1.07v1.94a2.59 2.59 0 0 1-.71-.37c-.19-.15-.26-.3-.26-.5z" clip-rule="evenodd" /></symbol>'};function f_(e){const t=(0,de.useContext)(ne.e);return(0,de.useLayoutEffect)((()=>(t.add(b_),()=>{t.remove("tiktok_series-bbcfbda2")})),[]),(0,u.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,u.jsx)("use",{xlinkHref:"#tiktok_series-bbcfbda2"},void 0)}),void 0)}var x_;!function(e){e.UploadEmoteError="live_sdk_subscription_upload_emote_error",e.GetEmoteDetailSuccess="live_sdk_subscription_get_emote_success",e.GetEmoteDetailError="live_sdk_subscription_get_emote_error",e.PermissionError="live_sdk_subscription_get_permission_error",e.GetBadgeDetailError="live_sdk_subscription_get_badge_detail_error",e.UpdateBadgeError="live_sdk_subscription_update_badge_error",e.GetPrivilegeDetailError="live_sdk_subscription_get_previlege_detail_error"}(x_||(x_={}));let w_=class{constructor(e){this.service=e,this.defaultTag={where:"Subscription"},this.defaultMetrics={count:1},this.reportError=e=>{this.service.sendLog(null==e?void 0:e.message,"error")},this.handleUploadEmoteError=e=>{this.reportError(e),this.service.emitEvent("live_sdk_subscription_upload_emote_error",this.defaultMetrics,this.defaultTag)},this.handleGetEmoteDetailSuccess=()=>{this.service.emitEvent("live_sdk_subscription_get_emote_success",this.defaultMetrics,this.defaultTag)},this.handleGetEmoteDetailError=(e,t)=>{try{const i=Object.assign({},this.defaultTag);(null==e?void 0:e.message)?(i.status_msg=e.message,this.reportError(e)):t&&(i.status_msg=t),this.service.emitEvent("live_sdk_subscription_get_emote_error",this.defaultMetrics,i)}catch(e){}},this.handleGetBadgeDetailError=e=>{this.reportError(e),this.service.emitEvent("live_sdk_subscription_get_badge_detail_error",this.defaultMetrics,this.defaultTag)},this.handleUpdateBadgeError=e=>{this.reportError(e),this.service.emitEvent("live_sdk_subscription_update_badge_error",this.defaultMetrics,this.defaultTag)},this.handlePermissionError=e=>{this.reportError(e),this.service.emitEvent("live_sdk_subscription_get_permission_error",this.defaultMetrics,this.defaultTag)}}};w_=(0,b.__decorate)([(0,x.G)(),(0,b.__metadata)("design:paramtypes",[L.n])],w_);let k_=class{constructor(e){this.fetch=e,this.getSubPermissionInfo=e=>this.fetch.get("/webcast/sub/privilege/get_sub_info",{query:e,baseUrlType:4}),this.getDetails=e=>this.fetch.get("/webcast/sub/privilege/get_sub_privilege_detail",{query:{sec_anchor_id:e,for_anchor:!0},baseUrlType:4}),this.getBadgeDetail=e=>this.fetch.get("/webcast/sub/privilege/get_sub_badge_detail",{query:e,baseUrlType:4}),this.getSubscriberList=e=>this.fetch.get("/webcast/sub/anchor/subscriber/",{query:e,baseUrlType:4}),this.updateBadge=e=>this.fetch.post("/webcast/sub/privilege/update_badge",{body:JSON.stringify(e),headers:{"Content-Type":"application/json"},baseUrlType:4}),this.getEmoteDetail=e=>this.fetch.get("/webcast/sub/privilege/get_sub_emote_detail/",{query:e,baseUrlType:4}),this.updateEmote=e=>this.fetch.post("/webcast/sub/privilege/update_emote",{body:JSON.stringify(Object.assign({},e)),headers:{"Content-Type":"application/json"},baseUrlType:4}),this.uploadImage=e=>{const t=new FormData;return t.append("data",e),this.fetch.post("/webcast/resource/upload/",{query:{scene:"tikcast_subscription"},body:t,omitContentType:!0,baseUrlType:4})}}};var S_;k_=(0,b.__decorate)([(0,x.G)(),(0,b.__metadata)("design:paramtypes",[c.r])],k_),function(e){e[e.Guide=0]="Guide",e[e.Badge=1]="Badge",e[e.Emote=2]="Emote"}(S_||(S_={}));let C_=class extends tt.D{constructor(e,t){super(),this.service=e,this.slardar=t,this.defaultState={loading:0,showInitModal:!1,showUpdateModal:!1,enableSubscription:!1,initializedSubscription:!1,emoteStatus:0,badgeStatus:0,hasFetchedPermission:!1,initStep:0,hasEditEmote:!1,hasEditBadge:!1}}setEnableSubscription(e,t){e.enableSubscription=t}setInitializedSubscription(e,t){e.initializedSubscription=t}setBadgeStatus(e,t){e.badgeStatus=t}setEmoteStatus(e,t){e.emoteStatus=t}setLoading(e,t){e.loading=t}setShowInitModal(e,t){e.showInitModal=t}setShowUpdateModal(e,t){e.showUpdateModal=t}setInitStep(e,t){e.initStep=t}setHasFetchedPermission(e,t){e.hasFetchedPermission=t}setHasEditEmote(e,t){e.hasEditEmote=t}setHasEditBadge(e,t){e.hasEditBadge=t}getSubPermissionInfo(e){return e.pipe((0,mn.M)(this.state$),(0,st.z)((([e,{hasFetchedPermission:t}])=>t?(0,Ho.of)(this.noop()):this.service.getSubPermissionInfo(e).pipe((0,$o.z)((({status_code:e,data:t})=>{var i,o;if(0!==e||!t)return(0,Ho.of)(this.noop());const{enable:n,initialized:a,badge_info:s,emote_info:r}=t;return(0,Ho.of)(this.getActions().setEnableSubscription(null!=n&&n),this.getActions().setInitializedSubscription(null!=a&&a),this.getActions().setBadgeStatus(null!==(i=null==s?void 0:s.current_status)&&void 0!==i?i:0),this.getActions().setEmoteStatus(null!==(o=null==r?void 0:r.current_status)&&void 0!==o?o:0),this.getActions().setHasFetchedPermission(!0))})),(0,gn.O)(this.getActions().setLoading(1)),(0,hn.l)(this.getActions().setLoading(2)),(0,Zo.K)((e=>(this.slardar.handlePermissionError(e),(0,Ho.of)(this.noop()))))))))}};(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],C_.prototype,"setEnableSubscription",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],C_.prototype,"setInitializedSubscription",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Number]),(0,b.__metadata)("design:returntype",void 0)],C_.prototype,"setBadgeStatus",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Number]),(0,b.__metadata)("design:returntype",void 0)],C_.prototype,"setEmoteStatus",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Number]),(0,b.__metadata)("design:returntype",void 0)],C_.prototype,"setLoading",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],C_.prototype,"setShowInitModal",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],C_.prototype,"setShowUpdateModal",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Number]),(0,b.__metadata)("design:returntype",void 0)],C_.prototype,"setInitStep",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],C_.prototype,"setHasFetchedPermission",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],C_.prototype,"setHasEditEmote",null),(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],C_.prototype,"setHasEditBadge",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],C_.prototype,"getSubPermissionInfo",null),C_=(0,b.__decorate)([(0,ot.Y)("SubscriptionCommonModule"),(0,b.__metadata)("design:paramtypes",[k_,w_])],C_);var j_=i(47871),T_=i(17296),I_=i(69405),P_=i(24930);const O_=(0,je.Z)("div",{target:"e1xkydcv0"})((({theme:e})=>(0,Xe.GI)({theme:e,typography:"P3",fontFamily:"Proxima"})),{minWidth:"223px"},"label:DivContainer;"),L_=(0,je.Z)("div",{target:"e1xkydcv1"})({display:"flex",alignItems:"center",position:"relative",height:"50px"},"label:DivHeader;"),M_=(0,je.Z)(Lg.Z,{target:"e1xkydcv2"})((({theme:{direction:e}})=>[(0,Xe.YJ)({direction:e,marginStart:"28px"}),"ltr"===e?null:{transform:"rotate(180deg)"}]),{width:"20px",height:"20px"},"label:StyledBackIcon;"),E_=(0,je.Z)("p",{target:"e1xkydcv3"})((({theme:e})=>(0,Xe.GI)({theme:e,typography:"P2",fontWeight:"semiBold"})),{position:"absolute",left:"50%",transform:"translateX(-50%)"},"label:PTitle;"),A_=(0,je.Z)("ul",{target:"e1xkydcv4"})({listStyle:"none",margin:0,padding:0,maxHeight:"590px",overflowY:"auto"},"label:UlListWrapper;"),D_=(0,je.Z)("li",{target:"e1xkydcv5"})((({theme:e,theme:{colors:t},active:i})=>[{padding:"10px 24px",background:i?t.BGPlaceholderDefault:"transparent",":hover":{background:t.BGPlaceholderDefault}},(0,Xe.GI)({theme:e,fontFamily:"Sofia"})]),"label:LiListItem;"),F_=function(e){var t,i;const o=(0,St.Q)(),{language:n}=null!==(t=(0,Qe.Lh)((()=>["language"]),[]))&&void 0!==t?t:{},a=null!==(i=N.tF.reduce(((e,t)=>(t.value===n?e.unshift(t):e.push(t),e)),[]))&&void 0!==i?i:[],{pathname:s,search:r}=(0,ue.TH)(),l=xd(),d=(0,de.useCallback)((e=>()=>{let t;t=(0,Se.Hg)(s)?`/${e}`:(0,wn.stringifyUrl)({url:s,query:Object.assign(Object.assign({},(0,wn.parse)(r)),{lang:e})}),l({lang:e,url:t})}),[s,l,r]),c=(0,de.useCallback)((e=>()=>{d(e)()}),[d]),p=(0,de.useCallback)((e=>t=>{13===t.keyCode&&(t.stopPropagation(),d(e)())}),[d]),{showModal:g,hideModal:h}=(0,Nl.J)();(0,de.useEffect)((()=>(g(),()=>{h()})),[h,g]);const[m,_]=(0,de.useState)(0),v=(0,de.useCallback)((t=>{9===t.keyCode&&(t.shiftKey?m>0&&_(m-1):(m<a.length-1&&_(m+1),setTimeout((()=>{var t,i;const o=document.querySelector("#lang-setting-popup-list");(null===(t=Array.from(null==o?void 0:o.querySelectorAll("*")))||void 0===t?void 0:t.includes(document.activeElement))||null===(i=e.onBlur)||void 0===i||i.call(e)}),0)))}),[m,e,a.length]);return(0,u.jsxs)(O_,{children:[(0,u.jsxs)(L_,{children:[(0,u.jsx)("i",Object.assign({onClick:e.onBack,tabIndex:0,onKeyDown:e.onKeyDown,"aria-label":o("accessibilityLabels_forYou_nav_language_back_btn"),role:"button"},{children:(0,u.jsx)(M_,{},void 0)}),void 0),(0,u.jsx)(E_,Object.assign({id:hc},{children:o("Language")}),void 0)]},void 0),(0,u.jsx)(A_,Object.assign({id:"lang-setting-popup-list",onKeyDown:v,role:"listbox","aria-labelledby":hc},{children:a.map((({value:e,label:t},i)=>(0,u.jsx)(D_,Object.assign({active:n===e||i===m,tabIndex:0,onClick:c(e),onKeyDown:p(e),role:"option"},{children:t}),e)))}),void 0)]},void 0)};var R_=i(79428),B_=i(21666);const N_=(0,je.Z)("ul",{target:"exws2ct0"})((({theme:e})=>(0,Xe.GI)({theme:e,typography:"P2",fontWeight:"semiBold",fontFamily:"Proxima"})),{padding:"8px 0",margin:0,minWidth:"223px",listStyle:"none"},"label:UlPopupContainer;"),W_=(0,je.Z)("li",{target:"exws2ct1"})((({theme:{colors:e},withBorder:t,needPadding:i})=>[{color:e.TextPrimary,padding:i?"10px 8px 10px 16px":0,":hover":{background:e.BGView},display:"flex",justifyContent:"space-between"},t?{borderTop:`1px solid ${e.LineSecondary}`}:null]),"label:LiItemWrapper;"),U_={display:"flex",whiteSpace:"nowrap",flexDirection:"row",width:"100%",alignItems:"center",":hover":{textDecoration:"none"}},q_=e=>Object.assign(Object.assign({},U_),{color:e.colors.TextPrimary,":hover, :active, :link, :visited":{textDecoration:"none",color:e.colors.TextPrimary}}),z_=(0,je.Z)(ea.v,{target:"exws2ct2"})((({theme:e})=>q_(e)),"label:StyledLinkItem;"),$_=(0,je.Z)(wa.D,{target:"exws2ct3"})((({theme:e})=>q_(e)),"label:StyledUserLink;"),H_=(0,je.Z)("div",{target:"exws2ct4"})((({theme:e})=>q_(e)),"label:DivSettingItem;"),Z_=(0,je.Z)("i",{target:"exws2ct5"})((({theme:{colors:e,direction:t}})=>[{width:"8px",height:"8px",borderRadius:"50%",background:e.Primary},(0,Xe.YJ)({direction:t,marginStart:"8px"})]),"label:INewIcon;");var V_;Z_.defaultProps=Object.assign(Object.assign({},Z_.defaultProps),{"data-e2e":"red-dot"}),function(e){e[e.Main=0]="Main",e[e.Language=1]="Language"}(V_||(V_={}));const G_=function({Icon:e,text:t,href:i,target:o,renderLink:n,withBorder:a,hasNew:s,forceSSR:r=!1,e2eTag:l,onClick:d,onKeyDown:c,nativeFocusable:p=Boolean(n)||Boolean(i),isNativeComposite:h=!1,ariaLabel:m,children:_,style:v}){const y=(0,St.Q)(),{direction:b}=(0,g.u)(),f=function(e){const t=(0,Xe.YJ)({direction:e,marginEnd:"8px"});return(0,B_.iv)([t,{width:"20px",height:"20px",flex:"0 0 20px"}])}(b),x=(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(e,{className:f},void 0),(0,u.jsx)("span",{children:y(t)},void 0),s&&(0,u.jsx)(Z_,{},void 0)]},void 0),w=(0,de.useCallback)((e=>{32===e.keyCode&&!h&&e.preventDefault(),null==c||c(e)}),[c]);return(0,u.jsxs)(W_,Object.assign({withBorder:a,"data-e2e":l,onClick:d,onKeyDown:w,tabIndex:p?void 0:0,needPadding:!p||h,role:"option","aria-label":m},{children:[n?n(x):i?(0,u.jsx)(z_,Object.assign({forceSSR:r,to:null!=i?i:"#",target:null!=o?o:"_self",onKeyDown:w,style:v},{children:x}),void 0):(0,u.jsx)(H_,{children:x},void 0),_]}),void 0)},Q_="series-red-dot",J_={padding:"10px 8px 10px 16px"},Y_=(0,de.memo)((function({active:e,margin:t=-17,e2eTag:i,onKeyDown:o,onBlur:n}){var a,s,r,l,d,c,p,h;const{direction:m}=(0,g.u)(),_=(0,St.Q)(),{pathname:v,search:y}=(0,ue.TH)(),b=(0,se.qj)($n),f=(0,ue.k6)(),x=zo(),{switchedType:w}=(0,se.mp)(v_.Rt,{selector:e=>({switchedType:e.switchedType}),dependencies:[]}),k=(0,Ze.fz)(Yh),S=(0,Qe.Lh)((()=>["user","language","abTestVersion","region"]),[]),C=(0,Je.h)((()=>["searchVideoForLoggedin","studioDownloadEntrance","liveStudioEnable","liveAnchorEntrance"]),[]),{isInVideoFeedRedesign:j}=(0,Wo.y7)(),{isVideoDetailExperiment:T}=(0,Wo.iA)(),I=j||T,P=(0,se.qj)(jo.D),O=(0,de.useCallback)((()=>{j_.C.handleClickGetApp({enter_method:"under_profile_icon_button"}),P.setIsModalShow(!0)}),[P]),L=(0,de.useCallback)((e=>{13===e.keyCode&&O()}),[O]),M=(0,de.useMemo)((()=>{var e,t;return(null!==(t=null===(e=N.tF.find((({value:e})=>e===(null==S?void 0:S.language))))||void 0===e?void 0:e.label)&&void 0!==t?t:"Language").replace(/[(（].+?$/,"")}),[null==S?void 0:S.language]),E=null==S?void 0:S.user,A=(0,de.useMemo)((()=>v===qo.$J.studioDownload),[v]),D=Boolean(null===(a=null==C?void 0:C.liveAnchorEntrance)||void 0===a?void 0:a.liveCenter),F=Boolean(null===(s=null==C?void 0:C.liveAnchorEntrance)||void 0===s?void 0:s.creatorHub),R=E?"portrait":"more",B=(0,de.useMemo)((()=>Sn(v)),[v]),[W,U]=(0,se.b7)(fc,{selector:e=>{var t;return null!==(t=e.redDot)&&void 0!==t?t:[]},dependencies:[]});(0,de.useEffect)((()=>{var e;(null===(e=null==S?void 0:S.user)||void 0===e?void 0:e.uid)&&!x&&b.getCreateRoomInfo({})}),[b,null===(r=null==S?void 0:S.user)||void 0===r?void 0:r.uid,x]),(0,de.useEffect)((()=>{var e,t;D&&(t={anchor_id:null===(e=null==S?void 0:S.user)||void 0===e?void 0:e.uid},Ji.W.event("livesdk_anchor_live_center_entrance_show",{anchor_id:t.anchor_id,enter_from:"profile_hover",app_name:"webapp"}))}),[D,null===(l=null==S?void 0:S.user)||void 0===l?void 0:l.uid]);const[q,z]=(0,de.useState)(!1),{keyboardMenuItem:$}=(({setShowKeyboardShortcut:e})=>{const t=(0,de.useCallback)((()=>{e(!0),ba.W.handleEnterKeyboardShortcut(),xl.u8.setItem("hasCloseKeyboardShortcut",!0)}),[e]),i=(0,de.useCallback)((e=>{13===e.keyCode&&t()}),[t]);return{keyboardMenuItem:(0,u.jsx)(G_,{Icon:R_.Z,text:"desktop_kb_shortcuts_menu",href:null,onClick:t,onKeyDown:i,e2eTag:"keyboard-shortcut-entrance"},void 0)}})({setShowKeyboardShortcut:z}),H=(0,se.mp)(Io.e,{selector:e=>e.hasNewFeedbackReply,dependencies:[]}),Z=(0,de.useCallback)((()=>{T_.e.handleEnterFeedback(H?"history":"new")}),[H]),V=H?"/feedback/report":"/feedback",G=(0,de.useCallback)((e=>{13===e.keyCode&&Z()}),[Z]),Q=(0,xp.e)(),{isFavoriteV2:J,isFavoriteV3:Y}=(0,Wo.iS)(),K=(0,Ep.ot)({pathname:(0,Ki.yl)({uniqueId:null!==(d=null==E?void 0:E.uniqueId)&&void 0!==d?d:"",secUid:null!==(c=null==E?void 0:E.secUid)&&void 0!==c?c:""})}),X=(0,de.useCallback)((e=>{lc.d.handleClickEntrance(),lc.d.handleEnterFavourite("click_my_favourite_entrance"),Q(e,{href:K,state:{isJumpToFavorite:!0},shouldUsePush:!0})}),[Q,K]),ee=(0,de.useCallback)((e=>{13===e.keyCode&&X(e)}),[X]),te=(0,de.useCallback)((()=>{ba.W.handleEnterSet({enter_method:"top_bar"})}),[]),ie=(0,de.useCallback)((e=>{13===e.keyCode&&te()}),[te]),oe=(0,de.useCallback)((()=>{z(!1),xl.u8.setItem("hasCloseKeyboardShortcut",!0)}),[]),[ne,ae]=(0,de.useState)(0),[re,ce]=(0,de.useState)(),pe=(0,de.useCallback)((e=>{ce(e)}),[]);(0,de.useEffect)((()=>{e?Sc.handleDarkModeShow():ae(0)}),[e]);const he=(0,de.useCallback)((()=>{fd({enter_method:"top_bar"}),ae(1),pe(hc)}),[pe]),me=(0,de.useCallback)((e=>{var t;13===e.keyCode&&(he(),null===(t=document.querySelector("#header-setting-popup-list"))||void 0===t||t.focus())}),[he]),_e=(0,de.useCallback)((()=>{(0,To.e8)(ge.uW)}),[]),ve=(0,de.useCallback)((()=>{ae(0),ce(void 0)}),[]),ye=(0,de.useCallback)((e=>{var t;13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),e.stopPropagation(),ve(),null===(t=document.querySelector("#header-setting-popup-list"))||void 0===t||t.focus())}),[ve]),{value:be,toggle:xe}=(0,de.useContext)(fe.hb),we=(0,Ze.fz)(I_.ec);(0,de.useEffect)((()=>{we.setIsDarkMode(be)}),[we,be]);const ke=(0,de.useCallback)((e=>{Sc.handleDarkModeClick(),xe(e),le.Z.set(ge.u7,e?"dark":"light",{secure:!0,expires:300,domain:"www.tiktok.com"})}),[xe]),Se=(0,de.useMemo)((()=>_(be?"accessibilityLabels_settings_darkModeOn":"accessibilityLabels_settings_darkModeOff")),[_,be]),je="ltr"===m?"bottomRight":"bottomLeft",Te=(0,de.useCallback)((e=>E?(0,u.jsx)($_,Object.assign({secUid:E.secUid,uniqueId:E.uniqueId,shouldStopPropagation:!1,reportTea:!1,teaParams:{to_user_id:E.uid},style:J_},{children:e}),void 0):null),[E]),Ie=(0,de.useCallback)((()=>{ba.W.handleEnterProfile({enter_method:"top_bar"})}),[]),Pe=(0,de.useCallback)((e=>{13===e.keyCode&&Ie()}),[Ie]),Oe=(0,de.useCallback)((()=>{dc.F.handleClickAnalyticsButton()}),[]),Le=(0,de.useCallback)((e=>{13===e.keyCode&&Oe()}),[Oe]),Me=(0,de.useCallback)((()=>{window.location.href=`${qo.$J.studioDownload}?enter_from=profile`}),[]),Ee=(0,de.useCallback)((e=>{13===e.keyCode&&Me()}),[Me]),Ae=(0,de.useCallback)((()=>{-1!==W.indexOf(2)&&U.updateRedDot({type:2,redirect:`${location.origin}/business-suite`}),ba.W.handleEnterBusiness()}),[W,U]),De=(0,de.useCallback)((e=>{13===e.keyCode&&Ae()}),[Ae]),[Fe,Be]=(0,se.b7)(Wm);(0,de.useEffect)((()=>{var e;(null==S?void 0:S.user)&&Be.fetchPermission({user:null==S?void 0:S.user,region:null!==(e=null==S?void 0:S.region)&&void 0!==e?e:""})}),[S,Be]);const Ne=Fe.userState.showEntry,We=(0,He.N8)(null==S?void 0:S.abTestVersion,"expose_recharge_entry_pc"),Ue=Ne&&!B&&(void 0===We||"v1"===We),[qe,ze]=(0,se.b7)(C_);(0,de.useEffect)((()=>{var e;(null==S?void 0:S.user)&&ze.getSubPermissionInfo({sec_anchor_id:null===(e=null==S?void 0:S.user)||void 0===e?void 0:e.secUid,need_current_state:!0})}),[ze,S]);const $e=(null==C?void 0:C.searchVideoForLoggedin)&&[Re.SN.searchHome(),Re.SN.searchVideo()].includes(v)||[Re.SN.messages()].includes(v),Ve=(0,wn.stringify)(Dl()((0,wn.parse)(y),"q","t")),Ge=Ve?`?${Ve}`:"",Ye=`https://www.tiktok.com${Re.SN.foryou()}${Ge}`,Ke=`/logout?redirect_url=${encodeURIComponent($e?Ye:"undefined"==typeof window?"":(0,pt.AY)())}`,Xe=(0,de.useCallback)((()=>{k.handleLiveWebGetCoinShow({show_page:"setting",is_web_recharged_before:Fe.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:"webapp",style:"icon_and_text"})}),[k,Fe.transactionHistory.isWebRechargedBefore]);(0,de.useEffect)((()=>{Ue&&Xe()}),[Ue,Xe]);const et=(0,de.useCallback)((()=>{k.handleLiveWebGetCoinClick({show_page:"setting",is_web_recharged_before:Fe.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:"webapp",style:"icon_and_text"})}),[k,Fe.transactionHistory.isWebRechargedBefore]),tt=(0,de.useCallback)((()=>{et(),f.push(`${Kh.O5.coin}?enter_from=web_main_nav`)}),[et,f]),it=(0,de.useCallback)((e=>{13===e.keyCode&&tt()}),[tt]),ot=(0,de.useMemo)((()=>!xl.iv.getItem(Q_)||(null==E?void 0:E.hasCollectionsRedDot)),[null==E?void 0:E.hasCollectionsRedDot]),nt=(0,de.useCallback)((()=>{Ji.W.event("enter_collections_page",{enterMethod:"top_bar"}),xl.iv.setItem(Q_,!0)}),[]),at=(0,de.useCallback)((e=>{13===e.keyCode&&nt()}),[nt]),st=(0,de.useCallback)((e=>(0,u.jsx)(f_,Object.assign({},e),void 0)),[]),rt=Ce(v),lt=(0,de.useCallback)((e=>{if(9===e.keyCode){if(!e.target)return;setTimeout((()=>{var e;try{const t=document.querySelector("#header-setting-popup-list");(null===(e=Array.from(null==t?void 0:t.querySelectorAll("*")))||void 0===e?void 0:e.includes(document.activeElement))||null==n||n()}catch(e){console.error(e)}}),0)}null==o||o(e)}),[n,o]),dt="BR"===(null===(p=null==S?void 0:S.user)||void 0===p?void 0:p.storeRegion),ct=null!==(h=(0,He.N8)(null==S?void 0:S.abTestVersion,"creator_center_connect"))&&void 0!==h?h:"v1",ut=dt&&"v1"!==ct?"/creator-center/analytics/overview/":"/analytics",gt=dt&&"v3"===ct?"_target":"_self",{colors:ht}=(0,g.u)();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(or.G,Object.assign({backgroundColor:ht.BGSecondary,placement:je,active:e,arrowMargin:15,margin:t,id:gc,onKeyDown:lt,ariaLabelledBy:re},{children:(()=>{var e,t,o;switch(ne){case 0:return(0,u.jsxs)(N_,Object.assign({"data-e2e":i,id:gc,role:"listbox"},{children:[E&&(0,u.jsx)(G_,{renderLink:Te,onClick:Ie,onKeyDown:Pe,Icon:n_.Z,text:"View profile",href:null,e2eTag:"profile-info"},void 0),J&&E&&(0,u.jsx)(G_,{onClick:X,onKeyDown:ee,Icon:a_.Z,text:"sortbyvv_profile_tab_text_favorites",href:null},void 0),Ue&&(0,u.jsx)(G_,{Icon:Jh.Z,text:"WebApp_coin_recharge_1",href:"/coin?enter_from=web_main_nav",forceSSR:!0,e2eTag:"recharge-entrance",onClick:tt,onKeyDown:it,style:J_},void 0),Y&&E&&(0,u.jsx)(G_,{onClick:X,onKeyDown:ee,Icon:a_.Z,text:"sortbyvv_profile_tab_text_favorites",href:null},void 0),Boolean(null==E?void 0:E.hasCollectionsAccess)&&(0,u.jsx)(G_,{Icon:st,text:"tiktok_series_webapp_option",href:"/series",forceSSR:!0,e2eTag:"tiktok-series-entrance",hasNew:ot,onClick:nt,onKeyDown:at,style:J_},void 0),Boolean((null==E?void 0:E.analyticsOn)&&!(null===(e=E.proAccountInfo)||void 0===e?void 0:e.businessSuiteEntrance))&&(0,u.jsx)(G_,{Icon:s_.Z,text:"view_analytics",forceSSR:!0,href:ut,target:gt,e2eTag:"analytics-entrance",onClick:Oe,onKeyDown:Le,style:J_},void 0),!A&&(null===(t=null==C?void 0:C.liveAnchorEntrance)||void 0===t?void 0:t.liveStudio)&&(0,u.jsx)(G_,{Icon:r_.Z,text:"ls_live_studio",forceSSR:!0,href:null,e2eTag:"live-studio-entrance",onClick:Me,onKeyDown:Ee},void 0),(null===(o=null==E?void 0:E.proAccountInfo)||void 0===o?void 0:o.businessSuiteEntrance)&&"personal_account"!==w&&(0,u.jsx)(G_,{Icon:l_.Z,text:"web_business_suite_entry",href:-1!==W.indexOf(2)?"":"/business-suite",forceSSR:!0,hasNew:-1!==W.indexOf(2),onClick:Ae,onKeyDown:De,e2eTag:"business-entrance",style:J_},void 0),D&&(0,u.jsx)(G_,{Icon:d_.Z,text:"live_center_title",href:`${Er}?enter_from=profile_hover&lang=${null==S?void 0:S.language}`,forceSSR:!0,e2eTag:"live-center",style:J_},void 0),F&&(0,u.jsx)(G_,{Icon:c_.Z,text:"live_creator_hub_name",href:`https://www.tiktok.com/live/creators?enter_from=${R}&lang=${null==S?void 0:S.language}&region=${null==S?void 0:S.region}`,forceSSR:!0,e2eTag:"live-creator-hub",style:J_},void 0),E&&(0,u.jsx)(G_,{Icon:u_.Z,text:"settings",href:"/setting",onClick:te,onKeyDown:ie,forceSSR:!0,e2eTag:"settings-entrance",style:J_},void 0),(0,u.jsx)(G_,{Icon:p_.Z,text:M,href:null,onClick:he,onKeyDown:me,e2eTag:"language-select",ariaLabel:_("accessibilityLabels_settings_language",{language:M})},void 0),(0,u.jsx)(G_,{Icon:g_.Z,text:"Feedback and help",href:V,onClick:Z,onKeyDown:G,hasNew:H,forceSSR:!0,e2eTag:"feedback-entrance",style:J_},void 0),$,rt&&(0,u.jsx)(G_,Object.assign({Icon:h_.Z,text:"pc_web_dark_mode",href:null,forceSSR:!0,nativeFocusable:!0,isNativeComposite:!0},{children:(0,u.jsx)(P_.r,{checked:be,onChange:ke,ariaLabel:Se},void 0)}),void 0),I&&(0,u.jsx)(G_,{onClick:O,onKeyDown:L,Icon:m_.Z,text:"get_app",href:null,forceSSR:!0},void 0),E&&(0,u.jsx)(G_,{withBorder:!0,Icon:__.Z,text:"Log out",onClick:_e,forceSSR:!0,href:Ke,e2eTag:"logout-entrance",style:J_},void 0)]}),void 0);case 1:return(0,u.jsx)(F_,{onBack:ve,onKeyDown:ye,onBlur:n},void 0);default:return null}})()}),void 0),(0,u.jsx)(di.u_,Object.assign({visible:q,onClose:oe,maskCloseable:!1,cancelMouseLeaveBubble:!0},{children:(0,u.jsx)(y_.e,{onClose:oe,isModal:!0},void 0)}),void 0)]},void 0)}));var K_=i(97452);const X_=(0,je.Z)("div",{target:"e13wiwn60"})({display:"flex",flexDirection:"row",alignItems:"center",position:"relative"},"label:DivHeaderRightContainer;"),ev=(0,je.Z)(ei.W,{target:"e13wiwn61"})((({theme:e,theme:{direction:t}})=>[(0,Xe.GI)({theme:e,typography:"P2",fontFamily:"Proxima",fontWeight:"bold"}),(0,Xe.YJ)({direction:t,marginStart:"16px"}),{minWidth:"100px"}]),"label:StyledLoginButton;");ev.defaultProps=Object.assign(Object.assign({},ev.defaultProps),{"data-e2e":"top-login-button"});const tv=(0,je.Z)("div",{target:"e13wiwn62"})((({theme:{direction:e},isLoggedin:t})=>[(0,Xe.YJ)({direction:e,marginStart:t?"23px":"16px",marginEnd:t?"0":"-10px",paddingStart:"5px"}),{alignItems:"center",width:"32px",height:"32px",paddingTop:"5px"}]),"label:DivEhIconContainer;");tv.defaultProps=Object.assign(Object.assign({},tv.defaultProps),{"data-e2e":"eh-header-icon"});const iv=(0,je.Z)("i",{target:"e13wiwn63"})((({theme:{direction:e}})=>(0,Xe.YJ)({direction:e,marginStart:"16px"})),{position:"relative",cursor:"pointer",fontStyle:"normal",padding:"0 4px"},"label:IMoreIconWrapper;");iv.defaultProps=Object.assign(Object.assign({},iv.defaultProps),{"data-e2e":"see-more-icon"});const ov=(0,je.Z)(K_.Z,{target:"e13wiwn64"})({width:"20px",height:"20px",display:"block"},"label:StyledEllipsisVertical;"),nv=(0,je.Z)("i",{target:"e13wiwn65"})((({theme:e})=>[(0,Xe.YJ)({direction:e.direction,right:"unset",left:0}),{position:"absolute",width:"8px",height:"8px",borderRadius:"50%",background:e.colors.Primary,border:`1px solid ${e.colors.ConstTextInverse}`,boxSizing:"content-box",right:0,top:"-4px"}]),"label:IStyledRedDot;");var av;nv.defaultProps=Object.assign(Object.assign({},nv.defaultProps),{"data-e2e":"profile-icon-red"}),function(e){e.ClickEntrance="click_upload_entrance"}(av||(av={}));const sv=e=>{Ji.W.event("click_upload_entrance",e)};var rv=i(6240);const lv=(0,je.Z)("div",{target:"e18d3d940"})((({needMarginLeft:e})=>({marginLeft:e?"16px":"0px",position:"relative",height:"36px","a:hover":[{textDecoration:"none"}],"@media screen and (max-width: 479px)":{display:"none"}})),"label:DivUploadContainer;");lv.defaultProps=Object.assign(Object.assign({},lv.defaultProps),{"data-e2e":"upload-icon"});const dv=(0,je.Z)(ea.v,{target:"e18d3d941"})((({theme:e})=>(0,Xe.GI)({theme:e,typography:"P2",fontWeight:"bold",fontFamily:"Proxima"})),{display:"block",":hover":{textDecoration:"none"}},"label:StyledLinkText;");dv.defaultProps=Object.assign(Object.assign({},dv.defaultProps),{"data-e2e":"upload-icon"});const cv=(0,je.Z)(ea.v,{target:"e18d3d942"})({display:"block"},"label:StyledLink;"),uv=(0,je.Z)("div",{target:"e18d3d943"})((({style:e})=>{var t,i;return{padding:null!==(t=null==e?void 0:e.padding)&&void 0!==t?t:"16px",width:null!==(i=null==e?void 0:e.width)&&void 0!==i?i:"282px",wordBreak:"break-word"}}),"label:DivTipWrapper;"),pv=(0,je.Z)("div",{target:"e18d3d944"})((({theme:{colors:e}})=>({minWidth:"110px",padding:"0 16px",height:"36px",border:"1px solid rgba(22, 24, 35, 0.12)",borderRadius:"2px",display:"flex",alignItems:"center",justifyContent:"center",background:e.BGSecondary2,":hover":{backgroundColor:e.BGView},":target":{backgroundColor:"rgba(22, 24, 35, 0.06)"}})),"label:DivUpload;"),gv=(0,je.Z)(rv.Z,{target:"e18d3d945"})({height:"20px",width:"20px",marginRight:"8px"},"label:StyledPlusIcon;"),hv=(0,je.Z)("span",{target:"e18d3d946"})({fontStyle:"normal",fontWeight:600,fontSize:"16px",lineHeight:"24px",color:"ConstTextInverse2"},"label:SpanUploadText;"),mv=(0,je.Z)("h3",{target:"e18d3d947"})((({theme:e})=>(0,Xe.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{marginBottom:"4px"},"label:H3TipTitle;"),_v=(0,je.Z)("h3",{target:"e18d3d948"})((({theme:e})=>(0,Xe.GI)({theme:e,typography:"P3",color:"ConstTextInverse",fontWeight:"semiBold",textAlign:"center",lineHeight:"22px"})),"label:H3TipSmallTitle;"),vv=(0,je.Z)("p",{target:"e18d3d949"})((({theme:e})=>(0,Xe.GI)({theme:e,typography:"P3",color:"ConstTextInverse"})),"label:PTipDesc;"),yv=(0,je.Z)("div",{target:"e18d3d9410"})({display:"flex",justifyContent:"flex-end"},"label:DivButtonWrapper;"),bv=(0,je.Z)("button",{target:"e18d3d9411"})(Xe.Ph,(({theme:e})=>(0,Xe.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{cursor:"pointer"},"label:ButtonOk;"),fv=(0,je.Z)(bv,{target:"e18d3d9412"})({width:"100%",height:"36px",borderRadius:"4px",backgroundColor:"rgba(255, 255, 255, .12)",marginTop:"8px"},"label:StyledButtonUpload;"),xv=function({needMarginLeft:e}){var t,i,o,n,a;const s=(0,St.Q)(),{colors:r,direction:l}=(0,g.u)(),[{tooltipPriority:d,uploadTooltipType:c},p]=(0,se.b7)(fc),h=(0,Qe.Lh)((()=>["user"]),[]),m=null!==(i=null===(t=null==h?void 0:h.user)||void 0===t?void 0:t.longVideoMinutes)&&void 0!==i?i:0,[_,v]=(0,de.useState)(!1),{lang:y}=(0,se.mp)(Q.G,{selector:e=>({lang:e.lang}),dependencies:[]}),b=(0,de.useCallback)((()=>{p.setTooltipPriority(2),p.postScheduleRecord({ack_type:1})}),[p]),{isInVideoFeedRedesign:f}=(0,Wo.y7)(),x=(0,de.useMemo)((()=>f?{play_mode:"swiper_mode"}:{}),[f]),w=(0,de.useCallback)((()=>{sv(Object.assign({enter_method:"navigation_bar"},x)),Vn({target:"upload",order:1})}),[x]);(0,de.useEffect)((()=>{1===d?setTimeout((()=>{v(!0)}),1e3):v(!1)}),[d]),(0,de.useEffect)((()=>{if(_){switch(c){case 1:xl.iv.setItem(_c,!0);break;case 2:xl.iv.setItem("upload-podcast",!0)}setTimeout((()=>{p.setTooltipPriority(2)}),15e3)}}),[_,c,p]);const k=(0,de.useCallback)((()=>{p.setTooltipPriority(2),window.location.href=`https://www.tiktok.com/upload?lang=${y}`}),[p,y]),S=(0,u.jsxs)(pv,{children:[(0,u.jsx)(gv,{},void 0),(0,u.jsx)(hv,{children:s("Upload")},void 0)]},void 0),C="BR"===(null===(o=null==h?void 0:h.user)||void 0===o?void 0:o.storeRegion),j=null===(n=(0,Qe.Lh)((()=>["abTestVersion"]),[]))||void 0===n?void 0:n.abTestVersion,T=null!==(a=(0,He.N8)(j,"creator_center_connect"))&&void 0!==a?a:"v1",I=C&&"v1"!==T?"/creator-center/upload":`/upload?lang=${y}`,P=C&&"v3"===T?"_blank":"_self";let O,L,M;switch(c){case 0:O=(0,u.jsx)(mv,{children:s("scheduler_welcome_tooltip_title")},void 0),L=s("scheduler_welcome_tooltip_des"),M=(0,u.jsx)(yv,{children:(0,u.jsx)(bv,Object.assign({onClick:b},{children:s("OK")}),void 0)},void 0);break;case 1:O=(0,u.jsx)(mv,{children:s("new_video_length_tooltip_header")},void 0),L=s("new_feature_guidance_text",{num:m}).replace(/%\w/,String(m)),M=(0,u.jsx)(fv,Object.assign({onClick:k},{children:s("new_feature_guidance_Upload")}),void 0);break;case 2:O=(0,u.jsx)(_v,{children:s("Link your podcast")},void 0)}const E=2===c?"58px":"16px",A="ltr"===l?"bottomRight":"bottomLeft";return(0,u.jsxs)(lv,Object.assign({needMarginLeft:e},{children:[(0,u.jsx)(cv,Object.assign({forceSSR:!0,to:I,target:P,onClick:w,ariaLabel:s("accessibilityLabels_forYou_nav_upload_btn")},{children:S}),void 0),(0,u.jsx)(or.G,Object.assign({active:_&&Boolean(O),backgroundColor:r.ConstSecondary2,placement:A,arrowMargin:E,margin:"-12px"},{children:(0,u.jsxs)(uv,Object.assign({style:2===c?{width:"136px",padding:"12px"}:void 0},{children:[O,(0,u.jsx)(vv,{children:L},void 0),M]}),void 0)}),void 0)]}),void 0)},wv=function(){const e=(0,St.Q)(),t=(0,se.qj)(Ti.r),{isInVideoFeedRedesign:i}=(0,Wo.y7)(),o=(0,de.useMemo)((()=>i?{play_mode:"swiper_mode"}:{}),[i]),n=(0,de.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),sv(Object.assign({enter_method:"navigation_bar"},o)),t.openModal({query:{enter_method:"click_navigation_bar",redirect_url:"https://www.tiktok.com/upload/"}})}),[o,t]);return(0,u.jsx)("div",{children:(0,u.jsx)(dv,Object.assign({forceSSR:!0,to:"/upload",onClick:n,ariaLabel:e("accessibilityLabels_forYou_nav_upload_btn")},{children:(0,u.jsxs)(pv,{children:[(0,u.jsx)(gv,{},void 0),(0,u.jsx)(hv,{children:e("Upload")},void 0)]},void 0)}),void 0)},void 0)},kv=function({alwaysShowRechargeIconAndText:e=!1}){var t,i,o;const n=(0,St.Q)(),{isFavoriteV1:a}=(0,Wo.iS)(),{user:s}=(0,se.mp)(Q.G,{selector:e=>{var t;return{user:null===(t=e.appContext)||void 0===t?void 0:t.user}},dependencies:[]}),[r,l]=(0,de.useState)(!0),{hasNewFeedbackReply:d}=(0,se.mp)(Io.e),c=(0,se.qj)(Ti.r),p=(0,Qe.Lh)((()=>["abTestVersion"]),[]),g=null!==(t=(0,He.N8)(null==p?void 0:p.abTestVersion,"search_video"))&&void 0!==t?t:"v1",{user:h}=null!==(i=(0,Qe.Lh)((()=>["user"]),[]))&&void 0!==i?i:{},m=Boolean(h),[_,v]=(0,se.b7)(fc,{selector:e=>-1!==e.redDot.indexOf(1),dependencies:[]}),y=(0,de.useCallback)(((e=!1)=>()=>{c.openModal({closeable:!0,isSignup:e,query:{enter_method:"click_top_bar",redirect_url:(0,pt.AY)(),type:"general_search"!==Ji.W.commonParams.page_name&&"search_video"!==Ji.W.commonParams.page_name&&"search_user"!==Ji.W.commonParams.page_name||"v3"!==g&&"v4"!==g||m?"":"loginsearchmore"}})}),[c,g,m]),{active:b,handleMouseEnter:f,handleMouseLeave:x}=(0,ir.R)(500),w=(0,He.N8)(null==p?void 0:p.abTestVersion,"expose_recharge_entry_pc"),k=void 0!==w&&"v2"===w,S=k&&r,C="v3"===(null!==(o=(0,He.N8)(null==p?void 0:p.abTestVersion,"studio_web_eh_entrance"))&&void 0!==o?o:"v1"),j="https://effecthouse.tiktok.com/?utm_source=tiktok_webapp_main&utm_content=header";(0,de.useEffect)((()=>{C&&Gn({enter_method:"icon"})}),[C]),(0,de.useEffect)((()=>{r&&k&&"HAS_ENTERED_VALUE"===(0,To.le)("HAS_ENTERED_KEY")&&l(!1)}),[r,k]),(0,de.useEffect)((()=>{b&&(!a&&lc.d.handleShowEntrance(),dc.F.handleProfileHoveShow())}),[a,b]);const T=(0,de.useCallback)((()=>{_&&v.updateRedDot({type:1}),f()}),[_,v,f]),I=(0,de.useCallback)((e=>{const t=document.querySelector("#header-more-menu-icon"),i=e.target===t;13===e.keyCode||32===e.keyCode?(e.stopPropagation(),i&&(e.preventDefault(),T())):9===e.keyCode&&e.shiftKey&&b&&i&&x()}),[b,T,x]),P=(0,de.useCallback)((e=>{27===e.keyCode&&(e.preventDefault(),e.stopPropagation(),x())}),[x]),O=(0,de.useCallback)((()=>{Qn({enter_method:"click_icon"})}),[]);if(!s)return(0,u.jsxs)(X_,{children:[(0,u.jsx)(wv,{},void 0),(0,u.jsx)(ev,Object.assign({id:"header-login-button",size:"medium",buttonTheme:"primary",onClick:y(!1)},{children:n("Log In")}),void 0),C&&(0,u.jsx)(tv,Object.assign({isLoggedin:!1},{children:(0,u.jsx)(fl.u,Object.assign({overlay:n("webapp_ttehEntrance_createEffects"),placement:"bottom"},{children:(0,u.jsx)(ea.v,Object.assign({forceSSR:!0,to:j,target:"_blank",onClick:O,ariaLabel:n("accessibilityLabels_nav_effects_btn")},{children:(0,u.jsx)(uc,{height:"22px",width:"22px"},void 0)}),j)}),void 0)}),void 0),(0,u.jsxs)(iv,Object.assign({id:pc,tabIndex:0,onMouseEnter:T,onMouseLeave:x,onKeyDown:I,role:"button","aria-label":n("accessibilityLabels_forYou_nav_settings_btn"),"aria-expanded":b,"aria-controls":b?gc:""},{children:[(0,u.jsx)(ov,{},void 0),(0,u.jsx)(Y_,{active:b,e2eTag:"see-more-popup",margin:-13,onKeyDown:P,onBlur:x},void 0)]}),void 0),(0,u.jsx)(Oc,{userPopupActive:b},void 0)]},void 0);const{uniqueId:L,secUid:M}=s;return(0,u.jsxs)(X_,{children:[!S&&(0,u.jsx)(xv,{},void 0),C&&(0,u.jsx)(tv,Object.assign({isLoggedin:!0},{children:(0,u.jsx)(fl.u,Object.assign({overlay:n("webapp_ttehEntrance_createEffects"),placement:"bottom"},{children:(0,u.jsx)(ea.v,Object.assign({forceSSR:!0,to:j,target:"_blank",onClick:O,ariaLabel:n("accessibilityLabels_nav_effects_btn")},{children:(0,u.jsx)(uc,{height:"22px",width:"22px"},void 0)}),j)}),void 0)}),void 0),(null==s?void 0:s.hasIMPermission)&&S&&(0,u.jsx)(rc,{removeMarginLeft:!0},void 0),(null==s?void 0:s.hasIMPermission)&&!S&&(0,u.jsx)(rc,{},void 0),(0,u.jsx)(Bh,{},void 0),S&&(0,u.jsx)(xv,{needMarginLeft:!0},void 0),(0,u.jsx)(Xm,{alwaysShowRechargeIconAndText:e},void 0),(0,u.jsx)(Nh,{children:(0,u.jsxs)(wc,Object.assign({id:pc,onMouseEnter:T,onMouseLeave:x,onKeyDown:I,role:"button",ariaLabel:n("accessibilityLabels_forYou_nav_settings_btn"),ariaExpanded:b},{children:[(d||_)&&(0,u.jsx)(nv,{className:"red-dot"},void 0),(0,u.jsx)(Y_,{margin:-12,active:b,e2eTag:"profile-popup",onKeyDown:P,onBlur:x},void 0)]}),void 0)},void 0),(0,u.jsx)(Vh,{uniqueId:L,secUid:M,userPopupActive:b},void 0),(0,u.jsx)(Oc,{userPopupActive:b},void 0),(null==s?void 0:s.hasCollectionsAccess)&&(0,u.jsx)(o_,{userPopupActive:b},void 0)]},void 0)};var Sv,Cv;!function(e){e.Show="browser_push_notifications_show",e.Granted="browser_push_notifications_allow",e.Denied="browser_push_notifications_block",e.Default="browser_push_notifications_close"}(Sv||(Sv={})),function(e){e.Show="guide_permission_popup_show",e.Yes="guide_permission_popup_turn_on",e.No="guide_permission_popup_cancel"}(Cv||(Cv={}));var jv,Tv=i(15608),Iv=i(96980),Pv=i(18791);function Ov(){return e=this,t=void 0,n=function*(){const{FCM:e}=yield Promise.all([i.e(7954),i.e(5079),i.e(9602),i.e(9026),i.e(1565)]).then(i.bind(i,22343));return e},new((o=void 0)||(o=Promise))((function(i,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function r(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}l((n=n.apply(e,t||[])).next())}));var e,t,o,n}!function(e){e.GrantedSuccess="GRANTED_SUCCESS",e.GrantedFailed="GRANTED_FAILED",e.Denied="DENIED",e.Default="DEFAULT",e.Failed="FAILED"}(jv||(jv={}));const Lv="web-push-permission";let Mv=class{constructor(e){this.security=e}initFCM(e,t){const i={firebaseConfig:{apiKey:"AIzaSyDHGqRfibWT6DffZBTYlhXfTQHAP_ri1MI",appId:"1:943363548815:web:f9a03b69b49a48fb5c72fa",authDomain:"tiktok-webapp.firebaseapp.com",databaseURL:"https://tiktok-webapp.firebaseio.com",measurementId:"G-WTKRD0C8TF",messagingSenderId:"943363548815",projectId:"tiktok-webapp",storageBucket:"tiktok-webapp.appspot.com"},messagingConfig:{vapidKey:"BAxZo-Q87DGZeDuCG33n7l9hsdXb2Zwf3-Cc9_NPuaNZvqMCHhCtCm-5kivnFwhVef1N06SoKbWlJBpZU0jcfa4",onMessageShow:!0,requestPermission:!1},commonParameter:{aid:1988,sender_id:17,app_region:e,app_language:t,version_code:"1.0.0"}};return(0,Tv.D)([Ov(),this.security.init$.pipe((0,Iv.q)(1))]).pipe((0,$o.z)((([e])=>{const t=new e(i.firebaseConfig,i.messagingConfig,i.commonParameter);return(0,n.D)(t.requestPermission().then((e=>{switch(e){case"granted":return t.onTokenRefresh().then((()=>"GRANTED_SUCCESS")).catch((()=>"GRANTED_FAILED"));case"denied":return"DENIED";default:return"DEFAULT"}})))})),(0,Zo.K)((()=>(console.warn("fcm init failed"),(0,Ho.of)("FAILED")))))}getPushPermissionAllowed(){var e;try{const t=null!==(e=xl.iv.getItem(Lv))&&void 0!==e?e:[],i=Date.now();return 0===t.length?(t.unshift(i),xl.iv.setItem(Lv,t),(0,Ho.of)(!0)):i-t[0]<864e5?(0,Ho.of)(!1):t.length<3?(t.unshift(i),xl.iv.setItem(Lv,t),(0,Ho.of)(!0)):i-t[2]<2592e6?(0,Ho.of)(!1):(t.unshift(i),xl.iv.setItem(Lv,t.slice(0,3)),(0,Ho.of)(!0))}catch(e){return(0,Ho.of)(!1)}}};Mv=(0,b.__decorate)([(0,x.G)(),(0,b.__metadata)("design:paramtypes",[Pv.$h])],Mv);let Ev=class extends tt.D{constructor(e){super(),this.service=e,this.defaultState={pushPermissionOn:!1}}setPushPermissionOn(e,t){e.pushPermissionOn=t}initFCM(e){return e.pipe((0,pn.b)((({showMethod:e})=>{e&&(e=>{Ji.W.event("browser_push_notifications_show",{show_method:e})})(e)})),(0,$o.z)((({region:e,lang:t,showMethod:i,callback:o})=>this.service.initFCM(e,t).pipe((0,pn.b)((e=>{if(null==o||o(e),i)switch(e){case"GRANTED_SUCCESS":case"GRANTED_FAILED":(e=>{Ji.W.event("browser_push_notifications_allow",{show_method:e})})(i);break;case"DENIED":(e=>{Ji.W.event("browser_push_notifications_block",{show_method:e})})(i);break;case"DEFAULT":(e=>{Ji.W.event("browser_push_notifications_close",{show_method:e})})(i)}})),(0,at.U)((()=>this.noop()))))))}judgeIfPush(e){return e.pipe((0,$o.z)((({region:e,lang:t})=>this.service.getPushPermissionAllowed().pipe((0,at.U)((i=>i?this.getActions().initFCM({region:e,lang:t,showMethod:"direct_ask_notification_permission"}):this.noop())),(0,Zo.K)((()=>(0,Ho.of)(this.noop())))))))}};(0,b.__decorate)([(0,it.lF)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[Object,Boolean]),(0,b.__metadata)("design:returntype",void 0)],Ev.prototype,"setPushPermissionOn",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],Ev.prototype,"initFCM",null),(0,b.__decorate)([(0,it.Qm)(),(0,b.__metadata)("design:type",Function),(0,b.__metadata)("design:paramtypes",[nt.y]),(0,b.__metadata)("design:returntype",void 0)],Ev.prototype,"judgeIfPush",null),Ev=(0,b.__decorate)([(0,ot.Y)("Push"),(0,b.__metadata)("design:paramtypes",[Mv])],Ev);var Av=i(21985),Dv=i(62246);const Fv=(0,de.memo)((e=>{const{isInVideoFeedRedesign:t}=(0,Wo.y7)(),{isDetailPage:i}=(0,Av.U)(),{isInUILayoutAlignment:o}=(0,Wo.hn)(),{isInHorizontalBoostUI:n}=(0,Wo.yk)(),{isFeedbackPage:a}=(0,Av.W)(),s=(0,Dv.oG)(),{isElectronApp:r,isMacElectronApp:l,isWinElectronApp:d}=(0,No.R)(),c=l?60:d?148:24,p=!a&&(t||i||s||o||n)?Zd:Hd;return(0,u.jsx)(p,Object.assign({},e,{paddingInlineEnd:c,needAfter:r}),void 0)}));var Rv=i(4139);const Bv=(0,Rv.Z)("div",{target:"e1gxxrd20"})((({theme:{colors:e}})=>({position:"absolute",boxSizing:"border-box",width:"400px",padding:"32px",top:"0",left:"50%",transform:"translateX(-50%)",background:e.BGPrimary,boxShadow:"0 2px 12px rgba(0, 0, 0, .12)",borderRadius:"8px",zIndex:2,textAlign:"center"})),"label:DivPushPermissionContainer;"),Nv=(0,Rv.Z)("div",{target:"e1gxxrd21"})((({theme:e})=>(0,Xe.GI)({theme:e,typography:"P0",fontWeight:"bold",fontFamily:"Proxima"})),"label:DivPushPermissionTitle;"),Wv=(0,Rv.Z)("div",{target:"e1gxxrd22"})((({theme:e})=>(0,Xe.GI)({theme:e,typography:"P2",fontFamily:"Proxima"})),(({theme:{colors:e}})=>({margin:"8px 0 24px",color:e.TextPrimary})),"label:DivPushPermissionSubtitle;"),Uv=(0,Rv.Z)("div",{target:"e1gxxrd23"})({display:"flex","flex-direction":"row","justify-content":"space-between","align-items":"center"},"label:DivPushPermissionButtonContainer;"),qv=(0,Rv.Z)(ei.W,{target:"e1gxxrd24"})({"min-width":"164px"},"label:StyledButton;"),zv=function({permissionCallback:e}){const t=(0,St.Q)();(0,de.useEffect)((()=>{Ji.W.event("guide_permission_popup_show")}),[]);const i=(0,de.useCallback)((()=>{e("denied"),Ji.W.event("guide_permission_popup_cancel")}),[e]),o=(0,de.useCallback)((()=>{e("granted"),Ji.W.event("guide_permission_popup_turn_on")}),[e]);return(0,u.jsxs)(Bv,{children:[(0,u.jsx)(Nv,{children:t("push_popup_title")},void 0),(0,u.jsx)(Wv,{children:t("push_popup_content")},void 0),(0,u.jsxs)(Uv,{children:[(0,u.jsx)(qv,Object.assign({buttonTheme:"default",size:"largeNew",onClick:i},{children:t("push_popup_btn1")}),void 0),(0,u.jsx)(qv,Object.assign({buttonTheme:"primary",size:"largeNew",onClick:o},{children:t("push_popup_btn2")}),void 0)]},void 0)]},void 0)},$v=(0,Rv.Z)("div",{target:"e15qqn8h0"})({position:"relative",minWidth:"200px",padding:"0 8px"},(0,Xe.f1)({max:767,style:{display:"none"}}),"label:DivHeaderCenterContainer;"),Hv=(0,Rv.Z)("div",{target:"e15qqn8h1"})({display:"flex",alignItems:"center",minWidth:"300px"},"label:DivHeaderLeftContainer;"),Zv=(0,de.memo)((function({visible:e=!0}){const{isAppContextLoaded:t}=(0,se.mp)(Q.G,{selector:({appContext:e})=>({isAppContextLoaded:Boolean(e)}),dependencies:[]}),{isBizContextLoaded:i,isGrayFilter:o}=(0,se.mp)(pe.r,{selector:({bizContext:e})=>({isBizContextLoaded:Boolean(e),isGrayFilter:null==e?void 0:e.config.isGrayFilter}),dependencies:[]}),n=(0,de.useMemo)((()=>t&&i),[t,i]),[a,s]=(0,de.useState)(0),r=(0,de.useCallback)((({hasModal:e,scrollWidth:t})=>{s(e?t:0)}),[]),{pushPermissionOn:l,permissionCallback:d}=function(){const[{pushPermissionOn:e},t]=(0,se.b7)(Ev),{lang:i,region:o,user:n}=(0,se.mp)(Q.G,{selector:e=>{var t,i,o,n;return{lang:e.lang,region:null!==(i=null===(t=e.appContext)||void 0===t?void 0:t.region)&&void 0!==i?i:"",user:null===(o=e.appContext)||void 0===o?void 0:o.user,abTestVersion:null===(n=e.appContext)||void 0===n?void 0:n.abTestVersion}},dependencies:[]}),a=(0,de.useCallback)((e=>{t.setPushPermissionOn(!1),"granted"===e&&t.initFCM({region:o,lang:i,showMethod:"click_guide_permission_popup_turn_on"})}),[o,i,t]),s=(0,de.useCallback)((()=>{Ov().then((e=>{if(e.isAvailable()&&("US"!==o||n))switch(Notification.permission){case"denied":return;case"granted":t.initFCM({region:o,lang:i});break;default:t.judgeIfPush({region:o,lang:i})}})).catch((()=>{console.warn("load fcm failed")}))}),[o,n,t,i]);return(0,de.useEffect)((()=>{s()}),[s]),{pushPermissionOn:e,permissionCallback:a}}(),{subscribeModalChange:c}=(0,Nl.J)();(0,de.useEffect)((()=>{const e=c(r);return()=>{e()}}),[r,c]);const{value:p}=(0,de.useContext)(fe.hb),{isMacElectronApp:g}=(0,No.R)();return(0,u.jsxs)($d,Object.assign({style:{right:a/2+"px",display:e?"flex":"none"}},{children:[l?(0,u.jsx)(zv,{permissionCallback:d},void 0):null,(0,u.jsxs)(Fv,{children:[(0,u.jsx)(zd,{},void 0),(0,u.jsx)(Hv,{children:!g&&(0,u.jsx)(na,{isGrayFilter:o,isDark:p},void 0)},void 0),(0,u.jsx)($v,{children:(0,u.jsx)(Vd.o,{},void 0)},void 0),n&&(0,u.jsx)(kv,{},void 0)]},void 0)]}),void 0)}));var Vv=i(50482);const Gv=(0,Vv.ZP)({resolved:{},chunkName:()=>"following",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(5881),i.e(9336),i.e(6018),i.e(2146),i.e(3975),i.e(5029),i.e(8674),i.e(9013),i.e(4067),i.e(1853),i.e(528),i.e(492),i.e(966),i.e(9503),i.e(5690),i.e(7736),i.e(2092),i.e(8938),i.e(8844),i.e(6609),i.e(8376),i.e(8457),i.e(4585),i.e(3262),i.e(889),i.e(7974),i.e(2539),i.e(8319),i.e(7039),i.e(8863),i.e(4463),i.e(3175),i.e(5492),i.e(3240),i.e(7189),i.e(5176),i.e(9470),i.e(1601),i.e(6580),i.e(6048),i.e(5733),i.e(3276),i.e(8537),i.e(9959),i.e(6887),i.e(1456),i.e(2209),i.e(8997),i.e(9044),i.e(3239),i.e(556)]).then(i.bind(i,11959)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>11959}),Qv=(0,Vv.ZP)({resolved:{},chunkName:()=>"search",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(5881),i.e(9336),i.e(6018),i.e(2146),i.e(8084),i.e(3975),i.e(5029),i.e(8674),i.e(9013),i.e(4067),i.e(1853),i.e(528),i.e(492),i.e(966),i.e(9503),i.e(5690),i.e(7736),i.e(2092),i.e(8938),i.e(8844),i.e(6609),i.e(8376),i.e(8457),i.e(4585),i.e(3262),i.e(889),i.e(7974),i.e(8319),i.e(7039),i.e(4463),i.e(3175),i.e(5492),i.e(3240),i.e(7189),i.e(5176),i.e(6048),i.e(3276),i.e(3749),i.e(8537),i.e(7198),i.e(6464)]).then(i.bind(i,45883)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>45883}),Jv=(0,Vv.ZP)({resolved:{},chunkName:()=>"user",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(5881),i.e(9336),i.e(6018),i.e(2146),i.e(8084),i.e(9505),i.e(2782),i.e(931),i.e(3585),i.e(8532),i.e(3063),i.e(3975),i.e(5029),i.e(8674),i.e(9013),i.e(4067),i.e(1853),i.e(528),i.e(492),i.e(966),i.e(9503),i.e(5690),i.e(7736),i.e(2092),i.e(8938),i.e(8844),i.e(6609),i.e(8376),i.e(8457),i.e(4585),i.e(3262),i.e(889),i.e(7974),i.e(2222),i.e(2256),i.e(758),i.e(9314),i.e(3757),i.e(6688),i.e(4461),i.e(8100),i.e(1033),i.e(3065),i.e(5469),i.e(7939),i.e(2843),i.e(9155),i.e(5038),i.e(8099),i.e(5538),i.e(4265),i.e(5019),i.e(1874),i.e(4890),i.e(2116),i.e(4296),i.e(4264),i.e(9754),i.e(8992),i.e(8319),i.e(7039),i.e(8863),i.e(4463),i.e(3175),i.e(5492),i.e(3240),i.e(7189),i.e(5176),i.e(9470),i.e(1601),i.e(6580),i.e(6048),i.e(5733),i.e(3276),i.e(3749),i.e(8537),i.e(2535),i.e(7198),i.e(9959),i.e(8933),i.e(3363),i.e(378)]).then(i.bind(i,94595)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>94595}),Yv=(0,Vv.ZP)({resolved:{},chunkName:()=>"challenge",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(5881),i.e(9336),i.e(6018),i.e(2146),i.e(8084),i.e(3975),i.e(5029),i.e(8674),i.e(9013),i.e(4067),i.e(1853),i.e(528),i.e(492),i.e(966),i.e(9503),i.e(5690),i.e(7736),i.e(2092),i.e(8938),i.e(8844),i.e(6609),i.e(8376),i.e(8457),i.e(4585),i.e(3262),i.e(889),i.e(7974),i.e(8319),i.e(7039),i.e(8863),i.e(4463),i.e(3175),i.e(5492),i.e(3240),i.e(7189),i.e(5176),i.e(9470),i.e(1601),i.e(6580),i.e(6048),i.e(5733),i.e(3276),i.e(3749),i.e(8537),i.e(2535),i.e(7198),i.e(9959),i.e(4674),i.e(8722),i.e(3043),i.e(7454)]).then(i.bind(i,1999)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>1999}),Kv=(0,Vv.ZP)({resolved:{},chunkName:()=>"video",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(5881),i.e(9336),i.e(6018),i.e(2146),i.e(9505),i.e(3975),i.e(5029),i.e(8674),i.e(9013),i.e(4067),i.e(1853),i.e(528),i.e(492),i.e(966),i.e(9503),i.e(5690),i.e(7736),i.e(2092),i.e(8938),i.e(8844),i.e(6609),i.e(8376),i.e(8457),i.e(4585),i.e(3262),i.e(889),i.e(2539),i.e(1033),i.e(8319),i.e(7039),i.e(8863),i.e(4463),i.e(3175),i.e(5492),i.e(7189),i.e(5176),i.e(9470),i.e(6580),i.e(6048),i.e(5733),i.e(6887),i.e(2209),i.e(8997),i.e(9044),i.e(88),i.e(6791)]).then(i.bind(i,19165)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>19165}),Xv=(0,Vv.ZP)({resolved:{},chunkName:()=>"playlist",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(5881),i.e(9336),i.e(6018),i.e(2146),i.e(3975),i.e(5029),i.e(8674),i.e(9013),i.e(4067),i.e(1853),i.e(528),i.e(492),i.e(966),i.e(9503),i.e(5690),i.e(7736),i.e(2092),i.e(8938),i.e(8844),i.e(6609),i.e(8376),i.e(8457),i.e(4585),i.e(3262),i.e(889),i.e(7974),i.e(8319),i.e(7039),i.e(8863),i.e(4463),i.e(3175),i.e(5492),i.e(3240),i.e(7189),i.e(9470),i.e(6580),i.e(5733),i.e(2535),i.e(6875),i.e(7449)]).then(i.bind(i,66381)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>66381}),ey=(0,Vv.ZP)({resolved:{},chunkName:()=>"music",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(5881),i.e(9336),i.e(6018),i.e(2146),i.e(8084),i.e(3975),i.e(5029),i.e(8674),i.e(9013),i.e(4067),i.e(1853),i.e(528),i.e(492),i.e(966),i.e(9503),i.e(5690),i.e(7736),i.e(2092),i.e(8938),i.e(8844),i.e(6609),i.e(8376),i.e(8457),i.e(4585),i.e(3262),i.e(889),i.e(7974),i.e(8319),i.e(7039),i.e(8863),i.e(4463),i.e(3175),i.e(5492),i.e(3240),i.e(7189),i.e(5176),i.e(9470),i.e(1601),i.e(6580),i.e(6048),i.e(5733),i.e(3276),i.e(3749),i.e(8537),i.e(2535),i.e(7198),i.e(9959),i.e(4674),i.e(6875),i.e(8722),i.e(4106)]).then(i.bind(i,83730)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>83730}),ty=(0,Vv.ZP)({resolved:{},chunkName:()=>"foryou",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(5881),i.e(9336),i.e(6018),i.e(2146),i.e(3975),i.e(5029),i.e(8674),i.e(9013),i.e(4067),i.e(1853),i.e(528),i.e(492),i.e(966),i.e(9503),i.e(5690),i.e(7736),i.e(2092),i.e(8938),i.e(8844),i.e(6609),i.e(8376),i.e(8457),i.e(4585),i.e(3262),i.e(889),i.e(7974),i.e(2539),i.e(8319),i.e(7039),i.e(8863),i.e(4463),i.e(3175),i.e(5492),i.e(3240),i.e(7189),i.e(5176),i.e(1601),i.e(6048),i.e(3276),i.e(6887),i.e(1456),i.e(2209),i.e(8997),i.e(3239),i.e(4566),i.e(88),i.e(8782)]).then(i.bind(i,58868)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>58868}),iy=(0,Vv.ZP)({resolved:{},chunkName:()=>"topics",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(5881),i.e(9336),i.e(6018),i.e(2146),i.e(3975),i.e(5029),i.e(8674),i.e(9013),i.e(4067),i.e(1853),i.e(528),i.e(492),i.e(966),i.e(9503),i.e(5690),i.e(7736),i.e(2092),i.e(8938),i.e(8844),i.e(6609),i.e(8376),i.e(8457),i.e(4585),i.e(3262),i.e(889),i.e(7974),i.e(8319),i.e(7039),i.e(8863),i.e(4463),i.e(3175),i.e(5492),i.e(3240),i.e(7189),i.e(1601),i.e(3276),i.e(6887),i.e(1456),i.e(9044),i.e(4566),i.e(3062)]).then(i.bind(i,90752)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>90752},{resolveComponent:e=>e.Topics}),oy=(0,Vv.ZP)({resolved:{},chunkName:()=>"question",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(5881),i.e(9336),i.e(6018),i.e(2146),i.e(8084),i.e(3975),i.e(5029),i.e(8674),i.e(9013),i.e(4067),i.e(1853),i.e(528),i.e(492),i.e(966),i.e(9503),i.e(5690),i.e(7736),i.e(2092),i.e(8938),i.e(8844),i.e(6609),i.e(8376),i.e(8457),i.e(4585),i.e(3262),i.e(889),i.e(7974),i.e(8319),i.e(7039),i.e(8863),i.e(4463),i.e(3175),i.e(5492),i.e(3240),i.e(7189),i.e(5176),i.e(9470),i.e(1601),i.e(6580),i.e(6048),i.e(5733),i.e(3276),i.e(3749),i.e(8537),i.e(2535),i.e(7198),i.e(9959),i.e(6516)]).then(i.bind(i,90246)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>90246}),ny=(0,Vv.ZP)({resolved:{},chunkName:()=>"kep",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(5881),i.e(9336),i.e(6018),i.e(2146),i.e(8084),i.e(3975),i.e(5029),i.e(8674),i.e(9013),i.e(4067),i.e(1853),i.e(528),i.e(492),i.e(966),i.e(9503),i.e(5690),i.e(7736),i.e(2092),i.e(8938),i.e(8844),i.e(6609),i.e(8376),i.e(8457),i.e(4585),i.e(3262),i.e(889),i.e(7974),i.e(8319),i.e(7039),i.e(8863),i.e(4463),i.e(3175),i.e(5492),i.e(3240),i.e(5176),i.e(1601),i.e(3749),i.e(6927),i.e(8726)]).then(i.bind(i,61357)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>61357}),ay=()=>(console.log("new version"),(0,u.jsx)(ny,{},void 0)),sy=(0,Vv.ZP)({resolved:{},chunkName:()=>"kep",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(5881),i.e(9336),i.e(6018),i.e(2146),i.e(8084),i.e(3975),i.e(5029),i.e(8674),i.e(9013),i.e(4067),i.e(1853),i.e(528),i.e(492),i.e(966),i.e(9503),i.e(5690),i.e(7736),i.e(2092),i.e(8938),i.e(8844),i.e(6609),i.e(8376),i.e(8457),i.e(4585),i.e(3262),i.e(889),i.e(7974),i.e(8319),i.e(7039),i.e(8863),i.e(4463),i.e(3175),i.e(5492),i.e(3240),i.e(5176),i.e(1601),i.e(3749),i.e(6927),i.e(8726)]).then(i.bind(i,6641)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>6641}),ry=(0,Vv.ZP)({resolved:{},chunkName:()=>"messages",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(5881),i.e(9336),i.e(6018),i.e(2146),i.e(3063),i.e(3975),i.e(5029),i.e(8674),i.e(9013),i.e(4067),i.e(1853),i.e(528),i.e(492),i.e(966),i.e(9503),i.e(5690),i.e(7736),i.e(2092),i.e(8938),i.e(8844),i.e(6609),i.e(8376),i.e(8457),i.e(4585),i.e(3262),i.e(889),i.e(7974),i.e(8319),i.e(7039),i.e(8863),i.e(4463),i.e(3175),i.e(5492),i.e(3240),i.e(9470),i.e(4158)]).then(i.bind(i,23817)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>23817}),ly=(0,Vv.ZP)({resolved:{},chunkName:()=>"discover",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(5881),i.e(9336),i.e(6018),i.e(2146),i.e(3975),i.e(5029),i.e(8674),i.e(9013),i.e(4067),i.e(1853),i.e(528),i.e(492),i.e(966),i.e(9503),i.e(5690),i.e(7736),i.e(2092),i.e(8938),i.e(8844),i.e(6609),i.e(8376),i.e(8457),i.e(4585),i.e(3262),i.e(889),i.e(7974),i.e(8319),i.e(7039),i.e(8863),i.e(4463),i.e(3175),i.e(5492),i.e(3240),i.e(6875),i.e(5023)]).then(i.bind(i,61985)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>61985}),dy=(0,Vv.ZP)({resolved:{},chunkName:()=>"channel",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(5881),i.e(9336),i.e(6018),i.e(2146),i.e(8084),i.e(3975),i.e(5029),i.e(8674),i.e(9013),i.e(4067),i.e(1853),i.e(528),i.e(492),i.e(966),i.e(9503),i.e(5690),i.e(7736),i.e(2092),i.e(8938),i.e(8844),i.e(6609),i.e(8376),i.e(8457),i.e(4585),i.e(3262),i.e(889),i.e(7974),i.e(8319),i.e(8863),i.e(4463),i.e(3175),i.e(5492),i.e(3240),i.e(5176),i.e(1601),i.e(3749),i.e(6927),i.e(4256)]).then(i.bind(i,53091)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>53091}),cy=(0,Vv.ZP)({resolved:{},chunkName:()=>"setting",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(5881),i.e(7954),i.e(5079),i.e(9602),i.e(9026),i.e(1565),i.e(8319),i.e(7039),i.e(8863),i.e(3175),i.e(9470),i.e(6580),i.e(4314)]).then(i.bind(i,91763)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>91763}),uy=(0,Vv.ZP)({resolved:{},chunkName:()=>"faq",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(9770),i.e(4372),i.e(8319),i.e(7039),i.e(8863),i.e(8172),i.e(1720)]).then(i.bind(i,12980)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>12980}),py=(0,Vv.ZP)({resolved:{},chunkName:()=>"report",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(5029),i.e(8994),i.e(8319),i.e(7039),i.e(8863),i.e(8172),i.e(8983)]).then(i.bind(i,88074)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>88074}),gy=(0,Vv.ZP)({resolved:{},chunkName:()=>"poi",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(5881),i.e(9336),i.e(6018),i.e(2146),i.e(8084),i.e(3975),i.e(5029),i.e(8674),i.e(9013),i.e(4067),i.e(1853),i.e(528),i.e(492),i.e(966),i.e(9503),i.e(5690),i.e(7736),i.e(2092),i.e(8938),i.e(8844),i.e(6609),i.e(8376),i.e(8457),i.e(4585),i.e(3262),i.e(889),i.e(7974),i.e(8319),i.e(7039),i.e(8863),i.e(4463),i.e(3175),i.e(5492),i.e(3240),i.e(7189),i.e(5176),i.e(9470),i.e(1601),i.e(6580),i.e(6048),i.e(5733),i.e(3276),i.e(3749),i.e(8537),i.e(2535),i.e(7198),i.e(9959),i.e(4674),i.e(9573)]).then(i.bind(i,58026)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>58026}),hy=(0,Vv.ZP)({resolved:{},chunkName:()=>"collection",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(5881),i.e(9336),i.e(6018),i.e(2146),i.e(8084),i.e(3975),i.e(5029),i.e(8674),i.e(9013),i.e(4067),i.e(1853),i.e(528),i.e(492),i.e(966),i.e(9503),i.e(5690),i.e(7736),i.e(2092),i.e(8938),i.e(8844),i.e(6609),i.e(8376),i.e(8457),i.e(4585),i.e(3262),i.e(889),i.e(7974),i.e(8319),i.e(7039),i.e(8863),i.e(4463),i.e(3175),i.e(5492),i.e(3240),i.e(7189),i.e(5176),i.e(9470),i.e(1601),i.e(6580),i.e(6048),i.e(5733),i.e(3276),i.e(3749),i.e(8537),i.e(2535),i.e(7198),i.e(9959),i.e(4674),i.e(8722),i.e(3043),i.e(8137)]).then(i.bind(i,1686)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>1686}),my=(0,Vv.ZP)({resolved:{},chunkName:()=>"explore",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(5881),i.e(9336),i.e(6018),i.e(2146),i.e(8084),i.e(3975),i.e(5029),i.e(8674),i.e(9013),i.e(4067),i.e(1853),i.e(528),i.e(492),i.e(966),i.e(9503),i.e(5690),i.e(7736),i.e(2092),i.e(8938),i.e(8844),i.e(6609),i.e(8376),i.e(8457),i.e(4585),i.e(3262),i.e(889),i.e(7974),i.e(8319),i.e(7039),i.e(8863),i.e(4463),i.e(3175),i.e(5492),i.e(3240),i.e(7189),i.e(5176),i.e(9470),i.e(1601),i.e(6580),i.e(6048),i.e(5733),i.e(3276),i.e(3749),i.e(8537),i.e(2535),i.e(7198),i.e(9959),i.e(6887),i.e(1456),i.e(9782)]).then(i.bind(i,19611)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>19611}),_y=(0,Vv.ZP)({resolved:{},chunkName:()=>"video-playlist",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(5881),i.e(9336),i.e(6018),i.e(2146),i.e(8084),i.e(9505),i.e(3975),i.e(5029),i.e(8674),i.e(9013),i.e(4067),i.e(1853),i.e(528),i.e(492),i.e(966),i.e(9503),i.e(5690),i.e(7736),i.e(2092),i.e(8938),i.e(8844),i.e(6609),i.e(8376),i.e(8457),i.e(4585),i.e(3262),i.e(889),i.e(7974),i.e(1033),i.e(5469),i.e(2843),i.e(5038),i.e(4265),i.e(4890),i.e(2116),i.e(4296),i.e(8319),i.e(7039),i.e(8863),i.e(4463),i.e(3175),i.e(5492),i.e(3240),i.e(7189),i.e(9470),i.e(1601),i.e(6580),i.e(6048),i.e(5733),i.e(2535),i.e(8933),i.e(3721)]).then(i.bind(i,87111)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>87111}),vy=(0,Rv.Z)("div",{target:"e1irlpdw0"})((({extraTop:e=0,maxWidth:t,isHideSideComponent:i})=>({marginTop:i?0:Xe.Mz+e,display:"flex",width:"100vw",maxWidth:null!=t?t:Xe.XP,justifyContent:"space-between",alignSelf:"center",flex:"1 1 auto"})),"label:DivBodyContainer;"),yy=(0,Rv.Z)("div",{target:"e1irlpdw1"})({},"label:DivSideNavContainer;"),by=(0,Rv.Z)("div",{target:"e1irlpdw2"})((({status:e,theme:{colors:t}})=>(0,Xe.f1)({max:767,style:[{position:"fixed",inset:Xe.Mz-1+"px 0 0",zIndex:99,backgroundColor:t.ConstBGInverse2,opacity:e===Ne.d0||e===Ne.cn?1:0},e===Ne.d0||e===Ne.Ix?{transition:"all 0.3s"}:null,e===Ne.Wj?{pointerEvents:"none"}:null]})),"label:DivSideNavMask;"),fy=e=>Be.iv`
  *[role='button'],
  *[role='link'],
  *[role='switch'],
  *[tabindex],
  button[aria-label],
  button[aria-labelledby],
  button[aria-pressed],
  button[aria-expanded],
  button[role='tab'],
  a[aria-label] {
    &:focus {
      outline: none;
    }
    &:focus-visible {
      outline: 2px solid ${e};
    }
  }
  ,
  *[role='button'],
  button[aria-label],
  button[aria-labelledby],
  button[aria-pressed],
  button[aria-expanded] {
    &:focus-visible {
      outline-offset: 1px;
    }
  }
  ,
  li[role='option'] {
    &:focus-visible {
      outline-style: auto;
    }
  }
`,xy=(0,Rv.Z)(vy,{target:"e1x8fefz0"})({maxWidth:"unset",justifyContent:"flex-start"},"label:StyledDivBodyContainerV2;"),wy=(0,de.memo)((e=>{const{pathname:t}=(0,ue.TH)(),{isInVideoFeedRedesign:i}=(0,Wo.y7)(),o=i||(0,Se.BL)(t)?xy:vy;return(0,u.jsx)(o,Object.assign({},e),void 0)})),ky=[Re.nT.messages,Re.nT.setting,Re.nT.settingBlockList,Re.nT.feedback,Re.nT.feedbackReport,Re.nT.feedbackHistory],Sy=[Re.nT.feedback,Re.nT.feedbackReport,Re.nT.feedbackHistory],Cy=[Re.nT.expansion,Re.nT.discovery],jy=ge.n7.ROW.serviceWorker,Ty=(0,u.jsx)((function(e){const t=(0,de.useContext)(ne.e);return(0,de.useLayoutEffect)((()=>(t.add(So),()=>{t.remove("tiktok-icon-e3f90ef7")})),[]),(0,u.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,u.jsx)("use",{xlinkHref:"#tiktok-icon-e3f90ef7"},void 0)}),void 0)}),{style:{margin:"auto",width:"77px",height:"88px"}},void 0);function Iy({location:e}){const t=(0,de.useMemo)((()=>({pathname:e.pathname.replace(/\/\/+/g,"/"),search:e.search})),[e.pathname,e.search]);return(0,u.jsx)(ue.l_,{to:t},void 0)}function Py(){return(0,u.jsx)("link",{rel:"stylesheet",href:We},void 0)}const Oy=()=>{const[{appContext:e,isSideNavActive:t},i]=(0,se.b7)(Q.G,{selector:e=>({appContext:e.appContext,isSideNavActive:e.sideNavActive}),dependencies:[]}),[{bizContext:o}]=(0,se.b7)(pe.r,{selector:e=>({bizContext:e.bizContext}),dependencies:[]}),n=function(){const{pathname:e}=(0,ue.TH)(),t=(0,Se.cQ)(e)||(0,Se.ll)(e);return(0,Oo.HX)()&&t}(),a=(0,ue.$B)(ky)||n,s=(0,ue.$B)(Sy),{user:r,language:l="en",appId:d,env:c}=(0,Ue.m7)(e),p=(0,de.useRef)(null),g=(0,Dv.kg)(l);((e=!0)=>{const{language:t}=(0,Ue.m7)((0,Qe.Lh)((()=>["language"]),[])),i=(0,se.qj)(Fo.X),o=(0,de.useCallback)((()=>{i.setCookieBannerShowing(!0)}),[i]),n=(0,de.useCallback)((()=>{i.setCookieBannerShowing(!1)}),[i]);(0,de.useEffect)((()=>{e&&Do.f2.loadCookieBanner({locale:t,onShow:o,onHide:n})}),[t,e,o,n])})(),function(e){const t=(0,se.qj)(Io.e);(0,de.useEffect)((()=>{e&&!e.ftcUser&&t.getNewestReply()}),[e,t])}(r),function(e,t,i){(0,de.useEffect)((()=>{e&&new Co.R({aid:1459,service:"www.tiktok.com",host:1180===t?"https://ttwid-sg.byteoversea.com":"https://ttwid-va.byteoversea.com"}).init()}),[t,null==i?void 0:i.type,e])}(r,d,c),function(){const[e,t]=(0,se.b7)(jo.D);(0,de.useEffect)((()=>{const i=i=>{if(e.isModalShow)return;i.preventDefault();const o=e.isExpand||!(0,To.le)(ge.OV);o&&t.handleShowSnack(!0),t.storeDeferredPrompt(i),t.setIsPwaInstallable(!0),t.setIsExpand(o)};return window.addEventListener("beforeinstallprompt",i),()=>{window.removeEventListener("beforeinstallprompt",i)}}),[t,e.isExpand,e.isModalShow])}(),(0,qe.u8)(!1),function(){const e=(0,se.qj)(ze.f),t=(0,de.useCallback)((()=>{window.ttWebappFocusTime||(window.ttWebappFocusTime=Date.now(),window.ttWebappBlurTime=null)}),[]),i=(0,de.useCallback)((()=>{const t=Date.now();e.updateVideoFocusTime({blurTime:t}),window.ttWebappFocusTime=null,window.ttWebappBlurTime=t}),[e]);(0,de.useEffect)((()=>{window.ttWebappFocusTime=Date.now()}),[]),(0,de.useEffect)((()=>(window.addEventListener("blur",i),window.addEventListener("focus",t),()=>{window.removeEventListener("blur",t),window.removeEventListener("focus",i)})),[i,t])}(),function(e=!1){const{pathname:t}=(0,ue.TH)();(0,de.useEffect)((()=>{e&&$e.Vh.includes(t)||window.scrollTo(0,0)}),[e,t])}(!0),function(){const{photoSensitiveVideosSetting:e}=(0,se.mp)(Po.P);(0,de.useEffect)((()=>{Mo.W.handleRemovePhotosensitiveStatus(1===e?"on":"off")}),[])}(),function(){const e=(0,se.qj)(Lo.Y);(0,de.useEffect)((()=>{e.getBusinessPermissionList()}),[e])}();const{isShow:h,url:m=""}=function(){const{search:e,pathname:t}=(0,ue.TH)();return(0,de.useMemo)((()=>{const i=new URLSearchParams(e),o=i.get("scene"),n=i.get("redirect_url");return 0!==(null==o?void 0:o.indexOf("ecom_email"))||!n||0!==n.indexOf("aweme")&&0!==n.indexOf("sslocal")?{isShow:!1}:{isShow:!0,url:`https://www.tiktok.com${t}${e}`}}),[])}(),_=(0,He.Sf)("pc_video_playlist"),{bodyContainerWidth:v,sideNavWidth:y}=(0,Dv.s6)(),b=(0,de.useCallback)((()=>{i.setSideNavActive(!1)}),[i]),f=(0,He.N8)(null==e?void 0:e.abTestVersion,"kep_hashtag_unification"),x="v4"===f||"v3"===f,{popupHeight:w,handlePopupHide:k,handlePopupShow:S}=function(){const[e,t]=(0,de.useState)(0),i=(0,de.useCallback)((()=>{t(0)}),[]);return{popupHeight:e,handlePopupShow:(0,de.useCallback)((e=>{t(e)}),[]),handlePopupHide:i}}(),C=(0,u.jsx)(Ne.ZP,Object.assign({timeout:300,in:t,nodeRef:p},{children:e=>(0,u.jsxs)("div",Object.assign({ref:p},{children:[(0,u.jsx)(by,{status:e,onClick:b},void 0),(0,u.jsx)(El,{extraWidth:y,extraTop:w,transStatus:e,lang:l},void 0)]}),void 0)}),void 0);return(0,u.jsxs)(Zl,Object.assign({isMobile:!1,loading:Ty,path2PidFunc:pt.k1},{children:[(0,u.jsx)(Be.xB,{styles:fy(g)},void 0),(0,u.jsx)(gt.F,{appContext:e,bizContext:o,slardarBid:ht.Li},void 0),(0,u.jsx)(xt,{appContext:e},void 0),(0,u.jsx)(kt,{appContext:e},void 0),(0,u.jsx)(Zv,{visible:!n},void 0),(0,u.jsx)(Py,{},void 0),(0,u.jsx)(Si,{onShow:S,onHide:k},void 0),(0,u.jsx)(wy,Object.assign({isHideSideComponent:n,extraTop:w,maxWidth:v},{children:(0,u.jsxs)(Wd.f,{children:[!a&&(0,u.jsx)(yy,{children:C},void 0),(0,u.jsxs)(ue.rs,{children:[(0,u.jsx)(ue.AW,{path:"(.*//+.*)",exact:!0,strict:!0,component:Iy},void 0),(0,u.jsx)(ue.AW,{exact:!0,path:Re.nT.following,component:Gv},void 0),(0,u.jsx)(ue.AW,{path:Re.nT.searchHome,component:Qv},void 0),(0,u.jsx)(ue.AW,{exact:!0,path:Re.nT.user,component:Jv},void 0),(0,u.jsx)(ue.AW,{exact:!0,path:Re.nT.challenge,component:Yv},void 0),(0,u.jsx)(ue.AW,{exact:!0,path:Re.nT.video,component:Kv},void 0),(0,u.jsx)(ue.AW,{exact:!0,path:Re.nT.musicPlaylist,component:Xv},void 0),(0,u.jsx)(ue.AW,{exact:!0,path:Re.nT.music,component:ey},void 0),(0,u.jsx)(ue.AW,{exact:!0,path:$e.Vh,component:ty},void 0),(0,u.jsx)(ue.AW,{exact:!0,path:Re.nT.topics,component:iy},void 0),(0,u.jsx)(ue.AW,{exact:!0,path:Re.nT.question,component:oy},void 0),(0,u.jsx)(ue.AW,{exact:!0,path:Cy,component:x?ay:sy},void 0),(0,u.jsx)(ue.AW,{exact:!0,path:Re.nT.messages,component:ry},void 0),(0,u.jsx)(ue.AW,{exact:!0,path:Re.nT.discover,component:ly},void 0),(0,u.jsx)(ue.AW,{exact:!0,path:Re.nT.channel,component:dy},void 0),(0,u.jsx)(ue.AW,{path:Re.nT.setting,component:cy},void 0),(0,u.jsx)(ue.AW,{exact:!0,path:Re.nT.feedbackReport,component:py},void 0),(0,u.jsx)(ue.AW,{exact:!0,path:Re.nT.feedbackHistory,component:py},void 0),(0,u.jsx)(ue.AW,{exact:!0,path:Re.nT.feedback,component:uy},void 0),(0,u.jsx)(ue.AW,{exact:!0,path:Re.nT.poi,component:gy},void 0),(0,u.jsx)(ue.AW,{exact:!0,path:Re.nT.collection,component:hy},void 0),(0,u.jsx)(ue.AW,{exact:!0,path:Re.nT.explore,component:my},void 0),_&&(0,u.jsx)(ue.AW,{exact:!0,path:Re.nT.videoPlaylist,component:_y},void 0),(0,u.jsx)(Ci,{path:"*"},void 0)]},void 0)]},void 0)}),void 0),s&&(0,u.jsx)(Bd,{},void 0),(0,u.jsx)(Ei,{},void 0),(0,u.jsx)(Nd.b,{},void 0),(0,u.jsx)(eo,{},void 0),(0,u.jsx)(po,{},void 0),h&&(0,u.jsx)(ko,{url:m},void 0),(0,u.jsx)("script",{src:jy},void 0)]}),void 0)},Ly=oe()(Object.values(Re.nT)),My=new ae;var Ey=i(39729);const{startFn:Ay,endFn:Dy}=function(){let e,t;return{startFn(){e=r()},endFn(){t=r(),function({duration:e,customParams:t,option:i}){const o=Object.assign({timer_render:e},t);l.send("arm_render_finish",o,i)}({duration:t-e})}}}();function Fy(e){return(t,i)=>(0,n.D)(d.h[e](t,i))}o.n.addProvider({provide:c.r,useValue:{get:Fy("get"),post:Fy("post"),get csrfToken(){return d.h.csrfToken}}}),function(e,t){const n=o.n.getInstance(L.n);n.sendCustomPerfMetric("js_start_app");const{beforeStart:a=v(),defaultNS:s,nss:r,customInitBiz:l,beforeRender:d=v(),afterRender:c=v(),appName:u}=t,p=(0,H.G3)();(function(){return(0,b.__awaiter)(this,void 0,void 0,(function*(){"Promise"in window?(M.some((e=>!(e in window)))&&(yield i.e(7239).then(i.bind(i,16376))),(E.some((e=>!(e in Array.prototype)))||A.some((e=>!(e in Object))))&&(yield Promise.all([i.e(800).then(i.t.bind(i,67735,23)),i.e(800).then(i.t.bind(i,76299,23)),i.e(800).then(i.t.bind(i,58935,23)),i.e(800).then(i.t.bind(i,33759,23))]))):window.location.href="https://www.tiktok.com/unsupported"}))})().then((()=>(0,m.g)())).then((()=>Promise.all([K(p),ee(p,r),l?Promise.resolve():(0,D.j)(u),(0,V.Bs)(),a(),(0,h.TA)(),q(p,s)]))).then((()=>function(e){const t=(0,Y.bX)(Z.lu);t?$(t,e):console.error("[Error]: No translation data to be added")}(p))).then((()=>o.n.addProvider({provide:Z.s$,useValue:P.ZP.t}))).then((()=>d())).then((()=>{n.sendCustomPerfMetric("js_render_app"),te(e)})).then((()=>c())).catch((e=>{console.error(e)}))}((()=>(0,u.jsx)(Fe,Object.assign({supportRoutes:Ly},{children:(0,u.jsx)(ne.c,Object.assign({context:My},{children:(0,u.jsx)(Oy,{},void 0)}),void 0)}),void 0)),{appName:"desktop",beforeStart:()=>{return e=void 0,t=void 0,o=function*(){},new((i=void 0)||(i=Promise))((function(n,a){function s(e){try{l(o.next(e))}catch(e){a(e)}}function r(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,r)}l((o=o.apply(e,t||[])).next())}));var e,t,i,o},nss:Ey.gS,beforeRender:()=>{Ay(),function(){var e;const t=(0,W.N)(),i=(0,Y.bX)(J.Hx),{user:o,wid:n,region:a}=i;Ji.W.config({initConfig:{channel_domain:t.tea,ab_channel_domain:t.libraWebSDK,id:1988},commonHeaderConfig:{region:a,user_id:null!==(e=null==o?void 0:o.uid)&&void 0!==e?e:"",user_is_login:Boolean(o),user_unique_id:n,user_type:12,"header.custom":Object.assign({session_id:Ji.W.getSessionId(n)},Ji.W.initDimensionalData)}});const s=(0,Re.M7)(window.location.pathname);l.init({sender:Ji.W.event.bind(Ji.W),device:"pc",pageName:s?Ey.f8[s.name]:""})}(),function(e){const{customParams:t,option:i}={},o=Object.assign({timer_from_ttfb:r()-s()},t);l.send("arm_browser_render",o,i)}(),function(e){const{customParams:t,option:i}={};(0,a.NO)((({name:e,value:o})=>{if("LCP"===e){const e=Object.assign({timer_lcp:Math.ceil(o)},t);l.send("arm_lcp",e,i)}else console.warn("Do not get LCP metric in onLCP callback")}))}(),function(e){const{customParams:t,option:i}={};window.addEventListener("beforeunload",(function e(){l.send("arm_bounce",Object.assign({},t),i),window.removeEventListener("beforeunload",e)}))}()},afterRender:Dy})},62246:(e,t,i)=>{i.d(t,{$j:()=>d,oG:()=>c,s6:()=>u,kg:()=>p});var o=i(91051),n=i(21041),a=i(22597),s=i(29025),r=i(99603),l=i(21985);const d=240,c=()=>{const{pathname:e}=(0,n.TH)();return(0,o.useMemo)((()=>(0,a.BL)(e)||(0,a.I8)(e)||(0,a.Ho)(e)||(0,a.T7)(e)),[e])},u=()=>{const{isInVideoFeedRedesign:e}=(0,s.y7)(),{isInHorizontalBoostUI:t}=(0,s.yk)(),i=c(),{isDetailPage:o}=(0,l.U)(),{isInUILayoutAlignment:n}=(0,s.hn)(),{isFeedbackPage:a}=(0,l.W)(),r=!a&&(e||o||i||n||t);return{sideNavWidth:r?d:void 0,bodyContainerWidth:r?"100vw":void 0}},p=e=>{const{value:t}=(0,o.useContext)(r.hb);return(0,r.gh)({isDark:t,lang:e}).colors.Negative}},68457:(e,t,i)=>{i.d(t,{fB:()=>l,Nr:()=>d});var o=i(38209),n=i.n(o),a=i(66292),s=i.n(a),r=i(91051);function l(e,t,i){return(0,r.useMemo)((()=>n()(e,i)),t)}function d(e,t,i){return(0,r.useMemo)((()=>s()(e,i)),t)}},32273:(e,t,i)=>{i.d(t,{Q:()=>s,y:()=>r});var o=i(91051),n=i(16594),a=i(66891);const s=(e="Webapp")=>{const{t}=(0,o.useContext)(a.LX);return(0,o.useCallback)(((i,o,n)=>t(i,Object.assign({ns:e},o),n)),[e,t])};function r(e){const t=(0,n.G3)(),{loadStarling:i,hasLoaded:s}=(0,o.useContext)(a.LX),[r,l]=(0,o.useState)((null!=e?e:[]).reduce(((e,t)=>e&&s(t)),!0));return(0,o.useEffect)((()=>{e&&Promise.all(e.map((e=>!!s(e)||i(e,t)))).then((e=>{l(e.reduce(((e,t)=>e&&t),!0))}))}),[]),r}},45313:(e,t,i)=>{i.d(t,{P4:()=>n,MB:()=>a,JD:()=>s,yl:()=>l,fH:()=>d,Pz:()=>u,_9:()=>c,cC:()=>m,U_:()=>_});var o=i(25508);const{getPureLivePath:n,getPureMusicPath:a,getPureTagPath:s,getPureStickerPath:r,getPureUserPath:l,getPureVideoPath:d,getPureQuestionPath:c}=o.Z,{getPureUniqueId:u,hasIllegalText:p,isPureNumber:g,isRealUniqueId:h,purifyMusicName:m,purifyPlainText:_}=o.c},87930:(e,t,i)=>{i.d(t,{G:()=>o,k:()=>n});const o=e=>null,n=(e,t,i)=>{}},21005:(e,t,i)=>{i.d(t,{n:()=>s});var o=i(11348),n=i(49847),a=i(68854);const s=({msg:e,shouldShowMsg:t=!1,prevent:i=!0,callback:s})=>r=>r.pipe((0,a.K)((a=>(t&&console.error("Effect error: ",null!=e?e:a),null==s||s(),i?o.E:(0,n._)((()=>a))))))},14500:(e,t,i)=>{i.d(t,{yB:()=>l});var o,n,a=i(64047),s=i(57244),r=i(95872);!function(e){e.Share="livesdk_share",e.Report="livesdk_live_user_report",e.ReportSuccess="livesdk_report_success",e.ChatClose="livesdk_comment_close",e.HoverUserCardShow="livesdk_user_card_show",e.Follow="livesdk_follow",e.Take="livesdk_live_action",e.SetupPopShow="livesdk_live_tab_popup_show",e.AnchorEnterRoom="livesdk_anchor_enter_room",e.Show="livesdk_live_show",e.ClickEntrance="livesdk_rec_live_play",e.Unfollow="livesdk_unfollow"}(o||(o={})),function(e){e.VideoHeadBrowser="video_head_browser",e.Creator="creator",e.VideoHead="video_head",e.LiveHead="live_head",e.OthersPhoto="others_photo",e.SuggestedOthersPhoto="suggested_others_photo",e.ClickOneColumnUser="click_main_btn"}(n||(n={}));let l=class{constructor(){this.handleLiveEntranceShow=e=>{r.W.event("livesdk_live_show",e)},this.handleLiveEntranceClick=e=>{r.W.event("livesdk_rec_live_play",e)},this.handleLiveStreamEntranceClick=e=>{r.W.event("livesdk_live_action",Object.assign({live_type:"third_party"},e))}}};l=(0,a.__decorate)([(0,s.G)()],l)},87418:(e,t,i)=>{var o,n;i.d(t,{cK:()=>a}),function(e){e[e.On=1]="On",e[e.Off=2]="Off"}(o||(o={})),function(e){e.LD="ld",e.SD="sd",e.HD="hd",e.HD60="hd_60",e.UHD="uhd",e.UHD60="uhd_60",e.ORIGIN="origin",e.AUTO="auto"}(n||(n={}));const a={origin:"Original",uhd_60:"1080p60",uhd:"1080p",hd_60:"720p60",hd:"720p",sd:"540p",ld:"360p"};var s,r,l,d;!function(e){e.H265="web_h265",e.H264="web_h264"}(s||(s={})),function(e){e.H264="h264",e.Bytevc1="bytevc1",e.H265="h265"}(r||(r={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.OBS=1]="OBS",e[e.MEDIA=2]="MEDIA",e[e.AUDIO=3]="AUDIO",e[e.SCREEN=4]="SCREEN",e[e.SOCIAL_LIVE=5]="SOCIAL_LIVE",e[e.STUDIO=6]="STUDIO"}(l||(l={})),function(e){e.Normal="normal",e.PoorConnection="poor_connection",e.Offline="offline"}(d||(d={}))},99835:(e,t,i)=>{i.d(t,{Q:()=>r});var o=i(64047),n=i(57244),a=i(90293),s=i(18645);let r=class{constructor(e){this.fetch=e}getUniversalPopConfig(e){return this.fetch.get("/api/policy/notice/",{query:e})}setUniversalPopOperation(e){return this.fetch.post("https://www.tiktok.com/api/policy/notice/approve/",{body:(0,a.stringify)(e)})}getPolicyContent(e){return this.fetch.get("https://www.tiktok.com/web/api/v2/project/articleContent/",{query:e})}};r=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[s.r])],r)},28139:(e,t,i)=>{i.d(t,{a:()=>s});var o=i(64047),n=i(57244),a=i(95872);let s=class{constructor(){this.handlePolicyConfirmOnFYP=e=>{a.W.event("tns_web_trending_setting",e)},this.handleAgeGateResponse=(e,t)=>{a.W.event("age_gate_response",{enter_type:"click_sign_up",is_success:e?1:0,error_code:t})}}handleUniversalPopShow(e){a.W.event("tns_general_dialog_show",e)}handleUniversalPopClick(e){a.W.event("qa_tns_general_dialog_click",e)}};s=(0,o.__decorate)([(0,n.G)()],s)},25596:(e,t,i)=>{i.d(t,{C:()=>s});var o=i(33642),n=i(99297),a=i(17133);function s(){var e;const{abTestVersion:t}=(0,o.m7)((0,a.Lh)((()=>["abTestVersion"]),[])),i=null!==(e=(0,n.N8)(t,"search_bar_style_opt"))&&void 0!==e?e:"v1",s="v2"===i,r="v3"===i;return{isSearchBarStyleV1:"v1"===i,isSearchBarStyleV2:s,isSearchBarStyleV3:r,withNewStyle:s||r}}},20149:(e,t,i)=>{i.d(t,{o:()=>pt});var o=i(11040),n=i(9236),a=i(90293),s=i(91051),r=i(21041),l=i(25508),d=i(16594),c=i(33693),u=i(95872),p=i(42143),g=i(19813),h=i(25596),m=i(29025),_=i(33642),v=i(99297),y=i(97751),b=i(26641),f=i(17133),x=i(2844),w=i(23745),k=i(54769),S=i(63827),C=i(22377),j=i(21555),T=i(36669),I=i(76126),P=i(22597),O=i(45949),L=i(74820),M=i(72354),E=i(32273),A=i(32124),D=i(55383),F=i(40340),R=i(68191),B=i(41830),N=i(36488);const W=(0,R.Z)("form",{target:"e14ntknm0"})((({theme:{colors:e},isBrowserMode:t})=>({display:"flex",flexDirection:"row",alignItems:"center",padding:"12px 16px",background:t?"":e.BGInput,borderRadius:"92px",position:"relative",overflow:"hidden",zIndex:1,margin:"0"})),"label:FormElement;"),U=(0,R.Z)("div",{target:"e14ntknm1"})((({theme:{colors:e},isFocused:t,withNewStyle:i})=>({display:"none",position:"absolute",left:"0",top:"0",right:"0",bottom:"0",border:t?`2px solid ${e.Negative}`:`${i?"1px":"1.5px"} solid ${i?e.LinePrimary2:e.LinePrimary}`,borderRadius:"92px",zIndex:-1})),"label:DivInputBorder;"),q=(0,R.Z)("div",{target:"e14ntknm2"})((({theme:{colors:e}})=>({display:"block",position:"absolute",left:"0",top:"0",right:"0",bottom:"0",border:`1px solid ${e.ConstTextInverse4}`,borderRadius:"92px",zIndex:-1})),"label:DivBrowserModeInputBorder;"),z=(e,t,i)=>i?"100%":t?e?"391px":"431px":e?"306px":"346px",$=(0,R.Z)("input",{target:"e14ntknm3"})((({theme:{colors:e,typography:t,fontFamilies:i,fontWeights:o},withIcon:n,widthChanged:a,hovered:s,isBrowserMode:r})=>Object.assign(Object.assign({fontFamily:i.Proxima,fontWeight:o.normal},t.P2),{border:"none",background:"transparent",outline:"none",padding:"0",width:z(n,a,r),color:r?e.ConstTextInverse:e.TextPrimary,caretColor:e.Primary,appearance:"textfield",[`:focus ~ ${U}`]:{display:"block"},"::placeholder":{color:r?e.ConstTextInverse3:e.TextSecondary},":placeholder-shown":{textOverflow:"ellipsis"},[` ~ ${U}`]:{display:s&&!r?"block":"none"}})),"label:InputElement;");$.defaultProps=Object.assign(Object.assign({},$.defaultProps),{"data-e2e":"search-user-input"});const H=(0,R.Z)("div",{target:"e14ntknm4"})({fontSize:0},"label:DivIconWrapper;"),Z=(0,R.Z)(B.Z,{target:"e14ntknm5"})({animation:"loading-circle-anim linear 1s infinite","@keyframes loading-circle-anim":{"0%":{transform:"rotate(0)"},"100%":{transform:"rotate(360deg)"}}},"label:StyledLoadingCircle;"),V=(0,R.Z)("span",{target:"e14ntknm6"})((({theme:{colors:e},isBrowserMode:t})=>({width:"1px",height:"28px",margin:"-3px 0",background:t?e.ConstTextInverse5:e.LineSecondary})),"label:SpanSpliter;"),G=(e,t,i)=>t?i?e.BGInput:e.BGView:"transparent",Q=(0,R.Z)("button",{target:"e14ntknm7"})((({theme:{colors:e,direction:t},hovered:i,withNewStyle:o})=>[{padding:"11px 16px 11px 12px",margin:"-12px -16px",fontSize:"0",cursor:"pointer",outline:"none",border:"none",background:G(e,i,o),":active":{background:e.BGInput2},"&:focus, :focus-visible":{outline:"none!important"}},(0,N.YJ)({direction:t,marginStart:"0"})]),"label:ButtonSearch;");Q.defaultProps=Object.assign(Object.assign({},Q.defaultProps),{"data-e2e":"search-button"});const J=(0,R.Z)("div",{target:"e14ntknm8"})((({focused:e,theme:t})=>({outline:e?`2px solid ${t.colors.Negative}`:"none"})),"label:DivSearchIconContainer;"),Y=(0,s.memo)((0,s.forwardRef)((function({initialValue:e,widthChanged:t,hovered:i,onEnter:a,onTab:l,onBlur:d,onMouseEnter:g,onMouseLeave:h,isMouseOnSearchBtn:m},y){var b,x;const[{searchValue:k,loading:I,activeIndex:P,inputFocus:O,sugList:M,queryId:E},{handleInputFocusChange:R,setSearchValue:B,setActiveUp:N,setActiveDown:W,setActiveIndex:U}]=(0,n.b7)(j.B,{dependencies:[],selector:e=>({searchValue:e.searchValue,loading:e.loading,activeIndex:e.activeIndex,inputFocus:e.inputFocus,sugList:e.sugList,queryId:e.queryId})}),[{rootEnterFrom:q}]=(0,n.b7)(S.t8,{selector:e=>({rootEnterFrom:e.searchGlobalParams.rootEnterFrom}),dependencies:[]}),[{historyList:z},V]=(0,n.b7)(T.n,{dependencies:[],selector:e=>({historyList:e.historyList})}),[{currentVideo:G}]=(0,n.b7)(F.f,{selector:e=>({currentVideo:e.currentVideo}),dependencies:[]}),{abTestVersion:Q,user:J}=(0,_.m7)((0,f.Lh)((()=>["abTestVersion","user"]),[])),Y=Boolean(J),K=(0,s.useRef)(null),X=(0,s.useCallback)((()=>{var e;null===(e=K.current)||void 0===e||e.blur()}),[]);(0,s.useImperativeHandle)(y,(()=>({onEnterBlur:X})),[X]);const{pathname:ee}=(0,r.TH)(),{showingBrowserMode:te}=(0,n.mp)(w.O),ie=Boolean((0,r.LX)(ee,{path:c.nT.searchHome})),{placeholder:oe,hasVideoSugWord:ne,word_id:ae}=(0,C.Uh)(te),{colors:se}=(0,L.u)(),re=null!==(b=(0,v.N8)(Q,"search_transfer_history"))&&void 0!==b?b:"v1",le=null!==(x=(0,v.N8)(Q,"search_transfer_guesssearch"))&&void 0!==x?x:"v1",de="v2"===re&&Y,ce="v2"===le,ue=(0,s.useMemo)((()=>({fill:te?se.ConstTextInverse4:se.TextQuaternary,width:16,height:16,style:{margin:"0 12px"}})),[se,te]),pe=(0,s.useMemo)((()=>!I&&Boolean(k)&&M.length>0&&O),[O,I,k,M.length]);(0,s.useEffect)((()=>{B(e)}),[e,B]);const ge=(0,s.useCallback)((()=>{var e,t;ce&&V.getTransferList({req_source:"web_blank_page",from_group_id:null!==(e=null==G?void 0:G.id)&&void 0!==e?e:"",history_list_v2:(t=z,encodeURIComponent(encodeURIComponent(JSON.stringify(t))))})}),[V,G,z,ce]),he=(0,s.useCallback)((()=>{de&&z.length&&p.xq.handleSearchHistory({search_entrance:q,search_position:u.W.commonParams.page_name,search_keyword:"",action_type:"show",order:-1})}),[z,de,q]),me=(0,s.useCallback)((e=>{const t=e.target.value;(e=>!e.startsWith(" "))(t)&&(k&&""===t&&(V.setEnterMethod("cancel"),p.xq.handleEnterSearchBlankPage({enter_from:u.W.commonParams.page_name,enter_method:"cancel",search_keyword:"",is_from_video:"video_detail"===u.W.commonParams.page_name?"1":""}),he(),ge()),B(t))}),[B,k,he,ge,V]),_e=(0,D.J)({upHandler:N,downHandler:W,confirmHandler:a,tabHandler:l}),ve=(0,s.useCallback)((()=>{R(!0),k?(p.xq.handleSugGroupImpression({words_source:"sug",words_num:String(M.length),raw_query:k,search_position:u.W.commonParams.page_name}),M.forEach(((e,t)=>{var i;p.xq.handleSugImpression({impr_id:null!==(i=null==e?void 0:e.impr_id)&&void 0!==i?i:"",words_source:"sug",words_position:t,words_content:e.content,raw_query:k,sug_type:e.extra_info.sug_user_id?"enrich_sug":"normal_sug",query_id:null!=E?E:"",group_id:e.word_record.group_id})}))):(V.setEnterMethod("enter"),p.xq.handleEnterSearchBlankPage({enter_from:u.W.commonParams.page_name,enter_method:"enter",search_keyword:"",is_from_video:"video_detail"===u.W.commonParams.page_name?"1":""}),he(),ge())}),[R,k,M,E,he,ge,V]),ye=(0,s.useCallback)((()=>{ne&&m?setTimeout((()=>{R(!1)}),200):R(!1),U(-1),null==d||d()}),[ne,m,U,d,R]),be=(0,s.useCallback)((()=>{null==g||g()}),[g]),fe=(0,s.useCallback)((()=>{null==h||h()}),[h]),xe=(0,s.useCallback)((()=>{var e;B(""),V.setEnterMethod("cancel"),p.xq.handleEnterSearchBlankPage({enter_from:u.W.commonParams.page_name,enter_method:"cancel",search_keyword:"",is_from_video:"video_detail"===u.W.commonParams.page_name?"1":""}),he(),ge(),null===(e=K.current)||void 0===e||e.focus()}),[B,he,ge,V]);(0,s.useEffect)((()=>{ie||B("")}),[ie,B]),(0,s.useEffect)((()=>{ne?V.setVideoSuggestWord({word:oe,word_id:ae}):V.setVideoSuggestWord(void 0)}),[ne,oe,V,ae]);const we=(0,s.useCallback)((()=>I?(0,o.jsx)(H,{children:(0,o.jsx)(Z,Object.assign({},ue),void 0)},void 0):k?(0,o.jsx)(H,Object.assign({onClick:xe,"data-e2e":"reset-search-form"},{children:(0,o.jsx)(A.Z,Object.assign({},ue),void 0)}),void 0):null),[I,k,ue,xe]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)($,{ref:K,withIcon:Boolean(k)||I,widthChanged:t,hovered:i,isBrowserMode:te,value:k,onChange:me,onKeyDown:_e,onFocus:ve,onBlur:ye,onMouseEnter:be,onMouseLeave:fe,placeholder:oe,name:"q",type:"search",autoComplete:"off",role:"combobox","aria-controls":pe?"header-sug-results":"","aria-label":oe,"aria-expanded":pe,"aria-autocomplete":"list","aria-activedescendant":P>-1&&Boolean(k)?`sug-list-item-${P}`:void 0},void 0),we()]},void 0)}))),K=(0,s.memo)((0,s.forwardRef)((function({initialValue:e,onSubmit:t},i){const[{searchValue:l,activeIndex:d},u]=(0,n.b7)(j.B,{dependencies:[],selector:e=>({searchValue:e.searchValue,activeIndex:e.activeIndex})}),[p,g]=(0,s.useState)(!1),{search:m}=(0,r.TH)(),{q:_}=(0,a.parse)(m),v=(0,E.Q)(),{colors:y}=(0,L.u)(),{pathname:b}=(0,r.TH)(),f=(0,s.useRef)(!1),x=(0,s.useRef)(null),k=(0,s.useRef)(null),S=(0,s.useCallback)((()=>{var e;null===(e=null==k?void 0:k.current)||void 0===e||e.onEnterBlur()}),[]),{showingBrowserMode:C}=(0,n.mp)(w.O);(0,s.useImperativeHandle)(i,(()=>({onEnterInputBlur:S})),[S]);const T=(0,s.useCallback)((()=>{f.current=!0}),[]),I=(0,s.useCallback)((e=>{e.preventDefault(),u.setInputFocus(!1),null==t||t(e,f.current),f.current=!1}),[u,t]),P=(0,s.useCallback)((e=>{d<0||(u.setInputFocus(!1),null==t||t(e,!0))}),[u,t,d]),O=Boolean((0,r.LX)(b,{path:c.nT.searchHome})),{isSearchBarStyleV1:A,isSearchBarStyleV3:D,withNewStyle:F}=(0,h.C)(),[R,B]=(0,s.useState)(!1),[N,z]=(0,s.useState)(!1),[$,H]=(0,s.useState)(!1),[Z,G]=(0,s.useState)(!1),[K,X]=(0,s.useState)(!1),ee=(0,s.useCallback)((e=>()=>{e&&N||B(e)}),[N]),te=(0,s.useCallback)((()=>{D&&X(!0),G(!0),g(!0)}),[D]),ie=(0,s.useCallback)((()=>{D&&X(!1),G(!1),g(!1)}),[D]),oe=(0,s.useCallback)((()=>{A||C||(D&&G(!0),X(!0))}),[C,A,D]),ne=(0,s.useCallback)((()=>{A||C||(D&&G(!1),X(!1))}),[C,A,D]),ae=(0,s.useCallback)((()=>{z(!0),B(!1)}),[]),se=(0,s.useCallback)((()=>{z(!1)}),[]),re=(0,s.useCallback)((e=>{13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),e.stopPropagation(),u.setInputFocus(!1),null==t||t(e,!0),f.current=!1)}),[u,t]),le=(0,s.useCallback)((e=>{9===e.keyCode&&H(e.target!==x.current)}),[]),de=(0,s.useCallback)((()=>{H(!1)}),[]),ce=(0,s.useCallback)((()=>C?l?y.ConstTextInverse2:y.ConstTextInverse3:F&&(Z||K)?y.TextPrimary:l?y.TextSecondary:y.TextQuaternary),[C,l,y,F,Z,K]);return(0,o.jsxs)(W,Object.assign({className:"search-input",action:"/search",onSubmit:I,onKeyUp:le,isBrowserMode:C},{children:[O&&(0,o.jsx)("h1",Object.assign({style:{display:"none",alignItems:"center"}},{children:_}),void 0),(0,o.jsx)(Y,{initialValue:e,onEnter:T,onTab:P,onBlur:de,onMouseEnter:oe,onMouseLeave:ne,hovered:K,ref:k,isMouseOnSearchBtn:p,widthChanged:F},void 0),(0,o.jsx)(V,{isBrowserMode:C},void 0),(0,o.jsx)(Q,Object.assign({type:"submit",hovered:Z,withNewStyle:F,ref:x,onFocus:ee(!0),onBlur:ee(!1),onMouseEnter:te,onMouseLeave:ie,onMouseDown:ae,onMouseUp:se,onKeyDown:re,"aria-label":v("accessibilityLabels_search_button")},{children:(0,o.jsx)(J,Object.assign({focused:R&&!C},{children:(0,o.jsx)(M.Z,{fill:ce(),width:24,height:24},void 0)}),void 0)}),void 0),C?(0,o.jsx)(q,{},void 0):(0,o.jsx)(U,{isFocused:$,withNewStyle:F},void 0)]}),void 0)}))),X=(0,R.Z)("div",{target:"e1hi1cmj0"})((({isBrowserMode:e})=>({position:"relative",width:e?"calc(100% - 225px)":"",maxWidth:e?"calc(56.25vh - 32px)":""})),"label:DivSearchFormContainer;");var ee=i(44663);const te=e=>{const[{activeIndex:t},i]=(0,n.b7)(j.B),o=t===e,a=(0,s.useCallback)((()=>{o||i.setActiveIndex(e)}),[o,i,e]);return{active:o,handleMouseEnter:a}};var ie=i(75311);const oe=(e,t,i)=>i?"0 2px 12px rgba(0, 0, 0, 0.12)":t?"":`0 2px 12px ${e.ShadowPrimary}`,ne=(0,R.Z)("ul",{target:"e1gva98t0"})((({theme:{colors:e,isDark:t},isBrowserMode:i})=>({position:"absolute",width:"100%",marginTop:"8px",background:i?"rgba(18, 18, 18, 1)":e.BGSecondary,boxShadow:oe(e,t,i),borderRadius:"8px",paddingTop:"8px",boxSizing:"border-box",maxHeight:i?"210px":`min(calc(100vh - 96px - ${N.Mz}px), 734px)`,overflowY:"auto",overflowX:"hidden",listStyleType:"none",paddingInlineStart:0})),"label:UlContainer;");ne.defaultProps=Object.assign(Object.assign({},ne.defaultProps),{"data-e2e":"sug-container"});const ae=(0,R.Z)("li",{target:"e1gva98t1"})((({paddingVertical:e,active:t,theme:{colors:i}})=>({padding:`${e}px 16px`,cursor:"pointer",background:t?i.BGView:void 0,display:"flex",alignItems:"center"})),"label:LiItemContainer;"),se=(0,R.Z)("h4",{target:"e1gva98t2"})((({theme:{typography:e,fontWeights:t},isBrowserMode:i})=>Object.assign(Object.assign({},e.P2),{fontWeight:t.semiBold,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:i?"rgba(255, 255, 255, 0.9)":""})),"label:H4ItemTitle;"),re=(0,R.Z)("p",{target:"e1gva98t3"})((({theme:{typography:e,fontWeights:t,colors:i},isBrowserMode:o})=>Object.assign(Object.assign({},e.P3),{color:o?"rgba(255,255,255,0.5)":i.TextTertiary,fontWeight:t.normal,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})),"label:PItemDesc;"),le=(0,R.Z)("p",{target:"e1gva98t4"})((({theme:{fontFamilies:e,fontWeights:t,typography:i,colors:o},isBrowserMode:n})=>Object.assign(Object.assign({fontFamily:e.Proxima,fontWeight:t.semiBold},i.P2),{color:n?"rgba(255, 255, 255, 0.9)":o.TextPrimary,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"})),"label:PMoreText;"),de=(0,R.Z)("div",{target:"e1gva98t5"})((({theme:{direction:e}})=>Object.assign({height:"20px",flex:"0 0 20px",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"15px"},(0,N.YJ)({direction:e,marginEnd:"8px"}))),"label:DivSearchIconContainer;"),ce=(0,R.Z)(ie.q,{target:"e1gva98t6"})((({theme:{direction:e}})=>Object.assign({},(0,N.YJ)({direction:e,marginEnd:"12px"}))),"label:StyledAvatar;"),ue=(0,R.Z)("div",{target:"e1gva98t7"})({flex:"0 1 auto",minWidth:0},"label:DivSugItemContent;"),pe=(0,R.Z)("div",{target:"e1gva98t8"})((({theme:{fontWeights:e,typography:t,colors:i},isBrowserMode:o})=>Object.assign(Object.assign({height:"30px",padding:"5px 12px"},t.P3),{fontWeight:e.semiBold,color:o?"rgba(255, 255, 255, 0.5)":i.TextTertiary})),"label:DivSugAccountTitle;"),ge=(0,s.memo)((function(e){const{item:t,index:i,onSelect:a}=e,{active:r,handleMouseEnter:l}=te(i),{showingBrowserMode:d}=(0,n.mp)(w.O),{content:c,extra_info:u}=t,{nickname:p,unique_id:g,is_verified:h,rich_sug_avatar_uri:m}=u,_=Boolean(g),v=(0,s.useCallback)((e=>{null==a||a(e,t,i)}),[i,t,a]),y=_?"user-sug-item":"content-sug-item";return(0,o.jsxs)(ae,Object.assign({id:`sug-list-item-${i}`,"data-e2e":y,paddingVertical:9,active:r,onMouseDown:v,onMouseMove:l,role:"option"},{children:[_?(0,o.jsx)(ce,{"data-e2e":"sug-user-avatar",src:m,size:40},void 0):(0,o.jsx)(de,{children:(0,o.jsx)(M.Z,{fill:d?"rgba(255, 255, 255, 0.9)":void 0},void 0)},void 0),(0,o.jsx)(ue,{children:_?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(se,Object.assign({"data-e2e":"sug-username",isBrowserMode:d},{children:[g," ",h&&(0,o.jsx)(ee.Q,{"data-e2e":"sug-bluev",width:14,height:14},"badge")]}),void 0),(0,o.jsx)(re,Object.assign({"data-e2e":"sug-nickname",isBrowserMode:d},{children:p}),void 0)]},void 0):(0,o.jsx)(se,Object.assign({isBrowserMode:d},{children:c}),void 0)},void 0)]}),void 0)})),he=(0,s.memo)((function({index:e,onClick:t}){const i=(0,n.mp)(j.B,{dependencies:[],selector:e=>e.searchValue}),{active:a,handleMouseEnter:r}=te(e),{showingBrowserMode:l}=(0,n.mp)(w.O),d=(0,E.Q)()("view_all_results",{keyword:i}),c=(0,s.useCallback)((e=>{null==t||t(e,"click_view_all")}),[t]);return(0,o.jsx)(ae,Object.assign({id:`sug-list-item-${e}`,"data-e2e":"sug-more",paddingVertical:15,active:a,onMouseMove:r,onMouseDown:c,role:"option"},{children:(0,o.jsx)(le,Object.assign({isBrowserMode:l},{children:d}),void 0)}),void 0)})),me=(0,s.memo)((function(e){const t=(0,E.Q)(),[i,a]=(0,n.b7)(j.B,{selector:e=>e.sugList,dependencies:[]}),r=(0,s.useCallback)((()=>{a.setActiveIndex(-1)}),[a]),[l,d]=(0,s.useMemo)((()=>i.reduce((([e,t],i)=>(i.extra_info.sug_user_id?e.push(i):t.push(i),[e,t])),[[],[]])),[i]),{showingBrowserMode:c}=(0,n.mp)(w.O),u=(t,i=0)=>t.map(((t,n)=>(0,o.jsx)(ge,{item:t,index:n+i,onSelect:e.onSelect},t.content)));return(0,o.jsxs)(ne,Object.assign({id:"header-sug-results",onMouseLeave:r,role:"listbox","aria-label":t("accessibilityLabels_search_suggestions"),isBrowserMode:c,onScroll:O.UW,onWheel:O.UW},{children:[u(d),0===l.length?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(pe,Object.assign({"data-e2e":"sug-account",isBrowserMode:c},{children:t("search_account")}),void 0),u(l,d.length)]},void 0),(0,o.jsx)(he,{index:i.length,onClick:e.onSelectMore},void 0)]}),void 0)}));var _e=i(33177);const ve=e=>{const[{activeIndex:t},i]=(0,n.b7)(T.n),o=t===e,a=(0,s.useCallback)((()=>{o||i.setActiveIndex(e)}),[o,i,e]);return{active:o,handleMouseEnter:a}};var ye=i(79067);const be={id:"chevron_down_fill-c3b74fa9",use:"chevron_down_fill-c3b74fa9-usage",viewBox:"0 0 12 12",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" id="chevron_down_fill-c3b74fa9"><path fill="#161823" fill-opacity=".6" fill-rule="evenodd" d="M5.47 8.28 1.896 4.707a.25.25 0 0 1 0-.353l.708-.708a.25.25 0 0 1 .353 0L6 6.69l3.043-3.043a.25.25 0 0 1 .353 0l.708.708a.25.25 0 0 1 0 .353L6.53 8.28a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd" /></symbol>'};function fe(e){const t=(0,s.useContext)(ye.e);return(0,s.useLayoutEffect)((()=>(t.add(be),()=>{t.remove("chevron_down_fill-c3b74fa9")})),[]),(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,o.jsx)("use",{xlinkHref:"#chevron_down_fill-c3b74fa9"},void 0)}),void 0)}const xe={id:"chevron_down_fill_dark-37cc341d",use:"chevron_down_fill_dark-37cc341d-usage",viewBox:"0 0 12 12",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" id="chevron_down_fill_dark-37cc341d"><path fill="white" fill-opacity=".6" fill-rule="evenodd" d="M5.47 8.28 1.896 4.707a.25.25 0 0 1 0-.353l.708-.708a.25.25 0 0 1 .353 0L6 6.69l3.043-3.043a.25.25 0 0 1 .353 0l.708.708a.25.25 0 0 1 0 .353L6.53 8.28a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd" /></symbol>'};function we(e){const t=(0,s.useContext)(ye.e);return(0,s.useLayoutEffect)((()=>(t.add(xe),()=>{t.remove("chevron_down_fill_dark-37cc341d")})),[]),(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,o.jsx)("use",{xlinkHref:"#chevron_down_fill_dark-37cc341d"},void 0)}),void 0)}const ke={id:"clock_fill-d147987d",use:"clock_fill-d147987d-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="clock_fill-d147987d"><g clip-path="url(#clock_fill-d147987d_a)"><path fill="#161823" fill-opacity=".34" d="M.8 8a7.2 7.2 0 1 1 14.4 0A7.2 7.2 0 0 1 .8 8Zm9.764 2.853c.15.106.359.069.464-.082l.612-.874a.333.333 0 0 0-.082-.464L9.01 7.65a.333.333 0 0 1-.143-.273V4.334a.333.333 0 0 0-.333-.333H7.467a.333.333 0 0 0-.333.333v3.771c0 .218.106.421.284.546l3.146 2.202Z" /></g><defs><clipPath id="clock_fill-d147987d_a"><path fill="white" d="M0 0h16v16H0z" /></clipPath></defs></symbol>'};function Se(e){const t=(0,s.useContext)(ye.e);return(0,s.useLayoutEffect)((()=>(t.add(ke),()=>{t.remove("clock_fill-d147987d")})),[]),(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,o.jsx)("use",{xlinkHref:"#clock_fill-d147987d"},void 0)}),void 0)}const Ce={id:"clock_fill_dark-6f90c17d",use:"clock_fill_dark-6f90c17d-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="clock_fill_dark-6f90c17d"><g clip-path="url(#clock_fill_dark-6f90c17d_a)"><path fill="white" fill-opacity=".34" d="M.8 8a7.2 7.2 0 1 1 14.4 0A7.2 7.2 0 0 1 .8 8Zm9.764 2.853c.15.106.358.069.464-.082l.611-.874a.333.333 0 0 0-.082-.464L9.01 7.65a.333.333 0 0 1-.142-.273V4.334a.333.333 0 0 0-.333-.333H7.467a.333.333 0 0 0-.333.333v3.771c0 .218.106.421.284.546l3.145 2.202Z" /></g><defs><clipPath id="clock_fill_dark-6f90c17d_a"><path fill="white" d="M0 0h16v16H0z" /></clipPath></defs></symbol>'};function je(e){const t=(0,s.useContext)(ye.e);return(0,s.useLayoutEffect)((()=>(t.add(Ce),()=>{t.remove("clock_fill_dark-6f90c17d")})),[]),(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,o.jsx)("use",{xlinkHref:"#clock_fill_dark-6f90c17d"},void 0)}),void 0)}const Te={id:"fire-941ae4aa",use:"fire-941ae4aa-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="fire-941ae4aa"><path fill="#FE2C55" fill-rule="evenodd" d="M13.942 10.338c.196-1.164-.017-3.798-2.031-5.434-.165-.134-.408-.073-.515.11-.457.785-1.2 1.741-2.11 2.08.556-1.91.833-5.2-2.108-6.871a.327.327 0 0 0-.486.26c-.128 1.212-.275 2.216-2.227 4.18C3.3 6.093 1.7 8.096 2.05 10.337 2.44 12.853 4.647 15 8.039 15c3.393 0 5.49-2.201 5.903-4.662Z" clip-rule="evenodd" /></symbol>'};function Ie(e){const t=(0,s.useContext)(ye.e);return(0,s.useLayoutEffect)((()=>(t.add(Te),()=>{t.remove("fire-941ae4aa")})),[]),(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,o.jsx)("use",{xlinkHref:"#fire-941ae4aa"},void 0)}),void 0)}const Pe={id:"fire_dark-5b052da7",use:"fire_dark-5b052da7-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="fire_dark-5b052da7"><path fill="#FF3B5C" fill-rule="evenodd" d="M13.942 10.338c.196-1.164-.017-3.798-2.031-5.434-.165-.134-.408-.073-.515.11-.457.785-1.2 1.741-2.11 2.08.556-1.91.833-5.2-2.108-6.871a.327.327 0 0 0-.486.26c-.128 1.212-.275 2.216-2.227 4.18C3.3 6.093 1.7 8.096 2.05 10.337 2.44 12.853 4.647 15 8.039 15c3.393 0 5.49-2.201 5.903-4.662Z" clip-rule="evenodd" /></symbol>'};function Oe(e){const t=(0,s.useContext)(ye.e);return(0,s.useLayoutEffect)((()=>(t.add(Pe),()=>{t.remove("fire_dark-5b052da7")})),[]),(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,o.jsx)("use",{xlinkHref:"#fire_dark-5b052da7"},void 0)}),void 0)}const Le={id:"music-569eb6c9",use:"music-569eb6c9-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="music-569eb6c9"><path fill="#FE2C55" d="M13.667 1.401v9.933a2.333 2.333 0 1 1-2.334-2.333h1.2V3.147L6 3.997v8.337a2.333 2.333 0 1 1-2.334-2.333h1.2V2.462c0-.167.125-.309.291-.33L13.29 1.07c.2-.026.377.129.377.33Z" /></symbol>'};function Me(e){const t=(0,s.useContext)(ye.e);return(0,s.useLayoutEffect)((()=>(t.add(Le),()=>{t.remove("music-569eb6c9")})),[]),(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,o.jsx)("use",{xlinkHref:"#music-569eb6c9"},void 0)}),void 0)}const Ee={id:"music_dark-3eafadd1",use:"music_dark-3eafadd1-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="music_dark-3eafadd1"><path fill="#FF3B5C" d="M13.667 1.401v9.933a2.333 2.333 0 1 1-2.333-2.333h1.2V3.147l-6.533.85v8.337a2.333 2.333 0 1 1-2.334-2.333h1.2V2.462c0-.167.125-.309.29-.33l8.134-1.061c.2-.026.376.129.376.33Z" /></symbol>'};function Ae(e){const t=(0,s.useContext)(ye.e);return(0,s.useLayoutEffect)((()=>(t.add(Ee),()=>{t.remove("music_dark-3eafadd1")})),[]),(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,o.jsx)("use",{xlinkHref:"#music_dark-3eafadd1"},void 0)}),void 0)}const De={id:"sav-a2d83539",use:"sav-a2d83539-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="sav-a2d83539"><path fill="#FE2C55" fill-rule="evenodd" d="M8.333.507a.437.437 0 0 0-.666 0L1.105 8.209a.437.437 0 0 0 .333.721h3.529v5.86c0 .24.196.437.437.437H10.6a.437.437 0 0 0 .437-.438V8.93h3.526a.437.437 0 0 0 .333-.72L8.333.506Z" clip-rule="evenodd" /></symbol>'};function Fe(e){const t=(0,s.useContext)(ye.e);return(0,s.useLayoutEffect)((()=>(t.add(De),()=>{t.remove("sav-a2d83539")})),[]),(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,o.jsx)("use",{xlinkHref:"#sav-a2d83539"},void 0)}),void 0)}const Re={id:"sav_dark-1efe9b53",use:"sav_dark-1efe9b53-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="sav_dark-1efe9b53"><path fill="#FF3B5C" fill-rule="evenodd" d="M8.333.507a.437.437 0 0 0-.666 0L1.105 8.209a.437.437 0 0 0 .333.721h3.528v5.86c0 .24.196.437.438.437h5.194a.437.437 0 0 0 .438-.438V8.93h3.525a.437.437 0 0 0 .333-.72L8.333.506Z" clip-rule="evenodd" /></symbol>'};function Be(e){const t=(0,s.useContext)(ye.e);return(0,s.useLayoutEffect)((()=>(t.add(Re),()=>{t.remove("sav_dark-1efe9b53")})),[]),(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,o.jsx)("use",{xlinkHref:"#sav_dark-1efe9b53"},void 0)}),void 0)}const Ne={id:"x_mark-d678bc51",use:"x_mark-d678bc51-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="x_mark-d678bc51"><path fill="#161823" fill-opacity=".34" d="M7.057 8 3.431 4.374a.333.333 0 0 1 0-.472l.472-.471c.13-.13.34-.13.47 0L8 7.057l3.626-3.626c.13-.13.342-.13.472 0l.471.471c.13.13.13.342 0 .472L8.943 8l3.626 3.626c.13.13.13.341 0 .472l-.471.471a.333.333 0 0 1-.472 0L8 8.943l-3.626 3.626a.333.333 0 0 1-.471 0l-.472-.471a.333.333 0 0 1 0-.472L7.057 8Z" /></symbol>'};function We(e){const t=(0,s.useContext)(ye.e);return(0,s.useLayoutEffect)((()=>(t.add(Ne),()=>{t.remove("x_mark-d678bc51")})),[]),(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,o.jsx)("use",{xlinkHref:"#x_mark-d678bc51"},void 0)}),void 0)}const Ue={id:"x_mark_dark-4163f72f",use:"x_mark_dark-4163f72f-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="x_mark_dark-4163f72f"><path fill="white" fill-opacity=".34" d="M7.057 8 3.431 4.374a.333.333 0 0 1 0-.472l.472-.471c.13-.13.34-.13.47 0L8 7.057l3.626-3.626c.13-.13.342-.13.472 0l.471.471c.13.13.13.342 0 .472L8.943 8l3.626 3.626c.13.13.13.341 0 .472l-.471.471a.333.333 0 0 1-.472 0L8 8.943l-3.626 3.626a.333.333 0 0 1-.471 0l-.472-.471a.333.333 0 0 1 0-.472L7.057 8Z" /></symbol>'};function qe(e){const t=(0,s.useContext)(ye.e);return(0,s.useLayoutEffect)((()=>(t.add(Ue),()=>{t.remove("x_mark_dark-4163f72f")})),[]),(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,o.jsx)("use",{xlinkHref:"#x_mark_dark-4163f72f"},void 0)}),void 0)}const ze=(0,R.Z)("ul",{target:"e1ysk6kp0"})((({theme:{colors:e,isDark:t}})=>({position:"absolute",width:"100%",marginTop:"8px",background:e.BGSecondary,boxShadow:t?"":`0 2px 12px ${e.ShadowPrimary}`,borderRadius:"8px",paddingTop:"8px",boxSizing:"border-box",maxHeight:`min(calc(100vh - 96px - ${N.Mz}px), 734px)`,overflowY:"auto",overflowX:"hidden",listStyleType:"none",paddingInlineStart:0})),"label:UlContainer;");ze.defaultProps=Object.assign(Object.assign({},ze.defaultProps),{"data-e2e":"sug-container"});const $e=(0,R.Z)("div",{target:"e1ysk6kp1"})((({theme:e,theme:{colors:t}})=>[(0,N.GI)({theme:e,fontWeight:"semiBold",fontFamily:"Proxima"}),{fontSize:"14px",lineHeight:"22px",color:t.TextSecondary,padding:"5px 12px 3px"}]),"label:DivHeader;"),He=(0,R.Z)("li",{target:"e1ysk6kp2"})((({active:e,theme:{colors:t}})=>({padding:"9px 16px",cursor:"pointer",background:e?t.BGView:void 0,display:"flex",alignItems:"center"})),"label:LiItemContainer;"),Ze=(0,R.Z)("h4",{target:"e1ysk6kp3"})((({theme:e,theme:{direction:t}})=>[(0,N.GI)({theme:e,fontWeight:"semiBold",fontFamily:"Proxima"}),{fontSize:"16px",lineHeight:"24px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},(0,N.YJ)({direction:t,paddingStart:"8px",paddingEnd:"12px"})]),"label:H4ItemText;"),Ve=(0,R.Z)("div",{target:"e1ysk6kp4"})((({theme:{direction:e}})=>[(0,N.YJ)({direction:e}),{width:"100%",padding:"12px 0px",cursor:"pointer",display:"flex",justifyContent:"center",textAlign:"center",alignItems:"center"}]),"label:DivFooter;"),Ge=(0,R.Z)("div",{target:"e1ysk6kp5"})((({theme:e,theme:{direction:t,colors:i}})=>[(0,N.GI)({theme:e,fontWeight:"semiBold",fontFamily:"Proxima"}),(0,N.YJ)({direction:t,marginStart:"2px"}),{color:i.TextTertiaryAlt,fontSize:"15px",lineHeight:"18px"}]),"label:DivFooterText;"),Qe=(0,R.Z)(fe,{target:"e1ysk6kp6"})((({theme:{direction:e}})=>[(0,N.YJ)({direction:e,marginStart:"2px"}),{width:"12px",height:"12px"}]),"label:StyledChevronDown;"),Je=(0,R.Z)(we,{target:"e1ysk6kp7"})((({theme:{direction:e}})=>[(0,N.YJ)({direction:e,marginStart:"2px"}),{width:"12px",height:"12px"}]),"label:StyledChevronDownDark;"),Ye={width:"16px",height:"16px",flexShrink:0},Ke=(0,R.Z)(Se,{target:"e1ysk6kp8"})(Ye,"label:StyledClockFill;"),Xe=(0,R.Z)(je,{target:"e1ysk6kp9"})(Ye,"label:StyledClockFillDark;"),et=(0,R.Z)(We,{target:"e1ysk6kp10"})((({theme:{direction:e}})=>[(0,N.YJ)({direction:e,marginStart:"auto"}),Ye]),"label:StyledXMark;"),tt=(0,R.Z)(qe,{target:"e1ysk6kp11"})((({theme:{direction:e}})=>[(0,N.YJ)({direction:e,marginStart:"auto"}),Ye]),"label:StyledXMarkDark;"),it=(0,R.Z)("div",{target:"e1ysk6kp12"})({width:"16px",height:"16px",display:"flex",flexShrink:0,justifyContent:"center",alignItems:"center"},"label:DivMark;"),ot=(0,R.Z)("div",{target:"e1ysk6kp13"})((({theme:{colors:e}})=>({width:"6px",height:"6px",borderRadius:"50%",background:e.TextQuaternary})),"label:DivMarkDot;"),nt={2:(0,R.Z)(Ie,{target:"e1ysk6kp15"})(Ye),17:(0,R.Z)(Fe,{target:"e1ysk6kp16"})(Ye),18:(0,R.Z)(Me,{target:"e1ysk6kp17"})(Ye)},at={2:(0,R.Z)(Oe,{target:"e1ysk6kp18"})(Ye),17:(0,R.Z)(Be,{target:"e1ysk6kp19"})(Ye),18:(0,R.Z)(Ae,{target:"e1ysk6kp20"})(Ye)},st=(0,s.memo)((function(e){const{offset:t,index:i,item:a,onSelect:r}=e,{isDark:l}=(0,L.u)(),{active:d,handleMouseEnter:c}=ve(t+i),[{rootEnterFrom:g}]=(0,n.b7)(S.t8,{selector:e=>({rootEnterFrom:e.searchGlobalParams.rootEnterFrom}),dependencies:[]}),h=(0,s.useCallback)((e=>{var t,o,n,s;e.preventDefault(),(null==a?void 0:a.word)&&(p.xq.handleTrendingWordsClick({enter_from:g,words_source:"recom_search",words_position:i,words_content:null==a?void 0:a.word,search_position:u.W.commonParams.page_name,words_type:null!==(o=_e.Y[null!==(t=null==a?void 0:a.word_type)&&void 0!==t?t:""])&&void 0!==o?o:"",group_id:null!==(n=null==a?void 0:a.group_id)&&void 0!==n?n:"",impr_id:null!==(s=null==a?void 0:a.impr_id)&&void 0!==s?s:""}),null==r||r(e,null==a?void 0:a.word,"recom_search",null==a?void 0:a.impr_id,!1))}),[a,i,r,g]);return(0,o.jsxs)(He,Object.assign({id:`transfer-list-item-${i}`,active:d,onMouseMove:c,onMouseDown:h},{children:[(()=>{if(null==a?void 0:a.word_type){const e=nt[null==a?void 0:a.word_type],t=at[null==a?void 0:a.word_type];if(l&&t)return(0,o.jsx)(t,{},void 0);if(e)return(0,o.jsx)(e,{},void 0)}return(0,o.jsx)(it,{children:(0,o.jsx)(ot,{},void 0)},void 0)})(),(0,o.jsx)(Ze,{children:a.word},void 0)]}),void 0)})),rt=(0,s.memo)((function(e){const{index:t,item:i,onSelect:a,onDeleteHistory:r}=e,{isDark:l}=(0,L.u)(),{active:d,handleMouseEnter:c}=ve(t),[{rootEnterFrom:g}]=(0,n.b7)(S.t8,{selector:e=>({rootEnterFrom:e.searchGlobalParams.rootEnterFrom}),dependencies:[]}),h=(0,s.useCallback)((e=>{e.preventDefault(),p.xq.handleSearchHistory({search_entrance:g,search_position:u.W.commonParams.page_name,search_keyword:i,action_type:"click",order:t}),null==a||a(e,i,"search_history")}),[i,t,a,g]),m=(0,s.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),null==r||r(i,t)}),[i,t,r]);return(0,o.jsxs)(He,Object.assign({id:`transfer-list-item-${t}`,active:d,onMouseMove:c,onMouseDown:h},{children:[l?(0,o.jsx)(Xe,{},void 0):(0,o.jsx)(Ke,{},void 0),(0,o.jsx)(Ze,{children:i},void 0),l?(0,o.jsx)(tt,{onMouseDown:m},void 0):(0,o.jsx)(et,{onMouseDown:m},void 0)]}),void 0)})),lt=(0,s.memo)((function(e){const{hasHistory:t,hasGuessSearch:i,onSelect:a}=e,r=(0,E.Q)(),{isDark:l}=(0,L.u)(),[d,c]=(0,s.useState)(!0),[{rootEnterFrom:g}]=(0,n.b7)(S.t8,{selector:e=>({rootEnterFrom:e.searchGlobalParams.rootEnterFrom}),dependencies:[]}),[{historyList:h,guessSearchList:m},_]=(0,n.b7)(T.n,{dependencies:[],selector:e=>({historyList:e.historyList,guessSearchList:e.guessSearchList})});(0,s.useEffect)((()=>{const e=(0,O.le)(y.uW);if(e){const t=JSON.parse(e);_.setHistoryList(t)}}),[_]);const v=(0,s.useCallback)((()=>{_.setActiveIndex(-1)}),[_]),b=(0,s.useCallback)((e=>{e.preventDefault(),p.xq.handleSearchHistory({search_entrance:g,search_position:u.W.commonParams.page_name,search_keyword:"",action_type:"show_all",order:-1}),c(!1)}),[c,g]),f=(0,s.useCallback)((e=>{e.preventDefault(),p.xq.handleSearchHistory({search_entrance:g,search_position:u.W.commonParams.page_name,search_keyword:"",action_type:"clear_all",order:-1}),_.setHistoryList([]),(0,O.e8)(y.uW)}),[_,g]),x=()=>{if(d&&!(h.length<=5))return(0,o.jsxs)(Ve,Object.assign({onMouseDown:b},{children:[(0,o.jsx)(Ge,{children:r("embed_music_card_see_more")},void 0),l?(0,o.jsx)(Je,{},void 0):(0,o.jsx)(Qe,{},void 0)]}),void 0)},w=()=>{if(!(d||h.length<=5))return(0,o.jsx)(Ve,Object.assign({onMouseDown:f},{children:(0,o.jsx)(Ge,{children:r("web_search_clear_btn")},void 0)}),void 0)},k=(0,s.useCallback)(((e,t)=>{p.xq.handleSearchHistory({search_entrance:g,search_position:u.W.commonParams.page_name,search_keyword:"",action_type:"clear",order:t});const i=h.filter((t=>t!==e));_.setHistoryList(i),(0,O.D$)(y.uW,JSON.stringify(i))}),[h,_,g]);return(0,o.jsxs)(ze,Object.assign({id:"header-transfer",onMouseLeave:v},{children:[(()=>{if(!h.length||!t)return;let e=h;return h.length>5&&d&&(e=h.slice(0,5)),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)($e,{children:r("web_search_recent_header")},void 0),e.map(((e,t)=>(0,o.jsx)(rt,{item:e,index:t,onDeleteHistory:k,onSelect:a},e))),x(),w()]},void 0)})(),(()=>{var e;if(!i||!m.length)return;let t=null!==(e=Number(h.length))&&void 0!==e?e:0;return h.length>5&&d&&(t=5),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)($e,{children:r("pc_web_you_may_like")},void 0),m.map(((e,i)=>(0,o.jsx)(st,{item:e,offset:t,index:i,onSelect:a},e.word)))]},void 0)})()]}),void 0)})),{getPureUserPath:dt}=l.Z,ct={[c.nT.searchHome]:"general",[c.nT.searchUser]:"user",[c.nT.searchVideo]:"video"},ut=c.nT.searchReminder,pt=(0,s.memo)((function({onBrowserModeClose:e}){var t,i,l;const{search:L,pathname:M}=(0,r.TH)(),{q:E}=(0,a.parse)(L),{withNewStyle:A}=(0,h.C)(),{showingBrowserMode:D}=(0,n.mp)(w.O),F=(0,s.useMemo)((()=>D?"browser_mode":"video"===(0,P.Xq)(M)?"video_detail":""),[M,D]),R=(0,k.if)(ct[M]),B=(0,s.useRef)(null),{placeholder:N,hasVideoSugWord:W,word_id:U,logId:q}=(0,C.Uh)(D),[{searchValue:z,loading:$,sugList:H,inputFocus:Z,activeIndex:V},G]=(0,n.b7)(j.B,{dependencies:[],selector:e=>({searchValue:e.searchValue,loading:e.loading,sugList:e.sugList,inputFocus:e.inputFocus,activeIndex:e.activeIndex})}),{lang:Q,user:J}=(0,n.mp)(b.G,{selector:e=>{var t;return{lang:e.lang,user:null===(t=e.appContext)||void 0===t?void 0:t.user}},dependencies:[]}),{searchVideoForLoggedin:Y}=(0,n.mp)(x.r,{selector:e=>{var t,i;return{searchVideoForLoggedin:null!==(i=null===(t=e.bizContext)||void 0===t?void 0:t.searchVideoForLoggedin)&&void 0!==i?i:[]}},dependencies:[]}),{isOpenNewTab:ee}=(0,m.EA)(),[{currentKeyword:te,rootEnterFrom:ie},oe]=(0,n.b7)(S.t8,{selector:e=>{var t,i;return{currentKeyword:null!==(i=null===(t=e[ct[M]])||void 0===t?void 0:t.keyword)&&void 0!==i?i:"",rootEnterFrom:e.searchGlobalParams.rootEnterFrom}},dependencies:[M]}),[{transferHistoryList:ne,guessSearchList:ae,blankpageEnterMethod:se},re]=(0,n.b7)(T.n,{dependencies:[],selector:e=>({transferHistoryList:e.historyList,guessSearchList:e.guessSearchList,blankpageEnterMethod:e.blankpageEnterMethod})}),le=Boolean(J),de=null===(t=null==J?void 0:J.hasSearchPermission)||void 0===t||t,ce=(0,s.useRef)([]),{abTestVersion:ue}=(0,_.m7)((0,f.Lh)((()=>["abTestVersion"]),[])),pe=null!==(i=(0,v.N8)(ue,"search_transfer_history"))&&void 0!==i?i:"v1",ge=null!==(l=(0,v.N8)(ue,"search_transfer_guesssearch"))&&void 0!==l?l:"v1",he="v2"===pe&&le,_e="v2"===ge,ve=(0,r.k6)(),ye=(0,r.TH)(),be=(0,s.useCallback)((()=>{G.getSugList({app_language:(0,d.s)(Q),history_list:encodeURIComponent(JSON.stringify(ce.current)),keyword:z})}),[G,Q,z]),fe=(0,s.useMemo)((()=>{let e=[];const t=(0,O.le)(y.uW);return t&&(e=JSON.parse(t)),e}),[]),xe=(0,s.useCallback)((()=>{re.setHistoryList(fe)}),[re,fe]),we=!Boolean((0,r.LX)(M,{path:ut}))&&Boolean((0,r.LX)(M,{path:c.nT.searchHome})),ke=(0,s.useCallback)((e=>{let t=[];const i=(0,O.le)(y.uW);i&&(t=JSON.parse(i).filter((t=>t!==e))),t.unshift(e),t.length>10&&(t=t.slice(0,10)),re.setHistoryList(t),(0,O.D$)(y.uW,JSON.stringify(t))}),[re]);(0,s.useEffect)((()=>{G.setVideoPageType(F)}),[F]),(0,s.useEffect)((()=>{we&&E&&G.setSearchValue(String(E))}),[E,we]),(0,s.useEffect)((()=>{he&&E&&ke(String(E))}),[E,he]),(0,s.useEffect)((()=>{be()}),[be]),(0,s.useEffect)((()=>{D||xe()}),[xe,D]),(0,s.useEffect)((()=>{ie||oe.setSearchGlobalParams({rootEnterFrom:we?"search_outer":u.W.commonParams.page_name})}),[ie,we,oe]);const Se=(0,s.useCallback)(((t,i,o,n)=>{var s;G.setInputFocus(!1);const r=Date.now();let l=we?ye.pathname:c.SN.searchHome();if(null===(s=null==B?void 0:B.current)||void 0===s||s.onEnterInputBlur(),we&&i===te)return void R(!0,!0);!le&&Y&&void 0===n&&(l=c.SN.searchUser());const d=(0,I.C)({location:ye,to:{pathname:l,search:{q:i,t:r}}});D&&ee?window.open((0,a.stringifyUrl)({url:d,query:Object.assign({searchSource:"normal_search",videoPageType:F},o)})):(null==e||e(t,!0),ve.push(d,Object.assign({searchSource:"normal_search",videoPageType:F},o)))}),[we,ye,le,R,ve,G,Y,te,e,D,ee,F]),Ce=(0,s.useCallback)(((e,t,i)=>{const{extra_info:{unique_id:o,sug_user_id:n},word_record:{words_content:s,group_id:r},content:l,impr_id:d}=t;ce.current.push(l);const c=Boolean(n);p.xq.handleSugClick({impr_id:d,words_source:"sug",words_position:i,words_content:s,raw_query:z,sug_type:c?"enrich_sug":"normal_sug",query_id:"",group_id:r,video_page_type:F,search_position:D?"video_detail":u.W.commonParams.page_name}),c?(g.W.handleEnterUser({enter_from:"search_sug",search_keyword:z,to_user_id:n,search_id:d,impr_id:d,rank:i,search_type:ct[M]}),window.location.href=(0,a.stringifyUrl)({url:dt({uniqueId:o}),query:{lang:Q}})):(oe.resetSearchResult(),Se(e,l,{enterMethod:"click_icon",searchSource:"search_sug",blankpageEnterFrom:u.W.commonParams.page_name,blankpageEnterMethod:se}))}),[z,F,D,M,Q,oe,Se,se]),je=(0,s.useCallback)(((e,t,i,o,n)=>{ce.current.push(t),G.setSearchValue(t),Se(e,t,{enterMethod:i,imprId:o,blankpageEnterFrom:u.W.commonParams.page_name,blankpageEnterMethod:se},n)}),[Se,G,se]),Te=(0,s.useCallback)(((e,t)=>{oe.resetSearchResult(),Se(e,z,{enterMethod:t})}),[Se,oe,z]),Ie=(0,s.useCallback)(((e,t)=>{G.setSearchValue(N),oe.resetSearchResult(),p.xq.handleTrendingWordsClick({enter_from:ie,search_position:u.W.commonParams.page_name,words_source:"related_search_anchor_v2",words_position:0,words_content:N,words_type:"search_bar_outer",group_id:null!=U?U:"",impr_id:null!=q?q:"",previous_page:u.W.commonParams.previous_page,video_page_type:F}),Se(e,N,{enterMethod:t,searchSource:"default_search_keyword",preClickId:q})}),[G,Se,q,N,ie,oe,U,F]),Pe=(0,s.useCallback)(((e,t)=>{if(z){if(t&&H[V])return void Ce(e,H[V],V);Te(e,t?"click_enter":"click_icon")}else W&&Ie(e,t?"click_enter":"click_icon")}),[z,H,V,Te,W,Ie,Ce]);return(0,s.useEffect)((()=>{Z||re.setNewGuessSearchWord(void 0)}),[Z,re]),(0,s.useEffect)((()=>{void 0===e&&D||!W||D&&!A||p.xq.handleTrendingWordsShow({enter_from:ie,search_position:u.W.commonParams.page_name,words_source:"related_search_anchor_v2",words_position:0,words_content:N,words_type:"search_bar_outer",group_id:null!=U?U:"",impr_id:null!=q?q:"",previous_page:u.W.commonParams.previous_page,video_page_type:F})}),[W,D,q,N,ie,U,A,F,e]),de?(0,o.jsxs)(X,Object.assign({isBrowserMode:D,onClick:O.UW},{children:[(0,o.jsx)(K,{initialValue:"",onSubmit:Pe,ref:B},void 0),!$&&Boolean(z)&&H.length>0&&Z?(0,o.jsx)(me,{onSelect:Ce,onSelectMore:Te},void 0):null,D||$||z.length||!Z||!(he&&ne.length||_e&&ae.length)?null:(0,o.jsx)(lt,{onSelect:je,hasHistory:he,hasGuessSearch:_e},void 0)]}),void 0):null}))},58899:(e,t,i)=>{function o(e,t){const i=function(e){const t=[];for(const[i]of Object.entries(e)){const o=`${i}=${encodeURIComponent(e[i])}`;t.push(o)}return t.join("&")}(t);return e.indexOf("?")>-1?`${e}&${i}`:`${e}?${i}`}function n(e,t){var i;const o={},n=function(e){if("string"==typeof e){let t={};try{t=JSON.parse(e)}catch(e){return{}}return t}return e}(e);for(const[e]of Object.entries(n)){const a=n[e];if("string"==typeof a){const n=a.split(".");let s=t;for(;n.length>0&&void 0!==s;)s=s[null!==(i=n.shift())&&void 0!==i?i:""];o[e]=s}}return o}function a(e,t){if(void 0!==t)for(const i of e)if(t===i.reason_code)return i;return null}i.d(t,{bA:()=>o,NQ:()=>n,EE:()=>a})},29025:(e,t,i)=>{i.d(t,{iS:()=>_,sJ:()=>v,HJ:()=>y,y7:()=>b,It:()=>f,FH:()=>x,il:()=>w,Yf:()=>k,PT:()=>S,jG:()=>C,iA:()=>j,Ny:()=>T,pV:()=>I,Rj:()=>P,bG:()=>O,yk:()=>L,hn:()=>M,EA:()=>E,Iu:()=>A,JZ:()=>D,BY:()=>F,F3:()=>R,D8:()=>B});var o=i(91051),n=i(21041),a=i(43139),s=i(22597),r=i(14897),l=i(39664),d=i(17133),c=i(58854),u=i(71300),p=i(33642),g=i(99297);const h="abTestVersion",m="videoPlayerConfig";function _(){var e;const{abTestVersion:t}=(0,p.m7)((0,d.Lh)((()=>[h]),[])),i=null!==(e=(0,g.N8)(t,"favorite_test"))&&void 0!==e?e:"v0";return{isFavoriteV1:"v0"===i,isFavoriteV2:"v1"===i,isFavoriteV3:"v2"===i}}function v(){var e;const{abTestVersion:t}=(0,p.m7)((0,d.Lh)((()=>[h]),[])),i=null!==(e=(0,g.N8)(t,"cta_phase2"))&&void 0!==e?e:"v1";return{isCTATestV1:"v1"===i,isCTATestV2:"v2"===i}}function y(){var e,t;const{abTestVersion:i}=(0,p.m7)((0,d.Lh)((()=>[h]),[]));let o=null!==(e=(0,g.N8)(i,"mobile_ui_opt_ab"))&&void 0!==e?e:"v1",n=null!==(t=(0,g.N8)(i,"mobile_ui_opt_ab_phrase2"))&&void 0!==t?t:"v1";const{isSmartPlayer:a}=(0,r.Zp)();a&&(n="v1",o="v1");const s="v7"===o,l="v8"===o,c=(0,g.Sf)("feature_mobile_ui_opt_stage2")&&!a,u=(0,g.Sf)("feature_mobile_ui_opt_debug")&&!a,m="v7"===n;return{isMobileUiOptOnlineGroup:"v1"===o,shouldAddUnderline:"v2"===o||s||l,isFypDescriptionOpt:"v3"===o||s||l,shouldRemoveUserNameAt:"v4"===o||s,isEngageOpt:"v5"===o||s||l,isTabBarOpt:"v6"===o||s||l,isMobileUiOptStage2:c,isCtaUiOpt:(0,g.Sf)("feature_mobile_cta_fix_bottom")&&!a,shouldAddMask:"v2"===n||m,shouldDescription60:"v3"===n||m,shouldOptMusicAnimation:"v4"===n||m,shouldOptTopTabs:"v5"===n||m,shouldUseCreatorNickName:"v6"===n||m,isMobileUiDebugOn:u}}function b(){var e;const{abTestVersion:t}=(0,p.m7)((0,d.Lh)((()=>[h]),[])),{videoPlayerConfig:i}=(0,p.m7)((0,c.h)((()=>[m]),[])),{pathname:a}=(0,n.TH)(),{feedMode:r}=(0,o.useContext)(l.yb),u=null!==(e=(0,g.N8)(t,"video_feed_redesign"))&&void 0!==e?e:"v1";let _=u;"one_column_mode"===r&&(_="v1");const v="v1"===_;return{isUseNativePlayer:null==i?void 0:i.fallback,isVideoFeedRedesignV1:v,isVideoFeedRedesignV2:"v2"===_,isVideoFeedRedesignV3:"v3"===_,isInVideoFeedRedesign:!v&&((0,s.oC)(a)||(0,s.FZ)(a)),isRealInVideoFeedRedesign:"v1"!==u&&((0,s.oC)(a)||(0,s.FZ)(a))}}function f(){var e;const{abTestVersion:t}=(0,p.m7)((0,d.Lh)((()=>[h]),[])),{videoPlayerConfig:i}=(0,p.m7)((0,c.h)((()=>[m]),[]));return{isUseNativePlayer:null==i?void 0:i.fallback,adaptBitrateVid:null!==(e=(0,g.N8)(t,"video_bitrate_adapt"))&&void 0!==e?e:"v1"}}function x(){var e;const{abTestVersion:t}=(0,p.m7)((0,d.Lh)((()=>[h]),[])),{playbackNormalizePath:i}=(0,p.m7)((0,c.h)((()=>["playbackNormalizePath"]),[]));return{normalizationVid:null!==(e=(0,g.N8)(t,"volume_normalize"))&&void 0!==e?e:"v1",playbackNormalizePath:i}}function w(){var e;const{abTestVersion:t}=(0,p.m7)((0,d.Lh)((()=>[h]),[]));return null!==(e=(0,g.N8)(t,"xg_volume_test"))&&void 0!==e?e:"v1"}function k(){const{xgplayerInitHost:e}=(0,p.m7)((0,c.h)((()=>["xgplayerInitHost"]),[]));return{xgplayerInitHost:e}}function S(){const{videoOrder:e}=(0,p.m7)((0,c.h)((()=>["videoOrder"]),[]));return{videoOrder:null==e?void 0:e.videoOrder}}function C(){const{bitrateSelectorConfigs:e}=(0,p.m7)((0,c.h)((()=>["bitrateSelectorConfigs"]),[]));return{bitrateSelectorConfigs:null==e?void 0:e.configs}}function j(){const{pathname:e}=(0,n.TH)(),t=(0,u.HX)()?"v1":"v2",i=(0,s.cQ)(e),o="v1"!==t,a="v1"!==t;return{isVideoPlayerOptimization:o,hasPip:a,isUIOptimization:!1,isVideoDetailUIOptimization:!1,hasVideoDetailPip:a&&i,isVideoDetailExperiment:"v1"!==t&&i,isVideoDetailPlayerExperiment:o&&i}}function T(){var e;const{abTestVersion:t}=(0,p.m7)((0,d.Lh)((()=>[h]),[]));return{shouldUseAds:"v2"===(null!==(e=(0,g.N8)(t,"tt4b_ads"))&&void 0!==e?e:"v1")}}const I=e=>{if(!e)return{};const{id:t,type:i,isClaimed:o,cityCode:n,countryCode:s,ttTypeNameSuper:r,ttTypeNameMedium:l,ttTypeNameTiny:d,ttTypeCode:c,typeCode:u}=e;return{poi_id:t,poi_backend_type:i,poi_detail_type:a.L7[null!=i?i:0],is_claimed:o?1:0,poi_city:n,poi_region_code:s,tt_poi_backend_type:`${r},${l},${d}|${c}`,poi_type_code:u}},P=()=>{var e;const{abTestVersion:t}=(0,p.m7)((0,d.Lh)((()=>["abTestVersion"]),[])),i=null!==(e=(0,g.N8)(t,"explore_test"))&&void 0!==e?e:"v1";return{isExploreEnable:"v1"!==i,mode:"v2"===i?0:1}},O=()=>{var e;const{abTestVersion:t}=(0,p.m7)((0,d.Lh)((()=>["abTestVersion"]),[]));return"v2"===(null!==(e=(0,g.N8)(t,"has_system_notification_inbox"))&&void 0!==e?e:"v1")};function L(){var e;const{abTestVersion:t}=(0,p.m7)((0,d.Lh)((()=>[h]),[])),{pathname:i}=(0,n.TH)(),{isInVideoFeedRedesign:o}=b(),a=null==t?void 0:t.versionName.split(",");return{isInHorizontalBoostUI:null!==(e=null==a?void 0:a.includes("71188781"))&&void 0!==e&&e&&((0,s.oC)(i)||(0,s.FZ)(i))&&!o}}const M=()=>{var e;const{abTestVersion:t}=(0,p.m7)((0,d.Lh)((()=>["abTestVersion"]),[])),{isInHorizontalBoostUI:i}=L(),o=null!==(e=(0,g.N8)(t,"ui_layout_alignment"))&&void 0!==e?e:"v1";return{isInUILayoutAlignment:("v2"===o||"v3"===o)&&!i,useEnlargedVideoPlayer:"v3"===o&&!i}},E=()=>{var e;const{abTestVersion:t}=(0,p.m7)((0,d.Lh)((()=>["abTestVersion"]),[]));return{isOpenNewTab:"v2"===(null!==(e=(0,g.N8)(t,"webapp_browser_mode_new_tab"))&&void 0!==e?e:"v1")}},A=()=>{var e;const{abTestVersion:t}=(0,p.m7)((0,d.Lh)((()=>["abTestVersion"]),[]));return"v2"===(null!==(e=(0,g.N8)(t,"use_inbox_notice_count_api"))&&void 0!==e?e:"v1")},D=()=>{var e;const{abTestVersion:t}=(0,p.m7)((0,d.Lh)((()=>["abTestVersion"]),[]));return"v2"===(null!==(e=(0,g.N8)(t,"sidenav_test"))&&void 0!==e?e:"v1")},F=()=>{var e;const{abTestVersion:t}=(0,p.m7)((0,d.Lh)((()=>["abTestVersion"]),[])),i=null!==(e=(0,g.N8)(t,"webapp_auto_refresh"))&&void 0!==e?e:"v1";return{refreshWhenExpireAndEmpty:"v2"===i,refreshInAllCase:"v3"===i}},R=()=>{var e;const{abTestVersion:t}=(0,p.m7)((0,d.Lh)((()=>["abTestVersion"]),[]));return"v2"===(null!==(e=(0,g.N8)(t,"should_highlight_hashtag"))&&void 0!==e?e:"v1")},B=()=>{var e;const{abTestVersion:t}=(0,p.m7)((0,d.Lh)((()=>[h]),[])),i=null!==(e=(0,g.N8)(t,"browser_mode_creator_tab"))&&void 0!==e?e:"v1",o="v2"===i,n="v3"===i;return{creatorTabCommentDefault:o,creatorTabDefault:n,showCreatorTab:o||n}}},49290:(e,t,i)=>{i.d(t,{ew:()=>p,y9:()=>g,Cl:()=>h,Us:()=>m,vO:()=>_,NI:()=>v,jP:()=>y,IH:()=>b});var o,n,a,s,r,l,d,c,u=i(69551);!function(e){e.General="",e.Account="account",e.Common="common",e.Bug="bug",e.Feat="feature"}(o||(o={})),function(e){e[e.HideStillReport=2048]="HideStillReport",e[e.Account=4096]="Account"}(n||(n={})),function(e){e[e.ImageAnswer=1]="ImageAnswer",e[e.CategoryName=2]="CategoryName",e[e.Link=3]="Link"}(a||(a={})),function(e){e[e.NotEntranceShowType=0]="NotEntranceShowType",e[e.NotSolveAfterShow=1]="NotSolveAfterShow",e[e.NotSolveBeforeShow=2]="NotSolveBeforeShow",e[e.NotSolveAfterNotShow=3]="NotSolveAfterNotShow"}(s||(s={})),function(e){e[e.AlwaysShow=0]="AlwaysShow"}(r||(r={})),function(e){e.General="general"}(l||(l={})),function(e){e.V2="v2",e.V3="v3"}(d||(d={})),function(e){e.Yes="yes",e.No="no"}(c||(c={}));const p="general",g={5678:"login_page",9190:"login_page_lite",13e3:"abnor_live_purch",13417:"eg_referral",12043:"th_referral",10541:"br_referral",10561:"id_referral",11087:"Creator_Fund_EU",10960:"Creator_Fund",15376:"ca_referral",15375:"au_referral",15048:"BA_registration",13186:"TikTok_shoutouts",12996:"balance_page",13053:"br_referral_lite"},h=["US"],m=3,_=4,v={getListV2:"/feedback/2/common_feedback_list/",getListV3:"/feedback/3/common_feedback_list/",getNewestReply:"/api/feedback/v1/newest_reply/",uploadImage:"/node/feedback/upload_image/",getReportRecords:"/feedback/3/list/",submitFeedback:"/feedback/2/post_message/"},y=["image/png","image/jpeg","image/jpg","image/bmp"],b={id:"",label:u.Q.HELP_CENTER.key,translated:!1}},69551:(e,t,i)=>{i.d(t,{Q:()=>o});const o={IS_YOUR_PROBLEM_RESOLVED:{key:"Is your problem resolved?"},BACKEND_SETTINGS_YES:{key:"backend_settings_yes"},BACKEND_SETTINGS_NO:{key:"backend_settings_no"},THANK_YOU_FOR_YOUR_FEEDBACK:{key:"Thank you for your feedback"},BACKEND_SETTINGS_STILLHAVEPROBLEM:{key:"backend_settings_stillhaveproblem"},HELP_CENTER:{key:"Help Center"},BACKEND_SETTINGS_TOPIC_TITLE:{key:"backend_settings_topictitle"},FEEDBACK_AND_HELP:{key:"Feedback and help"},FEEDBACK_PC_BACK:{key:"feedback_pc_back"},BACKEND_SETTINGS_FAQTITLE:{key:"backend_settings_faqtitle"},REPORT_A_PROBLEM:{key:"Report a problem"},FEEDBACK_PC_HISTORY:{key:"feedback_pc_history"},TELL_US_YOUR_FEEDBACK:{key:"Tell us your feedback"},PLEASE_PROVIDE_AS_MUCH_DETAIL_AS_POSSIBLE:{key:"Please provide as much detail as possible"},FEEDBACK_PC_UPLOAD:{key:"feedback_pc_upload"},SUBMIT:{key:"Submit"},NETWORK_ERROR_PLEASE_TRY_AGAIN:{key:"Network error. Please try again."},COM_MIG_YOUR_SUPPORT_TICKETS:{key:"com_mig_your_support_tickets"},DESCRIPTION_MUST_BE_AT_LEAST_2_CHARS:{key:"Description must be at least 2 characters"}}},4776:(e,t,i)=>{i.d(t,{s:()=>a,q:()=>s});var o=i(91051),n=i(68457);function a({elemRef:e,onHitBottom:t,bottomThreshold:i=10,throttle:a=100}){const s=(0,n.fB)((()=>{if(!e.current)return;const{offsetHeight:o,scrollTop:n,scrollHeight:a}=e.current;o+n+i>=a&&(null==t||t())}),[i,e,t],a);(0,o.useEffect)((()=>{const{current:t}=e;return null==t||t.addEventListener("scroll",s),()=>{null==t||t.removeEventListener("scroll",s)}}),[e,e.current,s])}function s({elemRef:e,onHitBottom:t,bottomThreshold:i=10,throttle:a=100}){const s=(0,n.fB)((()=>{if(!e.current)return;const{bottom:o}=e.current.getBoundingClientRect();o-i<=window.innerHeight&&(null==t||t())}),[i,e,t],a);(0,o.useEffect)((()=>(window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)})),[s])}},3984:(e,t,i)=>{i.d(t,{s:()=>a});var o=i(91051),n=i(68457);function a({elementRef:e,threshold:t=1e3,onHitBottom:i,onPageBottom:a,shouldRunOnMount:s,onScroll:r}){const l=(0,o.useRef)(null),d=(0,o.useRef)(0),c=(0,o.useRef)(0),u=(0,o.useRef)(!s),p=(0,o.useCallback)((()=>{"undefined"!=typeof window&&window.clearInterval(c.current)}),[]),g=(0,n.fB)((()=>{var o,n,s,c,g,h,m;if(!l)return;let _,v;if(e)_=null!==(s=null===(n=e.current)||void 0===n?void 0:n.scrollTop)&&void 0!==s?s:0,v=(null!==(g=null===(c=e.current)||void 0===c?void 0:c.scrollHeight)&&void 0!==g?g:0)-(null!==(m=null===(h=e.current)||void 0===h?void 0:h.clientHeight)&&void 0!==m?m:0)-_;else{const e=document.documentElement||document.body.parentNode||document.body;_=void 0!==window.pageYOffset?window.pageYOffset:e.scrollTop,v=Number(null===(o=l.current)||void 0===o?void 0:o.scrollHeight)-_-window.innerHeight}0!==_&&(null==r||r(_)),!u.current&&v>0&&p(),v-t<=0&&d.current<=_&&(null==i||i(),!u.current&&p()),v<=-60&&_-d.current>=18&&(null==a||a()),d.current=_}),[i,t,a,e,p],100),h=(0,o.useRef)(g);return h.current=g,(0,o.useEffect)((()=>{s&&(c.current=window.setInterval((()=>{var e;null===(e=h.current)||void 0===e||e.call(h)}),100))}),[]),(0,o.useEffect)((()=>{var t;const i=null!==(t=null==e?void 0:e.current)&&void 0!==t?t:window;return i.addEventListener("scroll",g),()=>{i.removeEventListener("scroll",g)}}),[g,e]),l}},270:(e,t,i)=>{i.d(t,{R:()=>l,J:()=>d});var o=i(43226),n=i.n(o),a=i(91051),s=i(45949);const r=(0,a.createContext)({counterRef:{current:0},scrollWidthRef:{current:0},subscribeRef:{current:[]},setCounter:n(),setScrollWidth:n(),subscribeModalChange:()=>n()});function l(){const e=(0,a.useRef)(0),t=(0,a.useRef)(0),i=(0,a.useRef)([]),o=(0,a.useCallback)((t=>{e.current=t}),[]),n=(0,a.useCallback)((e=>{t.current=e}),[]),s=(0,a.useCallback)((e=>(i.current.push(e),()=>{const t=i.current.indexOf(e);i.current.splice(t)})),[]),l=(0,a.useMemo)((()=>({counterRef:e,subscribeRef:i,scrollWidthRef:t,setCounter:o,setScrollWidth:n,subscribeModalChange:s})),[s,o,n]);return{GlobalModalProvider:r.Provider,value:l}}function d(){const{counterRef:e,setCounter:t,setScrollWidth:i,subscribeRef:o,scrollWidthRef:n,subscribeModalChange:l}=(0,a.useContext)(r),d=(0,a.useCallback)((e=>{o.current.forEach((t=>{t({hasModal:e,scrollWidth:n.current})}))}),[n,o]);return{showModal:(0,a.useCallback)((o=>{if(!(0,s.Ii)()&&!o)return;const{current:n}=e;if(t(n+1),0===n){const e=(0,s.YT)();i(e),document.body.style.paddingRight=`${e}px`,document.body.className+=" hidden",d(!0)}}),[e,d,t,i]),hideModal:(0,a.useCallback)((()=>{const{current:o}=e,n=Math.max(0,o-1);t(n),0===n&&(i(0),document.body.className=document.body.className.replace(/\s?hidden/g,""),document.body.style.paddingRight="0px",d(!1))}),[e,d,t,i]),subscribeModalChange:l}}},87458:(e,t,i)=>{i.d(t,{e:()=>a});var o=i(91051),n=i(32273);const a=(e="Webapp")=>{const t=(0,n.Q)(e),i=(0,o.useCallback)(((e,i)=>{const o=function(e){if(!e||isNaN(e))return"";const t=new Date(Number(e)),i=new Date,o=Math.max(i.getTime()-t.getTime(),0);return t.getFullYear()!==i.getFullYear()?`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}`:~~(o/c)>7?`${t.getMonth()+1}-${t.getDate()}`:7==~~(o/c)?{num:1,unit:"unit_week"}:o>c?{num:~~(o/c),unit:"unit_day"}:o>d?{num:~~(o/d),unit:"unit_hr"}:o>l?{num:~~(o/l),unit:"unit_min"}:{num:1+~~(o/r),unit:"unit_sec"}}(e);if("string"==typeof o)return o;const{num:n,unit:a}=o;return i?`${n}${t(a)}`:t("time_ago",{num:n,unit:t(a)})}),[t]);return{t,timeTranslator:i}};var s;!function(e){e.Week="unit_week",e.Day="unit_day",e.Hour="unit_hr",e.Minute="unit_min",e.Second="unit_sec"}(s||(s={}));const r=1e3,l=6e4,d=36e5,c=24*d},55383:(e,t,i)=>{i.d(t,{J:()=>n});var o=i(91051);const n=({upHandler:e,downHandler:t,confirmHandler:i,tabHandler:n})=>(0,o.useCallback)((o=>{const{keyCode:a}=o;switch(a){case 38:o.preventDefault(),e();break;case 40:o.preventDefault(),t();break;case 13:null==i||i();break;case 9:null==n||n(o)}}),[i,t,n,e])},5687:(e,t,i)=>{i.d(t,{e:()=>a});var o=i(91051),n=i(21041);function a(){const e=(0,n.k6)();return(0,o.useCallback)(((t,{href:i,state:o,shouldUsePush:n})=>{n&&(t.preventDefault(),e.push(i,o))}),[e])}},90525:(e,t,i)=>{i.d(t,{m:()=>d});var o=i(9236),n=i(91051),a=i(38310),s=i(71300),r=i(17133),l=i(66826);function d(e,t="hyperlink",i="one_column"){var d;const{language:c}=null!==(d=(0,r.Lh)((()=>["language"]),[]))&&void 0!==d?d:{},u=(0,o.qj)(a.A);return{openAdsHandler:(0,n.useCallback)((()=>{u.postClickAds({language:null!=c?c:"en",type:e}),l.Y.handleAdsClick(t,i),window.open((0,s.Md)(c),"_blank")}),[u,c,i,t,e])}}},71300:(e,t,i)=>{i.d(t,{HX:()=>r,qO:()=>l,Md:()=>c});var o=i(9236),n=i(21041),a=i(33693),s=i(23434);const r=()=>{const{search:e}=(0,n.TH)();return"business"===new URLSearchParams(e).get("scene")},l=e=>{const{businessPermission:t}=(0,o.mp)(s.Y);return t.message?`/business-suite/messages?from=homepage&lang=${e}`:`${a.nT.messages}?lang=${e}`},d={en:"us-en-brand?lang=en","vi-VN":"brand?lang=vi",ar:"ar-brand?lang=ar","th-TH":"brand?lang=th","de-DE":"boostbusinessde?lang=de","pt-BR":"br-brand?lang=pt","id-ID":"brand?lang=id","ja-JP":"jpbrand5/?lang=ja",fr:"eu-go-tiktok?lang=fr",es:"eu-go-tiktok?lang=es"},c=(e="en")=>{var t;return`https://getstarted.tiktok.com/${null!==(t=d[e])&&void 0!==t?t:d.en}&attr_source=tt_pc_ads`}},51146:(e,t,i)=>{i.d(t,{w:()=>n});var o=i(91051);function n(e,t,i=!0,n=!0){return(0,o.useCallback)((t=>{32!==t.keyCode&&13!==t.keyCode||(i&&t.preventDefault(),n&&t.stopPropagation(),null==e||e())}),t)}},42656:(e,t,i)=>{i.d(t,{wM:()=>O,mn:()=>T,u8:()=>I,nV:()=>P,k0:()=>j});var o=i(64047),n=i(16926),a=i(90293),s=i(91051),r=i(21041),l=i(67929),d=i.n(l),c=i(95872),u=i(85782),p=i(24376);function g(e,t){var i,o,n,a,s,r;const l=(0,u.St)(p.lF,"");if(l&&"{}"!==l)return l;const d=(0,u.pm)()||{},c={object_id:null!==(i=d.object_id)&&void 0!==i?i:d.referer_video_id,object_type:d.object_type,share_device:null!==(n=null!==(o=d.share_device)&&void 0!==o?o:d.sender_device)&&void 0!==n?n:"",share_web_id:null!==(s=null!==(a=d.share_web_id)&&void 0!==a?a:d.sender_web_id)&&void 0!==s?s:"",share_user_id:null!==(r=d.share_user_id)&&void 0!==r?r:""};"referral_amp"===e||"referral_embed"===e?(c.object_type="video",c.object_id=d.referer_video_id):"reflow"===e||"webapp_reflow"===e?(c.object_type=null==t?void 0:t.object_type,c.object_id=null==t?void 0:t.object_id):"push"===e&&(c.push_type=d.push_type),Object.keys(c).forEach((e=>{c[e]||delete c[e]}));const g=JSON.stringify(c);return(0,u.D9)(p.lF,g),g}const h=e=>{var t;const{page_name:i,enter_from:n,is_downgrade:a,object_id:s,object_type:r}=e,l=(0,o.__rest)(e,["page_name","enter_from","is_downgrade","object_id","object_type"]),d=(0,u.pm)();return Object.assign({previous_page:c.W.getPreviousInfo(i),page_name:i,enter_from:n,page_url:window.location.href,userAgent:navigator.userAgent,keyword:d.keyword,sub_keyword:d.sub_keyword,user_type_alias:window.navigator.userAgent.match(/google/gi)?"search":"user",domain_name:null!==(t=window.location.host)&&void 0!==t?t:"unknown",page_path:window.location.pathname},l)},m=(e,t,i)=>{const{user:o,region:n,wid:a,language:s}=e,{page_name:r,is_downgrade:l,object_id:u,object_type:p,utm_medium:h,utm_campaign:m,utm_source:_,embed_source:v=""}=t,y=d()(c.W.initDimensionalData,{utm_medium:h,utm_campaign:m,utm_source:_});return Object.assign({user_is_login:o?1:0,priority_region:null==o?void 0:o.region,landing_page:c.W.getLandingPage(r),is_kids_mode:(null==o?void 0:o.ftcUser)?1:0,region:n,extraData:g(y.launch_mode,{object_id:u,object_type:p}),is_downgrade:l,session_id:c.W.getSessionId(a),webapp_hash_id:i,embed_source:v,app_language:s},y)};var _=i(78193),v=i(31222),y=i(69405),b=i(45253),f=i(7650),x=i(22597),w=i(17133),k=i(58854),S=i(33642),C=i(48304);function j(e,t){const i=(0,S.m7)((0,w.Lh)((()=>["region","user","wid","abTestVersion","language"]),[])),n=(0,S.m7)((0,k.h)((()=>["domains"]),[]));!function(e,t,i,n){const{user:a,region:l,wid:d,domains:u}=e,p=t();(0,s.useEffect)((()=>{(()=>{(0,o.__awaiter)(this,void 0,void 0,(function*(){var t;if(!p||p.skip_init)return;let i;if(n)try{i=yield n()}catch(e){i=void 0}const o=h(p),s=m(e,p,i);c.W.config({initConfig:{channel_domain:u.tea,ab_channel_domain:u.libraWebSDK,id:1988},commonHeaderConfig:{region:l,user_id:null!==(t=null==a?void 0:a.uid)&&void 0!==t?t:"",user_is_login:Boolean(a),user_unique_id:d,user_type:12,"header.custom":s},commonEventParams:o})}))})()}),[...i]),function(){const e=(0,r.k6)();(0,s.useEffect)((()=>{const t=null==e?void 0:e.listen((e=>{c.W.resetStayDuration(e.pathname,e.pathname,window.location.href)}));return()=>{null==t||t()}}),[])}()}(Object.assign(Object.assign({},n),i),(()=>Object.assign(Object.assign({},e()),{is_downgrade:(0,f.W)()})),t)}function T({eParams:e}){var t,i;const{botType:n}=null!==(t=(0,w.Lh)((()=>["botType"]),[]))&&void 0!==t?t:{},{isMobile:l}=null!==(i=(0,k.h)((()=>["isMobile"]),[]))&&void 0!==i?i:{},{search:d,pathname:c}=(0,r.TH)(),u=(0,a.parse)(d);return(0,s.useCallback)((()=>{const t=e||{},{is_from_webapp:i}=t,a=(0,o.__rest)(t,["is_from_webapp"]),s=u.sender_web_id?{sender_device:u.sender_device,sender_web_id:u.sender_web_id}:{},r=l||(0,x.oC)(c)||(d=`#${location.pathname}`,/^#\/@.*\/video\/\d+$/.test(d))||location.search.indexOf("item_id")>-1?Object.assign({is_from_webapp:i||["v1","v2","v3"].indexOf(u.is_from_webapp)>-1?u.is_from_webapp:"0"},s):{};var d;const p=Object.assign(Object.assign({bot_type:null!=n?n:"others",keyword:u.keyword,sub_keyword:u.sub_keyword},a),r);_._.handlePageView(p)}),[e,u.sender_web_id,u.sender_device,u.is_from_webapp,l,u.keyword,u.sub_keyword,c,n])}function I(e){const{pathname:t}=(0,r.TH)(),i=(0,n.fz)(v.KF);(0,s.useEffect)((()=>{const e=(0,C.BB)(t);i.handleRouteChange(t),i.updateCurrentPage(e),i.setCurrentPageReport(!1),i.resetExist(),i.reportVideoAdditionStart({startTime:Date.now(),situation:"addition_first_load"})}),[i,e,t])}function P(){const e=(0,n.fz)(y.ec),t=(0,n.fz)(b.k);(0,s.useEffect)((()=>{e.reset(),t.resetState()}),[e,t])}function O(){const e=(0,S.m7)((0,w.Lh)((()=>["region","user","wid","abTestVersion","language"]),[])),t=(0,S.m7)((0,k.h)((()=>["domains"]),[])),i=(0,s.useMemo)((()=>Object.assign(Object.assign({},e),t)),[e,t]),{user:o,region:n,wid:a,domains:r}=i;return(0,s.useCallback)((e=>{var t;const s={page_name:e,enter_from:e,is_downgrade:(0,f.W)()},l=h(s),d=m(i,s);c.W.config({initConfig:{channel_domain:r.tea,ab_channel_domain:r.libraWebSDK,id:1988},commonHeaderConfig:{region:n,user_id:null!==(t=null==o?void 0:o.uid)&&void 0!==t?t:"",user_is_login:Boolean(o),user_unique_id:a,user_type:12,"header.custom":d},commonEventParams:l})}),[i,r,n,o,a])}},84991:(e,t,i)=>{i.d(t,{Ex:()=>o,om:()=>n,s2:()=>a});const o=(e,t,i=!0,o=!1)=>{const{keyCode:n,altKey:a,ctrlKey:s,metaKey:r,key:l}=e;if(!t&&[13,32,38,40].includes(n))return 2;if(!t&&o&&27===n)return 13;if(8===n||144===n||1===l.length&&32!==n&&!a&&!s&&!r)return t?10:2;if(t)switch(n){case 38:return a?4:1;case 40:return a?12:0;case 27:return 3;case 13:case 32:return 4;case 33:return 8;case 34:return 7;case 36:return 5;case 35:return 6;case 9:return i?11:4;default:return 12}return 12},n=e=>{const{keyCode:t}=e;switch(t){case 38:case 37:return 1;case 40:case 39:return 0;case 13:case 32:return 2;default:return 4}},a=e=>{try{const t=e.querySelectorAll('a[href], button, input, textarea, details, [tabindex]:not([tabindex="-1"])');return Array.from(t).filter((e=>!e.hasAttribute("disabled")&&!e.getAttribute("aria-hidden")&&e.clientWidth>0))}catch(e){return console.warn("[A11y] no focusable element found: ",e),[]}}},99297:(e,t,i)=>{i.d(t,{xX:()=>p,QE:()=>_,Sf:()=>b,N8:()=>f});var o=i(90293),n=i(21041),a=i(61473),s=i(95872),r=i(55198),l=i(17133),d=i(58854),c=i(33642);const u=[];function p(e,t){try{return e.parameters[t].vid}catch(e){return void(-1===u.indexOf(t)&&(s.W.event("abtest_vid_failed",{experiment_name:t}),u.push(t)))}}const g=()=>"undefined"!=typeof window;let h=!1;const m=["0","1"],_=()=>{const{env:e}=(0,c.m7)((0,l.Lh)((()=>["env"]),[])),{type:t}=(0,c.m7)(e),{canUseQuery:i=!1}=(0,c.m7)((0,d.h)((()=>["canUseQuery"]),[])),o="ppe"===t||"boe"===t||g()&&window.location.host.startsWith("localhost")||"1"===String(void 0);return{isDebugEnv:o||i,isDebugPanelEnable:o}};function v(e){const{search:t}=(0,n.TH)(),i=(0,c.m7)((0,o.parse)(t)),{isDebugEnv:a}=_();let s=i[e];return Array.isArray(s)&&(s=s[s.length-1]),{searchObj:i,useDefaultValue:!a,value:s}}function y(e,t,i){e&&!h&&(h=!0,r.h.open({content:`feature flag value you provided for ${t} is not valid, valid value are: ${JSON.stringify(i)}`,duration:5,widthType:"padding"}))}function b(e){var t;const{useDefaultValue:i,value:o}=v(e),n=g(),a=(0,d.h)((()=>["config"]),[]),s=null===(t=null==a?void 0:a.config)||void 0===t?void 0:t.featureFlags,r=null==s?void 0:s[e];return i?r:o?m.includes(o)?(n&&sessionStorage.setItem(`FEATURE_FLAG_TEST_PREFIX${e}`,o),Boolean(Number(o))):(y(n,e,m),r):n&&sessionStorage.getItem(`FEATURE_FLAG_TEST_PREFIX${e}`)?Boolean(Number(sessionStorage.getItem(`FEATURE_FLAG_TEST_PREFIX${e}`))):r}function f(e,t){var i,o;const{useDefaultValue:n,value:s}=v(t),r=g();if(n)return p(e,t);if(s){const n=null!==(o=null===(i=a.dg.find((e=>e.name===t)))||void 0===i?void 0:i.vid)&&void 0!==o?o:[];return n.includes(s)?(r&&sessionStorage.setItem(`AB_TEST_PREFIX_${t}`,s),s):(y(r,t,n),p(e,t))}return r&&sessionStorage.getItem(`AB_TEST_PREFIX_${t}`)?sessionStorage.getItem(`AB_TEST_PREFIX_${t}`):p(e,t)}},33642:(e,t,i)=>{function o(e,t=1){return Math.round(Number(`${e}e${t}`))/Math.pow(10,t)}i.d(t,{BT:()=>n,a1:()=>a,ZT:()=>r,yk:()=>d,u0:()=>c,oQ:()=>u,Nn:()=>p,Bm:()=>g,sA:()=>h,m7:()=>_,y7:()=>v,vp:()=>y});function n(e=0){let t;return t=e<1e4?e.toString():e<999999?`${o(e/1e3)}K`:e<999999999?`${o(e/1e6)}M`:`${o(e/1e9)}B`,t}function a(e,t=99,i="99+"){return e>t?i:String(e)}function s(e){var t,i;return null!==(i=null===(t=null==e?void 0:e.url_list)||void 0===t?void 0:t.find((e=>!/\.webp/.test(e))))&&void 0!==i?i:""}function r(e){var t;return void 0===e?"":e.url_list&&(null===(t=e.url_list)||void 0===t?void 0:t.length)>0?e.url_list[0]:""}function l({is_block:e,is_blocked:t,follow_status:i}){if(null!=i)return e?4:t?5:g[i]}function d(e,t){const{avatar_larger:i,avatar_medium:o,avatar_thumb:n,uid:a,short_id:r,unique_id:d,sec_uid:c,room_id:u,nickname:p,is_block:g,is_blocked:h,follow_status:m,signature:_,show_favorite_list:v,custom_verify:y,enterprise_verify_reason:b,comment_setting:f,duet_setting:x,is_ad_fake:w,is_private_account:k,secret:S,show_secret_banner:C,stitch_setting:j,follower_status:T}=e;return{avatarLarger:s(i),avatarMedium:s(o),avatarThumb:s(n),id:a,shortId:r,uniqueId:null!=d?d:"",secUid:null!=c?c:"",roomId:String(null!=u?u:""),nickname:p,relation:l({is_block:g,is_blocked:h,follow_status:m}),signature:_,openFavorite:v,verified:Boolean(y||b),commentSetting:f,duetSetting:x,stitchSetting:j,isADVirtual:w,privateAccount:Boolean(k),secret:Boolean(S),createTime:0,showPrivateBanner:Boolean(C),extraInfo:Object.assign({followerStatus:T},t)}}function c(e,t=!1){const{follower_count:i,following_count:o,aweme_count:n}=e;return{diggCount:0,followerCount:null!=i?i:0,followingCount:null!=o?o:0,heart:0,heartCount:0,videoCount:null!=n?n:0,needFix:t}}function u(e){const{avatar_medium:t,avatar_thumb:i,uid:o,short_id:n,unique_id:a,sec_uid:r,nickname:d,is_block:c,follow_status:u,signature:p,custom_verify:g,enterprise_verify_reason:h,follower_status:m}=e;return{avatarLarger:"",avatarMedium:s(t),avatarThumb:s(i),id:o,shortId:n,uniqueId:null!=a?a:"",secUid:null!=r?r:"",nickname:d,relation:l({is_block:c,is_blocked:void 0,follow_status:u}),signature:p,verified:Boolean(g||h),createTime:0,extraInfo:{followerStatus:m}}}function p(e){const{id_str:t,title:i,play_url:o,cover_medium:n,cover_large:a,cover_thumb:s,is_original:l,duration:d,author:c}=e;return{id:String(t),title:i,duration:d,keyToken:"",playUrl:r(o),coverMedium:r(n),coverLarge:r(a),coverThumb:r(s),original:null!=l&&l,authorName:c}}const g={[-1]:-1,0:0,1:1,2:2,4:3};function h(e,t){if(!e)return!0;const{commentSetting:i,relation:o,id:n}=e;return 1===i&&2!==o&&t!==n}const m=Object.freeze({});function _(e){return null!=e?e:m}function v(e,t,i){if((null==e?void 0:e.vv)&&Number(null==e?void 0:e.vv)>0)return Number(e.vv);let o=0;return t&&t.forEach((e=>{var t,i;o+=null!==(i=null===(t=null==e?void 0:e.stats)||void 0===t?void 0:t.playCount)&&void 0!==i?i:0})),i&&i.forEach((e=>{var t,i;o+=Number(null!==(i=null===(t=null==e?void 0:e.stats)||void 0===t?void 0:t.viewCount)&&void 0!==i?i:0)})),o}function y(e){return e.replace(/\n(\n)*( )*(\n)*\n/g,"\n")}},27360:(e,t,i)=>{i.d(t,{LM:()=>n,rB:()=>a,Xo:()=>r,mX:()=>l,Pd:()=>d,jI:()=>c,Cc:()=>u,X:()=>p,i5:()=>g,nV:()=>f});var o=i(49290);function n(){return{appkey:"tiktok-web",app_key:"tiktok-web",aid:1284,app_name:"tiktok_web",iid:"0"}}function a(e){return e?e.toLocaleLowerCase().split("-")[0].replace("pt","pt_BR").replace("zh","zh-TW"):"en"}function s(e){var t;const i=e.EntranceShowType;return{id:e.FaqId,name:e.Name,value:e.Value,url:e.Url,children:(null!==(t=e.Children)&&void 0!==t?t:[]).map(s),knowledgeType:e.KnowledgeType,entranceShowType:i,imageUrl:e.ImageUrl,originLabelId:e.OriginLabelId,ticketAppId:e.TicketAppId,ticketCategoryId:e.TicketCategoryId,flags:2===i?0:2048,neverShowNeedMoreHelp:3===i}}function r(e){const{statusCode:t,statusMessage:i,faqInfoMap:o,entranceMap:n}=e;return{statusCode:t,statusMessage:i,faqInfoMap:Object.entries(null!=o?o:{}).reduce(((e,[t,i])=>e?(e[t]=(i||[]).map(s),e):e),{}),entranceMap:n}}function l({faqInfoMap:e,entranceMap:t,faqType:i,entrance:o}){var n;const a=("common"===i?"common":o===(null==t?void 0:t.general)&&"general")||"general";return null!==(n=null==e?void 0:e[a])&&void 0!==n?n:[]}function d(e){return o.Cl.some((t=>t===e))}function c(e){var t;return null!==(t=Array.isArray(e)?e[0]:e)&&void 0!==t?t:""}function u(e){return o.y9[c(e)]||""}function p(e,t,i={flattened:{},levels:[]}){return(e||[]).reduce(((e,i)=>{const o=(t?[...(null==t?void 0:t.__parents)||[],t.id]:[]).length,n=Object.assign(Object.assign({},i),{level:o,__parents:t?[...(null==t?void 0:t.__parents)||[],t.id]:[]});return e.flattened[n.id]=n,e.levels[o]=e.levels[o]||{},e.levels[o][i.id]=n,p(i.children,n,e),e}),i)}function g(e){var t;return Boolean(e&&(e.length>1||(null===(t=e[0])||void 0===t?void 0:t.children.length)))}function h(e,t,i=""){return`<a\n    style="color: #00C6E9;"\n    href="mailto:${e}?subject=TikTok-Web&body=Username: ${t}   Country/Region: ${i}">${e}</a>`}o.NI.getListV2,o.NI.getListV3;const m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},_="privacy@tiktok.com",v="feedback@tiktok.com",y=new RegExp(_,"g"),b=new RegExp(v,"g");function f(e,t,i,o){let n=e;return n=n.replace(/[&<>"'/]/g,(e=>m[e]||"")),1===t&&(n=n.replace(y,(()=>h(_,null!=i?i:"",o))).replace(b,(()=>h(v,null!=i?i:"",o)))),n}},32370:(e,t,i)=>{i.d(t,{H:()=>o,Z:()=>n});const o=function(e){if(!e)return{fullscreenEnabled:"fullscreenEnabled",fullscreenElement:"fullscreenElement",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",fullscreenchange:"fullscreenchange",fullscreenerror:"fullscreenerror"};const t={w3:{fullscreenEnabled:"fullscreenEnabled",fullscreenElement:"fullscreenElement",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",fullscreenchange:"fullscreenchange",fullscreenerror:"fullscreenerror"},webkit:{fullscreenEnabled:"webkitFullscreenEnabled",fullscreenElement:"webkitCurrentFullScreenElement",requestFullscreen:"webkitRequestFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"},moz:{fullscreenEnabled:"mozFullScreenEnabled",fullscreenElement:"mozFullScreenElement",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen",fullscreenchange:"mozfullscreenchange",fullscreenerror:"mozfullscreenerror"},ms:{fullscreenEnabled:"msFullscreenEnabled",fullscreenElement:"msFullscreenElement",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen",fullscreenchange:"MSFullscreenChange",fullscreenerror:"MSFullscreenError"}};for(const i in t)if(t[i].fullscreenEnabled in e)return t[i];return{fullscreenEnabled:"fullscreenEnabled",fullscreenElement:"fullscreenElement",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",fullscreenchange:"fullscreenchange",fullscreenerror:"fullscreenerror"}}("undefined"==typeof document?void 0:document),n=()=>{var e;return"undefined"!=typeof document?null!==(e=document[null==o?void 0:o.fullscreenElement])&&void 0!==e?e:document.body:null}},3148:(e,t,i)=>{i.d(t,{iv:()=>l,l_:()=>d,F3:()=>c,To:()=>u,Bv:()=>g,u8:()=>h,$I:()=>m,x7:()=>_});var o=i(45949);const n=()=>'""',a=()=>{},s=()=>{};class r{constructor(e,t){this.key=e,this.type=t,this.storageObject=null,this.getter=n,this.setter=a,this.remove=s,this.getter="local"===t?o.le:o.St,this.setter="local"===t?o.D$:o.D9,this.remove="local"===t?o.e8:o.lD}get storage(){return this.storageObject||(this.storageObject=this.tryParseJson(this.getter(this.key,"{}"))),this.storageObject}getStorage(){return this.storage}setItem(e,t){this.storage[e]=t,this.setter(this.key,JSON.stringify(this.storage))}getItem(e){return this.storage[e]}removeItem(e){this.storage[e]=void 0,this.setter(this.key,JSON.stringify(this.storage))}removeAll(){this.storageObject=null,this.remove(this.key)}tryParseJson(e){try{return JSON.parse(e)}catch(e){return{}}}}const l=new r("frequency-control-config","local"),d=new r("flip-control-config","local"),c=new r("webapp-common-config","local"),u=new r("webapp-common-config","session");var p;!function(e){e.Manual="manual",e.BrowserMode="browser_mode"}(p||(p={}));const g=new r("webapp-video-mute","local"),h=new r("keyboard-shortcut-config","local"),m=new r("webapp-comment-url","session"),_=new r("search-entry-block-map-storage","local")},48304:(e,t,i)=>{i.d(t,{k1:()=>u,BB:()=>m,AY:()=>_,qA:()=>v,iz:()=>y,Gr:()=>b});var o=i(21041),n=i(33693),a=i(48659),s=i(51858),r=i(62333),l=i(45313),d=i(22597),c=i(58899);function u(e){return(0,d.oC)(e)?"homepage_hot":/^\/@(.*?)\/video\/(.*?)/.test(e)?"video_detail":/^\/@(.*?)/.test(e)?"others_homepage":/^\/music\//.test(e)?"single_song":/^\/tag\//.test(e)?"challenge":/^\/following/.test(e)?"homepage_follow":/^\/discover\/.+/.test(e)?"discover_kw":/^\/channel\/.+/.test(e)?"channel":/^\/discover/.test(e)?"discovery":/^\/profile/.test(e)?"personal_homepage":/^\/topics/.test(e)?`topic_${e.slice(1).split("/")[1]}`:/^\/inbox/.test(e)?"homepage_message":/^\/report/.test(e)?"report":/^\/feedback\/report/.test(e)?"feedback_report":/^\/feedback\/history/.test(e)?"feedback_history":/^\/feedback/.test(e)?"feedback":(0,o.LX)(e,{path:n.nT.searchHome,exact:!0})?"general_search":(0,o.LX)(e,{path:n.nT.searchUser,exact:!0})?"search_user":(0,o.LX)(e,{path:n.nT.searchVideo,exact:!0})?"search_video":/^\/playlist-music/.test(e)?"music_playlist":/^\/messages/.test(e)?"messages":/^\/setting/.test(e)?"setting":/^\/place/.test(e)?"poi_detail":/^\/@(.*?)\/collection\/(.*?)/.test(e)?"collection":/^\/@(.*?)\/playlist\/(.*?)/.test(e)?"reflow_video_playlist":""}function p(e){return/^\/@(.*?)\/live\/(.*?)/.test(e)?"live_detail":(0,o.LX)(e,{path:a.$J.liveGoLive,exact:!0})?"live_take":(0,o.LX)(e,{path:[a.$J.liveReferralHost,a.$J.liveReferralHostFaq],exact:!0})?"live_referral_host":(0,o.LX)(e,{path:a.$J.liveDiscover,exact:!0})?"live_discover":(0,o.LX)(e,{path:a.$J.liveRoomEmbed,exact:!0})?"live_embed_detail":(0,o.LX)(e,{path:a.$J.liveRoom,exact:!0})?"live_detail":""}function g(e){return(0,o.LX)(e,{path:s.O5.coinPayment,exact:!0})?"live_recharge_cashier":(0,o.LX)(e,{path:[s.O5.coin,s.O5.coinPaymentResult,s.O5.coinTransactions,s.O5.coinUnavailable,s.O5.coinTerms,s.O5.coinTransactionsDetail,s.O5.coinCardManagement],exact:!0})?"live_recharge":""}function h(e){return(0,o.LX)(e,{path:r.HJ.loginHome,exact:!1})||(0,o.LX)(e,{path:r.HJ.oauth,exact:!1})||(0,o.LX)(e,{path:r.HJ.oauthLine,exact:!1})?"login":(0,o.LX)(e,{path:r.HJ.signupHome,exact:!1})?"signup":""}function m(e){for(const t of[u,p,g,h]){const i=t(e);if(i)return i}return"unknown"}function _(){return location.pathname.startsWith(n.nT.musicPlaylist.split(":")[0])?`${location.origin}${location.pathname.replace(/%23|%3F|%2F/g,"")}${location.search}`:location.href}function v(e,t){return`https://www.tiktok.com${y(e,t)}`}function y(e,t,i){return`/place/${(0,l.U_)(t)}-${e}${i?`?language=${i}`:""}`}function b(e,t){var i,o,n,a;return(0,c.bA)(`https://www.tiktok.com${(0,l.P4)({uniqueId:null!==(o=null===(i=null==e?void 0:e.owner)||void 0===i?void 0:i.display_id)&&void 0!==o?o:"",secUid:null!==(a=null===(n=null==e?void 0:e.owner)||void 0===n?void 0:n.sec_uid)&&void 0!==a?a:""})}`,null!=t?t:{})}},72083:(e,t,i)=>{var o;i.d(t,{lk:()=>r}),function(e){e.Apple="apple",e.Amazon="amazon",e.Google="google",e.Download="download",e.Microsoft="microsoft"}(o||(o={}));const n=["ast","de","en","fr","it","ja","pt"],a=["microsoft","apple","amazon","google","download"],s={apple:"ios_app_store",google:"google_play",amazon:"amazon_store",download:"download_apk",microsoft:"microsoft_store"};function r({lang:e,downloadLink:t={},isIOS:i=!1,isAndroid:o=!1}){var r;const l=e.split("-")[0],d=n.includes(l)&&!(null===(r=t.download)||void 0===r?void 0:r.visible)?l:"en";return{iconLanguage:d,iconConfig:a.reduce(((e,n)=>{const a=t[n];return(null==a?void 0:a.visible)&&function({platform:e,isIOS:t,isAndroid:i}){switch(e){case"apple":return!i;case"google":case"download":case"amazon":return!t;default:return!0}}({platform:n,isAndroid:o,isIOS:i})&&e.push({platform:n,language:d,href:a.officewebshare||a.normal,alt:`${n}-store`,target:s[n]||n}),e}),[])}}},73090:(e,t,i)=>{i.d(t,{Mf:()=>p,$:()=>h,EV:()=>m,wF:()=>_,Aq:()=>y});var o=i(68191),n=i(36488),a=i(59126),s=i(6998),r=i(25555),l=i(22745),d=i(24400),c=i(11723),u=i(9493);const p=(0,o.Z)("div",{target:"e1obx3ji0"})((({region:e})=>({marginTop:"US"===e?"40px":"16px",display:"flex",flexDirection:"row",width:"288px",flexWrap:"wrap",justifyContent:"space-between"})),"label:DivDownloadContainer;"),g={amazon:{backgroundPosition:"0 0"},apple:{backgroundPosition:"0 -43px"},google:{backgroundPosition:"0 -86px"}},h=(0,o.Z)("a",{target:"e1obx3ji1"})({":nth-of-type(-n+2)":{marginBottom:"8px"}},"label:AIconContainer;"),m=(0,o.Z)("img",{target:"e1obx3ji2"})((({platform:e,lang:t})=>function(e,t){return"download"===e?{backgroundImage:"url('https://p16-ttug-sg.ibyteimg.com/img/ttfe-malisg/tiktok_web/store-badge/download.png~296x0.image')"}:"microsoft"!==e?Object.assign(Object.assign({},g[e]),{backgroundImage:`url(https://p16-ttug-sg.ibyteimg.com/img/ttfe-malisg/tiktok_web/store-badge/${t}.png~296x0.image)`}):void 0}(e,t)),{width:"138px",height:"40px",backgroundSize:"138px",objectFit:"cover",borderRadius:"4px"},"label:ImgIcon;"),_=(0,o.Z)("p",{target:"e1obx3ji3"})((({theme:e})=>(0,n.GI)({theme:e,typography:"P1",fontWeight:"semiBold"})),"label:PSubTitle;"),v={ast:a,de:s,en:r,fr:l,it:d,ja:c,pt:u},y=e=>v[e]},83236:(e,t,i)=>{i.d(t,{k:()=>y});var o,n=i(64047),a=i(11040),s=i(32273),r=i(28327),l=i(68191),d=i(36488),c=i(75311);!function(e){e[e.UserFeed=0]="UserFeed",e[e.Feed=1]="Feed",e[e.Browser=2]="Browser",e[e.List=3]="List",e[e.UserPage=4]="UserPage",e[e.Search=5]="Search",e[e.RecommendList=6]="RecommendList"}(o||(o={}));const u=(0,r.F4)({"0%":{transform:"scale(.95)"},"50%":{transform:"scale(.9)"},"100%":{transform:"scale(.95)"}}),p=(0,r.F4)({"0%":{transform:"scale(1)"},"40%":{transform:"scale(1.15)"},"45%":{transform:"scale(1.16)"},"95%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}),g=(0,l.Z)("svg",{target:"e1vl87hj0"})({position:"absolute"},"label:SvgRoundCircle;"),h=(0,l.Z)("div",{target:"e1vl87hj1"})({position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},(({isAnimating:e})=>e?{":after":{content:'""',position:"absolute",left:1,top:1,right:1,bottom:1,borderRadius:"50%",border:"1px solid rgba(255, 119, 146, .5)",animation:`${p} 1800ms ease-out infinite`,boxShadow:"0 -0.5px 0.5px 0.5px rgba(255,119,146,.5)"}}:null),"label:DivContainer;"),m=(0,l.Z)(c.q,{target:"e1vl87hj2"})((({enable:e,theme:{colors:t},isAnimating:i})=>[{borderColor:t.LineSecondary,borderWidth:"0.5px",cursor:e?"pointer":"unset",backgroundColor:"rgba(136, 136, 136, 0.5)"},i?{animation:`${u} 1800ms ease-out infinite`,animationDelay:".9s"}:null]),"label:StyledAvatar;"),_=(0,l.Z)("span",{target:"e1vl87hj3"})((({theme:e,isOnTop:t=!1})=>[(0,d.GI)({theme:e,typography:"P4",fontWeight:"bold",color:"ConstTextInverse"}),{position:"absolute",background:"linear-gradient(131.17deg, #FF1764 0%, #ED3495 94.15%)",height:"15px",lineHeight:"16px",padding:"0 4px",bottom:t?"unset":"-2px",top:t?"-6px":"unset",left:"50%",transform:"translateX(-50%)",wordBreak:"keep-all",borderRadius:"2px",zIndex:1}]),"label:SpanLiveBadge;"),v=function({size:e=48}){return(0,a.jsxs)(g,Object.assign({width:e,height:e,viewBox:`0 0 ${e} ${e}`,fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:[(0,a.jsx)("circle",{cx:e/2,cy:e/2,r:e/2-.75,stroke:"url(#paint0_linear)",strokeWidth:"1.5"},void 0),(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",Object.assign({id:"paint0_linear",x1:-20.9902*e/48,y1:24*e/48,x2:27.0098*e/48,y2:65.9805*e/48,gradientUnits:"userSpaceOnUse"},{children:[(0,a.jsx)("stop",{stopColor:"#FF1764"},void 0),(0,a.jsx)("stop",{offset:"1",stopColor:"#ED3495"},void 0)]}),void 0)},void 0)]}),void 0)},y=function(e){var{className:t,needAnimation:i=!1,isShowLive:o=!0,size:r=32,isShowLiveTag:l=!0,isTagShowingOnTop:d=!1,e2eTag:c}=e,u=(0,n.__rest)(e,["className","needAnimation","isShowLive","size","isShowLiveTag","isTagShowingOnTop","e2eTag"]);const p=(0,s.Q)(),g=o&&i,y=o?r-6:r,b=g?r-4:r;return(0,a.jsxs)(h,Object.assign({isAnimating:g,className:t,"data-e2e":c,style:{width:r,height:r}},{children:[o&&(0,a.jsx)(v,{size:b},void 0),(0,a.jsx)(m,Object.assign({isAnimating:g,enable:!0,size:y},u),void 0),o&&l&&(0,a.jsx)(_,Object.assign({isOnTop:d},{children:p("LIVE")}),void 0)]}),void 0)}},38149:(e,t,i)=>{i.d(t,{T:()=>u});var o=i(11040),n=i(91051),a=i(68191),s=i(41928);const r=(0,a.Z)("div",{target:"emuynwa0"})((({isFullScreen:e})=>e?{flex:"1 1 auto"}:null),{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",margin:"0 auto"},"label:DivErrorContainer;"),l=(0,a.Z)("p",{target:"emuynwa1"})((({theme:{typography:e,fontWeights:t,fontFamilies:i,colors:o}})=>[e.H4,{fontFamily:i.Sofia,fontWeight:t.bold,color:o.TextPrimary,marginTop:"24px"}]),"label:PTitle;"),d=(0,a.Z)("p",{target:"emuynwa2"})((({theme:{typography:e,fontWeights:t,fontFamilies:i,colors:o}})=>[e.P2,{fontFamily:i.Proxima,fontWeight:t.normal,color:o.TextSecondary,marginTop:"8px"}]),"label:PDesc;"),c=(0,a.Z)(s.W,{target:"emuynwa3"})({marginTop:"24px"},"label:StyledButton;"),u=function(e){const{iconElem:t,title:i,desc:a,buttonText:s,isFullScreen:u,brightness:p=1,e2eTitle:g,e2eDesc:h,e2eButton:m,onButtonShow:_}=e;return(0,n.useEffect)((()=>{s&&(null==_||_())}),[s,_]),(0,o.jsxs)(r,Object.assign({isFullScreen:u},{children:[t,i&&(0,o.jsx)(l,Object.assign({"data-e2e":g,brightness:p},{children:i}),void 0),a&&(0,o.jsx)(d,Object.assign({"data-e2e":h,brightness:p},{children:a}),void 0),Boolean(s)&&(0,o.jsx)(c,Object.assign({type:"button",onClick:e.onButtonClick,buttonTheme:"default",size:"large",e2eTag:m},{children:s}),void 0)]}),void 0)}},18571:(e,t,i)=>{i.d(t,{F:()=>v});var o=i(11040),n=i(74820),a=i(98154),s=i(33642);const r=function({iconSrc:e="https://www.tiktok.com/favicon.ico"}){return(0,o.jsxs)(a.ql,{children:[(0,o.jsx)("meta",{name:"google",content:"notranslate"},"google"),",",(0,o.jsx)("meta",{name:"format-detection",content:"telephone=no"},"format-detection"),",",(0,o.jsx)("link",{rel:"shortcut icon",href:e,type:"image/x-icon"},"shortcut")]},void 0)},l=["//v16.tiktokcdn.com","//p16-va.tiktokcdn.com","//s20.tiktokcdn.com"],d=function(){return(0,o.jsx)(a.ql,{children:l.map(((e,t)=>(0,o.jsx)("link",{rel:"dns-prefetch",href:e},`prefetch-${t+1}`)))},void 0)};var c=i(16926),u=i(91051),p=i(7650),g=i(11467),h=i(25185),m=i(97751);const _=function({appContext:e,bizContext:t,slardarBid:i,async:n=!1}){var s,r;const{abTestVersion:l,env:d,botType:_,user:v,wid:y,region:b}=null!=e?e:{},{isMobile:f,domains:x,isTTP:w}=null!=t?t:{},k=(0,c.fz)(g.n),S=(0,u.useMemo)((()=>{var e;return Object.assign(Object.assign({region:null!=b?b:"",botType:null!=_?_:"",isMobile:Boolean(f).toString(),isDowngrade:(0,p.W)().toString(),isLogin:Boolean(v).toString(),isPPE:"ppe"===(null==d?void 0:d.type)},((e={parameters:{},versionName:""})=>{const t={};try{const i=e.parameters||{};Object.entries(i).forEach((([e,i])=>{t[e]=i.vid}))}catch(e){console.error("Abtest config parse error",e)}return t})(l)),{uid:null!==(e=null==v?void 0:v.uid)&&void 0!==e?e:""})}),[b,_,f,v,null==d?void 0:d.type,l]),C=(0,u.useContext)(h.Qj),j=(0,u.useMemo)((()=>JSON.stringify(Object.assign(Object.assign(Object.assign({},h.Uo),{bid:i,env:"boe"===(null==d?void 0:d.type)||"ppe"===(null==d?void 0:d.type)?"test":"production",domain:null==x?void 0:x.slardar}),w?{sdkUrl:"https://lf16-cdn-tos.tiktokcdn-us.com/obj/static-tx/slardar/fe/sdk_lite/browser.lite.1.2.26.oci.js",pluginPathPrefix:"https://lf16-cdn-tos.tiktokcdn-us.com/obj/static-tx/slardar/fe/sdk_lite/plugins"}:{}))),[null==x?void 0:x.slardar,null==d?void 0:d.type,w,i]);return k.config({userId:y},"v2"===(null===(r=null===(s=null==l?void 0:l.parameters)||void 0===s?void 0:s.enable_slardar_image)||void 0===r?void 0:r.vid)),k.context(S),C?null:(0,o.jsxs)(a.ql,{children:[(0,o.jsx)("script",Object.assign({id:"slardar-config",type:"application/json"},{children:j}),void 0),n?(0,o.jsx)("script",{src:m.n7.ROW.slardarLite,async:!0},void 0):(0,o.jsx)("script",{src:m.n7.ROW.slardarLite},void 0)]},void 0)},v=function({appContext:e,bizContext:t,slardarBid:i,iconSrc:l,asyncSlardar:c=!1}){const{language:u}=(0,s.m7)(e),{isDark:p}=(0,n.u)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.ql,{htmlAttributes:{lang:u,"data-theme":p?"dark":"light"}},void 0),(0,o.jsx)(r,{iconSrc:l},void 0),(0,o.jsx)(_,{appContext:e,bizContext:t,slardarBid:i,async:c},void 0),(0,o.jsx)(d,{},void 0)]},void 0)}},91110:(e,t,i)=>{i.d(t,{e:()=>k});var o=i(11040),n=i(43226),a=i.n(n),s=i(91051),r=i(54774),l=i(6809),d=i(21659),c=i(55810),u=i(82105),p=i(6086),g=i(28972),h=i(32273),m=i(29025),_=i(17133),v=i(22597),y=i(3148),b=i(95363);const f={width:24,height:24},x=[{content:"desktop_kb_shortcuts_tooltip_previous",icon:(0,o.jsx)(r.Z,Object.assign({},f),void 0)},{content:"desktop_kb_shortcuts_tooltip_next",icon:(0,o.jsx)(l.Z,Object.assign({},f),void 0)},{content:"desktop_kb_shortcuts_tooltip_like_vid",icon:(0,o.jsx)(d.Z,Object.assign({},f),void 0)},{content:"desktop_kb_shortcuts_tooltip_mute_unmute_vid",icon:(0,o.jsx)(c.Z,Object.assign({},f),void 0)}],w=[{content:"pc_web_playpause_btn",icon:(0,o.jsx)(u.Z,Object.assign({},f),void 0)},{content:"pc_web_skip_forward_5_sec_btn",icon:(0,o.jsx)(b.b0,Object.assign({},f),void 0)},{content:"pc_web_skip_back_5_sec_btn",icon:(0,o.jsx)(b.dW,Object.assign({},f),void 0)},{content:"pc_web_fullscreen_btn",icon:(0,o.jsx)(p.Z,Object.assign({},f),void 0)}],k=(0,s.memo)((function({isModal:e=!1,onClose:t=a()}){const i=(0,h.Q)(),{isInVideoFeedRedesign:n}=(0,m.y7)(),{isVideoDetailPlayerExperiment:r}=(0,m.iA)(),l=(0,s.useMemo)((()=>n||r?[...x,...w]:x),[n,r]),d=(0,_.Lh)((()=>["abTestVersion","wid"]),[]),{showKeyboardShortcut:c,handleClose:u}=((e=!1,t,i)=>{const o=y.u8.getItem("webid"),[n,a]=(0,s.useState)(!0),[r,l]=(0,s.useState)(e),d=(0,s.useCallback)((()=>{e?t():(y.u8.setItem("hasCloseKeyboardShortcut",!0),a(!1))}),[e,t]);return(0,s.useEffect)((()=>{var t;if(!e)if((null==i?void 0:i.wid)!==o)l(!0),y.u8.setItem("webid",null!==(t=null==i?void 0:i.wid)&&void 0!==t?t:""),y.u8.setItem("hasCloseKeyboardShortcut",!1);else{const e=y.u8.getItem("hasCloseKeyboardShortcut");l(!e)}}),[]),(0,s.useEffect)((()=>{const{pathname:t=""}=location;e||(0,v.oC)(t)||t.startsWith("/following")||/^\/@.*\/video\/\d+/.test(t)||l(!1)}),[]),{showKeyboardShortcut:n&&r,handleClose:d}})(e,t,d),p=i(e?"desktop_kb_shortcuts_modal":"desktop_kb_shortcuts_tooltip_title"),f=(0,s.useMemo)((()=>l.map((({content:t,icon:n})=>(0,o.jsxs)(b.fF,Object.assign({isModal:e},{children:[i(t),n]}),t)))),[e,l,i]);return c?(0,o.jsxs)(b.Jm,Object.assign({isModal:e},{children:[e?(0,o.jsx)(b.tV,Object.assign({onClick:u},{children:(0,o.jsx)(g.Z,{width:20,height:20},void 0)}),void 0):(0,o.jsx)(b.W8,Object.assign({onClick:u},{children:(0,o.jsx)(g.Z,{width:20,height:20},void 0)}),void 0),(0,o.jsx)(b.Xq,Object.assign({isModal:e},{children:p}),void 0),(0,o.jsx)(b.BN,{children:f},void 0)]}),void 0):null}));k.defaultProps=Object.assign(Object.assign({},k.defaultProps),{"data-e2e":"keyboard-shortcut"})},95363:(e,t,i)=>{i.d(t,{Jm:()=>s,Xq:()=>r,BN:()=>l,fF:()=>d,W8:()=>c,tV:()=>u,b0:()=>p,dW:()=>g});var o=i(6809),n=i(68191),a=i(36488);const s=(0,n.Z)("div",{target:"e1l04njg0"})((({isModal:e=!1,theme:t})=>[{marginBottom:e?"0":"12px",minWidth:e?"400px":"300px",minHeight:e?"280px":"258px",padding:e?"40px 32px 32px":"44px 24px 16px",display:"flex",boxSizing:"border-box",flexDirection:"column",alignItems:"center",backgroundColor:t.colors.BGSecondary,borderRadius:"8px",border:`1px solid ${t.colors.LineSecondary3}`,boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.06)"}]),"label:DivKeyboardShortcutContainer;"),r=(0,n.Z)("div",{target:"e1l04njg1"})((({isModal:e=!1,theme:t})=>[(0,a.GI)({theme:t,typography:e?"P0":"P1",fontWeight:"bold",fontFamily:"Proxima"}),{width:"100%",height:"22px",lineHeight:"22px",textAlign:"center",color:t.colors.TextPrimary,whiteSpace:"nowrap"}]),"label:DivKeyboardShortcutTitle;"),l=(0,n.Z)("div",{target:"e1l04njg2"})((({theme:e})=>[{marginTop:"16px",width:"100%",display:"flex",boxSizing:"border-box",flexDirection:"column",alignItems:"center",borderTop:`1px solid ${e.colors.LineSecondary}`}]),"label:DivKeyboardShortcutContent;"),d=(0,n.Z)("div",{target:"e1l04njg3"})((({theme:e})=>[(0,a.GI)({theme:e,typography:"P3",fontWeight:"normal",fontFamily:"Proxima"}),{width:"100%",height:"40px",textAlign:"left",color:e.colors.TextPrimary,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${e.colors.LineSecondary}`}]),"label:DivKeyboardShortcutContentItem;"),c=(0,n.Z)("div",{target:"e1l04njg4"})((({theme:{direction:e}})=>(0,a.YJ)({direction:e,end:"16px"})),{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:16,cursor:"pointer"},"label:DivXMarkWrapper;"),u=(0,n.Z)(c,{target:"e1l04njg5"})((({theme:{colors:e}})=>({width:"24px",height:"24px",borderRadius:"100px",backgroundColor:e.BGView})),"label:StyledModalXMarkWrapper;"),p=(0,n.Z)(o.Z,{target:"e1l04njg6"})((({theme:{direction:e}})=>({transform:`rotateZ(${"rtl"===e?90:-90}deg)`})),"label:StyledForward;"),g=(0,n.Z)(o.Z,{target:"e1l04njg7"})((({theme:{direction:e}})=>({transform:`rotateZ(${"rtl"===e?-90:90}deg)`})),"label:StyledBackward;")},58590:(e,t,i)=>{i.d(t,{G:()=>d});var o=i(64047),n=i(11040),a=i(90293),s=i(91051),r=i(45313),l=i(97186);const d=(0,s.forwardRef)((function(e,t){var{uniqueId:i,secUid:d,extraQuery:c={},children:u,replace:p=!1,isInBrowserMode:g=!1,teaParams:h,stopPropagation:m=!0,onClick:_,onLinkClick:v}=e,y=(0,o.__rest)(e,["uniqueId","secUid","extraQuery","children","replace","isInBrowserMode","teaParams","stopPropagation","onClick","onLinkClick"]);const b=(0,s.useMemo)((()=>({pathname:(0,r.P4)({uniqueId:i,secUid:d}),search:c})),[c,d,i]),f=(0,s.useRef)(null),x=(0,s.useCallback)((e=>{e.preventDefault(),window.open((0,a.stringifyUrl)({url:(0,r.P4)({uniqueId:i,secUid:d}),query:c}),"tiktok_live_view_window")}),[i,d,c]),w=(0,s.useCallback)((e=>{x(e),m&&e.stopPropagation(),null==_||_(e),null==v||v(e,b.pathname)}),[x,m,_,v,b.pathname]),k=(0,s.useCallback)((e=>{var t;13===e.keyCode&&(e.preventDefault(),e.stopPropagation(),null===(t=f.current)||void 0===t||t.click())}),[]);return(0,s.useImperativeHandle)(t,(()=>({linkClick:()=>{var e;null===(e=f.current)||void 0===e||e.click()}}))),(0,n.jsx)(l.v,Object.assign({to:b},y,{replace:p||g,ref:f,target:"tiktok_live_view_window",onClick:w,onKeyDown:k},{children:u}),void 0)}))},15679:(e,t,i)=>{i.d(t,{D:()=>_});var o=i(64047),n=i(11040),a=i(91051),s=i(19813),r=i(45313),l=i(45949),d=i(71300),c=i(90525),u=i(32724),p=i(97186),g=i(88683),h=i(90293),m=i(21041);const _=(0,a.memo)((0,a.forwardRef)((function(e,t){var{uniqueId:i,secUid:_,extraQuery:v={},children:y,replace:b=!1,isInBrowserMode:f=!1,teaParams:x,shouldStopPropagation:w=!0,reportTea:k=!0,onClick:S,onLinkClick:C,isTT4BAds:j,style:T}=e,I=(0,o.__rest)(e,["uniqueId","secUid","extraQuery","children","replace","isInBrowserMode","teaParams","shouldStopPropagation","reportTea","onClick","onLinkClick","isTT4BAds","style"]);const P=function(e,t={}){var i;const{search:o}=(0,m.TH)(),n=t.disableAutoLang?"":null!==(i=(0,h.parse)(o).lang)&&void 0!==i?i:"";if("string"==typeof e){const{url:i,query:o}=(0,h.parseUrl)(e);return(0,h.stringifyUrl)({url:i,query:Object.assign({lang:n},o)},Object.assign({skipEmptyString:!0},t))}const{pathname:a="",search:s={},hash:r}=e,l=r?`#${r}`:"";return`${(0,h.stringifyUrl)({url:a,query:Object.assign({lang:n},s)},Object.assign({skipEmptyString:!0},t))}${l}`}({pathname:(0,r.yl)({uniqueId:i,secUid:_}),search:v}),O=(0,g.p)(i),L=null==O?void 0:O.isADVirtual,M=(0,d.HX)(),{adsClickSection:E,playMode:A}=x,{openAdsHandler:D}=(0,c.m)(3,E,A),F=(0,a.useRef)(null),R=(0,a.useCallback)((e=>j?((0,l.NS)(e),void D()):M?((0,l.NS)(e),void(0,u.U)("user-select",{uid:null==O?void 0:O.id,uniqueId:i,from:"user-link"})):(w&&e.stopPropagation(),k&&s.W.handleEnterUser(x),null==S||S(e),void(null==C||C(e,P,"user")))),[j,M,w,k,x,S,C,P,D,null==O?void 0:O.id,i]),B=(0,a.useCallback)((e=>{var t;13===e.keyCode&&(e.preventDefault(),e.stopPropagation(),null===(t=F.current)||void 0===t||t.click())}),[]);return(0,a.useImperativeHandle)(t,(()=>({linkClick:()=>{var e;null===(e=F.current)||void 0===e||e.click()}}))),(0,n.jsx)(p.v,Object.assign({to:j?"":P,disabled:L},I,{replace:b||f,ref:F,onClick:R,onKeyDown:B,style:T},{children:y}),void 0)})))},50894:(e,t,i)=>{i.d(t,{X:()=>l,Q:()=>d});var o=i(9236),n=i(91051),a=i(2078),s=i(17133),r=i(9343);function l({action:e,modalConfig:t={}}){const i=(0,s.Lh)((()=>["user"]),[]),l=(0,o.qj)(r.r);return(0,n.useCallback)(((...o)=>{if(a.vD.handleChannelGeneralClick("like","video_feed"),null==i?void 0:i.user)return e(...o);l.openModal(t)}),[e,null==i?void 0:i.user,l,t])}function d(e={}){const t=(0,o.qj)(r.r),i="function"==typeof e?e():e;return(0,n.useCallback)((()=>{t.openModal(i)}),[i,t])}},85640:(e,t,i)=>{i.d(t,{u_:()=>I});var o,n=i(11040),a=i(43226),s=i.n(a),r=i(91051),l=i(32667),d=i(11171),c=i(94582),u=i(270),p=i(32273),g=i(64047),h=i(68191),m=i(28972),_=i(36488);!function(e){e[e.None=0]="None",e[e.Outer=1]="Outer",e[e.Inner=2]="Inner",e[e.InnerLarge=3]="InnerLarge",e[e.Mobile=4]="Mobile"}(o||(o={}));const v=(0,h.Z)("div",{target:"e1gjoq3k0"})({position:"fixed",left:0,top:0,bottom:0,right:0,zIndex:1001,overflow:"auto",outline:"0px",transition:"all 500ms cubic-bezier(.075, .82, .165, 1)"},(({status:e,isShow:t})=>({display:t||e===c.Ix?"flex":"none",opacity:Number(e!==c.Ix&&e!==c.Wj)})),"label:DivModalContainer;"),y=(0,h.Z)("div",{target:"e1gjoq3k1"})((({theme:e,left:t})=>[{position:"fixed",top:"62px",boxShadow:"0px 2px 12px rgba(0, 0, 0, 0.12)",zIndex:401,overflow:"auto",outline:"1px",transition:"all 500ms cubic-bezier(.075, .82, .165, 1)",borderRadius:"8px"},({status:e,isShow:t,isQRPopup:i})=>({display:t||e===c.Ix?"flex":"none",opacity:Number(e!==c.Ix&&e!==c.Wj),width:"360px",height:i?"387px":"309px"}),(0,_.YJ)({direction:e.direction,start:`calc(${t}px - 260px)`})]),"label:DivPopupModalContainer;"),b=(0,h.Z)("div",{target:"e1gjoq3k2"})((({theme:{colors:e}})=>({background:e.SDSecondary,position:"fixed",left:0,right:0,top:0,bottom:0})),"label:DivModalMask;"),f=(0,h.Z)("div",{target:"e1gjoq3k3"})({position:"relative",borderRadius:"8px",margin:"auto",transition:"all 300ms cubic-bezier(.075, .82, .165, 1)"},(e=>{var{status:t,theme:{colors:i}}=e,o=e.contentStyle,{transform:n}=o,a=(0,g.__rest)(o,["transform"]);return[{transform:t===c.Wj||t===c.Ix?n||"scale(0.1, 0.1)":"none",backgroundColor:i.BGPrimary},a]}),"label:DivContentContainer;"),x=(0,h.Z)("div",{target:"e1gjoq3k4"})({position:"relative",borderRadius:"8px",margin:"auto",transition:"all 300ms cubic-bezier(.075, .82, .165, 1)"},(e=>{var{status:t,theme:{colors:i}}=e,o=e.contentStyle,{transform:n}=o,a=(0,g.__rest)(o,["transform"]);return[{transform:t===c.Wj||t===c.Ix?n||"scale(0.1, 0.1)":"none",backgroundColor:i.BGPrimary,width:"360px",height:"100% !important"},a]}),"label:DivPopupContentContainer;"),w=(0,h.Z)(m.Z,{target:"e1gjoq3k5"})("label:StyledIcon;");function k(e){const{closeStyle:t,theme:{colors:i,direction:o}}=e,n=[(0,_.YJ)({direction:o,end:"24px"})];switch(t){case 2:n.push({width:"24px",height:"24px",background:i.BGView,[`${w}`]:{width:"15px",height:"15px"}});break;case 3:n.push({width:"24px",height:"24px",[`${w}`]:{width:"24px",height:"24px",fill:i.TextPrimary}});break;case 4:n.push({width:"19px",height:"19px",[`${w}`]:{width:"19px",height:"19px",fill:i.TextPrimary}});break;case 1:n.push({width:"40px",height:"40px",background:i.BGPrimary,[`${w}`]:{width:"24px",height:"24px"}})}return n}const S=(0,h.Z)("div",{target:"e1gjoq3k6"})({position:"absolute",top:"24px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1},k,"label:DivCloseWrapper;"),C=(0,h.Z)("div",{target:"e1gjoq3k7"})({width:"100vw",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},"label:DivCenterWrapper;"),j=(0,h.Z)("div",{target:"e1gjoq3k8"})({height:"100%",width:"360px",display:"flex",justifyContent:"center",alignItems:"center"},"label:DivPopupCenterWrapper;"),T="login-modal",I=function({children:e,onClose:t,visible:i,timeout:o,onWheel:a=s(),closeStyle:g=0,closeStyles:h={},containerStyle:m={},maskCloseable:_=!0,keyboardCloseable:k=!0,zIndex:I=1001,mask:P=!0,fixed:O=!0,contentStyle:L={},maskStyle:M={},e2eData:E="",backgroundColor:A,parentRef:D,cancelMouseLeaveBubble:F=!1,returnFocus:R=!0,focusTrapDisabled:B=!1,autoFocus:N=!1,onCloseFocusHandler:W,popupType:U}){const q=(0,r.useRef)(),z=(0,r.useRef)(Boolean(i)),{showModal:$,hideModal:H}=(0,u.J)(),[Z,V]=(0,r.useState)(!1),G=(0,p.Q)();(0,r.useEffect)((()=>{i&&P?($(),o&&(clearTimeout(q.current),q.current=window.setTimeout((()=>{null==t||t(2)}),o))):z.current&&(H(),clearTimeout(q.current)),z.current=Boolean(i)}),[i,P]),(0,r.useEffect)((()=>(V(!0),()=>{z.current&&H()})),[]),(0,r.useEffect)((()=>{const e=e=>{i&&k&&27===e.keyCode&&(null==t||t(1))};return i&&window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[k,t,i]);const Q=(0,r.useCallback)((()=>{_&&(null==t||t(3))}),[_,t]),J=(0,r.useCallback)((()=>{null==t||t(0)}),[t]),Y=(0,r.useRef)(null),K=(0,r.useRef)(null),X=(0,r.useCallback)((e=>{const t=e.target;(null==t?void 0:t.id)===T&&t.setAttribute("tabindex","-1")}),[]),ee=(0,r.useCallback)((e=>{13===e.keyCode&&(null==t||t(0))}),[t]),te=(0,r.useCallback)((e=>{F&&e.stopPropagation()}),[F]),[ie,oe]=(0,r.useState)(0);return(0,r.useEffect)((()=>{function e(){var e,t;oe(null!==(t=null===(e=document.getElementById("header-login-button"))||void 0===e?void 0:e.getBoundingClientRect().left)&&void 0!==t?t:0)}e(),U&&window.addEventListener("resize",e)}),[U]),Z?U?(0,n.jsx)(c.ZP,Object.assign({timeout:300,in:i,nodeRef:Y},{children:t=>(0,n.jsx)(y,Object.assign({status:t,isShow:i,onWheel:a,onKeyDown:X,ref:Y,style:Object.assign(Object.assign({},m),{position:O?"fixed":"relative"}),isQRPopup:"qr"===U,left:ie},{children:(0,n.jsx)(c.ZP,Object.assign({timeout:300,in:i,unmountOnExit:!0,nodeRef:K},{children:t=>(0,n.jsx)(j,Object.assign({isQRPopup:"qr"===U},{children:(0,n.jsxs)(x,Object.assign({"data-e2e":E,status:t,ref:K,contentStyle:L,style:{backgroundColor:A},tabIndex:0,id:T,isQRPopup:"qr"===U},{children:[e,0!==g&&1!==g&&(0,n.jsx)(S,Object.assign({closeStyle:g,onClick:J,onKeyDown:ee,"data-e2e":"modal-close-inner-button",style:h,role:"button",tabIndex:0},{children:(0,n.jsx)(w,{},void 0)}),void 0)]}),void 0)}),void 0)}),void 0)}),void 0)}),void 0):(0,l.createPortal)((0,n.jsx)(c.ZP,Object.assign({timeout:300,in:i,nodeRef:Y},{children:t=>(0,n.jsxs)(v,Object.assign({status:t,isShow:i,onWheel:a,onKeyDown:X,ref:Y,style:Object.assign(Object.assign({},m),{zIndex:I,position:O?"fixed":"relative"})},{children:[P&&(0,n.jsx)(b,Object.assign({style:M,onClick:Q,onMouseLeave:te},{children:1===g&&(0,n.jsx)(S,Object.assign({closeStyle:g,onClick:J,style:h},{children:(0,n.jsx)(w,{},void 0)}),void 0)}),void 0),(0,n.jsx)(c.ZP,Object.assign({timeout:300,in:i,unmountOnExit:!0,nodeRef:K},{children:t=>(0,n.jsx)(d.ZP,Object.assign({autoFocus:N,returnFocus:R,disabled:B,onDeactivation:W},{children:(0,n.jsx)(C,{children:(0,n.jsxs)(f,Object.assign({"data-e2e":E,status:t,ref:K,contentStyle:L,style:{backgroundColor:A},tabIndex:0,id:T},{children:[e,0!==g&&1!==g&&(0,n.jsx)(S,Object.assign({closeStyle:g,onClick:J,onKeyDown:ee,"data-e2e":"modal-close-inner-button",style:h,role:"button",tabIndex:0,"aria-label":G("link_close_popup")},{children:(0,n.jsx)(w,{},void 0)}),void 0)]}),void 0)},void 0)}),void 0)}),void 0)]}),void 0)}),void 0),null!=D?D:document.body):null}},48088:(e,t,i)=>{i.d(t,{R:()=>n});var o=i(91051);function n(e=0){const t=(0,o.useRef)(0),[i,n]=(0,o.useState)(!1),a=(0,o.useCallback)((()=>{n(!0),window.clearTimeout(t.current)}),[]),s=(0,o.useCallback)((()=>{window.clearTimeout(t.current),t.current=window.setTimeout((()=>{n(!1)}),e)}),[e]);return{active:i,setActive:n,handleMouseEnter:a,handleMouseLeave:s}}},39696:(e,t,i)=>{i.d(t,{G:()=>g});var o=i(11040),n=i(91051),a=i(94582),s=i(68191),r=i(34700);function l(e,t){return e||t?t?e?{left:"50%",transform:`translate(-50%, ${t}px)`}:{transform:`translateY(${t}px)`}:{left:"50%",transform:"translateX(-50%)"}:null}const d=(0,s.Z)("div",{target:"e2ipgxl0"})((({state:e,duration:t=300,theme:i,centered:o,verticalPropKey:n,verticalOffset:a})=>[{position:"absolute",zIndex:1,background:i.colors.BGPrimary,borderRadius:"8px",[n]:"calc(100% + 12px)",boxShadow:"0 4px 16px rgba(0, 0, 0, .12)",transition:`opacity ${t}ms`,opacity:Number("entering"===e||"entered"===e)},l(o,a)]),"label:DivContainer;"),c=(0,s.Z)(r.Z,{target:"e2ipgxl1"})({display:"block",width:"24px",height:"8px",position:"absolute"},(({centered:e})=>e?{left:"50%",transform:"translateX(-50%)"}:null),(({verticalPropKey:e})=>"top"===e?{top:"-8px"}:{bottom:"-8px",transform:"rotate(180deg)"}),"label:StyledTopArrow;"),u={topRight:"right",bottomRight:"right",topLeft:"left",bottomLeft:"left",bottom:null},p={topRight:"bottom",topLeft:"bottom",bottomRight:"top",bottomLeft:"top",bottom:"top"},g=function({placement:e,margin:t="-2px",arrowMargin:i=6,duration:s=300,backgroundColor:r="#fff",active:l=!1,verticalOffset:g=0,style:h,hideArrow:m=!1,id:_,onKeyDown:v,ariaLabel:y,ariaLabelledBy:b,children:f}){const x=(0,n.useRef)(null),w=u[e],k=p[e],S=Object.assign({backgroundColor:r},h),C={};return w&&(C[w]=i,S[w]=t),(0,o.jsx)(a.ZP,Object.assign({in:l,timeout:s,unmountOnExit:!0,nodeRef:x},{children:e=>(0,o.jsxs)(d,Object.assign({verticalPropKey:k,state:e,duration:s,ref:x,style:S,centered:!w,verticalOffset:g,id:_,tabIndex:-1,onKeyDown:v,"aria-label":y,"aria-labelledby":b},{children:[!m&&(0,o.jsx)(c,{fill:r,style:C,centered:!w,verticalPropKey:k},void 0),f]}),void 0)}),void 0)}},9472:(e,t,i)=>{i.d(t,{C:()=>B});var o,n=i(11040),a=i(9236),s=i(31223),r=i.n(s),l=i(91051),d=i(95872);!function(e){e.DropdownCardShow="dropdown_card_show"}(o||(o={}));var c=i(44663),u=i(75311),p=i(41928),g=i(45313),h=i(32273),m=i(87930),_=i(5687),v=i(33642),y=i(17133),b=i(57317),f=i(88683),x=i(66599),w=i(50894),k=i(63954),S=i(68191),C=i(36488),j=i(15679);const T=(0,S.Z)("div",{target:"er095110"})((({paddingTop:e=40})=>({height:e,cursor:"pointer"})),"label:DivPaddingTop;"),I=(0,S.Z)("div",{target:"er095111"})((({paddingStart:e=0,theme:{direction:t}})=>[{zIndex:100,position:"absolute"},(0,C.YJ)({direction:t,paddingStart:e})]),"label:DivProfileOuterContainer;"),P=(0,S.Z)("div",{target:"er095112"})((({theme:{colors:e,isDark:t}})=>({position:"relative",width:"320px",boxSizing:"border-box",padding:"20px",background:e.BGSecondary,boxShadow:t?"unset":`0px 4px 16px ${e.ShadowPrimary}`,borderRadius:"8px"})),"label:DivProfileContainer;"),O=(0,S.Z)("div",{target:"er095113"})({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},"label:DivHeadContainer;"),L=(0,S.Z)(j.D,{target:"er095114"})((({theme:e})=>(0,C.GI)({theme:e,color:"TextPrimary",fontWeight:"bold",fontFamily:"Sofia",typography:"H5"})),C.gi,"label:StyledUserTitle;"),M=(0,S.Z)(j.D,{target:"er095115"})((({theme:e})=>(0,C.GI)({theme:e,color:"TextPrimary",fontWeight:"semiBold",fontFamily:"Proxima",typography:"P3"})),C.gi,"label:StyledUserName;"),E=(0,S.Z)(j.D,{target:"er095116"})({display:"block",width:"44px",flex:"0 0 44px"},"label:StyledAvatarLink;"),A=(0,S.Z)("p",{target:"er095117"})({marginTop:"8px"},"label:PUserStat;"),D=(0,S.Z)("span",{target:"er095118"})((({theme:e})=>[(0,C.GI)({theme:e,fontWeight:"bold",typography:"H3"}),(0,C.YJ)({direction:e.direction,marginEnd:"6px"}),{fontSize:"17px",lineHeight:"20px",display:"inline-block"}]),"label:SpanUserStatsText;"),F=(0,S.Z)("span",{target:"er095119"})((({theme:e})=>[(0,C.GI)({theme:e,color:"TextSecondary",typography:"H3"}),{fontSize:"17px",lineHeight:"20px",display:"inline-block",":not(:last-of-type)":(0,C.YJ)({direction:e.direction,marginEnd:"12px"})}]),"label:SpanUserStatsDesc;"),R=(0,S.Z)("p",{target:"er0951110"})((({theme:e})=>[(0,C.GI)({theme:e,typography:"P3"}),{paddingTop:"16px",marginTop:"16px",borderTop:`1px solid ${e.colors.LineSecondary2}`}]),"label:PSignature;"),B=(0,l.memo)((function(e){var t,i;const{uniqueId:o,top:s,target:S="_blank",hideSignature:C,fixedLeft:j,paddingStart:B,paddingTop:N,groupId:W,followTheme:U,teaParams:q,onClick:z}=e,$=(0,h.Q)(),[H,Z]=(0,a.b7)(x.z,{selector:e=>({user:e.users[o],stats:e.stats[o]}),dependencies:[o],equalFn:(e,t)=>r()(e,t)}),{isADVirtual:V}=null!==(t=null==H?void 0:H.user)&&void 0!==t?t:{},{language:G}=null!==(i=(0,y.Lh)((()=>["language"]),[]))&&void 0!==i?i:{},Q=(0,w.Q)(),J=Object.assign({enter_method:"click_hover"},q);W&&(J.group_id=W);const{isFollowing:Y,handleFollow:K,text:X}=(0,f.w)({uniqueId:o,onNeedLogin:Q,teaParams:J}),{secUid:ee,id:te}=(0,v.m7)(H.user);(0,l.useEffect)((()=>{H.stats&&!H.stats.needFix||Z.getUserDetail({uniqueId:o,secUid:ee,language:G})}),[Z,H.stats,G,ee,o]),(0,l.useEffect)((()=>{d.W.event("dropdown_card_show")}),[]);const ie=(0,l.useMemo)((()=>({to_user_id:te,author_id:te,enter_method:"click_dropdown_card"})),[te]),oe=(0,b.ot)({pathname:(0,g.yl)({uniqueId:o,secUid:ee})}),ne=(0,_.e)(),ae=(0,l.useCallback)((e=>{null==z||z(e),V||("_blank"===S?window.open(oe,"_blank"):ne(e,{href:oe,shouldUsePush:!0}))}),[ne,oe,z,V,S]);if(!H.user)return(0,m.G)(["item.user"]);const{avatarThumb:se,nickname:re,verified:le,signature:de,stateControlledMedia:ce}=H.user,{stats:ue}=H;return W&&(ie.group_id=W),(0,n.jsxs)(I,Object.assign({paddingStart:B,paddingTop:N,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,style:{top:s,left:j}},{children:[(0,n.jsx)(T,{onClick:ae},void 0),(0,n.jsxs)(P,{children:[(0,n.jsxs)(O,{children:[(0,n.jsx)(E,Object.assign({uniqueId:o,secUid:ee,target:S,rel:"opener",teaParams:ie,"data-e2e":"user-card-avatar"},{children:(0,n.jsx)(u.q,{size:44,src:se},void 0)}),void 0),(0,n.jsx)(p.W,Object.assign({size:"small",onClick:K,buttonTheme:Y?"default":null!=U?U:"line","data-e2e":"user-card-follow"},{children:X}),void 0)]},void 0),(0,n.jsxs)(L,Object.assign({uniqueId:o,secUid:ee,target:S,rel:"opener",teaParams:ie},{children:[(0,n.jsx)("span",Object.assign({"data-e2e":"user-card-username"},{children:o}),void 0),le&&(0,n.jsx)(c.Q,{width:14,height:14,"data-e2e":"user-card-bluev"},void 0)]}),void 0),(0,n.jsx)("br",{},void 0),(0,n.jsx)(M,Object.assign({uniqueId:o,secUid:ee,target:S,rel:"opener",teaParams:ie,"data-e2e":"user-card-nickname"},{children:re}),void 0),(0,n.jsx)(k.i,{stateControlledMedia:ce,labelType:2},void 0),(0,n.jsxs)(A,{children:[(0,n.jsx)(D,Object.assign({"data-e2e":"user-card-follower-count"},{children:ue?(0,v.BT)(ue.followerCount):"--"}),void 0),(0,n.jsx)(F,Object.assign({"data-e2e":"user-card-follower"},{children:$("Followers")}),void 0),(0,n.jsx)(D,Object.assign({"data-e2e":"user-card-like-count"},{children:ue?(0,v.BT)(Number(ue.heart)||ue.heartCount):"--"}),void 0),(0,n.jsx)(F,Object.assign({"data-e2e":"user-card-like"},{children:$("Likes")}),void 0)]},void 0),de&&!C&&(0,n.jsx)(R,Object.assign({"data-e2e":"user-card-user-bio"},{children:de}),void 0)]},void 0)]}),void 0)}))},24864:(e,t,i)=>{i.d(t,{w:()=>p});var o=i(11040),n=i(91051),a=i(68457),s=i(68191),r=i(36488);const l=(0,s.Z)("div",{target:"e1b4u1n0"})({position:"absolute",padding:"0 4px",top:"0",transformOrigin:"right top",transition:"opacity .5s",opacity:0},(({theme:{direction:e}})=>{const t=(0,r.$K)(e,"end");return[(0,r.YJ)({direction:e,end:"0"}),{transformOrigin:`${t} top`}]}),"label:DivScrollBar;"),d=(0,s.Z)("div",{target:"e1b4u1n1"})({overflowX:"hidden",overflowY:"auto",overscrollBehaviorY:"contain",perspective:"1px",transformStyle:"preserve-3d","::-webkit-scrollbar":{width:0,height:0},[`:hover ${l}`]:{opacity:1}},(({theme:{direction:e}})=>{const t=(0,r.$K)(e,"end");return[(0,r.YJ)({direction:e,paddingEnd:"12px"}),{perspectiveOrigin:`${t} top`}]}),"label:DivScrollContainer;"),c=(0,s.Z)("div",{target:"e1b4u1n2"})("label:DivScrollWrapper;"),u=(0,s.Z)("div",{target:"e1b4u1n3"})((({theme:{colors:e}})=>({width:"6px",height:"100%",borderRadius:"3px",background:e.BGPlaceholderDefault})),"label:DivScrollBarThumb;"),p=(0,n.memo)((0,n.forwardRef)((function({children:e,Wrapper:t=c,onScroll:i,onScrollBottom:s,bottomThreshold:r=100,className:p,style:g,wrapperStyle:h},m){const _=(0,n.useRef)(null),[v,y]=(0,n.useState)(0),[b,f]=(0,n.useState)(0),x=(0,n.useMemo)((()=>{const e=v>=b?0:Math.pow(v,2)/b,t=(v-e)/(b-v);return{height:e,transform:`matrix3d(${[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,-1].join(",")}) scale(${1/t}) translateZ(${1-1/t}px) translateZ(-2px)`}}),[v,b]);(0,n.useImperativeHandle)(m,(()=>({get scrollTop(){var e,t;return null!==(t=null===(e=_.current)||void 0===e?void 0:e.scrollTop)&&void 0!==t?t:0},get dom(){return _.current}})),[]);const w=(0,a.fB)((()=>{if(!_.current)return;const{current:e}=_,{height:t}=e.getBoundingClientRect(),{scrollHeight:i}=e;y(t),f(i)}),[],300),k=(0,n.useCallback)((()=>{if(!_.current||!s)return;const{scrollTop:e}=_.current;null==i||i({scrollTop:e}),v+e+r>=b&&s()}),[s,i,v,r,b]);return(0,n.useEffect)((()=>{const e=new window.MutationObserver((function(e){e.length&&w()}));return _.current&&e.observe(_.current,{childList:!0,subtree:!0}),window.addEventListener("resize",w),()=>{window.removeEventListener("resize",w),e.disconnect()}}),[w]),(0,o.jsxs)(d,Object.assign({ref:_,onScroll:k,className:p,style:g},{children:[(0,o.jsx)(t,Object.assign({style:h},{children:e}),void 0),(0,o.jsx)(l,Object.assign({style:x},{children:(0,o.jsx)(u,{},void 0)}),void 0)]}),void 0)})))},14897:(e,t,i)=>{i.d(t,{Zp:()=>a}),i(91051);var o=i(33642),n=i(58854);function a(){const{playerInfo:e}=(0,o.m7)((0,n.h)((()=>["playerInfo"]),[])),{name:t="",isSmartPlayer:i=!1,type:a=0,loop:s=!1,replyComment:r=!0,hideNavBar:l=!1}=(0,o.m7)(e);return{brand:t,isEchoShow:"echoshow"===t,launchType:a,isSmartPlayer:i,loop:s,replyComment:r,hideNavBar:l}}},63954:(e,t,i)=>{i.d(t,{i:()=>R});var o,n=i(11040),a=i(91051),s=i(12079),r=i(2360),l=i(95872);!function(e){e.SCMPageView="scm_page_view",e.SCMTagClick="scm_tag_click",e.SCMDescriptionPop="scm_description_pop",e.SCMLearnMoreClick="scm_learn_more_click",e.SCMQuit="scm_quit"}(o||(o={}));var d,c=i(68191),u=i(36488);!function(e){e[e.User=0]="User",e[e.Caption=1]="Caption",e[e.ToolTip=2]="ToolTip"}(d||(d={}));const p=(0,c.Z)("div",{target:"e2imevf0"})((({labelType:e,theme:{colors:t}})=>[{display:"flex",width:"fit-content",borderRadius:"2px",alignItems:"center"},1===e?{backgroundColor:t.ConstBGInverse3,padding:"0 5px"}:0===e?{cursor:"pointer",backgroundColor:t.BGInput,padding:"1px 4px"}:{cursor:"pointer",flexDirection:"row-reverse"}]),"label:DivSCMLabel;"),g=(0,c.Z)("div",{target:"e2imevf1"})((({labelType:e,theme:t})=>[(0,u.GI)({theme:t,fontFamily:"Proxima",fontWeight:2===e?"normal":"semiBold"}),1===e?{fontSize:"13px",lineHeight:"22px",color:t.colors.ConstTextInverse,marginLeft:"4px"}:0===e?{fontSize:"12px",lineHeight:"18px",color:t.colors.TextPrimary,marginLeft:"4px"}:{fontSize:"14px",lineHeight:"22px",color:t.colors.TextTertiary,marginRight:"4px"}]),"label:DivSCMText;");var h=i(21041),m=i(32273),_=i(33642),v=i(32370),y=i(85640),b=i(17133),f=i(58854),x=i(76126),w=i(97186);const k=(0,c.Z)("div",{target:"es1egko0"})({padding:"24px 20px 6px",width:"310px",borderRadius:"8px",textAlign:"center",wordBreak:"break-word",display:"flex",flexDirection:"column",alignItems:"center"},"label:DivMobileWrapper;"),S=(0,c.Z)("div",{target:"es1egko1"})((({theme:e})=>({padding:"32px",width:"400px",borderRadius:"8px",textAlign:"center",wordBreak:"break-word",display:"flex",flexDirection:"column",alignItems:"center",color:e.colors.TextPrimary})),"label:DivDesktopWrapper;"),C=(0,c.Z)("div",{target:"es1egko4"})((({theme:e})=>[{textAlign:"center",fontSize:"20px",lineHeight:"24px",margin:"16px 0 12px"},(0,u.GI)({theme:e,fontFamily:"Proxima",fontWeight:"bold",color:"TextPrimary"})]),"label:DivMobileTitle;"),j=(0,c.Z)("div",{target:"es1egko5"})((({theme:e})=>[{textAlign:"center",fontSize:"24px",lineHeight:"36px",margin:"16px 0"},(0,u.GI)({theme:e,fontFamily:"Proxima",fontWeight:"bold",color:"TextPrimary"})]),"label:DivDesktopTitle;"),T=(0,c.Z)("div",{target:"es1egko6"})((({theme:e})=>[{textAlign:"center",fontSize:"15px",lineHeight:"18px"},(0,u.GI)({theme:e,fontFamily:"Proxima",color:"TextSecondary"})]),"label:DivMobileContent;"),I=(0,c.Z)("div",{target:"es1egko7"})((({theme:e})=>[{textAlign:"center",fontSize:"16px",lineHeight:"22px"},(0,u.GI)({theme:e,fontFamily:"Proxima",color:"TextSecondary"})]),"label:DivDesktopContent;"),P=(0,c.Z)("div",{target:"es1egko8"})({display:"flex",marginTop:"16px"},"label:DivDesktopBtnWrapper;"),O={width:"100%",height:"44px",fontSize:"15px",lineHeight:"44px",textDecoration:"none"},L={width:"164px",height:"48px",fontSize:"16px",lineHeight:"48px",borderRadius:"4px"},M=(0,c.Z)(w.v,{target:"es1egko9"})((({theme:e})=>[(0,u.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold"}),Object.assign(Object.assign({},O),{margin:"22px 0 2px",borderRadius:"2px",color:`${e.colors.ConstTextInverse} !important`,backgroundColor:e.colors.Primary,display:"block"})]),"label:StyledMobileLink;"),E=(0,c.Z)(w.v,{target:"es1egko10"})((({theme:e})=>[(0,u.GI)({theme:e,fontFamily:"Proxima",fontWeight:"bold"}),Object.assign(Object.assign({},L),{backgroundColor:e.colors.Primary,color:`${e.colors.ConstTextInverse} !important`,display:"block"})]),"label:StyledDesktopLink;"),A=(0,c.Z)("div",{target:"es1egko11"})((({theme:e})=>[(0,u.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal"}),Object.assign(Object.assign({},O),{backgroundColor:e.colors.BGTertiary,color:e.colors.TextReverse2})]),"label:DivMobileDismiss;"),D=(0,c.Z)("div",{target:"es1egko12"})((({theme:e})=>[(0,u.GI)({theme:e,fontFamily:"Proxima",fontWeight:"bold"}),Object.assign(Object.assign({},L),{backgroundColor:e.colors.BGSecondary2,marginRight:"8px",color:e.colors.TextPrimary,border:`1px solid ${e.colors.LineSecondary2}`,cursor:"pointer"})]),"label:DivDesktopDismiss;"),F=(0,a.memo)((({visible:e,pathname:t,newWindow:i=!1,isWebapp:o=!1,onClose:s,onJump:d})=>{const{language:c,user:u,region:p}=(0,_.m7)((0,b.Lh)((()=>["language","user","region"]),[])),{isMobile:g}=(0,_.m7)((0,f.h)((()=>["isMobile"]),[])),w=(0,m.Q)(),O=(0,h.TH)(),L=(0,x.C)({location:O,to:{pathname:t,search:{lang:c,user_id:null==u?void 0:u.uid,is_user_log_in:u?1:0,country_code:p}}}),F=(0,v.Z)();return(0,a.useEffect)((()=>{o&&e&&l.W.event("scm_description_pop")}),[o,e]),g?(0,n.jsx)(y.u_,Object.assign({visible:e,maskCloseable:!0,onClose:s},{children:(0,n.jsxs)(k,{children:[(0,n.jsx)(r.D,{size:48,center:!0},void 0),(0,n.jsx)(C,{children:w("scm_label_and_appeal_modal_title")},void 0),(0,n.jsx)(T,{children:w("scm_label_and_appeal_modal_desc")},void 0),(0,n.jsx)(M,Object.assign({target:i?"_blank":void 0,forceSSR:!0,to:L,onClick:d},{children:w("scm_label_and_appeal_modal_button_learn_more")}),void 0),(0,n.jsx)(A,Object.assign({onClick:s},{children:w("scm_label_and_appeal_modal_button_dismiss")}),void 0)]},void 0)}),void 0):(0,n.jsx)(y.u_,Object.assign({parentRef:F,visible:e,maskCloseable:!0,onClose:s},{children:(0,n.jsxs)(S,{children:[(0,n.jsx)(r.D,{size:64,center:!0},void 0),(0,n.jsx)(j,{children:w("scm_label_and_appeal_modal_title")},void 0),(0,n.jsx)(I,{children:w("scm_label_and_appeal_modal_desc")},void 0),(0,n.jsxs)(P,{children:[(0,n.jsx)(D,Object.assign({onClick:s},{children:w("scm_label_and_appeal_modal_button_dismiss")}),void 0),(0,n.jsx)(E,Object.assign({target:i?"_blank":void 0,forceSSR:!0,to:L,onClick:d},{children:w("scm_label_and_appeal_modal_button_learn_more")}),void 0)]},void 0)]},void 0)}),void 0)})),R=(0,a.memo)((({stateControlledMedia:e,isUserPage:t,labelType:i,style:o={}})=>{const[d,c]=(0,a.useState)(!1),u=(0,a.useCallback)((()=>{c(!1),l.W.event("scm_quit")}),[]),h=(0,a.useCallback)((()=>{c(!0),l.W.event("scm_tag_click")}),[]),m=(0,a.useCallback)((()=>{l.W.event("scm_learn_more_click")}),[]);return(0,a.useEffect)((()=>{e&&t&&l.W.event("scm_page_view")}),[t,Boolean(e)]),e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(p,Object.assign({style:o,labelType:i,onClick:h},{children:[2===i?(0,n.jsx)(s.j,{size:12},void 0):(0,n.jsx)(r.D,{size:14},void 0),(0,n.jsx)(g,Object.assign({labelType:i},{children:e.text}),void 0)]}),void 0),(0,n.jsx)(F,{pathname:e.url,visible:d,onClose:u,isWebapp:!0,onJump:m},void 0)]},void 0):null}))},1029:(e,t,i)=>{i.d(t,{R:()=>s});var o=i(99297),n=i(33642),a=i(17133);const s=()=>{var e;const t=null!==(e=(0,o.Sf)("desktop_app"))&&void 0!==e&&e,{userAgent:i=""}=(0,n.m7)((0,a.Lh)((()=>["userAgent"]),[])),s=t&&i.includes("tiktok")&&i.includes("TTElectron"),r=s&&i.includes("osName/Mac");return{isElectronApp:s,isMacElectronApp:r,isWinElectronApp:s&&!r}}},17133:(e,t,i)=>{i.d(t,{bp:()=>d,Lh:()=>c});var o=i(9236),n=i(19334),a=i.n(n),s=i(91051),r=i(28188),l=i(26641);function d(){return(0,o.mp)(l.G)}function c(e,t){const i=(0,s.useContext)(r.Il);return(0,s.useMemo)((()=>i?a()(i,...e()):i),t)}},26641:(e,t,i)=>{i.d(t,{G:()=>v});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(8741),l=i(11348),d=i(82346),c=i(60595),u=i(20948),p=i(56979),g=i(49584),h=i(53095),m=i(10026),_=i(5549);let v=class extends n.D{constructor(){super(...arguments),this.defaultState={appContext:null,initialized:!1,lang:"en",sideNavActive:!1}}setSideNavActive(e,t){e.sideNavActive=t}toggleSideNav(e){return e.pipe((0,u.M)(this.state$),(0,p.U)((([e,t])=>this.getActions().setSideNavActive(!t.sideNavActive))))}setAppContext(e,t){var{statusCode:i}=t,n=(0,o.__rest)(t,["statusCode"]);0===i&&(e.appContext=(0,r.vV)(Object.assign({},n)))}setInitialized(e,t){e.initialized=t}setLang(e,t){e.lang=t}init(e){return e.pipe((0,u.M)(this.state$),(0,g.z)((([{appContext:e},{initialized:t}])=>t?l.E:(0,d.of)(Object.assign(Object.assign({},e),{statusCode:0})).pipe((0,h.z)((t=>(0,d.of)(this.getActions().setAppContext(t),this.getActions().setLang(e.language)))),(0,m.O)(this.getActions().setInitialized(!1)),(0,_.l)(this.getActions().setInitialized(!0),this.terminate())))))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"setSideNavActive",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"toggleSideNav",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"setAppContext",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"setInitialized",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"setLang",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"init",null),v=(0,o.__decorate)([(0,s.Y)("AppContext")],v)},58854:(e,t,i)=>{i.d(t,{T:()=>r,h:()=>l});var o=i(9236),n=i(19334),a=i.n(n),s=i(2844);function r(){return(0,o.mp)(s.r)}function l(e,t){return(0,o.mp)(s.r,{selector:t=>{const{bizContext:i}=t;return i?a()(i,...e()):i},dependencies:t})}},23745:(e,t,i)=>{i.d(t,{O:()=>O});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(35167),l=i(82346),d=i(11348),c=i(68854),u=i(60595),p=i(20948),g=i(56979),h=i(53095),m=i(93859),_=i(49584),v=i(86032),y=i(31222),b=i(55198),f=i(40340),x=i(21005),w=i(87930),k=i(66891),S=i(97751),C=i(33966),j=i(38310),T=i(47416);const I={foryou:0,topic:0,following:0,video:0,music:1,music_new:1,challenge:1,challenge_new:1,sticker:1,user:1,"user-post":1,"user-liked":1,search_top:1,search_video:1,question:1,playlist:1,live_event:1,video_playlist:0,create_video_playlist:0,messages:0,discover:1,poi:1,collection:1,"user-post-public":0,explore:0,channel:1,search_live:1,favorites:1,"keyword-expansion":1},P={3:"friends",2:"private",1:"public"};let O=class extends n.D{constructor(e,t,i,o,n,a){super(),this.service=e,this.itemList=t,this.item=i,this.videoPlayer=o,this.videoExperience=n,this.t=a,this.defaultState={currentIndex:0,itemListKey:null,jumpSamePageTime:0,belowPlayMode:0,enterWindowTimeSec:Number(new Date),showingBrowserMode:!1,activeTab:0}}setShowingBrowserMode(e,t){e.showingBrowserMode=t}setItemListKey(e,t){e.itemListKey=t}setCurrentIndex(e,t){e.currentIndex=t}setBelowPlayMode(e,t){e.belowPlayMode=t}setClickSamePage(e){e.jumpSamePageTime=Date.now()}setActiveTab(e,t){e.activeTab=t}showBrowserMode(e){return e.pipe((0,p.M)(this.state$,this.itemList.state$),(0,g.U)((([{index:e,playProgress:t,belowPlayMode:i,forceUseIndexLocation:o},{itemListKey:n},a])=>({listInfo:a[n],itemListKey:n,index:e,playProgress:t,belowPlayMode:i,forceUseIndexLocation:o}))),(0,h.z)((({listInfo:e,index:t=0,playProgress:i=0,belowPlayMode:o,forceUseIndexLocation:n})=>{if(!e)return(0,l.of)(this.noop());const{browserList:a,list:s}=e,r=s[t],d=n?t:Math.max(0,Math.min(a.length-1,a.findIndex((e=>r===e)))),c=this.updateVideoIndex({newIndex:d,newId:r,isIndexInvalid:!1,playProgress:i});return o&&c.push(this.getActions().setBelowPlayMode(o)),c.push(this.getActions().setShowingBrowserMode(!0)),(0,l.of)(...c)})))}closeBrowserMode(e){return e.pipe((0,p.M)(this.state$,this.itemList.state$),(0,h.z)((([e,{itemListKey:t,currentIndex:i,belowPlayMode:o},n])=>{var a,s,r;const{playProgress:d=0,shouldPause:c=!1}=null!=e?e:{},u=n[null!=t?t:""],p=null!==(a=null==u?void 0:u.browserList)&&void 0!==a?a:[],g=null!==(s=null==u?void 0:u.list)&&void 0!==s?s:[],h=null!==(r=p[i])&&void 0!==r?r:"",m=g.findIndex((e=>h===e));return(0,l.of)(this.videoPlayer.getActions().updateVideo({currentVideo:{index:c?-1:m,id:c?"":h,mode:null!=o?o:I[null!=t?t:""]},playProgress:d}),this.getActions().setBelowPlayMode(null),this.getActions().setShowingBrowserMode(!1))})))}handleNextVideo(e){return e.pipe((0,m.b)((()=>{this.videoExperience.reportVideoInteractStart({startTime:Date.now(),situation:"browser_mode_next"})})),(0,p.M)(this.state$,this.itemList.state$),(0,g.U)((([e,{itemListKey:t,currentIndex:i},o])=>{var n,a,s;const r=null!==(a=null===(n=o[null!=t?t:""])||void 0===n?void 0:n.browserList)&&void 0!==a?a:[],l=Math.min(i+1,r.length-1);return{newIndex:l,isIndexInvalid:!(null==r?void 0:r.length)||l<0,newId:null!==(s=r[l])&&void 0!==s?s:""}})),(0,m.b)((({isIndexInvalid:e})=>{e&&console.warn("cannot switch to next video for some reasons")})),(0,h.z)((e=>(0,l.of)(...this.updateVideoIndex(e)))),(0,x.n)({}))}handlePrevVideo(e){return e.pipe((0,m.b)((()=>{this.videoExperience.reportVideoInteractStart({startTime:Date.now(),situation:"browser_mode_prev"})})),(0,p.M)(this.state$,this.itemList.state$),(0,g.U)((([e,{itemListKey:t,currentIndex:i},o])=>{var n,a,s;const r=null!==(a=null===(n=o[null!=t?t:""])||void 0===n?void 0:n.browserList)&&void 0!==a?a:[],l=Math.max(i-1,0);return{newIndex:l,isIndexInvalid:!(null==r?void 0:r.length)||l>r.length-1,newId:null!==(s=r[l])&&void 0!==s?s:""}})),(0,m.b)((({isIndexInvalid:e})=>{e&&console.warn("cannot switch to prev video for some reasons")})),(0,h.z)((e=>(0,l.of)(...this.updateVideoIndex(e)))),(0,x.n)({}))}postCloseAds(e){return e.pipe((0,_.z)((e=>this.service.postAdsAction({biz:1,type:6,language:e}).pipe((0,g.U)((({status_code:e})=>(0!==e&&console.warn("postCloseAds failed"),this.noop()))),(0,x.n)({callback:this.commonToastError})))))}postVideoDelete(e){return e.pipe((0,_.z)((e=>this.service.postVideoDelete(e).pipe((0,m.b)((({status_code:e,status_msg:t})=>{b.h.destroy(),2752===e?b.h.open({content:t,duration:3,widthType:"half"}):0===e?(b.h.open({content:this.t("deleted"),duration:3,widthType:"half"}),v.o.handleVideoDelete("delete")):b.h.open({content:this.t(S.kU),duration:3,widthType:"half"})})),(0,g.U)((({status_code:t})=>0===t?this.getActions().updateDeleteVideo(e.aweme_id):this.noop())),(0,x.n)({callback:this.commonToastError})))))}postModifyVisibility(e){return e.pipe((0,h.z)((e=>this.service.postModifyVisibility(e).pipe((0,m.b)((({status_code:t,status_msg:i})=>{2752===t?(b.h.destroy(),b.h.open({content:i,duration:3,widthType:"half"})):0!==t?(b.h.destroy(),b.h.open({content:this.t(S.kU),duration:3,widthType:"half"})):(v.o.handleSelectPrivacySettingVideo({to_status:P[e.type]}),(0,w.k)(t,[0]))})),(0,g.U)((t=>0===t.status_code?this.item.getActions().setItemPrivateState({id:e.aweme_id,visibility:e.type}):2054===t.status_code?this.getActions().updateDeleteVideo(e.aweme_id):this.noop())),(0,x.n)({callback:this.commonToastError})))))}postUserSetting(e){return e.pipe((0,_.z)((e=>this.service.postUserSetting(e).pipe((0,m.b)((({status_code:t})=>{this.tapPrivateSettingErrorToast({status_code:t,target:"comment",to_status:0===e.private_setting?"on":"off"})})),(0,g.U)((({status_code:t})=>{var i,o;return 0===t?this.item.getActions().updateItem({id:null!==(i=e.aweme_id)&&void 0!==i?i:"",itemCommentStatus:e.private_setting}):2054===t?this.getActions().updateDeleteVideo(null!==(o=e.aweme_id)&&void 0!==o?o:""):this.noop()})),(0,x.n)({callback:()=>{this.tapPrivateSettingErrorToast({status_code:-1,target:"comment",to_status:0===e.private_setting?"on":"off"})}})))))}postDuetOrStitchChange(e){return e.pipe((0,_.z)((({type:e,enable:t,aweme_id:i})=>this.service.postDuetStitchChange({aweme_id:i,[e]:t}).pipe((0,m.b)((({status_code:i})=>{this.tapPrivateSettingErrorToast({status_code:i,target:e,to_status:t?"on":"off"})})),(0,g.U)((({status_code:o})=>0===o?"item_duet"===e?this.item.getActions().updateItem({id:i,duetEnabled:0===t}):this.item.getActions().updateItem({id:i,stitchEnabled:0===t}):2054===o?this.getActions().updateDeleteVideo(i):this.noop())),(0,x.n)({callback:()=>{this.tapPrivateSettingErrorToast({status_code:-1,target:e,to_status:t?"on":"off"})}})))))}updateDeleteVideo(e){return e.pipe((0,p.M)(this.state$,this.itemList.state$),(0,g.U)((([e,{currentIndex:t,itemListKey:i},o])=>{var n,a,s;const r=null===(n=o[null!=i?i:""])||void 0===n?void 0:n.browserList,l=null!==(a=null==r?void 0:r.length)&&void 0!==a?a:0,d=!r||l-1<=0,c=l-1===t;return{id:e,isIndexInvalid:d,newIndex:c?t-1:t,newId:d?"":null!==(s=null==r?void 0:r[c?t-1:t+1])&&void 0!==s?s:""}})),(0,h.z)((({id:e,isIndexInvalid:t,newIndex:i,newId:o})=>e?(0,l.of)(this.itemList.getActions().setDeleteVideo(e),this.item.getActions().setDeleteVideo(e),...this.updateVideoIndex({newIndex:i,newId:o,isIndexInvalid:t})):d.E)))}clickSamePage(e){return e.pipe((0,h.z)((()=>(0,l.of)(this.getActions().setClickSamePage()))))}postScheduleDelete(e){return e.pipe((0,_.z)((e=>this.service.postScheduleDelete({aweme_id:e}).pipe((0,m.b)((()=>{b.h.destroy(),b.h.open({content:this.t("deleted"),duration:3,widthType:"half"})})),(0,h.z)((()=>(0,l.of)(this.getActions().updateDeleteVideo(e))))))),(0,c.K)((()=>(b.h.destroy(),b.h.open({content:this.t("Sorry, something wrong with the server, please try again."),duration:3,widthType:"half"}),(0,l.of)(this.noop())))),(0,m.b)((()=>{v.o.handleScheduleDelete("delete")})))}updateVideoIndex({newIndex:e,isIndexInvalid:t,newId:i,playProgress:o}){return t?[this.noop()]:[this.getActions().setCurrentIndex(e),this.videoPlayer.getActions().updateVideo({currentVideo:{index:e,id:i,mode:2},playProgress:null!=o?o:0})]}commonToastError(){b.h.destroy(),b.h.open({content:this.t(S.kU),duration:3,widthType:"half"})}tapPrivateSettingErrorToast({target:e,to_status:t,status_code:i}){0===i?v.o.handlePrivateSetting({target:e,to_status:t}):2054===i?(b.h.destroy(),b.h.open({content:this.t("video_unavailable_deleted"),duration:3,widthType:"half"})):(b.h.destroy(),b.h.open({content:this.t(S.kU),duration:3,widthType:"half"}))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],O.prototype,"setShowingBrowserMode",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],O.prototype,"setItemListKey",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],O.prototype,"setCurrentIndex",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],O.prototype,"setBelowPlayMode",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",void 0)],O.prototype,"setClickSamePage",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],O.prototype,"setActiveTab",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[u.y]),(0,o.__metadata)("design:returntype",void 0)],O.prototype,"showBrowserMode",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[u.y]),(0,o.__metadata)("design:returntype",void 0)],O.prototype,"closeBrowserMode",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[u.y]),(0,o.__metadata)("design:returntype",void 0)],O.prototype,"handleNextVideo",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[u.y]),(0,o.__metadata)("design:returntype",void 0)],O.prototype,"handlePrevVideo",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[u.y]),(0,o.__metadata)("design:returntype",void 0)],O.prototype,"postCloseAds",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[u.y]),(0,o.__metadata)("design:returntype",void 0)],O.prototype,"postVideoDelete",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[u.y]),(0,o.__metadata)("design:returntype",void 0)],O.prototype,"postModifyVisibility",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[u.y]),(0,o.__metadata)("design:returntype",void 0)],O.prototype,"postUserSetting",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[u.y]),(0,o.__metadata)("design:returntype",void 0)],O.prototype,"postDuetOrStitchChange",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[u.y]),(0,o.__metadata)("design:returntype",void 0)],O.prototype,"updateDeleteVideo",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[u.y]),(0,o.__metadata)("design:returntype",void 0)],O.prototype,"clickSamePage",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[u.y]),(0,o.__metadata)("design:returntype",void 0)],O.prototype,"postScheduleDelete",null),O=(0,o.__decorate)([(0,s.Y)("BrowserMode"),(0,o.__param)(5,(0,r.t)(k.s$)),(0,o.__metadata)("design:paramtypes",[T.o,C.h,j.A,f.f,y.KF,Function])],O)},47416:(e,t,i)=>{i.d(t,{o:()=>r});var o=i(64047),n=i(57244),a=i(70526),s=i(18645);let r=class{constructor(e){this.fetch=e}postModifyVisibility(e){return this.fetch.post("/api/aweme/modify/visibility/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken}),headers:{[a.eD]:this.fetch.csrfToken},baseUrlType:2})}postUserSetting(e){return this.fetch.post("/api/user/set/settings/",{baseUrlType:2,query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken}),headers:{[a.eD]:this.fetch.csrfToken}})}postDuetStitchChange(e){return this.fetch.post("/api/aweme/set/react_duet_stitch/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken}),headers:{[a.eD]:this.fetch.csrfToken},baseUrlType:2})}postVideoDelete(e){return this.fetch.post("/api/aweme/delete/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken}),headers:{[a.eD]:this.fetch.csrfToken},baseUrlType:2})}postAdsAction(e){return this.fetch.post("/api/commit/ads/action/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken}),headers:{[a.eD]:this.fetch.csrfToken},baseUrlType:2})}postScheduleDelete(e){return this.fetch.post("/api/schedule/aweme/delete/",{query:e,headers:{[a.eD]:this.fetch.csrfToken},baseUrlType:2})}};r=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[s.r])],r)},75617:(e,t,i)=>{i.d(t,{Rt:()=>S,gp:()=>k,oo:()=>w});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(35167),l=i(49584),d=i(53095),c=i(82346),u=i(68854),p=i(60595),g=i(55198),h=i(66891),m=i(57244),_=i(18645);let v=class{constructor(e){this.fetch=e}checkUserStatusBeforeSwitchout(){return this.fetch.post("/api/ba/business/suite/account/quitcheck",{baseUrlType:2})}switchOutBusinessAccount(){return this.fetch.post("/api/ba/business/suite/account/off",{baseUrlType:2})}};var y,b;v=(0,o.__decorate)([(0,m.G)(),(0,o.__metadata)("design:paramtypes",[_.r])],v),function(e){e.None="none",e.PersonalAccount="personal_account",e.ProAccount="pro_account"}(y||(y={})),function(e){e.None="none",e.SwitchConfirmModal="switch_confirm_modal",e.InvalidModal="invalid_modal"}(b||(b={}));const f=[3019001,3019002,3019003,3019018],x="Sorry, something wrong with the server, please try again.",w={3019001:"ttba_ob_switchouterr_title",3019002:"ttba_ob_switchouterr_title_lttfb",3019003:"ttba_ob_switchouterr_title_lmp",3019018:"ttba_ob_switchouterr_title_seller"},k={3019001:"ttba_ob_switchouterr_subtext",3019002:"ttba_ob_switchouterr_subtext_lttfb",3019003:"ttba_ob_switchouterr_subtext_lmp",3019018:"ttba_ob_switchouterr_subtext_seller"};let S=class extends n.D{constructor(e,t){super(),this.service=e,this.t=t,this.defaultState={switchedType:"none",businessAccountModalType:"none",invalidCode:0}}checkSwitchOut(e){return e.pipe((0,l.z)((()=>this.service.checkUserStatusBeforeSwitchout().pipe((0,d.z)((({statusCode:e})=>{if(!f.includes(e)&&0!==e)return g.h.open({content:this.t(x),duration:3}),(0,c.of)(this.noop());const t=0===e?"switch_confirm_modal":"invalid_modal";return(0,c.of)(this.getActions().setInvalidCode(e),this.getActions().setBusinessAccountModalType(t))})),this.catchError()))))}switchBusinessAccount(e){return e.pipe((0,l.z)((({action_type:e})=>this.service.switchOutBusinessAccount().pipe((0,d.z)((({statusCode:t})=>0===t?(g.h.open({content:this.t("switched_to_personal"),duration:3}),(0,c.of)(this.getActions().setSwitchedType(0===e?"personal_account":"pro_account"),this.getActions().setBusinessAccountModalType("none"))):(g.h.open({content:this.t(x),duration:3}),(0,c.of)(this.noop())))),this.catchError()))))}setBusinessAccountModalType(e,t){e.businessAccountModalType=t}setInvalidCode(e,t){e.invalidCode=t}setSwitchedType(e,t){e.switchedType=t}catchError(){return(0,u.K)((()=>(g.h.open({content:this.t(x),duration:3}),(0,c.of)(this.noop()))))}};(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"checkSwitchOut",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"switchBusinessAccount",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"setBusinessAccountModalType",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"setInvalidCode",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"setSwitchedType",null),S=(0,o.__decorate)([(0,s.Y)("BusinessAccountModule"),(0,o.__param)(1,(0,r.t)(h.s$)),(0,o.__metadata)("design:paramtypes",[v,Function])],S)},23434:(e,t,i)=>{i.d(t,{Y:()=>g});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(49584),l=i(56979),d=i(60595),c=i(57244),u=i(18645);let p=class{constructor(e){this.fetch=e}getBusinessPermissionList(){return this.fetch.get("/api/ba/business/suite/permission/list/",{query:{permissionList:"001004,001005"},baseUrlType:2})}};p=(0,o.__decorate)([(0,c.G)(),(0,o.__metadata)("design:paramtypes",[u.r])],p);let g=class extends n.D{constructor(e){super(),this.service=e,this.defaultState={businessPermission:{comment:!1,message:!1}}}setBusinessPermission(e,t){e.businessPermission=t}getBusinessPermissionList(e){return e.pipe((0,r.z)((()=>this.service.getBusinessPermissionList().pipe((0,l.U)((e=>{var t;const i=null!==(t=null==e?void 0:e.permissionList)&&void 0!==t?t:[];return this.getActions().setBusinessPermission({message:i.indexOf("001004")>-1,comment:i.indexOf("001005")>-1})}))))))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],g.prototype,"setBusinessPermission",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[d.y]),(0,o.__metadata)("design:returntype",void 0)],g.prototype,"getBusinessPermissionList",null),g=(0,o.__decorate)([(0,s.Y)("Business"),(0,o.__metadata)("design:paramtypes",[p])],g)},20393:(e,t,i)=>{i.d(t,{vI:()=>g});var o,n,a=i(64047),s=i(73566),r=i(48185),l=i(19630),d=i(82346),c=i(60595),u=i(53095);!function(e){e.Download="download",e.FriendShare="share",e.CopyLink="link",e.PictureInPicture="pip",e.VideoDetails="details",e.Comment="comment",e.Like="like",e.UserDetails="user",e.PhotoDetails="photo"}(o||(o={})),function(e){e.Photo="photo",e.Video="video"}(n||(n={}));const p={location:{x:0,y:0},contextMenuOpen:!1,videoInfo:{videoId:"",author:"",downloadAddr:"",videoShareHandler:()=>{},mediaType:"video"},menuOptions:[],mediaType:"video"};let g=class extends s.D{constructor(){super(...arguments),this.defaultState=p}setLocation(e,t){e.location=t}setContextMenuOpen(e,t){e.contextMenuOpen=null!=t?t:e.contextMenuOpen}setVideoInfo(e,t){t&&(e.videoInfo=t)}setMenuOptions(e,t){t&&(e.menuOptions=t)}openContextMenu(e){return e.pipe((0,u.z)((({location:e,videoInfo:t,menuOptions:i})=>(0,d.of)(this.getActions().setContextMenuOpen(!0),this.getActions().setLocation(e),this.getActions().setVideoInfo(t),this.getActions().setMenuOptions(i)))))}resetContextMenu(e){return e.pipe((0,u.z)((()=>(0,d.of)(this.getActions().setLocation(p.location),this.getActions().setVideoInfo(p.videoInfo),this.getActions().setMenuOptions(p.menuOptions)))))}};(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],g.prototype,"setLocation",null),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],g.prototype,"setContextMenuOpen",null),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],g.prototype,"setVideoInfo",null),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],g.prototype,"setMenuOptions",null),(0,a.__decorate)([(0,r.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[c.y]),(0,a.__metadata)("design:returntype",void 0)],g.prototype,"openContextMenu",null),(0,a.__decorate)([(0,r.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[c.y]),(0,a.__metadata)("design:returntype",void 0)],g.prototype,"resetContextMenu",null),g=(0,a.__decorate)([(0,l.Y)("ContextMenuModule")],g)},39664:(e,t,i)=>{i.d(t,{yb:()=>u,rJ:()=>p});var o,n=i(11040),a=i(91623),s=i.n(a),r=i(43226),l=i.n(r),d=i(91051),c=i(97751);!function(e){e.OneColumnMode="one_column_mode",e.SwiperMode="swiper_mode"}(o||(o={}));const u=(0,d.createContext)({feedMode:"swiper_mode",switchFeedMode:l()}),p=(0,d.memo)((({feedMode:e,children:t})=>{const i=null!=e?e:s().get(c.qC)||"swiper_mode",[o,a]=(0,d.useState)(i),r=(0,d.useCallback)((e=>{a(e)}),[]),l=(0,d.useMemo)((()=>({feedMode:o,switchFeedMode:r})),[o,r]);return(0,n.jsx)(u.Provider,Object.assign({value:l},{children:t}),void 0)}))},10668:(e,t,i)=>{i.d(t,{e:()=>M});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(51722),l=i.n(r),d=i(50986),c=i(82346),u=i(60595),p=i(35435),g=i(10026),h=i(93859),m=i(56979),_=i(53095),v=i(68854),y=i(20948),b=i(49584),f=i(5549),x=i(29782),w=i(21005),k=i(27360),S=i(2844),C=i(57244),j=i(90293),T=i(18645),I=i(70526),P=i(49290);const O=(0,k.LM)();let L=class{constructor(e){this.fetch=e}getNewestReply(){return this.fetch.get(P.NI.getNewestReply,{query:Object.assign({},O)})}getFaqList(e){const{language:t,faqType:i,entrance:o="general"}=e,n=P.NI.getListV3,a=Object.assign(Object.assign({},O),{lang:(0,k.rB)(t),entrance:o,faqType:i,faqTypes:i});return this.fetch.get(n,{query:a}).pipe((0,m.U)((e=>({statusCode:e.status_code,statusMessage:e.status_message,faqInfoMap:e.faq_info_map,entranceMap:e.entrance_map}))))}getReportRecords(e){const{language:t,minId:i,maxId:n}=e,a=(0,o.__rest)(e,["language","minId","maxId"]),s=Object.assign(Object.assign(Object.assign({},O),{lang:(0,k.rB)(t),min_id:i,max_id:n}),a);return this.fetch.get(P.NI.getReportRecords,{query:s})}uploadImage(e){const t=new FormData;for(let i=0;i<e.length;i++){const{file:o,height:n,width:a}=e[i];t.append("type",o.type),t.append("size",String(o.size)),t.append("name",o.name),t.append("height",String(n)),t.append("width",String(a)),t.append(`file${i}`,o)}return this.fetch.post(P.NI.uploadImage,{query:{tt_csrf_token:this.fetch.csrfToken},headers:{[I.eD]:this.fetch.csrfToken},omitContentType:!0,body:t}).pipe((0,m.U)((e=>{const{data:t,statusCode:i,isPrivateImage:o}=e;return{data:(t||[]).map((e=>({image_width:e.width,image_height:e.height,image_uri:e.url}))),isPrivateImage:o,statusCode:i}})),(0,v.K)((()=>(0,c.of)({data:[],statusCode:-1}))))}reportFeedback(e){return this.fetch.post(P.NI.submitFeedback,{query:Object.assign(Object.assign({},O),e),withCredentials:!0,body:j.stringify({entrance:e.entrance||""}),headers:{[I.eD]:this.fetch.csrfToken}})}};L=(0,o.__decorate)([(0,C.G)(),(0,o.__metadata)("design:paramtypes",[T.r])],L);let M=class extends n.D{constructor(e,t){super(),this.service=e,this.bizContext=t,this.defaultState={hasNewFeedbackReply:!1,lastFeedbackReplyId:0,faq:{},records:{list:[],map:{},loading:!1,firstLoad:!1,hasMore:!0,hasDeleteData:!1,error:!1},form:{submitting:!1,success:!1,error:!1,uploadError:!1}}}setReply(e,t){e.lastFeedbackReplyId=t.feedback_id,e.hasNewFeedbackReply=t.has_reply}setFaqState(e,t){var i,o,n,a,s,r,l,d,c,u;const{faqType:p,data:g,loading:h,statusCode:m}=t,{flattened:_,levels:v}=g?(0,k.X)(g):{flattened:null,levels:null};e.faq[p]={data:null!==(o=null!=g?g:null===(i=e.faq[p])||void 0===i?void 0:i.data)&&void 0!==o?o:[],flattened:null!==(a=null!=_?_:null===(n=e.faq[p])||void 0===n?void 0:n.flattened)&&void 0!==a?a:{},levels:null!==(r=null!=v?v:null===(s=e.faq[p])||void 0===s?void 0:s.levels)&&void 0!==r?r:[],loading:null!==(d=null!=h?h:null===(l=e.faq[p])||void 0===l?void 0:l.loading)&&void 0!==d&&d,statusCode:null!==(u=null!=m?m:null===(c=e.faq[p])||void 0===c?void 0:c.statusCode)&&void 0!==u?u:null}}setFormState(e,t){e.form=Object.assign(Object.assign({},e.form),t)}setRecordsState(e,t){var i;e.records=Object.assign(Object.assign({},e.records),t),t.refreshRecords&&(e.records.list=[],e.records.map={}),null===(i=t.records)||void 0===i||i.forEach((({record:t,displayTime:i})=>{const o=Object.assign(Object.assign({},t),{displayTime:i});e.records.list.unshift(o),e.records.map[i]=e.records.map[i]||[],e.records.map[i].unshift(o)}))}addRecords(e,t){t.forEach((({record:t,displayTime:i})=>{const o=Object.assign(Object.assign({},t),{displayTime:i});e.records.list.unshift(o),e.records.map[i]=e.records.map[i]||[],e.records.map[i].unshift(o)}))}getNewestReply(e){return e.pipe((0,p.w)((()=>(0,d.F)(6e5).pipe((0,g.O)(0)).pipe((0,p.w)((()=>this.service.getNewestReply().pipe((0,h.b)((e=>{e.data||console.warn("There is no data in response.")})),(0,m.U)((e=>e.data?this.getActions().setReply(e.data):this.noop())),(0,w.n)({}))))))))}submitFeedback(e){return e.pipe((0,_.z)((e=>{const{files:t}=e;return(null==t?void 0:t.length)?this.service.uploadImage(t).pipe((0,_.z)((t=>{const{data:i,statusCode:o}=t;return(0,c.of)(Object.assign(Object.assign({},e),{submitting:!1,imageData:i,imageError:0!==o||!(null==i?void 0:i.length)}))})),(0,v.K)((()=>(0,c.of)(Object.assign(Object.assign({},e),{submitting:!1,imageData:[],imageError:!0}))))):(0,c.of)(Object.assign(Object.assign({},e),{imageData:[],imageError:!1}))})),(0,y.M)(this.bizContext.state$),(0,_.z)((([e,{bizContext:t}])=>{const{content:i,feedbackId:o,imageData:n,imageError:a,isMobile:s,language:r="",region:l="",entrance:d}=e,{os:u=""}=null!=t?t:{},p=s?"webapp_mobile":"webapp_pc";if(a)return(0,c.of)(this.getActions().setFormState({submitting:!1,error:!1,success:!1,uploadError:!0}));const g={};(null==n?void 0:n.length)&&(g.is_private_image=1);const h={content:i,image_list:JSON.stringify(n||[]),qr_id:o,from:p,channel:p,sys_region:l,device:u,country:l,entrance:d,language:(0,k.rB)(r),multi_image:1,extra_params:JSON.stringify(g)};return this.service.reportFeedback(h).pipe((0,m.U)((e=>{const{err_code:t}=e;if(0===t)return this.getActions().setFormState({submitting:!1,error:!1,success:!0,uploadError:!1});throw new Error})),(0,v.K)((()=>(0,c.of)(this.getActions().setFormState({submitting:!1,error:!0,success:!1,uploadError:!1})))))})))}getReportRecords(e){return e.pipe((0,y.M)(this.state$),(0,b.z)((([{maxId:e,minId:t=0,count:i=15,language:o="",user:n,region:a},{records:s}])=>{var r;const d=n?(0,x.Pz)({uniqueId:n.uniqueId,secUid:n.secUid}):"",{list:u,hasMore:p}=s,h=null!=e?e:(null===(r=u[0])||void 0===r?void 0:r.id)||0,_=0===h;return _||p?this.service.getReportRecords({language:(0,k.rB)(o),count:i,minId:t,maxId:h}).pipe((0,m.U)((e=>{const{data:t}=e,o=[];return t.forEach((e=>{const{content:t,status:i,pub_date:n,type:s}=e;if(""===t&&0===i)return this.getActions().setRecordsState({hasDeleteData:!0,loading:!1});const r=l()(1e3*n).format("YYYY-MM-DD HH:mm");e.content=(0,k.nV)(t,s,d,a),o.push({record:e,displayTime:r})})),this.getActions().setRecordsState({firstLoad:!0,hasMore:Boolean(t.length&&t.length===i),records:o,refreshRecords:_})})),(0,g.O)(this.getActions().setRecordsState({loading:!0,firstLoad:!_})),(0,f.l)(this.getActions().setRecordsState({loading:!1}))):(0,c.of)(this.noop())})),(0,v.K)((()=>(0,c.of)(this.getActions().setRecordsState({loading:!1,error:!0})))))}getFaqList(e){return e.pipe((0,_.z)((({entrance:e,id:t,language:i})=>{const o=(0,k.jI)(e)||(0,k.Cc)(t);return this.service.getFaqList({language:(0,k.rB)(i),entrance:o,faqType:""}).pipe((0,m.U)((e=>{const{statusMessage:t,faqInfoMap:i,entranceMap:n}=(0,k.Xo)(e);if("success"!==t)throw new Error;return{statusCode:0,data:(0,k.mX)({faqInfoMap:i,entranceMap:n,faqType:"",entrance:o})}})),(0,v.K)((()=>(0,c.of)(this.getActions().setFaqState({faqType:"",data:[],statusCode:-1,loading:!1})))),(0,m.U)((e=>this.getActions().setFaqState(Object.assign({faqType:"",loading:!1},e)))),(0,g.O)(this.getActions().setFaqState({loading:!0,faqType:""})),(0,f.l)(this.getActions().setFaqState({loading:!1,faqType:""}),this.terminate()))})))}getCommonFaqList(e){return e.pipe((0,_.z)((({entrance:e,id:t,language:i})=>{const o=(0,k.jI)(e)||(0,k.Cc)(t),n="common";return this.service.getFaqList({language:(0,k.rB)(i),entrance:o,faqType:n}).pipe((0,m.U)((e=>{const{statusMessage:t,faqInfoMap:i,entranceMap:a}=(0,k.Xo)(e);if("success"!==t)throw new Error;return{statusCode:0,data:(0,k.mX)({faqInfoMap:i,entranceMap:a,faqType:n,entrance:o})}})),(0,v.K)((()=>(0,c.of)(this.getActions().setFaqState({faqType:n,data:[],statusCode:-1,loading:!1})))),(0,m.U)((e=>this.getActions().setFaqState(Object.assign({faqType:n,loading:!1},e)))),(0,g.O)(this.getActions().setFaqState({loading:!0,faqType:n})),(0,f.l)(this.getActions().setFaqState({loading:!1,faqType:n}),this.terminate()))})))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],M.prototype,"setReply",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],M.prototype,"setFaqState",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],M.prototype,"setFormState",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],M.prototype,"setRecordsState",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],M.prototype,"addRecords",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[u.y]),(0,o.__metadata)("design:returntype",void 0)],M.prototype,"getNewestReply",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[u.y]),(0,o.__metadata)("design:returntype",void 0)],M.prototype,"submitFeedback",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[u.y]),(0,o.__metadata)("design:returntype",void 0)],M.prototype,"getReportRecords",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[u.y]),(0,o.__metadata)("design:returntype",void 0)],M.prototype,"getFaqList",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[u.y]),(0,o.__metadata)("design:returntype",void 0)],M.prototype,"getCommonFaqList",null),M=(0,o.__decorate)([(0,s.Y)("Feedback"),(0,o.__metadata)("design:paramtypes",[L,S.r])],M)},39712:(e,t,i)=>{i.d(t,{D:()=>m});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(11348),l=i(14716),d=i(60595),c=i(93859),u=i(56979),p=i(73117),g=i(53095),h=i(47871);let m=class extends n.D{constructor(){super(...arguments),this.defaultState={isPwaInstallable:!1,isModalShow:!1,isExpand:!1}}storeDeferredPrompt(e){return e.pipe((0,c.b)((e=>{this.deferredPrompt=e})),(0,u.U)((()=>this.noop())))}setIsPwaInstallable(e,t){e.isPwaInstallable=t}setIsModalShow(e,t){e.isModalShow=t}setIsExpand(e,t){e.isExpand=t}handleShowSnack(e){return e.pipe((0,c.b)((e=>h.C.handleShowSnack(e))),(0,u.U)((()=>this.noop())))}handleClickDownload(e){return e.pipe((0,c.b)((()=>h.C.handleClickDownload())),(0,u.U)((()=>this.noop())))}handleInstallationClick(e){return e.pipe((0,c.b)((()=>h.C.handleGetForPC())),(0,p.g)(0),(0,g.z)((()=>this.deferredPrompt?(this.deferredPrompt.prompt(),(0,l.D)(this.deferredPrompt.userChoice).pipe((0,c.b)((e=>{"accepted"===e.outcome?h.C.handleInstallApp():console.warn("choice result outcome is not accepted")})),(0,u.U)((e=>"accepted"===e.outcome?this.getActions().setIsPwaInstallable(!1):this.noop())))):r.E)))}};(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[d.y]),(0,o.__metadata)("design:returntype",void 0)],m.prototype,"storeDeferredPrompt",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],m.prototype,"setIsPwaInstallable",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],m.prototype,"setIsModalShow",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],m.prototype,"setIsExpand",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[d.y]),(0,o.__metadata)("design:returntype",void 0)],m.prototype,"handleShowSnack",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[d.y]),(0,o.__metadata)("design:returntype",void 0)],m.prototype,"handleClickDownload",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[d.y]),(0,o.__metadata)("design:returntype",void 0)],m.prototype,"handleInstallationClick",null),m=(0,o.__decorate)([(0,s.Y)("AppPromotion")],m)},66881:(e,t,i)=>{i.d(t,{_:()=>D});var o=i(11040),n=i(9236),a=i(43226),s=i.n(a),r=i(91051),l=i(58641),d=i(28972),c=i(32273),u=i(53120),p=i(60871),g=i(72083),h=i(73090);const m=(0,r.memo)((function(e){const{iconLanguage:t,iconConfig:i}=(0,r.useMemo)((()=>(0,g.lk)(e)),[e]),{region:n=""}=e,a=(0,c.Q)()("add_windows_store_badge_download_app_stores"),s=(0,r.useCallback)((e=>{u.Fx.handleClickAppStore(e)}),[]);return(0,o.jsxs)(r.Fragment,{children:[(0,o.jsx)(h.wF,{children:a},void 0),(0,o.jsx)(h.Mf,Object.assign({region:n},{children:i.map((({alt:e,href:i,platform:n})=>(0,o.jsx)(h.$,Object.assign({href:i,target:"_blank",rel:"nofollow noopener noreferrer",onClick:s.bind(null,n)},{children:(0,o.jsx)(h.EV,{src:"microsoft"===n?(0,h.Aq)(t):p,platform:n,alt:e,lang:t},void 0)}),n)))}),void 0)]},void 0)}));var _=i(26641),v=i(2844),y=i(4825),b=i(50121);const f=(0,i(74752).ZP)({resolved:{},chunkName:()=>"qrcode.react",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.resolve().then(i.t.bind(i,52372,23)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>52372});var x=i(68191),w=i(36488),k=i(36061);const S=(0,x.Z)("div",{target:"eamnwhk0"})({textAlign:"center",maxWidth:"400px"},"label:DivLargeContentContainer;"),C=(0,x.Z)("div",{target:"eamnwhk1"})((({theme:{direction:e,colors:t}})=>[{borderBottom:`0.5px solid ${t.LinePrimary}`,paddingTop:"24px",paddingBottom:"16px",maxWidth:"400px"},(0,w.YJ)({direction:e,paddingStart:"24px",paddingEnd:"48px"})]),"label:DivModalHeader;"),j=(0,x.Z)("p",{target:"eamnwhk2"})((({theme:e})=>(0,w.GI)({theme:e,typography:"P0",fontWeight:"bold"})),"label:PTitle;"),T=(0,x.Z)("p",{target:"eamnwhk3"})((({theme:e})=>(0,w.GI)({theme:e,typography:"P1",fontWeight:"semiBold"})),{margin:"32px 0 24px 0",width:"auto",padding:"0 24px"},"label:PSubTitle;"),I=(0,x.Z)("div",{target:"eamnwhk4"})({position:"relative",display:"flex",flexDirection:"column",alignItems:"center"},"label:DivQRContainer;"),P=(0,x.Z)(k.Z,{target:"eamnwhk5"})({display:"block"},"label:StyledQrBg;"),O=(0,x.Z)("div",{target:"eamnwhk6"})({position:"absolute",width:"174px",height:"174px",left:"50%",top:"50%",transform:"translate(-50%, -50%)",borderRadius:"4px",overflow:"hidden"},"label:DivQRCodeWrapper;"),L=(0,x.Z)("img",{target:"eamnwhk7"})({width:"100%"},"label:ImgQRCode;"),M=(0,x.Z)("div",{target:"eamnwhk12"})({display:"flex",flexDirection:"column",alignItems:"center",width:"400px",padding:"24px 24px 60px 24px"},"label:DivDownloadLContainer;"),E=(0,x.Z)("div",{target:"eamnwhk13"})((({theme:{direction:e}})=>[{position:"absolute",top:"24px",borderRadius:"50%",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1,width:"24px",height:"24px"},(0,w.YJ)({direction:e,end:"24px"})]),"label:DivCloseWrapper;"),A=(0,r.memo)((function({appType:e,text:t,style:i={}}){const n="t"===e?b:y;return(0,o.jsxs)(I,Object.assign({style:i},{children:[(0,o.jsx)(P,{width:"176",height:"176"},void 0),(0,o.jsx)(O,{children:t?(0,o.jsx)(f,{size:174,value:t},void 0):(0,o.jsx)(L,{src:n},void 0)},void 0)]}),void 0)})),D=(0,r.memo)((function(e){var t,i;const{visible:a,qrCodeText:u,onClose:p=s()}=e,g=(0,c.Q)(),h=null!==(t=e.title)&&void 0!==t?t:g("add_windows_store_badge_get_tiktok_app"),y=null!==(i=e.subTitle)&&void 0!==i?i:g("add_windows_store_badge_scan_qr"),{region:b,appType:f,lang:x}=(0,n.mp)(_.G,{selector:e=>{var t,i;return{region:null===(t=e.appContext)||void 0===t?void 0:t.region,lang:e.lang,appType:null===(i=e.appContext)||void 0===i?void 0:i.appType}},dependencies:[]}),w=(0,n.mp)(v.r,{selector:e=>{var t,i,o,n;return{isIOS:null===(t=e.bizContext)||void 0===t?void 0:t.isIOS,isAndroid:null===(i=e.bizContext)||void 0===i?void 0:i.isAndroid,downloadLink:null!==(n=null===(o=e.bizContext)||void 0===o?void 0:o.downloadLink)&&void 0!==n?n:{}}},dependencies:[]}),k=(0,r.useMemo)((()=>Object.assign({lang:x},w)),[x,w]);return(0,o.jsxs)(l.AR,Object.assign({isOpen:a,onClose:p,compact:!0},{children:[(0,o.jsxs)(C,{children:[(0,o.jsx)(E,Object.assign({onClick:p},{children:(0,o.jsx)(d.Z,{width:24,height:24},void 0)}),void 0),(0,o.jsx)(j,{children:h},void 0)]},void 0),(0,o.jsxs)(S,{children:[(0,o.jsxs)(I,{children:[(0,o.jsx)(T,{children:y},void 0),(0,o.jsx)(A,{appType:f,text:u},void 0)]},void 0),(0,o.jsx)(M,{children:(0,o.jsx)(m,Object.assign({},k,{region:b}),void 0)},void 0)]},void 0)]}),void 0)}))},24703:(e,t,i)=>{i.d(t,{X:()=>l});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(60595);let l=class extends n.D{constructor(){super(),this.defaultState={isCookieBannerShowing:!1}}setCookieBannerShowing(e,t){e.isCookieBannerShowing=t}};(0,o.__decorate)([(0,a.cQ)(),(0,o.__metadata)("design:type",r.y)],l.prototype,"dispose$",void 0),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],l.prototype,"setCookieBannerShowing",null),l=(0,o.__decorate)([(0,s.Y)("FixBottomModule"),(0,o.__metadata)("design:paramtypes",[])],l)},72700:(e,t,i)=>{i.d(t,{r:()=>r});var o=i(64047),n=i(73566),a=i(48185),s=i(19630);let r=class extends n.D{constructor(){super(),this.defaultState={redDotCount:0,hasVisitedFollowing:!1}}setRedDotCount(e,t){e.redDotCount=t}setHasVisitedFollowing(e,t){e.hasVisitedFollowing=t}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],r.prototype,"setRedDotCount",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],r.prototype,"setHasVisitedFollowing",null),r=(0,o.__decorate)([(0,s.Y)("FollowingRedDotModule"),(0,o.__metadata)("design:paramtypes",[])],r)},35199:(e,t,i)=>{i.d(t,{zW:()=>u,TB:()=>p,CN:()=>g});var o=i(64047),n=i(9236),a=i(16926),s=i(91051),r=i(95872),l=i(45313),d=i(14500),c=i(26641);function u(e){const t=(0,n.mp)(c.G,{dependencies:[],selector:e=>{var t;return null===(t=e.appContext)||void 0===t?void 0:t.user}});return{isShowLive:(0,s.useMemo)((()=>Boolean((null==e?void 0:e.roomId)&&"0"!==(null==e?void 0:e.roomId)&&(null==t?void 0:t.uid)!==e.id)),[null==t?void 0:t.uid,null==e?void 0:e.id,null==e?void 0:e.roomId]),src:null==e?void 0:e.avatarThumb,uniqueId:null==e?void 0:e.uniqueId,pureLivePath:e?(0,l.P4)({uniqueId:null==e?void 0:e.uniqueId,secUid:null==e?void 0:e.secUid}):""}}function p({reportTrigger:e,user:t,enterMethod:i,autoReport:o,reportValidator:n,once:l,liveExtraParams:c}){const u=(0,a.fz)(d.yB),[p,h]=(0,s.useState)(!1),m=(0,s.useMemo)((()=>{var e,o;return Object.assign({anchor_id:null!==(e=null==t?void 0:t.id)&&void 0!==e?e:"",follow_status:null!==(o=null==t?void 0:t.relation)&&void 0!==o?o:-1,room_id:null==t?void 0:t.roomId,enter_from_merge:r.W.commonParams.page_name,enter_method:i,action_type:"click"},c)}),[i,c,null==t?void 0:t.id,null==t?void 0:t.relation,null==t?void 0:t.roomId]),_=(0,s.useCallback)((()=>{p&&l||(u.handleLiveEntranceShow(m),h(!0))}),[p,u,l,m]);return(0,s.useEffect)((()=>{o&&e&&n()&&_()}),[e]),{handleExposure:_,teaParams:g({user:t,enterMethod:i})}}function g(e){var{user:t,enterMethod:i}=e,n=(0,o.__rest)(e,["user","enterMethod"]);return(0,s.useMemo)((()=>{var e,o,a;return Object.assign({anchor_id:null!==(e=null==t?void 0:t.id)&&void 0!==e?e:"",follow_status:null!==(o=null==t?void 0:t.relation)&&void 0!==o?o:-1,room_id:null==t?void 0:t.roomId,enter_from_merge:r.W.commonParams.page_name,enter_from:r.W.commonParams.page_name,action_type:"click",enter_method:i,to_user_id:null!==(a=null==t?void 0:t.id)&&void 0!==a?a:""},n)}),[t,i,n])}},78223:(e,t,i)=>{i.d(t,{m:()=>u});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(67929),l=i.n(r),d=i(33642),c=i(66599);let u=class extends n.D{constructor(e){super(),this.userModule=e,this.defaultState={}}setItem(e,t){t.id_str&&(e[t.id_str]=t)}updateItem(e,t){t.id_str&&e[t.id_str]&&(e[t.id_str]=l()(e[t.id_str],t))}multiSetItem(e,t){t.forEach((t=>this.setItem(e,t)))}addItems(e){const t=e.filter((e=>Boolean(e.owner))).map((e=>{var t,i;return(0,d.yk)(Object.assign(Object.assign({},e.owner),{unique_id:null===(t=e.owner)||void 0===t?void 0:t.display_id,custom_verify:null===(i=e.owner)||void 0===i?void 0:i.authentication_info,room_id:e.id_str}))}));return[this.userModule.getActions().multiSetUser(t),this.getActions().multiSetItem(e)]}setDeleteVideo(e,t){e[t]&&(e[t]=void 0)}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],u.prototype,"setItem",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],u.prototype,"updateItem",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],u.prototype,"multiSetItem",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],u.prototype,"setDeleteVideo",null),u=(0,o.__decorate)([(0,s.Y)("LiveModule"),(0,o.__metadata)("design:paramtypes",[c.z])],u)},65580:(e,t,i)=>{i.d(t,{R:()=>_});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(29974),l=i.n(r),d=i(2600),c=i.n(d),u=i(82346),p=i(60595),g=i(20948),h=i(53095),m=i(78223);Object.freeze({statusCode:0,loading:!0,list:[],browserList:[],hasMore:!0,cursor:"0"});let _=class extends n.D{constructor(e){super(),this.live=e,this.defaultState={}}resetLiveList(e,t){const{key:i,hasMore:o=!0,loading:n=!0,cursor:a="0"}=t;e[i]={list:[],browserList:[],loading:n,statusCode:0,hasMore:o,cursor:a}}addLiveList(e,t){const{key:i,list:o,statusCode:n=0,hasMore:a,cursor:s}=t;e[i]||(e[i]={list:[],browserList:[],loading:!1,statusCode:n,hasMore:Boolean(a),cursor:s}),e[i].list=l()(e[i].list,c()(o,"id_str").map((({id_str:e})=>e))),e[i].statusCode=n,e[i].hasMore=a,e[i].cursor=s}setLoading(e,t){const{loading:i,key:o}=t;e[o]||(e[o]={list:[],browserList:[],loading:i,statusCode:0,hasMore:!0,cursor:"0"}),e[o].loading=i}setListKeyword(e,t){const{keyword:i,key:o}=t;e[o]||(e[o]={keyword:i,list:[],browserList:[],loading:!1,statusCode:0,hasMore:!0,cursor:"0"}),e[o].keyword=i}setList(e){return e.pipe((0,g.M)(this.state$),(0,h.z)((([{key:e,response:t}])=>{const{liveList:i=[],statusCode:o=0,hasMore:n=!1,cursor:a="0"}=t;return 0===o?(0,u.of)(...this.live.addItems(i),this.getActions().addLiveList({key:e,list:i,statusCode:o,hasMore:n,cursor:a})):(0,u.of)(this.getActions().addLiveList({key:e,list:[],statusCode:o,hasMore:!0}))})))}};(0,o.__decorate)([(0,a.cQ)(),(0,o.__metadata)("design:type",p.y)],_.prototype,"dispose$",void 0),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"resetLiveList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"addLiveList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"setLoading",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"setListKeyword",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"setList",null),_=(0,o.__decorate)([(0,s.Y)("LiveList"),(0,o.__metadata)("design:paramtypes",[m.m])],_)},9343:(e,t,i)=>{i.d(t,{r:()=>w});var o,n=i(64047),a=i(73566),s=i(48185),r=i(19630),l=i(43226),d=i.n(l),c=i(90293),u=i(82346),p=i(60595),g=i(20948),h=i(53095),m=i(93859),_=i(95872),v=i(30395),y=i(18791),b=i(11467),f=i(26641),x=i(2844);!function(e){e.SSO="sso",e.QR="qr"}(o||(o={}));let w=class extends a.D{constructor(e,t,i,o){super(),this.home=e,this.report=t,this.slardar=i,this.bizContext=o,this.defaultState={isOpen:!1,url:"",closeable:!1,isBannerActive:!1,bannerEnabled:!1,content:{title:"",desc:"",btnOpenText:""},iframeStyle:{},handleDownload:d(),handleLogin:d(),closeCallback:d(),loginModalShow:!1,maskCloseable:!1,userId:"",enterMethod:void 0,pageType:5,modalType:""}}setCloseable(e,t){e.closeable=t}setUrl(e,t){e.url=t}setLoginPath(e,t){e.loginPath=t}setCloseCallback(e,t){t&&(e.closeCallback=t)}setIsOpen(e,t){e.isOpen=t}setContent(e,t){t&&(e.content=t)}setHandleDownload(e,t){t&&(e.handleDownload=t)}setHandleLogin(e,t){t&&(e.handleLogin=t)}setIframeStyle(e,t){e.iframeStyle=t}setModalType(e,t){e.modalType=t}setLoginModalShow(e,t){var i,o,n;this.slardar.toggleLoginSlardar(t),e.loginModalShow=t,!t&&window.byted_acrawler&&(null===(o=(i=window.byted_acrawler).setUserMode)||void 0===o||o.call(i,(0,y.M1)({isVA:Boolean("TTP"===(null===(n=this.home.state.appContext)||void 0===n?void 0:n.clusterRegion)),isLogin:!1,isFTC:!1,isHighRisk:!1})))}setMaskCloseable(e,t){e.maskCloseable=t}setPageType(e,t){e.pageType=t}setUserId(e,t){e.userId=t}setEnterMethod(e,t){e.enterMethod=t}setPopupType(e,t){e.popupType=t}openModal(e){return e.pipe((0,g.M)(this.home.state$,this.state$,this.bizContext.state$),(0,h.z)((([{url:e,loginPath:t,isSignup:i,closeable:o=!0,query:n={},iframeStyle:a={},content:s,handleDownload:r,handleLogin:l,closeCallback:d,maskCloseable:p=!1,userId:g,enterMethod:h,pageType:m=999,popupType:v},{lang:y},b,{bizContext:f}])=>{var x,w;const S=null!=t?t:"/"+(i?"signup":"login"),C=null!=e?e:(0,c.stringifyUrl)({url:S,query:Object.assign({lang:y,is_modal:1,hide_close_btn:1,event_name:i?"enter_sign_up":null,type:k()?"recharge":"",enter_from:_.W.commonParams.page_name},n)},{skipNull:!0}),j=null!=h?h:n.enter_method,T=null!==(w=null!==(x=n.type)&&void 0!==x?x:k()?"recharge":"")&&void 0!==w?w:"";return C.match(/\/login|\/signup/)&&!(null==f?void 0:f.isMobile)?(0,u.of)(this.getActions().setUrl(C),this.getActions().setModalType(T),this.getActions().setCloseable(o),this.getActions().setLoginModalShow(!0),this.getActions().setPopupType(v),this.getActions().setEnterMethod(j)):(0,u.of)(this.getActions().setUrl(C),this.getActions().setCloseable(o),this.getActions().setIsOpen(!0),this.getActions().setContent(s),this.getActions().setHandleDownload(r),this.getActions().setHandleLogin(l),this.getActions().setIframeStyle(a),this.getActions().setMaskCloseable(p),this.getActions().setCloseCallback(d),this.getActions().setUserId(g),this.getActions().setEnterMethod(j),this.getActions().setPageType(m),this.getActions().setPopupType(v))})))}closeModal(e){return e.pipe((0,g.M)(this.state$),(0,m.b)((([{enter_method:e,disableReport:t},i])=>{t||this.report.LoginNotifyClose({enter_method:e})})),(0,h.z)((([e,{closeCallback:t=d()}])=>{const i=[this.getActions().setIsOpen(!1)];return t(),(0,u.of)(...i)})))}setIsBannerActive(e,t){e.isBannerActive=t}};function k(){return-1!==(window.location.pathname+window.location.search).indexOf("recharge")}(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Boolean]),(0,n.__metadata)("design:returntype",void 0)],w.prototype,"setCloseable",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,String]),(0,n.__metadata)("design:returntype",void 0)],w.prototype,"setUrl",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,String]),(0,n.__metadata)("design:returntype",void 0)],w.prototype,"setLoginPath",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],w.prototype,"setCloseCallback",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Boolean]),(0,n.__metadata)("design:returntype",void 0)],w.prototype,"setIsOpen",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],w.prototype,"setContent",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],w.prototype,"setHandleDownload",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],w.prototype,"setHandleLogin",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],w.prototype,"setIframeStyle",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],w.prototype,"setModalType",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Boolean]),(0,n.__metadata)("design:returntype",void 0)],w.prototype,"setLoginModalShow",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],w.prototype,"setMaskCloseable",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Number]),(0,n.__metadata)("design:returntype",void 0)],w.prototype,"setPageType",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],w.prototype,"setUserId",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],w.prototype,"setEnterMethod",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],w.prototype,"setPopupType",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],w.prototype,"openModal",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],w.prototype,"closeModal",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Boolean]),(0,n.__metadata)("design:returntype",void 0)],w.prototype,"setIsBannerActive",null),w=(0,n.__decorate)([(0,r.Y)("LoginModal"),(0,n.__metadata)("design:paramtypes",[f.G,v.ZI,b.n,x.r])],w)},23822:(e,t,i)=>{i.d(t,{m:()=>I});var o,n=i(64047),a=i(73566),s=i(48185),r=i(19630),l=i(35167),d=i(11348),c=i(82346),u=i(69349),p=i(60595),g=i(35435),h=i(20948),m=i(10026),_=i(5549),v=i(53095),y=i(49584),b=i(93859),f=i(56979),x=i(68854),w=i(55198),k=i(21005),S=i(66891),C=i(33966),j=i(38310),T=i(57664);!function(e){e.Friends="friends",e.Strangers="strangers"}(o||(o={}));let I=class extends a.D{constructor(e,t,i,o){super(),this.service=e,this.itemList=t,this.item=i,this.t=o,this.defaultState={friends:{},strangers:{},selectedConversation:void 0,currentMessage:{list:[],hasMore:!0},isLoadingMoreMessage:!1,failedMessageMap:{},hasFeedbackMap:{},failedVideoCodeMap:{},itemListByMessageId:[],recordedFocusOrigin:""}}multiSetConversation(e,t){const{list:i,isStranger:o}=t,n={};return i.forEach((e=>{n[e.id]=e})),o?Object.assign(Object.assign({},e),{strangers:Object.assign(Object.assign({},e.strangers),n)}):Object.assign(Object.assign({},e),{friends:Object.assign(Object.assign({},e.friends),n)})}setUser(e,t){const{item:i,isStranger:o}=t;return o?Object.assign(Object.assign({},e),{strangers:Object.assign(Object.assign({},e.strangers),{[i.id]:i})}):Object.assign(Object.assign({},e),{friends:Object.assign(Object.assign({},e.friends),{[i.id]:i})})}addFailedMessage(e,t){e.failedMessageMap=Object.assign(Object.assign({},e.failedMessageMap),t)}setSelectedConversation(e,t){e.selectedConversation=t}setMessageListAction(e,t){e.currentMessage.list=null!=t?t:[]}setRecordedFocusOrigin(e,t){e.recordedFocusOrigin=t}setMessageHasMore(e,t){e.currentMessage.hasMore=t}setIsLoadingMoreMessage(e,t){e.isLoadingMoreMessage=t}setHasFeedbackMap(e,t){e.hasFeedbackMap=Object.assign(Object.assign({},e.hasFeedbackMap),{[t]:!0})}setFailedVideoCodeMap(e,t){e.failedVideoCodeMap=Object.assign(Object.assign({},e.failedVideoCodeMap),t)}setItemListByMessageId(e,t){e.itemListByMessageId=t}loadMoreMessage(e){return e.pipe((0,g.w)((({conversation:e,abTestVersion:t})=>this.service.getMessagesByConversation({conversation:e}).pipe((0,h.M)(this.state$),(0,g.w)((([{hasMore:i},{selectedConversation:o}])=>{if((null==o?void 0:o.id)!==e.id)return d.E;const n=e.getMessageList();return(0,c.of)(this.getActions().setMessageHasMore(i),this.getActions().setMessageList({list:n,abTestVersion:t}))})),(0,m.O)(this.getActions().setIsLoadingMoreMessage(!0)),(0,_.l)(this.getActions().setIsLoadingMoreMessage(!1))))))}setConversationSettingInfo(e){return e.pipe((0,h.M)(this.state$),(0,v.z)((([{id:e,mute:t,stickOnTop:i},{friends:o,strangers:n}])=>{var a,s;const r=null!==(s=null!==(a=o[e])&&void 0!==a?a:n[e])&&void 0!==s?s:{};return this.service.setConversationSettingInfo({conversation:r,mute:t,stickOnTop:i}),d.E})))}deleteConversation(e){return e.pipe((0,h.M)(this.state$),(0,v.z)((([{id:e},{friends:t}])=>{var i;const o=null!==(i=t[e])&&void 0!==i?i:{};return this.service.deleteConversation({conversation:o}),(0,c.of)(this.getActions().setSelectedConversation(void 0))})))}markConversationRead(e){return e.pipe((0,h.M)(this.state$),(0,v.z)((([{id:e},{friends:t}])=>{var i;const o=null!==(i=t[e])&&void 0!==i?i:{};return this.service.markConversationRead({conversation:o}),d.E})))}markStrangerConversationRead(e){return e.pipe((0,h.M)(this.state$),(0,v.z)((([{id:e},{strangers:t}])=>{var i;const o=null!==(i=t[e])&&void 0!==i?i:{};return this.service.markStrangerConversationRead({conversation:o}),d.E})))}handleMessageSend(e){return e.pipe((0,h.M)(this.state$),(0,v.z)((([e,{selectedConversation:t}])=>{if(!t)return d.E;const i=8===e.type;return(0,c.of)(this.getActions().getMessageList({id:null==t?void 0:t.id,shouldHandleVideoMessage:i,abTestVersion:e.abTestVersion}))})))}handleReceiveNewMessage(e){return e.pipe((0,h.M)(this.state$),(0,v.z)((([e,{selectedConversation:t}])=>{if(!t)return d.E;const i=8===e.type;return(0,c.of)(this.getActions().getMessageList({id:null==t?void 0:t.id,shouldHandleVideoMessage:i,abTestVersion:e.abTestVersion}))})))}handleMessageDelete(e){return e.pipe((0,h.M)(this.state$),(0,v.z)((([e,{selectedConversation:t}])=>{if(!t)return d.E;const i=8===e.type;return(0,c.of)(this.getActions().getMessageList({id:null==t?void 0:t.id,shouldHandleVideoMessage:i,abTestVersion:e.abTestVersion}))})))}getMessageList(e){return e.pipe((0,h.M)(this.state$),(0,g.w)((([{id:e,shouldHandleVideoMessage:t,abTestVersion:i},{friends:o,strangers:n}])=>{var a;const s=n[e],r=o[e],l=Boolean(s);if(!s&&!r)return d.E;if(l)return(0,c.of)(this.getActions().getStrangerMessageList({id:e,shouldHandleVideoMessage:t,abTestVersion:i}));const u=null!==(a=null==r?void 0:r.getMessageList())&&void 0!==a?a:[];return(0,c.of)(this.getActions().setMessageList({list:u,shouldHandleVideoMessage:t,abTestVersion:i}))})),(0,k.n)({}))}getStrangerMessageList(e){return e.pipe((0,h.M)(this.state$),(0,g.w)((([{id:e,shouldHandleVideoMessage:t,abTestVersion:i},{strangers:o}])=>{const n=o[e];return n?this.service.getStrangerConversationMessage({conversation:n}).pipe((0,g.w)((e=>(0,c.of)(this.getActions().setMessageList({list:e,shouldHandleVideoMessage:t,abTestVersion:i}))))):d.E})),(0,k.n)({}))}setMessageList(e){return e.pipe((0,h.M)(this.state$,this.item.state$),(0,v.z)((([{list:e,shouldHandleVideoMessage:t=!0,abTestVersion:i},{failedVideoCodeMap:o},n])=>{if(!t)return(0,c.of)(this.getActions().setMessageListAction(e));const a=[],s=[],r=[];return e.forEach((e=>{const{type:t,content:i,clientId:l}=e;if(8!==t)return;let d={};try{d=JSON.parse(i)}catch(e){return null}const c=null==d?void 0:d.itemId;o[c]||(s.push(c),r.push(l),n[c]||a.push(c))})),(0,c.of)(this.getActions().setMessageListAction(e),this.getActions().getVideoList({needRequestList:a,allList:s,allListByMessageId:r,abTestVersion:i}))})))}getVideoList(e){return e.pipe((0,g.w)((({needRequestList:e,allList:t,allListByMessageId:i})=>{if(!e.length)return(0,c.of)(this.itemList.getActions().setItemListById({key:"messages",list:t}),this.getActions().setItemListByMessageId(i));const o=e.map((e=>this.service.getItemInfo(e)));return(0,u.a)(o).pipe((0,g.w)((o=>{const n={},a=[];return o.forEach((({statusCode:o,itemInfo:s},r)=>{const l=e[r];if(0!==o){n[l]=o;const e=t.indexOf(l);e>-1&&(t.splice(e,1),i.splice(e,1))}else a.push(null==s?void 0:s.itemStruct)})),(0,c.of)(this.getActions().setFailedVideoCodeMap(n),...this.item.addItems(a),this.itemList.getActions().setItemListById({key:"messages",list:t}),this.getActions().setItemListByMessageId(i))})),(0,k.n)({}))})))}deleteMessage(e){return e.pipe((0,y.z)((({message:e})=>(this.service.deleteMessage({message:e}),d.E))))}likeMessage(e){return e.pipe((0,y.z)((({message:e,isLiked:t})=>(this.service.modifyMessageProperty({message:e,isLiked:t}),d.E))))}handleMessagePropertyUpsert(e){return e.pipe((0,h.M)(this.state$),(0,v.z)((([e,{friends:t,strangers:i,selectedConversation:o}])=>{var n,a,s;const r=null!==(n=e.uid)&&void 0!==n?n:"",l=e.conversationId,u=null!==(s=null!==(a=t[l])&&void 0!==a?a:i[l])&&void 0!==s?s:{};if(e.property["e:love"]){const{sender:t}=e;if(t!==r)return d.E;const i=e.property["e:love"],{length:n}=i;for(let e=0;e<n;e++){const t=i[e];if(t.userId!==r){const e=o===u;return u.customLocalLike={like:!0,date:t.createTime,hasRead:e},(0,c.of)(this.getActions().multiSetConversation({list:[u],isStranger:u.isStrangerConversation}))}}}else u.customLocalLike=null;return d.E})))}feedbackMessage(e){return e.pipe((0,h.M)(this.state$),(0,y.z)((([{shortId:e,uid:t,content:i,messageId:o},{hasFeedbackMap:n}])=>{const a=this.t("direct_meaasge_sending_ban_feedback_again"),s=this.t("Sorry, something wrong with the server, please try again.");return n[o]?(w.h.open({content:a,duration:3,widthType:"half"}),d.E):this.service.feedbackMessage({shortId:e,uid:t,content:i,messageId:o}).pipe((0,b.b)((({status_code:e})=>{0===e?w.h.open({content:a,duration:3,widthType:"half"}):w.h.open({content:s,duration:3,widthType:"half"})})),(0,f.U)((({status_code:e})=>0===e?this.getActions().setHasFeedbackMap(o):this.noop())),(0,x.K)((()=>(w.h.open({content:s,duration:3,widthType:"half"}),d.E))))})))}};(0,n.__decorate)([(0,s.j)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"multiSetConversation",null),(0,n.__decorate)([(0,s.j)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"setUser",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"addFailedMessage",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"setSelectedConversation",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"setMessageListAction",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,String]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"setRecordedFocusOrigin",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Boolean]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"setMessageHasMore",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Boolean]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"setIsLoadingMoreMessage",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,String]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"setHasFeedbackMap",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"setFailedVideoCodeMap",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Array]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"setItemListByMessageId",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"loadMoreMessage",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"setConversationSettingInfo",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"deleteConversation",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"markConversationRead",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"markStrangerConversationRead",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"handleMessageSend",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"handleReceiveNewMessage",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"handleMessageDelete",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"getMessageList",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"getStrangerMessageList",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"setMessageList",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"getVideoList",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"deleteMessage",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"likeMessage",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"handleMessagePropertyUpsert",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],I.prototype,"feedbackMessage",null),I=(0,n.__decorate)([(0,r.Y)("ConversationModule"),(0,n.__param)(3,(0,l.t)(S.s$)),(0,n.__metadata)("design:paramtypes",[T.e,C.h,j.A,Function])],I)},78658:(e,t,i)=>{i.d(t,{O:()=>I});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(58569),l=i(82346),d=i(11348),c=i(60595),u=i(93859),p=i(56979),g=i(53095),h=i(20948),m=i(10026),_=i(5549),v=i(49584),y=i(68854),b=i(90012),f=i(22597),x=i(21005),w=i(33642),k=i(66599),S=i(23822),C=i(57664),j=i(24595),T=i(32724);let I=class extends n.D{constructor(e,t,i,o){super(),this.service=e,this.user=t,this.conversation=i,this.messageUser=o,this.defaultState={initialized:!1,messageCount:0,recentUserList:[],recentUserNameList:[],recentUidList:[],allUidList:[],followingUser:{list:[],nicknameList:[],uidList:[],hasMore:!0,maxCursor:0,minCursor:0},isFollowingLoading:!1,isSendMessageFailed:!1,isSendMessageLoading:!1,conversationMap:{},allConversationList:[],conversationList:[],strangerConversationList:[],successSentMessageCount:0,isListLoading:!0,hasMoreFriends:!0,hasMoreStranger:!0,otherUid:""},this.recentUids="",this.friendsCursor=20}initSDK(e){return e.pipe((0,u.b)((e=>{this.service.options$.next(e)})),(0,p.U)((()=>this.noop())))}startRefreshMessage(e){return(0,r.T)(this.service.refreshMessage$,e).pipe((0,p.U)((()=>this.noop())))}setMessageCount(e,t){e.messageCount=t,(0,T.U)("new-message",{count:t})}setConversationMap(e,t){e.conversationMap=Object.assign({},t)}setConversationList(e,t){t.sort(((e,t)=>{if(e.isStickOnTop&&t.isStickOnTop||!e.isStickOnTop&&!t.isStickOnTop){const i=Math.max(e.customLocalLike?e.customLocalLike.date.getTime():-1,e.lastVisibleMessage?e.lastVisibleMessage.createdAt.getTime():-1);return Math.max(t.customLocalLike?t.customLocalLike.date.getTime():-1,t.lastVisibleMessage?t.lastVisibleMessage.createdAt.getTime():-1)-i}return 0})),e.conversationList=[...t]}setAllConversationList(e,t){e.allConversationList=[...t]}setStrangerConversationList(e,t){e.strangerConversationList=[...t]}setHasMoreStranger(e,t){e.hasMoreStranger=t}setListLoading(e,t){e.isListLoading=t}updateRecentUserList(e,t){const{uniqueIdList:i,nicknameList:o,uidList:n}=t;e.recentUserList=[...i],e.recentUserNameList=[...o],e.recentUidList=[...n]}updateFollowingUserList(e,t){e.followingUser=t}setFollowingLoading(e,t){e.isFollowingLoading=t}setUidList(e,t){e.allUidList=t}addSentMessageSuccessCount(e){e.successSentMessageCount=e.successSentMessageCount+1}setSendMessageStatus(e,t){var i,o;e.isSendMessageFailed=null!==(i=t.isFailed)&&void 0!==i&&i,e.isSendMessageLoading=null!==(o=t.isLoading)&&void 0!==o&&o,void 0!==t.successCount&&(e.successSentMessageCount=t.successCount)}setOtherUid(e,t){e.otherUid=t}setInitialized(e,t){e.initialized=t}handleImEvent(e){return e.pipe((0,p.U)((({event:e,sdk:t,params:i,uid:o,abTestVersion:n})=>{switch(e){case t.IMEvent.ConversationChange:return this.getActions().startConversationChange();case t.IMEvent.MessageSend:return this.conversation.getActions().handleMessageSend(Object.assign(Object.assign({},i),{abTestVersion:n}));case t.IMEvent.ReceiveNewMessage:return this.conversation.getActions().handleReceiveNewMessage(Object.assign(Object.assign({},i),{abTestVersion:n}));case t.IMEvent.MessageDelete:return this.conversation.getActions().handleMessageDelete(Object.assign(Object.assign({},i),{abTestVersion:n}));case t.IMEvent.MessagePropertyUpsert:return this.conversation.getActions().handleMessagePropertyUpsert(Object.assign(Object.assign({},i),{uid:o}));default:return this.noop()}})))}startConversationChange(e){return e.pipe((0,g.z)((()=>this.service.getConversationListOnline())),(0,h.M)(this.state$,this.conversation.state$),(0,g.z)((([e=[],{otherUid:t},{selectedConversation:i}])=>{const o=[],n={};t&&o.push(t);const a=e.reduce(((e,a)=>{const{id:s,mode:r,isStrangerConversation:l,toParticipantUserId:d,unreadCount:c,isMuted:u}=a;if(0===r&&!l){const r=d;if(r&&(r!==t&&o.push(r),n[r]=a),0!==c&&!u&&s!==(null==i?void 0:i.id))return e+1}return e}),0),s=o.slice(0,20);return(0,l.of)(this.getActions().setMessageCount(a),this.getActions().setConversationMap(n),this.getActions().setAllConversationList(e),this.getActions().setConversationList(e.slice(0,this.friendsCursor)),this.getActions().setUidList(o),this.getActions().setInitialized(!0),this.getActions().getStrangerPreview(),this.getActions().getMultiUsersByUids({uidList:s,isGetRecentUsers:!0}),this.conversation.getActions().multiSetConversation({list:e,isStranger:!1}))})),(0,m.O)(this.getActions().setListLoading(!0)),(0,x.n)({}))}getMoreConversationList(e){return e.pipe((0,h.M)(this.state$),(0,g.z)((([e,{allUidList:t,allConversationList:i}])=>{if(this.friendsCursor>=i.length)return d.E;const o=this.friendsCursor;return this.friendsCursor+=this.friendsCursor+15,(0,l.of)(this.getActions().getMultiUsersByUids({uidList:t.slice(o,this.friendsCursor)}),this.getActions().setConversationList(i.slice(0,this.friendsCursor)),this.getActions().setListLoading(!0))})))}getStrangerPreview(e){return e.pipe((0,h.M)(this.messageUser.state$,this.state$),(0,g.z)((([e,{users:t},{allConversationList:i,conversationList:o}])=>this.service.getStrangerPreview().pipe((0,g.z)((e=>{var n,a;const s=null==e?void 0:e.conversation,r=null==s?void 0:s.toParticipantUserId;if(!r)return d.E;const c=[...i],u=[...o],p=null!==(a=null===(n=null==s?void 0:s.lastVisibleMessage)||void 0===n?void 0:n.createdAt.getTime())&&void 0!==a?a:-1;c.some(((e,t)=>{var i,o;if((null!==(o=null===(i=null==e?void 0:e.lastVisibleMessage)||void 0===i?void 0:i.createdAt.getTime())&&void 0!==o?o:-1)<p&&!(null==e?void 0:e.isStickOnTop))return c.splice(t,0,s),!0;t===c.length-1&&c.splice(t+1,0,s)})),u.some(((e,t)=>{var i,o;if((null!==(o=null===(i=null==e?void 0:e.lastVisibleMessage)||void 0===i?void 0:i.createdAt.getTime())&&void 0!==o?o:-1)<p&&!(null==e?void 0:e.isStickOnTop))return u.splice(t,0,s),!0;t===u.length-1&&u.splice(t+1,0,s)})),c.length||(c.splice(0,0,s),u.splice(0,0,s));const g=[this.getActions().setAllConversationList(c),this.getActions().setConversationList(u),this.conversation.getActions().multiSetConversation({list:[s],isStranger:!0})];return t[r]||g.push(this.getActions().getMultiUsersByUids({uidList:[r]})),(0,l.of)(...g)})),(0,x.n)({})))))}getStrangerConversationList(e){return e.pipe((0,h.M)(this.state$,this.conversation.state$),(0,g.z)((([{isLoadMore:e},{strangerConversationList:t},{strangers:i}])=>this.service.getStrangerConversationList({cursor:e?this.strangerCursor:0,limit:15}).pipe((0,g.z)((({conversation:e,hasMore:t,cursor:o})=>{this.strangerCursor=o;const n=e.filter((e=>!i[e.id]));if(1!==e.length&&!n.length)return d.E;const a=n.map((e=>{var t;return null!==(t=e.toParticipantUserId)&&void 0!==t?t:""}));return(0,l.of)(this.getActions().setStrangerConversationList([...e]),this.conversation.getActions().multiSetConversation({list:n,isStranger:!0}),this.getActions().setHasMoreStranger(t),this.getActions().getMultiUsersByUids({uidList:a}))})),(0,m.O)(t.length?this.noop():this.getActions().setListLoading(!0)),(0,_.l)(this.getActions().setListLoading(!1))))))}getMultiUsersByUids(e){return e.pipe((0,h.M)(this.messageUser.state$,this.state$),(0,v.z)((([{uidList:e,isGetRecentUsers:t},{users:i},{otherUid:o}])=>{const{pathname:n}=location;if(!(0,f.oC)(n)&&5===(0,f.C2)(n))return d.E;const a=String(e),s=e.filter((e=>void 0===(null==i?void 0:i[e])));return e.length&&this.recentUids!==a&&s.length?(this.recentUids=a,this.service.getMultiUsersByUids(a).pipe((0,v.z)((i=>{var n;const a=null!==(n=null==i?void 0:i.userMap)&&void 0!==n?n:{},s=[],r=[],d=[],c=e.map((e=>{if(a[e])return o===e&&(0,T.U)("user-select",{uid:e,uniqueId:a[e].uniqueId,from:"message-init"}),a[e].id=e,s.push(a[e].uniqueId),r.push(a[e].nickname),d.push(e),a[e];a[e]=null})).filter((e=>e));if(!c.length)return(0,l.of)(this.noop(),this.getActions().setListLoading(!1));const u=[this.user.getActions().multiSetUser(c),this.messageUser.getActions().multiSetUsers(a)];return t&&u.push(this.getActions().updateRecentUserList({uniqueIdList:s,nicknameList:r,uidList:d})),(0,l.of)(...u)})),(0,_.l)(this.getActions().setListLoading(!1)))):(0,l.of)(this.getActions().setListLoading(!1))})),(0,x.n)({}))}getFollowingUserListWithCanShare(e){return e.pipe((0,h.M)(this.state$),(0,p.U)((([{count:e},t])=>Object.assign(Object.assign({},t.followingUser),{count:e}))),(0,g.z)((e=>{var{list:t,nicknameList:i,uidList:n}=e,a=(0,o.__rest)(e,["list","nicknameList","uidList"]);return this.service.getFollowingUserListWithCanShare(a).pipe((0,v.z)((e=>{const{status_code:o,max_time:a,min_time:s,followings:r=[],has_more:d}=e,c=[],u=[],p=[];if(0===o){let e=[];return r&&(e=r.map((e=>{var t;return c.push(null!==(t=e.unique_id)&&void 0!==t?t:""),u.push(e.nickname),p.push(e.uid),(0,w.oQ)(e)}))),(0,l.of)(this.getActions().updateFollowingUserList({list:[...t,...c],nicknameList:[...i,...u],uidList:[...n,...p],maxCursor:a,minCursor:s,hasMore:Boolean(d)}),this.user.getActions().multiSetUser(null!=e?e:[]),this.getActions().setFollowingLoading(!1))}return(0,l.of)(this.noop(),this.getActions().setFollowingLoading(!1))})),(0,m.O)(this.getActions().setFollowingLoading(!0)))})),(0,x.n)({}))}sendMessage(e){return e.pipe((0,h.M)(this.conversation.state$),(0,g.z)((([{uid:e,relation:t=0,type:i,content:o,hasConversation:n,chatType:a,messageType:s,convId:r},{friends:c,strangers:u}])=>{var h;return(n?(0,l.of)({type:i,content:o,conversation:null!==(h=c[r])&&void 0!==h?h:u[r]}):this.service.createConversation({uid:e}).pipe((0,p.U)((({payload:e})=>({type:i,content:o,conversation:null!=e?e:{}}))),(0,x.n)({}))).pipe((0,g.z)((({type:e,content:t,conversation:i})=>this.service.createMessage({conversation:i,type:e,content:JSON.stringify(t)}))),(0,g.z)((e=>49999===i?d.E:this.service.sendMessage({message:e}))),(0,g.z)((i=>{var o,n,r;const{success:d,checkMsg:c,payload:u}=i,p=[this.getActions().setSendMessageStatus({isFailed:!1,isLoading:!1}),this.getActions().addSentMessageSuccessCount()];return d?(b.R.handleSendMessage({chat_type:null!=a?a:"private",conversation_id:null!==(o=null==u?void 0:u.conversationId)&&void 0!==o?o:"",message_type:null!=s?s:"share_video",relation_tag:t,to_user_id:e}),(0,T.U)("message-send",{uid:e})):(b.R.handleFailSendMessage({chat_type:null!=a?a:"private",conversation_id:null!==(n=null==u?void 0:u.conversationId)&&void 0!==n?n:"",message_type:null!=s?s:"share_video",error_code:null!==(r=JSON.parse(null!=c?c:"{}").status_code)&&void 0!==r?r:-1,relation_tag:t,to_user_id:e}),(null==u?void 0:u.clientId)&&p.push(this.conversation.getActions().addFailedMessage({[null==u?void 0:u.clientId]:null!=c?c:"null"}))),(0,l.of)(...p)})),(0,y.K)((()=>(b.R.handleFailSendMessage({chat_type:null!=a?a:"private",conversation_id:"",message_type:null!=s?s:"share_video",error_code:-1,relation_tag:t,to_user_id:e}),(0,l.of)(this.getActions().setSendMessageStatus({isFailed:!0,isLoading:!1}))))))})),(0,x.n)({}),(0,m.O)(this.getActions().setSendMessageStatus({isFailed:!1,isLoading:!1})))}};(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"initSDK",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"startRefreshMessage",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"setMessageCount",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"setConversationMap",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"setConversationList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"setAllConversationList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"setStrangerConversationList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"setHasMoreStranger",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"setListLoading",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"updateRecentUserList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"updateFollowingUserList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"setFollowingLoading",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"setUidList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"addSentMessageSuccessCount",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"setSendMessageStatus",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"setOtherUid",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"setInitialized",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",c.y)],I.prototype,"handleImEvent",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"startConversationChange",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"getMoreConversationList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"getStrangerPreview",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"getStrangerConversationList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"getMultiUsersByUids",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"getFollowingUserListWithCanShare",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"sendMessage",null),I=(0,o.__decorate)([(0,s.Y)("MessageModule"),(0,o.__metadata)("design:paramtypes",[C.e,k.z,S.m,j.l])],I)},57664:(e,t,i)=>{i.d(t,{e:()=>y});var o,n=i(64047),a=i(57244),s=i(90293),r=i(40299),l=i(14716),d=i(82346),c=i(49847),u=i(69349),p=i(50986),g=i(49584),h=i(53095),m=i(98540),_=i(18645),v=i(70526);!function(e){e[e.NotAvailable=0]="NotAvailable",e[e.Start=1]="Start",e[e.Error=2]="Error",e[e.Succeeded=3]="Succeeded"}(o||(o={}));let y=class{constructor(e){this.fetch=e,this.retryTime=0,this.hasMore$=new r.x,this.options$=new r.x,this.init$=this.options$.pipe((0,g.z)((e=>{let t,o;return(0,l.D)(Promise.all([Promise.all([i.e(7239),i.e(8776),i.e(3975),i.e(2222),i.e(2256),i.e(758),i.e(9314),i.e(3757),i.e(6688),i.e(4461),i.e(8100),i.e(6829),i.e(2308),i.e(3251),i.e(3685),i.e(672),i.e(4276),i.e(622),i.e(4683),i.e(2128),i.e(3683),i.e(504),i.e(8695),i.e(6011)]).then(i.bind(i,2310)),Promise.all([i.e(7239),i.e(8776),i.e(3975),i.e(2222),i.e(2256),i.e(758),i.e(9314),i.e(3757),i.e(6688),i.e(4461),i.e(8100),i.e(6829),i.e(2308),i.e(3251),i.e(3685),i.e(672),i.e(4276),i.e(622),i.e(4683),i.e(2128),i.e(3683),i.e(504),i.e(6011)]).then(i.bind(i,95493)),Promise.all([i.e(7239),i.e(8776),i.e(3975),i.e(2222),i.e(2256),i.e(758),i.e(9314),i.e(3757),i.e(6688),i.e(4461),i.e(8100),i.e(6829),i.e(2308),i.e(3251),i.e(3685),i.e(672),i.e(4276),i.e(622),i.e(4683),i.e(2128),i.e(3683),i.e(504),i.e(6011)]).then(i.bind(i,94434))]).then((([i,n,a])=>(e.authType=i.im_proto.AuthType.SESSION_AUTH,o=i,t=new i.BytedIM(e,[n.ExtensionPlugin,a.StrangerPlugin]),this.instance=t,this.sdk=o,t.init()))).then((i=>({result:i,instance:t,sdk:o,options:e}))).catch((i=>(console.error(`[IM SDK] init failed, e=${i}`),{result:2,instance:t,sdk:o,options:e}))))})),(0,h.z)((({result:e,instance:t,sdk:i,options:o})=>{const n=[i.IMEvent.ConversationChange,i.IMEvent.MessageSend,i.IMEvent.ReceiveNewMessage,i.IMEvent.MessageDelete,i.IMEvent.MessagePropertyUpsert];return t?(n.forEach((e=>{t.event.subscribe(e,(t=>{var n;o.eventListner({event:e,params:t,sdk:i,uid:null!==(n=o.userId)&&void 0!==n?n:""})}))})),(0,d.of)({instance:t,sdk:i,options:o})):(0,c._)((()=>new Error(`[IM SDK] init failed with initResult=${e}`)))}))),this.refreshMessage$=(0,u.a)([this.init$,(0,p.F)(360)]).pipe((0,h.z)((([{instance:e,sdk:t,options:i}])=>(0,l.D)(e.getMessagesByUserInit({inboxType:0,cursor:this.cursor}).then((({hasMore:e,cursor:o=0})=>{var n;return this.cursor=o.toString(),0===this.refreshTime&&i.eventListner({event:t.IMEvent.ConversationChange,params:{},sdk:t,uid:null!==(n=null==i?void 0:i.userId)&&void 0!==n?n:""}),this.refreshTime++,e})).catch((e=>(console.error(e),!(this.retryTime++>5))))))),(0,m.o)((e=>e))),this.cursor="0",this.refreshTime=0,this.instance={},this.sdk={}}getMessageToken(){return this.fetch.get("/api/im/reboot/misc/",{query:{aid:1988,im_token:1},baseUrlType:2})}getConversationListOnline(){var e,t;return(0,l.D)(null===(t=(e=this.instance).getConversationListOnline)||void 0===t?void 0:t.call(e))}getStrangerConversationList({cursor:e,limit:t}){var i,o;return(0,l.D)(null===(o=(i=this.instance).getStrangerConversationList)||void 0===o?void 0:o.call(i,{cursor:e,limit:t}))}createConversation({uid:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).createConversation)||void 0===i?void 0:i.call(t,{participants:e}))}createMessage({type:e,content:t,conversation:i}){var o,n;return(0,l.D)(null===(n=(o=this.instance).createMessage)||void 0===n?void 0:n.call(o,{conversation:i,type:e,content:t}))}sendMessage({message:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).sendMessage)||void 0===i?void 0:i.call(t,{message:e}))}setConversationSettingInfo({conversation:e,mute:t,stickOnTop:i}){var o,n;return(0,l.D)(null===(n=(o=this.instance).setConversationSettingInfo)||void 0===n?void 0:n.call(o,{conversation:e,mute:t,stickOnTop:i}))}deleteConversation({conversation:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).deleteConversation)||void 0===i?void 0:i.call(t,{conversation:e}))}deleteStrangerConversation({conversation:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).deleteStrangerConversation)||void 0===i?void 0:i.call(t,{conversation:e}))}markConversationRead({conversation:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).markConversationRead)||void 0===i?void 0:i.call(t,{conversation:e}))}markStrangerConversationRead({conversation:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).markStrangerConversationRead)||void 0===i?void 0:i.call(t,{conversation:e}))}getStrangerPreview(){var e,t;return(0,l.D)(null===(t=(e=this.instance).getStrangerPreview)||void 0===t?void 0:t.call(e,{}))}getMessagesByConversation({conversation:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).getMessagesByConversation)||void 0===i?void 0:i.call(t,{conversation:e}))}getStrangerConversationMessage({conversation:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).getStrangerConversationMessage)||void 0===i?void 0:i.call(t,{conversation:e}))}deleteMessage({message:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).deleteMessage)||void 0===i?void 0:i.call(t,{message:e}))}modifyMessageProperty({message:e,isLiked:t}){var i,o;return(0,l.D)(null===(o=(i=this.instance).modifyMessageProperty)||void 0===o?void 0:o.call(i,{message:e,modifyContent:[{operation:t?this.sdk.im_proto.OPERATION_TYPE.REMOVE_PROPERTY_ITEM:this.sdk.im_proto.OPERATION_TYPE.ADD_PROPERTY_ITEM,key:"e:love"}]}))}getMultiUsersByUids(e){return this.fetch.get("/api/im/multi_user/",{query:{aid:1988,uids:e}})}getFollowingUserListWithCanShare(e){const{minCursor:t=0,count:i=30}=e;return this.fetch.get("/api/im/spotlight/relation/",{query:{source:"web",with_fstatus:1,device_platform:"webapp_pc",count:i,max_time:t,min_time:0}})}getMultiUsersRelation({to_user_id:e,userId:t}){return this.fetch.get("/api/im/spotlight/multi_relation/",{query:{to_user_id:e,userId:t}})}feedbackMessage({shortId:e,uid:t,content:i,messageId:o}){const n=s.stringify({con_short_id:e,receiver_uid:t,content:i,msg_type:"7",scene:"sending_ban",msg_id:o});return this.fetch.post("/aweme/v1/im/msg/feedback/",{query:{report_type:"im",appId:1233},headers:{"Content-Type":v.zv.FORM_ENCODE},body:n})}getItemInfo(e){return this.fetch.get("/api/im/item_detail/",{query:{itemId:e}})}};y=(0,n.__decorate)([(0,a.G)(),(0,n.__metadata)("design:paramtypes",[_.r])],y)},24595:(e,t,i)=>{i.d(t,{l:()=>m});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(11348),l=i(82346),d=i(60595),c=i(20948),u=i(53095),p=i(21005),g=i(66599),h=i(10410);let m=class extends n.D{constructor(e,t){super(),this.userModule=e,this.userService=t,this.defaultState={users:{}}}multiSetUsers(e,t){const{users:i}=e;return{users:Object.assign(Object.assign({},i),t)}}setUserRelation(e,{uid:t,relation:i}){const o=e.users[t];o&&(o.relation=i)}blockUser(e){return e.pipe((0,c.M)(this.state$),(0,u.z)((([{uid:e,isBlock:t},{users:i}])=>{var o;const{secUid:n="",uniqueId:a=""}=null!==(o=i[e])&&void 0!==o?o:{};return this.userService.blockUser({sec_user_id:n,block_type:t?1:0}).pipe((0,u.z)((i=>{const{status_code:o}=i,n=t?4:0;return 0!==o?r.E:(0,l.of)(this.getActions().setUserRelation({uid:e,relation:n}),this.userModule.getActions().setUserRelation({uniqueId:a,relation:n}))})),(0,p.n)({}))})))}};(0,o.__decorate)([(0,a.j)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],m.prototype,"multiSetUsers",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],m.prototype,"setUserRelation",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[d.y]),(0,o.__metadata)("design:returntype",void 0)],m.prototype,"blockUser",null),m=(0,o.__decorate)([(0,s.Y)("MessageUserModule"),(0,o.__metadata)("design:paramtypes",[g.z,h.K])],m)},32724:(e,t,i)=>{i.d(t,{U:()=>o});const o=(e,t)=>{try{if("business"!==new URLSearchParams(window.location.search).get("scene"))return;window.parent.postMessage({type:e,params:t},window.location.origin)}catch(e){console.error("postMessage error",e)}}},66046:(e,t,i)=>{i.d(t,{R:()=>r});var o=i(64047),n=i(73566),a=i(48185),s=i(19630);let r=class extends n.D{constructor(){super(...arguments),this.defaultState={uniqueId:void 0}}setUniqueId(e,t){e.uniqueId=t}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],r.prototype,"setUniqueId",null),r=(0,o.__decorate)([(0,s.Y)("RecommendUserList")],r)},22377:(e,t,i)=>{i.d(t,{Uh:()=>m,XB:()=>_,eI:()=>v});var o=i(9236),n=i(91051),a=i(21041),s=i(40340),r=i(32273),l=i(22597),d=i(99297),c=i(17133),u=i(21555),p=i(36669),g=i(38310),h=i(53462);function m(e){var t;const i=(0,r.Q)(),g=(0,n.useMemo)((()=>i(e?"search_videosearchbar_recommended_generic_1":"please_input_search_keyword")),[i,e]),{currentVideo:h}=(0,o.mp)(s.f),{id:m}=null!=h?h:{},{abTestVersion:v}=null!==(t=(0,c.Lh)((()=>["abTestVersion"]),[]))&&void 0!==t?t:{},y="v2"===(0,d.N8)(v,"search_entry_search_bar"),b="v2"===(0,d.N8)(v,"video_detail_search_bar"),{wordList:f,logId:x}=_(null!=m?m:"","feed_bar"),{pathname:w}=(0,a.TH)(),{newGuessSearchWord:k}=(0,o.mp)(p.n),{inputFocus:S}=(0,o.mp)(u.B);return(0,n.useMemo)((()=>{var t;const{word:i,word_id:o}=null!==(t=f[0])&&void 0!==t?t:{},{word:n="",group_id:a=""}=null!=k?k:{},s={placeholder:g,hasVideoSugWord:!1},r=b&&"video"===(0,l.Xq)(w),d=y&&(["fyp","following"].includes((0,l.Xq)(w))||e);return r||d?i?{placeholder:i,word_id:o,hasVideoSugWord:!0,logId:x}:S&&n&&!e?{placeholder:n,word_id:a,hasVideoSugWord:!0,logId:x}:s:s}),[f,k,g,b,y,e,w,S,x])}function _(e,t){var i;const{user:a}=null!==(i=(0,c.Lh)((()=>["user"]),[]))&&void 0!==i?i:{},{wordIdList:s,videoIdList:r}=(0,o.mp)(h.Eg,{selector:e=>{var t,i;return null!==(i=e.blockListMap[null!==(t=null==a?void 0:a.uid)&&void 0!==t?t:h.tt])&&void 0!==i?i:{}},dependencies:[a]}),l=(0,o.mp)(g.A,{selector:t=>t[null!=e?e:""],dependencies:[e]});return(0,n.useMemo)((()=>{var e,i,o,n;if(!l||a&&!a.hasSearchPermission||v(null==l?void 0:l.id,r))return{wordList:[],hintText:""};const d=(null!==(i=null===(e=l.videoSuggestWordsList)||void 0===e?void 0:e.video_suggest_words_struct)&&void 0!==i?i:[]).find((e=>e.scene===t));var c,u;return{wordList:(c=null!==(o=null==d?void 0:d.words)&&void 0!==o?o:[],(u=s)&&0!==u.length?c.filter((({word_id:e})=>!u.includes(e))):c),hintText:null!==(n=null==d?void 0:d.hint_text)&&void 0!==n?n:"",logId:l.logId}}),[r,s,t,a,l])}function v(e,t){var i;return null!==(i=null==t?void 0:t.includes(e))&&void 0!==i&&i}},53462:(e,t,i)=>{i.d(t,{tt:()=>u,Eg:()=>g});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(35609),l=i.n(r),d=i(7650),c=i(3148);const u="NOT_LOGIN_USER";var p;!function(e){e.Word="wordIdList",e.Video="videoIdList"}(p||(p={}));let g=class extends n.D{constructor(){if(super(),this.defaultState={blockListMap:{}},(0,d.y)())return;const e=c.x7.getStorage();Object.keys(e).forEach((e=>{const t=c.x7.getItem(e);Array.isArray(t)?this.defaultState.blockListMap[e]={wordIdList:t}:this.defaultState.blockListMap[e]=t}))}setBlockListByUid(e,t){var i,o;const{uid:n=u,blockId:a,blockType:s}=t,r=null!==(o=null===(i=e.blockListMap[n])||void 0===i?void 0:i[s])&&void 0!==o?o:[];r.includes(a)||(r.push(a),l()(e.blockListMap,[n,s],r),c.x7.setItem(n,e.blockListMap[n]))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],g.prototype,"setBlockListByUid",null),g=(0,o.__decorate)([(0,s.Y)("SearchEntry"),(0,o.__metadata)("design:paramtypes",[])],g)},21555:(e,t,i)=>{i.d(t,{B:()=>j});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(82346),l=i(60595),d=i(93859),c=i(56979),u=i(45784),p=i(6693),g=i(20948),h=i(35435),m=i(53095),_=i(10026),v=i(5549),y=i(95872),b=i(42143),f=i(21005),x=i(26641),w=i(2844),k=i(57244),S=i(18645);let C=class{constructor(e){this.fetch=e}getSugList(e){const t=Object.assign(Object.assign({},e),{aid:1988});return this.fetch.get("/api/search/user/preview/",{query:t,baseUrlType:2})}getGeneralSugList(e){const t=Object.assign(Object.assign({},e),{aid:1988});return this.fetch.get("/api/search/general/preview/",{query:t,baseUrlType:2})}getMobileGeneralSugList(e){const t=Object.assign(Object.assign({},e),{aid:1988});return this.fetch.get("/api/search/general/sug/",{query:t,baseUrlType:2})}};C=(0,o.__decorate)([(0,k.G)(),(0,o.__metadata)("design:paramtypes",[S.r])],C);let j=class extends n.D{constructor(e,t,i){super(),this.service=e,this.home=t,this.biz=i,this.defaultState={sugList:[],mobileSugList:[],loading:!1,activeIndex:-1,searchValue:"",previousSearchValue:"",inputFocus:!1,newSugSessionTimeStamp:void 0,queryId:void 0,videoPageType:""}}setVideoPageType(e,t){e.videoPageType=t}setSearchValue(e,t){e.searchValue=t}setPreviousSearchValue(e,t){e.previousSearchValue=t}setInputFocus(e,t){e.inputFocus=t}handleInputFocusChange(e){return e.pipe((0,d.b)((e=>{e&&b.xq.handleSearchEntry()})),(0,c.U)(this.getActions().setInputFocus))}setNewSugSessionTimeStamp(e,t){e.newSugSessionTimeStamp=t}setList(e,t){e.sugList=t}setMobileList(e,t){e.mobileSugList=t}setLoading(e,t){e.loading=t}setActiveIndex(e,t){e.activeIndex=t}setActiveUp(e){e.activeIndex=Math.max(0,e.activeIndex-1)}setActiveDown(e){const{sugList:t,activeIndex:i}=e;e.activeIndex=Math.min(t.length,i+1)}setQueryId(e,t){e.queryId=t}getSugList(e){return e.pipe((0,u.g)("keyword"),(0,p.b)(500),(0,g.M)(this.state$,this.home.state$,this.biz.state$),(0,c.U)((([e,t,{appContext:i},{bizContext:o}])=>({payload:e,inputFocus:t.inputFocus,isLogin:Boolean(null==i?void 0:i.user),searchVideoForLoggedin:null==o?void 0:o.searchVideoForLoggedin}))),(0,h.w)((({payload:e,inputFocus:t,isLogin:i,searchVideoForLoggedin:o})=>e.keyword?(i||!o?this.service.getGeneralSugList({keyword:e.keyword,app_language:e.app_language}):this.service.getSugList(e)).pipe((0,c.U)((e=>{const{status_code:t,sug_list:i=[],log_pb:o}=e;let n=[];return 0===t&&i.length&&(n=i.map((e=>{var t;return Object.assign(Object.assign({},e),{impr_id:null!==(t=null==o?void 0:o.impr_id)&&void 0!==t?t:""})}))),Object.assign(Object.assign({},e),{sug_list:n})})),(0,d.b)((({sug_list:i,words_query_record:o,log_pb:n})=>{var a;if(t){const t="browser_mode"===this.state.videoPageType;b.xq.handleSugGroupImpression({impr_id:null!==(a=null==n?void 0:n.impr_id)&&void 0!==a?a:"",words_source:"sug",words_num:String(i.length),raw_query:e.keyword,search_position:t?"video_detail":y.W.commonParams.page_name,video_page_type:this.state.videoPageType}),i.forEach(((i,a)=>{var s,r;b.xq.handleSugImpression({impr_id:null!==(s=null==n?void 0:n.impr_id)&&void 0!==s?s:"",words_source:"sug",words_position:a,words_content:i.content,raw_query:e.keyword,sug_type:i.extra_info.sug_user_id?"enrich_sug":"normal_sug",query_id:null!==(r=null==o?void 0:o.query_id)&&void 0!==r?r:"",group_id:i.word_record.group_id,search_position:t?"video_detail":y.W.commonParams.page_name,video_page_type:this.state.videoPageType})}))}})),(0,m.z)((e=>{var t;return(0,r.of)(this.getActions().setList(e.sug_list),this.getActions().setQueryId(null===(t=null==e?void 0:e.words_query_record)||void 0===t?void 0:t.query_id))})),(0,_.O)(this.getActions().setLoading(!0),this.getActions().setActiveIndex(-1)),(0,v.l)(this.getActions().setLoading(!1))):(0,r.of)(this.getActions().setList([])))))}getMobileSugList(e){return e.pipe((0,u.g)("keyword"),(0,p.b)(500),(0,g.M)(this.state$),(0,h.w)((([{keyword:e,app_language:t},{newSugSessionTimeStamp:i}])=>e?this.service.getMobileGeneralSugList({keyword:e,app_language:t}).pipe((0,c.U)((e=>{const{status_code:t,sug_list:i=[],log_pb:o}=e;let n=[];return 0===t&&i.length&&(n=i.map((e=>{var t;return Object.assign(Object.assign({},e),{impr_id:null!==(t=null==o?void 0:o.impr_id)&&void 0!==t?t:""})}))),Object.assign(Object.assign({},e),{sug_list:n})})),(0,d.b)((({sug_list:t,words_query_record:o,log_pb:n,extra:a})=>{b.xq.handleSugGroupImpression({words_source:"sug",words_num:String(t.length),raw_query:e,search_position:y.W.commonParams.previous_page}),t.forEach(((t,s)=>{var r,l;b.xq.handleSugImpression({impr_id:null!==(r=null==n?void 0:n.impr_id)&&void 0!==r?r:"",words_source:"sug",words_position:s,words_content:t.content,raw_query:e,sug_type:t.extra_info.sug_user_id?"enrich_sug":"normal_sug",query_id:null!==(l=null==o?void 0:o.query_id)&&void 0!==l?l:"",group_id:t.word_record.group_id,search_position:y.W.commonParams.previous_page,new_sug_session_id:String(null!=i?i:null==a?void 0:a.now)})}))})),(0,m.z)((e=>{var t;return(0,r.of)(this.getActions().setMobileList(e.sug_list),this.getActions().setNewSugSessionTimeStamp(String(null!=i?i:null===(t=e.extra)||void 0===t?void 0:t.now)))})),(0,f.n)({})):(0,r.of)(this.getActions().setMobileList([]),this.getActions().setNewSugSessionTimeStamp(void 0)))))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setVideoPageType",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setSearchValue",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setPreviousSearchValue",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setInputFocus",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[l.y]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"handleInputFocusChange",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setNewSugSessionTimeStamp",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setMobileList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setLoading",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setActiveIndex",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setActiveUp",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setActiveDown",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setQueryId",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[l.y]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"getSugList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[l.y]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"getMobileSugList",null),j=(0,o.__decorate)([(0,s.Y)("Sug"),(0,o.__metadata)("design:paramtypes",[C,x.G,w.r])],j)},33177:(e,t,i)=>{i.d(t,{Y:()=>o});const o={2:"hot",17:"sav",18:"music"}},36669:(e,t,i)=>{i.d(t,{n:()=>w});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(53095),l=i(82346),d=i(60595),c=i(20948),u=i(56979),p=i(35435),g=i(93859),h=i(10026),m=i(95872),_=i(42143),v=i(63827),y=i(33177),b=i(57244),f=i(18645);let x=class{constructor(e){this.fetch=e}getTransferList(e){return this.fetch.get("/api/search/suggest/guide/",{query:e,baseUrlType:2})}};x=(0,o.__decorate)([(0,b.G)(),(0,o.__metadata)("design:paramtypes",[f.r])],x);let w=class extends n.D{constructor(e,t){super(),this.service=e,this.search=t,this.defaultState={historyList:[],guessSearchList:[],activeIndex:-1,blankpageEnterMethod:void 0,preRecomShowId:"",videoSuggestWord:void 0,newGuessSearchWord:void 0}}setData(e,t){e.guessSearchList=t}setActiveIndex(e,t){e.activeIndex=t}setEnterMethod(e,t){e.blankpageEnterMethod=t}setHistoryList(e,t){e.historyList=t}setVideoSuggestWord(e,t){e.videoSuggestWord=t}setNewGuessSearchWord(e,t){e.newGuessSearchWord=t}getTransferList(e){return e.pipe((0,c.M)(this.search.state$,this.state$),(0,u.U)((([e,{searchGlobalParams:t},{videoSuggestWord:i}])=>({payload:e,rootEnterFrom:null==t?void 0:t.rootEnterFrom,videoSuggestWord:i}))),(0,p.w)((({payload:e,rootEnterFrom:t,videoSuggestWord:i})=>this.service.getTransferList(e).pipe((0,u.U)((e=>{const{status_code:t,data:o=[],log_id:n}=e;let a=[];return 0===t&&o.length&&(a=o.map((e=>Object.assign(Object.assign({},e),{impr_id:n}))),this.handleDataList(a,n,i)),Object.assign(Object.assign({},e),{data:a})})),(0,g.b)((({data:e,log_id:i})=>{const o={enter_from:t,words_source:"recom_search",search_position:m.W.commonParams.page_name};_.xq.handleTrendingShow(Object.assign({words_num:e.length,raw_query:""},o)),e.forEach(((e,t)=>{var n,a,s,r;return _.xq.handleTrendingWordsShow(Object.assign({words_position:t,words_content:null!==(n=null==e?void 0:e.word)&&void 0!==n?n:"",words_type:null!==(s=y.Y[null!==(a=null==e?void 0:e.word_type)&&void 0!==a?a:""])&&void 0!==s?s:"",group_id:null!==(r=null==e?void 0:e.group_id)&&void 0!==r?r:"",impr_id:null!=i?i:""},o))}))})),(0,r.z)((e=>{var t;return(0,l.of)(this.getActions().setData(null==e?void 0:e.data),this.getActions().setNewGuessSearchWord(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t[0]))})),(0,h.O)(this.getActions().setActiveIndex(-1))))))}handleDataList(e,t,i){if(i&&e[0].group_id!==i.word_id){const o=e.findIndex((e=>e.group_id===i.word_id));o>0?e.splice(o,1):e.pop(),e.unshift({word:i.word,group_id:i.word_id,impr_id:t,word_type:"17"})}}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],w.prototype,"setData",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],w.prototype,"setActiveIndex",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],w.prototype,"setEnterMethod",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],w.prototype,"setHistoryList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],w.prototype,"setVideoSuggestWord",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],w.prototype,"setNewGuessSearchWord",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[d.y]),(0,o.__metadata)("design:returntype",void 0)],w.prototype,"getTransferList",null),w=(0,o.__decorate)([(0,s.Y)("Transfer"),(0,o.__metadata)("design:paramtypes",[x,v.t8])],w)},54769:(e,t,i)=>{i.d(t,{w:()=>y,if:()=>b,Ob:()=>f,Zx:()=>w,uf:()=>k});var o=i(9236),n=i(7643),a=i.n(n),s=i(90293),r=i(91051),l=i(21041),d=i(33693),c=i(42143),u=i(40340),p=i(99297),g=i(17133),h=i(58854),m=i(65580),_=i(33966),v=i(63827);function y(){var e;const{search:t,state:i}=(0,l.TH)(),{enterMethod:o,searchSource:n,fromSearchSubTab:a,imprId:r,blankpageEnterFrom:d,blankpageEnterMethod:c,videoPageType:u,preClickId:p}=null!=i?i:{},{q:g}=(0,s.parse)(t);return{enterMethod:o,searchSource:n,keyword:null!==(e=Array.isArray(g)?g.toString():g)&&void 0!==e?e:"",fromSearchSubTab:a,imprId:r,blankpageEnterFrom:d,blankpageEnterMethod:c,videoPageType:u,preClickId:p}}function b(e){var t,i;const{keyword:n,enterMethod:a,searchSource:s,fromSearchSubTab:c,imprId:u,blankpageEnterFrom:p,blankpageEnterMethod:b,videoPageType:f,preClickId:x}=y(),{user:w,language:S="en",abTestVersion:C}=null!==(t=(0,g.Lh)((()=>["user","language","abTestVersion"]),[]))&&void 0!==t?t:{},{searchVideoForLoggedin:j,searchLiveForLoggedin:T}=null!==(i=(0,h.h)((()=>["searchVideoForLoggedin","searchLiveForLoggedin"]),[]))&&void 0!==i?i:{},I=(0,l.TH)(),{pathname:P}=I,O=Boolean(w),[{state:L,rootEnterFrom:M},E]=(0,o.b7)(v.t8,{dependencies:[],selector:t=>{var i;return{state:null!==(i=t[e])&&void 0!==i?i:{},rootEnterFrom:t.searchGlobalParams.rootEnterFrom}}}),A=(0,o.qj)(_.h),D=(0,o.qj)(m.R),F=P===d.nT.searchUser,R=k();return(0,r.useCallback)(((t=!0,i=!1)=>{const o=n!==(null==L?void 0:L.keyword)||t,r=n!==(null==L?void 0:L.keyword)||i,l=!j||O,g=!T||O,h={search_source:null!=s?s:"search_outer",search_type:e,enter_method:a,from_search_subtab:c,enter_from:M,pre_click_id:null!=u?u:x,pre_recom_show_id:u,blankpage_enter_from:p,blankpage_enter_method:b,video_page_type:f};switch(e){case"general":P===d.nT.searchHome&&o&&l&&(r&&(E.setSearchResult({key:"general",result:v._P}),A.resetItemList({key:"search_top",loading:!0})),E.getTopSearch({keyword:n,teaParams:h,user:w,language:S,abTestVersion:C,hasSearchLive:R}));break;case"user":F&&o&&(r&&E.setSearchResult({key:"user",result:v.i8}),E.getUserSearch({keyword:n,teaParams:h,user:w,language:S,abTestVersion:C}));break;case"video":P===d.nT.searchVideo&&o&&l&&(r&&(E.setSearchResult({key:"video",result:v.i8}),A.resetItemList({key:"search_video",loading:!0})),E.getVideoSearch({keyword:n,teaParams:h,user:w,language:S,abTestVersion:C}));break;case"live":P===d.nT.searchLive&&o&&g&&(r&&(E.setSearchResult({key:"live",result:v.i8}),D.resetLiveList({key:"search_live",loading:!0})),E.getLiveSearch({keyword:n,teaParams:h,user:w,language:S,abTestVersion:C}))}}),[n,null==L?void 0:L.keyword,j,O,a,s,e,P,F,E,w,S,C,A,R,D,T,c,M,u,p,b,x,f])}function f(e,t=!0){const{keyword:i}=y(),n=(0,l.TH)(),a=(0,l.k6)(),{state:s,pathname:c}=n,u=Boolean((0,l.LX)(c,{path:d.nT.searchHome})),[p,g]=(0,o.b7)(v.t8,{dependencies:[],selector:t=>{var i;return null!==(i=t[e])&&void 0!==i?i:{}}}),h=b(e);return(0,r.useEffect)((()=>{var e,o,r,l,d;if(!u)return;const c=Boolean(p.data)?!p.error&&0===(null===(o=null===(e=p.data)||void 0===e?void 0:e.videoList)||void 0===o?void 0:o.length)&&0===(null===(l=null===(r=p.data)||void 0===r?void 0:r.otherDataList)||void 0===l?void 0:l.length):0===(null===(d=null==p?void 0:p.items)||void 0===d?void 0:d.length),m=i!==p.keyword||c;return t&&a.replace(Object.assign(Object.assign({},n),{state:Object.assign({},s)})),h(m),()=>{g.dispose()}}),[i]),Object.assign(Object.assign({},p),{keyword:i,handleSearch:h})}const x={general:d.nT.searchHome,user:d.nT.searchUser,video:d.nT.searchVideo,live:d.nT.searchLive};function w(e,t){const i=(0,r.useRef)(0),n=(0,l.k6)(),s=(0,l.TH)(),{keyword:d,enterMethod:p}=y(),{searchGlobalParams:g}=(0,o.mp)(v.t8,{dependencies:[],selector:e=>({searchGlobalParams:e.searchGlobalParams})}),{groupId:h}=(0,o.mp)(u.f,{dependencies:[],selector:e=>{var t;return{groupId:null===(t=e.currentVideo)||void 0===t?void 0:t.id}}}),{pathname:m}=s;(0,r.useEffect)((()=>{if((0,l.LX)(m,{path:x[t]}))return i.current||(i.current=Date.now()),n.listen((({pathname:o})=>{var n;const s=Date.now()-i.current,r=null===(n=a()(x))||void 0===n?void 0:n[o];c.xq.handleSearchSessionFinish({duration:s,impr_id:e,search_id:e,search_type:t,search_keyword:d,enter_method:p,enter_from:g.rootEnterFrom,group_id:h,next_tab:r})}))}),[e,t,g,h,p])}function k(){var e,t;const{abTestVersion:i,user:o}=null!==(e=(0,g.Lh)((()=>["abTestVersion","user"]),[]))&&void 0!==e?e:{};return"v2"===(0,p.N8)(i,"search_add_live")&&(null===(t=null==o?void 0:o.hasSearchLivePermission)||void 0===t||t)}},63827:(e,t,i)=>{i.d(t,{i8:()=>R,_P:()=>B,t8:()=>q});var o,n,a=i(64047),s=i(73566),r=i(48185),l=i(19630),d=i(35167),c=i(82346),u=i(58569),p=i(60595),g=i(20948),h=i(56979),m=i(35435),_=i(53095),v=i(10026),y=i(5549),b=i(12167),f=i(93859),x=i(68854),w=i(33693),k=i(42143),S=i(29876),C=i(55198),j=i(7650),T=i(66891),I=i(33642),P=i(2844),O=i(65580),L=i(27160),M=i(66599),E=i(38554),A=i(40340),D=i(33966),F=i(45712);!function(e){e[e.NetworkError=-1]="NetworkError",e[e.NoResultText=10]="NoResultText",e[e.SelfHarmText=11]="SelfHarmText",e[e.HateSexualizationText=12]="HateSexualizationText",e[e.Guide=13]="Guide"}(o||(o={})),function(e){e.ShowWithButton="show_with_button",e.ShowDirectly="show_directly",e.NoResult="no_results"}(n||(n={}));const R={keyword:"",error:null,loading:!1,hasMore:!1,cursor:0,items:[],preloadList:[],searchPrecheck:null},B={keyword:"",error:null,loading:!1,hasMore:!1,totalLength:0,cursor:0,data:{videoList:[],otherDataList:[]},preloadList:[],searchPrecheck:null},N={rootEnterFrom:void 0,preSearchId:void 0},W={1:(e,t)=>{var i,o,n,a,s,r,l,d,c;t.totalLength++,t.data.videoList=[...t.data.videoList,null!==(o=null===(i=e.item)||void 0===i?void 0:i.id)&&void 0!==o?o:""];const u={id:null!==(s=null===(a=null===(n=e.item)||void 0===n?void 0:n.video)||void 0===a?void 0:a.id)&&void 0!==s?s:"",url:null!==(d=null===(l=null===(r=e.item)||void 0===r?void 0:r.video)||void 0===l?void 0:l.playAddr)&&void 0!==d?d:""};t.preloadList=[...null!==(c=t.preloadList)&&void 0!==c?c:[],u]},4:(e,t)=>{var i,o;const n=t.data.videoList.length,a={type:e.type,items:null===(i=e.user_list)||void 0===i?void 0:i.map((({user_info:e})=>{var i;return t.totalLength++,null!==(i=e.unique_id)&&void 0!==i?i:""})),position:n%6==0?n:6*Math.ceil(n/6),hasMore:null!==(o=e.view_more)&&void 0!==o&&o,common:e.common};t.data.otherDataList=[...t.data.otherDataList,a]},20:(e,t)=>{var i,o,n,a,s,r,l,d,c;const u=t.data.videoList.length;t.totalLength++;const p={type:e.type,items:[null!==(o=null===(i=e.user_live)||void 0===i?void 0:i.user_info.user_info.unique_id)&&void 0!==o?o:""],lives:[null!==(s=null===(a=null===(n=e.user_live)||void 0===n?void 0:n.live_info)||void 0===a?void 0:a.id_str)&&void 0!==s?s:""],position:u%6==0?u:6*Math.ceil(u/6),hasMore:null!==(r=e.view_more)&&void 0!==r&&r,common:e.common,teaParams:{search_result_id:null!==(c=null===(d=null===(l=e.user_live)||void 0===l?void 0:l.user_info)||void 0===d?void 0:d.user_info.uid)&&void 0!==c?c:""}};t.data.otherDataList=[...t.data.otherDataList,p]},61:(e,t)=>{var i,o,n,a;const s=t.data.videoList.length;t.totalLength++;const r={type:e.type,lives:null===(i=e.live_collection)||void 0===i?void 0:i.map((({id_str:e})=>e)),position:s%6==0?s:6*Math.ceil(s/6),hasMore:null!==(o=e.view_more)&&void 0!==o&&o,common:e.common,teaParams:{search_result_id:null!==(a=null===(n=e.common)||void 0===n?void 0:n.doc_id_str)&&void 0!==a?a:""}};t.data.otherDataList=[...t.data.otherDataList,r]}},U={1:(e,t,i)=>{var o,n,a;const{enter_from:s,totalLength:r,count:l,impr_id:d,videoCount:c,videoStart:u}=t;k.xq.handleSearchVideoImpression(Object.assign(Object.assign({},i),{enter_from:s,rank:u+c,item_rank:r+l,group_id:null===(o=e.item)||void 0===o?void 0:o.id,author_id:null===(a=null===(n=e.item)||void 0===n?void 0:n.author)||void 0===a?void 0:a.id,impr_id:d})),t.count++,t.videoCount++},4:(e,t,i)=>{var o;const{enter_from:n,userStart:a,userCount:s,totalLength:r,count:l,impr_id:d}=t;return null===(o=e.user_list)||void 0===o||o.forEach((e=>{var o;const c=Object.assign(Object.assign({},i),{search_result_id:e.user_info.uid});k.xq.handleSearchImpression(Object.assign({enter_from:n,rank:a+s,item_rank:r+l,impr_id:d},c));const u=null!==(o=e.user_info.room_id_str)&&void 0!==o?o:String(e.user_info.room_id);u&&S.yY.handleLiveShow(Object.assign({room_id:u,anchor_id:e.user_info.uid,action_type:"click",enter_from_merge:"general_search",enter_method:"others_photo"},c)),t.count++,t.userCount++})),t},61:(e,t,i)=>{var o,n,a;const{enter_from:s}=t,r=Object.assign(Object.assign({},i),{search_result_id:null!==(n=null===(o=e.common)||void 0===o?void 0:o.doc_id_str)&&void 0!==n?n:"",enter_from:s,token_type:"live_card",is_aladdin:1,rank:0});k.xq.handleSearchImpression(r),null===(a=e.live_collection)||void 0===a||a.forEach(((e,t)=>{k.xq.handleSearchImpression(Object.assign(Object.assign({},r),{aladdin_words:e.title,aladdin_rank:t,list_result_type:"live",list_item_id:e.id_str,realtime_watch_user:e.user_count}))})),t.count++},20:(e,t,i)=>{var o,n,a,s,r;const{enter_from:l,impr_id:d}=t,{user_info:c,live_info:u}=null!==(o=null==e?void 0:e.user_live)&&void 0!==o?o:{},p=Object.assign(Object.assign({},i),{search_result_id:null!==(n=null==c?void 0:c.user_info.uid)&&void 0!==n?n:""}),g=Object.assign(Object.assign({},p),{user_name:null===(a=null==c?void 0:c.user_info)||void 0===a?void 0:a.nickname,user_tag:"",enter_from:l,token_type:"hot_user",is_aladdin:1,rank:0});k.xq.handleSearchImpression(Object.assign(Object.assign({},g),{impr_id:d})),k.xq.handleSearchImpression(Object.assign(Object.assign({},g),{list_result_type:"live",list_item_id:null!==(s=null==u?void 0:u.id_str)&&void 0!==s?s:""}));const h=null==u?void 0:u.id_str;h&&S.yY.handleLiveShow(Object.assign(Object.assign({},p),{room_id:h,anchor_id:null!==(r=null==c?void 0:c.user_info.uid)&&void 0!==r?r:"",action_type:"click",enter_from_merge:"general_search",enter_method:"others_photo"})),t.count++}};let q=class extends s.D{constructor(e,t,i,o,n,a,s,r,l){super(),this.service=e,this.user=t,this.seoModule=i,this.itemList=o,this.liveList=n,this.videoMask=a,this.bizContext=s,this.videoPlayer=r,this.t=l,this.defaultState={showTabs:!0,general:B,user:R,video:R,live:R,searchReminderData:null,searchGlobalParams:N}}setSearchResult(e,t){const{key:i,result:o}=null!=t?t:{};e[i]=o}setSearchReminderData(e,t){e.searchReminderData=t.data}addSearchResult(e,t){var i,o,n,a,s;const{key:r,result:l}=null!=t?t:{};if(!e[r])return e[r]=l,e;e[r]=Object.assign(Object.assign(Object.assign({},e[r]),l),{items:null===(o=null===(i=e[r])||void 0===i?void 0:i.items)||void 0===o?void 0:o.concat(l.items),preloadList:null===(a=null===(n=e[r])||void 0===n?void 0:n.preloadList)||void 0===a?void 0:a.concat(null!==(s=l.preloadList)&&void 0!==s?s:[])})}addTopSearchResult(e,t){var i,o;const n=e.general;null===(i=t.data)||void 0===i||i.forEach((e=>{e.type&&W[e.type](e,n)})),e.general=Object.assign(Object.assign({},e.general),{hasMore:Boolean(t.has_more),cursor:null!==(o=t.cursor)&&void 0!==o?o:0,data:Object.assign({},n.data),rid:t.rid,preloadList:n.preloadList})}setSearchLoading(e,t){const{key:i,loading:o}=null!=t?t:{};e[i].loading=o}setShowTabs(e,t){e.showTabs=t}setSearchGlobalParams(e,t){e.searchGlobalParams=Object.assign(Object.assign({},e.searchGlobalParams),t)}setSearchPrecheck(e,t){const{key:i,value:o}=null!=t?t:{};e[i].searchPrecheck=o}setKeyword(e,t){const{key:i,keyword:o}=t;e[i].keyword=o}resetSearchResult(e){e.general=B,e.user=R,e.video=R,e.live=R}getTopSearch(e){return e.pipe((0,g.M)(this.state$,this.videoMask.state$,this.bizContext.state$,this.videoPlayer.state$),(0,h.U)((([e,t,i,o,n])=>({query:e,state:t.general,videoMaskState:i,bizContextState:o,currentVideo:n.currentVideo,searchGlobalParams:t.searchGlobalParams}))),(0,m.w)((e=>{var t,i=e.query,{teaParams:o,abTestVersion:n,user:s,language:r,hasSearchLive:l}=i,d=(0,a.__rest)(i,["teaParams","abTestVersion","user","language","hasSearchLive"]),{state:p,state:{cursor:g,data:m,rid:f},videoMaskState:x,bizContextState:k,currentVideo:S,searchGlobalParams:C}=e;let T=(0,c.of)({});!d.keyword||(0,j.y)()&&!(null===(t=k.bizContext)||void 0===t?void 0:t.isGoogleBot)||(T=this.service.getTopSearch(Object.assign(Object.assign({},d),{offset:g,search_id:f,web_search_code:l?this.getWebSearchCode():""})));const I=Date.now();return T.pipe((0,h.U)((e=>{var t,i;return Object.assign(e,{data:null!==(i=null===(t=e.data)||void 0===t?void 0:t.map((e=>{var t,i,o,n,a,s;switch(e.type){case 20:return l?Object.assign(e,{user_live:{live_info:JSON.parse(null!==(o=null===(i=null===(t=e.user_live)||void 0===t?void 0:t.live_info)||void 0===i?void 0:i.raw_data)&&void 0!==o?o:"{}"),user_info:null===(n=e.user_live)||void 0===n?void 0:n.user_info}}):null;case 61:return l?Object.assign(e,{live_collection:null===(s=null===(a=e.live_collection)||void 0===a?void 0:a.live_list)||void 0===s?void 0:s.map((({raw_data:e="{}"})=>JSON.parse(e)))}):null;case 4:case 1:return e;default:return null}})).filter((e=>Boolean(e))))&&void 0!==i?i:[]})})),this.handleTopSearchReport({state:p,keyword:d.keyword,isSendSearch:0===g,teaParams:o,requestStart:I,searchGlobalParams:C,groupId:null==S?void 0:S.id}),(0,_.z)((e=>{var t,i,o,a;const l=this.seoModule.setSearchSEOProps(e,{language:r},{pathname:w.nT.searchHome,input_keyword:d.keyword}),{has_more:g,data:h=[],extra:m={},search_nil_info:_,suicide_prevent:v,search_nil_text:y,status_code:b,log_pb:k}=e,S=[0,203,403].includes(b)?0:b,{logid:C}=m,j=null!==(t=null!=f?f:C)&&void 0!==t?t:"",T=_&&[11,13].includes(null!==(i=_.text_type)&&void 0!==i?i:0);if(!h.length&&!g&&!T)return this.generateErrorState({search_nil_info:_,search_nil_text:y,suicide_prevent:v,state:p,key:"general",keyword:d.keyword,pathname:w.nT.searchHome,action$s:[l]});const I=[],P=[],O={hasMore:Boolean(g),statusCode:S,itemList:[],rid:j},L={hasMore:Boolean(g),statusCode:S,liveList:[],rid:j};let M=null;T&&(M={type:null!==(o=null==_?void 0:_.text_type)&&void 0!==o?o:11,data:Object.assign(Object.assign({},v),{et_search_id:j})}),h.forEach((e=>{var t,i,o,n,a;switch(e.type){case 1:O.itemList.push(e.item);break;case 4:const s=Object.assign(Object.assign({},e),{items:[]}),{user_list:r=[]}=e;r.forEach((({user_info:e={}})=>{const{user:t,stats:i}=this.userConvertor(e,j,null==k?void 0:k.impr_id),{unique_id:o=""}=e;I.push(t),P.push(i),s.items.push(o)}));break;case 20:if(null===(i=null===(t=e.user_live)||void 0===t?void 0:t.user_info)||void 0===i?void 0:i.user_info){const{user_live:{user_info:{user_info:t}}}=e,{user:i,stats:o}=this.userConvertor(t,j,null==k?void 0:k.impr_id);I.push(i),P.push(o)}(null===(n=null===(o=e.user_live)||void 0===o?void 0:o.live_info)||void 0===n?void 0:n.id_str)&&L.liveList.push(e.user_live.live_info);break;case 61:null===(a=e.live_collection)||void 0===a||a.forEach((e=>{e.id_str&&L.liveList.push(e)}))}})),(1===(null==s?void 0:s.photoSensitiveVideosSetting)||!s&&1===x.photoSensitiveVideosSetting)&&(e.data=null===(a=e.data)||void 0===a?void 0:a.filter((e=>{var t;return 4===e.type||4!==(null===(t=e.item)||void 0===t?void 0:t.maskType)})));const E=(0,c.of)(this.user.getActions().multiSetUser(I),this.user.getActions().multiSetUserStats(P),this.itemList.getActions().setList({response:O,key:"search_top",abTestVersion:n,user:s,language:r}),this.liveList.getActions().setList({response:L,key:"search_top",abTestVersion:n,user:s,language:r}),this.getActions().addTopSearchResult(Object.assign(Object.assign({},e),{rid:j})),this.getActions().setSearchPrecheck({key:"general",value:M}),this.getActions().setSearchGlobalParams({preSearchId:j}));return(0,u.T)(E,l)})),this.catchError({isEmpty:Boolean(m.videoList.length||m.otherDataList.length),key:"general",keyword:d.keyword,state:p,teaParams:o,isSendSearch:0===g}),(0,v.O)(this.getActions().setSearchLoading({key:"general",loading:!0}),this.getActions().setShowTabs(!0),this.getActions().setKeyword({key:"general",keyword:d.keyword})),(0,y.l)(this.getActions().setSearchLoading({key:"general",loading:!1}),this.terminate()),(0,b.R)(this.getAction$().dispose))})))}getUserSearch(e){return e.pipe((0,g.M)(this.state$,this.bizContext.state$,this.videoPlayer.state$),(0,h.U)((([e,t,i,o])=>({query:e,state:t.user,bizContextState:i,currentVideo:o.currentVideo,searchGlobalParams:t.searchGlobalParams}))),(0,m.w)((e=>{var t,i=e.query,{teaParams:o,abTestVersion:n,language:s,user:r}=i,l=(0,a.__rest)(i,["teaParams","abTestVersion","language","user"]),{state:d,state:{cursor:p,items:g,rid:h},bizContextState:m,currentVideo:x,searchGlobalParams:S}=e;let C=(0,c.of)({});!l.keyword||(0,j.y)()&&!(null===(t=m.bizContext)||void 0===t?void 0:t.isGoogleBot)||(C=this.service.getUserSearch(Object.assign(Object.assign({},l),{cursor:p,search_id:h})));const T=Date.now();return C.pipe((0,f.b)((e=>{var t,i;const{user_list:n=[],log_pb:a,extra:s}=e,{impr_id:r}=null!=a?a:{},{logid:d}=null!=s?s:{},c=null!==(t=null!=h?h:d)&&void 0!==t?t:"";if(n.length){const e=g.length;n.forEach(((t,i)=>{k.xq.handleSearchImpression({search_type:"user",enter_from:"search_result",rank:e+i,search_keyword:l.keyword,search_result_id:t.user_info.uid,impr_id:r,search_id:c})}))}else k.xq.handleSearchResultEmpty({search_keyword:l.keyword,impr_id:r,search_id:c});0===p&&o&&k.xq.handleSearch(Object.assign(Object.assign({},o),{search_id:c,search_keyword:l.keyword,impr_id:r,duration:Date.now()-T,pre_search_id:S.preSearchId,group_id:null!==(i=null==x?void 0:x.id)&&void 0!==i?i:void 0}))})),(0,_.z)((e=>{var t,i,o;const n=this.seoModule.setSearchSEOProps(e,{language:s},{pathname:w.nT.searchUser,input_keyword:l.keyword}),{has_more:a,cursor:r,user_list:p=[],extra:g,search_nil_info:m,suicide_prevent:_,search_nil_text:v,log_pb:y}=e,b=null!==(t=null!=h?h:null==g?void 0:g.logid)&&void 0!==t?t:"",f=m&&[11,13].includes(null!==(i=m.text_type)&&void 0!==i?i:0);let x=null,k=null;if(f&&(k={type:null!==(o=null==m?void 0:m.text_type)&&void 0!==o?o:11,data:Object.assign(Object.assign({},_),{et_search_id:b})},x=(0,c.of)(this.getActions().setSearchPrecheck({key:"user",value:k}))),!p.length&&!a&&!f)return this.generateErrorState({res:e,search_nil_info:m,search_nil_text:v,suicide_prevent:_,state:d,key:"user",keyword:l.keyword,pathname:w.nT.searchUser,action$s:[n]});if(p.length){const e=[],t=[],i=p.map((({user_info:i})=>{const{user:o,stats:n}=this.userConvertor(i,b,null==y?void 0:y.impr_id);return e.push(o),t.push(n),o.uniqueId})),o=(0,c.of)(this.user.getActions().multiSetUser(e),this.user.getActions().multiSetUserStats(t),this.getActions().addSearchResult({key:"user",result:{hasMore:Boolean(a),keyword:l.keyword,cursor:r,error:null,items:i,loading:!1,rid:b,preloadList:[]}}),this.getActions().setSearchGlobalParams({preSearchId:b}));return x?(0,u.T)(n,o,x):(0,u.T)(n,o)}return x?(0,u.T)(n,x):n})),this.catchError({isEmpty:Boolean(g.length),key:"user",keyword:l.keyword,state:d,teaParams:o,isSendSearch:0===p}),(0,v.O)(this.getActions().setSearchLoading({key:"user",loading:!0}),this.getActions().setShowTabs(!0),this.getActions().setKeyword({key:"user",keyword:l.keyword})),(0,y.l)(this.getActions().setSearchLoading({key:"user",loading:!1}),this.terminate()),(0,b.R)(this.getAction$().dispose))})))}getVideoSearch(e){return e.pipe((0,g.M)(this.state$,this.videoMask.state$,this.bizContext.state$,this.videoPlayer.state$),(0,h.U)((([e,t,i,o,n])=>({query:e,state:t.video,searchGlobalParams:t.searchGlobalParams,videoMaskState:i,bizContextState:o,currentVideo:n.currentVideo}))),(0,m.w)((e=>{var t,i=e.query,{teaParams:o,abTestVersion:n,language:s,user:r}=i,l=(0,a.__rest)(i,["teaParams","abTestVersion","language","user"]),{state:d,state:{cursor:p,items:g,rid:h},videoMaskState:m,bizContextState:x,searchGlobalParams:S,currentVideo:C}=e;let T=(0,c.of)({});!l.keyword||(0,j.y)()&&!(null===(t=x.bizContext)||void 0===t?void 0:t.isGoogleBot)||(T=this.service.getVideoSearch(Object.assign(Object.assign({},l),{offset:p,count:20,search_id:h})));const I=Date.now();return T.pipe((0,f.b)((e=>{var t,i;const{item_list:n=[],log_pb:a,extra:s}=e,r=null!==(t=null!=h?h:null==s?void 0:s.logid)&&void 0!==t?t:"";if(n.length){const e=g.length;n.forEach(((t,i)=>{var o;k.xq.handleSearchVideoImpression({search_type:"video",enter_from:"search_result",group_id:null==t?void 0:t.id,author_id:null===(o=null==t?void 0:t.author)||void 0===o?void 0:o.id,rank:e+i,search_keyword:l.keyword,impr_id:null==a?void 0:a.impr_id,search_id:r})}))}else k.xq.handleSearchResultEmpty({search_keyword:l.keyword,impr_id:null==a?void 0:a.impr_id,search_id:r});0===p&&o&&k.xq.handleSearch(Object.assign(Object.assign({},o),{search_id:r,search_keyword:l.keyword,impr_id:null==a?void 0:a.impr_id,duration:Date.now()-I,pre_search_id:S.preSearchId,group_id:null!==(i=null==C?void 0:C.id)&&void 0!==i?i:void 0}))})),(0,_.z)((e=>{var t,i,o,a,p;const g=this.seoModule.setSearchSEOProps(e,{language:s},{pathname:w.nT.searchVideo,input_keyword:l.keyword}),{has_more:_,cursor:v,item_list:y=[],extra:b,search_nil_info:f,suicide_prevent:x,search_nil_text:k,status_code:S}=e,C=[0,203,403].includes(S)?0:S,j=f&&[11,13].includes(null!==(t=f.text_type)&&void 0!==t?t:0),T=null!==(i=null!=h?h:null==b?void 0:b.logid)&&void 0!==i?i:"";if(!y.length&&!_&&!j)return this.generateErrorState({search_nil_info:f,search_nil_text:k,suicide_prevent:x,state:d,key:"video",keyword:l.keyword,pathname:w.nT.searchVideo,action$s:[g]});let I=[];I=1===(null==r?void 0:r.photoSensitiveVideosSetting)||!r&&1===m.photoSensitiveVideosSetting?y.filter((e=>4!==(null==e?void 0:e.maskType))).map((({id:e})=>e)):y.map((({id:e})=>e));const P=null!==(o=y.map((e=>{const{video:{id:t,playAddr:i=""}}=e;return{id:t,url:i}})))&&void 0!==o?o:[];let O=null;j&&(O={type:null!==(a=null==f?void 0:f.text_type)&&void 0!==a?a:11,data:Object.assign(Object.assign({},x),{et_search_id:null!==(p=null==b?void 0:b.logid)&&void 0!==p?p:""})});const L=(0,c.of)(this.itemList.getActions().setList({response:{itemList:y,hasMore:Boolean(_),statusCode:C},key:"search_video",abTestVersion:n,language:s,user:r}),this.getActions().addSearchResult({key:"video",result:{hasMore:Boolean(_),keyword:l.keyword,cursor:null!=v?v:0,error:null,items:I,loading:!1,rid:null!=h?h:null==b?void 0:b.logid,preloadList:P}}),this.getActions().setSearchPrecheck({key:"video",value:O}),this.getActions().setSearchGlobalParams({preSearchId:T}));return(0,u.T)(L,g)})),this.catchError({isEmpty:Boolean(g.length),state:d,keyword:l.keyword,teaParams:o,key:"video",isSendSearch:0===p}),(0,v.O)(this.getActions().setSearchLoading({key:"video",loading:!0}),this.getActions().setShowTabs(!0),this.getActions().setKeyword({key:"video",keyword:l.keyword})),(0,y.l)(this.getActions().setSearchLoading({key:"video",loading:!1}),this.terminate()),(0,b.R)(this.getAction$().dispose))})))}getLiveSearch(e){return e.pipe((0,g.M)(this.state$,this.bizContext.state$,this.videoPlayer.state$),(0,h.U)((([e,t,i,o])=>({query:e,state:t.live,searchGlobalParams:t.searchGlobalParams,bizContextState:i,currentVideo:o.currentVideo}))),(0,m.w)((e=>{var t,i=e.query,{teaParams:o,abTestVersion:n,language:s,user:r}=i,l=(0,a.__rest)(i,["teaParams","abTestVersion","language","user"]),{state:d,state:{cursor:p,items:g,rid:m},bizContextState:x,searchGlobalParams:S,currentVideo:C}=e;let T=(0,c.of)({});!l.keyword||(0,j.y)()&&!(null===(t=x.bizContext)||void 0===t?void 0:t.isGoogleBot)||(T=this.service.getLiveSearch(Object.assign(Object.assign({},l),{offset:p,count:20,search_id:m})));const I=Date.now(),P=T.pipe((0,h.U)((e=>{var t;return Object.assign(Object.assign({},e),{data:null===(t=e.data)||void 0===t?void 0:t.map((e=>{var t,i;return JSON.parse(null!==(i=null===(t=e.live_info)||void 0===t?void 0:t.raw_data)&&void 0!==i?i:"{}")}))})})));return P.pipe((0,f.b)((e=>{var t,i;const{data:n=[],log_pb:a,extra:s}=e,r=null!==(t=null!=m?m:null==s?void 0:s.logid)&&void 0!==t?t:"";if(n.length){const e=g.length;n.forEach((({user_count:t=0,like_count:i=0,id_str:o},n)=>{const s=t<=50&&i>t;k.xq.handleSearchImpression({search_id:r,search_result_id:o,enter_from:"search_result",search_keyword:l.keyword,token_type:"live_card",is_aladdin:0,rank:e+n,result_source:"search",room_tag:"",like_number:s?i:"",realtime_watch_user:s?"":t,search_type:"live",impr_id:null==a?void 0:a.impr_id})}))}else k.xq.handleSearchResultEmpty({search_keyword:l.keyword,impr_id:null==a?void 0:a.impr_id,search_id:r});0===p&&o&&k.xq.handleSearch(Object.assign(Object.assign({},o),{search_id:r,search_keyword:l.keyword,impr_id:null==a?void 0:a.impr_id,duration:Date.now()-I,pre_search_id:S.preSearchId,group_id:null!==(i=null==C?void 0:C.id)&&void 0!==i?i:void 0}))})),(0,_.z)((e=>{var t,i,o,a;const p=this.seoModule.setSearchSEOProps(e,{language:s},{pathname:w.nT.searchLive,input_keyword:l.keyword}),{has_more:g,cursor:h,data:_=[],extra:v,search_nil_info:y,suicide_prevent:b,search_nil_text:f,status_code:x}=e,k=[0,203,403].includes(x)?0:x,S=y&&[11,13].includes(null!==(t=y.text_type)&&void 0!==t?t:0),C=null!==(i=null!=m?m:null==v?void 0:v.logid)&&void 0!==i?i:"";if(!_.length&&!g&&!S)return this.generateErrorState({search_nil_info:y,search_nil_text:f,suicide_prevent:b,state:d,key:"live",keyword:l.keyword,pathname:w.nT.searchLive,action$s:[p]});let j=null;S&&(j={type:null!==(o=null==y?void 0:y.text_type)&&void 0!==o?o:11,data:Object.assign(Object.assign({},b),{et_search_id:null!==(a=null==v?void 0:v.logid)&&void 0!==a?a:""})});const T=(0,c.of)(this.liveList.getActions().setList({response:{liveList:_,hasMore:Boolean(g),statusCode:k},key:"search_live",abTestVersion:n,language:s,user:r}),this.getActions().addSearchResult({key:"live",result:{hasMore:Boolean(g),keyword:l.keyword,cursor:null!=h?h:0,error:null,items:_.map((e=>e.id_str)),loading:!1,rid:null!=m?m:null==v?void 0:v.logid}}),this.getActions().setSearchPrecheck({key:"live",value:j}),this.getActions().setSearchGlobalParams({preSearchId:C}));return(0,u.T)(T,p)})),this.catchError({isEmpty:Boolean(g.length),state:d,keyword:l.keyword,teaParams:o,key:"video",isSendSearch:0===p}),(0,v.O)(this.getActions().setSearchLoading({key:"live",loading:!0}),this.getActions().setShowTabs(!0),this.getActions().setKeyword({key:"live",keyword:l.keyword})),(0,y.l)(this.getActions().setSearchLoading({key:"live",loading:!1}),this.terminate()),(0,b.R)(this.getAction$().dispose))})))}handleTopSearchReport({state:{data:e,totalLength:t,rid:i},isSendSearch:o,teaParams:n,keyword:a,requestStart:s,searchGlobalParams:r,groupId:l}){return(0,f.b)((d=>{var c;const{data:u=[],log_pb:p,extra:g={}}=d,{logid:h}=g,m=null!==(c=null!=i?i:h)&&void 0!==c?c:"",{impr_id:_}=null!=p?p:{};if(u.length){const i=e.videoList.length,o={enter_from:"general_search",userStart:t-e.videoList.length,totalLength:t,keyword:a,impr_id:_,searchId:m,videoStart:i,count:0,userCount:0,videoCount:0},n={search_type:"general",search_id:m,search_keyword:a};u.forEach((e=>{var t,i;null===(i=U[null!==(t=null==e?void 0:e.type)&&void 0!==t?t:""])||void 0===i||i.call(U,e,o,n)}))}else k.xq.handleSearchResultEmpty({search_keyword:a,impr_id:_,search_id:m});o&&n&&k.xq.handleSearch(Object.assign(Object.assign({},n),{search_id:m,search_keyword:a,impr_id:_,duration:Date.now()-s,pre_search_id:r.preSearchId,group_id:null!=l?l:void 0}))}))}catchError({isEmpty:e,teaParams:t,keyword:i,key:o,state:n,isSendSearch:a}){return(0,x.K)((()=>e?(C.h.open({content:this.t("server_error_title"),duration:3,widthType:"half"}),(0,c.of)(this.noop())):(a&&t&&k.xq.handleSearch(Object.assign(Object.assign({},t),{search_id:"",search_keyword:i})),(0,c.of)(this.getActions().setSearchResult({key:o,result:Object.assign(Object.assign({},n),{keyword:i,error:{type:-1}})})))))}generateErrorState(e){const{search_nil_info:t,search_nil_text:i,state:o,key:n,keyword:a,actions:s=[],action$s:r=[]}=e,{text_type:l}=null!=t?t:{text_type:10},d={type:l||10};12===l&&(d.extra=i);const p=(0,c.of)(this.getActions().setSearchResult({key:n,result:Object.assign(Object.assign({},o),{keyword:a,error:d})}),...s);return(0,u.T)(p,...r)}userConvertor(e,t,i){var o;return{user:(0,I.yk)(e,{search_id:t,impr_id:i}),stats:{uniqueId:null!==(o=e.unique_id)&&void 0!==o?o:"",stats:(0,I.u0)(e,!0)}}}getWebSearchCode(){return JSON.stringify({tiktok:{client_params_x:{search_engine:{mt_search_general_user_live_card:1}}}})}};(0,a.__decorate)([(0,r.cQ)(),(0,a.__metadata)("design:type",p.y)],q.prototype,"dispose",void 0),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],q.prototype,"setSearchResult",null),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],q.prototype,"setSearchReminderData",null),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],q.prototype,"addSearchResult",null),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],q.prototype,"addTopSearchResult",null),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],q.prototype,"setSearchLoading",null),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],q.prototype,"setShowTabs",null),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],q.prototype,"setSearchGlobalParams",null),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],q.prototype,"setSearchPrecheck",null),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],q.prototype,"setKeyword",null),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",void 0)],q.prototype,"resetSearchResult",null),(0,a.__decorate)([(0,r.Qm)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[p.y]),(0,a.__metadata)("design:returntype",void 0)],q.prototype,"getTopSearch",null),(0,a.__decorate)([(0,r.Qm)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[p.y]),(0,a.__metadata)("design:returntype",void 0)],q.prototype,"getUserSearch",null),(0,a.__decorate)([(0,r.Qm)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[p.y]),(0,a.__metadata)("design:returntype",void 0)],q.prototype,"getVideoSearch",null),(0,a.__decorate)([(0,r.Qm)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[p.y]),(0,a.__metadata)("design:returntype",void 0)],q.prototype,"getLiveSearch",null),q=(0,a.__decorate)([(0,l.Y)("Search"),(0,a.__param)(8,(0,d.t)(T.s$)),(0,a.__metadata)("design:paramtypes",[F.o,M.z,L.q,D.h,O.R,E.P,P.r,A.f,Function])],q)},45712:(e,t,i)=>{i.d(t,{o:()=>s});var o=i(64047),n=i(57244),a=i(18645);let s=class{constructor(e){this.fetch=e}getTopSearch(e){return this.fetch.get("/api/search/general/full/",{query:e,baseUrlType:2})}getUserSearch(e){return this.fetch.get("/api/search/user/full/",{query:e,baseUrlType:2})}getVideoSearch(e){return this.fetch.get("/api/search/item/full/",{query:e,baseUrlType:2})}getLiveSearch(e){return this.fetch.get("/api/search/live/full/",{query:e,baseUrlType:2})}};s=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[a.r])],s)},27160:(e,t,i)=>{i.d(t,{q:()=>Le});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(35167),l=(i(40096),i(82346)),d=i(58569),c=i(60595),u=i(49584),p=i(53095),g=i(68854),h=i(56979),m=i(20948),_=i(48782),v=i(35435),y=i(46096),b=i(22369),f=i(99969),x=i(21590),w=i(33693),k=i(12462),S=i(29232),C=i(48006);const j=[{processType:b.H.SERPProcessType.META_PATH,targetId:122,content:function(e){var t;const{keyword:i,t:o,itemResponse:n,wordListResponse:a}=e;if(!i)return{robotsContent:"noindex, nofollow"};const s=i.replace(/\x20/g,"-").toLocaleLowerCase(),r=`${i} | TikTok`,l=(0,S.BT)((0,f.T4)(null!==(t=null==n?void 0:n.itemList)&&void 0!==t?t:[])),d=null==a?void 0:a.relatedWordList;let c=o("seo_aggre_metadesc1",{views:l,keywords:i});const u=d?(0,f.Kf)(d):"";u&&(c+=` ${o("seo_aggre_metadesc2",{related_search_keywords:u})}`);let p=i;return u&&(p+=`, ${u}`),{title:r,keywords:p,description:c,canonicalHref:`${x.o}${w.SN.channel({name:s})}`,robotsContent:"index, follow",applicableDevice:"pc, mobile"}}},{processType:b.H.SERPProcessType.JSONLD_PATH,targetId:122,content:function(e){const{keyword:t,seoProps:{itemList:i}={}}=e;if(!t)return[];const o=t.replace(/\x20/g,"-").toLocaleLowerCase(),n=`${x.o}${w.SN.channel({name:o})}`,a={"@type":"ItemPage","@id":n},s=(0,C.Uk)([{url:x.o,name:k.fC},{url:n,name:t}]);return[[y.J.JsonldType.Page,a],[y.J.JsonldType.BreadcrumbList,s],[y.J.JsonldType.ItemList,null!=i?i:{}]]}}],T=[{processType:b.H.SERPProcessType.META_PATH,targetId:103,content:function(e){const{t}=e,i=[t("SERP discover title"),t("TikTok i18n keywords")].join(",");return{title:t("SEO_discover_title"),keywords:i,description:t("SEO_discover_desc"),robotsContent:k.YV.INDEX,canonicalHref:`${k.f9}/discover`,applicableDevice:"pc, mobile"}}},{processType:b.H.SERPProcessType.JSONLD_PATH,targetId:103,content:function(e){const{language:t="en"}=e,i={"@id":k.Pz,url:k.hm,name:k.lw,description:k.FX,publisher:(0,C.AN)(x.o,t)},o=(0,C.Uk)([{url:x.o,name:k.fC},{url:k.hm,name:k.lw}]);return[[y.J.JsonldType.WebSite,i],[y.J.JsonldType.BreadcrumbList,o]]}}],I=[{processType:b.H.SERPProcessType.META_PATH,targetId:11,content:function(e){const{language:t="en",t:i}=e;return{title:i("SEO_following_title"),keywords:i("TikTok i18n keywords"),description:i("SEO_following_desc"),robotsContent:k.YV.INDEX,canonicalHref:`${k.f9}${k.WZ}?lang=${t}`,applicableDevice:"pc, mobile"}}}],P=[{processType:b.H.SERPProcessType.META_PATH,targetId:5,content:function(e){const{language:t="en",t:i}=e,o=["TikTok Trends","TikTok Trending","Trending Videos","Trending Hashtags","TikTok i18n keywords"].map((e=>i(e))).join(",");return{title:i("SEO_trending_title"),keywords:o,description:i("SEO_trending_desc"),robotsContent:k.YV.INDEX,canonicalHref:`${k.f9}${k.M7}?lang=${t}`,applicableDevice:"pc, mobile"}}},{processType:b.H.SERPProcessType.JSONLD_PATH,targetId:5,content:function(e){const{seoProps:{itemList:t}={},language:i="en"}=e,o={"@id":k.VV,url:k.D5,name:k.U,description:k.$1,publisher:(0,C.AN)(x.o,i)},n=(0,C.Uk)([{url:x.o,name:k.fC},{url:k.D5,name:k.U}]);return[[y.J.JsonldType.WebSite,o],[y.J.JsonldType.BreadcrumbList,n],[y.J.JsonldType.ItemList,null!=t?t:{}]]}}];var O,L,M=i(50821),E=i(3890),A=i(24021);!function(e){e.amp="amp",e.topic="topic"}(O||(O={})),(0,A.o)({amp:"/amp/tag/:name",topic:"/topic/:name"}),function(e){e.amp="amp",e.topic="topic"}(L||(L={}));const D={amp:"/amp/tag/:name",topic:"/topic/:name"},F=(0,E.t)(D);(0,A.o)(D);var R=i(28225),B=i(723),N=i(84302);const W=[{processType:b.H.SERPProcessType.META_PATH,targetId:117,content:function(e){var t,i;const{challengeInfo:o,statusCode:n,seoProps:a,t:s}=e,{preferredLanguage:r}=null!=a?a:{},l=(0,B.m)(e),{challenge:{title:d="",desc:c=""}={},stats:{viewCount:u=0}={}}=null!=o?o:{},{title:p,body:g}=null!==(t=null==o?void 0:o.challengeAnnouncement)&&void 0!==t?t:{},h=null!==(i=null==o?void 0:o.challenge.splitTitle)&&void 0!==i?i:null==a?void 0:a.splitTitle,m=`${(0,S.to)(null!=p?p:"")} ${(0,S.to)(null!=g?g:"")}`.trim(),_=`#${d}`,v=null!=h?h:_,y=(0,N.E)(r);let b=s("hashtag_SEO_title2",y({hashtag:_}));const f=[h,d,s("TikTok i18n keywords",y())].filter((e=>Boolean(e))).join(",");let x=`${s("hashtag_SEO_desc1",y({tagText:v,views:(0,S.BT)(Number(u)),hashtag:_}))} ${m?`${m} `:""}${(0,S.to)(c)}`;const w=l&&d,C=`${k.f9}${F.amp({name:d})}`,j=w?k.YV.INDEX:k.YV.NO_INDEX;switch(n){case R.kt:case R.sl:case R.fF:case R.bi:b=s("err_tag"),x=""}return{title:b,keywords:f,description:x,canonicalHref:C,robotsContent:j,applicableDevice:"pc, mobile"}}},{processType:b.H.SERPProcessType.JSONLD_PATH,targetId:117,content:function(e){var t;const{challengeInfo:i,seoProps:{itemList:o}={}}=e,{title:n=""}=null!==(t=null==i?void 0:i.challenge)&&void 0!==t?t:{},a=`${x.o}${F.amp({name:n})}`,s=`TikTok - #${n} | AMP`,r={"@type":"ItemPage","@id":a},l=(0,C.Uk)([{url:x.o,name:k.fC},{url:a,name:s}]);return[[y.J.JsonldType.Page,r],[y.J.JsonldType.ItemList,null!=o?o:{}],[y.J.JsonldType.BreadcrumbList,l]]}}],U=[{processType:b.H.SERPProcessType.META_PATH,targetId:101,content:function(e){const{language:t="en",t:i}=e,o=[i("SEO TikTok Keyword"),i("TikTok i18n keywords for home")].join(",");return{title:i("SEO_homepage_title"),keywords:o,description:i("SEO_homepage_desc"),robotsContent:k.YV.INDEX,canonicalHref:`${k.f9}/${t}/`,applicableDevice:"pc, mobile"}}},{processType:b.H.SERPProcessType.JSONLD_PATH,targetId:101,content:function(e){const{language:t="en"}=e,i=`${x.o}/${t}/`,o={"@id":k.dd,url:i,name:k.Z$,description:k.aj,publisher:(0,C.AN)(i,t),potentialAction:[{"@type":"SearchAction",target:k.Pu,"query-input":k.QI},{"@type":"SearchAction",target:k.OJ,"query-input":k.QI}]};return[[y.J.JsonldType.WebSite,o]]}}];var q=i(4147),z=i(29782),$=i(1160);function H(e){return!!e&&e.originalItem}function Z(e){return Boolean(e)&&!(null==e?void 0:e.originalItem)}const V=(e,t)=>{var i,o,n;return{t,itemInfo:{itemStruct:Object.assign(Object.assign({},e),{author:{id:null!==(i=e.authorId)&&void 0!==i?i:"",uniqueId:null!==(o=e.author)&&void 0!==o?o:"",nickname:null!==(n=e.nickname)&&void 0!==n?n:"",secUid:e.authorSecId}})}}};function G(e,t){var i,o,n,a,s,r,l,d;return{"@type":"Answer",text:(null!==(o=null===(i=e.stickersOnItem)||void 0===i?void 0:i.map((e=>{var t;return null===(t=e.stickerText)||void 0===t?void 0:t.join(".")})))&&void 0!==o?o:[]).concat(null==e?void 0:e.desc).filter(Boolean).join(".")||(null!==(n=(0,$.s)(V(e,t)).title)&&void 0!==n?n:""),dateCreated:new Date(1e3*Number(e.createTime)).toISOString(),upvoteCount:null!==(s=null===(a=e.stats)||void 0===a?void 0:a.diggCount)&&void 0!==s?s:0,url:`${x.o}${(0,z.fH)({secUid:e.authorSecId,uniqueId:null!==(r=e.author)&&void 0!==r?r:"",videoId:e.id})}`,author:{"@type":"Person",alternateName:null!==(l=e.author)&&void 0!==l?l:"",name:null!==(d=e.nickname)&&void 0!==d?d:""}}}const Q=[{processType:b.H.SERPProcessType.META_PATH,targetId:16,content:function(e){const{questionInfo:t,t:i}=e,o=(0,B.m)(e),{id:n="",content:a="",videoCount:s}=null!=t?t:{},r=o&&a&&n,l=r?i("SEO_qa_title_1",{question:a}):"",d=[i("TikTok i18n keywords")].join(","),c=r?i("SEO_qa_desc_1",{question:a,number:(0,S.BT)(s)}):"",u=(0,z._9)({questionContent:a,questionId:n});return{title:l,keywords:d,description:c,canonicalHref:`${x.o}${u}`,robotsContent:r?k.YV.INDEX:k.YV.NO_INDEX,applicableDevice:"pc, mobile"}}},{processType:b.H.SERPProcessType.JSONLD_PATH,targetId:16,content:function(e){var t,i,o,n,a;const{questionInfo:s,seoProps:r,t:l,answers:d}=e,{itemList:c,metaParams:u}=null!=r?r:{},{id:p="",content:g="",videoCount:h,creator:m,createTime:_}=null!=s?s:{},v=(0,B.m)(e)&&g&&p,{title:b}=null!=u?u:{},f=(0,z._9)({questionContent:g,questionId:p}),w=`${x.o}${f}`,S=null!=b?b:`${g} | TikTok Q&A`,j={"@type":"ItemPage","@id":w},T=(0,C.Uk)(v?[{url:x.o,name:k.fC},{url:w,name:S}]:[{url:x.o,name:k.fC}]);let I={};if(v){const e=null===(t=d.filter(H))||void 0===t?void 0:t[0],s=[g,null!==(i=null==e?void 0:e.desc)&&void 0!==i?i:""].join("."),r={"@type":"Question",name:g,text:s,answerCount:h,dateCreated:void 0===_?_:new Date(1e3*Number(_)).toISOString(),author:{"@type":"Person",name:null!==(o=null==m?void 0:m.nickname)&&void 0!==o?o:"",alternateName:null!==(n=null==m?void 0:m.uniqueId)&&void 0!==n?n:""}};if(0===d.length)I={mainEntity:Object.assign(Object.assign({},r),{suggestedAnswer:[]})};else{const t=null===(a=d.filter(Z))||void 0===a?void 0:a[0],i=null!=t?t:e,o=G(i,l),n=d.filter((e=>Z(e)&&e.id!==(null==t?void 0:t.id))).slice(0,10),s=n.length>0?n:[i];I={mainEntity:Object.assign(Object.assign({},r),{acceptedAnswer:o,suggestedAnswer:s.map((e=>G(e,l)))})}}}const P=[[y.J.JsonldType.Page,j],[y.J.JsonldType.ItemList,null!=c?c:{}],[y.J.JsonldType.BreadcrumbList,T]];return v&&P.push([y.J.JsonldType.QAPage,I]),P}}],J=[{processType:b.H.SERPProcessType.META_PATH,targetId:105,content:function(e){var t,i,o,n,a,s;const{pathname:r="/search",input_keyword:l,t:d}=e,c=null!==(i=null===(t=e)||void 0===t?void 0:t.user_list)&&void 0!==i?i:[],u=null!==(n=null===(o=e)||void 0===o?void 0:o.item_list)&&void 0!==n?n:[],p=null!==(s=null===(a=e)||void 0===a?void 0:a.data)&&void 0!==s?s:[],g=0===e.status_code&&(c.length>0||(null==u?void 0:u.length)>0||(null==p?void 0:p.length)>0),h=d("SEO_search_title",{searchkeywords:`'${l}'`}),m=d("SEO_search_desc",{searchkeywords:`'${l}'`});return{title:h,keywords:[l,"tiktok search",d("TikTok i18n keywords")].join(","),description:m,robotsContent:g?k.YV.INDEX:k.YV.NO_INDEX,canonicalHref:`${k.f9}${r}?q=${l}`,applicableDevice:"pc, mobile"}}}],Y="BreadcrumbList";class K{constructor(e,t){this["@type"]=Y,this.itemListElement=e.reduce(((e,t,i)=>{const{url:o,name:n}=t;return e.push({"@type":"ListItem",position:i+1,item:{"@type":"Thing","@id":o,name:n}}),e}),[])}}K.type=Y;const X="InteractionCounter";class ee{constructor(e,t){this["@type"]=X,this.interactionType={"@type":`http://schema.org/${e.type}`},this.userInteractionCount=e.count}}ee.type=X;const te="Person";class ie{constructor(e,t,i){var o;this["@type"]=te;const n=w.SN.user({uniqueId:e.uniqueId}),a=`${x.o}${n}`;this.name=null!==(o=null==e?void 0:e.nickname)&&void 0!==o?o:"",this.image="Googlebot"===(null==i?void 0:i.botType)?(0,C.Fh)(e.id):void 0,this.description=e.signature,this.alternateName=e.uniqueId,this.url=a,this.interactionStatistic=[new ee({type:"LikeAction",count:Number(t.heart)||t.heartCount},i),new ee({type:"FollowAction",count:t.followerCount},i)],e.verified&&(this.reviewedBy=C.dl),this.mainEntityOfPage={"@id":a,"@type":"ProfilePage"}}}ie.type=te;const oe="ItemList";class ne{constructor(e,t){this["@type"]=oe,this.itemListElement=e.map(((e,t)=>Object.assign({position:t+1},e)))}}ne.type=oe;const ae="MusicRecording";class se{constructor(e,t,i){var o,n,a;this["@type"]=ae;const s=w.SN.music({id:e.id,title:e.title});this.url=`${x.o}${s}`,this.name=e.title,this.description=i.t("music_SEO_desc3",{musicName:e.title,authorName:e.authorName,posts:(0,S.BT)(t.videoCount)}),this.image=e.coverMedium,this.duration=(0,S.Ed)(null!==(o=e.duration)&&void 0!==o?o:0),this.byArtist={"@type":"Person",name:[null!==(n=e.authorName)&&void 0!==n?n:""]},this.inAlbum={"@type":"MusicAlbum",name:null!==(a=e.album)&&void 0!==a?a:""}}}se.type=ae;const re=[{processType:b.H.SERPProcessType.META_PATH,targetId:1,content:function(e){const{userInfo:t={},statusCode:i,t:o}=e,n=(0,B.m)(e),{user:{verified:a=!1,nickname:s="",uniqueId:r="",signature:l=""}={},stats:{heart:d=0,followerCount:c=0}={}}=t,u=(0,z.MR)(r),p=(0,S.BD)(s,r),g=(0,z.yl)({secUid:"",uniqueId:r}),h=`${k.f9}${g}`;let m=n&&s&&u?k.YV.INDEX:k.YV.NO_INDEX;m=[m,k.YV.IMAGE_PREVIEW_LARGE].join(", ");let _=o(a?"seo_serp_user2_title":"seo_serp_user1_title",{username:p});const v=(0,S.to)(l);let y=o("seo_serp_user_desc",{username:p});switch(d>20&&(y+=o("seo_serp_user_desc1",{heart:(0,S.BT)(Number(d))})),c>20&&(y+=o("seo_serp_user_desc2",{follower:(0,S.BT)(c)})),y+=`${v}${v&&!(0,S.q5)(v)?".":""}`,y+=o("seo_serp_user_desc3",{username:p}),i){case R.Wy:case R.PL:case R.Z9:case R.XA:_=o("err_user"),y="";break;case R.Zz:_=o("err_user_private"),y=""}return{title:_,keywords:void 0,description:y,canonicalHref:h,robotsContent:m,applicableDevice:"pc, mobile"}}},{processType:b.H.SERPProcessType.JSONLD_PATH,targetId:1,content:function(e){var t;const{userInfo:i,seoProps:{itemList:o}={},musicList:n=[],t:a}=e;if(!(null===(t=null==i?void 0:i.user)||void 0===t?void 0:t.uniqueId))return[];const{nickname:s,uniqueId:r="",secUid:l}=i.user,d=(0,z.yl)({secUid:null!=l?l:"",uniqueId:r}),c=`${x.o}${d}`,u=((0,z.MR)(r)?`${s} (@${r})`:`${s}`)+" | TikTok",p=[[y.J.JsonldType.ItemList,null!=o?o:{}],[K.type,new K([{url:x.o,name:k.fC},{url:c,name:u}])],[ie.type,new ie(i.user,i.stats)]];return n.length&&p.push([ne.type,new ne(n.filter((e=>e.stats)).slice(0,9).map((e=>new se(e.music,e.stats,{t:a})))),{name:"MusicRecordingItemList"}]),p}}],le=[{processType:b.H.SERPProcessType.META_PATH,targetId:116,content:function(e){const{language:t="en",t:i}=e;return{title:i("SEO_Recharge_title"),keywords:"recharge, coins recharge, get coins, TikTok, ティックトック, tik tok, tick tock, tic tok, tic toc, tictok, тик ток, ticktock",description:i("SEO_Recharge_desc"),robotsContent:k.YV.INDEX,canonicalHref:`${k.f9}${k.fz}?lang=${t}`,applicableDevice:"pc, mobile"}}}],de=[{processType:b.H.SERPProcessType.META_PATH,targetId:111,content:function(e){const{language:t="en",t:i,contentInfo:o,eventName:n}=e;return{title:o?i("search_on_tiktok",{eventname:null==o?void 0:o.query,ns:"MT_Reflow"}):i("offline_title",{ns:"MT_Reflow"}),keywords:`${i("landing_page_key_word_1",{ns:"MT_Reflow"})},${null==o?void 0:o.query}`,description:o?i("outapp_copywriter",{eventname:null==o?void 0:o.query,ns:"MT_Reflow"}):i("expiration_reminder",{ns:"MT_Reflow"}),robotsContent:k.YV.INDEX,canonicalHref:`${k.cz}/${n}?lang=${t}`,applicableDevice:"pc, mobile"}}}];var ce=i(3897);const ue=[{processType:b.H.SERPProcessType.META_PATH,targetId:14,content:function(e){var t;const{language:i="en",t:o,user:n}=e,a=null!==(t=null==n?void 0:n.uniqueId)&&void 0!==t?t:"",s=[null==n?void 0:n.nickName,`@${a}`,"live","live room","tiktok search",o("TikTok i18n keywords")].join(", ");return{title:o("SEO_live_title",{username:a}),keywords:s,description:o("SEO_live_title",{username:a}),robotsContent:k.YV.INDEX,canonicalHref:`${k.f9}${k.BF}?lang=${i}`,applicableDevice:"pc, mobile"}}}],pe=[{processType:b.H.SERPProcessType.META_PATH,targetId:15,content:function(e){const{t}=e;return{title:t("SEO_live_discover_title"),keywords:"live, live stream, TikTok, ティックトック, tik tok, tick tock, tic tok, tic toc, tictok, тик ток, ticktock",description:t("SEO_live_discover_desc"),robotsContent:k.YV.INDEX,canonicalHref:`${k.f9}${k.ru}`,applicableDevice:"pc, mobile"}}}],ge=[{processType:b.H.SERPProcessType.META_PATH,targetId:12,content:function(e){var t,i,o,n;const{t:a,userInfo:s,LiveRoomInfo:r,event:l}=e,d=null!==(t=null==r?void 0:r.title)&&void 0!==t?t:"",c=null==r?void 0:r.status,u=null!==(o=null===(i=null==s?void 0:s.user)||void 0===i?void 0:i.uniqueId)&&void 0!==o?o:"",p=null===(n=null==s?void 0:s.user)||void 0===n?void 0:n.nickname,g=`${p} (@${u})`,h=[p,`@${u}`,"live","live room","tiktok search",a("TikTok i18n keywords")].join(", "),m=(0,z.P4)({uniqueId:u}),_=`${x.o}${m}`,v=a("SEO_live_title",{username:g});let y=`${d?`${d}. `:""}${a("SEO_live_desc",{username:g})}`;return!(2===c)&&l&&(y=`${a("SEO_live_desc2",{event_name:null==l?void 0:l.title,username:g})}`),{title:v,keywords:h,description:y,robotsContent:k.YV.INDEX,canonicalHref:_,applicableDevice:"pc, mobile"}}},{processType:b.H.SERPProcessType.JSONLD_PATH,targetId:12,content:function(e){var t,i,o,n;const{t:a,userInfo:s,seoProps:r,event:l}=e,{videoObject:d}=null!=r?r:{},c=null!==(i=null===(t=null==s?void 0:s.user)||void 0===t?void 0:t.uniqueId)&&void 0!==i?i:"",u=null!==(n=null===(o=null==s?void 0:s.user)||void 0===o?void 0:o.nickname)&&void 0!==n?n:"",p=(0,z.P4)({uniqueId:c}),g=`${x.o}${p}`,h=(0,z.yl)({uniqueId:c}),m=`${x.o}${h}`,_=(0,z.MR)(c)?`${u} (@${c})`:`${u}`;return[["Event",l?{"@type":"Event",name:l.title,url:g,description:l.description,startDate:new Date(1e3*Number(l.startTime)).toISOString(),endDate:new Date(1e3*(Number(l.startTime)+Number(l.duration))).toISOString(),eventStatus:"http://schema.org/EventScheduled",eventAttendanceMode:"http://schema.org/OnlineEventAttendanceMode",location:{"@type":"VirtualLocation",url:g},Organizer:{"@type":"Organization",name:u,alternateName:c,url:m}}:{}],["BreadcrumbList",(0,C.Uk)([{url:x.o,name:k.fC},{url:m,name:_},{url:g,name:"LIVE"}])],["VideoObject",null!=d?d:{}]]}}],he=[{processType:b.H.SERPProcessType.META_PATH,targetId:17,content:function(e){const{mc_info:t,status_code:i,t:o}=e,{id_str:n="",name:a=""}=null!=t?t:{},s=0===i&&""!==a;let r=o("playlist_sharing_metatitle",{playlist_name:a});const l=[a,o("TikTok i18n keywords")].join(",");let d=o("playlist_sharing_metadescription",{playlist_name:a});return s||(r="",d=""),{title:r,keywords:l,description:d,canonicalHref:`${k.f9}/playlist-music/${a}-${n}`,robotsContent:s?k.YV.INDEX:k.YV.NO_INDEX,applicableDevice:"pc, mobile"}}}],{JsonldType:me}=y.J,_e=new Map([["animals",{titleI18NKey:"SEO_foryou_animals_title",descriptionI18NKey:"SEO_foryou_animals_desc"}],["beauty",{titleI18NKey:"SEO_foryou_beauty_title",descriptionI18NKey:"SEO_foryou_beauty_desc"}],["comedy",{titleI18NKey:"SEO_foryou_comedy_title",descriptionI18NKey:"SEO_foryou_comedy_desc"}],["dance",{titleI18NKey:"SEO_foryou_dance_title",descriptionI18NKey:"SEO_foryou_dance_desc"}],["food",{titleI18NKey:"SEO_foryou_food_title",descriptionI18NKey:"SEO_foryou_food_desc"}],["gaming",{titleI18NKey:"SEO_foryou_gaming_title",descriptionI18NKey:"SEO_foryou_gaming_desc"}],["sports",{titleI18NKey:"SEO_foryou_sports_title",descriptionI18NKey:"SEO_foryou_sports_desc"}]]),ve=[{processType:b.H.SERPProcessType.META_PATH,targetId:113,content:function(e){var t;const{language:i="en",t:o,topic:n}=e,{titleI18NKey:a="",descriptionI18NKey:s=""}=null!==(t=_e.get(n))&&void 0!==t?t:{};return a&&s?{title:o(a),keywords:o("TikTok i18n keywords"),description:o(s),robotsContent:k.YV.INDEX,canonicalHref:`${k.f9}/topics/${n}?lang=${i}`,applicableDevice:"pc, mobile"}:{}}},{processType:b.H.SERPProcessType.JSONLD_PATH,targetId:113,content:function(e){const{seoProps:{itemList:t}={}}=e;return[[me.ItemList,null!=t?t:{}]]}}],ye=[{processType:b.H.SERPProcessType.META_PATH,targetId:114,content:function(e){const{t,eventTitle:i="",eventId:o="",subscriberCount:n=""}=e;return{title:t("share_live_event_title",{"Event Topic":i}).replace("{Event Topic}",i),keywords:"live, live event, TikTok, ティックトック, tik tok, tick tock, tic tok, tic toc, tictok, тик ток, ticktock",description:t("share_live_event_desc",{number:n}),robotsContent:k.YV.INDEX,canonicalHref:`${k.f9}${k.KH}/${o}`,applicableDevice:"pc, mobile"}}}],be=[{processType:b.H.SERPProcessType.META_PATH,targetId:119,content:function(e){var t,i;const{t:o,mixInfo:n,statusCode:a}=e,s=0===a,r=`@${null===(t=null==n?void 0:n.creator)||void 0===t?void 0:t.uniqueId}`,l=null!==(i=null==n?void 0:n.name)&&void 0!==i?i:"Untitled playlist";return{title:o("playlist_share_title",{Playlist_name:l,username:r},`Playlist ${l} created by ${r}`),description:o("playlist_share_desc",{},"Enjoy a curated video list and find more videos on TikTok!"),canonicalHref:s?`${x.o}/${r}/playlist/${null==n?void 0:n.name}-${null==n?void 0:n.id}`:x.o,robotsContent:s?k.YV.INDEX:k.YV.NO_INDEX,applicableDevice:"mobile"}}},{processType:b.H.SERPProcessType.JSONLD_PATH,targetId:119,content:function(e){var t,i,o,n,a,s,r;const{seoProps:{itemList:l}={},mixInfo:d,t:c}=e;if(!(null==d?void 0:d.id))return[];const u=`${x.o}${w.SN.videoPlaylist({uniqueId:null!==(i=null===(t=d.creator)||void 0===t?void 0:t.uniqueId)&&void 0!==i?i:"",content:null!==(o=d.name)&&void 0!==o?o:"",id:d.id})}`,p=`${x.o}${w.SN.user({uniqueId:null!==(a=null===(n=d.creator)||void 0===n?void 0:n.uniqueId)&&void 0!==a?a:""})}`,{creator:g}=d,h=(null==g?void 0:g.uniqueId)?`${null==g?void 0:g.nickname} (@${null==g?void 0:g.uniqueId})`:`${null==g?void 0:g.nickname}`,m=c((null===(s=d.creator)||void 0===s?void 0:s.verified)?"user_SEO_official_title1":"user_SEO_title1",{username:h}),_={"@type":"ItemPage","@id":u};return[[y.J.JsonldType.Page,_],[y.J.JsonldType.ItemList,null!=l?l:{}],[K.type,new K([{url:x.o,name:k.fC},{url:p,name:m},{url:u,name:null!==(r=d.name)&&void 0!==r?r:"playlist"}])]]}}],fe=[{processType:b.H.SERPProcessType.META_PATH,targetId:6,content:function(e){var t,i,o,n;const{stickerInfo:{sticker:a}={},t:s}=e;return a?{title:s("share_effect_title",{sticker_name:a.name}),description:s("share_sticker_desc",{sticker_desc:a.desc,number:(0,S.BT)(null!==(i=null===(t=a.stickerStats)||void 0===t?void 0:t.useCount)&&void 0!==i?i:0),num:null!==(n=null===(o=a.stickerStats)||void 0===o?void 0:o.useCount)&&void 0!==n?n:0}),robotsContent:k.YV.INDEX,canonicalHref:`${x.o}/sticker/${a.name}-${a.id}`,applicableDevice:"mobile"}:{title:s("share_sticker_preset"),description:"",robotsContent:k.YV.NO_INDEX,applicableDevice:"mobile"}}}];function xe(e,t){return`/place/${t}-${e}`}const we=[{processType:b.H.SERPProcessType.META_PATH,targetId:18,content:function(e){var t;const{poiInfo:i,statusCode:o,t:n}=e,{poi:{id:a="",name:s="",indexEnabled:r=!1}={}}=null!=i?i:{},{videoCount:l}=null!==(t=null==i?void 0:i.stats)&&void 0!==t?t:{};let d=`${s} | ${n("poidetails_tiktokplaces")}`,c=`${(0,S.BT)(l)} ${n("videos_")}. ${n("poidetails_location_name_placehldtwo").replace("{ }",s)}`;const u=xe(a,s),p=`${k.f9}${u}`,g=r?k.YV.INDEX:k.YV.NO_INDEX;switch(o){case R.Cb:case R.Bu:d=n("poisuggest_placeuna_title_1"),c="";break;case R.oj:d=n("err_feature_unavailable"),c=""}return{title:d,keywords:"",description:c,canonicalHref:p,robotsContent:g,applicableDevice:"pc"}}},{processType:b.H.SERPProcessType.JSONLD_PATH,targetId:18,content:function(e){var t;const{poiInfo:i,seoProps:o,t:n}=e,{itemList:a,metaParams:s}=null!=o?o:{};if(!(null==i?void 0:i.poi))return[];const{name:r="",id:l=""}=null!==(t=i.poi)&&void 0!==t?t:{},{title:d}=null!=s?s:{},c=xe(l,r),u=`${x.o}${c}`,p=null!=d?d:`${r} | TikTok`,g={"@type":"ItemPage","@id":u},h=(0,C.Uk)([{url:x.o,name:k.fC},{url:u,name:p}]);return[[y.J.JsonldType.Page,g],[y.J.JsonldType.ItemList,null!=a?a:{}],[y.J.JsonldType.BreadcrumbList,h]]}}];function ke(e,t,i){const o=(0,z.yl)({uniqueId:e});return t&&i?`${o}/collection/${t}-${i}`:o}const Se=[{processType:b.H.SERPProcessType.META_PATH,targetId:121,content:function(e){const{t,collectionInfo:i}=e,{userName:o="",name:n="",collectionId:a=""}=null!=i?i:{},s=(0,B.m)(e),r=(0,B.M)(e),l=t("shared_collection_other_apps_title",void 0,"Collection %1$s created by %s").replace("%1$s",n).replace("%s",o),d=t("shared_collection_other_apps_description",void 0,"Watch amazing videos in this curated collection %1$s").replace("%1$s",n),c=s&&!r?k.YV.INDEX:k.YV.NO_INDEX,u=ke(o,n,String(a));return{title:l,keywords:void 0,description:d,robotsContent:c,canonicalHref:`${k.f9}${u}`,applicableDevice:"pc, mobile"}}},{processType:b.H.SERPProcessType.JSONLD_PATH,targetId:121,content:function(e){if(!(0,B.m)(e))return[];const{collectionInfo:t,seoProps:i,t:o}=e,{itemList:n}=null!=i?i:{},{userName:a="",name:s="",collectionId:r}=null!=t?t:{},l=(0,z.yl)({uniqueId:a}),d=`${x.o}${l}`,c=`${a} | TikTok`,u=ke(a,s,String(r)),p=`${x.o}${u}`,g=o("shared_collection_other_apps_title",void 0,"Collection %1$s created by %s").replace("%1$s",s).replace("%s",a),h={"@type":"ItemPage","@id":p},m=(0,C.Uk)([{url:x.o,name:k.fC},{url:d,name:c},{url:p,name:null!=g?g:""}]);return[[y.J.JsonldType.Page,h],[y.J.JsonldType.BreadcrumbList,m],[y.J.JsonldType.ItemList,null!=n?n:{}]]}}],Ce=[...j,...T,...I,...P,...M.Y,...W,...U,...q.D,...Q,...J,...re,...$.c,...le,...de,...ce.z,...ue,...pe,...ge,...he,...ve,...ye,...be,...fe,...we,...Se];var je=i(66891),Te=i(81033),Ie=i(44383),Pe=i(53177);const Oe=[...Ce];let Le=class extends n.D{constructor(e,t,i,o){super(),this.stateModule=e,this.service=t,this.sharingMeta=i,this.t=o,this.defaultState={}}setFeedSEOProps(e){return e.pipe((0,u.z)((e=>{const{pageType:t,topic:i,topicType:o,language:n}=e,a={seoProps:{pageId:"",pageType:t},topic:i,topicType:o,language:n};return this.service.fetchSEOProps(a,Oe).pipe((0,p.z)((e=>(0,l.of)(this.stateModule.getActions().setSEOState(e),this.terminate()))),(0,g.K)((e=>(0,l.of)(this.noop(),this.terminate()))))})))}setGoLiveSEOProps(e){return e.pipe((0,u.z)((({language:e,user:t})=>{const i={seoProps:{pageId:"",pageType:14},user:t,language:e,t:this.t};return this.service.fetchSEOProps(i,Oe).pipe((0,p.z)((e=>(0,l.of)(this.stateModule.getActions().setSEOState(e),this.terminate()))),(0,g.K)((()=>(0,l.of)(this.noop()))))})))}setHomeSEOProps(e){return this.service.fetchSEOProps({seoProps:{pageId:"",pageType:101},language:e},Oe).pipe((0,p.z)((e=>(0,d.T)((0,l.of)(this.stateModule.getActions().setSEOState(e)),(0,l.of)(this.sharingMeta.setSharingMetaState({"og:image":x.B}))))))}setForyouSEOProps(e,t){if(-1===e.statusCode)return(0,l.of)(this.noop());const i=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageType:5},t:this.t});return this.service.fetchSEOProps(i,Oe).pipe((0,h.U)((e=>this.stateModule.getActions().setSEOState(e))))}setVideoSEOProps(e,t,i,o,n){var a,s,r,c,u,g,h,y;if(-1===e.statusCode)return(0,l.of)(this.noop());const b=null!==(r=null===(s=null===(a=null==e?void 0:e.itemInfo)||void 0===a?void 0:a.itemStruct)||void 0===s?void 0:s.id)&&void 0!==r?r:"",f=null!==(y=null===(h=null===(g=null===(u=null===(c=null==e?void 0:e.itemInfo)||void 0===c?void 0:c.itemStruct)||void 0===u?void 0:u.author)||void 0===g?void 0:g.bioLink)||void 0===h?void 0:h.link)&&void 0!==y?y:"";return(0,l.of)(e).pipe((0,m.M)(this.stateModule.state$.pipe((0,_.h)((e=>void 0!==e.abtest)))),(0,p.z)((([a,s])=>{const r=Object.assign(Object.assign(Object.assign({},e),t),{transcriptContent:n,bioLink:f,seoProps:{pageId:b,pageType:0,abtest:s.abtest},t:this.t});return this.service.fetchSEOProps(r,Oe).pipe((0,v.w)((t=>(0,d.T)((0,l.of)(this.stateModule.getActions().setSEOState(t)),this.sharingMeta.setVideoSharingMeta(t,e,i,o)))))})))}setCollectionSEOProps(e,t,i,o,n){var a,s,r;const c=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageId:null!==(r=null===(s=null===(a=e.collectionInfo)||void 0===a?void 0:a.collectionId)||void 0===s?void 0:s.toString())&&void 0!==r?r:"",pageType:121},t:this.t,items:n});return this.service.fetchSEOProps(c,Oe).pipe((0,v.w)((t=>{var n,a,s;return(0,d.T)((0,l.of)(this.stateModule.getActions().setSEOState(t)),o?(0,l.of)(this.noop()):this.sharingMeta.setCollectionSharingMeta(e,i,null!==(s=null===(a=null===(n=null==e?void 0:e.collectionInfo)||void 0===n?void 0:n.collectionId)||void 0===a?void 0:a.toString())&&void 0!==s?s:""))})))}setSearchSharingSEOProps(e,t,i,o){if(-1===e.statusCode)return(0,l.of)(this.noop());const n=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageType:111},eventName:i,t:this.t});return this.service.fetchSEOProps(n,Oe).pipe((0,p.z)((t=>(0,d.T)((0,l.of)(this.stateModule.getActions().setSEOState(t)),this.sharingMeta.setSearchSharingMeta(t,e,i,o)))))}setQuestionSEOProps(e,t,i,o,n,a){var s;if(-1===e.statusCode)return(0,l.of)(this.noop());const r=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageId:null===(s=e.questionInfo)||void 0===s?void 0:s.id,pageType:16},answers:i,t:this.t,items:a});return this.service.fetchSEOProps(r,Oe).pipe((0,p.z)((t=>(0,l.of)(this.stateModule.getActions().setSEOState(t),this.sharingMeta.setQuestionSharingMeta(e,i[0],o,n)))))}setVideoPlaylistSEOProps(e,t,i,o){var n;if(-1===e.statusCode)return(0,l.of)(this.noop());const a=Object.assign(Object.assign(Object.assign({},e),i),{itemList:t,seoProps:{pageId:null===(n=e.mixInfo)||void 0===n?void 0:n.id,pageType:119},t:this.t});return this.service.fetchSEOProps(a,Oe).pipe((0,p.z)((i=>(0,l.of)(this.stateModule.getActions().setSEOState(i),this.sharingMeta.setVideoPlaylistSharingMeta(e,t,o)))))}setUserSEOProps(e,t,i,o){var n,a;const{userInfo:s,statusCode:r}=e;if(-1===r)return(0,l.of)(this.noop());const c=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageId:null!==(a=null===(n=null==s?void 0:s.user)||void 0===n?void 0:n.id)&&void 0!==a?a:"",pageType:1},t:this.t,items:o});return this.service.fetchSEOProps(c,Oe).pipe((0,v.w)((t=>(0,d.T)((0,l.of)(this.stateModule.getActions().setSEOState(t)),this.sharingMeta.setUserSharingMeta(t,e,i)))))}setStickerSEOProps(e,t,i){var o,n,a;const{statusCode:s}=e;if(-1===s)return(0,l.of)(this.noop());const r=Object.assign(Object.assign(Object.assign({},e),t),{statusCode:s,seoProps:{pageId:null!==(a=null===(n=null===(o=null==e?void 0:e.stickerInfo)||void 0===o?void 0:o.sticker)||void 0===n?void 0:n.id)&&void 0!==a?a:"",pageType:6},t:this.t});return this.service.fetchSEOProps(r,Oe).pipe((0,p.z)((t=>(0,d.T)((0,l.of)(this.stateModule.getActions().setSEOState(t)),this.sharingMeta.setStickerSharingMeta(t,e,i)))))}setChallengeSEOProps(e,t,i,o,n){var a;const{statusCode:s}=e;if(-1===s)return(0,l.of)(this.noop());const r=Object.assign(Object.assign(Object.assign({},e),t),{statusCode:s,seoProps:{pageId:null===(a=e.challengeInfo)||void 0===a?void 0:a.challenge.id,pageType:3},t:this.t,items:o,relatedChallengeList:n});return this.service.fetchSEOProps(r,Oe).pipe((0,v.w)((t=>(0,d.T)((0,l.of)(this.stateModule.getActions().setSEOState(t)),this.sharingMeta.setChallengeSharingMeta(t,e,i)))))}setMusicSEOProps(e,t,i,o){var n;const{statusCode:a}=e;if(-1===a)return(0,l.of)(this.noop());const s=Object.assign(Object.assign(Object.assign({},e),t),{statusCode:a,seoProps:{pageId:null===(n=e.musicInfo)||void 0===n?void 0:n.music.id,pageType:4},items:o,t:this.t});return this.service.fetchSEOProps(s,Oe).pipe((0,v.w)((t=>(0,d.T)((0,l.of)(this.stateModule.getActions().setSEOState(t)),this.sharingMeta.setMusicSharingMeta(t,e,i)))))}setMusicPlaylistSEOProps(e,t,i){var o;const{status_code:n}=e;if(-1===n)return(0,l.of)(this.noop());const a=Object.assign(Object.assign(Object.assign({},e),t),{status_code:n,seoProps:{pageId:null===(o=e.mc_info)||void 0===o?void 0:o.id_str,pageType:17},t:this.t});return this.service.fetchSEOProps(a,Oe).pipe((0,p.z)((t=>(0,d.T)((0,l.of)(this.stateModule.getActions().setSEOState(t)),this.sharingMeta.setMusicPlaylistSharingMeta(t,e,i)))))}setChannelSEOProps(e,t,i,o,n){const a=Object.assign(Object.assign(Object.assign({},e),t),{transcriptList:o,disableTranscript:n,seoProps:{pageId:"",pageType:122},t:this.t});return this.service.fetchSEOProps(a,Oe).pipe((0,v.w)((t=>(0,d.T)((0,l.of)(this.stateModule.getActions().setSEOState(t)),this.sharingMeta.setChannelSharingMeta(t,e,this.service.getUA(),i)))))}setSearchSEOProps(e,t,i){const{status_code:o}=e;if(-1===o)return(0,l.of)(this.noop());const n=Object.assign(Object.assign(Object.assign(Object.assign({},e),t),i),{seoProps:{pageId:"",pageType:105},t:this.t});return this.service.fetchSEOProps(n,Oe).pipe((0,h.U)((e=>this.stateModule.getActions().setSEOState(e))))}setLiveRoomSEOProps(e,t,i){var o;const{userInfo:n,statusCode:a}=e,s=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageId:null!==(o=null==n?void 0:n.user.id)&&void 0!==o?o:"",pageType:12},t:this.t});return-1===a?(0,l.of)(this.noop()):this.service.fetchSEOProps(s,Oe).pipe((0,p.z)((t=>(0,d.T)((0,l.of)(this.stateModule.getActions().setSEOState(t)),this.sharingMeta.setLiveRoomSharingMeta(t,e,i)))))}setFollowingSEOProps(e,t,i){if(-1===e.statusCode)return(0,l.of)(this.noop());const o=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageType:11},t:this.t});return this.service.fetchSEOProps(o,Oe).pipe((0,p.z)((e=>(0,d.T)((0,l.of)(this.stateModule.getActions().setSEOState(e)),this.sharingMeta.setFollowingSharingMeta(e,i)))))}setPoiSEOProps(e,t,i,o){var n,a;const{statusCode:s}=e;if(-1===s)return(0,l.of)(this.noop());const r=Object.assign(Object.assign(Object.assign({},e),t),{statusCode:s,seoProps:{pageId:null===(a=null===(n=e.poiInfo)||void 0===n?void 0:n.poi)||void 0===a?void 0:a.id,pageType:18},items:o,t:this.t});return this.service.fetchSEOProps(r,Oe).pipe((0,p.z)((t=>(0,d.T)((0,l.of)(this.stateModule.getActions().setSEOState(t)),this.sharingMeta.setPoiSharingMeta(t,e,i)))))}setEventDetailSEOProps(e){return e.pipe((0,u.z)((e=>{const{eventTitle:t,eventId:i,subscriberCount:o,language:n="en"}=e,a={seoProps:{pageId:"",pageType:114},t:this.t,eventTitle:t,language:n,eventId:i,subscriberCount:o};return this.service.fetchSEOProps(a,Oe).pipe((0,p.z)((e=>(0,l.of)(this.stateModule.getActions().setSEOState(e),this.terminate()))),(0,g.K)((()=>(0,l.of)(this.noop()))))})))}reportImpressionByEventbus(e){return this.service.reportImpressionByEventbus(e)}reportImpressionByRpc(e){return this.service.reportImpressionByRpc(e)}};(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],Le.prototype,"setFeedSEOProps",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",c.y)],Le.prototype,"setGoLiveSEOProps",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",c.y)],Le.prototype,"setEventDetailSEOProps",null),Le=(0,o.__decorate)([(0,s.Y)("SEO"),(0,o.__param)(3,(0,r.t)(je.s$)),(0,o.__metadata)("design:paramtypes",[Pe.T,Ie.L,Te.I,Function])],Le)},44383:(e,t,i)=>{i.d(t,{L:()=>b});var o=i(64047),n=i(57244),a=i(35167),s=i(82346),r=i(68854),l=i(22369);const d=new Set([l.H.SERPProcessType.JSONLD_PATH,l.H.SERPProcessType.META_PATH]),c=new Set([l.H.SERPProcessType.JSONLD_EXP,l.H.SERPProcessType.META_EXP]),u=new Set([l.H.SERPProcessType.JSONLD_PAGE,l.H.SERPProcessType.META_PAGE]),p=new Set([l.H.SERPProcessType.META_EXP,l.H.SERPProcessType.META_PAGE,l.H.SERPProcessType.META_PATH]),g=new Set([l.H.SERPProcessType.JSONLD_EXP,l.H.SERPProcessType.JSONLD_PAGE,l.H.SERPProcessType.JSONLD_PATH]),h=(e,t)=>{var i;const{seoProps:{pageId:o,pageType:n,abtest:a}={}}=t,s=null!==(i=null==a?void 0:a.vidList)&&void 0!==i?i:[];return[...e.filter((e=>d.has(e.processType)&&e.targetId===n)),...e.filter((e=>c.has(e.processType)&&s.includes(e.targetId.toString()))),...e.filter((e=>u.has(e.processType)&&e.targetId===o))]};var m=i(41279),_=i(73726),v=i(18645),y=i(66891);let b=class{constructor(e,t){this.t=e,this.fetch=t}fetchSEOProps(e,t){var i,o,n,a;e.t=this.t;const r=null!==(o=null===(i=function(e,t){return h(t,e).filter((e=>p.has(e.processType))).reduce(((e,t)=>{var i,o;const n=t.content(e),a=null!==(o=null===(i=e.seoProps)||void 0===i?void 0:i.metaParams)&&void 0!==o?o:{};return Object.assign(Object.assign({},e),{seoProps:Object.assign(Object.assign({},e.seoProps),{metaParams:Object.assign(Object.assign({},a),n)})})}),e)}(e,t).seoProps)||void 0===i?void 0:i.metaParams)&&void 0!==o?o:{},l=null!==(a=null===(n=function(e,t){return h(t,e).filter((e=>g.has(e.processType))).reduce(((e,t)=>{var i,o;const n=t.content(e),a=null!==(o=null===(i=e.seoProps)||void 0===i?void 0:i.jsonldList)&&void 0!==o?o:[];return Object.assign(Object.assign({},e),{seoProps:Object.assign(Object.assign({},e.seoProps),{jsonldList:[...a,...n]})})}),e)}(e,t).seoProps)||void 0===n?void 0:n.jsonldList)&&void 0!==a?a:[],d=Object.assign(Object.assign({},e.seoProps),{metaParams:r,jsonldList:l});return(0,s.of)(d)}getUA(){return window.navigator.userAgent}getTrafficType(){return(0,m.R)()}getLaunchMode(){return(0,_.cf)()}fetchABTest(e){return this.fetch.get("/node-webapp/api/seo/ab-version",{query:{canonical:e},baseUrlType:2}).pipe((0,r.K)((()=>(0,s.of)({pageId:"-1",vidList:[],parameters:{}}))))}reportImpressionByEventbus(e){}reportImpressionByRpc(e){}};b=(0,o.__decorate)([(0,n.G)(),(0,o.__param)(0,(0,a.t)(y.s$)),(0,o.__metadata)("design:paramtypes",[Function,v.r])],b)},53177:(e,t,i)=>{i.d(t,{T:()=>v});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(11348),l=i(82346),d=i(60595),c=i(35435),u=i(10026),p=i(5549),g=i(53095),h=i(48782),m=i(44383);const _=(e="")=>{try{return decodeURI(e)}catch(t){return e}};let v=class extends n.D{constructor(e){super(),this.service=e,this.defaultState={metaParams:{},jsonldList:[],abtest:void 0,loading:!1,canonical:void 0,pageType:999,launchMode:void 0,trafficType:void 0}}setSEOState(e,t){e.metaParams=t.metaParams,e.jsonldList=t.jsonldList}setAbTest(e,t){e.abtest=t}setLoading(e,t){e.loading=t}setCanonical(e,t){e.canonical=t}setLaunchMode(e,t){e.launchMode=t}setTrafficType(e,t){e.trafficType=t}fetchAbTest(e){return e.pipe((0,c.w)((e=>_(e)===_(this.state.canonical)?r.E:this.service.fetchABTest(e).pipe((0,c.w)((t=>(0,l.of)(this.getActions().setAbTest(t),this.getActions().setCanonical(e),this.terminate()))),(0,u.O)(this.getActions().setLoading(!0)),(0,p.l)(this.getActions().setLoading(!1))))))}getLaunchMode(e){return e.pipe((0,g.z)((()=>(0,l.of)(this.getActions().setLaunchMode(this.service.getLaunchMode()),this.terminate()))))}getTrafficType(e){return e.pipe((0,g.z)((()=>(0,l.of)(this.getActions().setTrafficType(this.service.getTrafficType()),this.terminate()))))}get stableState$(){return this.state$.pipe((0,h.h)((e=>!e.loading)))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"setSEOState",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"setAbTest",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"setLoading",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"setCanonical",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"setLaunchMode",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"setTrafficType",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[d.y]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"fetchAbTest",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[d.y]),(0,o.__metadata)("design:returntype",d.y)],v.prototype,"getLaunchMode",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[d.y]),(0,o.__metadata)("design:returntype",d.y)],v.prototype,"getTrafficType",null),v=(0,o.__decorate)([(0,s.Y)("SEOState"),(0,o.__metadata)("design:paramtypes",[m.L])],v)},81033:(e,t,i)=>{i.d(t,{I:()=>p});var o=i(64047),n=i(73566),a=i(19630),s=i(35167),r=i(82346),l=i(66891),d=i(33642),c=i(31545),u=i(13596);let p=class extends n.D{constructor(e,t){super(),this.t=e,this.stateModule=t,this.defaultState={}}setSharingMetaState(e){return this.stateModule.getActions().setSharingMetaState(e)}setVideoSharingMeta(e,t,i,o){var n,a,s,l,d,c,p,g,h,m,_,v,y,b;const{protocal:f}=(0,u.qY)(i),x=(0,u.JP)({schema:`${f}aweme/detail/${null===(n=t.itemInfo)||void 0===n?void 0:n.itemStruct.id}?${o}`,metaParams:e.metaParams,pageType:0,shareMeta:null==t?void 0:t.shareMeta,response:t,appType:i}),w=null===(a=t.itemInfo)||void 0===a?void 0:a.itemStruct.video,k=null===(s=t.itemInfo)||void 0===s?void 0:s.itemStruct.imagePost,S=null!==(g=k?null===(c=null===(d=null===(l=k.shareCover)||void 0===l?void 0:l.imageURL)||void 0===d?void 0:d.urlList)||void 0===c?void 0:c[0]:null===(p=null==w?void 0:w.shareCover)||void 0===p?void 0:p[1])&&void 0!==g?g:"",C=null!==(_=null!==(m=String(null===(h=null==k?void 0:k.shareCover)||void 0===h?void 0:h.imageWidth))&&void 0!==m?m:null==w?void 0:w.width)&&void 0!==_?_:"",j=null!==(b=null!==(y=String(null===(v=null==k?void 0:k.shareCover)||void 0===v?void 0:v.imageHeight))&&void 0!==y?y:null==w?void 0:w.height)&&void 0!==b?b:"",T=Object.assign(Object.assign({},x),{"og:image":S,"twitter:image":S,"og:image:width":C,"og:image:height":j});return(0,r.of)(this.stateModule.getActions().setSharingMetaState(T))}setUserSharingMeta(e,t,i){var o,n,a,s;const{protocal:l}=(0,u.qY)(i),d=(0,u.JP)({response:t,pageType:1,schema:`${l}user/profile/`,metaParams:e.metaParams,appType:i}),c=null===(o=t.userInfo)||void 0===o?void 0:o.user,p=null!==(a=null!==(n=null==c?void 0:c.avatarMedium)&&void 0!==n?n:null==c?void 0:c.avatarThumb)&&void 0!==a?a:u.dJ,g=Object.assign(Object.assign({},d),{"og:image":p,"twitter:image":p,"og:image:width":"360","og:image:height":"360","og:image:alt":null===(s=e.metaParams)||void 0===s?void 0:s.title});return(0,r.of)(this.stateModule.getActions().setSharingMetaState(g))}setMusicSharingMeta(e,t,i){var o,n,a,s,l,d;const c=null===(o=t.musicInfo)||void 0===o?void 0:o.music,{protocal:p}=(0,u.qY)(i),g=(0,u.JP)({response:t,pageType:4,schema:`${p}user/profile/${null==c?void 0:c.id}`,metaParams:e.metaParams,appType:i}),h=null!==(a=null!==(n=null==c?void 0:c.coverMedium)&&void 0!==n?n:null==c?void 0:c.coverThumb)&&void 0!==a?a:"https://lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/images/music-default.png",m=null!==(s=null==c?void 0:c.title)&&void 0!==s?s:"",_=null!==(l=null==c?void 0:c.authorName)&&void 0!==l?l:"",v=Object.assign(Object.assign({},g),{"og:image":h,"twitter:image":h,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(d=e.metaParams)||void 0===d?void 0:d.title,"music:duration":"0","music:album:track":m,"music:musician":_});return(0,r.of)(this.stateModule.getActions().setSharingMetaState(v))}setMusicPlaylistSharingMeta(e,t,i){var o,n,a,s;const l=t.mc_info,{protocal:c}=(0,u.qY)(i),p=(0,u.JP)({schema:`${c}assmusic/category/${null==l?void 0:l.id_str}?name=${encodeURIComponent(null!==(o=null==l?void 0:l.name)&&void 0!==o?o:"")}&previous_page=reflow_playlist&enter_method=reflow_return`,metaParams:Object.assign(Object.assign({},e.metaParams),{title:null===(n=null==l?void 0:l.share_info)||void 0===n?void 0:n.share_title,description:null===(a=null==l?void 0:l.share_info)||void 0===a?void 0:a.share_desc}),appType:i}),g=(null==l?void 0:l.share_cover)?(0,d.ZT)(null==l?void 0:l.share_cover):"http://p19-aop-sg.ibyteimg.com/tos-alisg-i-yzb763657w-sg/d2f2b037e19646ad5f2bbd779a550302.png~tplv-yzb763657w-resize:800:800.jpeg",h=Object.assign(Object.assign({},p),{"og:image":g,"twitter:image":g,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(s=e.metaParams)||void 0===s?void 0:s.title});return(0,r.of)(this.stateModule.getActions().setSharingMetaState(h))}setStickerSharingMeta(e,t,i){var o,n,a,s;const{protocal:l}=(0,u.qY)(i),d=null===(o=t.stickerInfo)||void 0===o?void 0:o.sticker,c=(0,u.JP)({pageType:3,response:t,schema:`${l}sticker/detail/${null==d?void 0:d.id}`,metaParams:e.metaParams,appType:i}),p=null===(a=null===(n=null==d?void 0:d.coverUrls)||void 0===n?void 0:n.urlList)||void 0===a?void 0:a[0],g=Object.assign(Object.assign({},c),{"og:image":p,"twitter:image":p,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(s=e.metaParams)||void 0===s?void 0:s.title});return(0,r.of)(this.stateModule.getActions().setSharingMetaState(g))}setChallengeSharingMeta(e,t,i){var o,n,a,s;const{protocal:l}=(0,u.qY)(i),d=null===(o=t.challengeInfo)||void 0===o?void 0:o.challenge,c=(0,u.JP)({pageType:3,response:t,schema:`${l}challenge/detail/${null==d?void 0:d.id}`,metaParams:e.metaParams,appType:i}),p=null!==(a=null!==(n=null==d?void 0:d.profileMedium)&&void 0!==n?n:null==d?void 0:d.profileThumb)&&void 0!==a?a:"https://lf16-tiktok-web.ttwstatic.com/obj/ttfe-malisg/tiktok_web/amp/m-hashtag-default.png",g=Object.assign(Object.assign({},c),{"og:image":p,"twitter:image":p,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(s=e.metaParams)||void 0===s?void 0:s.title});return(0,r.of)(this.stateModule.getActions().setSharingMetaState(g))}setCollectionSharingMeta(e,t,i){var o,n,a,s,l,d,c;const{protocal:p}=(0,u.qY)(t),g=e.shareMeta,h=(0,u.JP)({pageType:121,response:e,schema:`${p}collection/detail?collection_id=${i}&page_name=reflow_collection`,metaParams:{title:null!==(o=null==g?void 0:g.title)&&void 0!==o?o:this.t("TikTok | Make Your Day",{},"TikTok | Make Your Day"),description:null!==(n=null==g?void 0:g.desc)&&void 0!==n?n:this.t("SEO_homepage_desc",{},"TikTok - trends start here. On a device or on the web, viewers can watch and discover millions of personalized short videos. Download the app to get started.")},appType:t}),m=null!==(d=null===(l=null===(s=null===(a=null==e?void 0:e.collectionInfo)||void 0===a?void 0:a.cover)||void 0===s?void 0:s.urlList)||void 0===l?void 0:l[0])&&void 0!==d?d:"https://lf16-tiktok-common.ibytedtos.com/obj/tiktok-web-common-sg/mtact/static/images/tiktok-logo/poster-square.png",_=Object.assign(Object.assign({},h),{"og:image":m,"twitter:image":m,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(c=e.shareMeta)||void 0===c?void 0:c.title});return(0,r.of)(this.stateModule.getActions().setSharingMetaState(_))}setMessageSharingMeta(e,t,i){var o,n;const{protocal:a}=(0,u.qY)(t),s=e.shareMeta,l=(0,u.JP)({pageType:13,response:e,schema:`${a}messages/group/?${i}&page_name=group`,metaParams:{title:null==s?void 0:s.title,description:null==s?void 0:s.desc},appType:t}),d=null!==(o=null==e?void 0:e.cover)&&void 0!==o?o:"",c=Object.assign(Object.assign({},l),{"og:image":d,"twitter:image":d,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(n=e.shareMeta)||void 0===n?void 0:n.title});return(0,r.of)(this.stateModule.getActions().setSharingMetaState(c))}setChannelSharingMeta(e,t,i,o){var n,a,s,l,d;const{protocal:c}=(0,u.qY)(o),p=(0,u.JP)({schema:`${c}user/profile/`,metaParams:e.metaParams,pageType:122,response:{keywordInfo:t},appType:o}),[g="",h="",m=""]=null!==(l=null===(s=null===(a=null===(n=t.itemResponse)||void 0===n?void 0:n.itemList)||void 0===a?void 0:a[0])||void 0===s?void 0:s.video.shareCover)&&void 0!==l?l:[],_=i.includes("WhatsApp")||i.includes("line-poker")?h:m,v=Object.assign(Object.assign({},p),{"og:image":_,"twitter:image":_,"og:image:width":"360","og:image:height":"360","og:image:alt":null===(d=e.metaParams)||void 0===d?void 0:d.title});return(0,r.of)(this.stateModule.getActions().setSharingMetaState(v))}setSearchSharingMeta(e,t,i,o){var n,a,s,l;const{protocal:d}=(0,u.qY)(o),c=(0,u.JP)({schema:`${d}search?keyword=${null!==(a=null===(n=null==t?void 0:t.contentInfo)||void 0===n?void 0:n.query)&&void 0!==a?a:i}`,metaParams:e.metaParams,appType:o}),p=null!==(l=null===(s=null==t?void 0:t.contentInfo)||void 0===s?void 0:s.thirdPartyPreviewImg)&&void 0!==l?l:"https://sf16-muse-va.ibytedtos.com/obj/search-static-maliva/maliva/ugvonpsj1631257573250",g=Object.assign(Object.assign({},c),{"og:image":p,"twitter:image":p,"og:image:width":"1200","og:image:height":"678"});return(0,r.of)(this.stateModule.getActions().setSharingMetaState(g))}setLiveRoomSharingMeta(e,t,i){var o,n,a,s,l,d,c;const{protocal:p}=(0,u.qY)(i),g=(0,u.JP)({schema:`${p}live?room_id=${null===(n=null===(o=t.userInfo)||void 0===o?void 0:o.user)||void 0===n?void 0:n.roomId}`,metaParams:e.metaParams,pageType:12,appType:i}),h=null===(a=t.userInfo)||void 0===a?void 0:a.user,m=null!==(l=null!==(s=null==h?void 0:h.avatarMedium)&&void 0!==s?s:null==h?void 0:h.avatarThumb)&&void 0!==l?l:u.dJ,_=null!==(d=null==h?void 0:h.nickname)&&void 0!==d?d:null==h?void 0:h.uniqueId,v=null==h?void 0:h.uniqueId,y=Object.assign(Object.assign({},g),{"og:image":m,"og:image:secure_url":m,"og:image:width":"360","og:image:height":"360","og:image:alt":null===(c=e.metaParams)||void 0===c?void 0:c.title,"twitter:creator":_,"twitter:creator:id":v});return(0,r.of)(this.stateModule.getActions().setSharingMetaState(y))}setQuestionSharingMeta(e,t,i,o){var n,a,s,r,l,d,c,p;const{protocal:g}=(0,u.qY)(i),h=(0,u.JP)({schema:`${g}qna/detail/${null===(n=e.questionInfo)||void 0===n?void 0:n.id}`,metaParams:{title:null===(a=e.shareMeta)||void 0===a?void 0:a.title,description:null===(s=e.shareMeta)||void 0===s?void 0:s.desc},pageType:16,response:e,appType:i}),m="qna"===(null===(r=o)||void 0===r?void 0:r.scene)?{"og:title":this.t("qaoop_title",{},"Hi friends, I’m inviting you to answer a question on #TikTok!"),"og:description":this.t("qaoop_desc",{},"Share your wisdom!")}:void 0,_=null!==(d=null===(l=null==t?void 0:t.video.shareCover)||void 0===l?void 0:l[1])&&void 0!==d?d:u.dJ,v=Object.assign(Object.assign(Object.assign({},h),{"og:image":_,"twitter:image":_,"og:image:alt":null!==(p=null===(c=e.shareMeta)||void 0===c?void 0:c.title)&&void 0!==p?p:"the cover of first video"}),m);return this.stateModule.getActions().setSharingMetaState(v)}setVideoPlaylistSharingMeta(e,t,i){var o,n,a,s,r,l,d,c;const{protocal:p}=(0,u.qY)(i),g=`@${null===(n=null===(o=e.mixInfo)||void 0===o?void 0:o.creator)||void 0===n?void 0:n.nickname}`,h=null!==(s=null===(a=e.mixInfo)||void 0===a?void 0:a.name)&&void 0!==s?s:"Untitled playlist",m=(0,u.JP)({schema:`${p}mix/detail?id=${null!==(l=null===(r=e.mixInfo)||void 0===r?void 0:r.id)&&void 0!==l?l:"nan"}`,metaParams:{title:this.t("playlist_share_title",{Playlist_name:h,username:g},`Playlist ${h} created by ${g}`),description:this.t("playlist_share_desc",{},"Enjoy a curated video list and find more videos on TikTok!")},pageType:119,response:e,appType:i}),[_]=null!=t?t:[],v=Object.assign(Object.assign({},m),{"og:image":null===(d=null==_?void 0:_.video.shareCover)||void 0===d?void 0:d[1],"twitter:image":null===(c=null==_?void 0:_.video.shareCover)||void 0===c?void 0:c[1],"og:image:alt":`first video of ${h}`});return this.stateModule.getActions().setSharingMetaState(v)}setFollowingSharingMeta(e,t){const i=(0,u.JP)({metaParams:e.metaParams,appType:t}),o=Object.assign(Object.assign({},i),{"og:title":this.t("serp_following_title"),"og:description":this.t("serp_following_desc"),"og:image":u.dJ,"twitter:image":u.dJ,"twitter:title":this.t("SEO_following_title"),"twitter:description":this.t("SEO_following_desc")});return(0,r.of)(this.stateModule.getActions().setSharingMetaState(o))}setPoiSharingMeta(e,t,i){var o;const{protocal:n}=(0,u.qY)(i),a=null===(o=t.poiInfo)||void 0===o?void 0:o.poi,s=(0,u.JP)({pageType:18,response:t,schema:`${n}poi/detail?poi_id=${null==a?void 0:a.id}`,metaParams:e.metaParams,appType:i});return(0,r.of)(this.stateModule.getActions().setSharingMetaState(s))}};p=(0,o.__decorate)([(0,a.Y)("SharingMeta"),(0,o.__param)(0,(0,s.t)(l.s$)),(0,o.__metadata)("design:paramtypes",[Function,c.k])],p)},31545:(e,t,i)=>{i.d(t,{k:()=>c});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(91099),l=i.n(r),d=i(13596);let c=class extends n.D{constructor(){super(...arguments),this.defaultState={value:{}}}setSharingMetaState(e,t){var i;e.value=l()(t,{"og:image":d.dJ,"twitter:image":null!==(i=t["og:image"])&&void 0!==i?i:d.dJ})}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],c.prototype,"setSharingMetaState",null),c=(0,o.__decorate)([(0,s.Y)("SharingMetaState")],c)},13596:(e,t,i)=>{var o;function n(e){const t="m"===e;return{isM:t,protocal:t?"snssdk1233://":"snssdk1180://"}}function a(e){var t,i,a,s;const{schema:r="",pageType:l,shareMeta:d,metaParams:c,appType:u}=e,p=n(u),{isM:g}=p,{APP_INFO:h}=o,m=g?h.M_NAME:h.T_NAME,_=g?h.M_STORE:h.T_STORE,v=g?h.M_PACKAGE:h.T_PACKAGE,y=0===l?null!==(t=null==d?void 0:d.title)&&void 0!==t?t:"":null!==(i=null==c?void 0:c.title)&&void 0!==i?i:"",b=0===l?null!==(a=null==d?void 0:d.desc)&&void 0!==a?a:"":null!==(s=null==c?void 0:c.description)&&void 0!==s?s:"",f={"al:ios:url":r,"al:android:url":r,"al:ios:app_store_id":_,"al:ios:app_name":m,"al:android:app_name":m,"al:android:package":v},x={"og:site_name":"TikTok","og:type":"website","og:title":y,"og:description":b,"fb:app_id":g?h.M_FACEBOOK_ID:h.T_FACEBOOK_ID},w={"twitter:app:id:iphone":_,"twitter:app:id:googleplay":v,"twitter:card":"summary","twitter:site":"TikTok","twitter:title":y,"twitter:description":b};return Object.assign(Object.assign(Object.assign({},f),x),w)}i.d(t,{dJ:()=>s,qY:()=>n,JP:()=>a}),function(e){e.APP_INFO={M_PACKAGE:"com.zhiliaoapp.musically",T_PACKAGE:"com.ss.android.ugc.trill",M_STORE:"835599320",T_STORE:"1235601864",M_NAME:"musical.ly",T_NAME:"TIKTOK",M_FACEBOOK_ID:"597615686992125",T_FACEBOOK_ID:"1862952583919182"},e.TTNOW_INFO={NAME:"TIKTOK.NOW",STORE_ID:"1641062073",PACKAGE:"com.ss.android.ugc.now",FACEBOOK_ID:"1243781563051427"},e.COIN_LITE_INFO={PACKAGE:"com.ss.android.ugc.tiktok.lite",STORE:"6447160980",NAME:"TikTok Lite",FACEBOOK_ID:"171444425350301"}}(o||(o={}));const s="https://lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/images/share_img.png"},57317:(e,t,i)=>{i.d(t,{ot:()=>a});var o=i(90293),n=i(21041);function a(e,t={}){var i;const{search:a}=(0,n.TH)(),s=t.disableAutoLang?"":null!==(i=(0,o.parse)(a).lang)&&void 0!==i?i:"";if("string"==typeof e){const{url:i,query:n}=(0,o.parseUrl)(e);return(0,o.stringifyUrl)({url:i,query:Object.assign({lang:s},n)},Object.assign({skipEmptyString:!0},t))}const{pathname:r="",search:l={},hash:d}=e,c=d?`#${d}`:"";return`${(0,o.stringifyUrl)({url:r,query:Object.assign({lang:s},l)},Object.assign({skipEmptyString:!0},t))}${c}`}},97186:(e,t,i)=>{i.d(t,{v:()=>p});var o=i(64047),n=i(11040),a=i(91051),s=i(57317),r=i(68191),l=i(49907);const d=({theme:e,autoOutlineStyle:t=!1})=>e?{"&:focus":{outline:"none"},"&:focus-visible":{outline:`2px ${t?"auto":"solid"} ${null==e?void 0:e.colors.Negative}${t?"!important":""}`}}:{},c=(0,r.Z)(l.rU,{target:"er1vbsz0"})(d,"label:StyledLink;"),u=(0,r.Z)("a",{target:"er1vbsz1"})(d,"label:ALink;"),p=(0,a.memo)((0,a.forwardRef)((function(e,t){var{forceSSR:i=!1,to:r,replace:l,onClick:d,children:p,disableAutoLang:g,disabled:h,ariaLabel:m}=e,_=(0,o.__rest)(e,["forceSSR","to","replace","onClick","children","disableAutoLang","disabled","ariaLabel"]);const v=i,y=(0,s.ot)(r,{disableAutoLang:g}),b=(0,a.useCallback)((e=>{if(h)return e.preventDefault(),void e.stopPropagation();null==d||d(e),v&&l&&(e.preventDefault(),e.stopPropagation(),location.replace(y))}),[h,d,v,l,y]);return v?(0,n.jsx)(u,Object.assign({ref:t,href:y},_,{onClick:b,"aria-label":m},{children:p}),void 0):(0,n.jsx)(c,Object.assign({ref:t,to:y},_,{onClick:b,"aria-label":m},{children:p}),void 0)})))},76126:(e,t,i)=>{i.d(t,{C:()=>n});var o=i(90293);function n({to:e,location:{search:t}={search:""}},i={}){var n;const a=null!==(n=(0,o.parse)(t).lang)&&void 0!==n?n:"";if("string"==typeof e){const{url:t,query:n}=(0,o.parseUrl)(e);return(0,o.stringifyUrl)({url:t,query:Object.assign({lang:a},n)},Object.assign({skipEmptyString:!0},i))}const{pathname:s="",search:r={},hash:l}=e,d=l?`#${l}`:"";return`${(0,o.stringifyUrl)({url:s,query:Object.assign({lang:a},r)},Object.assign({skipEmptyString:!0},i))}${d}`}},88683:(e,t,i)=>{i.d(t,{p:()=>c,w:()=>p});var o=i(9236),n=i(91051),a=i(2078),s=i(66147),r=i(32273),l=i(17133),d=i(66599);function c(e=""){return(0,o.mp)(d.z,{selector:t=>t.users[e],dependencies:[e]})}const u={[-1]:"Follow",0:"Follow",1:"Following",3:"requested",2:"friends",4:"webapp_unblocked_button1",5:"Follow",6:"Follow"};function p({uniqueId:e,followerStatus:t,prevent:i,onNeedLogin:c,teaParams:p={},isInLiveCard:g=!1,liveCardTeaParams:h={}}){const m=(0,l.Lh)((()=>["user"]),[]),_=Boolean(null==m?void 0:m.user),[{relation:v,secUid:y},b]=(0,o.b7)(d.z,{selector:t=>{var i,o,n,a;return{relation:null!==(o=null===(i=t.users[e])||void 0===i?void 0:i.relation)&&void 0!==o?o:-1,secUid:null!==(a=null===(n=t.users[e])||void 0===n?void 0:n.secUid)&&void 0!==a?a:""}},dependencies:[e]}),f=(0,n.useCallback)((t=>{if(i&&(t.preventDefault(),t.stopPropagation()),a.vD.handleChannelGeneralClick("follow","video_feed"),!_)return null==c?void 0:c();4!==v?(b.postCommitFollowUser(Object.assign(Object.assign({},p),{uniqueId:e})),g&&(1===v?s.tB.handleUnFollow(h):s.tB.handleFollow(h))):b.blockOrUnblockUser({uniqueId:e,secUid:y,isBlock:!0})}),[i,_,v,b,e,p,g,c,y,h]),x=(0,r.Q)()(((e,t)=>{if(1===t){if(e<1)return"Inbox_Follow_back";if(1===e)return u[2]}return u[e]})(v,t));return{isFollowing:1===v||2===v,text:x,handleFollow:f,relation:v}}},66599:(e,t,i)=>{i.d(t,{z:()=>N});var o,n,a=i(64047),s=i(73566),r=i(48185),l=i(19630),d=i(35167),c=i(46207),u=i.n(c),p=i(53954),g=i.n(p),h=i(82346),m=i(11348),_=i(50986),v=i(60595),y=i(35435),b=i(93859),f=i(53095),x=i(96033),w=i(20948),k=i(56979),S=i(10026),C=i(49584),j=i(95872);!function(e){e.Follow="follow",e.Unfollow="unfollow"}(o||(o={})),function(e){e.FollowButton="follow_button",e.Card="card",e.DirectButton="direct_btn",e.SuggestedAccountButton="suggested_account_btn",e.ToolBarButton="toolbar_btn",e.Notice="notice",e.UserProfile="user_profile",e.Follower="follower",e.Following="following",e.SuggestedCard="suggested_card",e.SuggestedList="suggested_list"}(n||(n={}));var T,I=i(55198),P=i(21005),O=i(87930),L=i(66891),M=i(33642),E=i(10410);function A({relation:e,handleIsUnfollow:t,handleIsFollow:i}){switch(e){case 0:case-1:case 4:case 5:case 6:return t();default:return i()}}function D({current:e,targetUser:t}){const i=function(e){var t;return A({relation:null!==(t=e.relation)&&void 0!==t?t:-1,handleIsUnfollow:()=>{var t;return e.privateAccount?1:(null===(t=e.extraInfo)||void 0===t?void 0:t.followed)||6===e.relation?2:0},handleIsFollow:()=>3})}(t);switch(i){case 3:return 0;case 0:return A({relation:e,handleIsFollow:()=>e,handleIsUnfollow:()=>1});case 1:return A({relation:e,handleIsFollow:()=>e,handleIsUnfollow:()=>3});case 2:return A({relation:e,handleIsFollow:()=>e,handleIsUnfollow:()=>2})}}function F(e,t){return 2===e||6===e||5!==e&&t}!function(e){e[e.FollowNormal=0]="FollowNormal",e[e.FollowPrivate=1]="FollowPrivate",e[e.FollowFollower=2]="FollowFollower",e[e.Unfollow=3]="Unfollow"}(T||(T={}));const R=["roomId"],B=["uniqueId","avatarThumb","nickname","signature"];let N=class extends s.D{constructor(e,t){super(),this.service=e,this.t=t,this.defaultState={users:{},stats:{}}}multiSetUser(e,t){const i={};return t.forEach((t=>{i[t.uniqueId]=this.getUpdatedUser(e.users[t.uniqueId],t)})),Object.assign(Object.assign({},e),{users:Object.assign(Object.assign({},e.users),i)})}setUser(e,t){return Object.assign(Object.assign({},e),{users:Object.assign(Object.assign({},e.users),{[t.uniqueId]:this.getUpdatedUser(e.users[t.uniqueId],t,!0)})})}setUserRelation(e,{uniqueId:t,relation:i,shouldUpdateFollowed:o}){var n;const a=e.users[t];a&&(a.relation=i,o&&(a.extraInfo=Object.assign(Object.assign({},a.extraInfo),{followed:F(i,null===(n=a.extraInfo)||void 0===n?void 0:n.followed)})))}setUserStats(e,t){const{uniqueId:i,stats:o}=t;e.stats[i]=this.getUpdatedUserStats(e.stats[i],o)}multiSetUserStats(e,t){t.forEach((({uniqueId:t,stats:i})=>{e.stats[t]=i}))}getUserDetail(e){return e.pipe((0,y.w)((e=>this.service.getUserDetail(e).pipe((0,b.b)((e=>{(0!==e.statusCode&&10222!==e.statusCode||!e.userInfo)&&console.warn("Get user detail failed for getting wrong response")})),(0,f.z)((e=>0!==e.statusCode&&10222!==e.statusCode||!e.userInfo?m.E:(0,h.of)(this.getActions().setUser(Object.assign(Object.assign({},e.userInfo.user),{extraInfo:{statusCode:e.statusCode}})),this.getActions().setUserStats({stats:Object.assign(Object.assign({},e.userInfo.stats),{needFix:!1}),uniqueId:e.userInfo.user.uniqueId})))),(0,P.n)({})))))}postCommitFollowUser(e){return e.pipe((0,x.v)((({uniqueId:e})=>e)),(0,f.z)((e=>e.pipe((0,w.M)(this.state$),(0,k.U)((([e,t])=>{const i=t.users[e.uniqueId],{id:o,secUid:n="",relation:s=-1}=i,r=function(e){return A({relation:e,handleIsUnfollow:()=>1,handleIsFollow:()=>0})}(s),l={type:r,user_id:o,sec_user_id:n,from:18,channel_id:0,from_pre:0},{uniqueId:d,group_id:c,enter_method:u="click_direct_btn",action_position:p}=e;return{query:l,type:r,group_id:c,enter_method:u,action_position:p,restReportParams:(0,a.__rest)(e,["uniqueId","group_id","enter_method","action_position"]),id:o,uniqueId:d,relation:s,targetUser:i}})),(0,y.w)((({query:e,group_id:t,enter_method:i,action_position:o,restReportParams:n,id:a,uniqueId:s,relation:r,targetUser:l})=>this.service.postCommitFollowUser(e).pipe((0,b.b)((({status_code:s,follow_status:r})=>{24===s?I.h.open({content:this.t("inbox_follow_failed_banned"),duration:3,widthType:"half"}):-1===s?I.h.open({content:this.t("inbox_follow_failed_noconnection"),duration:3,widthType:"half"}):0!==s?I.h.open({content:this.t("inbox_follow_failed_other"),duration:3,widthType:"half"}):(0,O.k)(s,[24,-1,0]),((e,t)=>{const i=0===t?"unfollow":"follow";j.W.event(i,e)})(Object.assign(Object.assign({},n),{status_code:s,follow_status:r,group_id:t,enter_method:i,action_position:o,to_user_id:a,author_id:a,follow_type:2===r?"mutual":"single",is_private:4===r?1:0}),e.type)})),(0,k.U)((({follow_status:e,status_code:t})=>0===t?this.getActions().setUserRelation({uniqueId:s,relation:M.Bm[e],shouldUpdateFollowed:!0}):this.getActions().setUserRelation({uniqueId:s,relation:r}))),(0,S.O)(this.getActions().setUserRelation({uniqueId:s,relation:D({current:r,targetUser:l})})),(0,P.n)({}))))))))}blockOrUnblockUser(e){return e.pipe((0,C.z)((({secUid:e,isBlock:t,uniqueId:i})=>this.service.blockUser({sec_user_id:null!=e?e:"",block_type:t?0:1}).pipe((0,b.b)((({status_code:e})=>{0===e&&I.h.open({content:this.t(t?"webapp_mig_unblocked":"webapp_mig_blocked"),duration:3,e2eTag:"block-toast"})})),(0,k.U)((({status_code:e})=>0===e?this.getActions().setUserRelation({uniqueId:i,relation:t?0:4}):this.noop())),(0,P.n)({})))))}getLiveStatus(e){return e.pipe((0,y.w)((()=>(0,_.F)(6e5).pipe((0,w.M)(this.state$),(0,k.U)((([e,{users:t}])=>Object.values(t).filter((e=>Boolean(null==e?void 0:e.roomId))))),(0,f.z)((e=>(0,h.of)(...e.map((e=>this.getActions().getUserDetail({secUid:null==e?void 0:e.secUid}))))))))))}getUpdatedUser(e,t,i){var o,n;if(!e)return t;const a=null!==(o=t.relation)&&void 0!==o?o:e.relation;return g()({},e,t,{extraInfo:{followed:F(a,null===(n=e.extraInfo)||void 0===n?void 0:n.followed)}},((e,t,o)=>"canExpPlaylist"===o?e||t:!R.includes(o)&&u()(t)||!i&&B.includes(o)?e:"uniqueIdModifyTime"!==o&&"ttSeller"!==o&&"nickNameModifyTime"!==o||t?void 0:e))}getUpdatedUserStats(e,t){return t}};(0,a.__decorate)([(0,r.j)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Array]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"multiSetUser",null),(0,a.__decorate)([(0,r.j)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"setUser",null),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"setUserRelation",null),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"setUserStats",null),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Array]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"multiSetUserStats",null),(0,a.__decorate)([(0,r.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[v.y]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"getUserDetail",null),(0,a.__decorate)([(0,r.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[v.y]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"postCommitFollowUser",null),(0,a.__decorate)([(0,r.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[v.y]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"blockOrUnblockUser",null),(0,a.__decorate)([(0,r.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[v.y]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"getLiveStatus",null),N=(0,a.__decorate)([(0,l.Y)("UserModule"),(0,a.__param)(1,(0,d.t)(L.s$)),(0,a.__metadata)("design:paramtypes",[E.K,Function])],N)},10410:(e,t,i)=>{i.d(t,{K:()=>r});var o=i(64047),n=i(57244),a=i(70526),s=i(18645);let r=class{constructor(e){this.fetch=e}getUserDetail(e){return this.fetch.get("/api/user/detail/",{query:e})}postCommitFollowUser(e){return this.fetch.post("/api/commit/follow/user/",{query:Object.assign(Object.assign({},e),{fromWeb:1}),baseUrlType:2,headers:{[a.eD]:this.fetch.csrfToken}})}blockUser(e){return this.fetch.post("/api/user/block/",{query:Object.assign(Object.assign({},e),{source:3}),baseUrlType:2,headers:{[a.eD]:this.fetch.csrfToken}})}};r=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[s.r])],r)},51963:(e,t,i)=>{i.d(t,{e:()=>r});var o=i(64047),n=i(73566),a=i(48185),s=i(19630);let r=class extends n.D{constructor(){super(...arguments),this.defaultState={enterForyou:!1}}setEnterForyou(e,t){e.enterForyou=t}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],r.prototype,"setEnterForyou",null),r=(0,o.__decorate)([(0,s.Y)("VideoAsForyou")],r)},38554:(e,t,i)=>{i.d(t,{P:()=>_});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(49584),l=i(82346),d=i(56979),c=i(60595),u=i(3148),p=i(57244),g=i(70526),h=i(18645);let m=class{constructor(e){this.fetch=e}postUserSetting(e){return this.fetch.post("/api/user/set/settings/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken}),headers:{[g.eD]:this.fetch.csrfToken},baseUrlType:2})}};m=(0,o.__decorate)([(0,p.G)(),(0,o.__metadata)("design:paramtypes",[h.r])],m);let _=class extends n.D{constructor(e){super(),this.service=e,this.defaultState={photoSensitiveVideosSetting:u.F3.getItem("photo_sensitive_video_setting"),hideMaskTempVideoId:"",loginStatePhotoSensitiveVideosSetting:void 0,hasClosedVideoMask:!1}}setSkipPhotoSensitiveAction(e,t){const{skipPhotoSensitiveVideo:i,login:o=!1}=t,n=i?1:2;e.photoSensitiveVideosSetting=n,o&&(e.loginStatePhotoSensitiveVideosSetting=n)}setHideMaskTempVideoId(e,t){e.hideMaskTempVideoId=t}setHasClosedMask(e,t){e.hasClosedVideoMask=t}setPhotoSensitiveVideosSetting(e,t){e.photoSensitiveVideosSetting=t}setLoginStatePhotoSensitiveVideosSetting(e,t){e.loginStatePhotoSensitiveVideosSetting=t}setSkipPhotoSensitive(e){return e.pipe((0,r.z)((({skip:e,hasLogin:t})=>{const i=e?1:2;return u.F3.setItem("photo_sensitive_video_setting",i),t?this.service.postUserSetting({field:"photosensitive_videos_setting",value:i}).pipe((0,d.U)((({status_code:t})=>0===t?this.getActions().setSkipPhotoSensitiveAction({skipPhotoSensitiveVideo:e,login:!0}):this.noop()))):(0,l.of)(this.getActions().setSkipPhotoSensitiveAction({skipPhotoSensitiveVideo:e}))})))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"setSkipPhotoSensitiveAction",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"setHideMaskTempVideoId",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"setHasClosedMask",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"setPhotoSensitiveVideosSetting",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"setLoginStatePhotoSensitiveVideosSetting",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"setSkipPhotoSensitive",null),_=(0,o.__decorate)([(0,s.Y)("VideoMaskModule"),(0,o.__metadata)("design:paramtypes",[m])],_)},25582:(e,t,i)=>{i.d(t,{W:()=>s});var o=i(12579),n=i(43226),a=i.n(n);const s={provide:new o.O("FirstVideoCover"),useValue:a()}},33966:(e,t,i)=>{i.d(t,{n:()=>W,h:()=>q});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(35167),l=(i(48148),i(29974)),d=i.n(l),c=i(2600),u=i.n(c),p=i(82346),g=i(11348),h=i(58569),m=i(60595),_=i(68854),v=i(53095),y=i(5549),b=i(49584),f=i(93859),x=i(58755),w=i(20948),k=i(56979),S=i(35435),C=i(10026),j=i(12167),T=i(16594),I=i(33693),P=i(17130),O=i(45253),L=i(55198),M=i(66891),E=i(51917),A=i(97751),D=i(27160),F=i(38554),R=i(38310),B=i(25582),N=i(78922);const W=Object.freeze({statusCode:0,loading:!0,list:[],browserList:[],hasMore:!0,cursor:"0",preloadList:[]});let U=-1,q=class extends n.D{constructor(e,t,i,o,n,a,s){super(),this.service=e,this.item=t,this.videoQualityReporter=i,this.videoMask=o,this.seoModule=n,this.t=a,this.getFirstVideoCover=s,this.defaultState={},this.createItemListErrorCatcher=e=>t=>t.pipe((0,_.K)((t=>(L.h.destroy(),L.h.open({content:this.t("server_error_title"),duration:3,widthType:"padding"}),null==e||e(t),(0,p.of)({statusCode:-1}))))),this.getBrowserList=({list:e})=>e.reduce(((e,{id:t,showNotPass:i,takeDown:o})=>(!i&&6!==o&&t&&e.push(t),e)),[])}resetItemList(e,t){const{key:i,hasMore:o=!0,loading:n=!0,cursor:a="0"}=t;e[i]={list:[],browserList:[],loading:n,statusCode:0,hasMore:o,cursor:a,preloadList:[]}}addItemList(e,t){var i;const{key:o,list:n,statusCode:a=0,hasMore:s,cursor:r,level:l,preloadList:c}=t,p="topic"===o||"messages"===o;e[o]||(e[o]={list:[],browserList:[],loading:!1,statusCode:a,hasMore:Boolean(s),cursor:r,preloadList:[]});const g=e[o].list,h=u()(n,"id").filter((e=>!g.includes(e.id))),m=d()(e[o].list,h.map((({id:e})=>e)));e[o].list=p?g.concat(n.map((({id:e})=>e))):m,e[o].browserList=p?e[o].browserList.concat(this.getBrowserList({list:n})):d()(e[o].browserList,this.getBrowserList({list:h})),e[o].statusCode=a,e[o].hasMore=s,e[o].cursor=r,e[o].level=l,e[o].preloadList=(null!==(i=e[o].preloadList)&&void 0!==i?i:[]).concat(null!=c?c:[])}setItemListById(e,t){const{key:i,list:o,statusCode:n=0,hasMore:a=!0,cursor:s,level:r}=t;e[i]||(e[i]={list:[],browserList:[],loading:!1,statusCode:n,hasMore:Boolean(a),cursor:s,preloadList:[]}),e[i].list=o,e[i].browserList=o,e[i].statusCode=n,e[i].hasMore=a,e[i].cursor=s,e[i].level=r}removeItemListById(e,t){var i;const{key:o,groupId:n}=t;(null===(i=e[o])||void 0===i?void 0:i.list)&&(e[o].list=e[o].list.filter((e=>e!==n)))}setLoading(e,t){const{loading:i,key:o}=t;e[o]||(e[o]={list:[],browserList:[],loading:i,statusCode:0,hasMore:!0,cursor:"0"}),e[o].loading=i}setListKeyword(e,t){const{keyword:i,key:o}=t;e[o]||(e[o]={keyword:i,list:[],browserList:[],loading:!1,statusCode:0,hasMore:!0,cursor:"0"}),e[o].keyword=i}getRecommendList(e){return e.pipe((0,v.z)((e=>this.getRecommendList$(e).pipe((0,y.l)(this.terminate())))))}getRecommendList$(e){return(0,p.of)(e).pipe((0,b.z)((({itemId:e,key:t,disableReport:i,routeName:o,abTestVersion:n,language:a,user:s,fromPage:r,pullType:l=2})=>(0,p.of)(null).pipe((0,f.b)((()=>{i||(U=Date.now(),this.videoQualityReporter.videoFeedRequestEvent())})),(0,v.z)((()=>{const t=(0,T.s)(a),i={aid:A.CO,count:A.lK,insertedItemID:e,language:t,clientABVersions:null==n?void 0:n.versionName,pullType:l};return r&&Object.assign(i,{from_page:r}),this.service.getRecommendList(i)})),(0,x.V)(A.ES),(0,f.b)((e=>{var t,o;i||this.videoQualityReporter.videoFeedResponseEvent({duration:Date.now()-U,list_length:null!==(o=null===(t=e.itemList)||void 0===t?void 0:t.length)&&void 0!==o?o:0})})),this.createItemListErrorCatcher(),this.handleListData({key:t,abTestVersion:n,language:a,user:s,onResponse:e=>this.searchbotSSROptimize(o,e,a)})))))}getRelatedList(e){return e.pipe((0,v.z)((e=>this.getRelatedList$(e).pipe((0,y.l)(this.terminate())))))}getRelatedList$(e){return(0,p.of)(e).pipe((0,w.M)(this.state$),(0,k.U)((([e,t])=>{var i;return Object.assign(Object.assign({},e),{loading:null===(i=t[e.key])||void 0===i?void 0:i.loading})})),(0,b.z)((({itemId:e="",key:t,disableReport:i,abTestVersion:o,language:n,user:a,loading:s})=>s?g.E:(0,p.of)(null).pipe((0,f.b)((()=>{i||(U=Date.now(),this.videoQualityReporter.videoFeedRequestEvent())})),(0,v.z)((()=>{const t=(0,T.s)(n);return this.service.getRelatedList({aid:A.CO,count:16,itemID:e,language:t})})),(0,x.V)(A.ES),(0,k.U)((e=>Object.assign(Object.assign({},e),{hasMore:!0}))),(0,f.b)((e=>{var t,o;i||this.videoQualityReporter.videoFeedResponseEvent({duration:Date.now()-U,list_length:null!==(o=null===(t=e.itemList)||void 0===t?void 0:t.length)&&void 0!==o?o:0})})),this.createItemListErrorCatcher(),this.handleListData({key:t,abTestVersion:o,language:n,user:a})))))}getTopicList(e){return e.pipe((0,S.w)((({topic:e,abTestVersion:t,user:i,language:o})=>this.service.getTopicList({topic:e,language:o,count:A._T,aid:A.CO}).pipe((0,k.U)((e=>Object.assign(Object.assign({},e),{hasMore:!0}))),this.createItemListErrorCatcher(),this.handleListData({key:"topic",abTestVersion:t,user:i,language:o}),(0,y.l)(this.terminate())))))}getFollowingList(e){return e.pipe((0,w.M)(this.state$),(0,b.z)((([{pullType:e=1,abTestVersion:t,user:i,language:o},n])=>{var a;const{cursor:s="",level:r=1}=null!==(a=n.following)&&void 0!==a?a:{};return this.service.getFollowingList({aid:A.CO,count:A.kg,language:o,cursor:s,pullType:e,level:r,isResetCounterUsed:!0}).pipe(this.createItemListErrorCatcher(),this.handleListData({key:"following",language:o,user:i,abTestVersion:t}))})))}getMusicList(e){return e.pipe((0,v.z)((e=>this.getMusicList$(e))))}getMusicList$(e){return(0,p.of)(e).pipe((0,w.M)(this.state$),(0,b.z)((([{musicID:e,abTestVersion:t,language:i,user:o},n])=>{var a,s;return this.service.getMusicList({musicID:e,language:i,cursor:null!==(s=null===(a=n.music)||void 0===a?void 0:a.cursor)&&void 0!==s?s:"0",aid:A.CO,count:A.eQ}).pipe(this.createItemListErrorCatcher(),this.handleListData({key:"music",abTestVersion:t,user:o,language:i}))})))}getQuestionList(e){return e.pipe((0,v.z)((e=>this.getQuestionList$(e))))}getQuestionList$(e){return(0,p.of)(e).pipe((0,w.M)(this.state$),(0,b.z)((([{questionID:e,abTestVersion:t,language:i,user:o},n])=>{var a,s;return this.service.getQuestionList({questionID:e,language:i,cursor:null!==(s=null===(a=n.question)||void 0===a?void 0:a.cursor)&&void 0!==s?s:"0",aid:A.CO,count:A.eQ}).pipe(this.createItemListErrorCatcher(),this.handleListData({key:"question",abTestVersion:t,language:i,user:o}))})))}getPlaylistVideoList(e){return e.pipe((0,v.z)((e=>this.getPlaylistVideoList$(e))))}getPlaylistVideoList$(e,t){return(0,p.of)(e).pipe((0,w.M)(this.state$),(0,b.z)((([{mixId:e,key:i,abTestVersion:o,language:n,user:a},s])=>{var r,l;return this.service.getPlaylistVideoList({mixId:e,language:n,cursor:null!==(l=null===(r=s[null!=i?i:e])||void 0===r?void 0:r.cursor)&&void 0!==l?l:"0",aid:A.CO,count:A.eQ}).pipe(this.createItemListErrorCatcher(),(0,f.b)((e=>{var i;return null===(i=null==t?void 0:t.onVideoList)||void 0===i?void 0:i.call(t,e.itemList)})),this.handleListData({key:null!=i?i:e,abTestVersion:o,language:n,user:a}))})))}getCollectionList(e){return e.pipe((0,v.z)((e=>this.getCollectionList$(e))))}getCollectionList$(e){return(0,p.of)(e).pipe((0,w.M)(this.state$),(0,b.z)((([{collectionId:e,abTestVersion:t,language:i,user:o},n])=>{var a,s;return this.service.getCollectionList({collectionId:e,language:i,cursor:null!==(s=null===(a=n.collection)||void 0===a?void 0:a.cursor)&&void 0!==s?s:"0",aid:A.CO,count:A.eQ,sourceType:113}).pipe(this.createItemListErrorCatcher(),this.handleListData({key:"collection",abTestVersion:t,language:i,user:o}))})))}getChallengeList(e){return e.pipe((0,v.z)((e=>this.getChallengeList$(e))))}getChallengeList$(e){return(0,p.of)(e).pipe((0,w.M)(this.state$),(0,b.z)((([{challengeID:e,abTestVersion:t,language:i,user:o},n])=>{var a,s;return this.service.getChallengeList({challengeID:e,language:i,cursor:null!==(s=null===(a=n.challenge)||void 0===a?void 0:a.cursor)&&void 0!==s?s:"0",aid:A.CO,count:A.eQ}).pipe(this.createItemListErrorCatcher(),this.handleListData({key:"challenge",abTestVersion:t,language:i,user:o}))})))}getUserVideoList(e){return e.pipe((0,v.z)((e=>this.getUserVideoList$(e))))}getUserVideoList$(e,t){return(0,p.of)(e).pipe((0,w.M)(this.state$),(0,S.w)((([{secUid:e,key:i,userId:o,abTestVersion:n,language:a,user:s},r])=>{var l,d;const c={secUid:e,aid:A.CO,count:A.jd,cursor:null!==(d=null===(l=r[i])||void 0===l?void 0:l.cursor)&&void 0!==d?d:"0",language:a,userId:o};let u;switch(i){case"user-post":default:u=this.service.getUserPostList(c);break;case"user-liked":u=this.service.getUserLikedList(c);break;case"favorites":u=this.service.getUserFavoriteList(c)}return u.pipe(this.createItemListErrorCatcher(),(0,f.b)((e=>{var i;return null===(i=null==t?void 0:t.onVideoList)||void 0===i?void 0:i.call(t,e.itemList)})),this.handleListData({key:i,abTestVersion:n,language:a,user:s,otherInfo:{secUid:e}}))})))}getUserVideoListByType(e){return e.pipe((0,v.z)((e=>this.getUserVideoListByType$(e))))}getUserVideoListByType$(e){return(0,p.of)(e).pipe((0,w.M)(this.state$),(0,S.w)((([{count:e=A.jd,postItemType:t=2,key:i,abTestVersion:o,language:n,user:a},s])=>{var r,l;const d={appId:A.CO,count:e,cursor:null!==(l=null===(r=s[i])||void 0===r?void 0:r.cursor)&&void 0!==l?l:"0",language:n,postItemType:t};return this.service.getUserPostListByType(d).pipe(this.createItemListErrorCatcher(),this.handleListData({key:i,abTestVersion:o,language:n,user:a,otherInfo:{secUid:null==a?void 0:a.secUid}}))})))}getPoiList(e){return e.pipe((0,v.z)((e=>this.getPoiList$(e))))}getPoiList$(e){return(0,p.of)(e).pipe((0,w.M)(this.state$),(0,b.z)((([{poiId:e,abTestVersion:t,language:i,user:o},n])=>{var a,s;return this.service.getPoiList({poiId:e,language:i,cursor:null!==(s=null===(a=n.poi)||void 0===a?void 0:a.cursor)&&void 0!==s?s:"0",aid:A.CO,count:A.eQ}).pipe(this.createItemListErrorCatcher(),this.handleListData({key:"poi",abTestVersion:t,user:o,language:i}))})))}getExploreList(e){return e.pipe((0,S.w)((e=>this.getExploreList$(e).pipe((0,y.l)(this.terminate())))))}getExploreList$(e){return(0,p.of)(e).pipe((0,w.M)(this.state$),(0,S.w)((([{categoryType:e,abTestVersion:t,language:i,user:o}])=>this.service.getExploreList({language:i,aid:A.CO,count:16,categoryType:e}).pipe(this.createItemListErrorCatcher(),this.handleListData({key:"explore",abTestVersion:t,user:o,language:i})))))}setDeleteVideo(e,t){for(const i of Object.keys(e)){const o=e[i];if(o){const n=o.list.filter((e=>e!==t));e[i].list=n,e[i].browserList=o.browserList.filter((e=>e!==t))}}}deleteLiveItem(e,t){for(const i of Object.keys(e)){const o=e[i];if(o){const e=o.list.filter((e=>e!==t));o.list=e,o.browserList=o.browserList.filter((e=>e!==t))}e[i]=o}}setList(e){return e.pipe((0,w.M)(this.state$,this.videoMask.state$),(0,f.b)((([{key:e,response:t,disableReportMore:i=!1},o])=>{var n,a,s;(null!==(a=null===(n=o[e])||void 0===n?void 0:n.list)&&void 0!==a?a:[]).length&&!i&&P.r.handleListMore({is_success:(null===(s=t.itemList)||void 0===s?void 0:s.length)?1:0,error_code:t.statusCode})})),(0,k.U)((([{key:e,response:t,otherInfo:i,user:o},n,a])=>{var s,r;const l=null!==(r=null!==(s=t.itemList)&&void 0!==s?s:t.items)&&void 0!==r?r:[];return t.itemList||(t.itemList=l),1!==(null==o?void 0:o.photoSensitiveVideosSetting)&&(o||1!==a.photoSensitiveVideosSetting)||"user-post"===e&&(null==o?void 0:o.secUid)===(null==i?void 0:i.secUid)||!("video"!==e||l.length>1)||(t.itemList=l.filter((e=>2===e.containerType||4!==(null==e?void 0:e.maskType)))),t.itemList=t.itemList.map((e=>{var t;return(0,E.c9)(e)&&(e.id=(0,E.PA)(null===(t=e.liveRoomInfo)||void 0===t?void 0:t.roomID)),e})),{key:e,response:t}})),(0,f.b)((({key:e,response:t})=>{})),(0,v.z)((({key:e,response:t})=>{const{log_pb:i,itemList:o=[],statusCode:n=0,hasMore:a=!1,cursor:s="0",level:r}=t,l=o.filter((e=>2!==e.containerType)).map((e=>{var t,i,o,n;return{url:null!==(i=null===(t=e.video)||void 0===t?void 0:t.playAddr)&&void 0!==i?i:"",id:null!==(n=null===(o=e.video)||void 0===o?void 0:o.id)&&void 0!==n?n:""}}));return 0===n||10404===n?(0,p.of)(...this.item.addItems(o,null==i?void 0:i.impr_id),this.getActions().addItemList({key:e,list:o,statusCode:n,hasMore:a,cursor:s,level:r,preloadList:l})):(0,p.of)(this.getActions().addItemList({key:e,list:[],statusCode:n,hasMore:!0,preloadList:l}))})))}handleListData({key:e,abTestVersion:t,language:i,user:o,otherInfo:n,onResponse:a}){return s=>s.pipe((0,x.V)(A.ES),(0,v.z)((s=>{var r;return(0,h.T)((0,p.of)(this.getActions().setList({key:e,response:s,otherInfo:n,abTestVersion:t,language:i,user:o})),null!==(r=null==a?void 0:a(s))&&void 0!==r?r:(0,p.of)(this.noop()))})),(0,C.O)(this.getActions().setLoading({key:e,loading:!0})),(0,y.l)(this.getActions().setLoading({key:e,loading:!1})),(0,j.R)(this.dispose$))}searchbotSSROptimize(e,t,i){return e===I.Ur.foryou?this.seoModule.setForyouSEOProps(t,{language:null!=i?i:"en"}):[I.Ur.home,I.Ur.foryouWithLang].includes(e)?this.seoModule.setHomeSEOProps(null!=i?i:"en"):(0,p.of)(this.noop())}};(0,o.__decorate)([(0,a.cQ)(),(0,o.__metadata)("design:type",m.y)],q.prototype,"dispose$",void 0),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],q.prototype,"resetItemList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],q.prototype,"addItemList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],q.prototype,"setItemListById",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],q.prototype,"removeItemListById",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],q.prototype,"setLoading",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],q.prototype,"setListKeyword",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[m.y]),(0,o.__metadata)("design:returntype",void 0)],q.prototype,"getRecommendList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[m.y]),(0,o.__metadata)("design:returntype",void 0)],q.prototype,"getRelatedList",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[m.y]),(0,o.__metadata)("design:returntype",void 0)],q.prototype,"getTopicList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[m.y]),(0,o.__metadata)("design:returntype",void 0)],q.prototype,"getFollowingList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[m.y]),(0,o.__metadata)("design:returntype",void 0)],q.prototype,"getMusicList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[m.y]),(0,o.__metadata)("design:returntype",void 0)],q.prototype,"getQuestionList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[m.y]),(0,o.__metadata)("design:returntype",void 0)],q.prototype,"getPlaylistVideoList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[m.y]),(0,o.__metadata)("design:returntype",m.y)],q.prototype,"getCollectionList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[m.y]),(0,o.__metadata)("design:returntype",void 0)],q.prototype,"getChallengeList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[m.y]),(0,o.__metadata)("design:returntype",void 0)],q.prototype,"getUserVideoList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[m.y]),(0,o.__metadata)("design:returntype",void 0)],q.prototype,"getUserVideoListByType",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[m.y]),(0,o.__metadata)("design:returntype",void 0)],q.prototype,"getPoiList",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[m.y]),(0,o.__metadata)("design:returntype",void 0)],q.prototype,"getExploreList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],q.prototype,"setDeleteVideo",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],q.prototype,"deleteLiveItem",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[m.y]),(0,o.__metadata)("design:returntype",void 0)],q.prototype,"setList",null),q=(0,o.__decorate)([(0,s.Y)("ItemList"),(0,o.__param)(5,(0,r.t)(M.s$)),(0,o.__param)(6,(0,r.t)(B.W.provide)),(0,o.__metadata)("design:paramtypes",[N.N,R.A,O.k,F.P,D.q,Function,Function])],q)},78922:(e,t,i)=>{i.d(t,{N:()=>l});var o=i(64047),n=i(57244),a=i(14716),s=i(18645),r=i(25582);let l=class{constructor(e){this.fetch=e}getCollectionList(e){return this.fetch.get("/api/collection/item_list/",{query:e,baseUrlType:2})}getRecommendList(e){if(window.__preload_item_list){const e=window.__preload_item_list;return delete window.__preload_item_list,(0,a.D)(e)}return this.fetch.get("/api/recommend/item_list/",{query:e,baseUrlType:2})}getRelatedList(e){return this.fetch.get("/api/related/item_list/",{query:e,baseUrlType:2})}getTopicList(e){return this.fetch.get("/api/topic/item_list/",{query:e,baseUrlType:2})}getFollowingList(e){return this.fetch.get("/api/following/item_list/",{query:e,baseUrlType:2})}getMusicList(e){return this.fetch.get("/api/music/item_list/",{query:e,baseUrlType:2})}getQuestionList(e){return this.fetch.get("/api/question/item_list/",{query:e,baseUrlType:2})}getPlaylistVideoList(e){return this.fetch.get("/api/mix/item_list/",{query:e,baseUrlType:2})}getChallengeList(e){return this.fetch.get("/api/challenge/item_list/",{query:e,baseUrlType:2})}getUserPostList(e){return this.fetch.get("/api/post/item_list/",{query:e,baseUrlType:2})}getUserPostListByType(e){return this.fetch.get("/api/post/item_list/v1/",{query:e,baseUrlType:2})}getUserLikedList(e){return this.fetch.get("/api/favorite/item_list/",{query:e,baseUrlType:2})}getUserFavoriteList(e){return this.fetch.get("/api/user/collect/item_list/",{query:e,baseUrlType:2})}getPoiList(e){return this.fetch.get("/api/poi/item_list/",{query:e,baseUrlType:2})}getExploreList(e){return this.fetch.get("/api/explore/item_list/",{query:e,baseUrlType:2})}};l=(0,o.__decorate)([(0,n.G)({providers:[r.W]}),(0,o.__metadata)("design:paramtypes",[s.r])],l)},38310:(e,t,i)=>{i.d(t,{A:()=>U});var o,n=i(64047),a=i(73566),s=i(48185),r=i(19630),l=i(35167),d=i(67929),c=i.n(d),u=i(94328),p=i(82346),g=i(5238),h=i(11348),m=i(60595),_=i(35435),v=i(53095),y=i(56979),b=i(20948),f=i(93859),x=i(10026),w=i(96033),k=i(45784),S=i(57709),C=i(68854),j=i(95872);!function(e){e.Like="like",e.LikeCancel="like_cancel"}(o||(o={}));const T=(e,t)=>{const i=1===t?"like":"like_cancel";j.W.event(i,e)};var I=i(78662),P=i(66826),O=i(55198),L=i(21005),M=i(66891),E=i(51917),A=i(97751),D=i(47416),F=i(66599),R=i(57244),B=i(70526),N=i(18645);let W=class{constructor(e){this.fetch=e}postLikeVideo(e){return this.fetch.post("/api/commit/item/digg/",{query:e,baseUrlType:2,headers:{[B.eD]:this.fetch.csrfToken}})}collectVideo(e){return this.fetch.post("/api/item/collect/",{query:e,baseUrlType:2,headers:{[B.eD]:this.fetch.csrfToken}})}};W=(0,n.__decorate)([(0,R.G)(),(0,n.__metadata)("design:paramtypes",[N.r])],W);let U=class extends a.D{constructor(e,t,i,o){super(),this.service=e,this.browserModeService=t,this.userModule=i,this.t=o,this.defaultState={}}setItem(e,t){var i,o,n,a,s,r,l,d,c,u,p,g,h;e[t.id]=Object.assign(Object.assign({},t),{nickname:null===(i=t.author)||void 0===i?void 0:i.nickname,author:null===(o=t.author)||void 0===o?void 0:o.uniqueId,authorId:null===(n=t.author)||void 0===n?void 0:n.id,authorSecId:null===(a=t.author)||void 0===a?void 0:a.secUid,avatarThumb:null===(s=t.author)||void 0===s?void 0:s.avatarThumb,downloadSetting:null===(r=t.author)||void 0===r?void 0:r.downloadSetting,authorPrivate:null===(l=t.author)||void 0===l?void 0:l.privateAccount,stateControlledMedia:null===(d=t.author)||void 0===d?void 0:d.stateControlledMedia,capcutAnchors:(null===(c=null==t?void 0:t.poi)||void 0===c?void 0:c.id)?[]:null!==(p=null===(u=null==t?void 0:t.anchors)||void 0===u?void 0:u.filter((e=>54===e.type)))&&void 0!==p?p:[],videoSuggestWordsList:null!==(g=t.videoSuggestWordsList)&&void 0!==g?g:null===(h=e[t.id])||void 0===h?void 0:h.videoSuggestWordsList})}updateItem(e,t){e[t.id]&&(e[t.id]=c()(e[t.id],t))}multiSetItem(e,t){t.forEach((t=>this.setItem(e,t)))}setLike(e,t){const{id:i,liked:o,count:n}=t,a=e[i];a&&(a.digged=o,a.stats&&(a.stats.diggCount=n))}setCollect(e,t){const{id:i,collected:o,count:n}=t,a=e[i];a&&(a.collected=o,a.stats&&(a.stats.collectCount=n))}setCommentCount(e,t){const{id:i,commentCount:o}=t,n=e[i];(null==n?void 0:n.stats)&&(n.stats.commentCount=o)}closeTT4BAdsPopup(e,t){const i=e[t];i&&(i.isTT4BAdsPopupClosed=!0)}reduceOrIncreaseCommentCount(e,t){const{id:i,isReduce:o,min:n=0}=t,a=e[i];if(null==a?void 0:a.stats){const e=o?Math.max(n,a.stats.commentCount-1):a.stats.commentCount+1;a.stats.commentCount=e}}addItems(e,t){const i=e.filter((e=>Boolean(e.author))).map((({author:e})=>e)),o=e.filter((e=>{var t;return Boolean((null===(t=null==e?void 0:e.liveRoomInfo)||void 0===t?void 0:t.ownerInfo)&&(0,E.c9)(e))})).map((e=>Object.assign(Object.assign({},e.liveRoomInfo.ownerInfo),{roomId:e.liveRoomInfo.roomID}))),n=e.map((e=>Object.assign(Object.assign({},e),{logId:t})));return[this.userModule.getActions().multiSetUser(i.concat(o)),this.getActions().multiSetItem(n)]}addItems$(e){return e.pipe((0,_.w)((e=>this.addItems(e))))}postClickAds(e){return e.pipe((0,v.z)((e=>{const{language:t,type:i}=e;return this.browserModeService.postAdsAction({biz:1,type:i,language:t}).pipe((0,y.U)((({status_code:e,statusCode:t})=>(0===e&&0===t||console.warn("postClickAds failed"),this.noop()))),(0,L.n)({}))})))}postCollectVideo(e){return e.pipe((0,b.M)(this.state$,this.userModule.state$),(0,y.U)((([e,t,i])=>{var o,n,a,s;const{itemId:r}=e,l=t[r],d=i.users[null!==(o=null==l?void 0:l.author)&&void 0!==o?o:""],{collected:c=!1,stats:u}=l,p=c?2:1;return{collectCount:Number(null!==(n=null==u?void 0:u.collectCount)&&void 0!==n?n:0),collected:c,action:p,query:{aid:A.CO,itemId:r,action:p,secUid:null!==(a=null==d?void 0:d.secUid)&&void 0!==a?a:""},group_id:r,author_id:null!==(s=null==d?void 0:d.id)&&void 0!==s?s:""}})),(0,v.z)((({collectCount:e,collected:t,query:i,group_id:o,author_id:n,action:a})=>this.service.collectVideo(i).pipe((0,f.b)((()=>{I.d.handleFavoriteResult({group_id:o,author_id:n},a)})),(0,v.z)((i=>{const{statusCode:n}=i;return 0!==n?(0,u.H)(3e3).pipe((0,y.U)((()=>this.getActions().setCollect({id:o,collected:t,count:e})))):(0,p.of)(this.noop())})),(0,x.O)(this.getActions().setCollect({id:o,collected:!t,count:t?Math.max(0,e-1):e+1})),(0,L.n)({})))))}postLikeVideo(e){return e.pipe((0,w.v)((({id:e})=>e)),(0,v.z)((e=>{const t=new g.X(0);return e.pipe((0,b.M)(this.state$,this.userModule.state$,t),(0,v.z)((([e,t,i,o])=>{var a,s,r;const{isTT4BAds:l,language:d,play_mode:c}=e,u=t[e.id],g=i.users[null!==(a=null==u?void 0:u.author)&&void 0!==a?a:""],{digged:m,stats:_,poi:v,imagePost:y,subVideoMeta:b}=u,{id:f,forceLike:x,enter_method:w="click",channel_id:k}=e,S=(0,n.__rest)(e,["id","forceLike","enter_method","channel_id"]),C=null!==(s=null==_?void 0:_.diggCount)&&void 0!==s?s:0,j={aweme_id:f,channel_id:k,type:x?1:m?0:1};return x&&m?h.E:(0,p.of)({query:j,enter_method:w,diggCount:C,digged:m,author_id:null!==(r=null==g?void 0:g.id)&&void 0!==r?r:"",group_id:u.id,poi_id:null==v?void 0:v.id,restReportParams:S,changeKey:`${j.type}_${o}`,isTT4BAds:l,language:d,imagePost:y,play_mode:c,is_sub_only_video:b?1:0})})),(0,k.g)("changeKey"),(0,_.w)((({language:e,isTT4BAds:i,play_mode:o,query:n,enter_method:a,diggCount:s,author_id:r,group_id:l,digged:d,poi_id:c,imagePost:g,is_sub_only_video:h,restReportParams:m})=>{let _=!1;const b=(0,u.H)(3e3).pipe((0,y.U)((()=>this.getActions().setLike({id:l,liked:d,count:s}))),(0,S.x)((()=>{const e=t.getValue();t.next(e+1)}))),w=this.getActions().setLike({id:l,liked:!d,count:d?Math.max(0,s-1):s+1});return i?this.browserModeService.postAdsAction({biz:1,type:d?2:1,language:null!=e?e:"en"}).pipe((0,f.b)((()=>{P.Y.handleAdsClick("like_button",null!=o?o:"one_column")})),(0,v.z)((e=>{const{status_code:t,statusCode:i}=e;return 0!==t||0!==i?b:(0,p.of)(this.noop())})),(0,x.O)(w),(0,L.n)({})):this.service.postLikeVideo(n).pipe((0,C.K)((()=>(0,p.of)({status_code:-1}))),(0,f.b)((({status_code:e,status_msg:t,log_pb:i={}})=>{var o;2150!==e&&2210!==e||t&&O.h.open({content:this.t(t),duration:3,widthType:"half"}),_=!0,T(Object.assign(Object.assign({},m),{group_id:l,author_id:r,log_pb:i,enter_method:a,poi_id:c,aweme_type:g?150:0,pic_cnt:null===(o=null==g?void 0:g.images)||void 0===o?void 0:o.length,is_sub_only_video:h}),n.type)})),(0,S.x)((()=>{var e;_||T(Object.assign(Object.assign({},m),{group_id:l,author_id:r,log_pb:{},enter_method:a,poi_id:c,aweme_type:g?150:0,pic_cnt:null===(e=null==g?void 0:g.images)||void 0===e?void 0:e.length,is_sub_only_video:h}),n.type)})),(0,v.z)((e=>{const{status_code:t,is_digg:i}=e;return 0!==t||i===n.type?b:(0,p.of)(this.noop())})),(0,x.O)(w),(0,L.n)({}))})))})))}setItemPrivateState(e,t){const{id:i,visibility:o}=t,n=e[i];if(!n)return e;n.forFriend="3"===o,n.secret="2"===o}setDeleteVideo(e,t){e[t]&&(e[t]=void 0)}};(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],U.prototype,"setItem",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],U.prototype,"updateItem",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Array]),(0,n.__metadata)("design:returntype",void 0)],U.prototype,"multiSetItem",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],U.prototype,"setLike",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],U.prototype,"setCollect",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],U.prototype,"setCommentCount",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,String]),(0,n.__metadata)("design:returntype",void 0)],U.prototype,"closeTT4BAdsPopup",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],U.prototype,"reduceOrIncreaseCommentCount",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[m.y]),(0,n.__metadata)("design:returntype",void 0)],U.prototype,"addItems$",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[m.y]),(0,n.__metadata)("design:returntype",void 0)],U.prototype,"postClickAds",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[m.y]),(0,n.__metadata)("design:returntype",m.y)],U.prototype,"postCollectVideo",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[m.y]),(0,n.__metadata)("design:returntype",void 0)],U.prototype,"postLikeVideo",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],U.prototype,"setItemPrivateState",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,String]),(0,n.__metadata)("design:returntype",void 0)],U.prototype,"setDeleteVideo",null),U=(0,n.__decorate)([(0,r.Y)("ItemModule"),(0,n.__param)(3,(0,l.t)(M.s$)),(0,n.__metadata)("design:paramtypes",[W,D.o,F.z,Function])],U)},61473:(e,t,i)=>{var o,n,a,s;i.d(t,{dg:()=>r,y8:()=>l}),function(e){e[e.TRILL=1180]="TRILL",e[e.MUSICALLY=1233]="MUSICALLY"}(o||(o={})),function(e){e.TRILL="t",e.MUSICALLY="m",e.LITE="lite"}(n||(n={})),function(e){e[e.Normal=0]="Normal",e[e.SmartPlayer=1]="SmartPlayer"}(a||(a={})),function(e){e[e.UNSET=0]="UNSET",e[e.CLOSE=1]="CLOSE",e[e.OPEN=2]="OPEN"}(s||(s={}));const r=[{name:"reasons_api_version",vid:["v2","v3"]},{name:"sharing_user_app_link",vid:["v1","v2"]},{name:"share_button_part1_test",vid:["v1","v2","v3","v4"]},{name:"video_feed_redesign",vid:["v1","v2","v3"]},{name:"expose_recharge_entry_pc",vid:["v1","v2","v3"]},{name:"live_detail_non_logged_in_entry",vid:["v1","v2","v3"]},{name:"live_top_viewers",vid:["v1","v2"]},{name:"live_dynamic_bg",vid:["v1","v2"]},{name:"live_player_enable_1080p",vid:["v1","v2"]},{name:"live_auto_definition_tips",vid:["v1","v2","v3"]},{name:"live_room_age_restriction",vid:["v1","v2","v3"]},{name:"live_feed_style",vid:["v1","v2","v3"]},{name:"live_feed_auto_play_3",vid:["v1","v2","v3"]},{name:"live_player_e2e_low_delay_preload_time_test",vid:["v1","v2","v3"]},{name:"show_player_stats_entry",vid:["v1","v2"]},{name:"live_player_codetype",vid:["v1","v2"]},{name:"live_lcp_perf_optimize",vid:["v1","v2","v3","v4"]},{name:"live_recharge_paypal_link_result_v2",vid:["v1","v2"]},{name:"live_recharge_cashier_v2",vid:["v1","v2"]},{name:"live_recharge_cashier_phase2",vid:["v1","v2"]},{name:"live_recharge_exchange",vid:["v1","v2"]},{name:"exempt_cvv_saved_card",vid:["v1","v2"]},{name:"live_first_frame_test",vid:["v1","v2"]},{name:"live_linked_mic_optimize",vid:["v1","v2"]},{name:"live_recharge_by_amount",vid:["v0","v1","v2"]},{name:"video_feed_mode_url_test",vid:["v1","v2"]},{name:"browser_device_id",vid:["v1"]},{name:"volume_normalize",vid:["v1","v2"]},{name:"video_serverpush",vid:["v1","v2"]},{name:"mobile_vodkit",vid:["v1","v2","v3","v4"]},{name:"xg_volume_test",vid:["v1","v2","v3","v4","v5"]},{name:"video_bitrate_adapt",vid:["v1","v2","v3"]},{name:"optimize_bot_ssr_count",vid:["v1","v2","v3","v4"]},{name:"sharing_video_page_render",vid:["v1","v2","v3","v4","v5"]},{name:"mobile_search_test",vid:["v1","v2"]},{name:"pumbaa_enable_test",vid:["v1","v2"]},{name:"sharing_now_product_intro",vid:["v1","v2","v3"]},{name:"tt4b_ads",vid:["v1","v2"]},{name:"studio_web_eh_entrance",vid:["v1","v2","v3"]},{name:"feed_csr",vid:["v1","v2"]},{name:"video_csr",vid:["v1","v2","v3"]},{name:"periodic_login_popup_interval",vid:["v1","v2","v3","v4","v5"]},{name:"kep_optimization_phase_3",vid:["v1","v2","v3","v4"]},{name:"kep_skeleton_opt",vid:["v1","v2","v3","v4","v5","v6","v7","v8"]},{name:"video_reflow_search_bar",vid:["v1","v2","v3"]},{name:"video_reflow_search_bar2",vid:["v1","v2","v3"]},{name:"cta_phase2",vid:["v1","v2"]},{name:"enable_slardar_image",vid:["v1","v2"]},{name:"explore_test",vid:["v1","v2","v3"]},{name:"search_video",vid:["v1","v2","v3","v4"]},{name:"favorite_test",vid:["v0","v1","v2"]},{name:"video_reflow_optimization",vid:["v1","v2","v3","v4","v5","v6","v7"]},{name:"video_crossorigin",vid:["v1","v2"]},{name:"webapp_vdc_scedule",vid:["v1","v2"]},{name:"has_system_notification_inbox",vid:["v1","v2"]},{name:"has_system_notification_inbox_mobile",vid:["v1","v2"]},{name:"search_add_live",vid:["v1","v2"]},{name:"video_reflow_andriod_call_phase2_time",vid:["v1","v2","v3","v4","v5"]},{name:"video_reflow_andriod_call_phase2_api",vid:["v1","v2"]},{name:"ui_layout_alignment",vid:["v1","v2","v3"]},{name:"search_transfer_history",vid:["v1","v2"]},{name:"search_transfer_guesssearch",vid:["v1","v2"]},{name:"search_bar_style_opt",vid:["v1","v2","v3"]},{name:"feed_data_cache",vid:["v1","v2","v3","v4"]},{name:"webapp_browser_mode_new_tab",vid:["v1","v2"]},{name:"qr_sso_popup",vid:["v1","v2","v3","v4","v5"]},{name:"mobile_ui_opt_ab",vid:["v1","v2","v3","v4","v5","v6","v7","v8"]},{name:"mobile_ui_opt_ab_phrase2",vid:["v1","v2","v3","v4","v5","v6","v7"]},{name:"search_entry_search_bar",vid:["v1","v2"]},{name:"search_entry_comment_top",vid:["v1","v2"]},{name:"facebook_login_reauthentication",vid:["v1","v2"]},{name:"use_inbox_notice_count_api",vid:["v1","v2"]},{name:"kep_hashtag_unification",vid:["v1","v2","v3","v4"]},{name:"browser_mode_creator_tab",vid:["v1","v2","v3"]},{name:"sidenav_test",vid:["v1","v2"]},{name:"creator_center_connect",vid:["v1","v2","v3"]},{name:"webapp_auto_refresh",vid:["v1","v2","v3"]},{name:"should_highlight_hashtag",vid:["v1","v2"]},{name:"browser_mode_video_controller",vid:["v1","v2"]},{name:"one_column_player_size",vid:["v1","v2"]},{name:"sign_up_webapp_region_change",vid:["v1","v2"]},{name:"webapp_preview_cover",vid:["v1","v2","v3","v4"]},{name:"video_detail_search_bar",vid:["v1","v2"]},{name:"search_entry_comment_word",vid:["v1","v2"]}],l=["is_ads_debug","pc_video_playlist","desktop_app","support_multiline_desc","feature_tt4b_ads","feature_mobile_ui_opt","feature_mobile_ui_opt_debug","feature_mobile_ui_opt_stage2","feature_mobile_cta_fix_bottom"]},46096:(e,t,i)=>{var o;i.d(t,{J:()=>o}),function(e){let t;!function(e){e.WebSite="WebSite",e.ItemList="ItemList",e.VideoObject="VideoObject",e.Page="Page",e.BreadcrumbList="BreadcrumbList",e.Person="Person",e.MusicRecording="MusicRecording",e.QAPage="QAPage",e.Event="Event",e.ListItem="ListItem",e.Thing="Thing"}(t=e.JsonldType||(e.JsonldType={}))}(o||(o={}))},22369:(e,t,i)=>{var o;i.d(t,{H:()=>o}),function(e){let t;!function(e){e[e.META_PATH=1]="META_PATH",e[e.META_EXP=2]="META_EXP",e[e.META_PAGE=3]="META_PAGE",e[e.JSONLD_PATH=4]="JSONLD_PATH",e[e.JSONLD_EXP=5]="JSONLD_EXP",e[e.JSONLD_PAGE=6]="JSONLD_PAGE"}(t=e.SERPProcessType||(e.SERPProcessType={}))}(o||(o={}))},21590:(e,t,i)=>{i.d(t,{o:()=>o,B:()=>n});const o="https://www.tiktok.com",n="https://sf-tb-sg.ibytedtos.com/obj/eden-sg/uhtyvueh7nulogpoguhm/tiktok-icon2.png"},66891:(e,t,i)=>{i.d(t,{LX:()=>s,s$:()=>r,lu:()=>l}),i(11040);var o=i(12579),n=i(48148),a=i.n(n);const s=(0,i(91051).createContext)({t:a(),hasLoaded:a(),loadStarling:a(),initialNamespaces:[],lang:""}),r=new o.O("i18n"),l="webapp.i18n-translation"},79067:(e,t,i)=>{i.d(t,{e:()=>s,c:()=>r});var o=i(11040),n=i(43226),a=i.n(n);const s=(0,i(91051).createContext)({sprites:new Map,add:a(),remove:()=>!1,serialize:()=>""}),r=function({context:e,children:t}){return(0,o.jsx)(s.Provider,Object.assign({value:e},{children:t}),void 0)}},99969:(e,t,i)=>{function o(e){let t=0;return e&&e.forEach((e=>{var i,o;t+=null!==(o=null===(i=null==e?void 0:e.stats)||void 0===i?void 0:i.playCount)&&void 0!==o?o:0})),t}function n(e){const t=["in","on","with","by","for","at","about","under","of","to","into","from","within","throughout","inside","outside","without","beside","behind","around","over","among"];return a(e).replace(/-/g," ").toLocaleLowerCase().split(" ").map((e=>"tiktok"===e?"TikTok":t.indexOf(e)>=0?e:e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}function a(e){return e.replace(/\x20/g,"-").toLocaleLowerCase()}function s(e){var t;return e&&e.length<=0?"":null!==(t=null==e?void 0:e.slice(0,6).map((e=>n(e.content))).join(", "))&&void 0!==t?t:""}i.d(t,{T4:()=>o,$K:()=>n,QQ:()=>a,Kf:()=>s})},85941:(e,t,i)=>{i.d(t,{bg:()=>I,Iu:()=>T,NI:()=>b,i8:()=>j,dS:()=>m,Ml:()=>k,T8:()=>_,Or:()=>x,kD:()=>g,EZ:()=>f,el:()=>S,WZ:()=>h,Ej:()=>y,LU:()=>C,g3:()=>w});var o=i(28626),n=i(94582),a=i(24864),s=i(97186),r=i(36488),l=i(11040),d=i(91051),c=i(79067);const u={id:"feed-toggle-85f8e41c",use:"feed-toggle-85f8e41c-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="feed-toggle-85f8e41c"><path d="M2.5 6.5A2.5 2.5 0 0 1 5 4h14a2.5 2.5 0 0 1 2.5 2.5v11A2.5 2.5 0 0 1 19 20H5a2.5 2.5 0 0 1-2.5-2.5v-11ZM13 6h6a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5h-6V6Zm-2 0H5a.5.5 0 0 0-.5.5v11a.5.5 0 0 0 .5.5h6V6Z" clip-rule="evenodd" /></symbol>'};function p(e){const t=(0,d.useContext)(c.e);return(0,d.useLayoutEffect)((()=>(t.add(u),()=>{t.remove("feed-toggle-85f8e41c")})),[]),(0,l.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,l.jsx)("use",{xlinkHref:"#feed-toggle-85f8e41c"},void 0)}),void 0)}const g=72,h=(0,o.Z)(a.w,{target:"e14l9ebt0"})((({extraTop:e=0,extraWidth:t,theme:{colors:i,direction:o}})=>[{top:r.Mz+e,bottom:"0",width:`${null!=t?t:356}px`,background:i.BGPrimary,position:"fixed",zIndex:99},(0,r.YJ)({direction:o,paddingEnd:"8px"}),(0,r.f1)({max:1071,style:{padding:"0 8px",width:`${g}px`,flex:`0 0 ${g}px`,borderRight:`1px solid ${i.LineSecondary}`,boxShadow:`0px 2px 8px ${i.ShadowSecondary}`}})]),"label:StyledScroll;"),m=(0,o.Z)("div",{target:"e14l9ebt1"})((({transStatus:e,extraWidth:t})=>{const i=e===n.d0||e===n.Ix;return[{position:"relative",width:`${null!=t?t:356}px`,flex:`0 0 ${null!=t?t:356}px`},(0,r.f1)({max:767,style:{zIndex:99,[`${h}`]:[null,i?{transition:"all 0.3s"}:null]}}),(0,r.f1)({max:1071,style:{width:`${g}px`,flex:`0 0 ${g}px`}})]}),"label:DivSideNavContainer;"),_=(0,o.Z)("div",{target:"e14l9ebt2"})((({theme:{direction:e}})=>[{flexShrink:0,padding:"20px 0 26px",boxSizing:"border-box",display:"flex",flexDirection:"column",alignItems:"stretch",minHeight:"100%"},(0,r.YJ)({direction:e,paddingStart:"8px"}),(0,r.f1)({max:1071,style:{padding:"12px 0 26px"}})]),"label:DivWrapper;"),v=({theme:e})=>[{position:"relative",display:"flex",justifyContent:"flex-start",alignItems:"center",padding:"8px",boxSizing:"border-box",borderRadius:"4px",fontSize:"32px",":hover":{textDecoration:"none"},":active":{textDecoration:"none"}},(0,r.VZ)({theme:e}),(0,r.f1)({max:1071,style:{justifyContent:"center"}})],y=(0,o.Z)(s.v,{target:"e14l9ebt5"})(v,"label:StyledTmpLink;"),b=(0,o.Z)("div",{target:"e14l9ebt6"})({flex:"1 1 0px"},"label:DivPlaceholder;"),f=(0,o.Z)("span",{target:"e14l9ebt7"})((({active:e,theme:t,theme:{direction:i}})=>[(0,r.GI)({theme:t,fontFamily:"Proxima",fontWeight:"bold",typography:"P1",lineHeight:"32px",color:e?"Primary":"Primary2"}),(0,r.YJ)({direction:i,marginStart:"8px"}),(0,r.f1)({max:1071,style:{display:"none"}})]),"label:SpanMainNavText;"),x=(0,o.Z)("nav",{target:"e14l9ebt8"})([{marginBottom:"8px",padding:"0"},(0,r.f1)({max:1071,style:{padding:"0"}})],"label:NavMainNavContainer;"),w=(0,o.Z)("ul",{target:"e14l9ebt9"})([{padding:0,margin:0,listStyleType:"none"}],"label:UlMainNav;"),k=(0,o.Z)("div",{target:"e14l9ebt10"})((({theme:{direction:e,colors:t}})=>[(0,r.YJ)({direction:e,end:"16px"}),{position:"absolute",top:"32px",width:"24px",height:"24px",display:"flex",justifyContent:"center",alignItems:"center",zIndex:10,cursor:"pointer",":after":{content:'""',position:"absolute",display:"block",width:"1px",height:"20px",left:"rtl"===e?"unset":"-8px",right:"rtl"===e?"-8px":"unset",top:"50%",transform:"translateY(-50%)",background:t.LineSecondary}},(0,r.f1)({max:1071,style:{display:"none",":after":{display:"none"}}})]),"label:DivSwitchFeedModeContainer;"),S=(0,o.Z)(p,{target:"e14l9ebt11"})((({theme:{colors:e},isHorizontal:t})=>({width:"24px",height:"24px",transform:t?"rotateZ(90deg)":"rotateZ(0deg)",transition:"all 0.3s ease",fill:e.TextPrimary})),"label:StyledFeedToggleIcon;"),C=(0,o.Z)("svg",{target:"e14l9ebt12"})({width:"6px",height:"6px",verticalAlign:"top"},"label:SvgRedDot;"),j=(0,o.Z)("div",{target:"e14l9ebt13"})((({theme:e})=>[{marginInlineStart:"2px",marginTop:"3px"},(0,r.GI)({theme:e,typography:"P1"})]),"label:DivRedDotContainer;"),T=(0,o.Z)("div",{target:"e14l9ebt14"})((({theme:e,theme:{direction:t,colors:i}})=>[(0,r.GI)({theme:e,color:"ConstTextInverse"}),{height:"20px",padding:"0 8px",borderRadius:"10px",backgroundColor:i.Primary,fontSize:"13px",lineHeight:"20px",fontWeight:600},(0,r.YJ)({direction:t,marginStart:"6px"}),(0,r.f1)({max:1071,style:[{display:"none"},(0,r.YJ)({direction:t,marginStart:"0"})]})]),"label:DivNewLableContainer;"),I=(0,o.Z)("div",{target:"e14l9ebt15"})((({theme:e})=>[{display:"none",marginInlineStart:"2px",marginTop:"3px"},(0,r.GI)({theme:e,typography:"P1"}),(0,r.f1)({max:1071,style:{display:"block"}})]),"label:DivExploreRedDotContainer;")},78392:(e,t,i)=>{i.d(t,{b:()=>o});const o=(0,i(12408).ZP)({resolved:{},chunkName:()=>"login-modal",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(5881),i.e(2146),i.e(8084),i.e(9505),i.e(2782),i.e(931),i.e(3585),i.e(6911),i.e(8532),i.e(3975),i.e(9013),i.e(4067),i.e(2222),i.e(2256),i.e(758),i.e(9314),i.e(3757),i.e(6688),i.e(4461),i.e(8100),i.e(1033),i.e(3065),i.e(7939),i.e(9155),i.e(8099),i.e(5538),i.e(5019),i.e(1874),i.e(4264),i.e(7148),i.e(9896),i.e(4333),i.e(9506),i.e(8394),i.e(4587),i.e(5780),i.e(6016),i.e(8215),i.e(7654),i.e(9887),i.e(1342),i.e(3116),i.e(4463),i.e(6011),i.e(3363),i.e(9688)]).then(i.bind(i,25675)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>25675},{ssr:!1})},68852:(e,t,i)=>{i.d(t,{x:()=>r});var o=i(64047),n=i(73566),a=i(48185),s=i(19630);let r=class extends n.D{constructor(){super(...arguments),this.defaultState={mute:!0,loop:!0,muteSetting:!0,playing:!0,volume:0}}setMute(e,t){e.mute=t}setVolume(e,t){e.volume=Math.min(Math.max(0,t),1)}setMuteSetting(e,t){e.muteSetting=t}setPlaying(e,t){e.playing=t}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],r.prototype,"setMute",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],r.prototype,"setVolume",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],r.prototype,"setMuteSetting",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],r.prototype,"setPlaying",null),r=(0,o.__decorate)([(0,s.Y)("BasicPlayer")],r)},51177:(e,t,i)=>{i.d(t,{Re:()=>l,Ld:()=>u});var o=i(64047),n=i(57244);const a=8*Math.pow(10,5),s="keyvaluepairs",r={byteLength:-1,duration:-1,type:-1,vid:"unknown"};let l=class{constructor(){this.preloadQueue=[],this.preloadStartIndex=-1,this.currentPage="",this.preloadUrlsPool=new Set,this.setPreloadQueue=e=>{e.length&&(this.preloadQueue=null!=e?e:[],e.forEach((({id:e})=>{e&&this.preloadUrlsPool.add(e)})))},this.setPreloadIndex=e=>{e>=0&&(this.preloadStartIndex=e)},this.getPreloadUrls=()=>{const{preloadStartIndex:e}=this;return this.preloadQueue.slice(e+1,e+4)},this.getPreloadedPool=()=>this.preloadUrlsPool,this.reset=()=>{this.preloadQueue=[],this.preloadStartIndex=-1,this.preloadUrlsPool.clear()},this.setCurrentPage=e=>{this.currentPage=e||"unknown"},this.clearAllVideoCaches=()=>{this.currentPage&&(this.preloadUrlsPool.clear(),this.clearIndexDBCache())},this.clearSingleVideoCache=e=>{this.clearIndexDBCache(!1,[e],(()=>{this.preloadUrlsPool.delete(e)}))},this.clearIndexDBCache=(e=!0,t=[],i=(()=>{}))=>{const o=this;if(!window.indexedDB)return void console.warn("Browser doesn't support a stable version of IndexedDB, preload feature may not be available. ");const n=window.indexedDB.open("__PRE_CACHE__");n.onsuccess=function(){const r=n.result;try{const n=r.transaction([s],"readwrite"),l=n.objectStore(s);e?l.clear().onsuccess=function(){i.call(o)}:t.forEach((e=>{l.delete(((e,t="video",i=0)=>`TT-vCache-${e}#${t}#${i}#${a-1}`)(e)).onsuccess=function(){i.call(o,e)}})),n.onerror=function(){console.error("[IndexDB]: transaction error: ",n.error)}}catch(e){return}},n.onerror=function(e){console.error("[IndexDB]: Open database error, maybe no authorization. For more: ",n.error,e.target.errorCode)}}}};l=(0,o.__decorate)([(0,n.G)()],l);class d{constructor(){this.preloadVideoId="",this.preloadVideoCache=r,this.setPreloadCacheInfo=(e,t)=>{e&&t&&e!==this.preloadVideoId&&(this.preloadVideoId=e,this.preloadVideoCache=t)},this.getPreloadCacheInfo=e=>e&&this.preloadVideoId&&e===this.preloadVideoId?this.preloadVideoCache:r}}let c=null;const u=()=>(c||(c=new d),c)},40340:(e,t,i)=>{i.d(t,{f:()=>g});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(60595),l=i(93859),d=i(56979),c=i(69405),u=i(45253),p=i(51177);let g=class extends n.D{constructor(e,t,i){super(),this.reporter=e,this.qualityReporter=t,this.preloadUtil=i,this.defaultState={prevVideo:null,currentVideo:null,playProgress:null,vv_time:0,playType:"hover"}}setCurrentVideo(e,t){var i;e.prevVideo=e.currentVideo,e.currentVideo=t.currentVideo,e.playProgress=t.playProgress,e.current_mode=null===(i=t.currentVideo)||void 0===i?void 0:i.mode,e.playType=t.playType}updateVVTime(e){const t=e.vv_time+1;t<=20&&(e.vv_time=t)}updateVideo(e){return e.pipe((0,l.b)((e=>{const{needResetReport:t=!0,currentVideo:{id:i,index:o},teaParams:{isThreeColumnAuto:n=!1,isVideoDetail:a=!1,enterMethod:s=""}={}}=e;this.reporter.setIsThreeColumnAuto(n),this.reporter.setEnterMethod(s),this.reporter.setIsVideoDetail(a),this.qualityReporter.setCurrentVideoId(null!=i?i:""),this.preloadUtil.setPreloadIndex(o),t&&this.reporter.reset()})),(0,d.U)((e=>this.getActions().setCurrentVideo(e))))}updateVideoFocusTime(e){return e.pipe((0,l.b)((({blurTime:e})=>{this.reporter.updateVideoFocusTime(e)})),(0,d.U)((()=>this.noop())))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],g.prototype,"setCurrentVideo",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",void 0)],g.prototype,"updateVVTime",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[r.y]),(0,o.__metadata)("design:returntype",void 0)],g.prototype,"updateVideo",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[r.y]),(0,o.__metadata)("design:returntype",void 0)],g.prototype,"updateVideoFocusTime",null),g=(0,o.__decorate)([(0,s.Y)("VideoPlayer"),(0,o.__metadata)("design:paramtypes",[c.ec,u.k,p.Re])],g)},48659:(e,t,i)=>{i.d(t,{$J:()=>r});var o,n,a=i(3890),s=i(24021);!function(e){e.euTaxForm="euTaxForm",e.w9TaxSelect="w9TaxSelect",e.w9TaxInputIndividual="w9TaxInputIndividual",e.w9TaxInputEntity="w9TaxInputEntity",e.taxPaperlessConsent="taxPaperlessConsent",e.taxComplete="taxComplete",e.taxInfoUs="taxInfoUs",e.w8TaxInput="w8TaxInput",e.taxInfoW8="taxInfoW8",e.kyc="kyc",e.kycSubmission="kycSubmission",e.liveDiscover="liveDiscover",e.liveGoLive="liveGoLive",e.liveRoom="liveRoom",e.liveEvent="liveEvent",e.liveRoomEmbed="liveRoomEmbed",e.rechargeBindInfo="rechargeBindInfo",e.studioLogin="studioLogin",e.studioDownload="studioDownload",e.studioFaq="studioFaq",e.liveReferralHost="liveReferralHost",e.liveReferralHostFaq="liveReferralHostFaq",e.liveSubscription="liveSubscription",e.liveSubscriptionGuide="liveSubscriptionGuide",e.liveSubscriptionBadgeSetting="liveSubscriptionBadgeSetting",e.liveSubscriptionEmoteSetting="liveSubscriptionEmoteSetting",e.liveSubscriptionComplete="liveSubscriptionComplete",e.liveSubscriptionSetting="liveSubscriptionSetting",e.liveSubscriptionMysubsription="liveSubscriptionMysubsription",e.giftCpcFaq="giftCpcFaq"}(o||(o={})),(0,s.o)({euTaxForm:"/tax/eu-tax",w9TaxSelect:"/tax/us-w9-tax-select",w9TaxInputIndividual:"/tax/us-w9-tax-input-individual",w9TaxInputEntity:"/tax/us-w9-tax-input-entity",taxPaperlessConsent:"/tax/paperless-consent",taxComplete:"/tax/complete",taxInfoUs:"/tax/info-us",w8TaxInput:"/tax/w8-tax-input",taxInfoW8:"/tax/info-w8",kyc:"/kyc",kycSubmission:"/kyc/submission",liveDiscover:"/live",liveGoLive:"/live/producer",liveRoom:"/@:uniqueId/live",liveEvent:"/live/event/:eventId",liveRoomEmbed:"/embed/@:uniqueId/live",rechargeBindInfo:"/recharge/bind-info",studioLogin:"/studio/login",studioDownload:"/studio/download",studioFaq:"/studio/faq",liveReferralHost:"/live/referral/host",liveReferralHostFaq:"/live/referral/host/faq",liveSubscription:"/live/subscription",liveSubscriptionGuide:"/live/subscription/guide",liveSubscriptionBadgeSetting:"/live/subscription/badge-setting",liveSubscriptionEmoteSetting:"/live/subscription/emote-setting",liveSubscriptionComplete:"/live/subscription/complete",liveSubscriptionSetting:"/live/subscription/setting",liveSubscriptionMysubsription:"/live/subscription/my-subscription",giftCpcFaq:"/live/gift/cpc/faq"}),function(e){e.euTaxForm="euTaxForm",e.w9TaxSelect="w9TaxSelect",e.w9TaxInputIndividual="w9TaxInputIndividual",e.w9TaxInputEntity="w9TaxInputEntity",e.taxPaperlessConsent="taxPaperlessConsent",e.taxComplete="taxComplete",e.taxInfoUs="taxInfoUs",e.w8TaxInput="w8TaxInput",e.taxInfoW8="taxInfoW8",e.kyc="kyc",e.kycSubmission="kycSubmission",e.liveDiscover="liveDiscover",e.liveGoLive="liveGoLive",e.liveRoom="liveRoom",e.liveEvent="liveEvent",e.liveRoomEmbed="liveRoomEmbed",e.rechargeBindInfo="rechargeBindInfo",e.studioLogin="studioLogin",e.studioDownload="studioDownload",e.studioFaq="studioFaq",e.liveReferralHost="liveReferralHost",e.liveReferralHostFaq="liveReferralHostFaq",e.liveSubscription="liveSubscription",e.liveSubscriptionGuide="liveSubscriptionGuide",e.liveSubscriptionBadgeSetting="liveSubscriptionBadgeSetting",e.liveSubscriptionEmoteSetting="liveSubscriptionEmoteSetting",e.liveSubscriptionComplete="liveSubscriptionComplete",e.liveSubscriptionSetting="liveSubscriptionSetting",e.liveSubscriptionMysubsription="liveSubscriptionMysubsription",e.giftCpcFaq="giftCpcFaq"}(n||(n={}));const r={euTaxForm:"/tax/eu-tax",w9TaxSelect:"/tax/us-w9-tax-select",w9TaxInputIndividual:"/tax/us-w9-tax-input-individual",w9TaxInputEntity:"/tax/us-w9-tax-input-entity",taxPaperlessConsent:"/tax/paperless-consent",taxComplete:"/tax/complete",taxInfoUs:"/tax/info-us",w8TaxInput:"/tax/w8-tax-input",taxInfoW8:"/tax/info-w8",kyc:"/kyc",kycSubmission:"/kyc/submission",liveDiscover:"/live",liveGoLive:"/live/producer",liveRoom:"/@:uniqueId/live",liveEvent:"/live/event/:eventId",liveRoomEmbed:"/embed/@:uniqueId/live",rechargeBindInfo:"/recharge/bind-info",studioLogin:"/studio/login",studioDownload:"/studio/download",studioFaq:"/studio/faq",liveReferralHost:"/live/referral/host",liveReferralHostFaq:"/live/referral/host/faq",liveSubscription:"/live/subscription",liveSubscriptionGuide:"/live/subscription/guide",liveSubscriptionBadgeSetting:"/live/subscription/badge-setting",liveSubscriptionEmoteSetting:"/live/subscription/emote-setting",liveSubscriptionComplete:"/live/subscription/complete",liveSubscriptionSetting:"/live/subscription/setting",liveSubscriptionMysubsription:"/live/subscription/my-subscription",giftCpcFaq:"/live/gift/cpc/faq"};var l;(0,a.t)(r),(0,s.o)(r),function(e){e.euTaxForm="euTaxForm",e.w9TaxSelect="w9TaxSelect",e.w9TaxInputIndividual="w9TaxInputIndividual",e.w9TaxInputEntity="w9TaxInputEntity",e.taxPaperlessConsent="taxPaperlessConsent",e.taxComplete="taxComplete",e.taxInfoUs="taxInfoUs",e.w8TaxInput="w8TaxInput",e.taxInfoW8="taxInfoW8",e.kyc="kyc",e.kycSubmission="kycSubmission",e.liveDiscover="liveDiscover",e.liveGoLive="liveGoLive",e.liveRoom="liveRoom",e.liveEvent="liveEvent",e.liveRoomEmbed="liveRoomEmbed",e.rechargeBindInfo="rechargeBindInfo",e.studioLogin="studioLogin",e.studioDownload="studioDownload",e.studioFaq="studioFaq",e.liveReferralHost="liveReferralHost",e.liveReferralHostFaq="liveReferralHostFaq",e.liveSubscription="liveSubscription",e.liveSubscriptionGuide="liveSubscriptionGuide",e.liveSubscriptionBadgeSetting="liveSubscriptionBadgeSetting",e.liveSubscriptionEmoteSetting="liveSubscriptionEmoteSetting",e.liveSubscriptionComplete="liveSubscriptionComplete",e.liveSubscriptionSetting="liveSubscriptionSetting",e.liveSubscriptionMysubsription="liveSubscriptionMysubsription",e.giftCpcFaq="giftCpcFaq"}(l||(l={}));const d={euTaxForm:"/tax/eu-tax",w9TaxSelect:"/tax/us-w9-tax-select",w9TaxInputIndividual:"/tax/us-w9-tax-input-individual",w9TaxInputEntity:"/tax/us-w9-tax-input-entity",taxPaperlessConsent:"/tax/paperless-consent",taxComplete:"/tax/complete",taxInfoUs:"/tax/info-us",w8TaxInput:"/tax/w8-tax-input",taxInfoW8:"/tax/info-w8",kyc:"/kyc",kycSubmission:"/kyc/submission",liveDiscover:"/live",liveGoLive:"/live/producer",liveRoom:"/@:uniqueId/live",liveEvent:"/live/event/:eventId",liveRoomEmbed:"/embed/@:uniqueId/live",rechargeBindInfo:"/recharge/bind-info",studioLogin:"/studio/login",studioDownload:"/studio/download",studioFaq:"/studio/faq",liveReferralHost:"/live/referral/host",liveReferralHostFaq:"/live/referral/host/faq",liveSubscription:"/live/subscription",liveSubscriptionGuide:"/live/subscription/guide",liveSubscriptionBadgeSetting:"/live/subscription/badge-setting",liveSubscriptionEmoteSetting:"/live/subscription/emote-setting",liveSubscriptionComplete:"/live/subscription/complete",liveSubscriptionSetting:"/live/subscription/setting",liveSubscriptionMysubsription:"/live/subscription/my-subscription",giftCpcFaq:"/live/gift/cpc/faq"};(0,a.t)(d),(0,s.o)(d)},62333:(e,t,i)=>{i.d(t,{HJ:()=>r});var o,n,a=i(3890),s=i(24021);!function(e){e.loginHome="loginHome",e.loginPhoneOrEmail="loginPhoneOrEmail",e.loginPhone="loginPhone",e.loginEmail="loginEmail",e.loginPhonePassword="loginPhonePassword",e.loginDownloadApp="loginDownloadApp",e.loginTwoStepVerify="loginTwoStepVerify",e.loginForgetEmailPassword="loginForgetEmailPassword",e.loginForgetPhonePassword="loginForgetPhonePassword",e.loginQRcode="loginQRcode",e.loginSSO="loginSSO",e.loginWithSignedEmail="loginWithSignedEmail",e.loginPhoneDigit="loginPhoneDigit",e.loginReset="loginReset",e.phoneResetDigit="phoneResetDigit",e.emailResetDigit="emailResetDigit",e.resetPassword="resetPassword",e.signupHome="signupHome",e.signupPhoneOrEmail="signupPhoneOrEmail",e.signupPhone="signupPhone",e.signupEmail="signupEmail",e.signupAgeGate="signupAgeGate",e.signupAgeGateConfirm="signupAgeGateConfirm",e.signupPolicyConfirm="signupPolicyConfirm",e.signupCreateAccount="signupCreateAccount",e.signupCreateUsername="signupCreateUsername",e.signupCreatePassword="signupCreatePassword",e.signupPrivateOn="signupPrivateOn",e.signupPhoneDigit="signupPhoneDigit",e.signupEmailDigit="signupEmailDigit",e.signupEmailCreatePassword="signupEmailCreatePassword",e.oauth="oauth",e.oauthLine="oauthLine",e.accountDeactivate="accountDeactivate",e.logout="logout"}(o||(o={})),(0,s.o)({loginHome:"/login",loginPhoneOrEmail:"/login/phone-or-email",loginPhone:"/login/phone-or-email/phone",loginEmail:"/login/phone-or-email/email",loginPhonePassword:"/login/phone-or-email/phone-password",loginDownloadApp:"/login/download-app",loginTwoStepVerify:"/login/2sv/:type",loginForgetEmailPassword:"/login/email/forget-password",loginForgetPhonePassword:"/login/phone/forget-password",loginQRcode:"/login/qrcode",loginSSO:"/login/sso",loginWithSignedEmail:"/login/with-signed-email",loginPhoneDigit:"/login/phone/digit-code",loginReset:"/login/reset",phoneResetDigit:"/login/reset/phone/digit-code",emailResetDigit:"/login/reset/email/digit-code",resetPassword:"/login/reset/password",signupHome:"/signup",signupPhoneOrEmail:"/signup/phone-or-email",signupPhone:"/signup/phone-or-email/phone",signupEmail:"/signup/phone-or-email/email",signupAgeGate:"/signup/age-gate",signupAgeGateConfirm:"/signup/age-gate/confirm",signupPolicyConfirm:"/signup/policy-confirm",signupCreateAccount:"/signup/create-account",signupCreateUsername:"/signup/create-username",signupCreatePassword:"/signup/create-password",signupPrivateOn:"/signup/private-on",signupPhoneDigit:"/signup/phone/digit-code",signupEmailDigit:"/signup/email/digit-code",signupEmailCreatePassword:"/signup/email/create-password",oauth:"/oauth",oauthLine:"/oauthLine",accountDeactivate:"/setting/account-delete/deactivate",logout:"/logout"}),function(e){e.loginHome="loginHome",e.loginPhoneOrEmail="loginPhoneOrEmail",e.loginPhone="loginPhone",e.loginEmail="loginEmail",e.loginPhonePassword="loginPhonePassword",e.loginDownloadApp="loginDownloadApp",e.loginTwoStepVerify="loginTwoStepVerify",e.loginForgetEmailPassword="loginForgetEmailPassword",e.loginForgetPhonePassword="loginForgetPhonePassword",e.loginQRcode="loginQRcode",e.loginSSO="loginSSO",e.loginWithSignedEmail="loginWithSignedEmail",e.loginPhoneDigit="loginPhoneDigit",e.loginReset="loginReset",e.phoneResetDigit="phoneResetDigit",e.emailResetDigit="emailResetDigit",e.resetPassword="resetPassword",e.signupHome="signupHome",e.signupPhoneOrEmail="signupPhoneOrEmail",e.signupPhone="signupPhone",e.signupEmail="signupEmail",e.signupAgeGate="signupAgeGate",e.signupAgeGateConfirm="signupAgeGateConfirm",e.signupPolicyConfirm="signupPolicyConfirm",e.signupCreateAccount="signupCreateAccount",e.signupCreateUsername="signupCreateUsername",e.signupCreatePassword="signupCreatePassword",e.signupPrivateOn="signupPrivateOn",e.signupPhoneDigit="signupPhoneDigit",e.signupEmailDigit="signupEmailDigit",e.signupEmailCreatePassword="signupEmailCreatePassword",e.oauth="oauth",e.oauthLine="oauthLine",e.accountDeactivate="accountDeactivate",e.logout="logout"}(n||(n={}));const r={loginHome:"/login",loginPhoneOrEmail:"/login/phone-or-email",loginPhone:"/login/phone-or-email/phone",loginEmail:"/login/phone-or-email/email",loginPhonePassword:"/login/phone-or-email/phone-password",loginDownloadApp:"/login/download-app",loginTwoStepVerify:"/login/2sv/:type",loginForgetEmailPassword:"/login/email/forget-password",loginForgetPhonePassword:"/login/phone/forget-password",loginQRcode:"/login/qrcode",loginSSO:"/login/sso",loginWithSignedEmail:"/login/with-signed-email",loginPhoneDigit:"/login/phone/digit-code",loginReset:"/login/reset",phoneResetDigit:"/login/reset/phone/digit-code",emailResetDigit:"/login/reset/email/digit-code",resetPassword:"/login/reset/password",signupHome:"/signup",signupPhoneOrEmail:"/signup/phone-or-email",signupPhone:"/signup/phone-or-email/phone",signupEmail:"/signup/phone-or-email/email",signupAgeGate:"/signup/age-gate",signupAgeGateConfirm:"/signup/age-gate/confirm",signupPolicyConfirm:"/signup/policy-confirm",signupCreateAccount:"/signup/create-account",signupCreateUsername:"/signup/create-username",signupCreatePassword:"/signup/create-password",signupPrivateOn:"/signup/private-on",signupPhoneDigit:"/signup/phone/digit-code",signupEmailDigit:"/signup/email/digit-code",signupEmailCreatePassword:"/signup/email/create-password",oauth:"/oauth",oauthLine:"/oauthLine",accountDeactivate:"/setting/account-delete/deactivate",logout:"/logout"};(0,a.t)(r),(0,s.o)(r)},51858:(e,t,i)=>{i.d(t,{Tp:()=>s,O5:()=>l});var o,n=i(3890),a=i(24021);!function(e){e.rewardOnboarding="rewardOnboarding",e.verifyIdentityForm="verifyIdentityForm",e.verifyIdentityResult="verifyIdentityResult",e.coin="coin",e.coinWithHash="coinWithHash",e.coinWithUser="coinWithUser",e.coinWithHashAndUser="coinWithHashAndUser",e.coinPayment="coinPayment",e.coinCashier="coinCashier",e.coinCashierManage="coinCashierManage",e.coinPaymentCode="coinPaymentCode",e.coinPaymentResult="coinPaymentResult",e.coinTransactions="coinTransactions",e.coinUnavailable="coinUnavailable",e.coinTerms="coinTerms",e.coinTransactionsDetail="coinTransactionsDetail",e.coinCardManagement="coinCardManagement",e.coinExchange="coinExchange",e.coinBindInfo="coinBindInfo",e.coinPlaceOrder="coinPlaceOrder",e.coinPlaceOrderWithHash="coinPlaceOrderWithHash"}(o||(o={}));const s={rewardOnboarding:"/reward-onboarding",verifyIdentityForm:"/coin/verify-identity/form",verifyIdentityResult:"/coin/verify-identity/result",coin:"/coin",coinWithHash:"/coin/:refhash",coinWithUser:"/coin/@:uniqueId",coinWithHashAndUser:"/coin/:refhash/@:uniqueId",coinPayment:"/coin/cashier",coinCashier:"/coin/cashier-v2",coinCashierManage:"/coin/cashier-v2/manage",coinPaymentCode:"/coin/payment-code",coinPaymentResult:"/coin/payment-result",coinTransactions:"/coin/transaction-history",coinUnavailable:"/coin/unavailable",coinTerms:"/coin/legal/terms-of-purchase-for-coins",coinTransactionsDetail:"/coin/transaction-history/detail",coinCardManagement:"/coin/card-management",coinExchange:"/coin/exchange",coinBindInfo:"/coin/bind-info",coinPlaceOrder:"/coin/place-order",coinPlaceOrderWithHash:"/coin/place-order/:refhash"};var r;(0,a.o)(s),function(e){e.rewardOnboarding="rewardOnboarding",e.verifyIdentityForm="verifyIdentityForm",e.verifyIdentityResult="verifyIdentityResult",e.coin="coin",e.coinWithHash="coinWithHash",e.coinWithUser="coinWithUser",e.coinWithHashAndUser="coinWithHashAndUser",e.coinPayment="coinPayment",e.coinCashier="coinCashier",e.coinCashierManage="coinCashierManage",e.coinPaymentCode="coinPaymentCode",e.coinPaymentResult="coinPaymentResult",e.coinTransactions="coinTransactions",e.coinUnavailable="coinUnavailable",e.coinTerms="coinTerms",e.coinTransactionsDetail="coinTransactionsDetail",e.coinCardManagement="coinCardManagement",e.coinExchange="coinExchange",e.coinBindInfo="coinBindInfo",e.coinPlaceOrder="coinPlaceOrder",e.coinPlaceOrderWithHash="coinPlaceOrderWithHash"}(r||(r={}));const l={rewardOnboarding:"/reward-onboarding",verifyIdentityForm:"/coin/verify-identity/form",verifyIdentityResult:"/coin/verify-identity/result",coin:"/coin",coinWithHash:"/coin/:refhash",coinWithUser:"/coin/@:uniqueId",coinWithHashAndUser:"/coin/:refhash/@:uniqueId",coinPayment:"/coin/cashier",coinCashier:"/coin/cashier-v2",coinCashierManage:"/coin/cashier-v2/manage",coinPaymentCode:"/coin/payment-code",coinPaymentResult:"/coin/payment-result",coinTransactions:"/coin/transaction-history",coinUnavailable:"/coin/unavailable",coinTerms:"/coin/legal/terms-of-purchase-for-coins",coinTransactionsDetail:"/coin/transaction-history/detail",coinCardManagement:"/coin/card-management",coinExchange:"/coin/exchange",coinBindInfo:"/coin/bind-info",coinPlaceOrder:"/coin/place-order",coinPlaceOrderWithHash:"/coin/place-order/:refhash"};var d;(0,n.t)(l),(0,a.o)(l),function(e){e.rewardOnboarding="rewardOnboarding",e.verifyIdentityForm="verifyIdentityForm",e.verifyIdentityResult="verifyIdentityResult",e.coin="coin",e.coinWithHash="coinWithHash",e.coinWithUser="coinWithUser",e.coinWithHashAndUser="coinWithHashAndUser",e.coinPayment="coinPayment",e.coinCashier="coinCashier",e.coinCashierManage="coinCashierManage",e.coinPaymentCode="coinPaymentCode",e.coinPaymentResult="coinPaymentResult",e.coinTransactions="coinTransactions",e.coinUnavailable="coinUnavailable",e.coinTerms="coinTerms",e.coinTransactionsDetail="coinTransactionsDetail",e.coinCardManagement="coinCardManagement",e.coinExchange="coinExchange",e.coinBindInfo="coinBindInfo",e.coinPlaceOrder="coinPlaceOrder",e.coinPlaceOrderWithHash="coinPlaceOrderWithHash"}(d||(d={}));const c={rewardOnboarding:"/reward-onboarding",verifyIdentityForm:"/coin/verify-identity/form",verifyIdentityResult:"/coin/verify-identity/result",coin:"/coin",coinWithHash:"/coin/:refhash",coinWithUser:"/coin/@:uniqueId",coinWithHashAndUser:"/coin/:refhash/@:uniqueId",coinPayment:"/coin/cashier",coinCashier:"/coin/cashier-v2",coinCashierManage:"/coin/cashier-v2/manage",coinPaymentCode:"/coin/payment-code",coinPaymentResult:"/coin/payment-result",coinTransactions:"/coin/transaction-history",coinUnavailable:"/coin/unavailable",coinTerms:"/coin/legal/terms-of-purchase-for-coins",coinTransactionsDetail:"/coin/transaction-history/detail",coinCardManagement:"/coin/card-management",coinExchange:"/coin/exchange",coinBindInfo:"/coin/bind-info",coinPlaceOrder:"/coin/place-order",coinPlaceOrderWithHash:"/coin/place-order/:refhash"};(0,n.t)(c),(0,a.o)(c)},28225:(e,t,i)=>{i.d(t,{lG:()=>o,bG:()=>n,pw:()=>a,Fq:()=>s,gg:()=>r,Cg:()=>l,oJ:()=>d,Ay:()=>c,a6:()=>u,kt:()=>p,bi:()=>g,fF:()=>h,sl:()=>m,Wy:()=>_,PL:()=>v,Zz:()=>y,Z9:()=>b,XA:()=>f,WD:()=>x,BO:()=>w,Ht:()=>k,Bu:()=>S,Cb:()=>C,oj:()=>j});const o=10204,n=10215,a=10217,s=10216,r=10231,l=10240,d=10241,c=10242,u=203005,p=10205,g=10212,h=10211,m=10209,_=10202,v=10221,y=10222,b=10102,f=10223,x=10203,w=10218,k=10219,S=205001,C=205002,j=205003;var T;!function(e){e[e.Aborted=1]="Aborted",e[e.Network=2]="Network",e[e.Decode=3]="Decode",e[e.SrcNotSupported=4]="SrcNotSupported"}(T||(T={}))},12462:(e,t,i)=>{i.d(t,{fC:()=>o,f9:()=>n,dd:()=>a,aj:()=>s,Z$:()=>r,Pu:()=>l,OJ:()=>d,QI:()=>c,U:()=>u,D5:()=>p,M7:()=>g,VV:()=>h,$1:()=>m,WZ:()=>_,fz:()=>v,cz:()=>y,lw:()=>b,hm:()=>f,AK:()=>x,Pz:()=>w,FX:()=>k,SU:()=>S,_t:()=>C,dB:()=>j,V:()=>T,YV:()=>I,ru:()=>P,BF:()=>O,KH:()=>L});const o="TikTok",n="https://www.tiktok.com",a="https://www.tiktok.com/#website",s="TikTok - trends start here. On a device or on the web, viewers can watch and discover millions of personalized short videos. Download the app to get started.",r="TikTok - Make Your Day",l="https://www.tiktok.com/search?q={search_term_string}",d="tiktok://search?keyword={search_term_string}",c="required name=search_term_string",u="Watch trending videos for you",p="https://www.tiktok.com/foryou",g="/foryou",h="https://www.tiktok.com/#foryou",m="It starts on TikTok. Join the millions of viewers discovering content and creators on TikTok — available on the web or on your mobile device.",_="/following",v="/coin",y="https://www.tiktok.com/search/campaign",b="Discover popular videos",f="https://www.tiktok.com/discover",x="https://www.tiktok.com/discovery",w="https://www.tiktok.com/#discover",k="On your device or on the web, join millions of viewers on the fastest growing video app. Download TikTok to discover new creators, search popular hashtags, and watch trending videos.",S="https://www.tiktok.com/#organization",C=["https://www.instagram.com/tiktok/","https://www.facebook.com/tiktok","https://www.twitter.com/tiktok_us","https://www.youtube.com/channel/UChPd_WHrv3O-XAXXHLixs7g"],j=["https://www.instagram.com/tiktok_kr/","https://www.facebook.com/tiktok","https://twitter.com/TiktokKR","https://www.youtube.com/c/tiktokkr","https://post.naver.com/my.naver?memberNo=52184197"],T="Discover",I={INDEX:"index, follow",NO_INDEX:"noindex, follow",IMAGE_PREVIEW_LARGE:"max-image-preview:large"},P="/live",O="/live/producer",L="/live/event"},50821:(e,t,i)=>{i.d(t,{D:()=>p,Y:()=>g});var o=i(46096),n=i(22369),a=i(21590),s=i(12462),r=i(28225),l=i(723),d=i(29782),c=i(29232),u=i(48006);function p(e){var t,i,o;const n=null===(o=null===(i=null===(t=e.seoProps)||void 0===t?void 0:t.abtest)||void 0===i?void 0:i.parameters.hashtag_page_related_hashtag_tdk)||void 0===o?void 0:o.vid,{t:a,statusCode:u,challengeInfo:p}=e,g=(0,l.m)(e),{challenge:{title:h="",desc:m=""}={},stats:{viewCount:_=0}={}}=null!=p?p:{},v=`${h}`;let y=a("seo_serp_hashtag_title",{hashtag:v});const b=function(e,t){const{t:i,relatedChallengeList:o=[]}=e;let n;return n="v3"===t||"v4"===t?(0,c.iW)(o):void 0,n}(e,n);let f=function(e,t,i,o,n){var a,s;const{challengeInfo:r,seoProps:l,t:d,relatedChallengeList:u=[]}=e,{title:p,body:g}=null!==(a=null==r?void 0:r.challengeAnnouncement)&&void 0!==a?a:{},h=`${(0,c.to)(null!=p?p:"")} ${(0,c.to)(null!=g?g:"")}`.trim(),m=null!==(s=null==r?void 0:r.challenge.splitTitle)&&void 0!==s?s:null==l?void 0:l.splitTitle;let _;const v=d("seo_serp_hashtag_desc",{tagText:null!=m?m:i}),y=d("seo_serp_hashtag_desc3",{views:(0,c.BT)(Number(t))}),b=`${v}${t>1e3?`${y} `:""}${d("seo_serp_hashtag_desc1",{hashtag:i})}${h?`${h} `:""}${(0,c.to)(o)}`,f=(0,c.iW)(u);return _="v2"===n||"v4"===n?`${b} ${f}`:`${b}`,_}(e,Number(_),v,m,n);const x=g&&h,w=`${s.f9}${(0,d.JD)({tagName:h})}`,k=x?s.YV.INDEX:s.YV.NO_INDEX;switch(u){case r.kt:case r.sl:case r.fF:case r.bi:y=a("err_tag"),f=""}return{title:y,keywords:b,description:f,canonicalHref:w,robotsContent:k,applicableDevice:"pc, mobile"}}const g=[{processType:n.H.SERPProcessType.META_PATH,targetId:3,content:p},{processType:n.H.SERPProcessType.JSONLD_PATH,targetId:3,content:function(e){var t,i;const{challengeInfo:n,seoProps:{itemList:r,metaParams:l}={}}=e,{title:c=""}=null!==(t=null==n?void 0:n.challenge)&&void 0!==t?t:{},p=`${a.o}${(0,d.JD)({tagName:c})}`,g=null!==(i=null==l?void 0:l.title)&&void 0!==i?i:`#${c} | TikTok`,h={"@type":"ItemPage","@id":p},m=(0,u.Uk)([{url:a.o,name:s.fC},{url:p,name:g}]);return[[o.J.JsonldType.Page,h],[o.J.JsonldType.ItemList,null!=r?r:{}],[o.J.JsonldType.BreadcrumbList,m]]}}]},3897:(e,t,i)=>{i.d(t,{Y:()=>l,z:()=>d});var o=i(46096),n=i(22369),a=i(21590),s=i(12462),r=i(48006);function l(e){const{keyword:t,t:i,detailResponse:o,isDiscovery:n}=e,{word:{content:a=""}={language:void 0}}=null!=o?o:{},r=a.replace(/-/g," ");return{title:i("seo_serp_expansion_title",{expansion_keywords:r}),keywords:`${r}, ${i("TikTok i18n keywords")}`,description:`${i("seo_serp_expansion_num1",{expansion_keywords:r})}`,canonicalHref:n?`${s.AK}/${t}`:`${s.hm}/${t}`,robotsContent:"index, follow",applicableDevice:"pc, mobile"}}const d=[{processType:n.H.SERPProcessType.META_PATH,targetId:104,content:l},{processType:n.H.SERPProcessType.JSONLD_PATH,targetId:104,content:function(e){const{keyword:t="",seoProps:{itemList:i}={},isDiscovery:n}=e,l=n?`${s.AK}/${t}`:`${s.hm}/${t}`,d={"@type":"ItemPage","@id":l},c=(0,r.Uk)([{url:a.o,name:s.fC},{url:s.hm,name:s.V},{url:l,name:t}]);return[[o.J.JsonldType.Page,d],[o.J.JsonldType.BreadcrumbList,c],[o.J.JsonldType.ItemList,null!=i?i:{}]]}}]},4147:(e,t,i)=>{i.d(t,{Y:()=>p,D:()=>g});var o=i(46096),n=i(22369),a=i(21590),s=i(12462),r=i(28225),l=i(723),d=i(29232),c=i(29782),u=i(48006);function p(e){var t;const{musicInfo:i,statusCode:o,t:n}=e,a=(0,l.m)(e),{music:{id:u="",title:p="",authorName:g="",scheduleSearchTime:h=0}={}}=null!=i?i:{},{videoCount:m}=null!==(t=null==i?void 0:i.stats)&&void 0!==t?t:{};let _,v=n("seo_serp_music_title",{musicName:p,authorName:g});_=p.toLowerCase().endsWith("song")?n("seo_serp_music_desc3",{musicName:p,authorName:g}):n("seo_serp_music_desc",{musicName:p,authorName:g});const y=n("seo_serp_music_desc1",{video_count:(0,d.BT)(m)}),b=n("seo_serp_music_desc2",{musicName:p});let f="";f=m&&m>=1e3?`${_} ${y} ${b}`:`${_} ${b}`;let x=!0;if(0!==h){const e=Number(new Date);x=1e3*Number(h)<=e}const w=a&&p&&u,k=(0,c.MB)({musicName:p,musicId:u}),S=`${s.f9}${k}`,C=w&&x?s.YV.INDEX:s.YV.NO_INDEX;switch(o){case r.WD:case r.BO:v=n("err_sound"),f="";break;case r.Ht:v=n("err_sound_copy"),f=""}return{title:v,keywords:void 0,description:f,canonicalHref:S,robotsContent:C,applicableDevice:"pc, mobile"}}const g=[{processType:n.H.SERPProcessType.META_PATH,targetId:4,content:p},{processType:n.H.SERPProcessType.JSONLD_PATH,targetId:4,content:function(e){var t;const{musicInfo:i,seoProps:n,t:r}=e,{itemList:l,metaParams:d}=null!=n?n:{};if(!(null==i?void 0:i.music))return[];const{title:p="",id:g="",authorName:h=""}=null!==(t=i.music)&&void 0!==t?t:{},{title:m,description:_}=null!=d?d:{},v=(0,c.MB)({musicName:p,musicId:g}),y=`${a.o}${v}`,b=null!=m?m:`${p}(${h}) | TikTok`,f={"@type":"ItemPage","@id":y},x=(0,u.Uk)([{url:a.o,name:s.fC},{url:y,name:b}]),w=(0,u.ws)(i.music,{description:_});return[[o.J.JsonldType.Page,f],[o.J.JsonldType.ItemList,null!=l?l:{}],[o.J.JsonldType.BreadcrumbList,x],[o.J.JsonldType.MusicRecording,w]]}}]},1160:(e,t,i)=>{i.d(t,{c:()=>m,s:()=>h});var o=i(46096),n=i(22369),a=i(21590);var s=i(12462),r=i(28225);const l=(e,t)=>{let i=0;const o=[];return[...e].forEach((e=>{const n=e.length;n+i<=t&&(i+=n,o.push(e))})),o.join("")};var d=i(29782),c=i(723),u=i(29232),p=i(84302),g=i(48006);function h(e){var t,i,o,n,a,g,h,m,_,v,y,b;const f=null===(o=null===(i=null===(t=e.seoProps)||void 0===t?void 0:t.abtest)||void 0===i?void 0:i.parameters.video_tdk_phase2)||void 0===o?void 0:o.vid,{itemInfo:x,statusCode:w,seoProps:k,t:S}=e,{preferredLanguage:C}=null!=k?k:{},j=(0,c.m)(e);if((0,c.M)(e))return{};const{id:T,desc:I,stickersOnItem:P=[],stats:O}=null!==(n=null==x?void 0:x.itemStruct)&&void 0!==n?n:{},{diggCount:L=0,commentCount:M=0,playCount:E=0}=null!=O?O:{},{nickname:A,uniqueId:D}=null!==(g=null===(a=null==x?void 0:x.itemStruct)||void 0===a?void 0:a.author)&&void 0!==g?g:{},{title:F,authorName:R}=null!==(m=null===(h=null==x?void 0:x.itemStruct)||void 0===h?void 0:h.music)&&void 0!==m?m:{},B=null!==(v=null===(_=null==x?void 0:x.itemStruct)||void 0===_?void 0:_.suggestedWords)&&void 0!==v?v:[],N=B.length>0?B[0]:"",W=null!==(b=null===(y=null==x?void 0:x.itemStruct)||void 0===y?void 0:y.indexEnabled)&&void 0!==b&&b,U=(0,d.MR)(D),q=(0,u.BD)(A,D),z=I?(0,u.to)(I):"",$=(0,u.aD)(F,null!=R?R:""),H=(0,p.E)(C),Z=z.length,V=S("seo_serp_videotxt_title",H({videoText:Z>70?`${l(z,70)}...`:z})),G=S("seo_serp_videotxt_title2",H({username:q,musicName:$})),Q=S("serp_videoText_searchQuery_title",H({videoText:Z>70?`${l(z,70)}...`:z,searchQueryAfterView:N})),J=S("serp_videoText_searchQuery_title2",H({username:q,searchQueryAfterView:N})),Y=S("serp_videoText_searchQuery_title3",H({videoText:Z>70?`${l(z,70)}...`:z,searchQueryAfterView:N,videoViews:(0,u.BT)(E)})),K=S("serp_videoText_searchQuery_title4",H({username:q,searchQueryAfterView:N,videoViews:(0,u.BT)(E)})),X=S("serp_videoText_searchQuery_title5",H({videoText:Z>70?`${l(z,70)}...`:z,videoViews:(0,u.BT)(E)})),ee=S("serp_videoText_searchQuery_title6",H({username:q,musicName:$,videoViews:(0,u.BT)(E)}));let te=Z>0?V:G;"v2"===f&&(z&&N?te=Q:N&&!z&&(te=J)),"v3"===f&&(te=z&&N?Y:!z&&N?K:z&&!N?X:ee);let ie="";["v2","v3","v4"].includes(f)&&B.length>0&&(ie=B.slice(0,10).join(","));const oe=H({username:q,likes:(0,u.BT)(L),comments:(0,u.BT)(M),videoText:z}),ne=(0,u.Po)(P,[4],3).join(" | "),ae=(0,u.Po)(P,[9],3).join(" "),se=S("seo_serp_videotxt_desc4",H({stickerCover:`${ae} `,musicName:$})),re=S("seo_serp_views_desc",H({videoViews:(0,u.BT)(E)}));let le=((e,t,i,o,n,a,s,r,l,d,c,u,p)=>{const g=[o].filter((e=>Boolean(e))).join(". "),h=[a].filter((e=>Boolean(e))).join(". "),m=u.concat(", "),_=0===s?i.replace(': ""',""):i,v=r>=20,y=l>=20;return v&&y?"v2"===p?`${e}${t}${_}${d}${h}${g}${c}`:"v3"===p?`${m}${e}${t}${_}${d}${h}${g}${c}`:`${e}${t}${_}${g}${n}`:v||y?v?"v2"===p?`${e}${_}${d}${h}${g}${c}`:"v3"===p?`${m}${e}${_}${d}${h}${g}${c}`:`${e}${_}${g}${n}`:y?"v2"===p?`${t}${_}${d}${h}${g}${c}`:"v3"===p?`${m}${t}${_}${d}${h}${g}${c}`:`${t}${_}${g}${n}`:`${_}`:"v2"===p?`${_}${d}${h}${g}${c}`:"v3"===p?`${m}${_}${d}${h}${g}${c}`:`${_}${g}${n}`})(S("seo_serp_videotxt_desc1",oe),S("seo_serp_videotxt_desc2",oe),S("seo_serp_videotxt_desc3",{username:q,videoText:z}),ne,se,ae,Z,L,M,N?S("seo_serp_searchQuery_desc",{searchQueryAfterView:N}).concat(" "):"",S("seo_serp_musicName_desc",H({musicName:$})),re,f);const de=j&&A&&U&&T,ce=de?`${s.f9}/@${D}/video/${T}`:"";let ue=de&&W?s.YV.INDEX:s.YV.NO_INDEX;switch(ue=[ue,s.YV.IMAGE_PREVIEW_LARGE].join(", "),w){case r.gg:te=S("err_vid_geo"),le="";break;case r.Fq:case r.lG:case r.bG:case r.pw:case r.Cg:case r.oJ:case r.Ay:te=S("err_vid"),le="";break;case r.a6:te=S("subVideo_outApp_sharing_title",{creator:A}),le=""}return{title:te,keywords:ie,description:le,canonicalHref:ce,robotsContent:ue,applicableDevice:"pc, mobile"}}const m=[{processType:n.H.SERPProcessType.META_PATH,targetId:0,content:h},{processType:n.H.SERPProcessType.JSONLD_PATH,targetId:0,content:function(e){var t,i,n,r;if(!(0,c.m)(e))return[];const{itemInfo:l,seoProps:u,t:p}=e,{metaParams:h,videoObject:m}=null!=u?u:{},{id:_,desc:v}=null!==(t=null==l?void 0:l.itemStruct)&&void 0!==t?t:{},{nickname:y,uniqueId:b,secUid:f,verified:x}=null!==(n=null===(i=null==l?void 0:l.itemStruct)||void 0===i?void 0:i.author)&&void 0!==n?n:{},w=(0,d.yl)({secUid:f,uniqueId:b}),k=`${a.o}${w}`,S=p(x?"user_SEO_official_title1":"user_SEO_title1",{username:(0,d.MR)(b)?`${y} (@${b})`:`${y}`}),C=(0,d.fH)({secUid:f,uniqueId:b,videoId:_}),j=`${a.o}${C}`,T=null!==(r=null==h?void 0:h.title)&&void 0!==r?r:v,I=(0,g.Uk)([{url:a.o,name:s.fC},{url:k,name:S},{url:j,name:null!=T?T:""}]);return[[o.J.JsonldType.BreadcrumbList,I],[o.J.JsonldType.VideoObject,null!=m?m:{}]]}}]},29232:(e,t,i)=>{i.d(t,{BT:()=>s,to:()=>r,iW:()=>l,BD:()=>d,aD:()=>c,Po:()=>u,Ed:()=>p,JQ:()=>g,q5:()=>h});var o=i(84037);const{isRealUniqueId:n}=o.c;function a(e,t=1){return Math.round(Number(`${Number(e)}e${t}`))/Math.pow(10,t)}function s(e=0){let t;return t=e<1e3?e.toString():e<999999?`${a(e/1e3)}K`:e<999999999?`${a(e/1e6)}M`:`${a(e/1e9)}B`,t}function r(e=""){return e.split(/(?:\r\n|\n|\r)/).map((e=>e.replace(/^\s+/gm,""))).join(" ").trim()}function l(e){return`${e.slice(0,10).map((e=>e.challenge.title.replace("#",""))).join(" ")}`}const d=(e="",t="")=>n(t)?`${e} (@${t})`:`${e}`;function c(e="",t=""){return e.replace(` - ${t}`,"")+(t?` - ${t}`:"")}function u(e=[],t,i=3){const o=[],n=t;e.forEach((e=>{const{stickerType:t,stickerText:i=[]}=e;-1!==n.indexOf(null!=t?t:0)&&(null==i?void 0:i.length)&&o.push(...i)}));const a=o.length;return i>0&&a>i&&(o.splice(i,a-i),o.push("...")),o}function p(e){if(0===e)return"";const t=e%60,i=Math.floor(e/60),o=i%60,n=Math.floor(i/60),a=n%24,s=Math.floor(n/24);let r="P";return s>0&&(r+=`${s}D`),r+="T",a>0&&(r+=`${a}H`),o>0&&(r+=`${o}M`),r+=`${t}S`,r}function g(e=[]){return e.filter(Boolean).map((e=>e.replace(/([^,.?!]$)/,"$1."))).join(" ")}function h(e){return/([!@&/\\#,+()$~%.'":*?<>{}！？。]$)/.test(e)}},84302:(e,t,i)=>{function o(e){const t=e?{lng:e}:{};return(e={})=>Object.assign(Object.assign({},e),t)}i.d(t,{E:()=>o})},29782:(e,t,i)=>{i.d(t,{MR:()=>s,Pz:()=>r,yl:()=>d,fH:()=>u,JD:()=>p,MB:()=>g,P4:()=>c,_9:()=>m});var o=i(84037);const{isPureNumber:n,hasIllegalText:a,isRealUniqueId:s,getPureUniqueId:r,purifyMusicName:l}=o.c,{getPureUserPath:d,getPureLivePath:c,getPureVideoPath:u,getPureTagPath:p,getPureMusicPath:g,getPureStickerPath:h,getPureQuestionPath:m}=o.Z},48006:(e,t,i)=>{i.d(t,{Uk:()=>l,AN:()=>d,ws:()=>c,Fh:()=>p,dl:()=>g});var o=i(84037),n=i(46096),a=i(21590),s=i(12462),r=i(29232);function l(e=[]){return{itemListElement:e.reduce(((e,t,i)=>{const{url:o,name:a}=t;return e.push({"@type":n.J.JsonldType.ListItem,position:i+1,item:{"@type":"Thing","@id":o,name:a}}),e}),[])}}function d(e,t){const i=/ko/.test(t)?s.dB:s._t;return{"@type":"Organization","@id":s.SU,name:s.fC,url:e,sameAs:i,logo:{"@type":"ImageObject",url:a.B}}}function c(e,t){var i;const{title:n="",id:s="",authorName:l="",coverMedium:d="",duration:c=0,album:u=""}=e,p=o.Z.getPureMusicPath({musicName:n,musicId:s});return{url:`${a.o}${p}`,name:n,description:null!==(i=null==t?void 0:t.description)&&void 0!==i?i:"",image:d,duration:(0,r.Ed)(null!=c?c:0),byArtist:{"@type":"Person",name:[null!=l?l:""]},inAlbum:{"@type":"MusicAlbum",name:null!=u?u:""}}}const u=`${a.o}/api/img`;function p(e){return e?`${u}/?userId=${e}&location=2&aid=1988`:void 0}const g={"@type":"Organization",name:"TikTok",url:"www.tiktok.com"}},723:(e,t,i)=>{function o({statusCode:e=0}={}){return 0===e||function(e){return 10229===e||10230===e}(e)}function n({statusCode:e=0}={}){return 10216===e||2040001===e}i.d(t,{m:()=>o,M:()=>n})},891:(e,t,i)=>{i.d(t,{Ay:()=>r});var o=i(67929),n=i.n(o),a=i(91051),s=i(67779);function r(e,t){let i="",o="";"string"==typeof e?i=e:(i=e.key,o=e.scope);const[r,l]=(0,a.useState)((()=>{var e,a,r,l;if(!window[s.xV]||window[s.xV][s.FT]){let t={};try{t=JSON.parse(null!==(a=null===(e=document.getElementById(s.$w))||void 0===e?void 0:e.textContent)&&void 0!==a?a:"{}")}catch(e){console.error("error while parsing rehydration data")}window[s.xV]=window[s.xV]||{},window[s.xV][s.FT]=!1,window[s.xV][s.z0]=!0,window[s.xV]=n()(window[s.xV],t)}return null!==(l=null===(r=window[s.xV][o||s.X1])||void 0===r?void 0:r[i])&&void 0!==l?l:t}));return[r,l,()=>null]}},80416:(e,t,i)=>{i.d(t,{F:()=>a});var o,n=i(95872);!function(e){e.ClickInsight="click_insight",e.EnterInsightDetail="enter_insight_detail",e.VideoPlay="video_play",e.ProfileHoveShow="livesdk_web_profile_hover_show"}(o||(o={}));const a={handleClickAnalyticsButton:()=>{n.W.event("click_insight",{enter_method:"dropdown_button"})},handleClickAnalyticsVideoCover:e=>{n.W.event("video_play",{enter_from:"insight_page",widget_name:"video_detail",sub_widget:"null",enter_method:"video_card"}),n.W.event("click_insight",{enter_method:"invideo_button"}),n.W.event("enter_insight_detail",{widget_name:"video_detail",sub_widget:null,enter_method:"invideo_button",group_id:e})},handleProfileHoveShow:()=>{n.W.event("livesdk_web_profile_hover_show")}}},47871:(e,t,i)=>{i.d(t,{C:()=>a});var o,n=i(95872);!function(e){e.ShowSnackbar="show_snackbar",e.ShowSnackbarAuto="show_snackbar_auto",e.ClickDownloadBar="click_download_bar",e.ClickGetForPC="click_get_for_pc",e.InstalWebApp="install_web_app",e.ClickGetApp="click_get_app_for_pc"}(o||(o={}));const a={handleShowSnack:e=>{const t=e?"show_snackbar_auto":"show_snackbar";n.W.event(t)},handleClickDownload:()=>{n.W.event("click_download_bar")},handleGetForPC:()=>{n.W.event("click_get_for_pc")},handleInstallApp:()=>{n.W.event("install_web_app")},handleClickGetApp:({enter_method:e})=>{n.W.event("click_get_app_for_pc",{enter_method:e})}}},2078:(e,t,i)=>{i.d(t,{vD:()=>l});var o,n,a,s=i(95872),r=i(78193);!function(e){e.MainPage="main_page",e.VideoFeed="video_feed",e.VideoDetail="video_detail"}(o||(o={})),function(e){e.Dismiss="download_app_dismiss",e.InfoCardShow="info_card_show",e.InfoCardClick="info_card_click",e.QueryTagShow="query_tag_show"}(n||(n={})),function(e){e.Close="close",e.CaptionSeeMore="caption_see_more",e.Hashtag="hashtag",e.Music="music",e.User="user"}(a||(a={}));const l={handleChannelGeneralClick:(e,t="main_page")=>{r._.handleGeneralClick(e,{scene:t})},handleDownloadDismiss:e=>{s.W.event("download_app_dismiss",{enter_method:e})},handleInfoCardShow:e=>{s.W.event("info_card_show",e)},handleInfoCardClick:e=>{s.W.event("info_card_click",e)},handleShowChannelTags:e=>{s.W.event("query_tag_show",e)}}},78193:(e,t,i)=>{i.d(t,{_:()=>a});var o,n=i(95872);!function(e){e.PageView="page_view",e.ClickToTop="click_to_top",e.Tap="tap",e.PageSlide="page_slide",e.GeneralClick="general_click"}(o||(o={}));const a={handlePageView:e=>{n.W.event("page_view",e)},handleToTop:()=>{n.W.event("click_to_top")},handleTap:e=>{n.W.event("tap",e)},handlePageSlide:()=>{n.W.event("page_slide")},handleGeneralClick:(e,t={})=>{n.W.event("general_click",Object.assign({section:e},t))}}},53120:(e,t,i)=>{i.d(t,{Fx:()=>r});var o,n,a,s=i(95872);!function(e){e.Apple="apple",e.Amazon="amazon",e.Google="google",e.Download="download",e.Microsoft="microsoft"}(o||(o={})),function(e){e.Notify="download_app_notify",e.Confirm="download_app_confirm",e.Dismiss="download_app_dismiss",e.ClickAppStore="click_app_store",e.SwipeUpGuideShow="swipe_up_guide_show",e.SwipeUpGuideClose="swipe_up_guide_close"}(n||(n={})),function(e){e.XClose="x_close",e.ClickMask="click_mask",e.NotNow="not_now"}(a||(a={}));const r={handleClickAppStore:e=>{s.W.event("click_app_store",{channel:e,enter_from:"webapp_download_modal"})},handleDownloadShow:e=>{s.W.event("download_app_notify",e)},handleDownloadConfirm:e=>{s.W.event("download_app_confirm",e)},handleDownloadDismiss:e=>{s.W.event("download_app_dismiss",e)},handleNewUserGuideShow:e=>{s.W.event("swipe_up_guide_show",e)},handleNewUserGuideClose:e=>{s.W.event("swipe_up_guide_close",e)},tapDownloadConfirm:e=>{s.W.event("tap",e)}}},19813:(e,t,i)=>{i.d(t,{W:()=>s});var o,n=i(95872),a=i(43139);!function(e){e.EnterTopicsPage="enter_topics_page",e.EnterTagDetail="enter_tag_detail",e.EnterMusicDetail="enter_music_detail",e.EnterDiscoveryPage="enter_discovery_page",e.EnterTrending="enter_homepage_hot",e.EnterUser="enter_personal_detail",e.EnterProfile="enter_personal_homepage",e.EnterVideo="enter_video_detail",e.EnterQuestion="enter_qa_detail_page",e.EnterPoi="enter_poi_detail",e.EnterSet="enter_setting_page",e.EnterFollowing="enter_homepage_follow",e.EnterSuicidePrevention="tns_show_ssh_tips_support_page",e.EnterLive="enter_live_detail",e.EnterBusiness="enter_business_suite",e.EnterAnalytics="click_insight",e.EnterLiveDiscover="enter_live_discover",e.EnterKeyboardShortcut="enter_keyboard_setting",e.EnterMessage="enter_homepage_message",e.EnterMusicPlaylist="enter_playlist_page",e.EnterQADetailPage="enter_qa_detail_page",e.EnterExplore="enter_explore_page"}(o||(o={}));const s={handleEnterTagDetail:e=>{n.W.event("enter_tag_detail",e)},handleEnterMusicDetail:e=>{n.W.event("enter_music_detail",e)},handleDiscoveryPage:e=>{n.W.event("enter_discovery_page",e)},handleEnterTopic:e=>{n.W.event("enter_topics_page",e)},handleEnterTrending:e=>{n.W.event("enter_homepage_hot",e)},handleEnterUser:e=>{n.W.event("enter_personal_detail",e)},handleEnterProfile:e=>{n.W.event("enter_personal_homepage",e)},handleEnterVideo:e=>{n.W.event("enter_video_detail",e)},handleEnterQuestion:e=>{n.W.event("enter_qa_detail_page",e)},handleEnterSet:e=>{n.W.event("enter_setting_page",e)},handleEnterFollowing:e=>{n.W.event("enter_homepage_follow",e)},handleEnterSuicidePrevention:e=>{n.W.event("tns_show_ssh_tips_support_page",e)},handleEnterLive:e=>{n.W.event("enter_live_detail",e)},handleEnterBusiness:()=>{n.W.event("enter_business_suite")},handleEnterLiveDiscover:e=>{n.W.event("enter_live_discover",e)},handleEnterKeyboardShortcut:()=>{n.W.event("enter_keyboard_setting")},handleEnterMessage:e=>{n.W.event("enter_homepage_message",Object.assign({enter_method:"click_button"},e))},handleEnterMusicPlaylist:e=>{n.W.event("enter_live_discover",e)},handleEnterQADetailPage:e=>{n.W.event("enter_qa_detail_page",e)},handleEnterPoi:e=>{const{enter_method:t,play_mode:i,author_id:o,group_id:s,id:r,type:l,cityCode:d,countryCode:c,typeCode:u,isClaimed:p,ttTypeCode:g,ttTypeNameMedium:h,ttTypeNameSuper:m,ttTypeNameTiny:_}=e;n.W.event("enter_poi_detail",{enter_method:t,play_mode:i,author_id:o,group_id:s,poi_id:r,poi_detail_type:a.L7[null!=l?l:0],is_claimed:p?1:0,poi_city:d,poi_region_code:c,tt_poi_backend_type:`${m},${h},${_}|${g}`,poi_type_code:u})},handleEnterExplore:({enter_method:e})=>{n.W.event("enter_explore_page",{enter_method:e})}}},17296:(e,t,i)=>{i.d(t,{e:()=>s});var o,n,a=i(95872);!function(e){e.ClickEntry="feedback",e.Confirm="feedback_confirm",e.Continue="feedback_continue",e.Submit="feedback_submit"}(o||(o={})),function(e){e.Yes="yes",e.No="no"}(n||(n={}));const s={handleEnterFeedback:e=>{a.W.event("feedback",{feedback_type:e})},handleSubmitFeedback:()=>{a.W.event("feedback_submit")},handleFeedbackResponseClick:e=>{a.W.event("feedback_confirm",{enter_method:"click_"+(e?"yes":"no")})},handleNeedMoreHelpClick:()=>{a.W.event("feedback_continue")}}},29876:(e,t,i)=>{i.d(t,{yY:()=>d});var o,n,a,s,r,l=i(95872);!function(e){e.LiveShow="livesdk_live_show",e.LiveRecPlay="livesdk_rec_live_play",e.LiveWindowDuration="livesdk_live_window_duration"}(o||(o={})),function(e){e.Click="click",e.Draw="draw"}(n||(n={})),function(e){e.General="general_search",e.SearchResult="search_result"}(a||(a={})),function(e){e.OthersPhoto="others_photo",e.Cover="live_cover",e.Cell="live_cell"}(s||(s={})),function(e){e.AutoMatic="automatic",e.Hover="hover"}(r||(r={}));const d={handleLiveShow:e=>{l.W.event("livesdk_live_show",e)},handleLiveRecPlay:e=>{l.W.event("livesdk_rec_live_play",e)},handleLiveWindowDuration:e=>{l.W.event("livesdk_live_window_duration",e)}}},30395:(e,t,i)=>{i.d(t,{ZI:()=>d});var o=i(64047),n=i(57244),a=i(95872);var s,r,l;!function(e){e.ClickSignUp="click_sign_up",e.ClickLogin="click_login"}(s||(s={})),function(e){e.Qrcode="QRcode",e.Email="email",e.Username="handle",e.PhonePassword="phone",e.Sms="sms_verification",e.Repeat="repeatLogin",e.TWITTER="twitter",e.GOOGLE="google",e.FACEBOOK="facebook",e.INSTAGRAM="instagram",e.VK="vk",e.KAKAOTALK="kakaotalk",e.LINE="line",e.APPLE="apple"}(r||(r={})),function(e){e[e.Success=0]="Success",e[e.Failed=1]="Failed",e[e.Cancelled=2]="Cancelled"}(l||(l={}));let d=class{constructor(){this.setPlatform=e=>{this.platform=e},this.setEnterMethod=e=>{this.enter_method=e},this.event=(e,t)=>{a.W.event(e,Object.assign({platform:this.platform,enter_method:this.enter_method},t))},this.loginNotify=e=>{this.event("login_notify",e)},this.LoginNotifyClose=e=>{a.W.commonParams.enter_from&&"unknown"!==a.W.commonParams.enter_from&&a.W.config({commonEventParams:{page_name:a.W.commonParams.enter_from}}),this.event("login_notify_close",e)},this.loginSubmit=e=>{this.event("login_submit",{enter_type:(null==e?void 0:e.signUp)?"click_sign_up":"click_login"})},this.loginSuccess=e=>{this.event("login_success",{enter_type:e.signUp?"click_sign_up":"click_login",is_register:e.is_register})},this.loginFailure=e=>{this.event("login_failure",{enter_type:e.signUp?"click_sign_up":"click_login",error_code:e.error_code})},this.thirdPartyLoginResult=e=>{this.event("monitor_login_thirdparty",e)},this.ageGateShow=()=>{this.event("age_gate_show",{enter_type:"click_sign_up"})},this.twoStepNotify=e=>{this.event("login_two_step_verification_notify",e)},this.twoStepSubmit=e=>{this.event("login_two_step_verification_submit",e)},this.twoStepResult=e=>{this.event("login_two_step_verification_result",e)},this.forceResetSubmit=()=>{this.event("forced_pwchange_submit")},this.forceResetSuccess=()=>{this.event("forced_pwchange_success")},this.checkPointShow=e=>{this.event("checkpoint_verification_show",e)},this.checkPointResponse=e=>{this.event("checkpoint_verification_response",e)},this.checkPointTyping=e=>{this.event("start_verification_typing",e)}}};d=(0,o.__decorate)([(0,n.G)()],d)},90012:(e,t,i)=>{i.d(t,{R:()=>a});var o,n=i(95872);!function(e){e.EnterChatList="enter_chat_list",e.LeaveChatList="leave_chat_list",e.LeaveChat="leave_chat",e.DeleteChat="delete_chat",e.AcceptStrangerChat="accept_stranger_chat",e.ReportStrangerChat="report_stranger_chat",e.DeleteStrangerChat="delete_stranger_chat",e.SendMessage="send_message",e.FailSendMessage="fail_send_message",e.LikeMessage="like_message",e.DeleteMessage="delete_message",e.ReportMessage="report_message",e.ChatSettingClick="chat_setting_click",e.ChatMuteClick="chat_mute_click",e.ChatTopClick="chat_top_click",e.EnterStrangerChatList="enter_stranger_chat_list",e.ChangeMessagePermission="change_message_permission",e.ChangeBrandMessageStatus="change_brand_message_status",e.EnterChat="enter_chat",e.ShareHeadShow="share_head_show",e.ShareVideoToChat="share_video_to_chat",e.SearchContact="search_contact",e.ShareVideo="share_video"}(o||(o={}));const a={handleEnterChatList:e=>{n.W.event("enter_chat_list",{num:e})},handleSendMessage:e=>{n.W.event("send_message",e)},handleFailSendMessage:e=>{n.W.event("fail_send_message",e)},handleShareHeadShow:e=>{n.W.event("share_head_show",e)},handleShareVideoToChat:e=>{n.W.event("share_video_to_chat",e)},handleSearchContact:()=>{n.W.event("search_contact",{action_type:"share"})},handleLeaveChatList:()=>{n.W.event("leave_chat_list")},handleEnterStrangerChatList:()=>{n.W.event("enter_stranger_chat_list")},handleChatSettingClick:e=>{n.W.event("chat_setting_click",{conversation_id:e,chat_type:"private"})},handleChatMuteClick:({to_status:e,conversation_id:t})=>{n.W.event("chat_mute_click",{to_status:e,conversation_id:t,chat_type:"private"})},handleChatTopClick:({to_status:e,conversation_id:t})=>{n.W.event("chat_top_click",{to_status:e,conversation_id:t,chat_type:"private"})},handleDeleteChat:({is_stranger:e,conversation_id:t})=>{n.W.event("delete_chat",{is_stranger:e?1:0,conversation_id:t,chat_type:"private"})},handleEnterChat:({relation_tag:e,is_stranger:t,conversation_id:i,chat_type:o})=>{n.W.event("enter_chat",{relation_tag:e,is_stranger:t?1:0,conversation_id:i,chat_type:o})},handleAcceptStrangerChat:()=>{n.W.event("accept_stranger_chat")},handleDeleteMessage:e=>{n.W.event("delete_message",Object.assign(Object.assign({},e),{chat_type:"private"}))},handleReportMessage:e=>{n.W.event("report_message",Object.assign(Object.assign({},e),{chat_type:"private"}))},handleLikeMessage:({conversation_id:e,to_user_id:t})=>{n.W.event("like_message",{conversation_id:e,to_user_id:t,chat_type:"private"})},handleChangeMessagePermission:e=>{n.W.event("change_message_permission",{to_status:e})},handleChangeBrandMessageStatus:e=>{n.W.event("change_brand_message_status",{to_status:e})},handleLeaveChat:({relation_tag:e,is_stranger:t,conversation_id:i})=>{n.W.event("leave_chat",{relation_tag:e,is_stranger:t?1:0,conversation_id:i})}}},43139:(e,t,i)=>{i.d(t,{L7:()=>s,B8:()=>r});var o,n,a=i(95872);!function(e){e.PoiAnchorShow="poi_anchor_show",e.PoiAnchorClick="poi_anchor_click"}(o||(o={})),function(e){e.OneColumn="one_column",e.BrowserMode="browser_mode",e.VideoDetail="video_detail",e.VideoAnchor="video_anchor",e.CommentAnchor="comment_anchor",e.ClickCaption="click_caption"}(n||(n={}));const s={1:"regional",2:"store",3:"independent"},r={handlePoiAnchorShow:e=>{a.W.event("poi_anchor_show",e)},handlePoiAnchorClick:e=>{a.W.event("poi_anchor_click",e)}}},42143:(e,t,i)=>{i.d(t,{xq:()=>v});var o,n,a,s,r,l,d,c,u,p,g,h,m,_=i(95872);!function(e){e.Search="search",e.SearchResultShow="search_result_show",e.SearchResultShowVideo="search_result_show_video",e.SearchResultClick="search_result_click",e.SearchSessionFinish="search_session_finish",e.EmptySearch="empty_search",e.SearchHistory="search_history",e.TrendingShow="trending_show",e.EnterSearchBlankpage="enter_search_blankpage",e.ClickSearch="click_search",e.EnterSearchPage="enter_search_page",e.TrendingGroupShow="trending_show",e.TrendingWordsShow="trending_words_show",e.TrendingWordsClick="trending_words_click",e.EnterSearch="enter_search",e.CommentRelatedSearchBoardShow="comment_related_search_board_show",e.CommentRelatedSearchBoardClick="comment_related_search_board_click"}(o||(o={})),function(e){e.ClickEnter="click_enter",e.ClickIcon="click_icon",e.ClickViewAll="click_view_all",e.ClickSearch="homepage_click_search",e.ClickMoreGeneralList="click_more_general_list",e.ClickSearchResult="click_search_result",e.SearchHistory="search_history",e.RecomSearch="recom_search"}(n||(n={})),function(e){e.Hot="hot",e.Sav="sav",e.Music="music",e.SearchBar="search_bar_outer"}(a||(a={})),function(e){e.EnrichSug="enrich_sug",e.NormalSug="normal_sug"}(s||(s={})),function(e){e.User="user",e.Video="video",e.General="general",e.Live="live"}(r||(r={})),function(e){e.SearchHistory="search_history",e.SearchSug="search_sug",e.NormalSearch="normal_search"}(l||(l={})),function(e){e.NormalSearch="normal_search",e.SearchOuter="search_outer",e.SwitchTab="switch_tab",e.ClickMoreGeneralList="click_more_general_list",e.SearchSug="search_sug",e.DefaultSearchKeyword="default_search_keyword",e.CommentRelatedSearch="comment_related_search",e.CommentHighlightedWords="comment_highlighted_words"}(d||(d={})),function(e){e.Sug="sug",e.RecomSearch="recom_search",e.SearchBar="related_search_anchor_v2",e.CommentRelatedSearch="comment_related_search",e.CommentHighlightedWords="comment_highlighted_words"}(c||(c={})),function(e){e.Tag="tag",e.Person="person",e.LiveCard="live_card",e.HotUser="hot_user"}(u||(u={})),function(e){e.ClickIntoLive="click_into_live",e.ClickInfo="click_info"}(p||(p={})),function(e){e.Show="show",e.ShowAll="show_all",e.Click="click",e.Clear="clear",e.ClearAll="clear_all"}(g||(g={})),function(e){e.Enter="enter",e.Cancel="cancel"}(h||(h={})),function(e){e.NotInterested="Not interested",e.UnrelatedContent="Unrelated content",e.InappropriateContent="Inappropriate content",e.Others="others",e.Cancel="cancel"}(m||(m={}));const v={handleSugClick:e=>{_.W.event("trending_words_click",e)},handleSugImpression:e=>{_.W.event("trending_words_show",e)},handleSugGroupImpression:e=>{_.W.event("trending_show",e)},handleSearchEntry:()=>{_.W.event("enter_search")},handleSearchImpression:e=>{_.W.event("search_result_show",Object.assign({token_type:"person"},e))},handleSearchVideoImpression:e=>{_.W.event("search_result_show_video",Object.assign({},e))},handleSearch:e=>{_.W.event("search",Object.assign(Object.assign({},e),{is_success:1}))},handleSearchResultClick:e=>{_.W.event("search_result_click",Object.assign({},e))},handleSearchSessionFinish:e=>{_.W.event("search_session_finish",e)},handleSearchResultEmpty:e=>{_.W.event("empty_search",Object.assign({},e))},handleClickSearch:({target:e="homepage_click_search"})=>{_.W.event("click_search",{target:e})},handleEnterSearchPage:({enter_method:e="homepage_click_search"})=>{_.W.event("enter_search_page",{enter_method:e})},handleEnterSearchBlankPage:e=>{_.W.event("enter_search_blankpage",e)},handleSearchHistory:e=>{_.W.event("search_history",e)},handleTrendingWordsShow:e=>{_.W.event("trending_words_show",e)},handleTrendingWordsClick:e=>{_.W.event("trending_words_click",e)},handleTrendingShow:e=>{_.W.event("trending_show",e)},handleCommentRelatedSearchBoardShow:e=>{_.W.event("comment_related_search_board_show",e)},handleCommentRelatedSearchBoardClick:e=>{_.W.event("comment_related_search_board_click",e)}}},66826:(e,t,i)=>{i.d(t,{Y:()=>s});var o,n,a=i(95872);!function(e){e.AdsClick="ads_click"}(o||(o={})),function(e){e.ProfileImage="profile_image",e.UserName="user_name",e.HyperLink="hyperlink",e.SignUpButton="sign_up_button",e.VideoSection="video_section",e.CrossOut="cross_out",e.LikeButton="like_button",e.CommentButton="comment_button"}(n||(n={}));const s={handleAdsClick:(e,t="one_column")=>{const i=(e=>{switch(e){case"profile_image":case"user_name":case"hyperlink":case"video_section":case"sign_up_button":return 1;default:return 0}})(e);a.W.event("ads_click",{ads_type:"in_feed_ads",play_mode:t,cta_flag:i,section:e})}}},17919:(e,t,i)=>{i.d(t,{p:()=>a});var o,n=i(95872);!function(e){e.SaveProfile="save_profile",e.ClickEditProfile="click_edit_profile",e.EditProfileNotifyShow="edit_profile_notify_show",e.CancelEditProfile="cancel_edit_profile",e.CancelEditProfileShow="cancel_edit_profile_show"}(o||(o={}));const a={handleSaveReport:e=>{n.W.event("save_profile",e)},handleClickEditProfile:e=>{n.W.event("click_edit_profile",e)},handleShowProfileTooltip:e=>{n.W.event("edit_profile_notify_show",e)},handleCancelEditProfile:e=>{n.W.event("cancel_edit_profile",e)},handleCloseProfileTooltip:e=>{n.W.event("cancel_edit_profile_show",e)}}},31222:(e,t,i)=>{i.d(t,{KF:()=>r});var o,n=i(64047),a=i(57244),s=i(95872);!function(e){e.PageFCP="page_content_paint",e.FirstScreen="first_screen_video",e.FirstFrame="first_frame_video",e.InteractAddition="interact_additional_video_end",e.InteractExisted="interact_existed_video_end",e.RouteChange="video_route_change",e.InteractAdditionStart="interact_additional_video_start",e.InteractExistedStart="interact_existed_video_start",e.SwiperSlideTransitionEnd="swiper_slide_transition_end"}(o||(o={}));let r=class{constructor(){this.additionQueue=[],this.existedQueue=[],this.firstLoadReport=!1,this.shouldFirstLoadReportSkip=!1,this.firstFrameReport=!1,this.currentPageReport=!1,this.currentPage="",this.reportedCanPlayVideoSource="",this.reportedPlayingVideoSource="",this.reportedScrollPrevIndex=-1,this.reportedScrollCurrIndex=-1,this.slideTransitionExsitedQueue=[],this.emit=(e,t)=>{try{s.W.event(e,t)}catch(e){console.error(`Video Scene Evnet Tea Report Error: ${e}`)}},this.reportVideoPageFCP=e=>{this.emit("page_content_paint",e)},this.reportVideoFirstScreen=e=>{const{endTime:t,videoSource:i}=e;if(!this.firstLoadReport){if(this.firstLoadReport=!0,this.currentPageReport=!0,!this.checkIfCanReportFirstPlay()||this.shouldFirstLoadReportSkip)return;const e=()=>!(window&&!window.MediaSource)&&((null===window||void 0===window?void 0:window.MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"'))||(null===window||void 0===window?void 0:window.MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"'))||(null===window||void 0===window?void 0:window.MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"'))||(null===window||void 0===window?void 0:window.MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"'))),o=performance.timeOrigin||performance.timing.navigationStart,n={duration:Math.round(t-o),to_page:this.currentPage,can_use_hevc:e()?1:0};this.emit("first_screen_video",n),this.resetAddition(),this.setReportVideoSource(i,0)}},this.reportVideoFirstFrame=e=>{if(e&&!this.firstFrameReport){if(this.firstFrameReport=!0,!this.checkIfCanReportFirstFrame())return;const e=performance.timeOrigin||performance.timing.navigationStart,t={duration:Math.round(Date.now()-e),to_page:this.currentPage};this.emit("first_frame_video",t)}},this.reportVideoAddition=e=>{const t=this.additionQueue[0],{endTime:i,videoSource:o}=e;if(this.isEmptyEvent(t)||this.checkIfHasReported(o,0))return;const{startTime:n=0,situation:a="",from_page:s=""}=t,r=this.currentPage;if(!this.currentPageReport&&s!==r){this.currentPageReport=!0;const e={situation:a,from_page:s,to_page:r,duration:i-n};this.emit("interact_additional_video_end",e),this.resetAddition(),this.setReportVideoSource(o,0)}},this.reportVideoInteract=e=>{const t=this.existedQueue[0]||{},{startTime:i=0,situation:o="",from_page:n=""}=t,{endTime:a,videoSource:s}=e;if(this.isEmptyEvent(t)||this.checkIfHasReported(s,1)&&"open_browser_mode"!==o)return;const r={situation:o,from_page:n,to_page:this.currentPage,duration:a-i};this.emit("interact_existed_video_end",r),this.resetExist(),this.setReportVideoSource(s,1)},this.reportVideoAdditionStart=e=>{const{situation:t,startTime:i}=e;this.currentPageReport=!1,this.additionQueue=[{startTime:i,situation:t,from_page:this.currentPage}]},this.reportVideoInteractStart=e=>{var t;const i=this.existedQueue[0];if(!this.isEmptyEvent(i)){const{situation:o=""}=i;if((null!==(t=e.situation)&&void 0!==t?t:"").indexOf("one_column_scroll")>-1&&o.indexOf("browser_mode")>-1)return}const{startTime:o,situation:n,currVideoIndex:a,prevVideoIndex:s,enterMethod:r}=e;if(a&&a>0&&a===this.reportedScrollCurrIndex&&s===this.reportedScrollPrevIndex)return;const l=this.currentPage;this.existedQueue=[{startTime:o,situation:n,from_page:l}];const d={situation:n,from_page:this.currentPage,enter_method:r};this.emit("interact_existed_video_start",d),this.reportedScrollCurrIndex=null!=a?a:-1,this.reportedScrollPrevIndex=null!=s?s:-1},this.reportSlideTransitionStart=e=>{const{from_page:t,start_time:i,current_index:o}=e;this.slideTransitionExsitedQueue=[{from_page:t,start_time:i,current_index:o}]},this.reportSlideTransitionEnd=e=>{const t=this.slideTransitionExsitedQueue[0]||{},{from_page:i,start_time:o,current_index:n}=t,{from_page:a,end_time:s,current_index:r}=e;if(this.isEmptyEvent(t)||a!==i||r===n)return;const l={from_page:a,situation:r-n>0?"swiper_slide_next":"swiper_slide_prev",duration:s-o};this.emit("swiper_slide_transition_end",l),this.slideTransitionExsitedQueue=[]},this.updateCurrentPage=e=>{this.currentPage=e},this.setReportVideoSource=(e,t)=>{0===t?this.reportedCanPlayVideoSource=e:this.reportedPlayingVideoSource=e},this.setCurrentPageReport=e=>{this.currentPageReport=e},this.getCurrentPageReport=()=>this.currentPageReport,this.getFirstLoadReport=()=>this.firstLoadReport,this.getFirstFrameReport=()=>this.firstFrameReport,this.isEmptyEvent=e=>!e||0===Object.keys(e).length,this.checkIfCanReportFirstPlay=()=>l.indexOf(this.currentPage)>-1&&performance,this.checkIfCanReportFirstFrame=()=>d.indexOf(this.currentPage)>-1&&performance,this.checkIfHasReported=(e,t)=>(0===t?this.reportedCanPlayVideoSource:this.reportedPlayingVideoSource)===e,this.resetAddition=()=>this.additionQueue=[],this.resetExist=()=>this.existedQueue=[],this.handleUserChangeVideoOrPlayMode=()=>{this.shouldFirstLoadReportSkip=!0},this.handleRouteChange=e=>{this.currentPage&&e&&(this.shouldFirstLoadReportSkip=!0)}}};r=(0,n.__decorate)([(0,a.G)()],r);const l=["homepage_hot","homepage_hot_h5","homepage_following","others_homepage","challenge","single_song","video_detail","video_detail_h5"],d=["homepage_hot","homepage_follow","others_homepage","challenge","video_detail","single_song"];var c;!function(e){e.BrowserModeNext="browser_mode_next",e.BrowserModePrev="browser_mode_prev",e.OneColumnScrollNext="one_column_scroll_next",e.OneColumnScrollPrev="one_column_scroll_prev",e.OpenBrowserMode="open_browser_mode",e.AdditionFirstLoad="addition_first_load",e.SwiperSlideNext="swiper_slide_next",e.SwiperSlidePrev="swiper_slide_prev",e.ThreeColumnUserHover="three_column_user_hover",e.ThreeColumnUserTouch="three_column_user_touch",e.VideoDatailSelect="video_detail_select"}(c||(c={}))},45253:(e,t,i)=>{i.d(t,{k:()=>u});var o=i(64047),n=i(57244),a=i(95872),s=i(71387),r=i(69405);const l={isPause:null,isVideoLoaded:!1,isFirstPlayReported:!1,isFirstPlayEndReported:!1,isInPlaybackStage:!1,triggerPlayTimestamp:0,firstTriggerPlayTimestamp:0,loadStartTimestamp:0,blockStartTimestamp:0,blockStartProgress:0,playingStartTimestamp:0,pauseStartTimestamp:0,totalPauseDuration:0,volume:0,muted:!0,mutedStateChange:!1,videoSourceLoadTime:0},d={currentSrc:"",duration:0,error:null,currentTime:0,readyState:0,buffered:{start:()=>0,end:()=>0,length:0},volume:0,muted:!0,mutedStateChange:!1};let c=1,u=class{constructor(){this.innerStates=Object.assign({},l),this.innerVideoAttributeStates=Object.assign({},d),this.isFirstFrameReported=!1,this.currentVideoId="",this.setCurrentVideoId=e=>{this.currentVideoId=e},this.resetState=()=>{this.innerStates=Object.assign({},l),this.currentVideoId="",this.isFirstFrameReported=!1,this.innerVideoAttributeStates=Object.assign({},d)},this.resetStateWhenSlideChange=()=>{this.innerStates=Object.assign({},l),this.innerVideoAttributeStates=Object.assign({},d)},this.reset=(e,t)=>{this.currentVideoId!==e&&(this.playEndEvent(t),this.blockEndEvent(Object.assign(Object.assign({},t),{endType:0})),this.innerStates=Object.assign({},l))},this.resetWhenSlideChange=e=>{this.playEndEvent(Object.assign(Object.assign({},e),this.innerVideoAttributeStates)),this.blockEndEvent(Object.assign(Object.assign(Object.assign({},e),{endType:0}),this.innerVideoAttributeStates)),this.innerVideoAttributeStates=Object.assign({},d)},this.handlePlay=()=>{this.innerStates.triggerPlayTimestamp=Date.now();const{firstTriggerPlayTimestamp:e}=this.innerStates;e||(this.innerStates.firstTriggerPlayTimestamp=Date.now())},this.handlePause=e=>{const{id:t}=e,{playingStartTimestamp:i,isPause:o}=this.innerStates;t&&i&&!o&&(this.innerStates.pauseStartTimestamp=Date.now()),this.innerStates.isPause=!0},this.handleTimeUpdate=e=>{const{triggerPlayTimestamp:t,isFirstPlayReported:i,pauseStartTimestamp:o,videoSourceLoadTime:n,loadStartTimestamp:r}=this.innerStates,{currentTime:l=0,duration:d=0,codecType:c,volume:u=0,muted:p=!0,bitrateInfo:g,buffered:h,currentSrc:m,error:_,readyState:v}=e;if(this.innerVideoAttributeStates.duration=d,this.innerVideoAttributeStates.currentTime=l,this.innerVideoAttributeStates.buffered=h,this.innerVideoAttributeStates.currentSrc=m,this.innerVideoAttributeStates.error=_,this.innerVideoAttributeStates.readyState=v,!(l<=0)){if(!i&&0!==t){const i=Date.now()-t-1e3*l,o=Date.now()-r,h=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,s.OL)(e)),(0,s.G4)(e)),(0,s.wA)(e)),(0,s.hZ)(e)),(0,s.wu)()),{duration:Math.round(i),video_duration:Math.round(1e3*d),is_bytevc1:(null!=c?c:"").indexOf("h265")>-1?1:0,muted:p?1:0,bitrate_set:(0,s.pq)(g),quality_bitrate:(0,s.Ke)(g),duration_from_load:Math.round(o),duration_with_load:Math.round(i+n)});a.W.event("video_play_quality",h),this.innerStates.isFirstPlayReported=!0,this.innerStates.playingStartTimestamp=Date.now(),this.innerStates.volume=u,this.innerStates.muted=p}if(this.innerStates.mutedStateChange=this.innerStates.mutedStateChange||this.innerStates.muted!==p,this.innerStates.muted=p,!this.isFirstFrameReported&&performance&&this.firstFrameEvent(),this.innerStates.isPause){const e=o?Date.now()-o:0;this.innerStates.totalPauseDuration+=e}this.blockEndEvent(Object.assign(Object.assign({},e),{endType:1})),this.innerStates.isInPlaybackStage=!0,this.innerStates.isPause=!1}},this.handleEnded=()=>{this.innerStates.isInPlaybackStage=!1},this.handleError=e=>{const{isVideoLoaded:t,isInPlaybackStage:i}=this.innerStates,{error:o,codecType:n="",duration:r,play_url:l}=e,{code:d=0,message:c=""}=null!=o?o:{};if(t&&i){const t=l?(0,s.qP)(l):-1,i=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,s.OL)(e)),(0,s.G4)(e)),(0,s.hZ)(e)),(0,s.wu)()),{error_code:String(d),error_info:c,is_bytevc1:n.indexOf("h265")>-1?1:0,duration:null!=r?r:0,isExpired:t});a.W.event("video_play_failed",i)}else this.responseEvent(e)},this.handleWaiting=e=>{const{currentTime:t=0,duration:i=0}=e,{isInPlaybackStage:o,blockStartTimestamp:n,isPause:r}=this.innerStates;if(0!==t&&t!==i&&o&&!1===r&&0===n){const i=Object.assign(Object.assign(Object.assign({},(0,s.OL)(e)),(0,s.hZ)(e)),(0,s.wu)());a.W.event("video_block_start",i),this.innerStates.blockStartTimestamp=Date.now(),this.innerStates.blockStartProgress=1e3*t}},this.handleLoadStart=e=>{const t=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,s.OL)(e)),(0,s.hZ)(e)),(0,s.wu)()),(0,r.G4)(e)),(0,r.PO)(e));a.W.event("video_request",t),this.innerStates.loadStartTimestamp=Date.now()},this.handleLoadedData=e=>{this.responseEvent(e),this.innerStates.isVideoLoaded=!0},this.videoFeedRequestEvent=()=>{a.W.event("feed_request",{request_method:"load_more"})},this.videoFeedResponseEvent=e=>{const{duration:t,list_length:i}=e,o={duration:t,is_success:i?"1":"0",request_method:"load_more",video_num:i};a.W.event("feed_request_response",o)},this.firstFrameEvent=()=>{const e=performance.timeOrigin,t={feed_total:e?Math.round(Date.now()-e):-1};a.W.event("first_feed_show_time",t),this.isFirstFrameReported=!0}}blockEndEvent(e){const{currentTime:t=0,codecType:i,endType:o,should_filter:n=!1}=e,{blockStartTimestamp:r,blockStartProgress:l,isInPlaybackStage:d,isVideoLoaded:c}=this.innerStates;if(c&&d&&0!==r&&(1e3*t!==l||0===o)){const d=Date.now()-r-(1e3*t-l),c=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,s.OL)(e)),(0,s.G4)(e)),(0,s.wA)(e)),(0,s.wu)()),{duration:Math.round(d),is_bytevc1:(null!=i?i:"").indexOf("h265")>-1?1:0,end_type:o,position:Math.round(1e3*t),should_filter:n?"1":"0"});a.W.event("video_block",c),this.innerStates.blockStartTimestamp=0}}responseEvent(e){const{loadStartTimestamp:t}=this.innerStates,{error:i,videoQuality:o,definition:n,play_url:l}=e,d=l?(0,s.qP)(l):-1,c=Date.now()-t;this.innerStates.videoSourceLoadTime=c;const u=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,s.OL)(e)),(0,s.wu)()),(0,s.hZ)(e)),{error_code:String(null==i?void 0:i.code),duration:c,is_success:i?"0":"1",video_quality:o&&n?`${o}_${n}`:""}),(0,r.G4)(e)),(0,r.PO)(e)),{isExpired:d});a.W.event("video_request_response",u)}playEndEvent(e){const{isFirstPlayReported:t,isFirstPlayEndReported:i,playingStartTimestamp:o,totalPauseDuration:n,firstTriggerPlayTimestamp:r,volume:l}=this.innerStates;if(!i){const{buffered:i,duration:d=0,currentTime:u=0,readyState:p,volume:g=0,muted:h}=e,m=o?Date.now()-o-n:0,_=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,s.OL)(e)),(0,s.G4)(e)),(0,s.wA)(e)),(0,s.wu)()),{is_success:t?"1":"0",video_duration:isNaN(d)?0:Math.round(1e3*d),play_duration:Math.round(1e3*u),buffering:(null!=p?p:0)<=2?1:0,duration:m>=0?Math.round(m):0,wait_duration:o>0?null:Date.now()-r,cur_cache_duration:(0,s.L2)(i),local_time_ms:Date.now(),volume_level:Number(g.toFixed(4)),volume_change:t?Number((g-l).toFixed(4)):0,muted:h?1:0,click_mute:this.innerStates.mutedStateChange?h?2:1:0,session_order:c++});a.W.event("video_play_end",_),this.innerStates.isFirstPlayEndReported=!0}}};u=(0,o.__decorate)([(0,n.G)()],u)},4180:(e,t,i)=>{i.d(t,{s:()=>a});var o,n=i(95872);!function(e){e.RightClick="right_click",e.ClickDownload="click_download",e.ClickCopyVideoUrl="click_copy_video_url",e.ClickPictureInPicture="click_picture_in_picture"}(o||(o={}));const a={handleContextMenu:e=>{n.W.event("right_click",e)},handleDownload:e=>{n.W.event("click_download",e)},handleCopyVideoUrl:e=>{n.W.event("click_copy_video_url",e)},handlePictureInPicture:e=>{n.W.event("click_picture_in_picture",e)}}},78662:(e,t,i)=>{i.d(t,{d:()=>a});var o,n=i(95872);!function(e){e.FavouriteVideo="favourite_video",e.FavouriteCancel="cancel_favourite_video",e.ShowFavouriteEntrance="show_my_favourite_entrance",e.ClickFavouriteEntrance="click_my_favourite_entrance",e.EnterPersonalFavourite="enter_personal_favourite"}(o||(o={}));const a={handleFavoriteResult:(e,t)=>{const i=1===t?"favourite_video":"cancel_favourite_video";n.W.event(i,e)},handleShowEntrance:()=>{n.W.event("show_my_favourite_entrance")},handleClickEntrance:()=>{n.W.event("click_my_favourite_entrance")},handleEnterFavourite:e=>{n.W.event("enter_personal_favourite",{enter_method:e})}}},98224:(e,t,i)=>{i.d(t,{W:()=>s});var o,n,a=i(95872);!function(e){e.RemovePhotosensitiveStatus="tns_remove_photosensitive_status",e.ShowMaskLayer="tns_show_mask_layer",e.ShowPhotosensitiveRemoved="tns_show_photosensitive_removed",e.MaskLayerClickSkip="tns_mask_layer_click_skip",e.MaskLayerClickWatch="tns_mask_layer_click_watch"}(o||(o={})),function(e){e.General="general",e.Photosensitive="photosensitive"}(n||(n={}));const s={handleRemovePhotosensitiveStatus:e=>{a.W.event("tns_remove_photosensitive_status",{status:e})},handleShowMaskLayer:e=>{a.W.event("tns_show_mask_layer",e)},handleShowPhotosensitiveRemoved:e=>{a.W.event("tns_show_photosensitive_removed",e)},handleMaskLayerClickSkip:e=>{a.W.event("tns_mask_layer_click_skip",e)},handleMaskLayerClickWatch:e=>{a.W.event("tns_mask_layer_click_watch",e)}}},69405:(e,t,i)=>{i.d(t,{G4:()=>c,PO:()=>u,ec:()=>p});var o,n,a=i(64047),s=i(57244),r=i(90293),l=i(95872),d=i(17130);!function(e){e.Play="video_play",e.Finish="video_play_finish",e.Stop="play_time",e.SchedulePlay="schedule_video_play",e.ScheduleFinish="schedule_video_play_finish",e.ScheduleStop="schedule_video_play_time",e.PreviewVideoPlay="preview_video_play",e.PreviewVideoFinish="preview_video_play_finish",e.PreviewVideoStop="preview_play_time",e.Pause="video_pause"}(o||(o={})),function(e){e.ClickPause="click_pause",e.Slide="slide",e.Keyboard="keyboard"}(n||(n={}));const c=e=>{const{isAds:t,adsType:i}=e;return{is_ads:t,ads_type:i}},u=e=>{const{video_width:t,video_height:i,video_duration:o}=e;return{video_width:t,video_height:i,video_duration:o}};let p=class{constructor(){this.isFirstPlayReported=!1,this.isFirstPlayEndReported=!1,this.isPause=!1,this.startPlayTimestamp=0,this.enterMethod="",this.prevReportId="",this.videoFocusTime=0,this.isThreeColumnAuto=!1,this.isVideoDetail=!1,this.isDarkMode=!1,this.setEnterMethod=e=>{this.enterMethod=e},this.setIsDarkMode=e=>{this.isDarkMode=e},this.setIsThreeColumnAuto=e=>{this.isThreeColumnAuto=e},this.setIsVideoDetail=e=>{this.isVideoDetail=e},this.reset=()=>{this.isFirstPlayReported=!1,this.isFirstPlayEndReported=!1},this.updateVideoFocusTime=e=>{const{isPause:t,startPlayTimestamp:i}=this,{ttWebappFocusTime:o}=window;!t&&o&&(this.videoFocusTime+=o>i?e-o:e-i)},this.handlePlayTime=e=>{this.playTimeEvent(e)},this.handleTimeUpdate=(e,t=!1)=>{const{isFirstPlayReported:i,startPlayTimestamp:o,enterMethod:n}=this,{itemId:a,authorId:s,isScheduled:r,autoplayStatus:d=0,currentTime:p,searchId:g="",searchKeyword:h,searchResultId:m,questionId:_,playMode:v,isMute:y=!1,fromTab:b,hasSubtitle:f,captionsShowType:x,collectionId:w,collectionName:k,isPaidPartnership:S=!1,poiId:C,awemeType:j,picCnt:T,playlistId:I="",popupType:P="",enterTab:O,diversifyId:L,tab_name:M,enterMethod:E,isSubOnlyVideo:A}=e;if(!p)return;const D="1"===f?{has_subtitle:f,captions_show_type:x}:{has_subtitle:f};let F=null;if(!i){const i=Object.assign(Object.assign(Object.assign(Object.assign({group_id:a,author_id:s,play_mode:this.getPlayModeForTea(v),autoplay_status:d,enter_method:null!=E?E:n,search_id:g,search_keyword:h,search_result_id:m,question_id:_,from_tab:b,is_dark:this.isDarkMode?"1":"0",collection_id:w,collection_name:k,poi_id:C,aweme_type:null!=j?j:0,pic_cnt:T,playlist_id:I,popup_type:P,enter_tab:O,tab_name:M,diversify_id:L,is_sub_only_video:A},D),this.getExtraParams()),c(e)),u(e)),o=r?"schedule_video_play":1===v?"preview_video_play":"video_play",p=t&&this.prevReportId===a;"video_play"===o&&(i.is_mute=y?"1":"0",i.is_partnership=S?"1":"0"),p||(F=o,l.W.event(o,i),this.isFirstPlayReported=!0,this.prevReportId=a)}return 0===o&&this.setStartPlay(),this.isPause=!1,F},this.handleEnded=e=>{this.playFinishEvent(e)},this.handlePause=e=>{const{currentTime:t,duration:i}=e;i!==t&&this.playTimeEvent(e),this.isPause=!0},this.handleWaiting=e=>{const{currentTime:t,duration:i}=e;0!==t&&t!==i&&this.playTimeEvent(e)},this.handleError=e=>{this.playTimeEvent(e)},this.triggerPause=e=>{if(!this.isPause){const{enter_method:t,playMode:i,aweme_type:o=0,pic_cnt:n}=e,a={enter_method:t,play_mode:this.getPlayModeForTea(i),aweme_type:o,pic_cnt:n};l.W.event("video_pause",a)}this.isPause=!0},this.triggerPlay=()=>{this.isPause=!1},this.handleAudioPlay=e=>{this.prevReportId=e}}getPlayModeForTea(e){let t="others";switch(e){case 2:t="browser_mode";break;case 0:t=this.isVideoDetail?"others":"one_column";break;case 1:t=this.isThreeColumnAuto?"list_auto":"list_mouse_trigger";break;case 3:t="swiper_mode";break;case 4:t="video_detail";break;case 6:t="pip";break;case 5:t="fullscreen"}return t}setStartPlay(){this.startPlayTimestamp=Date.now(),this.videoFocusTime=0}playFinishEvent(e){const{isFirstPlayEndReported:t,enterMethod:i}=this,{itemId:o,authorId:n,isScheduled:a,autoplayStatus:s=0,searchId:r="",searchKeyword:d,searchResultId:p,playMode:g,isMute:h,collectionId:m,collectionName:_,poiId:v,awemeType:y,picCnt:b,playlistId:f="",popupType:x="",enterTab:w,diversifyId:k,tab_name:S,enterMethod:C,isSubOnlyVideo:j}=e;if(!t){const t=Object.assign(Object.assign(Object.assign({group_id:o,author_id:n,play_mode:this.getPlayModeForTea(g),autoplay_status:s,enter_method:null!=C?C:i,search_id:r,search_keyword:d,search_result_id:p,collection_id:m,collection_name:_,poi_id:v,aweme_type:null!=y?y:0,pic_cnt:b,enter_tab:w,diversify_id:k,is_dark:this.isDarkMode?"1":"0",playlist_id:f,popup_type:x,is_sub_only_video:j,tab_name:S},this.getExtraParams()),c(e)),u(e));void 0!==h&&(t.is_mute=h?"1":"0");const T=a?"schedule_video_play_finish":1===g?"preview_video_play_finish":"video_play_finish";l.W.event(T,t),this.isFirstPlayEndReported=!0}}playTimeEvent(e){const{startPlayTimestamp:t,enterMethod:i,videoFocusTime:o}=this,{itemId:n,authorId:a,isScheduled:s,autoplayStatus:r=0,searchId:p="",searchKeyword:g,searchResultId:h,questionId:m,playMode:_,isMute:v,fromTab:y,hasSubtitle:b,captionsShowType:f,collectionId:x,collectionName:w,poiId:k,awemeType:S,picCnt:C,playlistId:j="",popupType:T="",enterTab:I,diversifyId:P,tab_name:O,enterMethod:L,isSubOnlyVideo:M}=e,{ttWebappFocusTime:E,ttWebappBlurTime:A}=window;let D=0;const F=Date.now();E?D=E<t?F-t:o+F-E:A&&(D=A>t?o:0);const R="1"===b?{has_subtitle:b,captions_show_type:f}:{has_subtitle:b};if(0!==t){const o=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({group_id:n,author_id:a,play_mode:this.getPlayModeForTea(_),autoplay_status:r,duration:Math.max(F-t,0),enter_method:null!=L?L:i,search_id:p,search_keyword:g,search_result_id:h,question_id:m,focus_time:D,from_tab:y,is_dark:this.isDarkMode?"1":"0",collection_id:x,collection_name:w,poi_id:k,aweme_type:null!=S?S:0,pic_cnt:C,playlist_id:j,popup_type:T,enter_tab:I,diversify_id:P,is_sub_only_video:M,tab_name:O},R),this.getExtraParams()),d.r.getScreenRatio()),c(e)),u(e));void 0!==v&&(o.is_mute=v?"1":"0");const b=s?"schedule_video_play_time":1===_?"preview_play_time":"play_time";l.W.event(b,o),this.startPlayTimestamp=0}}getExtraParams(){var e;const{href:t,search:i}=window.location;return{is_from_webapp:null!==(e=(0,r.parse)(i).is_from_webapp)&&void 0!==e?e:"0",page_url:t}}};p=(0,a.__decorate)([(0,s.G)()],p)},86032:(e,t,i)=>{i.d(t,{o:()=>a});var o,n=i(95872);!function(e){e.ClickPrivacySettingVideo="click_privacy_setting_video",e.SelectPrivacySettingVideo="select_privacy_setting_video",e.PrivacySettingAllowInteraction="privacy_setting_allow_interaction",e.ClickDeleteVideo="click_delete_video",e.ActionOnDeleteVideo="action_on_delete_video",e.ScheduleDeleteClick="click_delete_scheduled_video",e.ScheduleDeleteAction="action_on_delete_scheduled_video"}(o||(o={}));const a={handleClickPrivacySettingVideo:e=>{n.W.event("click_privacy_setting_video",e)},handleSelectPrivacySettingVideo:e=>{n.W.event("select_privacy_setting_video",e)},handlePrivateSetting:e=>{n.W.event("privacy_setting_allow_interaction",e)},handleClickDeleteVideo:e=>{n.W.event("click_delete_video",e)},handleVideoDelete:e=>{n.W.event("action_on_delete_video",{action:e})},handleScheduleConfirm:e=>{n.W.event("click_delete_scheduled_video",{group_id:e})},handleScheduleDelete:e=>{n.W.event("action_on_delete_scheduled_video",{action:e})}}},17130:(e,t,i)=>{i.d(t,{r:()=>a});var o,n=i(95872);!function(e){e.LoadMore="load_more",e.SlideUp="video_slide_up",e.SlideDown="video_slide_down",e.EnterBrowserMode="feed_enter",e.BrowserModeExit="feed_exit",e.BrowserAdjustSize="browser_size_adjust",e.CloseWindow="close_window",e.HotSlideUp="homepage_hot_slide_up",e.HotSlideDown="homepage_hot_slide_down"}(o||(o={}));const a={handleListMore:e=>{n.W.event("load_more",e)},handleVideoChange:(e,t)=>{const i="next"===t?"video_slide_up":"video_slide_down";n.W.event(i,e)},handleHotVideoChange:(e,t)=>{const i="next"===t?"homepage_hot_slide_up":"homepage_hot_slide_down";n.W.event(i,e)},handleEnterBrowser:e=>{n.W.event("feed_enter",e)},handleEnterBrowserOpt:e=>{n.W.event("feed_enter",e)},handleExitBrowser:e=>{n.W.event("feed_exit",e)},handleAdjustBrowserSize:e=>{n.W.event("browser_size_adjust",e)},handleCloseWindow:e=>{n.W.event("close_window",e)},getScreenRatio:()=>{const e=screen.height,t=screen.width,i=window.innerWidth,o=window.innerHeight;return{width:i,height:o,width_max:t,height_max:e,height_ratio:o/e,width_ratio:i/t}}}},71387:(e,t,i)=>{i.d(t,{qP:()=>y,pq:()=>u,L2:()=>h,OL:()=>b,G4:()=>x,wA:()=>w,wu:()=>g,hZ:()=>k,Ke:()=>p});var o,n,a,s,r,l,d=i(90293);!function(e){e[e.HaveNothing=0]="HaveNothing",e[e.HaveMetaData=1]="HaveMetaData",e[e.HaveCurrentData=2]="HaveCurrentData",e[e.HaveFutureData=3]="HaveFutureData",e[e.HaveEnoughData=4]="HaveEnoughData"}(o||(o={})),function(e){e[e.Public=0]="Public",e[e.Self=1]="Self",e[e.Friend=2]="Friend"}(n||(n={})),function(e){e[e.PlayStop=0]="PlayStop",e[e.ResumePlaying=1]="ResumePlaying"}(a||(a={})),function(e){e.FeedRequest="feed_request",e.FeedRequestResponse="feed_request_response"}(s||(s={})),function(e){e.LoadMore="load_more"}(r||(r={})),function(e){e.PlayQuality="video_play_quality",e.PlayEnded="video_play_end",e.PlayFailed="video_play_failed",e.BlockStart="video_block_start",e.Block="video_block",e.Request="video_request",e.RequestResponse="video_request_response",e.FirstFrame="first_feed_show_time"}(l||(l={}));const c={0:"one_column",1:"three_column",2:"browser_mode",3:"swiper_mode",4:"video_detail",6:"pip",5:"fullscreen"},u=e=>e&&Array.isArray(e)?e.map((e=>{var t;return null!==(t=e.GearName)&&void 0!==t?t:"unknown"})):null,p=e=>e&&Array.isArray(e)?e.map((e=>`${e.QualityType}:${e.Bitrate}`)):null,g=()=>{var e,t;return{cpu_core:null!==(e=null===navigator||void 0===navigator?void 0:navigator.hardwareConcurrency)&&void 0!==e?e:0,memory_size:null!==(t=null===navigator||void 0===navigator?void 0:navigator.deviceMemory)&&void 0!==t?t:0}},h=e=>void 0!==e&&e.length>0?1e3*Math.round(e.end(0)-e.start(0)):0,m=(e,t)=>e?2:t?1:0,_=e=>{var t,i;return e?null!==(i=null===(t=(0,d.parse)(e).lr)||void 0===t?void 0:t.toString())&&void 0!==i?i:"none":"unknown"},v=(e="")=>{if(!e)return"";const t=e.match(/https?:\/\/([^/]+)\//i);let i="";return(null==t?void 0:t[1])&&(i=t[1]),i},y=e=>{if(!e||"string"!=typeof e)return 0;let t=0;try{const i=new RegExp("(\\?|&)expire=([^&]*)(&|$)"),o=e.match(i);if(null!==o)t=parseInt(o[2],10);else{const i=e.split("/");i.length>5&&8===i[4].length&&(t=parseInt(i[4],16))}return t>0?t<parseInt(String((new Date).getTime()/1e3),10)?1:2:0}catch(e){return 0}},b=e=>{var t;const{id:i,authorId:o,playMode:n,currentSrc:a="",forFriend:s=!1,secret:r=!1,play_url:l,awemeType:d,picCnt:u,playlist_id:p="",popup_type:g="",size:h=-1}=e;return{group_id:i,author_id:o,play_mode:null!==(t=c[n])&&void 0!==t?t:"others",logo_type:_(a),item_status:m(s,r),play_url:l,host:v(l),aweme_type:null!=d?d:0,pic_cnt:u,playlist_id:p,popup_type:g,size:h}},f=(e,t)=>{const i=(e=>!e||/^(\d)*p$/i.test(`${e}`))(t);return i?e&&t?`${e}_${t}`:`unknownQuality_fromServer_${e}_${t}`:t},x=e=>{const{bitrate:t=-1,format:i="",codecType:o="",encodedType:n="",videoQuality:a="",definition:s="",encodeUserTag:r="",originalDefinition:l=""}=e;return{video_bitrate:t,video_format:i,codec_format:o,encoded_type:n,bitrate_quality:a,video_quality:String(f(a,s)),video_encodeUserTag:r,original_definition:l}},w=e=>{const{preload_size:t=-1,preload_time:i=-1,video_type:o="mp4",player_type:n="defaultPlayer"}=e;return{preload_size:t,preload_time:i,player_type:n,video_type:o}},k=e=>{const{totalWatchCount:t,foruWatchCount:i}=e;return{watch_count_total:t,watch_count_foru:i}}},44663:(e,t,i)=>{i.d(t,{Q:()=>l});var o=i(11040),n=i(93801),a=i(64414),s=i(36488);const r=(0,n.Z)("span",{target:"e1aglo370"})((({width:e,height:t,style:i={},theme:{direction:o}})=>[(0,s.YJ)({direction:o,marginStart:"4px"}),Object.assign(Object.assign({},i),{width:"number"==typeof e?`${e}px`:e,height:"number"==typeof t?`${t}px`:t})]),"label:SpanVerifyBadgeContainer;"),l=e=>(0,o.jsx)(r,Object.assign({},e,{children:(0,o.jsx)(a.e,{size:"number"==typeof e.width?e.width:void 0},void 0)}),void 0)},99603:(e,t,i)=>{i.d(t,{hb:()=>g,XU:()=>c,gh:()=>p});var o=i(43226),n=i.n(o),a=i(91051);const s={Positive:"rgba(11, 224, 155, 1)",Negative:"rgba(255, 76, 58, 1)",ToastDefault:"rgba(84, 84, 84, .92)",ToastNegative:"rgba(255, 76, 58, .92)",Secondary:"rgba(32, 213, 236, 1)",TUXSecondary2:"rgba(16, 162, 197, 1)",Positive2:"rgba(79, 171, 126, 1)",ConstTextInverse:"rgba(255, 255, 255, 1)",ConstTextInverse2:"rgba(255, 255, 255, .9)",ConstTextInverse3:"rgba(255, 255, 255, .75)",ConstTextInverse4:"rgba(255, 255, 255, .5)",ConstTextInverse5:"rgba(255, 255, 255, .34)",ConstTextPrimary:"rgba(22, 24, 35, 1)",ConstBGInverse:"rgba(0, 0, 0, 1)",ConstBGInverse2:"rgba(0, 0, 0, .6)",ConstBGInverse3:"rgba(37, 37, 37, .6)",ConstBGInverse4:"rgba(84, 84, 84, .5)",TUXBGCreation:"rgba(0, 0, 0, 1)",BGCreation2:"rgba(27, 27, 27, 1)",BGCreation5:"rgba(0, 0, 0, .15)",ConstBGMat:"rgba(255, 255, 255, .2)",ConstBGContainer:"rgba(255, 255, 255, .12)",ConstBGContainer2:"rgba(255, 255, 255, .08)",ConstBGContainer3:"rgba(255, 255, 255, .04)",ConstBGPlaceholderOpaque:"rgba(241, 241, 241, 1)",ConstBGInverseOpaque:"rgba(37, 37, 37, 1)",ConstBGInverse1:"rgba(56, 56, 56, .95)",ConstLineInverse:"rgba(255, 255, 255, .2)",ConstLineInverse2:"rgba(255, 255, 255, .12)",SDPrimary:"rgba(0, 0, 0, .8)",AssistColorYellow:"rgba(250, 206, 21, 1)",Primary:"rgba(255, 59, 92, 1)",Link:"rgba(255, 59, 92, 1)",Primary2:"rgba(255, 255, 255, .9)",TextPrimary:"rgba(255, 255, 255, .9)",TextSecondary:"rgba(255, 255, 255, .75)",TextTertiary:"rgba(255, 255, 255, .5)",TextQuaternary:"rgba(255, 255, 255, .34)",BGPrimary:"rgba(18, 18, 18, 1)",BGSecondary:"rgba(37, 37, 37, 1)",BGTertiary:"rgba(46, 46, 46, 1)",BGQuaternary:"rgba(56, 56, 56, 1)",BGQuinary:"rgba(75, 75, 75, 1)",BGSecondary2:"rgba(255, 255, 255, .08)",BGTertiary2:"rgba(255, 255, 255, .12)",BGPlaceholderDefault:"rgba(255, 255, 255, .08)",BGPlaceholderOpaque:"rgba(37, 37, 37, 1)",BGInput:"rgba(255, 255, 255, .12)",BGInput2:"rgba(255, 255, 255, .08)",BGView:"rgba(255, 255, 255, .04)",BGCreation3:"rgba(18, 18, 18, 1)",BGCreation4:"rgba(27, 27, 27, 1)",BGHover:"rgba(255, 255, 255, .9)",BGBrand:"rgba(254, 44, 85, .34)",LinePrimary:"rgba(255, 255, 255, 0)",LineSecondary:"rgba(255, 255, 255, .12)",LineInput:"rgba(255, 255, 255, .5)",LinePrimary2:"rgba(255, 255, 255, .2)",LineSecondary2:"rgba(255, 255, 255, 0)",TUXLineSecondary3:"rgba(255, 255, 255, .5)",LineDarker:"rgba(0, 0, 0, .6)",SDSecondary:"rgba(0, 0, 0, .68)",SDTertiary:"rgba(0, 0, 0, .5)",Secondary2:"rgba(0, 198, 233, 1.0)",Link2:"rgba(255, 59, 92, 1.0)",Link3:"rgba(255, 59, 92, 1.0)",TextTertiary2:"rgba(255, 255, 255, 0.75)",TextReverse:"rgba(255, 255, 255, 0.9)",TextReverse2:"rgba(255, 255, 255, 0.75)",TextReverse3:"rgba(255, 255, 255, 0.5)",TextReverse4:"rgba(255, 255, 255, 0.34)",BGPrimary2:"rgba(255, 255, 255, 0.04)",BGView2:"rgba(255, 255, 255, 0.0)",BGCreation:"rgba(18, 18, 18, 1.0)",BGInverse3:"rgba(37, 37, 37, 0.6)",BGReverse:"rgba(18, 18, 18, 1.0)",BGReverse2:"rgba(18, 18, 18, 0.9)",ShadowPrimary:"rgba(255,255, 255, 0.12)",ShadowSecondary:"rgba(0, 0, 0, 0.06)",LineSecondary3:"rgba(255, 255, 255, 0.0)",LineReverse2:"rgba(255, 255, 255, 0.12)",LineReverse3:"rgba(255, 255, 255, 0.0)",LineInverse:"rgba(255, 255, 255, 0.0)",TagGreenText:"rgba(178, 255, 217, 1.0)",TagGreenBG:"rgba(89, 128, 102, 1.0)",TagPurpleText:"rgba(255, 178, 217, 1.0)",TagPurpleBG:"rgba(128, 89, 108, 1.0)",TagBrownText:"rgba(255, 179, 179, 1.0)",TagBrownBG:"rgba(128, 89, 89, 1.0)",LiveColorStart:"rgba(255, 23, 100, 1.0)",LiveColorEnd:"rgba(237, 52, 149, 1.0)",ConstSecondary:"rgba(32, 213, 236, 1)",ConstSecondary2:"rgba(16, 162, 197, 1)",BGMessageIcon:"rgba(255, 255, 255, 0.08)",BGMessageOperateHover:"rgba(255, 255, 255, 0.12)",TextTertiaryAlt:"rgba(255, 255, 255, 0.6)",AssistColorAzure:"rgba(143, 190, 233, 1)"},r={Proxima:'"IBM Plex Sans", ProximaNova, Arial, Tahoma, PingFangSC, sans-serif',Sofia:'"IBM Plex Sans", SofiaPro, Arial, Tahoma, PingFangSC, sans-serif'},l={P0:{fontSize:"24px",lineHeight:"32px"},P1:{fontSize:"18px",lineHeight:"25px"},P2:{fontSize:"16px",lineHeight:"22px"},P3:{fontSize:"14px",lineHeight:"20px"},P4:{fontSize:"12px",lineHeight:"17px"},H0:{fontSize:"96px",lineHeight:"115px"},H1:{fontSize:"72px",lineHeight:"86px"},H2:{fontSize:"56px",lineHeight:"68px"},H3:{fontSize:"32px",lineHeight:"38px"},H4:{fontSize:"24px",lineHeight:"28px"},H5:{fontSize:"18px",lineHeight:"22px"},H6:{fontSize:"14px",lineHeight:"17px"}};var d;!function(e){e[e.Dark=0]="Dark",e[e.Bright=1]="Bright",e[e.System=2]="System"}(d||(d={}));const c={isMobile:!1,direction:"ltr",isDark:!1,colors:{Positive:"rgba(11, 224, 155, 1)",Negative:"rgba(255, 76, 58, 1)",ToastDefault:"rgba(84, 84, 84, .92)",ToastNegative:"rgba(255, 76, 58, .92)",Secondary:"rgba(32, 213, 236, 1)",TUXSecondary2:"rgba(16, 162, 197, 1)",Positive2:"rgba(79, 171, 126, 1)",ConstTextInverse:"rgba(255, 255, 255, 1)",ConstTextInverse2:"rgba(255, 255, 255, .9)",ConstTextInverse3:"rgba(255, 255, 255, .75)",ConstTextInverse4:"rgba(255, 255, 255, .5)",ConstTextInverse5:"rgba(255, 255, 255, .34)",ConstTextPrimary:"rgba(22, 24, 35, 1)",ConstBGInverse:"rgba(0, 0, 0, 1)",ConstBGInverse2:"rgba(0, 0, 0, .6)",ConstBGInverse3:"rgba(37, 37, 37, .6)",ConstBGInverse4:"rgba(84, 84, 84, .5)",TUXBGCreation:"rgba(0, 0, 0, 1)",BGCreation2:"rgba(27, 27, 27, 1)",BGCreation5:"rgba(0, 0, 0, .15)",ConstBGMat:"rgba(255, 255, 255, .2)",ConstBGContainer:"rgba(255, 255, 255, .12)",ConstBGContainer2:"rgba(255, 255, 255, .08)",ConstBGContainer3:"rgba(255, 255, 255, .04)",ConstBGPlaceholderOpaque:"rgba(241, 241, 241, 1)",ConstBGInverseOpaque:"rgba(37, 37, 37, 1)",ConstBGInverse1:"rgba(56, 56, 56, .95)",ConstLineInverse:"rgba(255, 255, 255, .2)",ConstLineInverse2:"rgba(255, 255, 255, .12)",SDPrimary:"rgba(0, 0, 0, .8)",AssistColorYellow:"rgba(250, 206, 21, 1)",Primary:"rgba(254, 44, 85, 1)",Link:"rgba(254, 44, 85, 1)",Primary2:"rgba(22, 24, 35, 1)",TextPrimary:"rgba(22, 24, 35, 1)",TextSecondary:"rgba(22, 24, 35, .75)",TextTertiary:"rgba(22, 24, 35, .5)",TextQuaternary:"rgba(22, 24, 35, .34)",BGPrimary:"rgba(255, 255, 255, 1)",BGSecondary:"rgba(255, 255, 255, 1)",BGTertiary:"rgba(255, 255, 255, 1)",BGQuaternary:"rgba(255, 255, 255, 1)",BGQuinary:"rgba(255, 255, 255, 1)",BGSecondary2:"rgba(255, 255, 255, 1)",BGTertiary2:"rgba(255, 255, 255, 1)",BGPlaceholderDefault:"rgba(22, 24, 35, .06)",BGPlaceholderOpaque:"rgba(241, 241, 241, 1)",BGInput:"rgba(22, 24, 35, .06)",BGInput2:"rgba(22, 24, 35, .06)",BGView:"rgba(22, 24, 35, .03)",BGCreation3:"rgba(248, 248, 248, 1)",BGCreation4:"rgba(255, 255, 255, 1)",BGHover:"rgba(22, 24, 35, .06)",BGBrand:"rgba(254, 44, 85, .06)",LinePrimary:"rgba(22, 24, 35, .2)",LineSecondary:"rgba(22, 24, 35, .12)",LineInput:"rgba(22, 24, 35, .5)",LinePrimary2:"rgba(22, 24, 35, .2)",LineSecondary2:"rgba(22, 24, 35, .12)",TUXLineSecondary3:"rgba(22, 24, 35, .12)",LineDarker:"rgba(22, 24, 35, .12)",SDSecondary:"rgba(0, 0, 0, .5)",SDTertiary:"rgba(0, 0, 0, .2)",Secondary2:"rgba(0, 198, 233, 1.0)",Link2:"rgba(254, 44, 85, 1.0)",Link3:"rgba(254, 44, 85, 1.0)",TextTertiary2:"rgba(22, 24, 35, 0.5)",TextReverse:"rgba(22, 24, 35, 1.0)",TextReverse2:"rgba(22, 24, 35, 0.75)",TextReverse3:"rgba(22, 24, 35, 0.5)",TextReverse4:"rgba(22, 24, 35, 0.34)",BGPrimary2:"rgba(255, 255, 255, 1.0)",BGView2:"rgba(22, 24, 35, 0.03)",BGCreation:"rgba(18, 18, 18, 1.0)",BGInverse3:"rgba(37, 37, 37, 0.6)",BGReverse:"rgba(255, 255, 255, 1.0)",BGReverse2:"rgba(255, 255, 255, 0.9)",ShadowPrimary:"rgba(0, 0, 0, 0.12)",ShadowSecondary:"rgba(0, 0, 0, 0.06)",LineSecondary3:"rgba(22, 24, 35, 0.03)",LineReverse2:"rgba(22, 24, 35, 0.12)",LineReverse3:"rgba(22, 24, 35, 0.12)",LineInverse:"rgba(22, 24, 35, 0.2)",TagGreenText:"rgba(89, 128, 108, 1.0)",TagGreenBG:"rgba(239, 245, 242, 1.0)",TagPurpleText:"rgba(128, 89, 121, 1.0)",TagPurpleBG:"rgba(246, 240, 245, 1.0)",TagBrownText:"rgba(128, 89, 89, 1.0)",TagBrownBG:"rgba(245, 240, 240, 1.0)",LiveColorStart:"rgba(255, 23, 100, 1.0)",LiveColorEnd:"rgba(237, 52, 149, 1.0)",ConstSecondary:"rgba(32, 213, 236, 1.0)",ConstSecondary2:"rgba(16, 162, 197, 1.0)",BGMessageIcon:"rgb(241, 241, 242)",BGMessageOperateHover:"rgba(196, 196, 196, .425)",TextTertiaryAlt:"rgba(22, 24, 35, 0.6)",AssistColorAzure:"rgba(43, 93, 185, 1)"},link:{color:"#0078d4",hoverColor:"#004578",activeColor:"#004578",focusColor:"#0078d4",visitedColor:"#0078d4"},selection:{background:"rgba(141, 214, 249, 0.35)"},text:{fontFamily:'"SofiaPro", PingFangSC, sans-serif',fontSize:"14px",color:"#000"},border:{radius:"3px"},boxShadowBase:"0 1.6px 3.6px 0 rgba(0,0,0,.132), 0 0.3px 0.9px 0 rgba(0,0,0,.108)",markdown:{blockquote:{color:"#4e7182",backgroundColor:"#eaf8ff"},inlineCode:{color:"hotpink",background:"rgba(70, 94, 105, 0.05)"}},typography:{P0:{fontSize:"24px",lineHeight:"32px"},P1:{fontSize:"18px",lineHeight:"25px"},P2:{fontSize:"16px",lineHeight:"22px"},P3:{fontSize:"14px",lineHeight:"20px"},P4:{fontSize:"12px",lineHeight:"17px"},H0:{fontSize:"96px",lineHeight:"115px"},H1:{fontSize:"72px",lineHeight:"86px"},H2:{fontSize:"56px",lineHeight:"68px"},H3:{fontSize:"32px",lineHeight:"38px"},H4:{fontSize:"24px",lineHeight:"28px"},H5:{fontSize:"18px",lineHeight:"22px"},H6:{fontSize:"14px",lineHeight:"17px"}},fontFamilies:{Proxima:"ProximaNova, Arial, Tahoma, PingFangSC, sans-serif",Sofia:"SofiaPro, Arial, Tahoma, PingFangSC, sans-serif"},fontWeights:{normal:400,medium:500,semiBold:600,bold:700}};function u(e,t){var i;const o=Object.create(null);for(const[n,a]of Object.entries(e)){const e=t[n];o[n]="object"==typeof e?u(a,e):null!==(i=t[n])&&void 0!==i?i:a}return o}function p(e){const{isDark:t,isMobile:i,lang:o}=e,n={};return t&&(n.colors=s,n.isDark=!0),i&&(n.typography=l),"vi-VN"===o?n.fontFamilies=r:"ar"!==o&&"he-IL"!==o&&"ur"!==o||(n.direction="rtl"),n.isMobile=i,u(c,n)}const g=(0,a.createContext)({value:!1,toggle:n()})},36488:(e,t,i)=>{i.d(t,{Mz:()=>o,XP:()=>n,gi:()=>a,GI:()=>s,wj:()=>r,FC:()=>l,ZD:()=>d,Ph:()=>c,Cx:()=>u,f1:()=>g,YJ:()=>m,$K:()=>_,VZ:()=>v});const o=60,n=1150,a={":hover, :active, :link":{textDecoration:"none"}};function s({theme:e,typography:t,color:i,fontFamily:o,fontWeight:n,isLink:a=!1}){const s=a&&i?{":hover, :active, :link, :visited":{color:e.colors[i]}}:null;return[{color:i&&e.colors[i],fontFamily:o&&e.fontFamilies[o],fontWeight:n&&e.fontWeights[n]},t?e.typography[t]:void 0,s]}const r={textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},l=e=>({display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",lineClamp:e,boxOrient:"vertical",WebkitLineClamp:e,WebkitBoxOrient:"vertical"}),d=({theme:e,isUiOptimise:t=!1})=>t?{backgroundColor:e.colors.ConstBGInverse4,":hover":{backgroundColor:e.colors.ConstBGInverse3}}:{},c={border:"none",background:"none",outline:"none",padding:0},u=e=>({position:"absolute",left:"0",[e]:"0",width:"100%",height:"1px",transform:"scaleY(0.5)"});var p;function g(...e){return e.map((({max:e,min:t,orientation:i,minAspectRatio:o,aspectRatio:n,maxAspectRatio:a,style:s={}})=>{if(!e&&!t&&!n)return{};let r="@media screen";return"number"==typeof t&&(r+=` and (min-width: ${t}px)`),"number"==typeof e&&(r+=` and (max-width: ${e}px)`),"string"==typeof i&&(r+=` and (orientation: ${i})`),"string"==typeof o&&(r+=` and (min-aspect-ratio: ${o})`),"string"==typeof n&&(r+=` and (aspect-ratio: ${n})`),"string"==typeof a&&(r+=` and (max-aspect-ratio: ${a})`),{[r]:s}}))}!function(e){e[e.Laptop=1920]="Laptop",e[e.HeaderWidth=1080]="HeaderWidth",e[e.NarrowLaptop=1072]="NarrowLaptop",e[e.Pad=768]="Pad",e[e.Phone=480]="Phone"}(p||(p={}));const h={ltr:{end:"right",start:"left",marginEnd:"marginRight",marginStart:"marginLeft",paddingEnd:"paddingRight",paddingStart:"paddingLeft"},rtl:{end:"left",start:"right",marginEnd:"marginLeft",marginStart:"marginRight",paddingEnd:"paddingLeft",paddingStart:"paddingRight"}};function m({direction:e,marginEnd:t,marginStart:i,end:o,start:n,textAlign:a,paddingEnd:s,paddingStart:r}){const l=h[e],d={};return a&&(d.textAlign=_(e,a)),t&&(d[l.marginEnd]=t),i&&(d[l.marginStart]=i),n&&(d[l.start]=n),o&&(d[l.end]=o),s&&(d[l.paddingEnd]=s),r&&(d[l.paddingStart]=r),d}function _(e,t){return h[e][t]}function v({theme:e,hover:t=e.colors.BGView,active:i=e.colors.BGInput}){return{transition:"background ease-in-out 200ms",":hover":{background:t},":active":{background:i}}}},75311:(e,t,i)=>{i.d(t,{q:()=>g});var o,n=i(64047),a=i(11040),s=i(91051),r=i(7998);!function(e){e.Empty="rgba(18, 18, 18, 0.03)",e.Default="rgba(136, 136, 136, 0.5)"}(o||(o={}));const l=(0,r.Z)("span",{target:"e1e9er4e0"})((({shape:e,empty:t,isShowBackground:i})=>[{display:"inline-block",boxSizing:"border-box",margin:"0",padding:"0",fontFeatureSettings:'"tnum"',position:"relative",overflow:"hidden",color:"#fff",whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",lineHeight:"32px",borderRadius:"square"===e?"0":"50%"},i?{backgroundColor:t?"rgba(18, 18, 18, 0.03)":"rgba(136, 136, 136, 0.5)"}:null]),"label:SpanAvatarContainer;"),d=(0,r.Z)("img",{target:"e1e9er4e1"})({width:"100%",height:"100%",objectFit:"cover"},"label:ImgAvatar;"),c=(0,r.Z)("svg",{target:"e1e9er4e2"})({width:"100%",height:"100%"},"label:SvgContainer;"),u={EMPTY:(0,a.jsx)(c,Object.assign({width:"300",height:"300",viewBox:"0 0 300 300",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},{children:(0,a.jsx)("rect",{cx:"150",cy:"150",fill:"#888",fillOpacity:".5"},void 0)}),void 0),NON_EMPTY:(0,a.jsxs)(c,Object.assign({width:"300",height:"300",viewBox:"0 0 300 300",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},{children:[(0,a.jsx)("rect",{cx:"150",cy:"150",fill:"#888",fillOpacity:".5"},void 0),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M58.74 269.054C74.383 234.242 109.361 210 150 210s75.617 24.242 91.26 59.054C215.978 288.463 184.336 300 150 300c-34.336 0-65.978-11.537-91.26-30.946z",fill:"#fff",fillOpacity:".75"},void 0),(0,a.jsx)("circle",{cx:"150",cy:"138",r:"55",fill:"#fff",fillOpacity:".75"},void 0)]}),void 0)},p=()=>!0,g=(0,s.memo)((function(e){const{src:t,empty:i=!1,backgroundImage:o,size:r=32,shape:c="circle",style:g={},onError:h=p,alt:m="",imageLoading:_="lazy",e2eTag:v=""}=e,y=(0,n.__rest)(e,["src","empty","backgroundImage","size","shape","style","onError","alt","imageLoading","e2eTag"]),[b,f]=(0,s.useState)(!1),x=(0,s.useCallback)((e=>{var t;h&&f(null===(t=h(e))||void 0===t||t)}),[h]),w=t&&!b,k=i?"EMPTY":"NON_EMPTY";return(0,a.jsx)(l,Object.assign({shape:c,isShowBackground:Boolean(w),empty:i,style:Object.assign(Object.assign({},g),{width:r,height:r}),"data-e2e":v},y,{children:w?(0,a.jsx)(d,{loading:_,onError:x,onLoad:e.onLoad,alt:m,src:t},void 0):u[k]}),void 0)}))},41928:(e,t,i)=>{i.d(t,{W:()=>_});var o=i(64047),n=i(11040),a=i(91051),s=i(96434),r=i(34103),l=i(7998);const d="rgb(208, 209, 211)",c=({theme:e,buttonTheme:t})=>{switch(t){case"default":return{borderWidth:"1px",borderStyle:"solid",borderRadius:"4px",color:e.colors.TextPrimary,borderColor:e.colors.LineSecondary2,backgroundColor:e.colors.BGSecondary2,":hover":{borderColor:d,backgroundColor:e.colors.BGCreation3},":active":{borderColor:d,backgroundColor:e.colors.BGMessageIcon},":disabled":{borderColor:"rgb(227, 227, 229)",backgroundColor:e.colors.BGSecondary2,color:e.colors.TextQuaternary}};case"line":return{borderWidth:"1px",borderStyle:"solid",borderRadius:"4px",color:e.colors.Primary,borderColor:e.colors.Primary,backgroundColor:e.colors.BGSecondary2,":hover":{backgroundColor:"rgba(254, 44, 85, 0.06)"},":active":{backgroundColor:"rgba(254, 44, 85, 0.16)"},":disabled":{borderColor:e.colors.LineSecondary2,backgroundColor:e.colors.BGSecondary2,color:e.colors.TextQuaternary,pointerEvents:"none"}};case"primary":return{borderRadius:"4px",border:"none",color:e.colors.ConstTextInverse,backgroundColor:e.colors.Primary,":hover":{background:"linear-gradient(0deg, rgba(0, 0, 0, 0.06), rgba(0, 0, 0, 0.06)), #FE2C55"},":active":{background:"linear-gradient(0deg, rgba(0, 0, 0, 0.12), rgba(0, 0, 0, 0.12)), #FE2C55"},":disabled":{border:"none",color:e.colors.TextQuaternary,backgroundColor:e.colors.BGInput2,pointerEvents:"none"}};case"round":return{borderRadius:"52px",border:"none",color:e.colors.ConstTextInverse,backgroundColor:e.colors.ToastDefault,":hover":{},":active":{},":disabled":{}};default:return{":hover":{},":active":{},":disabled":{}}}},u=({theme:e,buttonTheme:t})=>{const i=t=>({":focus-visible":{outline:`2px solid ${null!=t?t:e.colors.Negative}`,outlineOffset:"1px"}});switch(t){case"default":case"round":case"line":default:return i();case"primary":return i("rgba(24, 27, 105, 1.0)")}},p="ProximaNova, PingFangSC, sans-serif",g="SofiaPro, PingFangSC, sans-serif",h={largeNew:{minWidth:"120px",minHeight:"46px",fontSize:"16px",lineHeight:"22px",fontWeight:700,fontFamily:p},large:{minWidth:"168px",minHeight:"48px",fontSize:"18px",lineHeight:"25px",fontWeight:600,fontFamily:g},medium:{minWidth:"164px",minHeight:"36px",fontSize:"18px",lineHeight:"25px",fontWeight:600,fontFamily:g},small:{minWidth:"106px",minHeight:"28px",fontSize:"16px",lineHeight:"22px",fontWeight:600,fontFamily:p},tiny:{minWidth:"96px",minHeight:"28px",fontFamily:p,fontSize:"14px",lineHeight:"17px",fontWeight:600}},m=(0,l.Z)("button",{shouldForwardProp:e=>(0,r.Z)(e)&&"loading"!==e,target:"ehk74z00"})((({buttonTheme:e="default",size:t="large",theme:i,loading:o=!1})=>[c({theme:i,buttonTheme:e}),h[t],{display:"flex",position:"relative",alignItems:"center",justifyContent:"center",padding:"6px 8px",userSelect:"none",cursor:"pointer",boxSizing:"border-box",":focus":{outline:"none"}},Object.assign({},o?{color:"transparent",pointerEvents:"none"}:{}),u({theme:i,buttonTheme:e})]),"label:Button;"),_=(0,a.memo)((function(e){var{buttonTheme:t,size:i,type:a="button",loading:r=!1,loadingTheme:l="primary",loadingSize:d="medium",loadingFill:c,children:u,e2eTag:p}=e,g=(0,o.__rest)(e,["buttonTheme","size","type","loading","loadingTheme","loadingSize","loadingFill","children","e2eTag"]);return(0,n.jsxs)(m,Object.assign({type:a,buttonTheme:t,loading:r,size:i,"data-e2e":p},g,{children:[u,r&&(0,n.jsx)(s.$,{style:{position:"absolute",top:"50%",transform:"translateY(-50%)"},theme:l,size:d,fill:c},void 0)]}),void 0)}))},96434:(e,t,i)=>{i.d(t,{$:()=>p});var o=i(11040),n=i(74820),a=i(91051),s=i(28327),r=i(7998);const l=(0,r.Z)("div",{target:"ef2t4c20"})((({center:e})=>({display:"flex",flexDirection:"column",alignItems:e?"center":"flex-start"})),"label:DivContainer;"),d=(0,s.F4)({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),c=(0,r.Z)("svg",{target:"ef2t4c21"})({margin:"0 !important",fill:"none",animation:`${d} 1s linear infinite`},"label:SvgBox;"),u={small:16,medium:18,large:20},p=(0,a.memo)((function({theme:e="primary",size:t="medium",center:i=!1,style:s={},fill:r=""}){const{colors:d}=(0,n.u)(),p=(0,a.useMemo)((()=>{const{BGCreation:t,BGPrimary:i,Primary:o}=d;return r||{white:t,primary:i,transparent:o}[e]}),[d,r,e]),g="string"==typeof t?u[t]:t,h=Object.assign(Object.assign({},s),{width:g,height:g});return(0,o.jsx)(l,Object.assign({center:i,style:h},{children:(0,o.jsx)(c,Object.assign({width:g,height:g,viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg"},{children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",fill:p,d:"M0 9C0 4.02944 4.02944 0 9 0C13.9706 0 18 4.02944 18 9C18 9.82843 17.3284 10.5 16.5 10.5C15.6716 10.5 15 9.82843 15 9C15 5.68629 12.3137 3 9 3C5.68629 3 3 5.68629 3 9C3 12.3137 5.68629 15 9 15C10.415 15 11.7119 14.512 12.7375 13.6941C13.3852 13.1775 14.329 13.2838 14.8455 13.9315C15.3621 14.5792 15.2558 15.5229 14.6081 16.0395C13.0703 17.266 11.1188 18 9 18C4.02944 18 0 13.9706 0 9Z"},void 0)}),void 0)}),void 0)}))},99116:(e,t,i)=>{i.d(t,{g:()=>y,B:()=>x});var o=i(64047),n=i(11040),a=i(91051),s=i(32667),r=i(28327),l=i(7998);const d=36,c=(0,r.F4)({"25%":{cx:100,r:1.2*d},"50%":{cx:140,r:d},"75%":{cx:100,r:.6*d},"100%":{cx:60,r:d}}),u=(0,r.F4)({"25%":{cx:100,r:24},"50%":{cx:60,r:d},"75%":{cx:100,r:1.2*d},"100%":{cx:140,r:d}});var p;!function(e){e[e.Red=0]="Red",e[e.Green=1]="Green",e[e.Black=2]="Black"}(p||(p={}));const g={strokeWidth:0,r:d,cy:99},h={0:{fill:"#fe2c55",cx:128,animation:`${u} 1s cubic-bezier(.05, 0, 1, 1) infinite`},1:{fill:"#3af2ff",cx:60,animation:`${c} 1s cubic-bezier(.05, 0, 1, 1) infinite`},2:{fill:"#0f0f0f",cx:60,animation:`${c} 1s cubic-bezier(.05, 0, 1, 1) infinite`}},m=(0,l.Z)("circle",{target:"e1ugmybf0"})((({circleType:e,isBlack:t})=>[g,h[e],t?{fill:"#000"}:null]),"label:Circle;"),_=(0,l.Z)("svg",{target:"e1ugmybf1"})({display:"block"},(({center:e})=>e?{margin:"6px auto"}:null),"label:SvgContainer;"),v={default:48,small:32},y=(0,a.memo)((0,a.forwardRef)((function(e,t){var{size:i=48,center:a=!1,maskKey:s=Date.now()}=e,r=(0,o.__rest)(e,["size","center","maskKey"]);const l="string"==typeof i?v[i]:i;return(0,n.jsxs)(_,Object.assign({center:a,preserveAspectRatio:"none",viewBox:"0 0 200 200",width:l,height:l},r,{ref:t},{children:[(0,n.jsxs)("defs",{children:[(0,n.jsxs)("mask",Object.assign({id:`redhole-${s}`},{children:[(0,n.jsx)("rect",{width:"100%",height:"100%",fill:"white"},void 0),(0,n.jsx)(m,{circleType:0,isBlack:!0},void 0)]}),void 0),(0,n.jsxs)("mask",Object.assign({id:`greenhole-${s}`},{children:[(0,n.jsx)("rect",{width:"100%",height:"100%",fill:"white"},void 0),(0,n.jsx)(m,{circleType:1,isBlack:!0},void 0)]}),void 0)]},void 0),(0,n.jsx)(m,{strokeWidth:2,stroke:"#3AF2FF",circleType:2},void 0),(0,n.jsx)(m,{circleType:1,mask:`url(#redhole-${s})`},void 0),(0,n.jsx)(m,{circleType:0,mask:`url(#greenhole-${s})`},void 0)]}),void 0)})));let b=null;function f(e){var t;return b||(b=document.createElement("div"),b.style.cssText="display: inline-block; position: fixed; left: calc(50% - 15px); top: 38%;",(e&&null!==(t=document.querySelector(e))&&void 0!==t?t:document.body).appendChild(b)),b}const x={show:e=>s.render((0,n.jsx)(y,{size:30},void 0),f(e)),hide:()=>b?s.unmountComponentAtNode(f()):void 0}},94215:(e,t,i)=>{i.d(t,{Od:()=>y,N0:()=>f,kQ:()=>b,Xu:()=>x});var o=i(64047),n=i(11040),a=i(28327),s=i(7998),r=i(36488);const l=(0,a.F4)({"0%":{backgroundPositionX:"200%"},"100%":{backgroundPositionX:"-150%"}}),d=(0,s.Z)("div",{target:"e12rwi320"})((({theme:{colors:e}})=>({backgroundColor:e.BGPlaceholderDefault,borderRadius:"4px",backgroundImage:"linear-gradient(90deg, rgba(22, 24, 35, 0) 0%, rgba(22, 24, 35, .04) 50%, rgba(22, 24, 35, 0) 100%)",backgroundSize:"200% 100%",backgroundRepeat:"no-repeat",width:"100%",height:"100%"})),"label:DivBaseComponent;"),c=(0,s.Z)("div",{target:"e12rwi321"})({width:"100%"},"label:DivComponent;"),u=(0,s.Z)(d,{target:"e12rwi322"})({borderRadius:"100%",animation:`${l} cubic-bezier(0, 0, 1, 1) 1.5s infinite`},"label:StyledAvatar;"),p=(0,s.Z)(d,{target:"e12rwi323"})({height:"16px",width:"40%",animation:`${l} cubic-bezier(0, 0, 1, 1) 1.5s infinite`},"label:StyledTitle;"),g=(0,s.Z)(d,{target:"e12rwi324"})((({theme:e})=>[{backgroundColor:"transparent",backgroundImage:"unset"},(0,r.YJ)({direction:e.direction})]),"label:StyledParagraph;"),h=(0,s.Z)(d,{target:"e12rwi325"})((({shrinkLastLine:e=!0})=>({height:"12px",animation:`${l} cubic-bezier(0, 0, 1, 1) 1.5s infinite`,":last-child":{width:e?"60%":"100%",marginTop:"12px"},":not(:last-child)":{marginBottom:"8px"}})),"label:StyledParagraphLine;"),m=(0,s.Z)(d,{target:"e12rwi326"})({minHeight:"100px",animation:`${l} cubic-bezier(0, 0, 1, 1) 1.5s infinite`},"label:StyledVideoCover;"),_=(0,s.Z)(d,{target:"e12rwi327"})({height:"36px",width:"164px",animation:`${l} cubic-bezier(0, 0, 1, 1) 1.5s infinite`},"label:StyledButton;"),v=(0,s.Z)(d,{target:"e12rwi328"})({height:"36px",width:"164px",animation:`${l} cubic-bezier(0, 0, 1, 1) 1.5s infinite`},"label:StyledTextBox;");function y(e){const{children:t,style:i,className:a}=e,s=(0,o.__rest)(e,["children","style","className"]);return(0,n.jsx)(c,Object.assign({style:i,className:a},s,{children:t}),void 0)}function b(e){const{style:t,className:i}=e,a=(0,o.__rest)(e,["style","className"]);return(0,n.jsx)(p,Object.assign({style:t,className:i},a),void 0)}function f(e){const{style:t,className:i}=e,a=(0,o.__rest)(e,["style","className"]);return(0,n.jsx)(u,Object.assign({style:t,className:i},a),void 0)}function x(e){const{style:t,className:i}=e,a=(0,o.__rest)(e,["style","className"]);return(0,n.jsx)(m,Object.assign({style:t,className:i},a),void 0)}y.Paragraph=function(e){const{lines:t=2,shrinkLastLine:i=!0,style:a,className:s}=e,r=(0,o.__rest)(e,["lines","shrinkLastLine","style","className"]),l=[];for(let e=0;e<t;++e)l.push((0,n.jsx)(h,{shrinkLastLine:i},e));return(0,n.jsx)(g,Object.assign({style:a,className:s},r,{children:l}),void 0)},y.Title=b,y.Avatar=f,y.VideoCover=x,y.Button=function(e){const{style:t,className:i}=e,a=(0,o.__rest)(e,["style","className"]);return(0,n.jsx)(_,Object.assign({style:t,className:i},a),void 0)},y.TextBox=function(e){const{style:t,className:i}=e,a=(0,o.__rest)(e,["style","className"]);return(0,n.jsx)(v,Object.assign({style:t,className:i},a),void 0)}},24930:(e,t,i)=>{i.d(t,{r:()=>c});var o=i(64047),n=i(11040),a=i(91051),s=i(7998);const r=(0,s.Z)("div",{target:"eoeunh00"})((({checked:e,backgroundColor:t,width:i,height:o,theme:{colors:n}})=>({position:"relative",width:null!=i?i:"44px",height:null!=o?o:"24px",left:"0",top:"0",background:null!=t?t:e?"#0be09b":n.LineSecondary,borderRadius:"100px",transition:"all 0.4s cubic-bezier(0.075, 0.82, 0.165, 1)",":hover":{background:null!=t?t:e?"linear-gradient(0deg, rgba(0, 0, 0, .08), rgba(0, 0, 0, .08)), #0be09b":"rgba(22, 24, 35, 0.16)"}})),"label:DivSwitchWrapper;"),l=(0,s.Z)("span",{target:"eoeunh01"})((({checked:e,height:t,width:i,backgroundColor:o,left:n})=>({position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",width:null!=i?i:"20px",height:null!=t?t:"20px",left:n,top:"50%",transform:e?"translate(-100%, -50%);":"translateY(-50%)",borderRadius:"100px",background:null!=o?o:"#fff",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.15)",transition:"all 0.4s cubic-bezier(0.075, 0.82, 0.165, 1)"})),"label:SpanSwitchIcon;"),d=(0,s.Z)("button",{target:"eoeunh02"})((({theme:{colors:e,typography:t,fontFamilies:i}})=>[t.P2,{border:"none",background:"none",outline:"none",padding:0,position:"relative",overflow:"visible",display:"inline-flex",alignItems:"center",color:e.TextPrimary,fontFamily:i.Proxima,cursor:"pointer",":disabled":{cursor:"not-allowed",opacity:.34}}]),"label:ButtonSwitchContainer;"),c=function(e){var{className:t,style:i={},size:s="medium",width:c=44,height:u=24,padding:p=2,indicatorSize:g=20,indicatorColor:h,indicatorCheckedColor:m,indicatorUnCheckedColor:_,indicatorIcon:v,indicatorCheckedIcon:y,indicatorUnCheckedIcon:b,backgroundColor:f,backgroundCheckedColor:x,backgroundUnCheckedColor:w,content:k="",disabled:S=!1,checked:C,defaultChecked:j=!1,e2eData:T,ariaLabel:I,ariaLabelledby:P,ariaDescribedby:O,onChange:L}=e,M=(0,o.__rest)(e,["className","style","size","width","height","padding","indicatorSize","indicatorColor","indicatorCheckedColor","indicatorUnCheckedColor","indicatorIcon","indicatorCheckedIcon","indicatorUnCheckedIcon","backgroundColor","backgroundCheckedColor","backgroundUnCheckedColor","content","disabled","checked","defaultChecked","e2eData","ariaLabel","ariaLabelledby","ariaDescribedby","onChange"]);const[E,A]=(0,a.useState)(null!=C?C:j),D=null!=C?C:E,F=(0,a.useCallback)((e=>{null==e||e.stopPropagation(),null==L||L(!D,e),A(!D)}),[L,D]);return(0,a.useEffect)((()=>{A(null!=C?C:j)}),[j,C]),(0,n.jsx)(d,Object.assign({"data-e2e":T,type:"button",role:"switch",disabled:S,onClick:F,style:i,"aria-checked":D,"aria-label":I,"aria-labelledby":P,"aria-describedby":O},M,{children:(0,n.jsx)(r,Object.assign({checked:D,backgroundColor:D?null!=x?x:f:null!=w?w:f,width:`${c}px`,height:`${u}px`},{children:(0,n.jsx)(l,Object.assign({checked:D,backgroundColor:D?null!=m?m:h:null!=_?_:h,width:`${g}px`,height:`${g}px`,left:D?`calc(100% - ${p}px)`:`${p}px`},{children:D?null!=y?y:v:null!=b?b:v}),void 0)}),void 0)}),void 0)}},55198:(e,t,i)=>{i.d(t,{h:()=>b});var o=i(11040),n=(i(43226),i(47883)),a=i(58126),s=i(28327),r=i(7998);const l=(0,s.F4)({"0%":{transform:"translateY(0%)",transformOrigin:"0 0",opacity:"1"},"100%":{transform:"translateY(-100%)",transformOrigin:"0 0",opacity:"0"}}),d=(0,s.F4)({"0%":{transform:"translateY(-100%)",transformOrigin:"0 0",opacity:"0"},"100%":{transform:"translateY(0%)",transformOrigin:"0 0",opacity:"1"}}),c=(0,a.iv)({"&-enter":{opacity:"0"},"&-enter-active":{animationName:d,animationDuration:"0.3s"},"&-leave-active":{animationName:l,animationDuration:"0.3s"}}),u=(0,a.iv)({fontFamily:"ProximaNova, PingFangSC, sans-serif",fontWeight:600,position:"fixed",top:"16px",left:"0px",color:"#fff",zIndex:2003,width:"100%",pointerEvents:"none",userSelect:"none","&-notice":{padding:"8px 0",textAlign:"center",":first-of-type":{marginTop:"-8px"}},"&-notice-content":{backgroundColor:"rgba(84, 84, 84, 0.92)",display:"inline-block",padding:"10px 8px",pointerEvents:"all",maxWidth:"100%",borderRadius:"2px"}}),p={auto:{},full:{width:"100vw",borderRadius:"0"},padding:{width:"calc(100vw - 40px)",margin:"0 auto"},half:{width:"50vw"}},g=(0,r.Z)("div",{target:"e1wz89c90"})((({widthType:e="auto",isRTL:t})=>[p[e],{direction:t?"rtl":"ltr"}]),"label:DivMessageContainer;");let h,m=[],_=1;const v={prefixCls:u,transitionName:c,style:{top:void 0},getContainer:void 0,maxCount:void 0,type:"default"},y={success:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE3Ljg0MDQgNi44NTk4NkMxOC4wMzc3IDYuNjYyMDcgMTguMzU4NyA2LjY2NDI1IDE4LjU1MzMgNi44NjQ3MUwxOS40NTc0IDcuNzk2MjlDMTkuNjQ3NSA3Ljk5MjE3IDE5LjY0NTQgOC4zMDQzMiAxOS40NTI2IDguNDk3NTlMMTAuNTU4MiAxNy40MTYzQzEwLjEwNSAxNy44NzA3IDkuMzczMzMgMTcuODU5NiA4LjkzMzY2IDE3LjM5MTZMNC44MzY4MSAxMy4wMzA2QzQuNjQ5OTEgMTIuODMxNyA0LjY1NzExIDEyLjUxOTYgNC44NTI5OSAxMi4zMjk1TDUuNzgzNzQgMTEuNDI2MUM1Ljk4NDE4IDExLjIzMTUgNi4zMDUxNCAxMS4yMzg5IDYuNDk2MzkgMTEuNDQyNUw5Ljc4MjE0IDE0Ljk0MDFMMTcuODQwNCA2Ljg1OTg2WiIgZmlsbD0iIzBCRTA5QiIvPgo8L3N2Zz4K",fail:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIHZpZXdCb3g9IjAgMCAyNiAyNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTEuNDY4IDEzTDcuMjAwNCA4LjczMjM4QzYuOTg4ODYgOC41MjA4NSA2Ljk4ODg2IDguMTc3ODggNy4yMDA0IDcuOTY2MzVMNy45NjY0MyA3LjIwMDMyQzguMTc3OTcgNi45ODg3OCA4LjUyMDkzIDYuOTg4NzggOC43MzI0NiA3LjIwMDMyTDEzLjAwMDEgMTEuNDY3OUwxNy4yNjc3IDcuMjAwMzJDMTcuNDc5MiA2Ljk4ODc4IDE3LjgyMjIgNi45ODg3OCAxOC4wMzM3IDcuMjAwMzJMMTguNzk5OCA3Ljk2NjM1QzE5LjAxMTMgOC4xNzc4OCAxOS4wMTEzIDguNTIwODUgMTguNzk5OCA4LjczMjM4TDE0LjUzMjEgMTNMMTguNzk5OCAxNy4yNjc2QzE5LjAxMTMgMTcuNDc5MiAxOS4wMTEzIDE3LjgyMjEgMTguNzk5OCAxOC4wMzM3TDE4LjAzMzcgMTguNzk5N0MxNy44MjIyIDE5LjAxMTIgMTcuNDc5MiAxOS4wMTEyIDE3LjI2NzcgMTguNzk5N0wxMy4wMDAxIDE0LjUzMjFMOC43MzI0NiAxOC43OTk3QzguNTIwOTMgMTkuMDExMiA4LjE3Nzk3IDE5LjAxMTIgNy45NjY0MyAxOC43OTk3TDcuMjAwNCAxOC4wMzM3QzYuOTg4ODYgMTcuODIyMSA2Ljk4ODg2IDE3LjQ3OTIgNy4yMDA0IDE3LjI2NzZMMTEuNDY4IDEzWiIgZmlsbD0iI0ZGNEMzQSIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwIj4KPHJlY3Qgd2lkdGg9IjI2IiBoZWlnaHQ9IjI2IiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo="},b={open:function(e){const t=void 0!==e.duration?e.duration:3,i=e.key||_++,a=new Promise((a=>{var s,r;const l={key:i,duration:t,className:e.className,content:(0,o.jsxs)(g,Object.assign({isRTL:e.isRTL,widthType:e.widthType,"data-e2e":e.e2eTag,role:"alert",style:Object.assign({display:"flex",justifyContent:"center",alignItems:"center"},null!==(s=e.style)&&void 0!==s?s:{})},{children:[e.type&&"default"!==e.type&&(0,o.jsx)("img",{src:y[e.type],style:Object.assign({width:"24px",height:"24px"},e.isRTL?{marginLeft:"8px"}:{marginRight:"8px"}),"aria-hidden":"true"},void 0),(0,o.jsx)("span",{children:e.content},void 0)]}),void 0),onClose:()=>("function"==typeof e.onClose&&e.onClose(),a(!0))};var d;e.getContainer?n.Z.newInstance(Object.assign(Object.assign({},v),{style:{position:null!==(r=e.getContainerPosition)&&void 0!==r?r:"absolute",top:void 0},getContainer:e.getContainer}),(e=>{e.notice(l),m.push(e)})):(d=e=>{e.notice(l)},h?d(h):n.Z.newInstance(Object.assign({},v),(e=>{h?d(h):(h=e,d(e),m.push(e))})))})),s=()=>{h&&h.removeNotice(i)};return s.then=(e,t)=>a.then(e,t),s.promise=a,s},destroy(){h&&(h.destroy(),h=null),m.length>0&&(m.forEach((e=>e.destroy())),m=[])}}},64176:(e,t,i)=>{i.d(t,{u:()=>y});var o=i(64047),n=i(11040),a=i(74820),s=i(91051),r=i(58126),l=i(69062);const d={white:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iOCIgdmlld0JveD0iMCAwIDM2IDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMCA4TDYuNjg2MjkgOEM4LjgwODAyIDggMTAuODQyOSA3LjE1NzE0IDEyLjM0MzEgNS42NTY4NUwxNy4yOTI5IDAuNzA3MTA2QzE3LjY4MzQgMC4zMTY1ODIgMTguMzE2NiAwLjMxNjU4MiAxOC43MDcxIDAuNzA3MTA3TDIzLjY1NjkgNS42NTY4NkMyNS4xNTcxIDcuMTU3MTUgMjcuMTkyIDggMjkuMzEzNyA4TDM2IDhMMCA4WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+",black:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iOCIgdmlld0JveD0iMCAwIDM2IDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0wIDhoNi42ODZhOCA4IDAgMCAwIDUuNjU3LTIuMzQzbDQuOTUtNC45NWExIDEgMCAwIDEgMS40MTQgMGw0Ljk1IDQuOTVBOCA4IDAgMCAwIDI5LjMxNCA4SDM2IDB6IiBmaWxsPSIjNTQ1NDU0IiBmaWxsLW9wYWNpdHk9Ii45MiIvPjwvc3ZnPg==",blue:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iOCIgdmlld0JveD0iMCAwIDM2IDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0wIDhoNi42ODZhOCA4IDAgMCAwIDUuNjU3LTIuMzQzbDQuOTUtNC45NWExIDEgMCAwIDEgMS40MTQgMGw0Ljk1IDQuOTVBOCA4IDAgMCAwIDI5LjMxNCA4SDM2IDB6IiBmaWxsPSIjMTBBMkM1Ii8+PC9zdmc+",border:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAAAQCAYAAAC1MDndAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADOSURBVHgB7deLDYIwGATgvxswQkdgAxnBERyBETpKncARcAPdoCPIBuc11pgYNaBF2sKXXICEAL1QHkq+AKDiQodsmU1YT0nP7Jkzc/TbSqle5sLSGsZifh3TSKp4cZo54P+6pIt5xottmQum58/RSo5wu5scpuP8OSRnHEDFnBCfP2YlpUDcB7iVEkUqyUqp8Pt0K2tavRJKchjPFV/OHca/3fy+WpaEA64x/DupliXiwHcDysnzIzAWFmA+lGNk9bYkI6uHMN0cEvu3ugKLPi0ttJ0IVQAAAABJRU5ErkJggg=="},c={white:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iOCIgdmlld0JveD0iMCAwIDM2IDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMCA4TDYuNjg2MjkgOEM4LjgwODAyIDggMTAuODQyOSA3LjE1NzE0IDEyLjM0MzEgNS42NTY4NUwxNy4yOTI5IDAuNzA3MTA2QzE3LjY4MzQgMC4zMTY1ODIgMTguMzE2NiAwLjMxNjU4MiAxOC43MDcxIDAuNzA3MTA3TDIzLjY1NjkgNS42NTY4NkMyNS4xNTcxIDcuMTU3MTUgMjcuMTkyIDggMjkuMzEzNyA4TDM2IDhMMCA4WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+",black:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iOCIgdmlld0JveD0iMCAwIDM2IDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMCA4TDYuNjg2MjkgOEM4LjgwODAyIDggMTAuODQyOSA3LjE1NzE0IDEyLjM0MzEgNS42NTY4NUwxNy4yOTI5IDAuNzA3MTA2QzE3LjY4MzQgMC4zMTY1ODIgMTguMzE2NiAwLjMxNjU4MiAxOC43MDcxIDAuNzA3MTA3TDIzLjY1NjkgNS42NTY4NkMyNS4xNTcxIDcuMTU3MTUgMjcuMTkyIDggMjkuMzEzNyA4TDM2IDhMMCA4WiIgZmlsbD0iIzI1MjUyNSIvPgo8L3N2Zz4K",blue:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iOCIgdmlld0JveD0iMCAwIDM2IDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0wIDhoNi42ODZhOCA4IDAgMCAwIDUuNjU3LTIuMzQzbDQuOTUtNC45NWExIDEgMCAwIDEgMS40MTQgMGw0Ljk1IDQuOTVBOCA4IDAgMCAwIDI5LjMxNCA4SDM2IDB6IiBmaWxsPSIjMTBBMkM1Ii8+PC9zdmc+",border:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAAAQCAYAAAC1MDndAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADOSURBVHgB7deLDYIwGATgvxswQkdgAxnBERyBETpKncARcAPdoCPIBuc11pgYNaBF2sKXXICEAL1QHkq+AKDiQodsmU1YT0nP7Jkzc/TbSqle5sLSGsZifh3TSKp4cZo54P+6pIt5xottmQum58/RSo5wu5scpuP8OSRnHEDFnBCfP2YlpUDcB7iVEkUqyUqp8Pt0K2tavRJKchjPFV/OHca/3fy+WpaEA64x/DupliXiwHcDysnzIzAWFmA+lGNk9bYkI6uHMN0cEvu3ugKLPi0ttJ0IVQAAAABJRU5ErkJggg=="},u="rotate(180deg)",p="rotate(90deg)",g="rotate(-90deg)",h={bottom:{top:"-8px",left:"50%",marginLeft:"-18px"},bottomLeft:{top:"-8px",left:"25%",marginLeft:"-18px"},bottomRight:{top:"-8px",right:"25%",marginRight:"-18px"},left:{transform:p,right:"-22px",top:"50%",marginTop:"-5px"},leftBottom:{transform:p,right:"-22px",bottom:"25%",marginTop:"5px"},leftTop:{transform:p,right:"-22px",top:"25%"},right:{transform:g,left:"-22px",top:"50%",marginTop:"-5px"},rightBottom:{transform:g,left:"-22px",bottom:"25%",marginTop:"5px"},rightTop:{transform:g,left:"-22px",top:"25%"},top:{transform:u,bottom:"-8px",left:"50%",marginLeft:"-18px"},topLeft:{transform:u,bottom:"-8px",left:"25%",marginLeft:"-18px"},topRight:{transform:u,bottom:"-8px",right:"25%",marginRight:"-18px"}};function m({tooltipTheme:e,themeCtx:{colors:t,isDark:i}}){return"black"===e?{padding:"7.5px 12px",backgroundColor:t.ToastDefault,color:t.ConstTextInverse}:"white"===e?{backgroundColor:i?t.ToastDefault:t.BGPrimary,color:t.TextPrimary,padding:0}:"blue"===e?{backgroundColor:t.ConstSecondary2,color:t.ConstTextInverse,padding:0}:null}const _=({themeCtx:e,themeCtx:{fontFamilies:t},tooltipTheme:i="black",withPadding:o=!0,arrow:n=!0,rtl:a=!1,placement:s="top",arrowStyle:l={}})=>(0,r.iv)({fontFamily:t.Proxima,boxSizing:"border-box",margin:"0",padding:"0",color:"rgba(0, 0, 0, 0.65)",fontSize:"14px",listStyle:"none",fontFeatureSettings:'"tnum"',position:"absolute",zIndex:1060,display:"block",maxWidth:"250px",visibility:"visible","&-hidden":{display:"none"}},function({themeCtx:e,tooltipTheme:t,withPadding:i}){const{fontWeights:o,typography:n}=e;return{"&-inner":(0,r.iv)({textAlign:"left",textDecoration:"none",borderRadius:"8px",fontWeight:o.semiBold},n.P2,m({themeCtx:e,tooltipTheme:t}),i&&{padding:"8px"})}}({themeCtx:e,tooltipTheme:i,withPadding:o}),function({arrow:e,tooltipTheme:t,placement:i,themeCtx:o,arrowStyle:n}){return{"&-arrow":(0,r.iv)({display:e?"block":"none",position:"absolute",width:"36px",height:"8px",backgroundImage:o.isDark?`url(${c[t]})`:`url(${d[t]})`},h[i],n)}}({themeCtx:e,tooltipTheme:i,placement:s,arrow:n,arrowStyle:l}),a&&{direction:"rtl","& *":{direction:"rtl"}}),v=e=>{var{className:t,themeCtx:i,tooltipTheme:a,withPadding:s,rtl:d,arrow:c,prefixCls:u,placement:p,arrowStyle:g}=e,h=(0,o.__rest)(e,["className","themeCtx","tooltipTheme","withPadding","rtl","arrow","prefixCls","placement","arrowStyle"]);return(0,n.jsx)(l.Z,Object.assign({prefixCls:(0,r.cx)(t,_({themeCtx:i,tooltipTheme:a,withPadding:s,rtl:d,arrow:c,placement:p,arrowStyle:g})),placement:p},h),void 0)},y=(0,s.memo)((function(e){var{children:t,fullscreenAdjust:i=!1,placement:r="top",align:l={}}=e,d=(0,o.__rest)(e,["children","fullscreenAdjust","placement","align"]);const c=(0,a.u)(),u=((e,t={})=>(0,s.useMemo)((()=>{let i;switch(e){case"top":case"topLeft":case"topRight":i=[0,-10];break;case"bottom":case"bottomLeft":case"bottomRight":i=[0,10];break;case"leftTop":case"left":case"leftBottom":i=[-10,0];break;default:i=[10,0]}return Object.assign({offset:i},t)}),[t,e]))(r,l);return i?(0,n.jsx)(v,Object.assign({},d,{getTooltipContainer:"undefined"==typeof document?void 0:()=>{var e,t,i,o,n,a,s;return null!==(s=null!==(n=null!==(i=null!==(e=document.fullscreenElement)&&void 0!==e?e:null===(t=document)||void 0===t?void 0:t.webkitCurrentFullScreenElement)&&void 0!==i?i:null===(o=document)||void 0===o?void 0:o.mozFullScreenElement)&&void 0!==n?n:null===(a=document)||void 0===a?void 0:a.msFullscreenElement)&&void 0!==s?s:document.body},destroyTooltipOnHide:{keepParent:!1},themeCtx:c,placement:r,align:u},{children:t}),void 0):(0,n.jsx)(v,Object.assign({},d,{themeCtx:c,placement:r,align:u},{children:t}),void 0)}))},55187:(e,t,i)=>{i.d(t,{f5:()=>a,Nn:()=>s});const o=new WeakMap,n=e=>{let t=o.get(e);return t||(t=new WeakSet,o.set(e,t)),t},a=(e,t)=>{const i=n(e);for(const[o,n]of t)i.has(o)||(i.add(o),e.set(o,n))},s=(e,t,i)=>{const o=n(e);o.has(t)||(o.add(t),e.set(t,i))}},32863:(e,t,i)=>{e.exports=i.p+"b3dd0b7f20ed0c4384f1.png"},59126:(e,t,i)=>{e.exports=i.p+"25b0d4f3e6779acb114f.png"},6998:(e,t,i)=>{e.exports=i.p+"1db62e2b736e1cc835a3.png"},25555:(e,t,i)=>{e.exports=i.p+"f1596f39e85631c052c4.png"},22745:(e,t,i)=>{e.exports=i.p+"b5b0c8fab7d18dff2e2a.png"},24400:(e,t,i)=>{e.exports=i.p+"2097820e1be2c7a06bf8.png"},11723:(e,t,i)=>{e.exports=i.p+"a028a67e740da091b89b.png"},9493:(e,t,i)=>{e.exports=i.p+"0433f99adc0a040142f6.png"},60871:(e,t,i)=>{e.exports=i.p+"d60c66b9f5dc9647f3a3.png"},4825:(e,t,i)=>{e.exports=i.p+"c287bca871661e22ee8a.png"},50121:(e,t,i)=>{e.exports=i.p+"47624c235266dedd8e4d.png"},21145:(e,t,i)=>{e.exports=i.p+"863338800afbd636244a.png"},39198:(e,t,i)=>{e.exports=i.p+"113990b20fae6f3bb49b.png"},92326:(e,t,i)=>{e.exports=i.p+"f0008e2854620a01f652.png"},27545:(e,t,i)=>{e.exports=i.p+"45636daedb8648c2e33c.png"},58948:(e,t,i)=>{e.exports=i.p+"5fa49876a48136384338.png"},27051:(e,t,i)=>{e.exports=i.p+"d8db931296c3e5645b1e.png"},93394:(e,t,i)=>{e.exports=i.p+"045b2fc7c278b9a30dd0.png"}},e=>{e.O(0,[5881,2146,8084,9505,6911,7267,6126,1815,8040,5294,4736,6169,3609,6978],(()=>(6106,e(e.s=6106)))),e.O()}]);