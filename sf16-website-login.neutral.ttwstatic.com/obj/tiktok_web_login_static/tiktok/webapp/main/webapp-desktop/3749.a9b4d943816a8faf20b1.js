"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3749],{80194:(e,t,i)=>{i.d(t,{T:()=>u});var o=i(11040),n=i(91051),r=i(32273),a=i(4139),d=i(21985);const s=(0,a.Z)("div",{target:"e1cg0wnj0"})((({borderRadius:e})=>Object.assign({position:"relative",width:"100%"},e?{borderRadius:e,overflow:"hidden"}:{})),"label:DivContainer;"),l=(0,a.Z)("div",{target:"e1cg0wnj1"})({position:"absolute",top:"0",left:"0",right:"0",bottom:"0"},"label:DivWrapper;"),c=(0,a.Z)(s,{target:"eq741c50"})((({borderRadius:e})=>({borderRadius:null!=e?e:"4px",overflow:"hidden"})),"label:StyledDivContainerV2;"),p=(0,n.memo)((e=>{const{isDetailPage:t}=(0,d.U)(),i=t?c:s;return(0,o.jsx)(i,Object.assign({},e),void 0)})),u=(0,n.memo)((function({ratio:e=0,children:t,className:i,borderRadius:n,e2eTag:a="",onKeyDown:d,id:s}){const c=(0,r.Q)(),u=0===e?100:100/e;return(0,o.jsx)(p,Object.assign({"data-e2e":a,borderRadius:n,className:i,id:s,tabIndex:0,onKeyDown:d,role:"button","aria-label":c("accessibilityLabels_forYou_videoCard_fullScreen")},{children:(0,o.jsx)("div",Object.assign({style:{paddingTop:`${u}%`}},{children:(0,o.jsx)(l,{children:t},void 0)}),void 0)}),void 0)}))},3749:(e,t,i)=>{i.d(t,{n:()=>ke});var o=i(11040),n=i(9236),r=i(16926),a=i(91051),d=i(74733),s=i(81260),l=i(32273),c=i(33642),p=i(17133),u=i(45313),v=i(87342),h=i(40340),g=i(54649),m=i(1160),f=i(31222),x=i(69405),b=i(2078),y=i(44663),j=i(75311),_=i(80194);const k=e=>()=>{b.vD.handleChannelGeneralClick(e)};var w=i(4139),C=i(837),I=(i(97186),i(15679)),T=i(36488);const D=(0,w.Z)("div",{target:"e1aajktk7"})({position:"absolute",bottom:0,width:"100%",display:"flex",alignItems:"center",paddingTop:16,height:48,borderRadius:4,background:"linear-gradient(180deg, rgba(22, 24, 35, 0.0001) 2.92%, rgba(22, 24, 35, 0.5) 98.99%)"},(({theme:{direction:e}})=>(0,T.YJ)({direction:e,paddingStart:8})),"label:DivCoverFooter;"),O=(0,w.Z)(C.Z,{target:"e1aajktk8"})({},"label:StyledPlay;"),S=(0,w.Z)("strong",{target:"e1aajktk9"})({color:"#fff",fontWeight:600},(({theme:{direction:e}})=>(0,T.YJ)({direction:e,paddingStart:4})),"label:StrongLikes;"),L=(0,w.Z)("div",{target:"e1aajktk10"})((({forBot:e,showEllipsis:t})=>[{position:"relative",width:t?"calc(100% - 24px)":"100%",fontSize:16,fontWeight:600,lineHeight:"22px",cursor:"pointer",marginTop:8,minHeight:21},e?{}:Object.assign({},(0,T.FC)(2))]),"label:DivVideoDescription;"),B=(0,w.Z)("p",{target:"e1aajktk11"})({},"label:PInfo;"),P=(0,w.Z)(B,{target:"e1aajktk12"})(T.wj,(({theme:{direction:e}})=>(0,T.YJ)({direction:e,marginStart:4})),{fontWeight:"normal",fontSize:"16px"},"label:StyledH3UniqueId;"),Z=(0,w.Z)("span",{target:"e1aajktk13"})({fontWeight:600,fontSize:14,lineHeight:"22px",marginLeft:"auto",minWidth:"max-content"},(({theme:e})=>({color:e.colors.TextTertiaryAlt})),"label:SpanLikes;"),F=((0,T.FC)(2),(0,T.FC)(1),(0,w.Z)("div",{target:"e1aajktk17"})({marginBottom:8},"label:DivVideoAndInfoWrapper;")),W=(0,w.Z)("div",{target:"e1aajktk18"})({position:"relative"},"label:DivAuthorWrapper;"),M=(0,w.Z)("div",{target:"e1aajktk19"})({display:"flex",alignItems:"center",":hover":{textDecoration:"none"}},"label:DivAuthorAnchor;"),z=(0,w.Z)(I.D,{target:"e1aajktk20"})({display:"flex",overflow:"hidden",marginRight:"8px"},"label:StyledAuthorInfo;"),R=((0,T.FC)(1),(0,w.Z)("span",{target:"e1aajktk22"})({display:"inline-block",position:"relative"},"label:SpanIconWrapper;")),A=(0,w.Z)(R,{target:"e1aajktk23"})({top:"3px"},"label:StyledSpanVerifiedIconWrapper;"),E=(0,w.Z)("span",{target:"e1aajktk24"})({position:"relative",top:3,marginRight:4},(({theme:e})=>({color:e.colors.TextTertiaryAlt})),"label:SpanLikeWrapper;"),V=(0,w.Z)("span",{target:"e1aajktk25"})({position:"absolute",display:"flex",top:-28,":hover":{cursor:"pointer"}},(({theme:{direction:e}})=>"ltr"===e?{right:0}:{left:0}),"label:SpanInfoExpandWrapper;"),H=(0,w.Z)("span",{target:"e1aajktk26"})((({theme:e})=>({color:e.colors.TextTertiaryAlt})),"label:SpanInfoExpandIconWrapper;"),G=((0,T.f1)({max:479,style:{width:"100%",height:"auto"}}),(0,w.Z)("div",{target:"e1aajktk28"})((({theme:{direction:e}})=>[{maxWidth:"210px",display:"flex",flexFlow:"column",float:(0,T.$K)(e,"start")},(0,T.YJ)({direction:e,marginEnd:"2px"}),(0,T.f1)({max:703,style:{maxWidth:"252px"}})]),"label:DivItemContainer;")),U=(0,w.Z)("div",{target:"e1aajktk29"})({position:"absolute",left:0,top:0,width:"100%",height:"100%",borderRadius:"3px",overflow:"hidden"},"label:DivPlayerContainer;"),q=(0,w.Z)("div",{target:"e1aajktk30"})((({renderDirection:e,visible:t,theme:i})=>[{display:t?"block":"none"},{position:"absolute",width:"fit-content",height:"fit-content",boxShadow:"0px 4px 40px rgba(0, 0, 0, 0.2)",borderRadius:20,overflow:"hidden",zIndex:99,backgroundColor:i.colors.BGSecondary,"&::before":i.isDark?{}:{position:"absolute",content:"''",height:"8px",width:"100%",background:"linear-gradient(180deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 100%)",top:"8px",zIndex:100},"&::after":i.isDark?{}:{position:"absolute",content:"''",height:"8px",width:"100%",background:"linear-gradient(180deg, rgba(255, 255, 255, 0) 0%, #FFFFFF 100%)",bottom:"8px",zIndex:100}},"right"===e?{bottom:"-30px",marginLeft:"30px"}:{marginTop:"30px",right:"-48px"},(0,T.GI)({theme:i,fontFamily:"Proxima"})]),"label:DivVideoInfoCardContainer;"),Q=(0,w.Z)("div",{target:"e1aajktk31"})((({theme:e})=>[{position:"absolute",content:"''",height:"8px",width:"100%",backgroundColor:e.colors.BGSecondary,top:"0px",zIndex:100}]),"label:DivStyledTopInfoCardMask;"),$=(0,w.Z)("div",{target:"e1aajktk32"})((({theme:e})=>[{position:"absolute",content:"''",height:"8px",width:"100%",backgroundColor:e.colors.BGSecondary,bottom:"0px",zIndex:100}]),"label:DivStyledBottomInfoCardMask;"),K=(0,w.Z)("div",{target:"e1aajktk33"})((({renderDirection:e,visible:t,theme:i})=>[{width:0,height:0,position:"absolute",display:t?"block":"none",zIndex:100},"right"===e?{borderBottom:"12px solid transparent",borderTop:"12px solid transparent",borderRight:"10px solid",borderRightColor:i.colors.BGSecondary,marginTop:"-4px",marginLeft:"20px"}:{borderLeft:"12px solid transparent",borderRight:"12px solid transparent",borderBottom:"10px solid",borderBottomColor:i.colors.BGSecondary,marginLeft:"-4px",marginTop:"20px"}]),"label:DivInfoCardArrow;");var N=i(96082),Y=i(64157),J=i(23479),X=i(57651);const ee=(0,w.Z)("div",{target:"e1l1o4dc0"})((({theme:e})=>[{marginTop:"20px",display:"flex",alignItems:"center",justifyContent:"center",background:e.colors.BGView,borderRadius:8,height:"71px"}]),"label:DivStatsBarContainer;"),te=(0,w.Z)("div",{target:"e1l1o4dc1"})((({theme:e})=>[{flex:"30%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center","&:not(:first-child)":{borderLeft:"1px solid",borderLeftColor:e.colors.LineSecondary}}]),"label:DivStatsItem;"),ie=(0,w.Z)("p",{target:"e1l1o4dc2"})((({theme:e})=>({fontSize:"17px",lineHeight:"20px",color:e.colors.TextPrimary,fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.semiBold})),"label:PStyledSocialCount;"),oe=(0,w.Z)("p",{target:"e1l1o4dc3"})((({theme:e})=>({fontSize:"13px",lineHeight:"17px",color:e.colors.TextSecondary,fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.normal})),"label:PStyledSocialText;"),ne=e=>{const t=(0,l.Q)(),{likes:i,shares:n,comments:r}=e;return(0,o.jsxs)(ee,{children:[(0,o.jsxs)(te,{children:[(0,o.jsx)("span",{children:(0,o.jsx)(ie,{children:(0,c.BT)(i)},void 0)},void 0),(0,o.jsx)(oe,{children:t("bc_likes")},void 0)]},void 0),(0,o.jsxs)(te,{children:[(0,o.jsx)("span",{children:(0,o.jsx)(ie,{children:(0,c.BT)(r)},void 0)},void 0),(0,o.jsx)(oe,{children:t("bc_comments")},void 0)]},void 0),(0,o.jsxs)(te,{children:[(0,o.jsx)("span",{children:(0,o.jsx)(ie,{children:(0,c.BT)(n)},void 0)},void 0),(0,o.jsx)(oe,{children:t("bc_shares")},void 0)]},void 0)]},void 0)};var re=i(49907);const ae=(0,w.Z)("div",{target:"e4p686t0"})({display:"flex",flexDirection:"column",height:"fit-content",paddingBottom:"5px"},"label:DivCardContainer;"),de=(0,w.Z)("div",{target:"e4p686t1"})((({hasTranscript:e,theme:t})=>({overflow:"scroll",maxHeight:e?"390px":"290px",width:"calc(100% - 3px)",backgroundColor:t.colors.BGSecondary,padding:"20px 20px 5px 20px","::-webkit-scrollbar":{width:"3px",borderRadius:"3px"}})),"label:DivCardScrollContainer;"),se=(0,w.Z)("div",{target:"e4p686t2"})((({hasTranscript:e})=>[{width:"380px",maxHeight:e?"380px":"280px"}]),"label:DivCardWrapper;"),le=(0,w.Z)("div",{target:"e4p686t3"})({marginLeft:8},"label:DivAuthorInfo;"),ce=(0,w.Z)("div",{target:"e4p686t4"})((({theme:e})=>[(0,T.GI)({theme:e,fontFamily:"Proxima",color:"TextReverse"}),{fontSize:"16px",lineHeight:"20px",fontWeight:"600",float:"right",height:"98%",display:"flex",alignItems:"flex-end",shapeOutside:"inset(calc(100% - 19px) 0 0)",marginLeft:"4px"}]),"label:DivLabelButton;"),pe=(0,w.Z)("div",{target:"e4p686t5"})({display:"flex"},"label:DivVideoExpandWrapper;"),ue=(0,w.Z)("div",{target:"e4p686t6"})((({expanded:e})=>[e?null:{overflow:"hidden",WebkitLineClamp:3,wordBreak:"break-all",WebkitBoxOrient:"vertical",display:"-webkit-box"}]),"label:DivVideoDesc;"),ve=(0,w.Z)("h3",{target:"e4p686t7"})(T.wj,(({theme:e})=>(0,T.GI)({theme:e,fontWeight:"semiBold"})),"label:H3UniqueId;"),he=(0,w.Z)("span",{target:"e4p686t8"})({display:"inline-block",position:"relative"},"label:SpanIconWrapper;"),ge=(0,w.Z)("span",{target:"e4p686t9"})({display:"inline-block",position:"relative",top:"3px"},"label:SpanVerifiedIconWrapper;"),me=(0,w.Z)(re.rU,{target:"e4p686t10"})({display:"flex",marginBottom:"8px",width:"fit-content"},"label:StyledSpanAuthorHeader;"),fe=(0,w.Z)("div",{target:"e4p686t11"})({display:"flex"},"label:DivVerifiedWrapper;"),xe=(0,w.Z)("div",{target:"e4p686t13"})({marginTop:"24px",position:"relative"},"label:DivTranscriptWrapper;"),be=(0,w.Z)("div",{target:"e4p686t14"})((({theme:e})=>(0,T.GI)({theme:e})),{fontSize:"17px",lineHeight:"20px",fontWeight:"600",marginBottom:"9px"},"label:DivTranscriptHeader;"),ye=(0,w.Z)("div",{target:"e4p686t15"})((({theme:e})=>(0,T.GI)({theme:e})),{fontSize:"15px",lineHeight:"26px",whiteSpace:"pre-line"},"label:DivTranscriptContent;");const je={display:"inline",lineHeight:"20px"},_e=e=>{var t;const i=(0,l.Q)(),{item:r,author:d,description:s,stats:p,isBot:v=!1,handleClose:h,pageType:g}=e,{uniqueId:m,secUid:f}=(0,c.m7)(d),x=`${(0,u.yl)({uniqueId:m,secUid:f})}`,{video:_}=(0,c.m7)(r),{subtitleInfos:k}=(0,c.m7)(_),w=null!==(t=k&&(0,N.YV)(k))&&void 0!==t?t:"",[C,I]=(0,n.b7)(X.O,{dependencies:[r],selector:e=>e.transcripts[r.id]}),T=(0,a.useMemo)((()=>{const{author:e}=r;return function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(i[o[n]]=e[o[n]])}return i}(r,["author"])}),[r]),D=(0,a.useCallback)((e=>()=>{b.vD.handleInfoCardClick({group_id:null==r?void 0:r.id,section:e})}),[r]),[O,S]=(0,a.useState)(v),[L,B]=(0,a.useState)(!1),P=(0,a.useRef)(null),Z=(0,a.useCallback)((()=>{b.vD.handleInfoCardClick({group_id:null==r?void 0:r.id,section:"caption_see_more"}),S(!0),B(!1)}),[r]);(0,a.useEffect)((()=>{s&&(null==P?void 0:P.current)&&P.current.scrollHeight>P.current.clientHeight&&B(!0)}),[r,s]),(0,a.useEffect)((()=>{122===g&&w&&void 0===C&&I.fetchTranscript({url:w,itemId:r.id})}),[w,I,C,r,g]);const F=(0,a.useRef)(null);return function(e,t){(0,a.useEffect)((()=>{function i(i){e.current&&!e.current.contains(i.target)&&t()}return document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}}),[e,t])}(F,h),(0,o.jsx)(se,Object.assign({hasTranscript:C&&C.length>0},{children:(0,o.jsx)(de,Object.assign({onMouseLeave:h,hasTranscript:C&&C.length>0},{children:(0,o.jsxs)(ae,Object.assign({ref:F},{children:[(0,o.jsxs)(me,Object.assign({onClick:D("user"),to:x},{children:[(0,o.jsx)(he,{children:(0,o.jsx)(j.q,{"data-e2e":"video-user-avatar",size:40,src:null==d?void 0:d.avatarThumb},void 0)},void 0),(0,o.jsxs)(le,{children:[(0,o.jsxs)(fe,{children:[(0,o.jsx)(ve,Object.assign({"data-e2e":"video-user-name",verified:Boolean(null==d?void 0:d.verified)},{children:null==d?void 0:d.uniqueId}),void 0),(null==d?void 0:d.verified)&&(0,o.jsx)(ge,{children:(0,o.jsx)(y.Q,{width:12,height:12},void 0)},void 0)]},void 0),null==d?void 0:d.nickname]},void 0)]}),void 0),s&&(0,o.jsx)(pe,{children:(0,o.jsxs)(ue,Object.assign({ref:P,expanded:O},{children:[L&&(0,o.jsx)(ce,Object.assign({onClick:Z},{children:i("seo_aggre_see_more")}),void 0),(0,o.jsx)(Y.Q,{item:r,style:je,onLinkClick:D("hashtag"),styleType:L?"channel-break":"channel"},void 0)]}),void 0)},void 0),(0,o.jsx)(J._,{item:T,styleType:5,e2eTag:"video-music",onLinkClick:D("music")},void 0),p&&(0,o.jsx)(ne,{likes:p.diggCount,comments:p.commentCount,shares:p.shareCount},void 0),122===g&&C&&C.length>0&&(0,o.jsxs)(xe,{children:[(0,o.jsx)(be,{children:i("seo_aggre_transcript_header")},void 0),(0,o.jsx)(ye,{children:C.map((e=>e.text)).join("\r\n")},void 0)]},void 0)]}),void 0)}),void 0)}),void 0)};const ke=(0,a.memo)((function({itemStruct:e,index:t,isBot:i,pageType:w}){var C,I,T,B,N,Y,J,X,ee,te,ie,oe;const ne=(0,l.Q)(),re=e,{id:ae}=re,{id:de,video:se,itemMute:le=!1,desc:ce="",scheduleTime:pe,secret:ue=!1,forFriend:ve=!1,adLabelVersion:he}=(0,c.m7)(re),{playAddr:ge="",cover:me="",zoomCover:fe,duration:xe,bitrateInfo:be,bitrate:ye}=(0,c.m7)(se),[je,ke]=(0,a.useState)(!1),[we,Ce]=(0,a.useState)("down"),{language:Ie="en"}=null!==(C=(0,p.Lh)((()=>["language"]),[]))&&void 0!==C?C:{},Te=(null==fe?void 0:fe[480])?fe[480]:me,De=(0,a.useRef)(null),{description:Oe}=(0,a.useMemo)((()=>{var e,t;const i=(0,m.s)({statusCode:0,itemInfo:{itemStruct:re},t:ne,language:Ie});return{title:null!==(e=null==i?void 0:i.title)&&void 0!==e?e:null==re?void 0:re.desc,description:null!==(t=i.description)&&void 0!==t?t:null==re?void 0:re.desc}}),[ne,Ie,re]),Se=(0,a.useMemo)((()=>{const{author:e}=re;return function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(i[o[n]]=e[o[n]])}return i}(re,["author"])}),[re]),Le=(0,a.useMemo)((()=>{var e,t,i,o;return(0,u.fH)({uniqueId:null!==(t=null===(e=re.author)||void 0===e?void 0:e.uniqueId)&&void 0!==t?t:"",videoId:null===(i=re.video)||void 0===i?void 0:i.id,secUid:null===(o=re.author)||void 0===o?void 0:o.secUid})}),[re]),Be=(0,a.useMemo)((()=>{var e,t;return{to_user_id:null!==(t=null===(e=null==re?void 0:re.author)||void 0===e?void 0:e.uniqueId)&&void 0!==t?t:"",enter_method:"click_anchor"}}),[re]),Pe=(0,a.useMemo)((()=>{var e,t;return Object.assign(Object.assign({},Be),{group_id:ae,author_id:null!==(t=null===(e=re.author)||void 0===e?void 0:e.uniqueId)&&void 0!==t?t:"",is_scheduled:Boolean(pe),secret:ue,forFriend:ve,isPaidPartnership:2===he})}),[Be,ae,re,pe,ue,ve,he]),{showBrowserMode:Ze}=(0,a.useContext)(v._),Fe=(0,n.qj)(h.f),We=(0,r.fz)(f.KF),Me=(0,r.fz)(x.ec),ze=(0,a.useCallback)(((e,i)=>{var o,n;if(e.preventDefault(),e.stopPropagation(),k("video")(),null==re?void 0:re.showNotPass)return;const r=Object.assign(Object.assign({},Pe),{enter_method:i,from_mode:1,scene:"video_feed"});Ze({index:t,teaParams:r,playProgress:null!==(n=null===(o=De.current)||void 0===o?void 0:o.currentTime)&&void 0!==n?n:0}),Me.setEnterMethod(i),We.handleUserChangeVideoOrPlayMode(),We.reportVideoInteractStart({startTime:Date.now(),situation:"open_browser_mode",enter_method:i})}),[null==re?void 0:re.showNotPass,Pe,Ze,t,Me,We]),Re=(0,a.useRef)(null),Ae=(0,a.useCallback)((()=>{k("info_card_icon")();let e="right";if(Re.current){const t=Re.current.getBoundingClientRect();if(t){const{left:i,right:o}=t,n=window.innerWidth-o;e=window.innerWidth>600&&n>i?"right":"down"}}Ce(e),ke(!0),122===w&&b.vD.handleInfoCardShow({group_id:de})}),[de,Re,w]),Ee=(0,a.useCallback)((e=>i=>{var o,n;i.preventDefault(),Fe.updateVideo({currentVideo:{id:ae,index:t,mode:1},playProgress:null!==(n=null===(o=De.current)||void 0===o?void 0:o.currentTime)&&void 0!==n?n:0}),Me.setEnterMethod(e),We.reportVideoInteractStart({startTime:Date.now(),situation:"three_column_user_hover",enter_method:e})}),[!1,Fe,ae,t,Me,We]),Ve=122===w||104===w;return(0,o.jsxs)(G,Object.assign({ref:Re},{children:[(0,o.jsxs)(F,Object.assign({onClick:ze},{children:[(0,o.jsx)(_.T,Object.assign({e2eTag:"channel-item",ratio:.7538461538461538,borderRadius:"0",hasDescUnderItem:!0},{children:(0,o.jsx)("a",Object.assign({style:(null==re?void 0:re.showNotPass)?{pointerEvents:"none"}:void 0,href:Le,onMouseEnter:Ee("hover_cover")},{children:(0,o.jsxs)(U,{children:[(0,o.jsx)(g.S,{desc:Oe,poster:Te,horizontal:!1,mode:1,ref:De,id:re.id,playUrl:ge,index:t,itemMute:le,duration:xe,bitrateInfo:be,teaParams:Pe,disableDownload:!1,bitrate:Number(ye)},void 0),(0,o.jsxs)(D,{children:[(0,o.jsx)(E,Object.assign({"data-e2e":"video-like-icon"},{children:(0,o.jsx)(O,{width:16,height:16,fill:"#fff"},void 0)}),void 0),(0,o.jsx)(S,{children:(0,c.BT)(null!==(T=null===(I=re.stats)||void 0===I?void 0:I.playCount)&&void 0!==T?T:0)},void 0)]},void 0)]},void 0)}),void 0)}),void 0),(0,o.jsx)(L,Object.assign({forBot:i,title:null==Se?void 0:Se.desc,showEllipsis:Ve},{children:null==Se?void 0:Se.desc}),void 0)]}),void 0),(0,o.jsxs)(W,{children:[(0,o.jsxs)(V,Object.assign({onClick:Ae},{children:[(0,o.jsx)(K,{visible:je,renderDirection:we},void 0),(i||je)&&(0,o.jsxs)(q,Object.assign({visible:je,forBot:i,renderDirection:we},{children:[(0,o.jsx)(Q,{},void 0),(0,o.jsx)(_e,{item:re,author:re.author,description:ce,stats:re.stats,isBot:i,pageType:w,handleClose:()=>{ke(!1)}},void 0),(0,o.jsx)($,{},void 0)]}),void 0),Ve&&(0,o.jsx)(H,{children:(0,o.jsx)(d.l,{size:16},void 0)},void 0)]}),void 0),(0,o.jsxs)(M,{children:[(0,o.jsxs)(z,Object.assign({uniqueId:null!==(N=null===(B=re.author)||void 0===B?void 0:B.uniqueId)&&void 0!==N?N:"",secUid:null===(Y=re.author)||void 0===Y?void 0:Y.secUid,teaParams:Be,onClick:k("user")},{children:[(0,o.jsx)(R,{children:(0,o.jsx)(j.q,{"data-e2e":"video-user-avatar",size:24,src:null===(J=re.author)||void 0===J?void 0:J.avatarThumb},void 0)},void 0),(0,o.jsx)(P,Object.assign({"data-e2e":"video-user-name",verified:Boolean(null===(X=re.author)||void 0===X?void 0:X.verified)},{children:null===(ee=re.author)||void 0===ee?void 0:ee.uniqueId}),void 0),(null===(te=re.author)||void 0===te?void 0:te.verified)&&(0,o.jsx)(A,{children:(0,o.jsx)(y.Q,{width:12,height:12},void 0)},void 0)]}),void 0),(0,o.jsxs)(Z,Object.assign({onClick:ze},{children:[(0,o.jsx)(E,{children:(0,o.jsx)(s.B,{size:16},void 0)},void 0),(0,c.BT)(null!==(oe=null===(ie=re.stats)||void 0===ie?void 0:ie.diggCount)&&void 0!==oe?oe:0)]}),void 0)]},void 0)]},void 0)]}),void 0)}),((e,t)=>e.itemId===t.itemId))},57651:(e,t,i)=>{i.d(t,{O:()=>M,n:()=>W});var o=i(64047),n=i(73566),r=i(48185),a=i(19630),d=i(2600),s=i.n(d),l=i(20948),c=i(56979),p=i(35435),u=i(15608),v=i(68854),h=i(82346),g=i(48782),m=i(58569),f=i(10026),x=i(5549),b=i(60595),y=i(96082),j=i(27160),_=i(26641),k=i(2844),w=i(99969),C=i(75176);function I(e,t=!1){var i;if(!e.length)return{instruction:"redirect",code:t?404:301};const o=e[0];return 10003===o.statusCode?{instruction:"redirect",code:t?404:301}:0!==o.statusCode?{instruction:"redirect",code:t?500:301}:0===(null===(i=null==o?void 0:o.itemList)||void 0===i?void 0:i.length)?{instruction:"redirect",code:302}:{instruction:"moveOn"}}var T=i(29232),D=i(57244),O=i(43121),S=i(79855),L=i(18645),B=i(21590);let P=class{constructor(e){this.fetch=e}getVideoExpansionList(e){return this.fetch.get("/api/channel/mvp/video/",{query:e,baseUrlType:2})}getWordList(e){return this.fetch.get("/api/channel/mvp/relatedword/",{query:e,baseUrlType:2})}getTranscript(e){return(0,O.P)((()=>{return t=this,i=void 0,n=function*(){return window.fetch(e).then((e=>e.text()))},new((o=void 0)||(o=Promise))((function(e,r){function a(e){try{s(n.next(e))}catch(e){r(e)}}function d(e){try{s(n.throw(e))}catch(e){r(e)}}function s(t){var i;t.done?e(t.value):(i=t.value,i instanceof o?i:new o((function(e){e(i)}))).then(a,d)}s((n=n.apply(t,i||[])).next())}));var t,i,o,n}))}catchParseWebVttError(e){return e}redirect(e){window&&(window.location.href=`${B.o}${location.search}`)}};P=(0,o.__decorate)([(0,D.G)({providers:[S.C]}),(0,o.__metadata)("design:paramtypes",[L.r])],P);const Z={Googlebot:1,Bingbot:2},F=e=>e?Z[e]:0,W=60;let M=class extends n.D{constructor(e,t,i,o){super(),this.service=e,this.seoModule=t,this.appContext=i,this.bizContext=o,this.defaultState={keyword:"",transcripts:{},loading:!0,pagePayload:void 0,offset:0,isLoadingMore:!1,hasMore:!0}}setLoading(e,t){console.log({loading:t}),e.loading=t}setDataPayload(e,t){Object.assign(e,t)}setTranscript(e,t){const{itemId:i,transcript:o}=t;e.transcripts[i]=o}setHasMore(e,t){e.hasMore=t}appendItemList(e,t){var i,o;const n=null===(o=null===(i=e.pagePayload)||void 0===i?void 0:i.itemResponse)||void 0===o?void 0:o.itemList,r=null!=n?n:[];Object.assign(null!=n?n:{},s()([...r,...t],"id"))}getPageRenderData(e){return e.pipe((0,l.M)(this.appContext.state$,this.bizContext.state$),(0,c.U)((([{keyword:e,botRenderConfig:t},i,o])=>{var n,r,a,d;return{keyword:(0,w.$K)(e),language:i.lang,region:null===(n=i.appContext)||void 0===n?void 0:n.region,isBot:null===(r=o.bizContext)||void 0===r?void 0:r.isBot,appType:null!==(d=null===(a=i.appContext)||void 0===a?void 0:a.appType)&&void 0!==d?d:"t",botRenderConfig:t,trafficType:function(){var e,t;return(null===(e=o.bizContext)||void 0===e?void 0:e.isGoogleBot)?F("Googlebot"):(null===(t=o.bizContext)||void 0===t?void 0:t.isBingBot)?F("Bingbot"):F()}()}})),(0,p.w)((({keyword:e,language:t,region:i,trafficType:o,appType:n,isBot:r,botRenderConfig:a})=>{const d=r?W:16,s=r?void 0:0;return(0,u.D)([this.getVideoExpansionList(e,0,i,o,d,s),this.getWordList(e,t)]).pipe((0,v.K)((()=>(0,h.of)([]))),(0,c.U)((e=>({response:e,nextStep:I(e,r)}))),(0,g.h)((({nextStep:e})=>"redirect"!==e.instruction||(this.service.redirect(e.code),!1))),(0,p.w)((({response:[i,o]})=>{var s,l;i.itemList=null===(s=i.itemList)||void 0===s?void 0:s.filter((e=>void 0!==e.author));const c=[],{hasMore:v=!0,itemList:g=[]}=i,f=[(0,h.of)(void 0)],x={keyword:e,itemResponse:i,wordListResponse:o},b=null!==(l=null==a?void 0:a.bot_info_card_render_count)&&void 0!==l?l:10;return r&&g.slice(0,b).forEach((e=>{var t;const i=null===(t=e.video)||void 0===t?void 0:t.subtitleInfos;if(i&&0!==i.length){const t=(0,y.YV)(i);t&&f.push(this.downloadTranscript$(t,e.id))}})),(0,u.D)(f).pipe((0,p.w)((o=>{var r;const a={};return o.forEach((e=>{e&&(c.push((0,h.of)(this.getActions().setTranscript(e))),a[e.itemId]=(0,T.JQ)(e.transcript.map((e=>e.text))))})),(0,m.T)(...c,(0,h.of)(this.getActions().setHasMore(v),this.getActions().setDataPayload({keyword:e,pagePayload:x,offset:null!==(r=i.offset)&&void 0!==r?r:d})),this.seoModule.setChannelSEOProps(x,{language:t},n,a))})))})),(0,f.O)(this.getActions().setLoading(!0)),(0,x.l)(this.getActions().setLoading(!1),this.terminate()))})))}loadMore(e){return e.pipe((0,l.M)(this.appContext.state$,this.bizContext.state$,this.state$),(0,c.U)((([{count:e},t,i,{offset:o,keyword:n}])=>{var r,a,d,s,l;return{keyword:(0,w.$K)(n),count:e,offset:o,language:t.lang,region:null===(r=t.appContext)||void 0===r?void 0:r.region,appId:null===(a=t.appContext)||void 0===a?void 0:a.appId,isBot:null===(d=i.bizContext)||void 0===d?void 0:d.isBot,appType:null!==(l=null===(s=t.appContext)||void 0===s?void 0:s.appType)&&void 0!==l?l:"t",trafficType:function(){var e,t;return(null===(e=i.bizContext)||void 0===e?void 0:e.isGoogleBot)?F("Googlebot"):(null===(t=i.bizContext)||void 0===t?void 0:t.isBingBot)?F("Bingbot"):F()}()}})),(0,p.w)((({keyword:e,count:t,appId:i,region:o,trafficType:n,offset:r})=>this.getVideoExpansionList(e,i,o,n,t,r).pipe((0,g.h)((e=>0===e.statusCode&&void 0!==e.itemList)),(0,p.w)((({itemList:e=[],hasMore:t=!0,offset:i=0})=>(0,h.of)(this.getActions().setHasMore(t),this.getActions().setDataPayload({offset:i}),this.getActions().appendItemList(e)))),(0,f.O)(this.getActions().setDataPayload({isLoadingMore:!0})),(0,x.l)(this.getActions().setDataPayload({isLoadingMore:!1}))))))}fetchTranscript(e){return e.pipe((0,p.w)((({url:e,itemId:t})=>this.downloadTranscript$(e,t).pipe((0,p.w)((e=>{if(e){const{transcript:i}=e;return(0,h.of)(this.getActions().setTranscript({itemId:t,transcript:i}))}return(0,h.of)(this.noop())}))))))}downloadTranscript$(e,t){return this.service.getTranscript(e).pipe((0,p.w)((e=>{const i=(0,C.K)(e).cues;return(0,h.of)({itemId:t,transcript:i})})),(0,v.K)((e=>(0,h.of)(void 0))))}getVideoExpansionList(e,t=0,i="",o=0,n=W,r=0){return this.service.getVideoExpansionList({keyword:(0,w.QQ)(e),count:n,appId:t,region:i,trafficType:o,offset:r}).pipe((0,v.K)((()=>(0,h.of)({statusCode:-1,itemList:[]}))))}getWordList(e,t){return this.service.getWordList({word:(0,w.QQ)(e),language:t,count:10}).pipe((0,v.K)((()=>(0,h.of)({statusCode:-1,relatedWordList:[]}))))}};(0,o.__decorate)([(0,r.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],M.prototype,"setLoading",null),(0,o.__decorate)([(0,r.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],M.prototype,"setDataPayload",null),(0,o.__decorate)([(0,r.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],M.prototype,"setTranscript",null),(0,o.__decorate)([(0,r.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],M.prototype,"setHasMore",null),(0,o.__decorate)([(0,r.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],M.prototype,"appendItemList",null),(0,o.__decorate)([(0,r.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[b.y]),(0,o.__metadata)("design:returntype",b.y)],M.prototype,"getPageRenderData",null),(0,o.__decorate)([(0,r.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[b.y]),(0,o.__metadata)("design:returntype",b.y)],M.prototype,"loadMore",null),(0,o.__decorate)([(0,r.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[b.y]),(0,o.__metadata)("design:returntype",b.y)],M.prototype,"fetchTranscript",null),M=(0,o.__decorate)([(0,a.Y)("ChannelPageModule"),(0,o.__metadata)("design:paramtypes",[P,j.q,_.G,k.r])],M)},79855:(e,t,i)=>{i.d(t,{C:()=>a});var o=i(12579),n=i(43226),r=i.n(n);const a={provide:new o.O("PreconnectDomains"),useValue:r()}}}]);