"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[8933],{82286:(e,t,i)=>{i.d(t,{JW:()=>c,xB:()=>g,bT:()=>p});var a=i(9236),s=i(91051),o=i(21041),n=i(25508),l=i(33642),d=i(17133),r=i(33966);function p(){const{language:e,abTestVersion:t,user:i,appType:a}=(0,l.m7)((0,d.Lh)((()=>["language","abTestVersion","user","appType"]),[])),{uniqueId:r}=(0,o.UO)();return(0,s.useMemo)((()=>Object.assign({language:e,abTestVersion:t,user:i,appType:a},function(e){const t=n.c.isRealUniqueId(e),i=n.c.isPureNumber(e,!1);return t?{uniqueId:e.toLowerCase(),secUid:""}:i?{uniqueId:"",secUid:"",userId:e}:{uniqueId:"",secUid:e}}(r))),[r,e,t,i,a])}function c({uniqueId:e,secUid:t}){const{user:i}=(0,l.m7)((0,d.Lh)((()=>["user"]),[]));return!!i&&(Boolean(e&&e===i.uniqueId)||Boolean(t&&t===i.secUid))}function g({user:e,listKey:t}){const{language:i,abTestVersion:o,user:n}=(0,l.m7)((0,d.Lh)((()=>["language","abTestVersion","user"]),[])),p=(0,a.qj)(r.h);return(0,s.useCallback)((()=>{var a;p.getUserVideoList({secUid:null!==(a=null==e?void 0:e.secUid)&&void 0!==a?a:"",key:t,language:i,abTestVersion:o,user:n})}),[p,t,i,o,n,null==e?void 0:e.secUid])}},4633:(e,t,i)=>{i.d(t,{t:()=>k});var a,s=i(64047),o=i(73566),n=i(48185),l=i(19630),d=i(82346),r=i(19327),p=i(58569),c=i(10026),g=i(60595),h=i(53095),m=i(20948),u=i(35435),y=i(68854),_=i(5549),v=i(12167),x=i(33642),b=i(10410),f=i(88125),I=i(27160),P=i(33966),C=i(66599),j=i(66046),w=i(2844);!function(e){e.Initial="initial",e.CreatePlaylist="create_playlist",e.CreatePlaylistReady="create_playlist_ready"}(a||(a={}));let k=class extends o.D{constructor(e,t,i,a,s,o,n){super(),this.service=e,this.playlistModule=t,this.seoModule=i,this.itemList=a,this.user=s,this.recommendUser=o,this.bizContext=n,this.defaultState={uniqueId:void 0,statusCode:void 0,secUid:void 0,profileState:"initial"}}setUniqueId(e,t){e.uniqueId=t}setSecUid(e,t){e.secUid=t}setStatusCode(e,t){e.statusCode=t}setProfileState(e,t){e.profileState=t}resetUserPage(e){return e.pipe((0,h.z)((()=>(0,d.of)(this.getActions().setUniqueId(void 0),this.recommendUser.getActions().setUniqueId(void 0),this.getActions().setSecUid(void 0),this.getActions().setStatusCode(0),this.itemList.getActions().resetItemList({key:"favorites"}),this.itemList.getActions().resetItemList({key:"user-post"}),this.itemList.getActions().resetItemList({key:"user-liked"}),this.itemList.getActions().dispose$(),this.playlistModule.getActions().resetData(),this.getActions().setProfileState("initial")))))}getUserInfo(e){return e.pipe((0,m.M)(this.user.state$,this.bizContext.state$),(0,u.w)((([e,t,i])=>{var a,s,o,n,l;const{uniqueId:g,language:m,abTestVersion:u,user:b,appType:f,isVideoPlaylistOn:I=!1}=e,{uniqueId:P,secUid:C}=(0,x.m7)(b),j=t.users[null!=g?g:""];let w;const k=new r.c;if("number"==typeof(null===(a=null==j?void 0:j.extraInfo)||void 0===a?void 0:a.statusCode)){const e=this.itemList.getUserVideoList$({secUid:null!==(s=j.secUid)&&void 0!==s?s:"",key:"user-post",abTestVersion:u,user:b,language:m},{onVideoList(e){k.next(e),k.complete()}}),t=Boolean(b)&&(Boolean(P&&P===j.uniqueId)||Boolean(C&&C===j.secUid));w=(0,p.T)(e,this.setSEO(m,f,null===(o=null==i?void 0:i.bizContext)||void 0===o?void 0:o.isBot,k,j),(0,d.of)(this.getActions().setUniqueId(j.uniqueId),this.recommendUser.getActions().setUniqueId(j.uniqueId),this.getActions().setSecUid(j.secUid),!t&&j.privateAccount?this.noop():this.playlistModule.getActions().getVideoPlaylistData({uid:null!==(n=j.id)&&void 0!==n?n:"",secUid:null!==(l=j.secUid)&&void 0!==l?l:"",isReset:!0})))}else{let t=!1;w=this.service.getUserDetail(e).pipe((0,h.z)((e=>{var a,s,{needFix:o}=e,n=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(i[a[s]]=e[a[s]])}return i}(e,["needFix"]);const{statusCode:l,userInfo:{user:r,stats:c}={}}=n,g=[(0,d.of)(this.getActions().setStatusCode(l),this.getActions().setUniqueId(null==r?void 0:r.uniqueId),this.recommendUser.getActions().setUniqueId(null==r?void 0:r.uniqueId),this.getActions().setSecUid(null==r?void 0:r.secUid))];let h;(null==r?void 0:r.id)&&(g.push((0,d.of)(this.user.getActions().setUser(Object.assign(Object.assign({},r),{extraInfo:{statusCode:l}}))),(0,d.of)(this.user.getActions().setUserStats({stats:Object.assign(Object.assign({},null!=c?c:{}),{needFix:o}),uniqueId:r.uniqueId}))),0!==l&&10222!==l||(h=this.itemList.getUserVideoList$({secUid:null!==(a=r.secUid)&&void 0!==a?a:"",key:"user-post",userId:null==r?void 0:r.id,language:m,abTestVersion:u,user:b},{onVideoList(e){k.next(e),k.complete()}}),g.push(h),t=!0)),t||(k.next(void 0),k.complete()),g.push(this.setSEO(m,f,null===(s=i.bizContext)||void 0===s?void 0:s.isBot,k,r,c));const y=Boolean(b)&&(Boolean(P&&P===(null==r?void 0:r.uniqueId))||Boolean(C&&C===(null==r?void 0:r.secUid)));if(I&&(!(null==r?void 0:r.privateAccount)||y)){const{id:e="",secUid:t=""}=(0,x.m7)(r);g.push((0,d.of)(this.playlistModule.getActions().getVideoPlaylistData({uid:e,secUid:t,isReset:!0})))}return(0,p.T)(...g)})))}return w.pipe((0,y.K)((e=>(console.error(e),(0,d.of)(this.getActions().setStatusCode(-1))))),(0,c.O)(this.getActions().resetUserPage()),(0,_.l)(this.terminate()),(0,v.R)(this.dispose$))})))}setSEO(e,t,i=!1,a,s,o){const n={statusCode:0,userInfo:{user:null!=s?s:{},stats:null!=o?o:{}}},l={language:e};return i&&a?a.pipe((0,h.z)((e=>this.seoModule.setUserSEOProps(n,l,t,e)))):this.seoModule.setUserSEOProps(n,l,t)}};(0,s.__decorate)([(0,n.cQ)(),(0,s.__metadata)("design:type",g.y)],k.prototype,"dispose$",void 0),(0,s.__decorate)([(0,n.lF)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Object]),(0,s.__metadata)("design:returntype",void 0)],k.prototype,"setUniqueId",null),(0,s.__decorate)([(0,n.lF)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Object]),(0,s.__metadata)("design:returntype",void 0)],k.prototype,"setSecUid",null),(0,s.__decorate)([(0,n.lF)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Number]),(0,s.__metadata)("design:returntype",void 0)],k.prototype,"setStatusCode",null),(0,s.__decorate)([(0,n.lF)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,String]),(0,s.__metadata)("design:returntype",void 0)],k.prototype,"setProfileState",null),(0,s.__decorate)([(0,n.Qm)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[g.y]),(0,s.__metadata)("design:returntype",void 0)],k.prototype,"resetUserPage",null),(0,s.__decorate)([(0,n.Qm)({payloadGetter:1}),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[g.y]),(0,s.__metadata)("design:returntype",void 0)],k.prototype,"getUserInfo",null),k=(0,s.__decorate)([(0,l.Y)("UserPage"),(0,s.__metadata)("design:paramtypes",[b.K,f.c,I.q,P.h,C.z,j.R,w.r])],k)},40481:(e,t,i)=>{i.d(t,{T9:()=>P,EN:()=>m,XL:()=>f,PN:()=>j,nI:()=>x,k:()=>S,WX:()=>y,$M:()=>b,GI:()=>u,ez:()=>I,tI:()=>O,l2:()=>v,vw:()=>_,ou:()=>C,s_:()=>w,y2:()=>k});var a=i(4139),s=i(58718),o=i(97978),n=i(36488),l=i(11040),d=i(91051),r=i(79067);const p={id:"video-dark-407479bb",use:"video-dark-407479bb-usage",viewBox:"0 0 40 40",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" id="video-dark-407479bb"><path fill="white" fill-opacity=".34" d="M28.447 35.066H4.777A4.211 4.211 0 0 1 .57 30.86V8.776A4.211 4.211 0 0 1 4.776 4.57H28.45a4.211 4.211 0 0 1 4.206 4.206v5.782l5.367-4.817a.843.843 0 0 1 1.405.625V29.27a.843.843 0 0 1-1.405.626l-5.367-4.818v5.782a4.215 4.215 0 0 1-4.209 4.206Z" /><path fill="white" fill-rule="evenodd" stroke="white" stroke-width=".6" d="M15.965 20.105v5.25c0 .198.16.358.357.358h.929c.197 0 .357-.16.357-.358v-5.25h5.25c.197 0 .357-.16.357-.357v-.928a.357.357 0 0 0-.358-.357h-5.25v-5.25a.357.357 0 0 0-.356-.357h-.929a.357.357 0 0 0-.357.357v5.25h-5.25a.357.357 0 0 0-.358.357v.928c0 .198.16.357.358.357h5.25Z" clip-rule="evenodd" /></symbol>'};function c(e){const t=(0,d.useContext)(r.e);return(0,d.useLayoutEffect)((()=>(t.add(p),()=>{t.remove("video-dark-407479bb")})),[]),(0,l.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,l.jsx)("use",{xlinkHref:"#video-dark-407479bb"},void 0)}),void 0)}const g={id:"video-1aaf63be",use:"video-1aaf63be-usage",viewBox:"0 0 40 40",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" id="video-1aaf63be"><path fill="#161823" fill-opacity=".34" d="M28.447 35.067H4.777A4.211 4.211 0 0 1 .57 30.861V8.777a4.211 4.211 0 0 1 4.206-4.205H28.45a4.211 4.211 0 0 1 4.206 4.205v5.782l5.367-4.817a.843.843 0 0 1 1.405.625v18.904a.843.843 0 0 1-1.405.626l-5.367-4.817v5.781a4.215 4.215 0 0 1-4.209 4.206Z" /><path fill="white" fill-rule="evenodd" stroke="white" stroke-width=".6" d="M15.965 20.107v5.25c0 .197.16.357.357.357h.929c.197 0 .357-.16.357-.357v-5.25h5.25c.197 0 .357-.16.357-.357v-.929a.357.357 0 0 0-.358-.357h-5.25v-5.25a.357.357 0 0 0-.356-.357h-.929a.357.357 0 0 0-.357.357v5.25h-5.25a.357.357 0 0 0-.358.357v.929c0 .197.16.357.358.357h5.25Z" clip-rule="evenodd" /></symbol>'};function h(e){const t=(0,d.useContext)(r.e);return(0,d.useLayoutEffect)((()=>(t.add(g),()=>{t.remove("video-1aaf63be")})),[]),(0,l.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,l.jsx)("use",{xlinkHref:"#video-1aaf63be"},void 0)}),void 0)}const m=(0,a.Z)("div",{target:"e3q47hb0"})((({theme:{isDark:e,colors:t}})=>({width:"100%",display:"flex",flexDirection:"column",background:e?t.BGSecondary:t.BGPrimary,padding:"40px 24px 92px",boxSizing:"border-box",borderRadius:"8px",height:"calc(100vh - 145px)",position:"relative"})),"label:DivContentContainer;"),u=(0,a.Z)("p",{target:"e3q47hb1"})((({theme:e})=>[(0,n.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",typography:"P2",color:"TextSecondary"}),{display:"flex",alignItems:"center",cursor:"pointer",marginBottom:"16px"}]),"label:PBackText;"),y=(0,a.Z)("h3",{target:"e3q47hb2"})((({theme:e})=>[(0,n.GI)({theme:e,fontFamily:"Proxima",fontWeight:"bold",typography:"H3",color:"TextPrimary"})]),"label:H3Title;"),_=(0,a.Z)(s.Z,{target:"e3q47hb3"})((({theme:{direction:e}})=>({width:"20px",height:"20px",marginInlineEnd:"4px",transform:`rotateZ(${"rtl"===e?"180deg":0})`})),"label:StyledBackIcon;"),v=(0,a.Z)("p",{target:"e3q47hb4"})((({theme:e})=>[(0,n.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P2",color:"TextTertiaryAlt"}),{marginTop:"4px"}]),"label:PSubtitle;"),x=(0,a.Z)("div",{target:"e3q47hb5"})({height:"32px",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"32px 0 12px"},"label:DivNameContainer;"),b=(0,a.Z)("h6",{target:"e3q47hb6"})((({theme:e})=>[(0,n.GI)({theme:e,fontFamily:"Proxima",fontWeight:"bold",typography:"H6",color:"TextPrimary"}),{fontSize:"24px",lineHeight:"28px"}]),"label:H6Title;"),f=(0,a.Z)("div",{target:"e3q47hb7"})({display:"flex"},"label:DivCountContainer;"),I=(0,a.Z)("p",{target:"e3q47hb8"})((({theme:e,isRed:t=!1})=>[(0,n.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P4",color:t?"Primary":"TextTertiaryAlt"}),{fontSize:"14px",lineHeight:"17px"}]),"label:PCount;"),P=(0,a.Z)("div",{target:"e3q47hb9"})((({theme:e})=>[(0,n.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3",color:"Primary"}),{display:"flex",height:"24px",alignItems:"center",justifyContent:"flex-end",cursor:"pointer"}]),"label:DivAddVideoContainer;"),C=(0,a.Z)(o.Z,{target:"e3q47hb10"})({width:"20px",height:"20px",marginInlineEnd:"4px"},"label:StyledPlus;"),j=(0,a.Z)("div",{target:"e3q47hb11"})((({theme:e})=>({width:"100%",height:"206px",borderRadius:"4px",background:e.colors.BGView,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",cursor:"pointer"})),"label:DivEmptyContainer;"),w=(0,a.Z)(h,{target:"e3q47hb12"})({width:"40px",height:"40px",marginBottom:"12px"},"label:StyledVideoIcon;"),k=(0,a.Z)(c,{target:"e3q47hb13"})({width:"40px",height:"40px",marginBottom:"12px"},"label:StyledVideoIconDark;"),O=(0,a.Z)("p",{target:"e3q47hb14"})((({theme:e})=>[(0,n.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P2",color:"TextSecondary"})]),"label:PEmptyText;"),S=(0,a.Z)("div",{target:"e3q47hb15"})({display:"flex",flexDirection:"column",width:"100%",height:"100%",overflowY:"auto"},"label:DivVideoListContainer;")},46475:(e,t,i)=>{i.d(t,{X:()=>c,H:()=>p});var a=i(11040),s=i(91051),o=i(19902),n=i(33642),l=i(4139);const d=(0,l.Z)("div",{target:"e150kk9w0"})({width:"100%"},"label:DivDraggableListContainer;"),r=(0,l.Z)("div",{target:"e150kk9w1"})((({isDragging:e=!1,theme:t})=>({background:e?t.colors.BGView:"",width:"100%"})),"label:DivDraggableItemContainer;");function p(e,t,i){const a=Array.from(e),[s]=a.splice(t,1);return a.splice(i,0,s),a}const c=(0,s.memo)((({supportDrag:e=!0,list:t=[],onDragEnd:i,renderItem:s})=>e?(0,a.jsx)(o.Z5,Object.assign({onDragEnd:i},{children:(0,a.jsx)(o.bK,Object.assign({droppableId:"droppable"},{children:(e,i)=>(0,a.jsxs)(d,Object.assign({},e.droppableProps,{ref:e.innerRef,isDraggingOver:i.isDraggingOver},{children:[t.map(((e,t)=>(0,a.jsx)(o._l,Object.assign({draggableId:e,index:t},{children:(i,o)=>{let{transform:l}=(0,n.m7)(i.draggableProps.style);o.isDragging&&l&&(l=l.replace(/\(.+,/,"(0,"));const d=Object.assign(Object.assign({},i.draggableProps.style),{transform:l});return(0,a.jsx)(r,Object.assign({ref:i.innerRef},i.draggableProps,i.dragHandleProps,{style:d,isDragging:o.isDragging},{children:s({index:t,id:e})}),void 0)}}),e))),e.placeholder]}),void 0)}),void 0)}),void 0):(0,a.jsx)(d,{children:t.map(((e,t)=>(0,a.jsx)(r,{children:s({index:t,id:e})},e)))},void 0)))},8869:(e,t,i)=>{i.d(t,{T:()=>C});var a=i(64047),s=i(73566),o=i(48185),n=i(19630),l=i(35167),d=i(53095),r=i(82346),p=i(35435),c=i(68854),g=i(10026),h=i(5549),m=i(20948),u=i(60595),y=i(66891),_=i(53984),v=i(55198),x=i(57244),b=i(90293),f=i(70526),I=i(18645);let P=class{constructor(e){this.fetch=e}checkPlaylistName(e){return this.fetch.get("/api/playlist/name_check",{query:{name:e},baseUrlType:2,headers:{[f.eD]:this.fetch.csrfToken}})}updatePlaylistName(e){return this.fetch.post("/api/playlist/update/",{baseUrlType:2,headers:{[f.eD]:this.fetch.csrfToken},body:b.stringify(e)})}};P=(0,a.__decorate)([(0,x.G)(),(0,a.__metadata)("design:paramtypes",[I.r])],P);let C=class extends s.D{constructor(e,t){super(),this.service=e,this.t=t,this.defaultState={playlistName:"",loading:!1,updatePlaylistNameLoading:!1,statusCode:0,isValid:!0,hasChecked:!1}}setLoading(e,t){e.loading=t}setUpdatePlaylistNameLoading(e,t){e.updatePlaylistNameLoading=t}setStatusCode(e,t){e.statusCode=t}setIsValid(e,t){e.isValid=t}setHasChecked(e,t){e.hasChecked=t}setPlaylistName(e,t){e.playlistName=t}resetData(e){return e.pipe((0,d.z)((()=>(0,r.of)(this.getActions().dispose$(),this.getActions().setLoading(!1),this.getActions().setPlaylistName(""),this.getActions().setUpdatePlaylistNameLoading(!1),this.getActions().setIsValid(!0),this.getActions().setStatusCode(0),this.getActions().setHasChecked(!1)))))}checkPlaylistName(e){return e.pipe((0,p.w)((e=>this.service.checkPlaylistName(e).pipe((0,c.K)((()=>(0,r.of)({statusCode:-1,isValid:!1}))),(0,d.z)((({statusCode:e,isValid:t=!1})=>(0,r.of)(this.getActions().setIsValid(t),this.getActions().setStatusCode(e)))),(0,g.O)(this.getActions().setHasChecked(!1),this.getActions().setLoading(!0)),(0,h.l)(this.getActions().setHasChecked(!0),this.getActions().setLoading(!1))))))}updatePlaylistName(e){return e.pipe((0,m.M)(this.state$),(0,p.w)((([e,{playlistName:t}])=>this.service.updatePlaylistName(Object.assign(Object.assign({},e),{name:t})).pipe((0,c.K)((()=>(0,r.of)({statusCode:-1}))),(0,d.z)((({statusCode:i})=>{const{playlistId:a,successCallback:s}=e;return _.I.handleCompleteEditingPlaylist({playlist_id:a,enter_method:"rename_playlist",status:0===i?"1":"0"}),0!==i&&v.h.open({content:this.t("playlist_webapp_toast_error_tryagain"),duration:3,widthType:"half"}),null==s||s(a,t),(0,r.of)(this.noop())})),(0,g.O)(this.getActions().setUpdatePlaylistNameLoading(!0)),(0,h.l)(this.getActions().setUpdatePlaylistNameLoading(!1))))))}};(0,a.__decorate)([(0,o.cQ)(),(0,a.__metadata)("design:type",u.y)],C.prototype,"dispose$",void 0),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],C.prototype,"setLoading",null),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],C.prototype,"setUpdatePlaylistNameLoading",null),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Number]),(0,a.__metadata)("design:returntype",void 0)],C.prototype,"setStatusCode",null),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],C.prototype,"setIsValid",null),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],C.prototype,"setHasChecked",null),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,String]),(0,a.__metadata)("design:returntype",void 0)],C.prototype,"setPlaylistName",null),(0,a.__decorate)([(0,o.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[u.y]),(0,a.__metadata)("design:returntype",void 0)],C.prototype,"resetData",null),(0,a.__decorate)([(0,o.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[u.y]),(0,a.__metadata)("design:returntype",void 0)],C.prototype,"checkPlaylistName",null),(0,a.__decorate)([(0,o.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[u.y]),(0,a.__metadata)("design:returntype",void 0)],C.prototype,"updatePlaylistName",null),C=(0,a.__decorate)([(0,n.Y)("PlaylistNameModule"),(0,a.__param)(1,(0,l.t)(y.s$)),(0,a.__metadata)("design:paramtypes",[P,Function])],C)},16468:(e,t,i)=>{i.d(t,{D:()=>P,v:()=>C});var a=i(11040),s=i(74820),o=i(9236),n=i(91051),l=i(3839),d=i(32273),r=i(68457),p=i(8869),c=i(28327),g=i(4139),h=i(41573),m=i(41830),u=i(36488);const y=(0,g.Z)("div",{target:"e1e94w3e0"})({position:"relative",width:"100%"},"label:DivEditAreaContainer;"),_=(0,g.Z)("input",{target:"e1e94w3e1"})((({theme:{colors:e,isDark:t}})=>({width:"100%",height:"38px",borderRadius:"4px",background:t?e.BGView:e.BGInput,caretColor:"#fe2c55",fontSize:"16px",color:e.TextPrimary,lineHeight:"24px",outline:"none",border:"none",padding:"7px 12px",boxSizing:"border-box",paddingInlineEnd:"38px","&:focus":{background:e.BGInput2,outline:"1.5px solid rgba(22, 24, 35, 0.2)"}})),"label:InputText;"),v=(_.withComponent("textarea"),(0,g.Z)("p",{target:"e1e94w3e10"})({height:"18px",lineHeight:"18px",color:"#FF4C3A",fontSize:"15px",marginTop:"6px",display:"flex",alignItems:"center"},"label:PInputError;")),x=(0,g.Z)("div",{target:"e1e94w3e11"})((({theme:{colors:e}})=>({width:"16px",height:"16px",marginInlineEnd:"4px",display:"flex",justifyContent:"center",alignItems:"center","*":{fill:e.Primary}})),"label:DivIconWrapper;"),b=(0,g.Z)(h.Z,{target:"e1e94w3e12"})((({theme:e})=>[(0,u.YJ)({direction:e.direction,end:"12px"}),{position:"absolute",top:"11px"}]),"label:StyledTickBold;"),f=(0,c.F4)({from:{transform:"rotateZ(0)"},to:{transform:"rotateZ(360deg)"}}),I=(0,g.Z)(m.Z,{target:"e1e94w3e13"})((({theme:e})=>[(0,u.YJ)({direction:e.direction,end:"12px"}),{position:"absolute",top:"7px",animation:`${f} 1s infinite`}]),"label:StyledProgressCircle;"),P=25,C=(0,n.memo)((({initialPlaylistName:e="",placeholder:t,style:i})=>{const c=(0,d.Q)(),{colors:g}=(0,s.u)(),[{playlistName:h="",loading:m=!1,isValid:u,hasChecked:f},C]=(0,o.b7)(p.T,{selector:e=>({playlistName:e.playlistName,loading:e.loading,isValid:e.isValid,hasChecked:e.hasChecked}),dependencies:[]}),j=f&&u,w=f&&!u,k=(0,n.useMemo)((()=>h.length>P?c("playlist_webapp_creation_namePlaylist_characterCount_limit"):w?c("yproject_playlist_name_toast",{name:h}):""),[w,h,c]),O=(0,n.useCallback)((()=>w||h.length>P?(0,a.jsxs)(v,{children:[(0,a.jsx)(x,{children:(0,a.jsx)(l.j,{size:16},void 0)},void 0),k]},void 0):m?(0,a.jsx)(I,{fill:g.LineInput,width:24,height:24},void 0):j?(0,a.jsx)(b,{fill:"#0BE09B",width:16,height:16},void 0):void 0),[w,j,g.LineInput,k,m,h.length]),S=(0,r.Nr)(((e="")=>{0===e.trim().length||e.length>P||C.checkPlaylistName(e)}),[C],1e3),D=(0,n.useCallback)((e=>{const{value:t}=e.target;S(t),C.setStatusCode(0),C.setIsValid(!0),C.setHasChecked(!1),C.setPlaylistName(t)}),[S,C]);return(0,n.useEffect)((()=>(e&&C.setPlaylistName(e),C.reset)),[C,e]),(0,a.jsxs)(y,Object.assign({style:i,"data-e2e":"edit-playlist-name-input"},{children:[(0,a.jsx)(_,{style:{outline:w?"1.5px solid #FF4C3A":""},placeholder:null!=t?t:c("playlist_webapp_upload_nameplaylist_header"),value:h,onChange:D},void 0),O()]}),void 0)}))},78986:(e,t,i)=>{i.d(t,{j:()=>U});var a=i(11040),s=i(74820),o=i(9236),n=i(91051),l=i(28972),d=i(7548),r=i(32273),p=i(63175),c=i(33966),g=i(75693),h=i(33642),m=i(4776),u=i(55198),y=i(99116),_=i(21041),v=i(25357),x=i(4139);const b=(0,x.Z)("div",{target:"e1cea6s60"})((({theme:e})=>({position:"fixed",zIndex:1001,background:e.colors.BGPrimary})),"label:DivContainer;"),f=(0,x.Z)("div",{target:"e1cea6s61"})((({theme:{colors:e}})=>({position:"fixed",left:0,top:0,right:0,bottom:0,background:e.ConstBGInverse2})),"label:DivMask;"),I=(0,x.Z)("div",{target:"e1cea6s62"})((({position:e="left",width:t="320px",theme:{isDark:i,colors:a}})=>[{position:"fixed",top:0,bottom:0,right:"right"===e?0:"unset",left:"right"===e?"unset":0,width:t,overflowY:"auto",WebkitOverflowScrolling:"touch",boxSizing:"border-box",lineHeight:"32px",transform:`translateX(${"right"===e?"100%":"-100%"})`,transition:"transform 300ms",background:i?a.BGSecondary:a.BGPrimary,"::-webkit-scrollbar":{display:"none"},"&.enter-done":{transform:"translateX(0)"}}]),"label:DivContent;"),P=(0,n.memo)((e=>{const{active:t,setActive:i,zIndex:s=1001,width:o,position:l="right",children:d}=e,[r,p]=(0,n.useState)(!1),c=(0,_.k6)(),g=(0,n.useCallback)((()=>{i(!1)}),[i]);return(0,n.useEffect)((()=>(p(!0),c.listen((()=>{i(!1)})))),[]),(0,a.jsxs)(b,Object.assign({style:{zIndex:s}},{children:[(0,a.jsx)(v.Z,Object.assign({unmountOnExit:!0,timeout:300,in:r&&t},{children:(0,a.jsx)(f,{onClick:g},void 0)}),void 0),(0,a.jsx)(v.Z,Object.assign({unmountOnExit:!0,timeout:300,in:r&&t},{children:(0,a.jsx)(I,Object.assign({width:o,position:l},{children:d}),void 0)}),void 0)]}),void 0)}));var C=i(43423),j=i(76071),w=i(79591),k=i(36488);const O=(0,x.Z)("div",{target:"evsm5jd0"})((({theme:{isDark:e,colors:t}})=>({position:"sticky",top:0,left:0,width:"100%",display:"flex",flexDirection:"column",padding:"24px 16px",boxSizing:"border-box",background:e?t.BGSecondary:t.BGPrimary,zIndex:10})),"label:DivDrawerHeaderContainer;"),S=(0,x.Z)("p",{target:"evsm5jd1"})((({theme:e})=>[(0,k.GI)({theme:e,fontFamily:"Sofia",fontWeight:"bold",typography:"H6",color:"TextPrimary"}),{fontSize:"24px",lineHeight:"28px"}]),"label:PDrawerTitle;"),D=(0,x.Z)("p",{target:"evsm5jd2"})((({theme:e})=>[(0,k.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P1",color:"TextTertiaryAlt"}),{marginTop:"4px",fontSize:"14px",lineHeight:"17px"}]),"label:PDrawerSubtitle;"),A=(0,x.Z)("div",{target:"evsm5jd3"})((({theme:{direction:e}})=>[(0,k.YJ)({direction:e,end:20}),{position:"absolute",top:"24px",width:"24px",height:"24px",cursor:"pointer"}]),"label:DivCloseContainer;"),L=(0,x.Z)("div",{target:"evsm5jd4"})({width:"100%",display:"flex",flexDirection:"column",height:"100%",overflowY:"auto"},"label:DivContentContainer;"),T=(0,x.Z)("div",{target:"evsm5jd5"})({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",height:"100vh",boxSizing:"border-box",padding:"0 59px",position:"relative"},"label:DivErrorContainer;"),F=(0,x.Z)("p",{target:"evsm5jd6"})((({theme:e})=>[(0,k.GI)({theme:e,fontFamily:"Proxima",fontWeight:"bold",typography:"P1",color:"TextPrimary"}),{marginTop:"24px",textAlign:"center"}]),"label:PErrorTitle;"),V=(0,x.Z)("p",{target:"evsm5jd7"})((({theme:e})=>[(0,k.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P3",color:"TextSecondary"}),{marginTop:"8px",textAlign:"center"}]),"label:PErrorDesc;"),U=(0,n.memo)((({needRequestAfterClickItem:e=!1,playlistId:t="",drawerActive:i,setDrawerActive:_,itemListKey:v,selectedVideoListKey:x,onHitBottom:b})=>{const f=(0,r.Q)(),{isRTL:I}=(0,p.Y)(),{colors:k}=(0,s.u)(),U=I?"left":"right",[{list:q=[],loading:Z=!1,hasMore:z=!0},B]=(0,o.b7)(c.h,{selector:e=>{var t;return null!==(t=e[v])&&void 0!==t?t:{}},dependencies:[v]}),E=(0,o.qj)(j.a),[M,N]=(0,o.b7)(g.y,{selector:e=>{var i;return null!==(i=e[t])&&void 0!==i?i:{}},dependencies:[t]}),{list:G=[]}=(0,h.m7)((0,o.mp)(c.h,{selector:e=>e[x],dependencies:[x]})),H=(0,n.useCallback)((e=>()=>{const{videoCount:t=0}=(0,h.m7)(M);N.setPlaylistItem(Object.assign(Object.assign({},M),{videoCount:t+e}))}),[N,M]),W=(0,n.useCallback)((i=>()=>{const a=[...G],s=G.findIndex((e=>e===i)),o=s>=0;if(o)a.splice(s,1);else{if(G.length>=C.hX)return void u.h.open({content:f("playlist_webapp_toast_error_vidlimit",{number:C.hX}),duration:3,widthType:"half"});a.push(i)}e?E.modifyPlaylistItems({playlistId:t,addItemIds:o?void 0:[i],deleteItemsIds:o?[i]:void 0,key:"video_playlist",enter_method:o?"remove_playlist_video":"add_playlist_video",onSuccess:H(o?-1:1)}):B.setItemListById({key:"create_video_playlist",list:a})}),[B,e,H,t,E,G,f]),$=(0,n.useCallback)((()=>{_(!1)}),[_]),R=0===q.length&&!z&&!Z,Q=(0,n.useRef)(null);return(0,m.s)({onHitBottom:b,elemRef:Q}),(0,n.useEffect)((()=>{i&&0===q.length&&z&&(null==b||b())}),[i,z,q.length,Z,b]),(0,a.jsxs)(P,Object.assign({active:i,setActive:_,width:"476px",position:U},{children:[R&&(0,a.jsxs)(T,{children:[(0,a.jsx)(A,Object.assign({onClick:$},{children:(0,a.jsx)(l.Z,{width:24,height:24,fill:k.TextTertiary},void 0)}),void 0),(0,a.jsx)(d.Z,{width:72,height:72,fill:k.TextTertiary},void 0),(0,a.jsx)(F,{children:f("playlist_webapp_selectvid_error_header")},void 0),(0,a.jsx)(V,{children:f("playlist_webapp_selectvid_error_desc")},void 0)]},void 0),!R&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(O,{children:[(0,a.jsx)(S,{children:f("playlist_webapp_selectvid_header")},void 0),(0,a.jsx)(D,{children:f("playlist_webapp_selectvid_desc")},void 0),(0,a.jsx)(A,Object.assign({onClick:$},{children:(0,a.jsx)(l.Z,{width:24,height:24,fill:k.TextTertiary},void 0)}),void 0)]},void 0),(0,a.jsxs)(L,Object.assign({ref:Q},{children:[q.map(((e,t)=>(0,a.jsx)(w.mo,{id:e,index:t,onClickVideoItem:W(e),selectedVideos:G,needShowMaskWhenAddedToOtherPlaylist:!0,needPostCheckbox:!0,supportPreview:!0},e))),Z&&(0,a.jsx)(y.g,{center:!0},void 0)]}),void 0)]},void 0)]}),void 0)}))},79591:(e,t,i)=>{i.d(t,{mo:()=>b,VV:()=>I});var a=i(11040),s=i(9236),o=i(43226),n=i.n(o),l=i(91051),d=i(6943),r=i(32273),p=i(38310),c=i(33642),g=i(40340),h=i(45949),m=i(54649),u=i(64157),y=i(55198),_=i(94215),v=i(19235);const x=(0,i(4139).Z)("div",{target:"e117us4s0"})((({theme:e})=>({width:"36px",height:"28px",display:"flex",justifyContent:"center",alignItems:"center","*":{fill:e.colors.TextSecondary}})),"label:DivIconWrapper;"),b=(0,l.memo)((({id:e,index:t,target:i="_self",onClickVideoItem:o=n(),editState:_="none",selectedVideos:b=[],needPostCheckbox:f=!1,needPostDragIcon:I=!1,supportPreview:P=!1,needShowMaskWhenAddedToOtherPlaylist:C=!1,extraTeaParams:j={}})=>{const w=(0,r.Q)(),k=(0,s.mp)(p.A,{selector:t=>t[e],dependencies:[e]}),{video:O,playlistId:S,stats:D,desc:A="",authorId:L="",scheduleTime:T=0,secret:F,forFriend:V}=(0,c.m7)(k),{duration:U,zoomCover:q,cover:Z="",playAddr:z="",bitrateInfo:B,bitrate:E,volumeInfo:M}=(0,c.m7)(O),N=(null==q?void 0:q[240])||(null==q?void 0:q[480])||Z,{playCount:G=0}=(0,c.m7)(D),H=b.includes(e),W=C&&Boolean(S)&&"0"!==S,$=(0,l.useMemo)((()=>({group_id:e,author_id:L,is_scheduled:Boolean(T),playlist_id:S,secret:F,forFriend:V})),[e,L,T,S,F,V]),R=(0,l.useMemo)((()=>Object.assign({playlist_id:S},j)),[j,S]),Q=(0,s.qj)(g.f),K=(0,l.useRef)(null),Y=(0,l.useCallback)((i=>{var a,s;W||((0,h.NS)(i),Q.updateVideo({currentVideo:{id:e,index:t,mode:1},playProgress:null!==(s=null===(a=K.current)||void 0===a?void 0:a.currentTime)&&void 0!==s?s:0}))}),[W,Q,e,t]),X=(0,l.useCallback)((()=>{if(W)return y.h.destroy(),void y.h.open({content:w("playlist_webapp_selectvid_toast_alreadyadded"),duration:3,widthType:"half"});null==o||o()}),[W,o,w]);return(0,a.jsxs)(v.Ni,Object.assign({onClick:X,hasBeenAddedToOtherPlaylist:W},{children:[("none"===_||"initial"===_||"add_videos"===_)&&(0,a.jsx)(v.fU,{children:t<9?`0${t+1}`:t+1},void 0),"remove_videos"===_&&(0,a.jsx)(v.fU,{children:H?(0,a.jsx)(v.Xc,{},void 0):(0,a.jsx)(v.nj,{},void 0)},void 0),P?(0,a.jsx)(v.UP,Object.assign({onMouseEnter:Y},{children:(0,a.jsx)(v.U$,{children:(0,a.jsx)(m.S,{desc:A,poster:N,horizontal:!1,mode:1,ref:K,id:e,playUrl:z,index:t,itemMute:!0,duration:U,bitrateInfo:B,teaParams:$,disableDownload:!0,volumeInfo:M,bitrate:Number(E)},void 0)},void 0)}),void 0):(0,a.jsx)(v.qf,{src:N},void 0),(0,a.jsxs)(v.UE,{children:[(0,a.jsx)(u.Q,{onLinkClick:n(),ellispsisLine:2,ellipsisOnNarrow:!0,item:k,target:i,e2eTag:"browse-video-desc",reportParams:R},void 0),(0,a.jsx)(v.ne,{children:w("playlist_webapp_profileview_playlists_numberviews",{num:G,number:(0,c.BT)(G)})},void 0)]},void 0),f&&(0,a.jsx)(v.o_,{children:H||W?(0,a.jsx)(v.Xc,{},void 0):(0,a.jsx)(v.nj,{},void 0)},void 0),I&&(0,a.jsx)(x,{children:(0,a.jsx)(d.S,{size:28},void 0)},void 0)]}),void 0)})),f=(0,l.memo)((({index:e})=>(0,a.jsxs)(v.Ni,{children:[(0,a.jsx)(v.fU,{children:e<9?`0${e+1}`:e+1},void 0),(0,a.jsx)(_.Xu,{style:{width:"80px",height:"106px",flexShrink:0}},void 0),(0,a.jsxs)(v.UE,{children:[(0,a.jsx)(_.kQ,{style:{width:"50%",height:"20px"}},void 0),(0,a.jsx)(_.kQ,{style:{width:"30%",height:"17px",marginTop:"6px"}},void 0)]},void 0)]},void 0))),I=(0,l.memo)((({startIndex:e=0})=>(0,a.jsx)(a.Fragment,{children:new Array(10).fill(0).map(((t,i)=>(0,a.jsx)(f,{index:e+i},`${e+i}`)))},void 0)))},43423:(e,t,i)=>{i.d(t,{jn:()=>a,hX:()=>s});const a={width:"154px",height:"44px",fontSize:"15px",lineHeight:"18px",minHeight:"unset",marginInlineStart:"8px"},s=100;var o;!function(e){e.None="none",e.Initial="initial",e.RemoveVideos="remove_videos",e.AddVideos="add_videos"}(o||(o={}))},92384:(e,t,i)=>{i.d(t,{OD:()=>g,cs:()=>h,xx:()=>m});var a=i(11040),s=i(9236),o=i(91051),n=i(21041),l=i(33642),d=i(17133),r=i(33966),p=i(33693),c=i(92323);function g(e){const{language:t="en",abTestVersion:i,user:a}=(0,l.m7)((0,d.Lh)((()=>["language","abTestVersion","user"]),[])),[n,p]=(0,s.b7)(r.h,{selector:e=>{var t;return null!==(t=e.video_playlist)&&void 0!==t?t:r.n},dependencies:[]}),{loading:c,hasMore:g}=n;return(0,o.useCallback)((()=>{!c&&g&&p.getPlaylistVideoList({mixId:e,key:"video_playlist",abTestVersion:i,user:a,language:t})}),[c,g,p,e,i,a,t])}const h=()=>{const{mixInfo:e}=(0,s.mp)(c.N,{selector:e=>({mixInfo:e.mixInfo}),dependencies:[]}),{id:t="",name:i="",creator:a}=(0,l.m7)(e),{uniqueId:d=""}=(0,l.m7)(a),r=(0,n.k6)(),{pathname:g}=(0,n.TH)(),{id:h}=(0,n.UO)();(0,o.useEffect)((()=>{if(!d||!t)return;const e=p.SN.videoPlaylist({id:t,uniqueId:d,content:i});if(i&&h===t&&e!==g){const t=`${e}${location.search}`;r.replace(t)}}),[t,g,r,i,h,d])},m=e=>(0,o.useMemo)((()=>{const t=e.length-e.trimStart().length;return t?(0,a.jsx)(a.Fragment,{children:new Array(t).fill(0).map(((e,t)=>(0,a.jsx)(o.Fragment,{children:" "},`${t}`)))},void 0):null}),[e])},76071:(e,t,i)=>{i.d(t,{a:()=>I});var a=i(64047),s=i(73566),o=i(48185),n=i(19630),l=i(35167),d=i(20948),r=i(49584),p=i(68854),c=i(82346),g=i(53095),h=i(60595),m=i(66891),u=i(33966),y=i(53984),_=i(55198),v=i(57244),x=i(90293),b=i(18645);let f=class{constructor(e){this.fetch=e}modifyPlaylistVideoItems(e){const{playlistId:t,addItemIds:i=[],deleteItemsIds:a=[],commitItemIds:s=[],enter_method:o}=e;let n={};switch(o){case"remove_playlist_video":n={playlistId:t,deleteItemsIds:a.join(",")};break;case"add_playlist_video":n={playlistId:t,addItemIds:i.join(",")};break;case"reorder_playlist_video":n={playlistId:t,commitItemIds:s.join(",")}}return this.fetch.post("/api/playlist/modify_items/",{baseUrlType:2,body:x.stringify(n)})}};f=(0,a.__decorate)([(0,v.G)(),(0,a.__metadata)("design:paramtypes",[b.r])],f);let I=class extends s.D{constructor(e,t,i){super(),this.service=e,this.itemList=t,this.t=i,this.defaultState={loading:!1,statusCode:0}}setLoading(e,t){e.loading=t}setStatusCode(e,t){e.statusCode=t}modifyPlaylistItems(e){return e.pipe((0,d.M)(this.itemList.state$),(0,r.z)((([e,t])=>this.service.modifyPlaylistVideoItems(e).pipe((0,p.K)((()=>(0,c.of)({statusCode:-1}))),(0,g.z)((({statusCode:i})=>{var a,s,o,n;const{key:l="",addItemIds:d=[],deleteItemsIds:r=[],commitItemIds:p=[],enter_method:g,playlistId:h,onSuccess:m,onError:u}=e,v=0===i?"1":"0";if(y.I.handleCompleteEditingPlaylist({playlist_id:h,enter_method:g,status:v}),"remove_playlist_video"===g&&y.I.handleRemovePlaylistVideo({playlist_id:h,enter_method:"edit_playlist",video_list:r.join(","),video_cnt:r.length,status:v}),206003===i)return _.h.open({content:this.t("playlist_webapp_toast_error_cheatPlaylistCannotAdd"),duration:3,widthType:"half"}),(0,c.of)(this.noop());if(0!==i)return _.h.open({content:this.t("playlist_webapp_toast_error_tryagain"),duration:3,widthType:"half"}),null==u||u(),(0,c.of)(this.noop());let x=[...null!==(s=null===(a=t[l])||void 0===a?void 0:a.list)&&void 0!==s?s:[]];const b=null===(n=null===(o=t[l])||void 0===o?void 0:o.hasMore)||void 0===n||n;return"reorder_playlist_video"===g?x.splice(0,p.length,...p):"remove_playlist_video"===g?(x=x.filter((e=>!r.includes(e))),_.h.open({content:this.t("playlist_webapp_profileview_toast_vidremoved",{num:r.length,number:r.length}),duration:3,widthType:"half"})):"add_playlist_video"===g&&x.unshift(...d),null==m||m(),(0,c.of)(this.getActions().setStatusCode(i),this.itemList.getActions().setItemListById({key:l,list:x,hasMore:b}))}))))))}};(0,a.__decorate)([(0,o.cQ)(),(0,a.__metadata)("design:type",h.y)],I.prototype,"dispose$",void 0),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],I.prototype,"setLoading",null),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Number]),(0,a.__metadata)("design:returntype",void 0)],I.prototype,"setStatusCode",null),(0,a.__decorate)([(0,o.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[h.y]),(0,a.__metadata)("design:returntype",void 0)],I.prototype,"modifyPlaylistItems",null),I=(0,a.__decorate)([(0,n.Y)("PlaylistVideoItemsModule"),(0,a.__param)(2,(0,l.t)(m.s$)),(0,a.__metadata)("design:paramtypes",[f,u.h,Function])],I)},92323:(e,t,i)=>{i.d(t,{N:()=>C});var a=i(64047),s=i(73566),o=i(48185),n=i(19630),l=i(82346),d=i(19327),r=i(58569),p=i(60595),c=i(53095),g=i(49584),h=i(68854),m=i(10026),u=i(5549),y=i(12167),_=i(33642),v=i(27160),x=i(33966),b=i(75693),f=i(57244),I=i(18645);let P=class{constructor(e){this.fetch=e}getPlaylistDetail(e){return this.fetch.get("/api/mix/detail/",{query:e,baseUrlType:2})}};P=(0,a.__decorate)([(0,f.G)(),(0,a.__metadata)("design:paramtypes",[I.r])],P);let C=class extends s.D{constructor(e,t,i,a){super(),this.service=e,this.seoModule=t,this.itemList=i,this.playlistItemModule=a,this.defaultState={statusCode:0,mixInfo:void 0,loading:!0}}setPlaylistInfo(e,t){const{statusCode:i=0,mixInfo:a}=(0,_.m7)(t);e.statusCode=i,e.mixInfo=a}resetData(e){e.loading=!0,e.statusCode=0,e.mixInfo=void 0}setLoading(e,t){e.loading=t}resetPlaylistData(e){return e.pipe((0,c.z)((()=>(0,l.of)(this.getActions().dispose$(),this.getActions().resetData(),this.itemList.getActions().dispose$(),this.itemList.getActions().resetItemList({key:"video_playlist"})))))}getVideoPlaylistPageData(e){return e.pipe((0,g.z)((({mixId:e,language:t,abTestVersion:i,user:a,appType:s})=>this.service.getPlaylistDetail({mixId:e,language:t,scene:147}).pipe((0,h.K)((()=>(0,l.of)({statusCode:-1}))),(0,c.z)((o=>{const{statusCode:n,mixInfo:p={}}=o,c=[(0,l.of)(this.getActions().setPlaylistInfo(o),this.getActions().setLoading(!1),this.playlistItemModule.getActions().setPlaylistItem(p))],g=new d.c;if(0===n){const s=this.itemList.getPlaylistVideoList$({mixId:e,key:"video_playlist",abTestVersion:i,user:a,language:t},{onVideoList(e){g.next(e),g.complete()}});c.push(s)}else g.next([]),g.complete();return(0,r.T)(...c,this.setSEO(o,g,t,s))})),(0,m.O)(this.getActions().setLoading(!0)),(0,u.l)(this.getActions().setLoading(!1),this.terminate()),(0,y.R)(this.dispose$),(0,h.K)((e=>(console.error(e),(0,l.of)(this.noop()))))))))}setSEO(e,t,i,a){return t.pipe((0,c.z)((t=>this.seoModule.setVideoPlaylistSEOProps({mixInfo:e.mixInfo,statusCode:e.statusCode},t,{language:null!=i?i:"en"},a))))}};(0,a.__decorate)([(0,o.cQ)(),(0,a.__metadata)("design:type",p.y)],C.prototype,"dispose$",void 0),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],C.prototype,"setPlaylistInfo",null),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",void 0)],C.prototype,"resetData",null),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],C.prototype,"setLoading",null),(0,a.__decorate)([(0,o.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[p.y]),(0,a.__metadata)("design:returntype",void 0)],C.prototype,"resetPlaylistData",null),(0,a.__decorate)([(0,o.Qm)({payloadGetter:1}),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[p.y]),(0,a.__metadata)("design:returntype",void 0)],C.prototype,"getVideoPlaylistPageData",null),C=(0,a.__decorate)([(0,n.Y)("VideoPlaylistPageModule"),(0,a.__metadata)("design:paramtypes",[P,v.q,x.h,b.y])],C)},19235:(e,t,i)=>{i.d(t,{v3:()=>f,UP:()=>k,fU:()=>P,Sh:()=>x,eh:()=>b,bn:()=>g,cW:()=>h,U$:()=>O,nj:()=>w,UE:()=>D,Ni:()=>I,k:()=>v,pn:()=>m,qf:()=>S,V3:()=>y,ne:()=>A,Xc:()=>j,o_:()=>C,AD:()=>_,TF:()=>u});var a=i(4139),s=i(15679),o=i(36488),n=i(65377),l=i(11040),d=i(91051),r=i(79067);const p={id:"checked-b672a52f",use:"checked-b672a52f-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="checked-b672a52f"><path fill="#FE2C55" fill-rule="evenodd" d="M12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12s5.373 12 12 12Z" clip-rule="evenodd" /><path fill="white" d="m10.25 15.064 7.88-8.12a.5.5 0 0 1 .708-.01l.717.697a.5.5 0 0 1 .01.707l-8.597 8.859a1 1 0 0 1-1.436 0l-4.098-4.223a.5.5 0 0 1 .01-.707l.718-.697a.5.5 0 0 1 .707.011l3.381 3.483Z" /></symbol>'};function c(e){const t=(0,d.useContext)(r.e);return(0,d.useLayoutEffect)((()=>(t.add(p),()=>{t.remove("checked-b672a52f")})),[]),(0,l.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,l.jsx)("use",{xlinkHref:"#checked-b672a52f"},void 0)}),void 0)}const g=(0,a.Z)("div",{target:"e1dztoqb0"})((({theme:{isDark:e,colors:t}})=>({width:"100%",flexGrow:1,background:e?t.BGCreation3:t.BGView,padding:"20px 48px",boxSizing:"border-box","@media screen and (min-width: 1536px)":{paddingInlineStart:"calc(50vw - 240px - 480px)"}})),"label:DivPageContainer;"),h=(0,a.Z)("div",{target:"e1dztoqb1"})({display:"flex",flexDirection:"column",width:"100%",flexGrow:0,flexShrink:1,maxWidth:"960px"},"label:DivPageInnerContainer;"),m=(0,a.Z)("h1",{target:"e1dztoqb2"})((({theme:e})=>[(0,o.GI)({theme:e,fontFamily:"Proxima",fontWeight:"bold",typography:"P1",color:"TextPrimary"}),{fontSize:"28px",lineHeight:"38px",wordBreak:"break-word"},(0,o.FC)(2)]),"label:H1ShareTitle;"),u=(0,a.Z)(s.D,{target:"e1dztoqb3"})((({theme:e})=>[(0,o.GI)({theme:e,typography:"P2",fontFamily:"Proxima",fontWeight:"semiBold"}),{marginTop:"5px"}]),"label:StyledUserLink;"),y=(0,a.Z)("p",{target:"e1dztoqb4"})((({theme:e})=>[(0,o.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P3",color:"TextSecondary"}),{fontSize:"16px",lineHeight:"20px"}]),"label:PVideoCount;"),_=(0,a.Z)(n.Lp,{target:"e1dztoqb5"})({marginRight:"25px"},"label:StyledSkeletonContainer;"),v=(0,a.Z)("div",{target:"e1dztoqb6"})((({theme:{isDark:e,colors:t},needPadding:i})=>({width:"100%",height:`calc(100vh - ${i?320:290}px)`,display:"flex",flexDirection:"column",padding:"12px 22px",boxSizing:"border-box",background:e?t.BGSecondary:t.BGPrimary,borderRadius:"8px",position:"relative",paddingBottom:i?"92px":"12px"})),"label:DivVideoListContainer;"),x=(0,a.Z)("div",{target:"e1dztoqb7"})({display:"flex",flexDirection:"column",height:"100%",overflow:"auto"},"label:DivListContainer;"),b=(0,a.Z)("div",{target:"e1dztoqb8"})({display:"flex",flexDirection:"column"},"label:DivListInnerContainer;"),f=(0,a.Z)("div",{target:"e1dztoqb9"})((({theme:e})=>({height:"92px",width:"100%",boxSizing:"border-box",display:"flex",justifyContent:"flex-end",alignItems:"center",position:"absolute",bottom:0,left:0,paddingInlineEnd:"24px",":before":{display:"block",position:"absolute",left:0,top:0,content:'""',height:"0.5px",width:"100%",background:e.colors.LinePrimary}})),"label:DivBtnContainer;"),I=(0,a.Z)("div",{target:"e1dztoqb10"})((({theme:e,hasBeenAddedToOtherPlaylist:t=!1})=>({position:"relative",width:"100%",display:"flex",alignItems:"center",padding:"12px 0",paddingInlineEnd:"24px",boxSizing:"border-box",borderRadius:"8px",cursor:t?"not-allowed":"pointer",opacity:t?.34:1,":hover":{background:e.colors.BGView}})),"label:DivVideoItemContainer;"),P=(0,a.Z)("div",{target:"e1dztoqb11"})((({theme:e})=>[(0,o.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",typography:"P2",color:"TextSecondary"}),{minWidth:"36px",justifyContent:"center",marginInlineEnd:"12px",textAlign:"center",alignItems:"center"}]),"label:DivIndex;"),C=(0,a.Z)(P,{target:"e1dztoqb12"})({margin:0},"label:StyledPostCheckboxContainer;"),j=(0,a.Z)(c,{target:"e1dztoqb13"})({width:"24px",height:"24px"},"label:StyledChecked;"),w=(0,a.Z)("div",{target:"e1dztoqb14"})((({theme:e})=>({width:"24px",height:"24px",borderRadius:"24px",border:`1.5px solid ${e.colors.LineSecondary}`,display:"inline-block",overflow:"visible"})),"label:DivUnChecked;"),k=(0,a.Z)("div",{target:"e1dztoqb15"})({position:"relative",width:"80px",height:"106px",flexShrink:0,display:"flex",justifyContent:"center",alignItems:"center",overflow:"visible",borderRadius:"2px"},"label:DivCoverContainer;"),O=(0,a.Z)("div",{target:"e1dztoqb16"})({width:"100%",height:"100%",objectFit:"cover",transition:"all 0.3s ease",borderRadius:"2px",overflow:"hidden",":hover":{transform:"scale(1.4)"}},"label:DivPreviewContainer;"),S=(0,a.Z)("img",{target:"e1dztoqb17"})({width:"80px",height:"106px",objectFit:"cover",flexShrink:0,borderRadius:"2px"},"label:ImgVideoCover;"),D=(0,a.Z)("div",{target:"e1dztoqb18"})({display:"flex",flexDirection:"column",justifyContent:"center",marginInlineStart:"20px",flexGrow:1},"label:DivVideoDescContainer;"),A=(0,a.Z)("span",{target:"e1dztoqb19"})((({theme:e})=>[(0,o.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",color:"TextTertiaryAlt"}),{fontSize:"14px",lineHeight:"17px",marginTop:"6px"}]),"label:SpanVideoViews;")},88125:(e,t,i)=>{i.d(t,{c:()=>k});var a=i(64047),s=i(73566),o=i(48185),n=i(19630),l=i(35167),d=i(53095),r=i(82346),p=i(20948),c=i(49584),g=i(68854),h=i(58569),m=i(10026),u=i(5549),y=i(60595),_=i(53984),v=i(55198),x=i(66891),b=i(33642),f=i(57244),I=i(90293),P=i(18645);let C=class{constructor(e){this.fetch=e}getPlayList(e){const{uid:t}=e,i=(0,a.__rest)(e,["uid"]);return this.fetch.get("/api/user/playlist/",{query:i,baseUrlType:2})}changePlaylistOrder(e){var t;return this.fetch.post("/api/playlist/modify_order/",{baseUrlType:2,body:I.stringify({commitMixIds:null!==(t=e.commitMixIds)&&void 0!==t?t:""})})}};C=(0,a.__decorate)([(0,f.G)(),(0,a.__metadata)("design:paramtypes",[P.r])],C);var j=i(75693);const w={loading:!1,changeOrderLoading:!1,hasMore:!0,statusCode:0,playList:[],cursor:"0"};let k=class extends s.D{constructor(e,t,i){super(),this.service=e,this.itemModule=t,this.t=i,this.defaultState=w}resetData(e){var t,i;t=w,i=e,Object.keys(t).forEach((e=>i[e]=t[e]))}setLoading(e,t){e.loading=t}setChangeOrderLoading(e,t){e.changeOrderLoading=t}setPlaylist(e,t){var i;const{statusCode:a,playList:s=[],hasMore:o,cursor:n,isMerge:l=!1}=(0,b.m7)(t);e.statusCode=null!=a?a:e.statusCode,e.hasMore=null!=o?o:e.hasMore,e.cursor=null!=n?n:e.cursor,e.playList=l?[...null!==(i=e.playList)&&void 0!==i?i:[],...s]:s}doNothing(){}resetVideoPlaylistData(e){return e.pipe((0,d.z)((()=>(0,r.of)(this.getActions().dispose$(),this.getActions().resetData()))))}changePlaylistOrder(e){return e.pipe((0,p.M)(this.state$),(0,c.z)((([{playlist:e=[],endIndex:t=-1,successCallback:i},{playList:a=[]}])=>{const s=e.slice(0,t+1);return s.length?this.service.changePlaylistOrder({commitMixIds:null==s?void 0:s.join(",")}).pipe((0,g.K)((()=>(0,r.of)({statusCode:-1}))),(0,d.z)((({statusCode:e})=>{if(_.I.handleSaveChangePlaylistOrder({status:0===e?"1":"0"}),0!==e)return v.h.open({content:this.t("playlist_webapp_toast_error_tryagain"),duration:3,widthType:"half"}),(0,r.of)(this.noop());const o=[...s,...a.slice(t+1)];return null==i||i(),(0,h.T)((0,r.of)(this.getActions().setPlaylist({playList:o})))})),(0,m.O)(this.getActions().setChangeOrderLoading(!0)),(0,u.l)(this.getActions().setChangeOrderLoading(!1),this.terminate()),(0,g.K)((e=>(console.error(e),(0,r.of)(this.noop()))))):(0,r.of)(this.noop())})))}getVideoPlaylistData(e){return e.pipe((0,p.M)(this.state$),(0,c.z)((([{uid:e,secUid:t,isReset:i},{cursor:s="0"}])=>{if(!this.state.hasMore)return(0,r.of)(this.noop());const o=i?"0":s;return this.service.getPlayList({uid:e,secUid:t,cursor:o,count:20}).pipe((0,g.K)((()=>(0,r.of)({statusCode:-1,playList:[]}))),(0,d.z)((e=>{var t;const{playList:s=[]}=e,o=(0,a.__rest)(e,["playList"]),n=null!==(t=s.filter((({id:e})=>e)))&&void 0!==t?t:[],l=n.map((({id:e})=>e));return(0,h.T)((0,r.of)(this.itemModule.getActions().multiSetPlaylistItem(n),this.getActions().setPlaylist(Object.assign(Object.assign({},o),{playList:l,isMerge:!i}))))})),(0,m.O)(this.getActions().setLoading(!0)),(0,u.l)(this.getActions().setLoading(!1)),(0,g.K)((e=>(console.error(e),(0,r.of)(this.noop())))))})))}};(0,a.__decorate)([(0,o.cQ)(),(0,a.__metadata)("design:type",y.y)],k.prototype,"dispose$",void 0),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",void 0)],k.prototype,"resetData",null),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],k.prototype,"setLoading",null),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],k.prototype,"setChangeOrderLoading",null),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],k.prototype,"setPlaylist",null),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],k.prototype,"doNothing",null),(0,a.__decorate)([(0,o.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[y.y]),(0,a.__metadata)("design:returntype",void 0)],k.prototype,"resetVideoPlaylistData",null),(0,a.__decorate)([(0,o.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[y.y]),(0,a.__metadata)("design:returntype",void 0)],k.prototype,"changePlaylistOrder",null),(0,a.__decorate)([(0,o.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[y.y]),(0,a.__metadata)("design:returntype",void 0)],k.prototype,"getVideoPlaylistData",null),k=(0,a.__decorate)([(0,n.Y)("VideoPlaylistSharedModule"),(0,a.__param)(2,(0,l.t)(x.s$)),(0,a.__metadata)("design:paramtypes",[C,j.y,Function])],k)},75693:(e,t,i)=>{i.d(t,{y:()=>l});var a=i(64047),s=i(73566),o=i(48185),n=i(19630);let l=class extends s.D{constructor(){super(...arguments),this.defaultState={}}multiSetPlaylistItem(e,t){const i={};return t.forEach((t=>{var a;const{id:s=""}=t,o=null!==(a=e[s])&&void 0!==a?a:{};i[s]=Object.assign(Object.assign({},o),t)})),Object.assign(Object.assign({},e),i)}setPlaylistItem(e,t){var i;const{id:a=""}=t,s=null!==(i=e[a])&&void 0!==i?i:{};return Object.assign(Object.assign({},e),{[a]:Object.assign(Object.assign({},s),t)})}};(0,a.__decorate)([(0,o.j)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Array]),(0,a.__metadata)("design:returntype",void 0)],l.prototype,"multiSetPlaylistItem",null),(0,a.__decorate)([(0,o.j)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],l.prototype,"setPlaylistItem",null),l=(0,a.__decorate)([(0,n.Y)("PlaylistItemModule")],l)},53984:(e,t,i)=>{i.d(t,{I:()=>o});var a,s=i(95872);!function(e){e.CreatePlaylist="create_playlist",e.ClickAddPlaylistVideo="click_add_playlist_video",e.AddPlaylistVideo="add_playlist_video",e.PostCreatingPlaylist="post_creating_playlist",e.ClickChangePlaylistOrder="click_change_playlist_order",e.SaveChangePlaylistOrder="save_change_playlist_order",e.CompleteEditingPlaylist="complete_editing_playlist",e.ClickPlaylistEntrance="click_playlist_entrance",e.ClickRenamePlaylist="click_rename_playlist",e.ClickDeletePlaylist="click_delete_playlist",e.DeletePlaylist="delete_playlist",e.ClickRemovePlaylistVideo="click_remove_playlist_video",e.RemovePlaylistVideo="remove_playlist_video"}(a||(a={}));const o={handleCreatePlaylist:()=>{s.W.event("create_playlist")},handleClickAddPlaylistVideo:e=>{s.W.event("click_add_playlist_video",e)},handleAddPlaylistVideo:e=>{s.W.event("add_playlist_video",e)},handlePostCreatingPlaylist:e=>{s.W.event("post_creating_playlist",e)},handleClickChangePlaylistOrder:()=>{s.W.event("click_change_playlist_order")},handleSaveChangePlaylistOrder:e=>{s.W.event("save_change_playlist_order",e)},handleCompleteEditingPlaylist:e=>{s.W.event("complete_editing_playlist",e)},handleClickPlaylistEntrance:e=>{s.W.event("click_playlist_entrance",e)},handleClickRenamePlaylist:e=>{s.W.event("click_rename_playlist",e)},handleClickDeletePlaylist:e=>{s.W.event("click_delete_playlist",e)},handleDeletePlaylist:e=>{s.W.event("delete_playlist",e)},handleClickRemovePlaylistVideo:e=>{s.W.event("click_remove_playlist_video",e)},handleRemovePlaylistVideo:e=>{s.W.event("remove_playlist_video",e)}}}}]);