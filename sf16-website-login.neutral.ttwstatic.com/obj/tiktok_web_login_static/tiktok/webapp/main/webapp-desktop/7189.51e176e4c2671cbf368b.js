"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7189],{97189:(e,t,o)=>{o.d(t,{vr:()=>we});var i=o(11040),r=o(9236),a=o(91051),n=o(95872),s=o(68457),d=o(45949),l=o(29025),c=o(33642),p=o(91110),h=o(1029),g=o(58854),u=o(17133),v=o(21041),x=o(28972),m=o(58633),b=o(47871),y=o(79067);const j={id:"pc-6845b35b",use:"pc-6845b35b-usage",viewBox:"0 0 21 19",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 19" id="pc-6845b35b"><path fill="currentColor" d="M12.601 17h2.52a.84.84 0 1 1 0 1.68h-9.24a.84.84 0 1 1 0-1.68h2.1v-2.1h-6.3A1.682 1.682 0 0 1 0 13.22V1.88C0 .952.754.199 1.68.199h17.642c.927 0 1.68.753 1.68 1.68V13.22c0 .927-.753 1.68-1.68 1.68h-6.72V17zm-.84 0v-2.1h-2.94V17h2.94zM1.681 1.88v11.34h17.641V1.88H1.68z" /></symbol>'};function f(e){const t=(0,a.useContext)(y.e);return(0,a.useLayoutEffect)((()=>(t.add(j),()=>{t.remove("pc-6845b35b")})),[]),(0,i.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,i.jsx)("use",{xlinkHref:"#pc-6845b35b"},void 0)}),void 0)}var _=o(32273),w=o(97751),C=o(270),k=o(66881),P=o(39712),S=o(68191),L=o(36488);const D=(0,S.Z)("div",{target:"ejkrawn0"})({marginBottom:"12px",display:"flex",position:"relative"},"label:DivPromotionContainer;"),I=(0,S.Z)("button",{target:"ejkrawn1"})(L.Ph,(({isExpand:e,theme:t})=>{const o=(0,L.$K)(t.direction,"end");return[(0,L.GI)({theme:t,typography:"P3",fontWeight:"bold",color:"TextSecondary",fontFamily:"Proxima"}),{position:e?"absolute":"relative",right:0,bottom:0,padding:"0 8px",minWidth:"90px",height:"32px",boxShadow:`0 2px 8px ${t.colors.ShadowSecondary}`,borderRadius:"52px",cursor:"pointer",lineHeight:"30px",textAlign:"center",whiteSpace:"nowrap",borderWidth:"1px",borderStyle:"solid",borderColor:t.colors.LineSecondary2,backgroundColor:t.colors.BGSecondary,":hover":{borderColor:t.colors.LinePrimary,backgroundColor:t.colors.BGTertiary},":active":{borderColor:t.colors.LinePrimary,backgroundColor:t.colors.BGInput},transition:"transform 0.3s cubic-bezier(.4,.14,.3,1)",transformOrigin:`${o} bottom`,transform:e?"scale(0)":"none"}]}),"label:ButtonGetAppText;"),B=(0,S.Z)("div",{target:"ejkrawn3"})((({isExpand:e,theme:t})=>{const o=(0,L.$K)(t.direction,"end");return[(0,L.GI)({theme:t,typography:"P2",fontWeight:"bold"}),{position:e?"relative":"absolute",bottom:"-1px",background:t.colors.BGSecondary,boxShadow:`0 2px 8px ${t.colors.ShadowSecondary}`,border:`1px solid ${t.colors.LineSecondary3}`,borderRadius:"8px",transition:"all 0.3s cubic-bezier(.4,.14,.3,1)",transformOrigin:`${o} bottom`,transform:e?"none":"scale(0)"},(0,L.YJ)({direction:t.direction,end:"-1px"})]}),"label:DivExpandContainer;"),E=(0,S.Z)("div",{target:"ejkrawn4"})((({theme:{direction:e}})=>(0,L.YJ)({direction:e,end:"16px"})),{position:"absolute",top:16,cursor:"pointer"},"label:DivXMarkWrapper;"),O=(0,S.Z)("div",{target:"ejkrawn5"})((({theme:{direction:e}})=>(0,L.YJ)({direction:e,marginEnd:48,marginStart:16})),"label:DivExpandWrapper;"),Z=(0,S.Z)("div",{target:"ejkrawn6"})((({theme:{colors:e}})=>({margin:"6px 0",display:"flex",flexDirection:"row",padding:"8px",borderRadius:"8px",cursor:"pointer",":hover":{background:e.BGView}})),"label:DivItemContainer;"),F=(0,S.Z)("span",{target:"ejkrawn7"})((({theme:{direction:e}})=>(0,L.YJ)({direction:e,marginStart:"8px"})),{whiteSpace:"nowrap"},"label:SpanText;"),T=(0,S.Z)("div",{target:"ejkrawn8"})((({theme:{colors:e,direction:t}})=>[{width:"calc(100% - 16px)",height:"1px",position:"relative",background:e.LineSecondary2,transform:"scaleY(0.5)"},(0,L.YJ)({direction:t,start:"8px"})]),"label:DivSplit;"),$=(0,a.memo)((function(){const e=(0,_.Q)(),{hideModal:t,showModal:o}=(0,C.J)(),[{isExpand:n,isModalShow:s,isPwaInstallable:l},c]=(0,r.b7)(P.D),p=(0,a.useCallback)((()=>{c.handleShowSnack(!1),c.setIsExpand(!0)}),[c]),h=(0,a.useCallback)((()=>{c.setIsExpand(!1),(0,d.le)(w.OV)||(0,d.D$)(w.OV,"1")}),[c]),g=(0,a.useCallback)((()=>{s||(o(),c.setIsModalShow(!0))}),[c,s,o]),u=(0,a.useCallback)((()=>{t(),c.setIsModalShow(!1)}),[c,t]),y=(0,a.useCallback)((()=>{b.C.handleClickGetApp({enter_method:"right_corner_button"}),l?p():g()}),[p,g,l]),j=(0,a.useCallback)((()=>{g(),h(),c.handleClickDownload()}),[c,h,g]),S=(0,a.useCallback)((()=>{h(),c.handleInstallationClick()}),[c,h]),L=(0,a.useMemo)((()=>Boolean(navigator.standalone)||window.matchMedia("(display-mode: standalone), (display-mode: minimal-ui)").matches),[]),{search:$}=(0,v.TH)();return(0,a.useMemo)((()=>"twa"===(0,d.St)(w.hw)||"twa"===new URLSearchParams($).get("source")),[$])?null:(0,i.jsxs)(D,{children:[(0,i.jsx)(I,Object.assign({isExpand:n,onClick:y},{children:e("get_app")}),void 0),(0,i.jsxs)(B,Object.assign({isExpand:n},{children:[(0,i.jsx)(E,Object.assign({onClick:h},{children:(0,i.jsx)(x.Z,{width:20,height:20},void 0)}),void 0),(0,i.jsxs)(O,{children:[!L&&l&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(Z,Object.assign({onClick:S,"data-e2e":"pwa-pc"},{children:[(0,i.jsx)(f,{width:"21",height:"21"},void 0),(0,i.jsx)(F,{children:e("get_tt_desktop")},void 0)]}),void 0),(0,i.jsx)(T,{},void 0)]},void 0),(0,i.jsxs)(Z,Object.assign({onClick:j,"data-e2e":"pwa-mobile"},{children:[(0,i.jsx)(m.Z,{width:21,height:21},void 0),(0,i.jsx)(F,{children:e("get_tt_app")},void 0)]}),void 0)]},void 0)]}),void 0),(0,i.jsx)(k._,{onClose:u,visible:s},void 0)]},void 0)}));var A=o(24703);const M=(0,S.Z)("div",{target:"ew8lpw50"})((({showTop:e,bottom:t=0,theme:{direction:o}})=>[(0,L.YJ)({direction:o,end:"24px"}),{position:"fixed",bottom:`${t}px`,zIndex:7,display:"flex",flexDirection:"column",alignItems:"flex-end",marginBottom:"8px",transform:e?"none":"translateY(40px)",transition:"all 400ms cubic-bezier(0.65, 0, 0.35, 1)"}]),"label:DivBottomContainer;");var G=o(3991),W=o(78193);const R=(0,S.Z)("button",{target:"ejylfo50"})(L.Ph,(({theme:{colors:e}})=>({cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"52px",background:e.Primary,boxShadow:`0 2px 8px ${e.ShadowSecondary}`,":hover":{background:"linear-gradient(0deg, rgba(0, 0, 0, 0.06), rgba(0, 0, 0, 0.06)), #FE2C55"},":active":{background:"linear-gradient(0deg, rgba(0, 0, 0, 0.12), rgba(0, 0, 0, 0.12)), #FE2C55"}})),"label:ButtonIconContainer;"),Y=(0,a.memo)((function(){const e=(0,_.Q)(),t=(0,a.useCallback)((()=>{(0,d.YZ)(),W._.handleToTop()}),[]);return(0,i.jsx)(R,Object.assign({onClick:t,"aria-label":e("accessibilityLabels_forYou_scroll_btn")},{children:(0,i.jsx)(G.Z,{width:"16",height:"16",fill:"#FFF"},void 0)}),void 0)}));var z=o(64047),H=o(73566),V=o(48185),U=o(19630),J=o(82346),Q=o(94328),K=o(60595),N=o(35435),q=o(53095),X=o(10026),ee=o(5549),te=o(12167),oe=o(21005),ie=o(57244),re=o(18645);let ae=class{constructor(e){this.fetch=e}fetchProjectListInfo(e){return this.fetch.get("/api/v1/web/project/list/",{query:e,baseUrlType:2})}};ae=(0,z.__decorate)([(0,ie.G)(),(0,z.__metadata)("design:paramtypes",[re.r])],ae);let ne=class extends H.D{constructor(e){super(),this.service=e,this.defaultState={inProgress:!1,loading:!0,projectList:[],hideProjectIds:[]}}setLoading(e,t){e.loading=t}removeProjectByIndex(e,t){var o,i;const r=null===(o=null==e?void 0:e.projectList)||void 0===o?void 0:o[t];(null==r?void 0:r.projectID)&&(e.hideProjectIds.push(null==r?void 0:r.projectID),null===(i=e.projectList)||void 0===i||i.splice(t,1))}setProjectList(e,t){var o,i,r;e.projectList=null!==(i=null===(o=t.infos)||void 0===o?void 0:o.filter((t=>{const o=e.hideProjectIds.includes(t.projectID),i=t.taskInProgress>0,r=[4,99].includes(t.status);return!o&&i&&!r})))&&void 0!==i?i:[],e.inProgress=Boolean(null===(r=e.projectList)||void 0===r?void 0:r.length)}fetchProjectList(e){return e.pipe((0,N.w)((()=>this.service.fetchProjectListInfo({}).pipe((0,q.z)((e=>(0,J.of)(this.getActions().setProjectList(e)))),(0,X.O)(this.getActions().setLoading(!0)),(0,ee.l)(this.getActions().setLoading(!1)),(0,oe.n)({})))))}refreshData(e){return e.pipe((()=>(0,Q.H)(500,15e3).pipe((0,N.w)((()=>(0,J.of)(this.getActions().fetchProjectList({})))),(0,te.R)(this.dispose$))))}};(0,z.__decorate)([(0,V.cQ)(),(0,z.__metadata)("design:type",K.y)],ne.prototype,"dispose$",void 0),(0,z.__decorate)([(0,V.lF)(),(0,z.__metadata)("design:type",Function),(0,z.__metadata)("design:paramtypes",[Object,Boolean]),(0,z.__metadata)("design:returntype",void 0)],ne.prototype,"setLoading",null),(0,z.__decorate)([(0,V.lF)(),(0,z.__metadata)("design:type",Function),(0,z.__metadata)("design:paramtypes",[Object,Number]),(0,z.__metadata)("design:returntype",void 0)],ne.prototype,"removeProjectByIndex",null),(0,z.__decorate)([(0,V.lF)(),(0,z.__metadata)("design:type",Function),(0,z.__metadata)("design:paramtypes",[Object,Object]),(0,z.__metadata)("design:returntype",void 0)],ne.prototype,"setProjectList",null),(0,z.__decorate)([(0,V.Qm)(),(0,z.__metadata)("design:type",Function),(0,z.__metadata)("design:paramtypes",[K.y]),(0,z.__metadata)("design:returntype",void 0)],ne.prototype,"fetchProjectList",null),(0,z.__decorate)([(0,V.Qm)(),(0,z.__metadata)("design:type",Function),(0,z.__metadata)("design:paramtypes",[K.y]),(0,z.__metadata)("design:returntype",void 0)],ne.prototype,"refreshData",null),ne=(0,z.__decorate)([(0,U.Y)("uploadProgressModule"),(0,z.__metadata)("design:paramtypes",[ae])],ne);var se=o(33170),de=o.n(se),le=o(95363),ce=o(28327);const pe=(0,S.Z)("div",{target:"e10yvdyi0"})((({theme:e})=>({width:"404px",height:"87px",marginBottom:"12px",boxShadow:`0px 2px 12px ${e.colors.SDTertiary}`,borderRadius:"8px",backgroundColor:e.colors.BGPrimary,padding:"19px",position:"relative",cursor:"pointer",borderWidth:e.isDark?"1px":0,borderStyle:"solid",borderColor:e.colors.BGTertiary2})),"label:DivUploadProgressContainer;"),he=(0,S.Z)("div",{target:"e10yvdyi1"})({display:"flex",flexDirection:"row"},"label:DivRowContainer;"),ge=(0,S.Z)("div",{target:"e10yvdyi2"})((({theme:{colors:e}})=>({position:"absolute",width:"32px",height:"48px",left:"22px",top:" 16px",background:e.TextQuaternary,borderRadius:"2px"})),"label:DivCoverShadowTop;"),ue=(0,ce.iv)({height:"52px",width:"38px",borderRadius:"2px",zIndex:"1"},"label:coverBaseStyle;"),ve=(0,S.Z)("div",{target:"e10yvdyi3"})(ue,(({isEmpty:e,theme:{colors:t}})=>({display:"flex",justifyContent:"center",alignItems:"center",background:e?t.BGPlaceholderOpaque:t.Primary2})),"label:DivProjectCover;"),xe=(0,S.Z)("img",{target:"e10yvdyi4"})({maxWidth:"100%",maxHeight:"100%"},"label:ImgProjectCover;"),me=(0,S.Z)("div",{target:"e10yvdyi5"})({display:"flex",flexDirection:"column",justifyContent:"start",marginLeft:"16px"},"label:DivMidColumn;"),be=(0,S.Z)("p",{target:"e10yvdyi6"})((({theme:e,error:t})=>[(0,L.GI)({theme:e,fontFamily:"Proxima"}),{color:t?e.colors.Negative:e.colors.TextPrimary,textAlign:"left",fontWeight:"600",fontSize:"14px",marginTop:"6px",lineHeight:"22px"}]),"label:PUploadingProgressTitle;"),ye=(0,S.Z)("div",{target:"e10yvdyi9"})((({theme:{colors:e}})=>({marginTop:"12px",height:"4px",width:"278px",backgroundColor:e.LineSecondary})),"label:DivProgressBarParent;"),je=(0,S.Z)("div",{target:"e10yvdyi10"})((({progress:e,theme:{colors:t}})=>({height:"100%",width:e,backgroundColor:t.Primary})),"label:DivProgressBarChild;"),fe=({index:e,projectInfo:t,handleCloseCard:o})=>{var r;const n=(0,_.Q)(),s=(0,a.useCallback)((t=>{null==t||t.stopPropagation(),o(e)}),[e]),{taskFailed:d,lastPostProgress:l}=t,c=`${l}%`,p=null===(r=de()(null==t?void 0:t.configs,{type:100}))||void 0===r?void 0:r.payload,h=!p,g=`data:image/jpeg;base64,${p}`,u=d>0;return(0,i.jsxs)(pe,{children:[(0,i.jsx)(le.W8,Object.assign({onClick:s},{children:(0,i.jsx)(x.Z,{},void 0)}),void 0),(0,i.jsxs)(he,{children:[(0,i.jsx)(ge,{},void 0),(0,i.jsx)(ve,Object.assign({isEmpty:h},{children:!h&&(0,i.jsx)(xe,{src:g},void 0)}),void 0),(0,i.jsxs)(me,{children:[(0,i.jsx)(be,Object.assign({error:u},{children:u?n("Uploading Failed"):`${n("Uploading")}... ${c}`}),void 0),(0,i.jsx)(ye,{children:(0,i.jsx)(je,{progress:c},void 0)},void 0)]},void 0)]},void 0)]},void 0)},_e=()=>{const[{projectList:e,inProgress:t,loading:o},n]=(0,r.b7)(ne,{selector:e=>({projectList:e.projectList,inProgress:e.inProgress,loading:e.loading}),dependencies:[]}),s=(0,a.useCallback)((e=>{n.removeProjectByIndex(e)}),[n]);return(0,a.useEffect)((()=>{n.refreshData()}),[n]),(0,a.useEffect)((()=>{t||o||n.dispose$()}),[t,o,n]),(0,i.jsx)(i.Fragment,{children:t&&(null==e?void 0:e.map(((e,t)=>(0,i.jsx)(fe,{handleCloseCard:s,index:t,projectInfo:e},e.projectID))))},void 0)},we=(0,a.memo)((function(){const[e,t]=(0,a.useState)(!1),[o,v]=(0,a.useState)(!0),x=(0,s.fB)((()=>{t(0!==(0,d.cx)())}),[],200),{user:m}=(0,c.m7)((0,u.Lh)((()=>["user"]),[])),{isMobile:b}=(0,c.m7)((0,g.h)((()=>["isMobile"]),[])),{isInVideoFeedRedesign:y}=(0,l.y7)(),{isElectronApp:j}=(0,h.R)(),[f,_]=(0,a.useState)(0),{isCookieBannerShowing:w}=(0,r.mp)(A.X),[C,k]=(0,a.useState)(!1);(0,a.useEffect)((()=>{n.W.getVarWithCb("tiktok_web",null,(e=>{1===(null==e?void 0:e.can_split_videos)&&k(!0)}))}),[]),(0,a.useEffect)((()=>{var e,t;if(!w)return void _(0);const o=null!==(t=null===(e=document.querySelector("div[class*=DivCookieBannerContainer]"))||void 0===e?void 0:e.offsetHeight)&&void 0!==t?t:0;_(o)}),[w]);const P=(0,a.useCallback)((()=>{v(!1)}),[]);(0,a.useEffect)((()=>{if(!y)return window.addEventListener("scroll",x),()=>{window.removeEventListener("scroll",x)};t(!0)}),[x,y]);const S=(0,a.useCallback)((()=>{k(!1)}),[]);return(0,i.jsxs)(M,Object.assign({showTop:e,bottom:f},{children:[o&&(0,i.jsx)(p.e,{onClose:P},void 0),m&&!b&&C&&(0,i.jsx)(_e,{handleCloseWindow:S},void 0),!j&&(0,i.jsx)($,{},void 0),!y&&(0,i.jsx)(Y,{},void 0)]}),void 0)}))}}]);