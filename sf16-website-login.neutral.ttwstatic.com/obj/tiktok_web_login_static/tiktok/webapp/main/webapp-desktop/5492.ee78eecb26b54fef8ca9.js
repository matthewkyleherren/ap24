"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[5492],{25772:(e,t,i)=>{i.d(t,{Z:()=>l});var o=i(11040),n=i(91051),a=i(79067);const r={id:"heart-fill-03bd63df",use:"heart-fill-03bd63df-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="heart-fill-03bd63df"><g fill-rule="evenodd" clip-path="url(#heart-fill-03bd63df_a)" clip-rule="evenodd"><path d="M7.5 2.25c3 0 4.5 2 4.5 2s1.5-2 4.5-2c3.5 0 6 2.75 6 6.25 0 4-3.269 7.566-6.25 10.25C14.41 20.407 13 21.5 12 21.5s-2.45-1.101-4.25-2.75C4.82 16.066 1.5 12.5 1.5 8.5c0-3.5 2.5-6.25 6-6.25Z" /><path fill="black" fill-opacity=".03" d="M2.402 12.2c1.187 2.497 3.357 4.727 5.348 6.55C9.55 20.399 11 21.5 12 21.5s2.41-1.093 4.25-2.75c2.98-2.684 6.25-6.25 6.25-10.25 0-.087-.002-.174-.005-.26C20.567 13.661 13.68 18.5 11.75 18.5c-1.437 0-6.14-2.687-9.348-6.3Z" /></g><defs><clipPath id="heart-fill-03bd63df_a"><path fill="white" d="M0 0h24v24H0z" /></clipPath></defs></symbol>'};function l(e){const t=(0,n.useContext)(a.e);return(0,n.useLayoutEffect)((()=>(t.add(r),()=>{t.remove("heart-fill-03bd63df")})),[]),(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,o.jsx)("use",{xlinkHref:"#heart-fill-03bd63df"},void 0)}),void 0)}},17353:(e,t,i)=>{i.d(t,{Z:()=>l});var o=i(11040),n=i(91051),a=i(79067);const r={id:"logo-icon-32382b7a",use:"logo-icon-32382b7a-usage",viewBox:"0 0 48 48",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" id="logo-icon-32382b7a"><g fill-rule="evenodd" clip-path="url(#logo-icon-32382b7a_a)" clip-rule="evenodd"><path d="M0 36c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12V12c0-6.628-5.373-12-12-12H12C5.373 0 0 5.372 0 12v24z" /><path fill="#25F4EE" d="M30.636 6.288A9.23 9.23 0 0 1 30.35 4h-6.97v26.133c0 3.014-2.056 5.457-5.062 5.457-3.006 0-5.443-2.443-5.443-5.456 0-3.014 2.437-5.457 5.443-5.457.6 0 .797.098 1.337.278v-7.051c-.562-.079-.754-.12-1.337-.12C11.515 17.785 6 23.315 6 30.135c0 6.82 5.515 12.349 12.318 12.349 6.708 0 12.357-5.375 12.51-12.062V17.049c2.528 1.733 5.395 2.746 8.689 2.746V13.19c-4.275 0-7.866-2.933-8.88-6.902z" /><path fill="#fff" d="M33.12 8.77a9.23 9.23 0 0 1-.287-2.288h-6.971v26.134c0 3.014-2.055 5.456-5.061 5.456s-5.443-2.442-5.443-5.456a5.45 5.45 0 0 1 5.443-5.456c.6 0 .797.097 1.337.277v-7.05c-.562-.08-.754-.12-1.337-.12-6.803 0-12.318 5.529-12.318 12.349S13.998 44.965 20.8 44.965c6.707 0 12.357-5.374 12.51-12.062V19.531c2.528 1.733 5.395 2.747 8.689 2.747v-6.606c-4.275 0-7.866-2.933-8.88-6.901z" /><path fill="#FE2C55" d="M15.92 35.033a5.446 5.446 0 0 1-.562-2.416c0-3.014 2.437-5.457 5.443-5.457.523 0 .739.074 1.143.212l.194.066v-7.051l-.21-.03c-.411-.059-.623-.09-1.127-.09-.386 0-.769.018-1.146.053v4.635l-.194-.066c-.404-.138-.62-.212-1.143-.212-3.006 0-5.443 2.443-5.443 5.457a5.46 5.46 0 0 0 3.045 4.9zm-4.972 4.997a12.29 12.29 0 0 0 9.853 4.935c6.707 0 12.357-5.374 12.51-12.061V19.532c2.528 1.733 5.395 2.746 8.689 2.746v-6.605a9.2 9.2 0 0 1-2.483-.341v4.463c-3.294 0-6.161-1.013-8.69-2.746v13.372c-.152 6.688-5.802 12.062-12.509 12.062-2.763 0-5.314-.912-7.37-2.453zm23.455-28.401a9.206 9.206 0 0 1-3.715-5.146h2.145a9.155 9.155 0 0 0 1.57 5.146z" /></g><defs><clipPath id="logo-icon-32382b7a_a"><rect width="48" height="48" fill="#fff" rx="10.5" /></clipPath></defs></symbol>'};function l(e){const t=(0,n.useContext)(a.e);return(0,n.useLayoutEffect)((()=>(t.add(r),()=>{t.remove("logo-icon-32382b7a")})),[]),(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,o.jsx)("use",{xlinkHref:"#logo-icon-32382b7a"},void 0)}),void 0)}},74577:(e,t,i)=>{i.d(t,{D:()=>n});var o=i(91051);function n(e,t){const{onClick:i,onDoubleClick:n}=e(),a=(0,o.useRef)(0),r=(0,o.useRef)(!1);return(0,o.useCallback)((e=>{a.current&&window.clearTimeout(a.current),r.current?null==n||n(e):(r.current=!0,window.setTimeout((()=>{r.current=!1}),300),a.current=window.setTimeout((()=>{null==i||i(e)}),300))}),t)}},99087:(e,t,i)=>{i.d(t,{n:()=>o,_:()=>n});const o=e=>{try{let t=btoa(e);return t=t.replace(/=+$/,""),encodeURIComponent(t)}catch(e){return null}},n=e=>{try{const t=decodeURIComponent(e);let i="";const o=t.length%4;2===o?i="==":3===o&&(i="=");const n=atob(t+i);if(!n)throw Error();return n}catch(e){return null}}},34579:(e,t,i)=>{i.d(t,{wC:()=>O,T:()=>I,yG:()=>L,bg:()=>E,Ly:()=>F,g0:()=>R,yM:()=>M,Hx:()=>D});var o=i(64047),n=i(73566),a=i(48185),r=i(19630),l=i(35167),s=i(31223),d=i.n(s),c=i(82346),u=i(11348),p=i(60595),m=i(20948),h=i(53095),g=i(93859),v=i(10026),b=i(5549),y=i(49584),f=i(68854),_=i(5570),x=i(55198),w=i(66891),k=i(45313),C=i(99087);const j=({reportTarget:e})=>{if(!e)return null;const{report_type:t,video_owner:i,video_id:o,object_id:n}=e;let a=null;if(o&&i){const e=(0,k.fH)({uniqueId:null==i?void 0:i.uniqueId,videoId:o,secUid:null==i?void 0:i.secUid});a=`${location.origin}${e}`,"comment"===t&&(a=`${a}&cid=${(0,C.n)(n)}`)}return a};var S,P=i(53462),T=i(21236);!function(e){e[e.Normal=0]="Normal",e[e.Bully=1]="Bully",e[e.Legal=2]="Legal",e[e.Spam=3]="Spam",e[e.UserPretend=4]="UserPretend",e[e.UserProfile=5]="UserProfile",e[e.Netzdg=6]="Netzdg",e[e.Kopig=7]="Kopig",e[e.Avia=8]="Avia"}(S||(S={}));const I=[112,212,9014],O=[222,9015],D=({reportTarget:e})=>{const t=j({reportTarget:e});return"https://www.tiktok.com/legal/report/NetzDG?lang=de"+(t?`&reporturl=${encodeURIComponent(t)}`:"")},R=({reportTarget:e})=>{const t=j({reportTarget:e});return"https://www.tiktok.com/legal/report/lcen?lang=fr"+(t?`&reporturl=${encodeURIComponent(t)}`:"")},M=({reportTarget:e})=>{const t=j({reportTarget:e});return"https://www.tiktok.com/legal/copyright-policy"+(t?`?report_url=${encodeURIComponent(t)}`:"")},L={hideArrow:"hideArrow",hideReportBox:"hideReportBox",avia:"avia",pretend:"pretend",bully:"bully",showDesc:"showDesc",requireDesc:"requireDesc",requireImage:"requireImage",hideBlockUser:"hideBlockUser",needLogin:"needLogin",webappNeedLoginLegal:"webappNeedLoginLegal",webappNeedLoginNetzdg:"webappNeedLoginNetzdg",webappNeedLoginAvia:"webappNeedLoginAvia"};var B;!function(e){e[e.Reason=0]="Reason",e[e.Normal=1]="Normal",e[e.Kopig=2]="Kopig",e[e.User=3]="User",e[e.BlockUser=4]="BlockUser",e[e.Finish=5]="Finish",e[e.Ftcreport=6]="Ftcreport",e[e.ImageDesc=7]="ImageDesc",e[e.Old=8]="Old"}(B||(B={}));const F={User:3,Desc:1,NETZDG:2,Old:8,Counterfeit:7};let E=class extends n.D{constructor(e,t,i){super(),this.service=e,this.searchEntry=t,this.t=i,this.defaultState={reasons:null,showing:!1,loading:!1,requesting:void 0,reportTarget:null,lastStatus:-1,PageState:0,PageStateData:void 0,PreState:[],UserData:{selectedReason:void 0,submitresult:void 0,HistoryReason:[]},blockedVideos:[],reasonsAPIVersion:2}}setReasonsAPIVersion(e,t){e.reasonsAPIVersion=t}setReportTarget(e,t){e.reportTarget=t}judgeFtc(e,t){"kid_mode_video"===t.report_type&&(e.PageState=6)}setReasons(e,t){e.reasons=t,e.PageStateData={reasons:t}}addBlockVideo(e,t){e.blockedVideos.includes(t)||e.blockedVideos.push(t)}removeBlockVideo(e,t){e.blockedVideos=e.blockedVideos.filter((e=>e!==t))}setLoading(e,t){e.loading=t}getReasons(e){return e.pipe((0,m.M)(this.state$),(0,h.z)((([e,t])=>{var i;if(d()(e,t.reportTarget)&&t.reasons&&(null===(i=t.reasons)||void 0===i?void 0:i.length)>0)return(0,c.of)(this.getActions().setReasons(t.reasons));const{report_type:o,lang:n,object_id:a}=e;return this.service.getReportReasons({report_type:o,lang:n,object_id:a,api_version:t.reasonsAPIVersion}).pipe((0,g.b)((({body:e})=>{e.length||x.h.open({content:this.t("Sorry, something wrong with the server, please try again."),duration:1.2,widthType:"half"})})),(0,h.z)((t=>{var i,o,n;if(0===t.statusCode){let a=null!==(i=t.body)&&void 0!==i?i:[];return"user"===e.report_type&&(a=null!==(n=null===(o=a.find((e=>9101===e.reason_type)))||void 0===o?void 0:o.next_reason)&&void 0!==n?n:a),(0,c.of)(this.getActions().setReasons(a))}return(0,c.of)(this.getActions().setReasons([]))})),(0,v.O)(this.getActions().setLoading(!0)),(0,b.l)(this.getActions().setLoading(!1)))})))}handleNextReason(e){return e.pipe((0,m.M)(this.state$),(0,g.b)((([{reason_id:e},{reportTarget:t}])=>{const{object_id:i="",report_type:o=""}=null!=t?t:{};_.y.handleReportNext({object_id:i,object_type:o,reason_id:e})})),(0,h.z)((([{nextReason:e},{PageStateData:t,PageState:i}])=>(0,c.of)(this.getActions().setPageStateData({reasons:e}),this.getActions().appendToPreState({state:i,data:t})))))}handleNextForm(e){return e.pipe((0,m.M)(this.state$),(0,h.z)((([e,{PageStateData:t,PageState:i}])=>(0,c.of)(this.getActions().setPageState(e),this.getActions().setPageStateData({}),this.getActions().appendToPreState({state:i,data:t})))))}setShowing(e,t){e.showing=t}showReport(e){return e.pipe((0,h.z)((e=>(0,c.of)(this.getActions().setShowing(!0),this.getActions().judgeFtc(e),this.getActions().getReasons(e),this.getActions().setReportTarget(e)))))}hideReport(e){return e.pipe((0,h.z)((()=>(0,c.of)(this.getActions().setShowing(!1)))))}setRequesting(e,t){e.requesting=t}setLastStatus(e,t){e.lastStatus=t}postReport(e){return e.pipe((0,m.M)(this.state$),(0,y.z)((([{reason:e,extraData:t,region:i,uid:o},{reportTarget:n,UserData:a}])=>{var r;if(!n)return u.E;const l=8===(null===(r=null==a?void 0:a.selectedReason)||void 0===r?void 0:r.special_type),s={};Array.isArray(e)&&"kid_mode_video"===n.report_type&&(s.additional_reasons=`%5B${e.join(",")}%5D`,e=e[0]);const d=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({app_name:"tiktok_web",aid:1988,current_region:i,reporter_id:o,reason:e},n),{target:n.object_id}),t),{report_type:"kid_mode_video"===n.report_type?"video":n.report_type}),s);return this.service.postReport(d).pipe((0,f.K)((()=>(0,c.of)({status_code:-1}))),(0,h.z)((t=>{let i;switch(t.status_code){case 90002:i={title:this.t("Web_report_thanks_for_report"),content:this.t("Web_report_report_detail"),button:this.t("live_close"),success:!1};break;case 0:i={title:this.t("Web_report_thanks_for_report"),content:l?this.t("avia_law_report_received_confirm"):this.t("Web_report_report_detail"),button:this.t("pm_mt_live_done"),success:!0};break;default:i={title:this.t("Web_report_report_for_error"),content:this.t("Sorry, something wrong with the server, please try again."),button:this.t("live_close"),success:!1}}if(0===t.status_code){const{object_id:t,report_type:i}=n;_.y.handleReportSubmit({object_id:t,object_type:i,reason_id:e})}return"video"===n.report_type&&0===t.status_code&&n.object_id?(0,c.of)(this.getActions().addBlockVideo(n.object_id),this.getActions().setLastStatus(t.status_code),this.getActions().setPageState(5),this.getActions().setUserData({submitresult:i}),this.searchEntry.getActions().setBlockListByUid({uid:o,blockId:n.object_id,blockType:"videoIdList"})):(0,c.of)(this.getActions().setLastStatus(t.status_code),this.getActions().setPageState(5),this.getActions().setUserData({submitresult:i}))})),(0,v.O)(this.getActions().setRequesting(!0)),(0,b.l)(this.getActions().setRequesting(!1)))})))}setPageState(e,t){e.PageState=t}appendToPreState(e,t){e.PreState.push(t)}removeFromPreState(e){e.PreState.pop()}resetPreState(e){e.PreState=[]}setUserData(e,t){e.UserData=Object.assign(Object.assign({},e.UserData),t)}setPageStateData(e,t){e.PageStateData=t}resetState(e){return e.pipe((0,h.z)((e=>(0,c.of)(this.getActions().resetPreState(),this.getActions().setUserData({selectedReason:void 0,HistoryReason:[]}),this.getActions().setPageState(0),this.getActions().setPageStateData(null)))))}popHistoryReason(e){return e.pipe((0,m.M)(this.state$),(0,h.z)((([e,{UserData:t}])=>{var i;const o=[...null!==(i=t.HistoryReason)&&void 0!==i?i:[]];return o.pop(),(0,c.of)(this.getActions().setUserData({HistoryReason:o}))})))}handlePrevStep(e){return e.pipe((0,m.M)(this.state$),(0,h.z)((([e,{PreState:t}])=>{if(0===t.length)return u.E;const{state:i,data:o}=t[t.length-1];return(0,c.of)(this.getActions().popHistoryReason(),this.getActions().setPageState(i),this.getActions().setPageStateData(o),this.getActions().removeFromPreState())})))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"setReasonsAPIVersion",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"setReportTarget",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"judgeFtc",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"setReasons",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"addBlockVideo",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"removeBlockVideo",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"setLoading",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"getReasons",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"handleNextReason",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"handleNextForm",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"setShowing",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"showReport",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"hideReport",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"setRequesting",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"setLastStatus",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"postReport",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"setPageState",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"appendToPreState",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"removeFromPreState",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"resetPreState",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"setUserData",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"setPageStateData",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"resetState",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"popHistoryReason",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"handlePrevStep",null),E=(0,o.__decorate)([(0,r.Y)("Report"),(0,o.__param)(2,(0,l.t)(w.s$)),(0,o.__metadata)("design:paramtypes",[T.r,P.Eg,Function])],E)},21236:(e,t,i)=>{i.d(t,{r:()=>s});var o=i(64047),n=i(57244),a=i(82346),r=i(70526),l=i(18645);let s=class{constructor(e){this.fetch=e}getReportReasons(e){return this.fetch.get("/node/report/reasons",{query:e,baseUrlType:2})}postReport(e){return this.fetch.get("/aweme/v2/aweme/feedback/",{query:e,baseUrlType:2})}uploadImage(e){if(0===e.length)return(0,a.of)({data:[],statusCode:0});const t=new FormData;for(let i=0;i<e.length;i++){const o=e[i];t.append("type",o.type),t.append("size",`${o.size}`),t.append("name",o.name),t.append("height",o.height),t.append("width",o.width),t.append(`file${i}`,o,o.name)}return this.fetch.post("/node/feedback/upload_image/",{body:t,headers:{[r.eD]:this.fetch.csrfToken},baseUrlType:2,omitContentType:!0})}};s=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[l.r])],s)},93179:(e,t,i)=>{i.d(t,{Qi:()=>p}),i(11040);var o=i(9236),n=i(91051),a=i(5570),r=i(17133),l=i(270),s=i(33642),d=i(99297),c=i(34579);const u=["video","user"];function p({onShow:e,reportTarget:t}){const{showModal:i}=(0,l.J)(),p=(0,o.qj)(c.bg),{abTestVersion:m}=(0,s.m7)((0,r.Lh)((()=>["abTestVersion"]),[])),h="v3"===(0,d.N8)(m,"reasons_api_version");return{handleShowReport:(0,n.useCallback)((o=>{null==e||e(o),i(),u.includes(t.report_type)&&h?p.setReasonsAPIVersion(3):p.setReasonsAPIVersion(2),p.showReport(t),a.y.handleShowReport({object_type:t.report_type,type:t.report_type,object_id:t.object_id,play_mode:t.play_mode,poi_id:t.poi_id,aweme_type:t.aweme_type,pic_cnt:t.pic_cnt,is_sub_only_video:t.is_sub_only_video})}),[p,h,e,t,i])}}},62454:(e,t,i)=>{i.d(t,{l:()=>ri});var o=i(11040),n=i(9236),a=i(91051),r=i(48319),l=i(270),s=i(34579),d=i(58641),c=i(59754),u=i(58718),p=i(43348),m=i(32273),h=i(85640),g=i(63175),v=i(16926),b=i(55198),y=i(10410),f=i(68191);const _=(0,f.Z)("div",{target:"eyl260m0"})((({theme:e})=>({minHeight:"226px",width:"400px",background:e.colors.BGPrimary,borderRadius:"8px",boxShadow:"0px 2px 12px rgba(0, 0, 0, 0.12)",padding:"32px"})),"label:DivWapper;"),x=(0,f.Z)("div",{target:"eyl260m1"})((({theme:e})=>({minHeight:"32px",width:"100%",textAlign:"center",lineHeight:"32px",fontSize:"24px",color:e.colors.TextPrimary})),"label:DivTitle;"),w=(0,f.Z)("div",{target:"eyl260m2"})((({theme:e})=>({margin:"16px 0px 24px",width:"100%",textAlign:"center",lineHeight:"22px",fontSize:"16px",color:e.colors.TextSecondary})),"label:DivDetail;"),k=(0,f.Z)("div",{target:"eyl260m3"})({display:"flex",justifyContent:"space-between"},"label:DivContain;"),C=(0,f.Z)("button",{target:"eyl260m4"})((({theme:e,active:t})=>({width:"164px",height:"46px",flex:"0 1 auto",borderRadius:"4px",padding:"12px 0px",textAlign:"center",fontSize:"16px",cursor:"pointer",lineHeight:"16px",color:t?e.colors.Primary:e.colors.TextPrimary,backgroundColor:e.colors.BGSecondary2,border:` 1px solid ${t?e.colors.Primary:e.colors.TextPrimary}`})),"label:ButtonC;"),j=e=>{var t,i,r;const l=(0,m.Q)(),d=(0,v.fz)(y.K),{onClose:c}=e,u=(0,n.mp)(s.bg,{selector:e=>{const{UserData:t,reportTarget:i}=e;return{UserData:t,reportTarget:i}},dependencies:[]}),p=(0,a.useCallback)((e=>{var t,i;d.blockUser({sec_user_id:null!==(i=null===(t=u.reportTarget)||void 0===t?void 0:t.secUid)&&void 0!==i?i:"",block_type:1}).subscribe((e=>{0===e.status_code&&(c(),b.h.open({content:l("Blocked"),duration:3,widthType:"half"}))}))}),[c,null===(t=u.reportTarget)||void 0===t?void 0:t.secUid,d,l]);return(0,o.jsxs)(_,{children:[(0,o.jsx)(x,{children:l("Web_report_block_who",{username:null===(i=u.reportTarget)||void 0===i?void 0:i.nickname})},void 0),(0,o.jsx)(w,{children:l("Web_report_block_detail",{username:null===(r=u.reportTarget)||void 0===r?void 0:r.nickname})},void 0),(0,o.jsxs)(k,{children:[(0,o.jsx)(C,Object.assign({active:!1,onClick:e.onClose},{children:l("copyright_check_post_popup_cancel")}),void 0),(0,o.jsx)(C,Object.assign({active:!0,onClick:p},{children:l("webdm_block")}),void 0)]},void 0)]},void 0)};var S=i(74820),P=i(43291),T=i(90888),I=i(96544),O=i(99116),D=i(79067);const R={id:"Eye-7cd12bbc",use:"Eye-7cd12bbc-usage",viewBox:"0 0 20 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="Eye-7cd12bbc"><path fill-rule="evenodd" d="M16.667 10c0 .918-.53 1.919-1.73 2.76C13.74 13.595 12 14.165 10 14.165c-2.001 0-3.741-.57-4.937-1.407-1.2-.84-1.73-1.841-1.73-2.76 0-.917.53-1.918 1.73-2.759C6.26 6.404 8 5.833 10 5.833c2.001 0 3.741.57 4.937 1.407 1.2.84 1.73 1.842 1.73 2.76Zm1.666 0c0 3.222-3.73 5.833-8.333 5.833-4.602 0-8.333-2.611-8.333-5.833S5.397 4.167 10 4.167c4.602 0 8.333 2.611 8.333 5.833Zm-7.083 0a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0Zm1.667 0a2.917 2.917 0 1 1-5.834 0 2.917 2.917 0 0 1 5.834 0Z" clip-rule="evenodd" /></symbol>'};function M(e){const t=(0,a.useContext)(D.e);return(0,a.useLayoutEffect)((()=>(t.add(R),()=>{t.remove("Eye-7cd12bbc")})),[]),(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,o.jsx)("use",{xlinkHref:"#Eye-7cd12bbc"},void 0)}),void 0)}const L={id:"Speaker_2_LTR-f5ef723c",use:"Speaker_2_LTR-f5ef723c-usage",viewBox:"0 0 20 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="Speaker_2_LTR-f5ef723c"><path fill-rule="evenodd" d="M8.473 3.488a1.25 1.25 0 0 1 1.944 1.04v10.943a1.25 1.25 0 0 1-1.944 1.04L4.331 13.75H2.5c-.69 0-1.25-.56-1.25-1.25v-5c0-.69.56-1.25 1.25-1.25h1.831l4.142-2.762Zm.277 1.819-3.704 2.47a.833.833 0 0 1-.463.14H2.917v4.166h1.666c.165 0 .326.049.463.14l3.704 2.47V5.307Zm5 4.693c0-1.017-.405-1.94-1.063-2.616a.455.455 0 0 1-.042-.604l.529-.644a.393.393 0 0 1 .576-.045A5.403 5.403 0 0 1 15.417 10c0 1.536-.64 2.924-1.667 3.909a.393.393 0 0 1-.576-.046l-.53-.643a.455.455 0 0 1 .043-.604A3.736 3.736 0 0 0 13.75 10Zm1.673-5.396a.438.438 0 0 0 .038.597A6.645 6.645 0 0 1 17.501 10a6.648 6.648 0 0 1-2.04 4.799.438.438 0 0 0-.038.597l.54.634a.401.401 0 0 0 .58.04A8.312 8.312 0 0 0 19.167 10c0-2.393-1.01-4.55-2.624-6.07a.401.401 0 0 0-.58.04l-.54.634Z" clip-rule="evenodd" /></symbol>'};function B(e){const t=(0,a.useContext)(D.e);return(0,a.useLayoutEffect)((()=>(t.add(L),()=>{t.remove("Speaker_2_LTR-f5ef723c")})),[]),(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,o.jsx)("use",{xlinkHref:"#Speaker_2_LTR-f5ef723c"},void 0)}),void 0)}const F={id:"Thumbs_Up-a3dc2037",use:"Thumbs_Up-a3dc2037-usage",viewBox:"0 0 20 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="Thumbs_Up-a3dc2037"><path fill-rule="evenodd" d="M10.724 17.896c-.497.27-1.145.346-1.752-.02a3.015 3.015 0 0 1-1.462-2.584v-2.08H3.977a2.29 2.29 0 0 1-2.284-2.631l1.005-6.552a2.29 2.29 0 0 1 2.284-1.945H15.38a2.515 2.515 0 0 1 2.53 2.176.833.833 0 0 1 .007.112v5.096a.833.833 0 0 1-.008.111c-.163 1.206-1.203 2.276-2.529 2.257h-1.4l-2.211 4.9c-.21.468-.573.904-1.045 1.16Zm3.55-7.724h1.127c.365.006.765-.312.85-.77V4.438a.85.85 0 0 0-.86-.689h-1.117v6.424ZM12.61 3.749H4.968a.624.624 0 0 0-.624.53v.001L3.34 10.83a.623.623 0 0 0 .624.718h4.38c.46 0 .833.372.833.832v2.912a1.35 1.35 0 0 0 .675 1.168h.003a.184.184 0 0 0 .075-.027.816.816 0 0 0 .319-.376l.002-.004 2.36-5.228V3.75Z" clip-rule="evenodd" /></symbol>'};function E(e){const t=(0,a.useContext)(D.e);return(0,a.useLayoutEffect)((()=>(t.add(F),()=>{t.remove("Thumbs_Up-a3dc2037")})),[]),(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,o.jsx)("use",{xlinkHref:"#Thumbs_Up-a3dc2037"},void 0)}),void 0)}var Z=i(17133),A=i(41573);const U=(0,f.Z)("label",{target:"e1d46yfg0"})((({theme:e})=>({display:"flex",fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.normal,fontSize:"16px",color:e.colors.TextPrimary,cursor:"pointer"})),"label:LabelCheckbox;"),z=(0,f.Z)("div",{target:"e1d46yfg1"})((({size:e})=>({color:"#fff",position:"relative",height:`${e}px`,lineHeight:`${e}px`})),"label:DivCheckboxSymbol;"),W=(0,f.Z)("input",{target:"e1d46yfg2"})((({selected:e,bordertype:t,theme:i,size:o})=>Object.assign(Object.assign({appearance:"none",width:`${o}px`,height:`${o}px`,border:`1.5px solid ${i.colors.LineSecondary}`,margin:"0 10px -2.5px 0"},e?{border:"none",backgroundColor:i.colors.Primary}:{}),"radio"===t?{borderRadius:"50%"}:{borderRadius:"2px"})),"label:InputCheckbox;"),V=(0,f.Z)("div",{target:"e1d46yfg3"})({pointerEvents:"none",position:"absolute",top:"2px",left:"3px",width:"15px",height:"15px"},"label:DivCheckboxIcon;"),q=(0,a.memo)((function({id:e,value:t,label:i,onChange:n,bordertype:r="radio",style:l={},size:s=22}){const d=(0,a.useCallback)((e=>{n&&n(e.target.checked)}),[n]);return(0,o.jsxs)(U,Object.assign({htmlFor:e,style:l},{children:[(0,o.jsxs)(z,Object.assign({size:s,className:"checkbox-symbol"+(t?" selected":"")},{children:[(0,o.jsx)(W,{bordertype:r,selected:t,id:e,checked:t,type:"checkbox",size:s,onChange:d},void 0),t&&(0,o.jsx)(V,{children:(0,o.jsx)(A.Z,{width:16,height:16},void 0)},void 0)]}),void 0),i]}),void 0)}));var N=i(36488);const H=(0,f.Z)("form",{target:"ezqf9p60"})((({theme:e})=>[(0,N.GI)({theme:e,typography:"H6"}),{zIndex:2,background:e.colors.BGPrimary,borderRadius:"8px",overflow:"hidden",width:"700px",margin:0}]),"label:FormReport;"),$=(0,f.Z)("div",{target:"ezqf9p61"})((({theme:e})=>({width:"400px",zIndex:2,background:e.colors.BGPrimary,borderRadius:"8px",overflow:"hidden",margin:0})),"label:DivFormBox;"),G=(0,f.Z)("div",{target:"ezqf9p62"})({display:"flex",alignItems:"center",padding:"24px 24px 16px",height:"72px"},"label:DivFormHeader;"),K=(0,f.Z)("div",{target:"ezqf9p63"})({cursor:"pointer",padding:"6px",height:"32px"},"label:DivBackButton;"),Y=(0,f.Z)("div",{target:"ezqf9p64"})({cursor:"pointer",padding:"9px",height:"32px"},"label:DivCloseButton;"),Q=(0,f.Z)("h4",{target:"ezqf9p65"})((({theme:e})=>({fontSize:"20px",lineHeight:"32px",color:e.colors.TextPrimary,fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.bold,textAlign:"rtl"===e.direction?"right":"left",flex:1})),"label:H4FormTitle;");Q.defaultProps=Object.assign(Object.assign({},Q.defaultProps),{"data-e2e":"report-card-title"});const J=(0,f.Z)("div",{target:"ezqf9p66"})((({theme:e})=>({borderTop:`1px solid ${e.colors.LineSecondary}`,height:"50vh",overflowY:"auto",overflowX:"hidden",padding:"16px 16px 0px"})),"label:DivRadioWrapper;"),X=(0,f.Z)("div",{target:"ezqf9p67"})((({theme:e})=>({paddingBottom:"8px",paddingLeft:"8px",color:e.colors.TextSecondary,height:"22px",lineHeight:"22px"})),"label:DivSelectText;"),ee=(0,f.Z)("div",{target:"ezqf9p68"})((({theme:e})=>({color:e.colors.TextPrimary,lineHeight:"22px",fontSize:"16px",userSelect:"none"})),"label:DivReasonText;"),te=(0,f.Z)("label",{target:"ezqf9p69"})((({theme:e})=>({boxSizing:"border-box",minHeight:"54px",display:"flex",flex:"1 1 100%",flexDirection:"row",alignItems:"center",cursor:"pointer",position:"relative",wordBreak:"break-all",justifyContent:"space-between",padding:"8px",borderRadius:"8px",":hover":{background:e.colors.BGPlaceholderOpaque}})),"label:LabelRadio;");te.defaultProps=Object.assign(Object.assign({},te.defaultProps),{"data-e2e":"report-card-reason"});const ie=(0,f.Z)("div",{target:"ezqf9p610"})({position:"absolute",left:"50%",top:"50%",transform:"translate(-50% , -50%)"},"label:DivMMid;"),oe=(0,f.Z)("div",{target:"ezqf9p611"})((({theme:e})=>({padding:"8px",color:e.colors.TextPrimary,fontSize:"18px",lineHeight:"24px"})),"label:DivTitle;"),ne=(0,f.Z)("div",{target:"ezqf9p612"})((({theme:e})=>({padding:"4px 4px 10px 8px",color:e.colors.TextSecondary,fontSize:"16px",lineHeight:"22px"})),"label:DivSubTitle;"),ae=(0,f.Z)("li",{target:"ezqf9p613"})((({theme:e})=>({padding:"6px 6px 6px 0px",color:e.colors.TextSecondary,fontSize:"16px",lineHeight:"22px"})),"label:LiItem;"),re=(0,f.Z)("div",{target:"ezqf9p614"})((({theme:e})=>({position:"absolute",bottom:"0",left:"0",height:"84px",width:"100%",borderTop:`0.5px solid ${e.colors.LinePrimary2}`,backgroundColor:e.colors.BGPrimary})),"label:DivFooter;"),le=(0,f.Z)("button",{target:"ezqf9p615"})((({theme:e})=>({height:"36px",padding:"7px 16px",lineHeight:"22px",fontSize:"16px",position:"absolute",cursor:"pointer",top:"24px",right:"24px",color:e.colors.ConstTextInverse,background:e.colors.Primary,border:"none",borderRadius:"4px",":disabled":{background:e.colors.BGPlaceholderDefault,color:e.colors.TextQuaternary}})),"label:ButtonSubmit;"),se=(0,f.Z)("div",{target:"ezqf9p616"})((({theme:e,top:t})=>({height:"72px",width:"72px",margin:"32px auto 24px",borderRadius:"36px",background:e.colors.BGView,padding:`${t}px 20px`})),"label:DivIconRoundBg;"),de=(0,f.Z)("div",{target:"ezqf9p617"})((({theme:e})=>({margin:"0px auto 16px",padding:"0 32px",color:e.colors.TextPrimary,textAlign:"center",lineHeight:"32px",fontSize:"24px"})),"label:DivFinishTitle;"),ce=(0,f.Z)("div",{target:"ezqf9p618"})((({theme:e})=>({margin:"0px auto 24px",padding:"0 32px",color:e.colors.TextSecondary,textAlign:"center",lineHeight:"22px",fontSize:"16px"})),"label:DivFinishContent;"),ue=(0,f.Z)("button",{target:"ezqf9p619"})((({theme:e})=>({width:"336px",height:"46px",background:e.colors.Primary,margin:"0 32px 32px",borderRadius:"4px",textAlign:"center",lineHeight:"46px",fontSize:"16px",color:e.colors.ConstTextInverse,border:"none",cursor:"pointer"})),"label:ButtonFinish;"),pe=(0,f.Z)("div",{target:"e9ly1o60"})((({theme:e})=>({width:"400px",minHeight:"394px",background:e.colors.BGPrimary,borderRadius:"8px",overflow:"hidden"})),"label:DivWapper;"),me=(0,f.Z)("div",{target:"e9ly1o61"})((({theme:e})=>({width:"100%",padding:"32px",textAlign:"center",lineHeight:"32px",fontSize:"24px",color:e.colors.TextPrimary})),"label:DivTitle;"),he=(0,f.Z)("div",{target:"e9ly1o62"})({display:"inline-block",verticalAlign:"middle",marginRight:"8px"},"label:DivIcon;"),ge=(0,f.Z)("div",{target:"e9ly1o63"})((({theme:e})=>({height:"52px",margin:"0 33px",position:"relative",textAlign:"center",lineHeight:"52px",fontSize:"16px",color:e.colors.TextPrimary,borderBottom:`solid 1px ${e.colors.LineSecondary}`})),"label:DivRow;"),ve=(0,f.Z)("div",{target:"e9ly1o64"})((({theme:e})=>({height:"32px",paddingTop:"12px",marginBottom:"110px",textAlign:"center",lineHeight:"20px",fontSize:"14px",color:e.colors.Negative})),"label:DivReminder;"),be=(0,f.Z)("div",{target:"e9ly1o65"})({height:"100%",float:"left",paddingLeft:"32px"},"label:DivReasonText;"),ye=(0,f.Z)("div",{target:"e9ly1o66"})({display:"flex",justifyContent:"space-between",position:"absolute",bottom:"0",width:"100%",padding:"32px"},"label:DivContain;"),fe=(0,f.Z)("button",{target:"e9ly1o67"})((({theme:e,active:t,cancel:i})=>({width:"164px",height:"46px",flex:"0 1 auto",borderRadius:"4px",padding:"12px 0px",textAlign:"center",fontSize:"16px",cursor:"pointer",lineHeight:"16px",color:i?e.colors.TextPrimary:t?e.colors.ConstTextInverse:e.colors.TextQuaternary,backgroundColor:i?e.colors.BGSecondary2:t?e.colors.Primary:e.colors.BGInput2,border:i?`1px solid ${e.colors.LineSecondary2}`:"none"})),"label:ButtonC;"),_e=(0,f.Z)("div",{target:"e9ly1o68"})((({top:e})=>({textAlign:"center",margin:`${e}px auto 0px`})),"label:DivMid;"),xe=(0,f.Z)("div",{target:"e9ly1o69"})({position:"absolute",top:"18px",left:"0px",height:"20px",lineHeight:"20px"},"label:DivSvg;"),we=(0,f.Z)("button",{target:"e9ly1o610"})((({theme:e})=>({width:"240px",height:"44px",margin:"80px auto 0px",border:`1px solid ${e.colors.LineSecondary2}`,borderRadius:"2px",textAlign:"center",cursor:"pointer",color:e.colors.TextPrimary,fontSize:"16px",lineHeight:"22px",padding:"11px 0px",background:e.colors.BGTertiary2,display:"block"})),"label:ButtonRetry;"),ke=20,Ce=e=>{var t,i,r,l,d;const c=(0,m.Q)(),{colors:u}=(0,S.u)(),[p,h]=(0,a.useState)(!1),[g,v]=(0,a.useState)([]),[b,y]=(0,a.useState)(!1),f=(0,n.qj)(s.bg),_=(0,n.mp)(s.bg,{selector:e=>{const{lastStatus:t,requesting:i,loading:o,PageState:n,PageStateData:a,UserData:r,reportTarget:l}=e;return{lastStatus:t,requesting:i,loading:o,PageState:n,PageStateData:a,UserData:r,reportTarget:l}},dependencies:[]}),x=(0,a.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),_.reportTarget&&f.getReasons(_.reportTarget)}),[f,_.reportTarget]),w=(0,a.useCallback)((e=>t=>{t.preventDefault(),t.stopPropagation();const i=g.indexOf(e);if(i>-1){const e=[...g];e.splice(i,1),v(e),h(e.length>0)}else{const t=[...g,e];v(t),y(0===t.length),h(t.length>0)}}),[g]),{region:k="",user:C}=null!==(t=(0,Z.Lh)((()=>["region","user"]),[]))&&void 0!==t?t:{},j=(0,a.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),g.length>0?f.postReport({reason:g,extraData:null,region:k,uid:null==C?void 0:C.uid}):y(!0)}),[f,g,k,null==C?void 0:C.uid]),D=e=>0===e?(0,o.jsx)(xe,{children:(0,o.jsx)(M,{width:ke,height:ke},void 0)},void 0):1===e?(0,o.jsx)(xe,{children:(0,o.jsx)(B,{width:ke,height:ke},void 0)},void 0):(0,o.jsx)(xe,{children:(0,o.jsx)(E,{width:ke,height:ke},void 0)},void 0);return(0,o.jsx)(pe,{children:_.loading?(0,o.jsx)(ie,{children:(0,o.jsx)(O.g,{},void 0)},void 0):0===(null===(r=null===(i=_.PageStateData)||void 0===i?void 0:i.reasons)||void 0===r?void 0:r.length)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(_e,Object.assign({top:57},{children:(0,o.jsx)(P.Z,{width:72,height:72},void 0)}),void 0),(0,o.jsx)(_e,Object.assign({top:20,style:{fontSize:"18px",lineHeight:"24px",color:u.TextPrimary}},{children:c("pm_mt_live_page_sth_wrong")}),void 0),(0,o.jsx)(_e,Object.assign({top:12,style:{fontSize:"16px",lineHeight:"22px",color:u.TextSecondary}},{children:c("pm_mt_live_page_try_again")}),void 0),(0,o.jsxs)(we,Object.assign({onClick:x},{children:[(0,o.jsx)(T.Z,{width:14,height:14,style:{verticalAlign:"middle",marginRight:"8px"}},void 0),c("report_inbox_retry_btn")]}),void 0)]},void 0):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(me,{children:c("km_report_question")},void 0),null===(d=null===(l=_.PageStateData)||void 0===l?void 0:l.reasons)||void 0===d?void 0:d.map(((e,t)=>(0,o.jsxs)(ge,Object.assign({onClick:w(e.reason_type)},{children:[D(t),(0,o.jsx)(be,{children:e.text},void 0),(0,o.jsx)(q,{style:{position:"absolute",right:"-22px",top:"15px"},bordertype:"checkbox",label:"",value:g.includes(e.reason_type)},void 0)]}),e.reason_type))),b?(0,o.jsxs)(ve,{children:[(0,o.jsx)(he,{children:(0,o.jsx)(I.Z,{width:14,height:14},void 0)},void 0),(0,o.jsx)("span",{children:c("km_pick_reason")},void 0)]},void 0):null,(0,o.jsxs)(ye,{children:[(0,o.jsx)(fe,Object.assign({cancel:!0,active:!1,onClick:e.onClose},{children:c("copyright_check_post_popup_cancel")}),void 0),(0,o.jsx)(fe,Object.assign({cancel:!1,active:p,onClick:j},{children:c("choosepassword_button")}),void 0)]},void 0)]},void 0)},void 0)};var je=i(84656),Se=i.n(je),Pe=i(28972),Te=i(816),Ie=i(21236);const Oe=(0,f.Z)("div",{target:"e1fkwyf80"})({position:"fixed",left:0,top:0,right:0,bottom:0,zIndex:1001},"label:DivPreviewImageContainer;"),De=(0,f.Z)("div",{target:"e1fkwyf81"})((({theme:e})=>({position:"absolute",left:0,top:0,right:0,bottom:0,background:e.colors.SDPrimary})),"label:DivMaskContainer;"),Re=(0,f.Z)("div",{target:"e1fkwyf82"})({position:"absolute",zIndex:1,left:0,top:0,right:0,bottom:0},"label:DivImageContainer;"),Me=(0,f.Z)("div",{target:"e1fkwyf83"})({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"692px",height:"810px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"contain"},"label:DivPreviewImage;"),Le=(0,f.Z)("div",{target:"e1fkwyf84"})((({theme:e})=>({position:"absolute",top:"20px",right:"20px",width:"48px",height:"48px",borderRadius:"24px",backgroundColor:e.colors.ConstTextInverse5,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",":hover":{opacity:.7}})),"label:DivIconClose;"),Be={position:"absolute",top:"50%",transform:"translateY(-50%)",width:"48px",height:"48px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:.5,":hover":{opacity:1}},Fe=(0,f.Z)("div",{target:"e1fkwyf85"})(Object.assign(Object.assign({},Be),{left:"32px"}),"label:DivIconPrev;"),Ee=(0,f.Z)("div",{target:"e1fkwyf86"})(Object.assign(Object.assign({},Be),{left:"auto",right:"32px"}),"label:DivIconNext;"),Ze=(0,a.memo)((function({imgList:e,defaultIndex:t,onClose:i}){const[n,r]=(0,a.useState)(t>e.length-1?e.length-1:t<0?0:t),{showModal:s,hideModal:d}=(0,l.J)();(0,a.useEffect)((()=>(s(),()=>{d()})),[s,d]);const p=(0,a.useCallback)((()=>{null==i||i()}),[i]),m=(0,a.useCallback)((()=>r((e=>e-1))),[]),h=(0,a.useCallback)((()=>r((e=>e+1))),[]);return(0,o.jsxs)(Oe,{children:[(0,o.jsx)(De,{},void 0),(0,o.jsxs)(Re,{children:[(0,o.jsx)(Me,{style:{backgroundImage:`url(${e[n]})`}},void 0),(0,o.jsx)(Le,Object.assign({onClick:p},{children:(0,o.jsx)(Pe.Z,{height:24,width:24,fill:"#fff"},void 0)}),void 0),n>0&&(0,o.jsx)(Fe,Object.assign({onClick:m},{children:(0,o.jsx)(u.Z,{height:30,width:30,fill:"#fff"},void 0)}),void 0),n<e.length-1&&(0,o.jsx)(Ee,Object.assign({onClick:h},{children:(0,o.jsx)(c.Z,{height:30,width:30,fill:"#fff"},void 0)}),void 0)]},void 0)]},void 0)})),Ae=(0,f.Z)("div",{target:"e183km5u0"})((({theme:e})=>({fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.normal,display:"flex",flexWrap:"wrap"})),"label:DivUploadImageContainer;"),Ue=(0,f.Z)("div",{target:"e183km5u1"})((({theme:e,size:t})=>({boxSizing:"border-box",width:`${t}px`,height:`${t}px`,display:"flex",alignItems:"center",flexDirection:"column",background:e.colors.BGInput,borderRadius:"2px",overflow:"hidden",cursor:"pointer",paddingTop:(t-30)/2+"px"})),"label:DivImageUploadElement;"),ze=(0,f.Z)("div",{target:"e183km5u2"})((({theme:e,size:t})=>({width:`${t}px`,height:`${t}px`,marginRight:"12px",position:"relative",borderRadius:"2px",overflow:"hidden",cursor:"pointer",":before":{content:'""',position:"absolute",width:"200%",height:"200%",borderRadius:"4px",border:`1px solid ${e.colors.LineSecondary}`,transform:"scale(.5)",left:"-50%",top:"-50%",boxSizing:"border-box"},img:{objectFit:"cover",zIndex:3,transform:"translateZ(10px)"}})),"label:DivImageItem;"),We=(0,f.Z)("span",{target:"e183km5u3"})({position:"absolute",display:"flex",boxSizing:"border-box",padding:"5px",top:0,right:0,width:"16px",height:"16px",background:"rgba(22, 24, 35, 0.75)",borderBottomLeftRadius:"2px",cursor:"pointer"},"label:SpanClose;"),Ve=(0,f.Z)("span",{target:"e183km5u4"})((({theme:e})=>({fontSize:"12px",lineHeight:"15px",color:e.colors.TextTertiary,marginTop:"4px"})),"label:SpanImageNumber;"),qe=(0,f.Z)("input",{target:"e183km5u5"})({display:"none",width:0,height:0},"label:InputImage;"),Ne=(0,f.Z)("div",{target:"e183km5u6"})({position:"absolute",left:"50%",top:"50%",transform:"translate(-50% , -50%)"},"label:DivMid;");let He=0;const $e=Number(1048576),Ge=(e,t)=>e>=5242880?t?.1:.2:e>=1572864?t?.3:.5:e>=524288?t?.4:.6:t?.6:.8,Ke=(0,a.memo)((function({max:e,onChange:t,size:i=72}){const n=(0,v.fz)(Ie.r),[r,l]=(0,a.useState)([]),[s,d]=(0,a.useState)(0),[c,u]=(0,a.useState)(!1),p=(0,a.useRef)([]),{colors:m}=(0,S.u)(),h=(0,a.useCallback)((t=>{const i=[],o=t.target.files,n=e-r.length;if(o){const e=o.length>n?n:o.length;for(let t=0;t<e;t++)if(o[t].type.match("image")){const n=new FileReader;n.readAsDataURL(o[t]),n.onload=t=>{i.push({id:He++,uri:t.target.result,uploaded:!1}),i.length===e&&l((e=>[...e,...i]))},p.current.push(o[t])}t.target.value=""}}),[e,r.length]),g=(0,a.useCallback)((e=>()=>{d(e),u(!0)}),[]),b=(0,a.useCallback)((e=>{const t=p.current[e];new(Se())(t,{quality:Ge(t.size),convertSize:$e,success:i=>{p.current[e]=i,i.with=t.width,i.height=t.height,n.uploadImage([i]).subscribe((t=>{const o=[...r];o[e]=Object.assign(Object.assign(Object.assign({},o[e]),t.data[0]),{size:i.size,uploaded:!0}),l(o)}))}})}),[r,p,n]),y=e=>()=>{const t=r.slice();t.splice(e,1),l(t),p.current.splice(e,1)},f=(0,a.useCallback)((()=>{u(!1)}),[]);return(0,a.useEffect)((()=>{r.forEach(((e,t)=>{!1===r[t].uploaded&&b(t)})),t(r)}),[r,t,b]),(0,o.jsxs)("div",{children:[(0,o.jsxs)(Ae,{children:[r.map(((e,t)=>(0,o.jsxs)(ze,Object.assign({size:i},{children:[(0,o.jsx)("img",{src:e.uri,width:i,height:i,style:e.uploaded?{}:{filter:"blur(1px)"},onClick:g(t)},void 0),(0,o.jsx)(We,Object.assign({className:"close",onClick:y(t)},{children:(0,o.jsx)(Pe.Z,{width:7,height:7,fill:"#fff"},void 0)}),void 0),e.uploaded?null:(0,o.jsx)(Ne,{children:(0,o.jsx)(O.g,{size:20},void 0)},void 0)]}),e.id))),c&&(0,o.jsx)(Ze,{defaultIndex:s,imgList:r.map((e=>e.uri)),onClose:f},void 0),e<=r.length?null:(0,o.jsx)("label",Object.assign({htmlFor:"upload-image-file"},{children:(0,o.jsxs)(Ue,Object.assign({size:i},{children:[(0,o.jsx)(Te.Z,{height:30,width:30,fill:m.TextTertiary},void 0),(0,o.jsxs)(Ve,Object.assign({className:"img-number"},{children:[r.length,"/",e]}),void 0)]}),void 0)}),void 0)]},void 0),(0,o.jsx)(qe,{multiple:!0,className:"file-input",accept:"image/png,image/jpeg,image/jpg,image/bmp",type:"file",onChange:h,id:"upload-image-file"},void 0)]},void 0)}));var Ye=i(58899);const Qe=(0,f.Z)("div",{target:"egyld0v0"})({height:"580px",padding:"0px",overflowY:"auto",overflowX:"hidden",paddingBottom:"84px"},"label:DivKopigContainer;"),Je=(0,f.Z)("div",{target:"egyld0v1"})({display:"flex",flexDirection:"column",alignItems:"stretch",padding:"0px"},"label:DivScrollContainer;"),Xe=(0,f.Z)("div",{target:"egyld0v2"})({display:"flex",flexDirection:"row",justifyContent:"center",boxSizing:"border-box",padding:"16px 24px 12px"},"label:DivSectionHeader;"),et=(0,f.Z)("div",{target:"egyld0v3"})((({theme:e})=>({display:"flex",flexDirection:"row",boxSizing:"border-box",fontSize:"16px",padding:"16px 24px",lineHeight:"22px",color:e.colors.TextSecondary,backgroundColor:e.colors.BGView,marginBottom:"8px"})),"label:DivSectionLine;"),tt=(0,f.Z)("span",{target:"egyld0v4"})((({theme:e})=>({flex:1,fontSize:"18px",lineHeight:"24px",fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.semiBold,color:e.colors.TextPrimary})),"label:SpanSectionTitle;"),it=(0,f.Z)("span",{target:"egyld0v5"})((({theme:e})=>({fontSize:"16px",lineHeight:"22px",color:e.colors.TextSecondary})),"label:SpanWordCount;"),ot=e=>({borderStyle:"none",borderColor:"transparent",boxShadow:"none",outline:"none",margin:"0px 24px",borderRadius:"4px",fontSize:"16px",fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.normal,color:e.colors.TextPrimary,":placeholder":{color:e.colors.TextTertiary}}),nt=(0,f.Z)("textarea",{target:"egyld0v6"})((({theme:e})=>Object.assign(Object.assign({},ot(e)),{resize:"none",height:"80px",backgroundColor:e.colors.BGPrimary})),"label:TextareaDescription;"),at=(0,f.Z)("input",{target:"egyld0v7"})((({theme:e})=>Object.assign(Object.assign({},ot(e)),{borderBottom:`1px solid ${e.colors.LineSecondary}`,height:"40px",backgroundColor:e.colors.BGPrimary})),"label:InputSignature;"),rt=(0,f.Z)("div",{target:"egyld0v8"})({margin:"4px 24px"},"label:DivImageUploader;"),lt=(0,f.Z)("div",{target:"egyld0v9"})((({theme:e})=>({marginTop:"4px",fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.normal,fontSize:"12px",color:e.colors.Primary})),"label:DivFileSizeWarning;"),st=(0,f.Z)("div",{target:"egyld0v10"})({fontSize:"16px",lineHeight:"24px",padding:"16px 24px 0"},"label:DivCheckboxConfirm;"),dt=(0,f.Z)("div",{target:"egyld0v11"})((({theme:e})=>({marginTop:"20px",padding:"0px 24px",fontSize:"14px",lineHeight:"20px",color:e.colors.TextSecondary})),"label:DivInfo;"),ct=(0,a.memo)((function(){var e,t;const i=(0,m.Q)(),r=(0,n.qj)(s.bg),l=(0,n.mp)(s.bg,{selector:e=>{const{UserData:t,PreState:i,reasonsAPIVersion:o,PageState:n,reasons:a}=e;return{UserData:t,PreState:i,reasonsAPIVersion:o,PageState:n,reasons:a}},dependencies:[]}),[d,c]=(0,a.useState)(""),[u,p]=(0,a.useState)([]),[h,g]=(0,a.useState)(""),[v,b]=(0,a.useState)(!1),[y,f]=(0,a.useState)(!1),[_,x]=(0,a.useState)(!1),[w,k]=(0,a.useState)(!1),C=(0,a.useMemo)((()=>{var e,t,i,o,n,a,r;return 3===l.reasonsAPIVersion&&(null===(e=l.UserData)||void 0===e?void 0:e.selectedReason).reason_code?null!==(o=null===(i=null===(t=l.UserData)||void 0===t?void 0:t.selectedReason)||void 0===i?void 0:i.reason_code)&&void 0!==o?o:0:null!==(r=null===(a=null===(n=l.UserData)||void 0===n?void 0:n.selectedReason)||void 0===a?void 0:a.reason_type)&&void 0!==r?r:0}),[l.reasonsAPIVersion]);(0,a.useEffect)((()=>{const e=u.some((e=>!0!==e.uploaded));8===l.PageState||!e&&!y&&v&&h.length>0?x(!0):x(!1)}),[d,u,h,v,y]);const j=(0,a.useCallback)((e=>{f(!1);for(const t of e)t.size&&t.size>20971520&&f(!0);p(e)}),[]),S=(0,a.useCallback)((e=>{e.stopPropagation()}),[]),P=(0,a.useCallback)((e=>c(e.target.value)),[]),T=(0,a.useCallback)((e=>g(e.target.value)),[]),I=(0,a.useCallback)((e=>b(e)),[]),O=(0,a.useCallback)((e=>k(e)),[]),{region:D="",user:R}=null!==(e=(0,Z.Lh)((()=>["region","user"]),[]))&&void 0!==e?e:{},M=(0,a.useMemo)((()=>{var e,t,i,o;if(3===l.reasonsAPIVersion){const i=JSON.parse(null!==(t=null===(e=l.UserData.selectedReason)||void 0===e?void 0:e.option)&&void 0!==t?t:"{}");return"tags"in i&&i.tags.includes("avia")}return 8===(null===(o=null===(i=l.UserData)||void 0===i?void 0:i.selectedReason)||void 0===o?void 0:o.special_type)}),[l.UserData.selectedReason,l.reasonsAPIVersion]),L=(0,a.useCallback)((()=>{var e,t,i;const o=(0,Ye.EE)(null!==(e=l.reasons)&&void 0!==e?e:[],9014);o&&(r.setUserData({selectedReason:o,HistoryReason:[...null!==(t=l.UserData.HistoryReason)&&void 0!==t?t:[],o]}),r.handleNextReason({nextReason:null!==(i=o.next_reason)&&void 0!==i?i:[],reason_id:o.reason_code}),r.setPageState(0))}),[]),B=(0,a.useCallback)((e=>{if(w)return e.preventDefault(),e.stopPropagation(),void L();if(e.preventDefault(),e.stopPropagation(),C&&_){const e={is_netzdg:1,report_desc:d,uri:u.map((e=>e.url)).join(","),report_signature:h};r.postReport({reason:C,extraData:e,region:D,uid:null==R?void 0:R.uid})}}),[d,u,h,C,_,r,w,D,null==R?void 0:R.uid]);return(0,o.jsxs)(Qe,{children:[(0,o.jsxs)(Je,{children:[(0,o.jsx)(et,{children:`${i("Web_report_reason_select")} ${null===(t=l.UserData.selectedReason)||void 0===t?void 0:t.text}`},void 0),(0,o.jsxs)(Xe,{children:[(0,o.jsx)(tt,{children:i("Web_report_description")},void 0),(0,o.jsxs)(it,{children:[d.length,"/",200]},void 0)]},void 0),(0,o.jsx)(nt,{rows:5,maxLength:200,placeholder:i("Please provide as much detail as possible"),value:d,onChange:P,onKeyDown:S},void 0),(0,o.jsxs)(rt,{children:[(0,o.jsx)(Ke,{max:4,onChange:j},void 0),y&&(0,o.jsx)(lt,{children:i("attachment_upload_limit")},void 0)]},void 0),8===l.PageState?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(st,{children:(0,o.jsx)(q,{label:i("Web_report_description_NetzDG"),value:w,onChange:O},void 0)},void 0)},void 0):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Xe,{children:(0,o.jsx)(tt,{children:i("Signature")},void 0)},void 0),(0,o.jsx)(at,{placeholder:i("Sign_here"),value:h,maxLength:100,onChange:T,onKeyDown:S},void 0),(0,o.jsx)(st,{children:(0,o.jsx)(q,{label:i("Report_confirmation"),value:v,onChange:I},void 0)},void 0)]},void 0),M&&(0,o.jsx)(dt,{children:i("avia_law_false_report_warning")},void 0),(0,o.jsx)(dt,{children:i("Web_report_description_tips")},void 0)]},void 0),(0,o.jsx)(re,{children:(0,o.jsx)(le,Object.assign({disabled:!_,onClick:B},{children:i("Submit")}),void 0)},void 0)]},void 0)})),ut=(0,f.Z)("div",{target:"e10dth7g0"})((({top:e})=>({textAlign:"center",margin:`${e}px auto 0px`})),"label:DivMid;"),pt=(0,f.Z)("button",{target:"e10dth7g1"})((({theme:e})=>({width:"240px",height:"44px",margin:"133px auto 0px",border:`1px solid ${e.colors.LineSecondary2}`,borderRadius:"2px",textAlign:"center",cursor:"pointer",color:e.colors.TextPrimary,fontSize:"16px",lineHeight:"22px",padding:"11px 0px",background:e.colors.BGTertiary2,display:"block"})),"label:ButtonRetry;");var mt=i(24669),ht=i.n(mt);const gt=()=>{var e,t,i,r,l;const d=(0,m.Q)(),{isRTL:p}=(0,g.Y)(),{user:h,region:v=""}=null!==(e=(0,Z.Lh)((()=>["user","region"]),[]))&&void 0!==e?e:{},b=(0,n.qj)(s.bg),{colors:y}=(0,S.u)(),f=(0,n.mp)(s.bg,{selector:e=>{const{lastStatus:t,requesting:i,loading:o,PageState:n,PageStateData:a,UserData:r,reportTarget:l,reasonsAPIVersion:s}=e;return{lastStatus:t,requesting:i,loading:o,PageState:n,PageStateData:a,UserData:r,reportTarget:l,reasonsAPIVersion:s}},dependencies:[]}),_=(0,a.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),f.reportTarget&&b.getReasons(f.reportTarget)}),[b,f.reportTarget]),x=e=>3===f.reasonsAPIVersion&&e.reason_code?e.reason_code:e.reason_type,w=(0,a.useCallback)((e=>t=>{var i,o,n,a,r,l,d,c,u,p,m,g,y,_,w,k,C,j,S,P,T,I,O,D,R,M,L,B,F,E,Z,A,U;t.preventDefault(),t.stopPropagation();let z=null===(o=null===(i=f.PageStateData)||void 0===i?void 0:i.reasons)||void 0===o?void 0:o.find((t=>x(t)===e));if(z&&b.setUserData({selectedReason:z,HistoryReason:[...null!==(n=f.UserData.HistoryReason)&&void 0!==n?n:[],z]}),z)if(3===f.reasonsAPIVersion){z=z;const e=Boolean(h),t=null!==(a=z.next_reason)&&void 0!==a?a:[],i=JSON.parse(null!==(r=z.option)&&void 0!==r?r:"{}"),{action:o,tags:n}=i;if(n&&ht()(n)&&n.length>0)for(const t of n)if([s.yG.webappNeedLoginLegal,s.yG.webappNeedLoginNetzdg,s.yG.webappNeedLoginAvia].includes(t)){let i=null;switch(t){case s.yG.webappNeedLoginLegal:i=(0,s.yM)({reportTarget:f.reportTarget});break;case s.yG.webappNeedLoginNetzdg:(!e&&"video"===(null===(l=f.reportTarget)||void 0===l?void 0:l.report_type)||!e&&"comment"===(null===(d=f.reportTarget)||void 0===d?void 0:d.report_type))&&(i=(0,s.Hx)({reportTarget:f.reportTarget}));break;case s.yG.webappNeedLoginAvia:(!e&&"video"===(null===(c=f.reportTarget)||void 0===c?void 0:c.report_type)||!e&&"comment"===(null===(u=f.reportTarget)||void 0===u?void 0:u.report_type))&&(i=(0,s.g0)({reportTarget:f.reportTarget}))}if(i)return void window.open(i,"_blank","noopener,noreferrer")}if(t.length>0)b.handleNextReason({nextReason:null!==(p=z.next_reason)&&void 0!==p?p:[],reason_id:z.reason_code});else switch(o.action_type){case"jumpToUrl":const e=(0,Ye.NQ)(null!==(g=null===(m=null==o?void 0:o.action_params)||void 0===m?void 0:m.body_content)&&void 0!==g?g:{},null!==(y=f.reportTarget)&&void 0!==y?y:{}),t=`https://tiktok.com/@${null===(_=f.reportTarget)||void 0===_?void 0:_.owner_id}/video/${null===(w=f.reportTarget)||void 0===w?void 0:w.object_id}`,i=Object.assign(Object.assign({},e),{reporturl:t,url_type:null===(k=f.reportTarget)||void 0===k?void 0:k.report_type,report_id:"user"===(null===(C=f.reportTarget)||void 0===C?void 0:C.report_type)?null===(j=f.reportTarget)||void 0===j?void 0:j.owner_id:null===(S=f.reportTarget)||void 0===S?void 0:S.object_id}),n=(0,Ye.bA)(null!==(P=o.action_params.url)&&void 0!==P?P:"",i);window.open(n,"_blank","noopener,noreferrer");break;case"submit":(null===(I=null===(T=f.UserData)||void 0===T?void 0:T.selectedReason)||void 0===I?void 0:I.reason_code)&&b.postReport({reason:null===(D=null===(O=f.UserData)||void 0===O?void 0:O.selectedReason)||void 0===D?void 0:D.reason_code,extraData:null,region:v,uid:null==h?void 0:h.uid});break;default:const a=o.action_params.route_path||"Desc";b.handleNextForm(s.Ly[a])}}else{z=z;const e=Boolean(h);let t=null;switch(z.special_type){case 2:t=(0,s.yM)({reportTarget:f.reportTarget});break;case 6:(!e&&"video"===(null===(R=f.reportTarget)||void 0===R?void 0:R.report_type)||!e&&"comment"===(null===(M=f.reportTarget)||void 0===M?void 0:M.report_type))&&(t=(0,s.Hx)({reportTarget:f.reportTarget}));break;case 8:(!e&&"video"===(null===(L=f.reportTarget)||void 0===L?void 0:L.report_type)||!e&&"comment"===(null===(B=f.reportTarget)||void 0===B?void 0:B.report_type))&&(t=(0,s.g0)({reportTarget:f.reportTarget}))}if(t)return b.popHistoryReason(),void window.open(t,"_blank","noopener,noreferrer");!z||Boolean(null===(F=z.next_reason)||void 0===F?void 0:F.length)?b.handleNextReason({nextReason:null!==(E=z.next_reason)&&void 0!==E?E:[],reason_id:z.reason_type}):[1,4].includes(z.special_type)&&(null===(Z=f.PageStateData)||void 0===Z?void 0:Z.reasons)&&z.reason_type!==(null===(A=f.PageStateData)||void 0===A?void 0:A.reasons[0]).reason_type?b.handleNextForm(3):f.UserData.HistoryReason&&[...s.wC,...s.T].includes(null===(U=f.UserData.HistoryReason[0])||void 0===U?void 0:U.reason_type)||[8].includes(z.special_type)?b.handleNextForm(2):b.handleNextForm(1)}}),[f.PageStateData,b,f.UserData.HistoryReason,h,f.reportTarget]);return(0,o.jsx)(J,{children:f.loading?(0,o.jsx)(ie,{children:(0,o.jsx)(O.g,{},void 0)},void 0):0===(null===(i=null===(t=f.PageStateData)||void 0===t?void 0:t.reasons)||void 0===i?void 0:i.length)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ut,Object.assign({top:57},{children:(0,o.jsx)(P.Z,{width:72,height:72},void 0)}),void 0),(0,o.jsx)(ut,Object.assign({top:20,style:{fontSize:"18px",lineHeight:"24px",color:y.TextPrimary}},{children:d("pm_mt_live_page_sth_wrong")}),void 0),(0,o.jsx)(ut,Object.assign({top:12,style:{fontSize:"16px",lineHeight:"22px",color:y.TextSecondary}},{children:d("pm_mt_live_page_try_again")}),void 0),(0,o.jsxs)(pt,Object.assign({onClick:_},{children:[(0,o.jsx)(T.Z,{width:14,height:14,style:{verticalAlign:"middle",marginRight:"8px"}},void 0),d("report_inbox_retry_btn")]}),void 0)]},void 0):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(X,{children:d("Please select a scenario")},void 0),null===(l=null===(r=f.PageStateData)||void 0===r?void 0:r.reasons)||void 0===l?void 0:l.map((e=>{var t,i,n,a;if(3===f.reasonsAPIVersion){const o=JSON.parse(null!==(t=e.option)&&void 0!==t?t:"{}").tags||[];if(o.includes("hideWebappReason"))return null;if(o.includes("flattenReasonList")){const t=null!==(i=e.next_reason)&&void 0!==i?i:[];if(t.length>0){const i=[...null!==(a=null===(n=f.PageStateData)||void 0===n?void 0:n.reasons)&&void 0!==a?a:[]],o=i.findIndex((t=>t.reason_code===e.reason_code));i.splice(o,1),i.push(...t),b.setReasons(i)}return null}}return(0,o.jsxs)(te,Object.assign({onClick:w(x(e))},{children:[(0,o.jsx)(ee,{children:e.text},void 0),p?(0,o.jsx)(u.Z,{style:{color:y.TextTertiary},width:20,height:20},void 0):(0,o.jsx)(c.Z,{style:{color:y.TextTertiary},width:20,height:20},void 0)]}),x(e))}))]},void 0)},void 0)};var vt=i(34785),bt=i(92036);const yt=(0,f.Z)("div",{target:"eshtx6u0"})((({theme:e})=>({borderTop:`1px solid ${e.colors.LineSecondary}`,margin:"0 15px",paddingTop:"30px"})),"label:DivUserBlockSection;"),ft=(0,f.Z)("div",{target:"eshtx6u1"})((({theme:e})=>({fontSize:"13px",lineHeight:"17px",color:e.colors.TextTertiary,paddingLeft:"12px"})),"label:DivUserBlockTitle;"),_t=(0,f.Z)("div",{target:"eshtx6u2"})({marginTop:"13px",height:"46px",paddingLeft:"12px",marginBottom:"24px"},"label:DivUserBlock;"),xt=(0,f.Z)("div",{target:"eshtx6u3"})((({theme:e})=>({width:"46px",height:"46px",marginRight:"13px",display:"inline-block",float:"left",backgroundColor:e.colors.BGInput,padding:"11px",borderRadius:"50%"})),"label:DivUserBlockIcon;"),wt=(0,f.Z)("div",{target:"eshtx6u4"})((({theme:e})=>({lineHeight:"46px",height:"46px",fontSize:"15px",color:e.colors.TextPrimary,display:"inline-block",float:"left"})),"label:DivUserBlockName;"),kt=({onClose:e})=>{var t,i,r,l,d;const c=(0,m.Q)(),u=(0,n.qj)(s.bg),{colors:p}=(0,S.u)(),h=(0,n.mp)(s.bg,{selector:e=>{const{UserData:t,reportTarget:i,reasonsAPIVersion:o}=e;return{reportTarget:i,UserData:t,reasonsAPIVersion:o}},dependencies:[]}),[g,v]=(0,a.useState)();(0,a.useEffect)((()=>{var e,t;3===h.reasonsAPIVersion&&v(JSON.parse(null!==(t=null===(e=h.UserData.selectedReason)||void 0===e?void 0:e.option)&&void 0!==t?t:"{}"))}),[h.reasonsAPIVersion]);const b=(0,a.useCallback)((()=>{e()}),[e]),y=(0,a.useCallback)((()=>{u.handleNextForm(4)}),[u]),{submitresult:f}=h.UserData,{title:_="Thanks",content:x="Well review your report and if there is a violation of our Community Guidelines, well take appropriate action.",button:w="Done",success:k=!0}=null!=f?f:{};return(0,o.jsxs)("div",{children:[(0,o.jsx)(se,Object.assign({top:k?25:20},{children:k?(0,o.jsx)(A.Z,{width:32,height:22,style:{color:p.Positive}},void 0):(0,o.jsx)(vt.Z,{width:32,height:32},void 0)}),void 0),(0,o.jsx)(de,{children:null!==(t=c(_))&&void 0!==t?t:_},void 0),(0,o.jsx)(ce,{children:x},void 0),"user"===(null===(i=h.reportTarget)||void 0===i?void 0:i.report_type)&&3!==h.reasonsAPIVersion||3===h.reasonsAPIVersion&&"user"===(null===(r=h.reportTarget)||void 0===r?void 0:r.report_type)&&!(null==g?void 0:g.tags.includes("hideBlockUser"))?(0,o.jsxs)(yt,Object.assign({onClick:y},{children:[(0,o.jsx)(ft,{children:c("Web_report_you_can_also")},void 0),(0,o.jsxs)(_t,{children:[(0,o.jsx)(xt,{children:(0,o.jsx)(bt.Z,{width:24,height:24},void 0)},void 0),(0,o.jsxs)(wt,{children:[c("webdm_block")," ",null===(l=h.reportTarget)||void 0===l?void 0:l.nickname]},void 0)]},void 0)]}),void 0):null,(0,o.jsx)(ue,Object.assign({onClick:b},{children:null!==(d=c(w))&&void 0!==d?d:w}),void 0)]},void 0)},Ct=()=>{var e,t,i,r,l,d,c,u,p,h,g,v;const b=(0,m.Q)(),y=(0,n.qj)(s.bg),f=(0,n.mp)(s.bg,{selector:e=>{const{UserData:t,reportTarget:i,reasonsAPIVersion:o}=e;return{UserData:t,reportTarget:i,reasonsAPIVersion:o}},dependencies:[]}),{region:_="",user:x}=null!==(e=(0,Z.Lh)((()=>["region","user"]),[]))&&void 0!==e?e:{},[w,k]=(0,a.useState)({title:"",subtitle:"",introduction:""}),[C,j]=(0,a.useState)(),S=(0,a.useCallback)((e=>{var t,i,o,n,a,r,l,s;e.preventDefault(),e.stopPropagation(),3!==f.reasonsAPIVersion&&(null===(i=null===(t=f.UserData)||void 0===t?void 0:t.selectedReason)||void 0===i?void 0:i.reason_type)?y.postReport({reason:null===(n=null===(o=f.UserData)||void 0===o?void 0:o.selectedReason)||void 0===n?void 0:n.reason_type,extraData:null,region:_,uid:null==x?void 0:x.uid}):(null===(r=null===(a=f.UserData)||void 0===a?void 0:a.selectedReason)||void 0===r?void 0:r.reason_code)&&y.postReport({reason:null===(s=null===(l=f.UserData)||void 0===l?void 0:l.selectedReason)||void 0===s?void 0:s.reason_code,extraData:null,region:_,uid:null==x?void 0:x.uid})}),[y,null===(i=null===(t=f.UserData)||void 0===t?void 0:t.selectedReason)||void 0===i?void 0:i.reason_type,null===(l=null===(r=f.UserData)||void 0===r?void 0:r.selectedReason)||void 0===l?void 0:l.reason_code,_,null==x?void 0:x.uid]);return(0,a.useEffect)((()=>{if(f.UserData.selectedReason){const e=JSON.parse(f.UserData.selectedReason.option)||{};3===f.reasonsAPIVersion?j(e):k(e.intro||{})}}),[]),(0,o.jsx)(J,{children:3!==f.reasonsAPIVersion?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(oe,{children:w.title},void 0),(0,o.jsx)(ne,{children:w.subtitle},void 0),(0,o.jsx)("ul",Object.assign({style:{margin:"0px",paddingInlineStart:"26px",paddingBottom:"84px"}},{children:(w.introduction||"").split("\n").map((e=>(0,o.jsx)(ae,{children:(0,o.jsx)("span",{children:e},void 0)},e)))}),void 0),(0,o.jsx)(re,{children:(0,o.jsx)(le,Object.assign({onClick:S},{children:b("Submit")}),void 0)},void 0)]},void 0):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(oe,{children:null===(c=null===(d=null==C?void 0:C.action)||void 0===d?void 0:d.action_params)||void 0===c?void 0:c.title_text},void 0),(0,o.jsx)(ne,{children:null===(p=null===(u=null==C?void 0:C.action)||void 0===u?void 0:u.action_params)||void 0===p?void 0:p.subtitle_text},void 0),(0,o.jsx)("ul",Object.assign({style:{margin:"0px",paddingInlineStart:"26px",paddingBottom:"84px"}},{children:(null!==(v=null===(g=null===(h=null==C?void 0:C.action)||void 0===h?void 0:h.action_params)||void 0===g?void 0:g.desc_text)&&void 0!==v?v:[]).map((e=>(0,o.jsx)(ae,{children:(0,o.jsx)("span",{children:e},void 0)},e)))}),void 0),(0,o.jsx)(re,{children:(0,o.jsx)(le,Object.assign({onClick:S},{children:b("Submit")}),void 0)},void 0)]},void 0)},void 0)};var jt=i(69988),St=i(32124),Pt=i(45712);const Tt=(0,i(28327).F4)({"0%":{transform:"rotate(0deg)"},"50%":{transform:"rotate(180deg)"},"100%":{transform:"rotate(360deg)"}}),It=(0,f.Z)("div",{target:"e1n5v3jy0"})({animation:`${Tt} 1s ease-out infinite`,width:"16px",height:"16px"},"label:DivRotate;"),Ot=(0,f.Z)("input",{target:"e1n5v3jy1"})((({theme:e})=>({borderTop:"0px",borderLeft:"0px",borderRight:"0px",borderBottom:`1px solid ${e.colors.LineSecondary}`,fontSize:"16px",width:"100%",padding:"14px 0px",lineHeight:"22px",outline:"none",marginTop:"14px",background:e.colors.BGPrimary,color:e.colors.TextPrimary})),"label:InputUser;"),Dt=(0,f.Z)("div",{target:"e1n5v3jy2"})((({theme:e})=>({padding:"8px 0px",borderBottom:`1px solid ${e.colors.LineSecondary}`})),"label:DivUserCC;"),Rt=(0,f.Z)("div",{target:"e1n5v3jy3"})({width:"100%",height:"64px",position:"relative"},"label:DivC;"),Mt=(0,f.Z)("div",{target:"e1n5v3jy4"})({height:"48px",position:"relative"},"label:DivUserInfo;"),Lt=(0,f.Z)("img",{target:"e1n5v3jy5"})({width:"48px",height:"48px",borderRadius:"50%",position:"absolute",left:"0",top:"0"},"label:ImgUserAvator;"),Bt=(0,f.Z)("div",{target:"e1n5v3jy6"})((({theme:e})=>({position:"absolute",left:"60px",top:"0px",height:"25px",lineHeight:"25px",fontSize:"18px",color:e.colors.TextPrimary})),"label:DivUserName;"),Ft=(0,f.Z)("div",{target:"e1n5v3jy7"})((({theme:e})=>({position:"absolute",left:"60px",top:"27px",height:"20px",lineHeight:"20px",fontSize:"14px",color:e.colors.TextPrimary})),"label:DivUserId;"),Et=(0,f.Z)("div",{target:"e1n5v3jy8"})({position:"absolute",right:"16px",bottom:"16px",width:"16px",height:"16px"},"label:DivCbutton;"),Zt=(0,f.Z)("li",{target:"e1n5v3jy9"})((({theme:e})=>({width:"100%",height:"64px",padding:"8px 16px",":hover":{background:e.colors.BGPlaceholderOpaque}})),"label:LiUser;"),At=(0,f.Z)("ul",{target:"e1n5v3jy10"})((({theme:e})=>({position:"relative",margin:"0px",width:"100%",maxHeight:"360px",overflowY:"scroll",padding:"0px",background:e.colors.BGSecondary,boxShadow:e.isDark?"":"0px 2px 12px rgba(0, 0, 0, 0.12)",borderRadius:"8px",zIndex:22})),"label:UlUser;");let Ut=null;const zt=(0,a.memo)((function({onChange:e}){const t=(0,m.Q)(),i=(0,v.fz)(Pt.o),[n,r]=(0,a.useState)(!1),[l,s]=(0,a.useState)(""),[d,c]=(0,a.useState)(null),[u,p]=(0,a.useState)([]),[h,g]=(0,a.useState)(!1),[b,y]=(0,a.useState)(0),[f,_]=(0,a.useState)(!0),x=(0,a.useCallback)((t=>{d&&(c(null),y(0),s(""),p([]),e(null))}),[d,e]),w=(0,a.useCallback)((t=>i=>{i.preventDefault(),i.stopPropagation(),c(t),r(!1),e(t)}),[e]),k=(0,a.useCallback)(((e,t)=>{!h&&f&&(g(!0),i.getUserSearch({keyword:e,cursor:t}).subscribe((e=>{var i;if(g(!1),0===e.status_code||203===e.status_code){_(Boolean(e.has_more));const{user_list:o}=e,n=null!==(i=null==o?void 0:o.map((e=>({uid:e.user_info.uid,nickname:e.user_info.nickname,username:e.user_info.unique_id,avatar:e.user_info.avatar_thumb.url_list.find((e=>e.indexOf(".jpeg")>-1))||e.user_info.avatar_thumb.url_list[0],isVerify:Boolean(e.user_info.custom_verify||e.user_info.verify_info_tt||e.user_info.enterprise_verify_reason)}))))&&void 0!==i?i:[],a=[...0===t?[]:u,...n];y(a.length),p(a),r(!0)}})))}),[h,f,i,u]),C=(0,a.useCallback)((e=>{const t=e.target.value;s(t),Ut&&clearTimeout(Ut),Ut=setTimeout((()=>{t&&k(t,0)}),1e3)}),[k]),j=(0,a.useCallback)((e=>{const t=e.target;t.scrollHeight-t.scrollTop===t.clientHeight&&!h&&k(l,b)}),[l,b,k,h]);return(0,o.jsxs)("div",{children:[(0,o.jsxs)(Rt,{children:[d?(0,o.jsx)(Dt,{children:(0,o.jsxs)(Mt,{children:[(0,o.jsx)(Lt,{src:d.avatar},void 0),(0,o.jsxs)(Bt,{children:[(0,o.jsx)("span",Object.assign({style:{paddingRight:"4px"}},{children:d.nickname}),void 0),d.isVerify?(0,o.jsx)(jt.Z,{style:{verticalAlign:"middle"},width:14,height:14,"data-e2e":"user-bluev"},void 0):null]},void 0),(0,o.jsx)(Ft,{children:d.username},void 0)]},void 0)},void 0):(0,o.jsx)(Ot,{value:l,placeholder:t("Web_report_account_impersonated_search"),onChange:C},void 0),(0,o.jsx)(Et,Object.assign({onClick:x},{children:d?(0,o.jsx)(St.Z,{style:{fontSize:16}},void 0):h?(0,o.jsx)(It,{children:(0,o.jsx)(T.Z,{style:{fontSize:16}},void 0)},void 0):null}),void 0)]},void 0),n?(0,o.jsx)(At,Object.assign({onScroll:j},{children:u.map((e=>(0,o.jsx)(Zt,{children:(0,o.jsxs)(Mt,Object.assign({onClick:w(e)},{children:[(0,o.jsx)(Lt,{src:e.avatar},void 0),(0,o.jsxs)(Bt,{children:[(0,o.jsx)("span",Object.assign({style:{paddingRight:"4px"}},{children:e.nickname}),void 0),e.isVerify?(0,o.jsx)(jt.Z,{style:{verticalAlign:"middle"},width:14,height:14,"data-e2e":"user-bluev"},void 0):null]},void 0),(0,o.jsx)(Ft,{children:e.username},void 0)]}),void 0)},e.username)))}),void 0):null]},void 0)})),Wt=(0,f.Z)("div",{target:"e1xsicpb0"})((({theme:e})=>({borderTop:`1px solid ${e.colors.LineSecondary}`,height:"65vh",overflowY:"hidden",overflowX:"hidden"})),"label:DivRadioWrapper;"),Vt=(0,f.Z)("div",{target:"e1xsicpb1"})((({theme:e})=>({height:"54px",width:"100%",backgroundColor:e.colors.BGView,padding:"16px 24px",color:e.colors.TextSecondary,fontSize:"16px",lineHeight:"22px"})),"label:DivReport;"),qt=(0,f.Z)("div",{target:"e1xsicpb2"})((({theme:e})=>({marginTop:"24px",fontSize:"18px",lineHeight:"24px",height:"24px",padding:"0 24px",color:e.colors.TextPrimary})),"label:DivUTitle;"),Nt=(0,f.Z)("div",{target:"e1xsicpb3"})((({theme:e})=>({marginTop:"10px",fontSize:"16px",lineHeight:"22px",height:"22px",color:e.colors.TextTertiary,padding:"0 24px"})),"label:DivUSubTitle;"),Ht=(0,f.Z)("div",{target:"e1xsicpb4"})((({theme:e})=>({position:"absolute",bottom:"96px",left:"0",width:"100%",fontSize:"14px",lineHeight:"20px",color:e.colors.TextSecondary,padding:"0 24px"})),"label:DivDesc;"),$t=(0,f.Z)("div",{target:"e1xsicpb5"})({marginTop:"12px",padding:"0px 24px"},"label:DivUser;"),Gt=()=>{var e,t,i;const r=(0,m.Q)(),l=(0,n.qj)(s.bg),[d,c]=(0,a.useState)(null),[u,p]=(0,a.useState)(!0),h=(0,n.mp)(s.bg,{selector:e=>{const{UserData:t,reasonsAPIVersion:i}=e;return{UserData:t,reasonsAPIVersion:i}},dependencies:[]}),g=(0,a.useMemo)((()=>{var e,t,i,o,n,a,r;return 3===h.reasonsAPIVersion&&(null===(e=h.UserData)||void 0===e?void 0:e.selectedReason).reason_code?null!==(o=null===(i=null===(t=h.UserData)||void 0===t?void 0:t.selectedReason)||void 0===i?void 0:i.reason_code)&&void 0!==o?o:0:null!==(r=null===(a=null===(n=h.UserData)||void 0===n?void 0:n.selectedReason)||void 0===a?void 0:a.reason_type)&&void 0!==r?r:0}),[h.reasonsAPIVersion]),v=(0,a.useCallback)((e=>{e?(p(!1),c(e)):(p(!0),c(null))}),[]),{region:b="",user:y}=null!==(e=(0,Z.Lh)((()=>["region","user"]),[]))&&void 0!==e?e:{},f=(0,a.useCallback)((e=>{if(e.preventDefault(),e.stopPropagation(),h.UserData.selectedReason&&d){const e={related_username:d.username,related_ttid:d.uid};l.postReport({reason:g,extraData:e,region:b,uid:null==y?void 0:y.uid})}}),[h.UserData.selectedReason,d,l,b,null==y?void 0:y.uid]);let _="";if(h.UserData.HistoryReason){const e=(null===(t=h.UserData.HistoryReason)||void 0===t?void 0:t.length)||2;e>=2&&(_=(null===(i=h.UserData.HistoryReason[e-2])||void 0===i?void 0:i.text)||"")}return(0,o.jsxs)(Wt,{children:[(0,o.jsxs)(Vt,{children:[r("Web_report_reason_select"),_]},void 0),(0,o.jsx)(qt,{children:r("Web_report_account_impersonated")},void 0),(0,o.jsx)(Nt,{children:r("Web_report_account_impersonated_description")},void 0),(0,o.jsx)($t,{children:(0,o.jsx)(zt,{onChange:v},void 0)},void 0),(0,o.jsx)(Ht,{children:r("Web_report_description_tips")},void 0),(0,o.jsx)(re,{children:(0,o.jsx)(le,Object.assign({disabled:u,onClick:f},{children:r("Submit")}),void 0)},void 0)]},void 0)},Kt=(0,f.Z)("div",{target:"e11o6rhn0"})({height:"580px",padding:"0px",overflowY:"auto",overflowX:"hidden",paddingBottom:"84px"},"label:DivKopigContainer;"),Yt=(0,f.Z)("div",{target:"e11o6rhn1"})({display:"flex",flexDirection:"column",alignItems:"stretch",padding:"0px"},"label:DivScrollContainer;"),Qt=(0,f.Z)("div",{target:"e11o6rhn2"})({display:"flex",flexDirection:"row",justifyContent:"center",boxSizing:"border-box",padding:"16px 24px 12px"},"label:DivSectionHeader;"),Jt=(0,f.Z)("div",{target:"e11o6rhn3"})((({theme:e})=>({display:"flex",flexDirection:"row",boxSizing:"border-box",fontSize:"16px",padding:"16px 24px",lineHeight:"22px",color:e.colors.TextSecondary,backgroundColor:e.colors.BGView,marginBottom:"8px"})),"label:DivSectionLine;"),Xt=(0,f.Z)("span",{target:"e11o6rhn4"})((({theme:e})=>({flex:1,fontSize:"18px",lineHeight:"24px",fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.semiBold,color:e.colors.TextPrimary})),"label:SpanSectionTitle;"),ei=(0,f.Z)("span",{target:"e11o6rhn5"})((({theme:e})=>({fontSize:"16px",lineHeight:"22px",color:e.colors.TextSecondary})),"label:SpanWordCount;"),ti=(0,f.Z)("textarea",{target:"e11o6rhn6"})((({theme:e})=>Object.assign(Object.assign({},(e=>({borderStyle:"none",borderColor:"transparent",boxShadow:"none",outline:"none",margin:"0px 24px",borderRadius:"4px",fontSize:"16px",fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.normal,color:e.colors.TextPrimary,":placeholder":{color:e.colors.TextTertiary}}))(e)),{resize:"none",height:"80px",backgroundColor:e.colors.BGPrimary})),"label:TextareaDescription;"),ii=(0,f.Z)("div",{target:"e11o6rhn8"})({margin:"4px 24px"},"label:DivImageUploader;"),oi=(0,f.Z)("div",{target:"e11o6rhn9"})((({theme:e})=>({marginTop:"4px",fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.normal,fontSize:"12px",color:e.colors.Primary})),"label:DivFileSizeWarning;"),ni=(0,a.memo)((function(){var e,t,i,r,l,d,c,u;const p=(0,m.Q)(),h=(0,n.qj)(s.bg),g=(0,n.mp)(s.bg,{selector:e=>{const{UserData:t,PreState:i,reasonsAPIVersion:o}=e;return{UserData:t,PreState:i,reasonsAPIVersion:o}},dependencies:[]}),[v,b]=(0,a.useState)(""),[y,f]=(0,a.useState)([]),[_,x]=(0,a.useState)(!1),[w,k]=(0,a.useState)(!1),{region:C="",user:j}=null!==(e=(0,Z.Lh)((()=>["region","user"]),[]))&&void 0!==e?e:{},S=null===(r=JSON.parse(null!==(i=null===(t=g.UserData.selectedReason)||void 0===t?void 0:t.option)&&void 0!==i?i:"").tags)||void 0===r?void 0:r.includes("requireDesc"),P=null===(c=JSON.parse(null!==(d=null===(l=g.UserData.selectedReason)||void 0===l?void 0:l.option)&&void 0!==d?d:"").tags)||void 0===c?void 0:c.includes("requireImage"),T=(0,a.useMemo)((()=>{var e,t,i,o,n,a,r;return 3===g.reasonsAPIVersion&&(null===(e=g.UserData)||void 0===e?void 0:e.selectedReason).reason_code?null!==(o=null===(i=null===(t=g.UserData)||void 0===t?void 0:t.selectedReason)||void 0===i?void 0:i.reason_code)&&void 0!==o?o:0:null!==(r=null===(a=null===(n=g.UserData)||void 0===n?void 0:n.selectedReason)||void 0===a?void 0:a.reason_type)&&void 0!==r?r:0}),[g.reasonsAPIVersion]);(0,a.useEffect)((()=>{var e,t;(null!==(e=S&&0===v.length)&&void 0!==e?e:P&&(null!==(t=0===y.length)&&void 0!==t?t:_))?k(!1):k(!0)}),[v,y,_]);const I=(0,a.useCallback)((e=>{x(!1);for(const t of e)t.size&&t.size>20971520&&x(!0);f(e)}),[]),O=(0,a.useCallback)((e=>{e.stopPropagation()}),[]),D=(0,a.useCallback)((e=>b(e.target.value)),[]),R=(0,a.useCallback)((e=>{if(e.preventDefault(),e.stopPropagation(),T&&w){const e={report_desc:v,uri:y.map((e=>e.url)).join(",")};h.postReport({reason:T,extraData:e,region:C,uid:null==j?void 0:j.uid})}}),[v,y,T,w,h]);return(0,o.jsxs)(Kt,{children:[(0,o.jsxs)(Yt,{children:[(0,o.jsx)(Jt,{children:`${p("Web_report_reason_select")} ${null===(u=g.UserData.selectedReason)||void 0===u?void 0:u.text}`},void 0),(0,o.jsxs)(Qt,{children:[(0,o.jsx)(Xt,{children:p("Web_report_description")},void 0),(0,o.jsxs)(ei,{children:[v.length,"/",200]},void 0)]},void 0),(0,o.jsx)(ti,{rows:5,maxLength:200,placeholder:p("Please provide as much detail as possible"),value:v,onChange:D,onKeyDown:O},void 0),(0,o.jsxs)(ii,{children:[(0,o.jsx)(Ke,{max:4,onChange:I},void 0),_&&(0,o.jsx)(oi,{children:p("attachment_upload_limit")},void 0)]},void 0)]},void 0),(0,o.jsx)(re,{children:(0,o.jsx)(le,Object.assign({disabled:!w,onClick:R},{children:p("Submit")}),void 0)},void 0)]},void 0)})),ai=(0,a.memo)((function({onClose:e,visible:t=!1}){const i=(0,m.Q)(),{isRTL:r}=(0,g.Y)(),l=(0,n.qj)(s.bg),v=(0,n.mp)(s.bg,{selector:e=>{const{PageState:t,PreState:i}=e;return{PageState:t,PreState:i}},dependencies:[]}),b=(0,a.useCallback)((()=>{e()}),[e]),y=(0,a.useCallback)((()=>{l.resetState()}),[l]),f=(0,a.useCallback)((()=>{l.handlePrevStep()}),[l]),_=i("Report"),x=v.PreState.length>0,w=()=>0===v.PageState?(0,o.jsx)(gt,{},void 0):1===v.PageState?(0,o.jsx)(Ct,{},void 0):5===v.PageState?(0,o.jsx)(kt,{onClose:b},void 0):3===v.PageState?(0,o.jsx)(Gt,{},void 0):2===v.PageState||8===v.PageState?(0,o.jsx)(ct,{},void 0):4===v.PageState?(0,o.jsx)(j,{onClose:b},void 0):6===v.PageState?(0,o.jsx)(Ce,{onClose:b},void 0):7===v.PageState?(0,o.jsx)(ni,{},void 0):void 0,k="undefined"!=typeof document&&document.fullscreenElement;return(0,a.useEffect)((()=>{k&&!t&&l.resetState()}),[l,k,t]),"undefined"!=typeof document&&document.fullscreenElement?(0,o.jsx)(h.u_,Object.assign({parentRef:document.fullscreenElement,visible:t,onClose:b,maskCloseable:6===v.PageState,keyboardCloseable:!1},{children:[0,1,2,3,7].includes(v.PageState)?(0,o.jsxs)(H,Object.assign({"data-e2e":"report-form"},{children:[(0,o.jsxs)(G,Object.assign({isBackable:x},{children:[x&&(0,o.jsx)(K,Object.assign({onClick:f},{children:r?(0,o.jsx)(c.Z,{width:20,height:20},void 0):(0,o.jsx)(u.Z,{width:20,height:20},void 0)}),void 0),(0,o.jsx)(Q,Object.assign({"data-e2e":"report-title"},{children:_}),void 0),(0,o.jsx)(Y,Object.assign({"data-e2e":"report-card-cancel",onClick:b},{children:(0,o.jsx)(p.Z,{width:14,height:14},void 0)}),void 0)]}),void 0),w()]}),void 0):(0,o.jsx)($,Object.assign({"data-e2e":"report-form"},{children:w()}),void 0)}),void 0):(0,o.jsx)(d.AR,Object.assign({compact:!0,isOpen:t,onClose:b,onCloseComplete:y,closeOnBackdropClick:6===v.PageState,closeOnEsc:!1},{children:[0,1,2,3,7,8].includes(v.PageState)?(0,o.jsxs)(H,Object.assign({"data-e2e":"report-form"},{children:[(0,o.jsxs)(G,Object.assign({isBackable:x},{children:[x&&(0,o.jsx)(K,Object.assign({onClick:f},{children:r?(0,o.jsx)(c.Z,{width:20,height:20},void 0):(0,o.jsx)(u.Z,{width:20,height:20},void 0)}),void 0),(0,o.jsx)(Q,Object.assign({"data-e2e":"report-title"},{children:_}),void 0),(0,o.jsx)(Y,Object.assign({"data-e2e":"report-card-cancel",onClick:b},{children:(0,o.jsx)(p.Z,{width:14,height:14},void 0)}),void 0)]}),void 0),w()]}),void 0):(0,o.jsx)($,Object.assign({"data-e2e":"report-form"},{children:w()}),void 0)}),void 0)}));function ri(e){const t=function(t){const i=function({onClose:e}={}){const{hideModal:t}=(0,l.J)(),[i,r]=(0,n.b7)(s.bg,{selector:({showing:e})=>e,dependencies:[]}),d=(0,a.useCallback)((()=>{null==e||e(),t(),r.hideReport()}),[r,t,e]);return(0,o.jsx)(ai,{onClose:d,visible:i},void 0)}();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e,Object.assign({},t),void 0),i]},void 0)};return t.displayName=`WithReport(${(0,r.i)(e)})`,t}},8838:(e,t,i)=>{i.d(t,{PA:()=>o,G2:()=>n,$B:()=>a,xN:()=>r});const o={0:{forceMute:!1,defaultMute:!1},1:{forceMute:!0,defaultMute:!0},2:{forceMute:!1,defaultMute:!1},3:{forceMute:!1,defaultMute:!1},4:{forceMute:!1,defaultMute:!1},6:{forceMute:!1,defaultMute:!1},5:{forceMute:!1,defaultMute:!1}},n=.8,a=.05,r=5},40112:(e,t,i)=>{i.d(t,{Fk:()=>h,Mz:()=>g,s_:()=>v,DZ:()=>b,$v:()=>y,ru:()=>_,A4:()=>x,vN:()=>w});var o=i(9236),n=i(16926),a=i(91051),r=i(26258),l=i(68852),s=i(45949),d=i(38310),c=i(29025),u=i(8838),p=i(11467),m=i(3148);function h({loadingThreshold:e=1e3,isCurrentVideo:t}){const[i,o]=(0,a.useState)(!1),n=(0,a.useRef)(0),r=(0,a.useCallback)((()=>{n.current&&window.clearTimeout(n.current),o(!1)}),[]),l=(0,a.useCallback)((()=>{e?(n.current&&window.clearTimeout(n.current),n.current=window.setTimeout((()=>{o(!0)}),e)):o(!0)}),[e]);return(0,a.useEffect)((()=>(t||(window.clearTimeout(n.current),o(!1)),()=>window.clearTimeout(n.current))),[t]),{loading:i,handleCanPlayWithLoading:r,handlePauseWithLoading:r,handlePlayingWithLoading:r,handleErrorWithLoading:r,handleWaitingWithLoading:l}}function g(){const[e,t]=(0,a.useState)(!0),i=(0,a.useCallback)((()=>{t(!1)}),[]),o=(0,a.useCallback)((()=>{t(!0)}),[]);return(0,a.useEffect)((()=>{const e=(0,s.Y8)(i,o);return()=>{null==e||e()}}),[o,i]),e}function v(e){const[{mute:t,volume:i},n]=(0,o.b7)(l.x,{selector:e=>({mute:e.mute,volume:e.volume}),dependencies:[]}),s=(0,c.il)(),d=(0,a.useCallback)(((t,o="click",a)=>{if(r.$.handleSwitchSound(Object.assign(Object.assign({},a),{muted:t,playMode:e,enter_method:o})),r.$.handleVolumeChange({volume_to:i,click_mute:!0}),m.Bv.setItem("muted",t),n.setMute(t),!t&&0===m.Bv.getItem("volume")){let e=.6;"v2"===s?e=.7:"v3"===s?e=.75:"v4"===s?e=.5:"v5"===s&&(e=.4),m.Bv.setItem("volume",e),n.setVolume(e)}}),[n,e,s,i]);return{mute:t,volume:i,setMute:d}}function b(){const[{mute:e,volume:t},i]=(0,o.b7)(l.x,{selector:e=>({mute:e.mute,volume:e.volume}),dependencies:[]}),n=(0,a.useCallback)(((e,t)=>{m.Bv.setItem("volume",e),i.setVolume(e),0===e?(m.Bv.setItem("muted",!0),i.setMute(!0)):t&&(m.Bv.setItem("muted",!1),i.setMute(!1))}),[i]);return{mute:e,volume:t,setVolume:n}}function y(e){const{setMute:t,setVolume:i}=(0,o.qj)(l.x),n=(0,c.il)();let r=.6;"v2"===n?r=.7:"v3"===n?r=.75:"v4"===n?r=.5:"v5"===n&&(r=.4),(0,a.useEffect)((()=>{var o,n;t(null!==(o=m.Bv.getItem("muted"))&&void 0!==o?o:u.PA[e].defaultMute),i(null!==(n=m.Bv.getItem("volume"))&&void 0!==n?n:r)}),[])}const f="video_playback_error";function _(){const e=(0,n.fz)(p.n);return(0,a.useCallback)((t=>{var i,o,n;const a=null!==(o=null===(i=null==t?void 0:t.nativeEvent)||void 0===i?void 0:i.target)&&void 0!==o?o:null===(n=null==t?void 0:t.nativeEvent)||void 0===n?void 0:n.srcElement;if(a){const{error:{code:t=-1,message:i="Empty message"}={},networkState:o,readyState:n,src:r="",currentTime:l=0}=a;e.emitEvent(f,{code:t},{errorMessage:i,errorCode:t,readyState:n,networkState:o,isXgPlayer:"0"});const s={errorCode:t,errorMessage:i,src:r,currentTime:l,networkState:o,readyState:n};e.captureMessage(`Video playback error: ${JSON.stringify(s)}`,"error")}}),[e])}function x(){const e=(0,n.fz)(p.n);return(0,a.useCallback)((t=>{if(t)try{const{error:i,readyState:o,networkState:n,currentTime:a=0,currentSrc:r=""}=t,{code:l=-1,message:s="Empty message"}=null!=i?i:{};e.emitEvent(f,{code:l},{errorMessage:s,errorCode:String(l),readyState:String(o),networkState:String(n),isXgPlayer:"1"});const d={errorCode:l,errorMessage:s,src:r,currentTime:a,networkState:n,readyState:o,isXgPlayer:!0};e.captureMessage(`Video playback error: ${JSON.stringify(d)}`,"error")}catch(e){}}),[e])}function w(e,t){const i=(0,o.mp)(d.A);return(0,a.useMemo)((()=>e.map((e=>{var o,n,a,r,l,s,d,c;const u=null!==(o=e.id)&&void 0!==o?o:"",p=i[u],m=null!==(a=null===(n=null==p?void 0:p.video)||void 0===n?void 0:n.bitrateInfo)&&void 0!==a?a:[];return m.length>1?m.map((t=>{var i,o,n,a;return{id:null==e?void 0:e.id,url:null!==(o=null===(i=t.PlayAddr)||void 0===i?void 0:i.UrlList)&&void 0!==o?o:null===(n=null==p?void 0:p.video)||void 0===n?void 0:n.playAddr,definition:t.GearName,bitrate:t.Bitrate,duration:null===(a=null==p?void 0:p.video)||void 0===a?void 0:a.duration}})):[{id:null==e?void 0:e.id,url:null===(r=null==p?void 0:p.video)||void 0===r?void 0:r.playAddr,definition:null!==(s=null===(l=m[0])||void 0===l?void 0:l.GearName)&&void 0!==s?s:t,bitrate:null===(d=m[0])||void 0===d?void 0:d.Bitrate,duration:null===(c=null==p?void 0:p.video)||void 0===c?void 0:c.duration}]}))),[t,i,e])}},54006:(e,t,i)=>{i.d(t,{z:()=>s,x:()=>d});var o=i(64047),n=i(9236),a=i(91051),r=i(41140);function l(e,t,i){const{direction:o="ltr",progressRef:n,circleRef:r,barRef:l,seekCallback:s,draggingPercentCb:d,draggingStateCb:c,progressReportCallback:u}=e,p=(0,a.useRef)(0),m=(0,a.useRef)(null),h=(0,a.useCallback)(((e,t="original")=>{if("number"!=typeof e||e!=e)return;const o=Math.min(1,Math.max(0,e));i(o),("dragging"!==t&&"stop"!==t||o!==m.current)&&(null==d||d(o),m.current=o)}),[d,i]),g=(0,a.useCallback)(((e,t="original")=>{if(!r.current||!n.current||!l.current)return;let i;e.stopPropagation(),null==s||s();const a="vertical"===o?n.current.getBoundingClientRect().height:n.current.getBoundingClientRect().width,{x:d,y:c,width:m,height:g}=n.current.getBoundingClientRect();switch(o){case"vertical":i=c+g-e.clientY;break;case"rtl":i=d+m-e.clientX;break;default:i=e.clientX-d}if("start"===t)switch(o){case"vertical":{const e=l.current.getBoundingClientRect().height;p.current=Math.min(1,Math.max(0,e/a));break}default:{const e=l.current.getBoundingClientRect().width;p.current=Math.min(1,Math.max(0,e/a));break}}else{if("stop"===t){const e=Math.min(1,Math.max(0,i/a)),t=p.current;null==u||u(t,e)}h(i/a,t)}}),[r,n,l,s,o,h,u]),v=(0,a.useCallback)(((e,i=!1,o=null)=>{var n;const a=null!==o?o:null!==(n=m.current)&&void 0!==n?n:t,r=a+e;let l;l=r>1||r<0?i?r>1?r-1:r+1:Math.min(1,Math.max(0,a+e)):r,null==u||u(a,l),h(l,"original")}),[t,h,u]),b=(0,a.useCallback)((e=>{null==c||c(!0),e.preventDefault(),g(e,"dragging")}),[c,g]),y=(0,a.useCallback)((e=>{document.removeEventListener("mouseup",y),document.removeEventListener("mousemove",b),g(e,"stop"),null==c||c(!1)}),[c,b,g]);return{bindDrag:(0,a.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),g(e,"start"),document.addEventListener("mouseup",y),document.addEventListener("mousemove",b)}),[g,y,b]),seek:g,seekByDelta:v}}function s(e){const{videoId:t}=e,i=(0,o.__rest)(e,["videoId"]),[{duration:s,videoPercent:d,currentTime:c},{setVideoInfo:u}]=(0,n.b7)(r.M,{selector:e=>e[t]?e[t]:{duration:0,videoPercent:0,currentTime:0},dependencies:[t]}),p=l(i,d,(0,a.useCallback)((e=>u({videoId:t,videoPercent:e,currentTime:s*e,duration:s})),[s,u,t]));return Object.assign(Object.assign({},p),{duration:s,videoPercent:d,currentTime:c,setVideoInfo:u})}function d(e){const{initialPercent:t=0}=e,i=(0,o.__rest)(e,["initialPercent"]),[n,r]=(0,a.useState)(t),s=l(i,n,r);return Object.assign(Object.assign({},s),{percent:n,update:r})}},78772:(e,t,i)=>{i.d(t,{kw:()=>d,K$:()=>c,S1:()=>u,g7:()=>p,FU:()=>m});var o=i(9236),n=i(29025),a=i(38310),r=i(11968),l=i(35892),s=i(33642);const d=e=>void 0!==(null==e?void 0:e.imagePost),c=e=>{var t,i;const o=d(e);return{aweme_type:o?150:0,pic_cnt:o?null===(i=null===(t=null==e?void 0:e.imagePost)||void 0===t?void 0:t.images)||void 0===i?void 0:i.length:void 0}},u=e=>{const{shouldUseAds:t}=(0,n.Ny)(),i=(0,s.m7)((0,o.mp)(a.A,{selector:t=>t[e],dependencies:[e]}));if(!t)return{};const{isTT4BAds:r=!1}=(0,s.m7)(i);return{isAds:r?1:0,adsType:r?"in_feed_ads":void 0}},p=(e,t)=>{const{currentCategory:i}=(0,o.mp)(r.F);return 19!==t?null:{enter_method:"category_video_display",enter_tab:i,diversify_id:null==e?void 0:e.diversificationId}},m=e=>{var t;const i=(0,l.g)(e),{width:o,height:n,duration:a}=null!==(t=null==i?void 0:i.video)&&void 0!==t?t:{};return{video_width:o,video_height:n,video_duration:a}}},16134:(e,t,i)=>{i.d(t,{j:()=>c});var o=i(31223),n=i.n(o);const a="object"==typeof HTMLElement?function(e){return e instanceof HTMLElement}:function(e){return e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},r=[],l=[];let s;function d(e,t){var i;let o;const{defaultView:n}=e.ownerDocument;let a=t;return(null==n?void 0:n.getComputedStyle)?(a=t.replace(/([A-Z])/g,"-$1").toLowerCase(),n.getComputedStyle(e,null).getPropertyValue(a)):e.currentStyle?(a=t.replace(/-(\w)/g,(function(e,t){return t.toUpperCase()})),o=null===(i=e.currentStyle)||void 0===i?void 0:i[a],o):""}const c={bind:function(e,t){if(a(e))if("undefined"!=typeof ResizeObserver){const i=new ResizeObserver(t);i.observe(e),l.push({el:e,observer:i})}else{const i={el:e,callback:t,style:{width:d(e,"width"),height:d(e,"height")}};r.push(i),s||(s&&clearInterval(s),s=setInterval((function(){var e;for(const t of r){const i=t.el,o={width:d(i,"width"),height:d(i,"height")};n()(o,t.style)||(t.style={width:o.width,height:o.height},null===(e=t.callback)||void 0===e||e.call(t))}}),200))}},remove:function(e,t){if("undefined"==typeof ResizeObserver){for(let i=0;i<r.length;i++)if(r[i].el===e&&r[i].callback===t){r.splice(i,1);break}0===r.length&&(s&&clearInterval(s),s=null)}else for(let t=0;t<l.length;t++)if(l[t].el===e){l[t].observer.unobserve(e),l[t].observer.disconnect(),l.splice(t,1);break}}}},48581:(e,t,i)=>{i.d(t,{s:()=>o});const o=()=>({filter:"drop-shadow(0px 1px 1px rgba(0 0 0 / 12%))"})},96082:(e,t,i)=>{i.d(t,{mB:()=>o,xo:()=>n,Yr:()=>r,YV:()=>l});const o=e=>10229===e||10230===e,n=e=>isNaN(e)?"00:00":`${`0${Math.floor(e/60%60)}`.slice(-2)}:${`0${Math.floor(e%60)}`.slice(-2)}`,a=new Map([[2,"adapt_lowest_1080p"],[3,"adapt_lower_1080p"],[4,"adapt_1080p"],[7,"adapt_lowest_1440p"],[10,"normal_720p"],[11,"low_720p"],[12,"adapt_high_720p"],[13,"adapt_higher_720p"],[14,"adapt_lower_720p"],[15,"adapt_lowest_720p"],[16,"higher_720p"],[17,"highest_720p"],[18,"adapt_720p"],[19,"adapt_low_720p"],[191,"lower_720p"],[20,"normal_540p"],[21,"adapt_lower_540p"],[22,"adapt_high_540p"],[23,"adapt_higher_540p"],[24,"lower_540p"],[25,"lowest_540p"],[26,"higher_540p"],[27,"highest_540p"],[28,"adapt_540p"],[29,"adapt_lowest_540p"],[291,"adapt_low_540p"],[30,"normal_480p"],[31,"low_480p"],[32,"high_480p"],[33,"medium_480p"],[34,"lower_480p"],[35,"lowest_480p"],[36,"higher_480p"],[37,"highest_480p"],[38,"adapt_480p"],[39,"adapt_lower_480p"],[391,"adapt_high_480p"],[40,"normal_360p"],[41,"low_360p"],[42,"high_360p"],[43,"medium_360p"],[44,"lower_360p"],[45,"lowest_360p"],[46,"higher_360p"],[47,"highest_360p"],[48,"adapt_360p"],[49,"adapt_lowest_360p"],[50,"adapt_high_360p"]]),r=(e,t)=>{if(!e)return t;if(String(e).indexOf("xgpreload_config")>-1)return e;if(!a.has(Number(e))){const t=String(e).match(/^([a-zA-Z]*)+_([0-9]+)_0$/i);return t?`${t[1]}_${t[2]}p`:`unknown_${e}`}return a.get(Number(e))},l=e=>{const t=null==e?void 0:e.find((e=>{var t;const i=Math.floor((new Date).getTime()/1e3);return("1"===e.Version||"3"===e.Version)&&(null!==(t=null==e?void 0:e.UrlExpire)&&void 0!==t?t:0)>i}));return null==t?void 0:t.Url}},64157:(e,t,i)=>{i.d(t,{Q:()=>U});var o=i(11040),n=i(74820),a=i(91051),r=i(19813),l=i(55198),s=i(32273),d=i(37384),c=i(21041),u=i(45313),p=i(29025),m=i(33642),h=i(99297),g=i(76126),v=i(68191);const b=(0,v.Z)("span",{target:"efbd9f0"})({fontWeight:400},"label:SpanText;");var y;!function(e){e[e.User=0]="User",e[e.Challenge=1]="Challenge"}(y||(y={}));const f=(e,t,i={})=>(0,o.jsx)(b,Object.assign({style:i},{children:e}),e+t),_={fontWeight:700},x={fontWeight:600},w={},k=(0,a.memo)((e=>{const{item:t,DuetComp:i,LinkComp:n,QuestionComp:a,target:r="_self",renderText:l=f,shouldReport:s,reportParams:d,styleType:h,mode:v,textExtra:b,desc:y}=e,k=(0,c.TH)(),C=(0,p.F3)();if(!y)return null;const{authorId:j,id:S}=(0,m.m7)(t);let P=w;switch(h){case"kep":P=_;break;case"explore":P=x;break;default:P=w}return(null==b?void 0:b.length)?(0,o.jsx)(o.Fragment,{children:[...b].sort(((e,t)=>e.start-t.start)).reduce(((t,c,p,m)=>{const{start:b,end:f,awemeId:_,userUniqueId:x,hashtagName:w,type:T,subType:I,userId:O,hashtagId:D,questionId:R="",questionContent:M=""}=c,L=0===p?0:m[p-1].end,B=b,F=y.substring(L,B);F&&t.push(l(F,t.length-1,P));const E=7===(Z=I)||5===Z;var Z;const A=y.substring(b,f);if(0===T&&E){const i=(0,g.C)({to:{pathname:(0,u._9)({questionId:R,questionContent:M})},location:k});t.push((0,o.jsx)(a,{href:i,text:null!=x?x:"",index:t.length-1,id:R,type:"question",target:r,authorId:j,groupId:S,shouldReport:s,reportParams:d,styleType:"question",inline:"compact"===v,onLinkClick:e.onLinkClick,onSearchResultClick:e.onSearchResultClick},A+p))}else if(0===T&&_){const n=(0,g.C)({to:{pathname:(0,u.fH)({uniqueId:null!=x?x:"",videoId:_})},location:k});t.push((0,o.jsx)(i,{href:n,text:A,index:t.length-1,id:_,type:"video",target:r,authorId:j,groupId:S,shouldReport:s,reportParams:d,styleType:"duet",onLinkClick:e.onLinkClick,onSearchResultClick:e.onSearchResultClick},A+p))}else if(0===T&&O){const i=(0,g.C)({to:{pathname:(0,u.yl)({uniqueId:null!=x?x:""})},location:k});t.push((0,o.jsx)(n,{href:i,text:A,index:t.length-1,id:O,type:"user",target:r,authorId:j,groupId:S,shouldReport:s,reportParams:d,styleType:h,ariaLabel:`Watch more videos from user ${A}`,onLinkClick:e.onLinkClick,onSearchResultClick:e.onSearchResultClick,shouldHighlight:C},A+p))}else if(1===T&&w){const i=(0,g.C)({to:{pathname:(0,u.JD)({tagName:w})},location:k});t.push((0,o.jsx)(n,{href:i,text:A,index:t.length-1,id:null!=D?D:"",type:"tag",target:r,authorId:j,groupId:S,shouldReport:s,reportParams:d,styleType:h,ariaLabel:`Watch more videos of the ${A} category`,onLinkClick:e.onLinkClick,onSearchResultClick:e.onSearchResultClick,shouldHighlight:C},A+p))}else t.push(l(A,t.length-1,P));return p===m.length-1&&t.push(l(y.substring(f),t.length,P)),t}),[])},void 0):l(y,0,P)})),C=(0,a.memo)((e=>{const{item:t}=e,{desc:i,contents:n=[],textExtra:r}=(0,m.m7)(t),l=n.length,s=(0,h.Sf)("support_multiline_desc");return i?s&&0!==n.length?(0,o.jsx)(o.Fragment,{children:n.map(((t,n)=>(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)(k,Object.assign({},e,{desc:t.desc,textExtra:t.textExtra}),void 0),n!==l-1&&(0,o.jsx)("br",{},void 0)]},`${n}-${i}`)))},void 0):(0,o.jsx)(k,Object.assign({},e,{desc:i,textExtra:r}),void 0):null}));var j=i(22743),S=i(36488),P=i(97186);const T="inline-block",I="break-word",O=(0,v.Z)("div",{target:"ejg0rhn0"})((({ellipsis:e,ellispsisLine:t,theme:i,theme:{direction:o,colors:n},styleType:a})=>[Object.assign(Object.assign({},i.typography.P2),{wordBreak:I}),e?(0,S.f1)({max:479,style:S.wj}):null,t?1===t?[S.wj,(0,S.YJ)({direction:o,display:"-webkit-box",WebkitLineClamp:"1",WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"pre-line"})]:(0,S.FC)(t):null,"tag"===a||"question"===a?[(0,S.GI)({theme:i,fontFamily:"Proxima",fontWeight:"semiBold"}),{lineHeight:"22px",color:n.TextPrimary,pointerEvents:"none","a:hover":[{textDecoration:"none"},(0,S.YJ)({direction:o,display:T,verticalAlign:"top",maxWidth:"100%"})],strong:{wordBreak:I,fontWeight:600}}]:null]),"label:DivContainer;"),D=(0,v.Z)("h1",{target:"ejg0rhn1"})((({ellipsis:e,ellispsisLine:t,theme:i,theme:{direction:o,colors:n},styleType:a})=>[Object.assign(Object.assign({},i.typography.P2),{wordBreak:I}),e?(0,S.f1)({max:479,style:S.wj}):null,t?1===t?[S.wj,(0,S.YJ)({direction:o,display:"-webkit-box",WebkitLineClamp:"1",WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"pre-line"})]:(0,S.FC)(t):null,"tag"===a||"question"===a?[(0,S.GI)({theme:i,fontFamily:"Proxima",fontWeight:"semiBold"}),{lineHeight:"22px",color:n.TextPrimary,pointerEvents:"none","a:hover":[{textDecoration:"none"},(0,S.YJ)({direction:o,display:T,verticalAlign:"top",maxWidth:"100%"})],strong:{wordBreak:I,fontWeight:600}}]:null]),"label:H1Container;"),R=(0,v.Z)("strong",{target:"ejg0rhn2"})((({theme:e,styleType:t="",color:i=""})=>({fontWeight:"kep"===t?e.fontWeights.bold:e.fontWeights.semiBold,color:i})),"label:StrongText;"),M=(0,v.Z)(j.Z,{target:"ejg0rhn3"})((({theme:{direction:e}})=>[{position:"absolute",top:"50%",marginTop:"-8px"},(0,S.YJ)({direction:e,start:"5px"})]),"label:StyledPlayFill;"),L=(0,v.Z)(P.v,{shouldForwardProp:e=>"styleType"!==e&&"inline"!==e,target:"ejg0rhn4"})((({styleType:e,inline:t,theme:{direction:i,colors:o}})=>[{background:o.BGPlaceholderDefault,display:t?"inline":T,padding:"1px 5px",position:"relative"},"tag"===e&&[{display:"initial",whiteSpace:"nowrap",fontSize:"14px",lineHeight:"20px"},(0,S.YJ)({direction:i,paddingStart:25})],("duet"===e||"question"===e)&&(0,S.YJ)({direction:i,paddingStart:25}),"kep"===e&&[{fontWeight:700}]]),"label:StyledLink;"),B=(0,v.Z)(P.v,{target:"ejg0rhn5"})((({shouldBreak:e=!1,shouldInline:t=!1})=>[{display:e||t?"inline":T,"&:focus-visible":{display:"inline"}},e?{wordBreak:"break-all"}:null]),"label:StyledCommonLink;");function F({type:e,id:t,authorId:i,groupId:o,text:n,isDuet:l,reportParams:s,shouldReport:d,onSearchResultClick:c}){return(0,a.useCallback)((a=>{if(a.stopPropagation(),d)switch(e){case"tag":r.W.handleEnterTagDetail(Object.assign(Object.assign({},s),{tag_id:t,author_id:i,group_id:o,enter_method:l?"click_duet":"click_caption"})),null==c||c("tag");break;case"user":r.W.handleEnterUser(Object.assign(Object.assign({},s),{to_user_id:t,author_id:i,group_id:o,enter_method:l?"click_duet":"click_caption",to_user_name:n.substr(1)})),null==c||c("person");break;case"video":r.W.handleEnterVideo(Object.assign(Object.assign({},s),{author_id:i,group_id:o,to_group_id:t,enter_method:l?"click_duet":"click_caption"}));break;case"question":r.W.handleEnterQuestion(Object.assign(Object.assign({},s),{author_id:i,group_id:o,question_id:t,enter_method:"click_anchor"}))}}),[d,e,t,i,o,l,s,c,n])}const E=e=>{const{href:t,text:i,index:r,id:l,type:s,target:d="_self",reportParams:c,shouldReport:u=!0,styleType:p,authorId:m,groupId:h,hasSpace:g=!0,onLinkClick:v,onSearchResultClick:b}=e,y=F({type:s,id:l,text:i,isDuet:!0,reportParams:c,shouldReport:u,authorId:m,groupId:h,onSearchResultClick:b}),f=(0,a.useCallback)((e=>{y(e),null==v||v(e,t)}),[y,t,v]),{colors:_}=(0,n.u)();return(0,o.jsxs)(L,Object.assign({to:t,target:d,rel:"opener",onClick:f,styleType:p},{children:[(0,o.jsx)(M,{fill:_.Primary2,width:16,height:16,styleType:p},void 0),(0,o.jsxs)(R,{children:[i,g?" ":""]},void 0)]}),i+r)},Z=e=>{const{href:t,text:i,index:r,id:d,type:c,target:u="_self",reportParams:p,shouldReport:m=!0,styleType:h,inline:g,authorId:v,groupId:b,onLinkClick:y,onSearchResultClick:f}=e,_=(0,s.Q)(),x=F({type:c,id:d,text:i,isDuet:!1,reportParams:p,shouldReport:m,authorId:v,groupId:b,onSearchResultClick:f}),w=(0,a.useCallback)((e=>{if(!d)return e.preventDefault(),l.h.destroy(),void l.h.open({content:_("qapage_webapp_error_title"),duration:3,widthType:"padding"});x(e),null==y||y(e,t)}),[x,t,d,y,_]),{colors:k}=(0,n.u)();return(0,o.jsxs)(L,Object.assign({"data-e2e":"question-video-anchor",to:t,target:u,rel:"opener",onClick:w,styleType:h,inline:g},{children:[(0,o.jsx)(M,{fill:k.Primary2,width:16,height:16,styleType:h},void 0),(0,o.jsx)(R,{children:i},void 0)]}),i+r)},A=e=>{const{href:t,text:i,index:r,id:l,type:s,target:d="_self",authorId:c,groupId:u,reportParams:p,shouldReport:m=!0,hasSpace:h=!0,styleType:g,ariaLabel:v,onLinkClick:b,onSearchResultClick:y,shouldHighlight:f}=e,_=(0,a.useRef)(null),x=(0,n.u)(),w=F({type:s,id:l,authorId:c,groupId:u,text:i,isDuet:!1,reportParams:p,shouldReport:m,onSearchResultClick:y}),k=(0,a.useCallback)((e=>{w(e),null==b||b(e,t,"hashtag")}),[w,t,b]),C=(0,a.useCallback)((e=>{var t;13===e.keyCode&&(e.preventDefault(),e.stopPropagation(),null===(t=_.current)||void 0===t||t.click())}),[]);return(0,o.jsx)(B,Object.assign({to:t,target:d,rel:"opener",onClick:k,onKeyDown:C,ref:_,ariaLabel:v,shouldInline:"explore"===g,shouldBreak:"channel-break"===g},{children:(0,o.jsxs)(R,Object.assign({styleType:g,color:f?x.colors.AssistColorAzure:void 0},{children:[i,h?" ":""]}),void 0)}),`${i}${r}`)},U=(0,a.memo)((function(e){const{item:t,ellispsisLine:i=0,ellipsisOnNarrow:n=!1,e2eTag:a,shouldReport:r=!0,reportParams:l,mode:s,target:c="_self",styleType:u="default",style:p={},wrapInContainer:m=!0}=e,h=(0,d.Y)(),g=()=>(0,o.jsx)(C,{mode:s,item:t,DuetComp:E,LinkComp:A,QuestionComp:Z,reportParams:l,shouldReport:r,styleType:u,target:c,onLinkClick:e.onLinkClick,onSearchResultClick:e.onSearchResultClick},void 0);return m?h?(0,o.jsx)(D,Object.assign({style:p,ellipsis:n,ellispsisLine:i,styleType:u,"data-e2e":a},{children:g()}),void 0):(0,o.jsx)(O,Object.assign({style:p,ellipsis:n,ellispsisLine:i,styleType:u,"data-e2e":a},{children:g()}),void 0):(0,o.jsx)(C,{mode:s,item:t,DuetComp:E,LinkComp:A,QuestionComp:Z,reportParams:l,shouldReport:r,styleType:u,onLinkClick:e.onLinkClick,onSearchResultClick:e.onSearchResultClick},void 0)}))},22143:(e,t,i)=>{i.d(t,{B:()=>h});var o=i(91051),n=i(32667),a=i(32370),r=i(11040),l=i(28327),s=i(68191),d=i(52546);const c=(0,s.Z)("div",{target:"exhfy940"})({pointerEvents:"none",position:"fixed",zIndex:1e3},"label:DivDoubleTapContainer;"),u=(0,l.F4)({"0%":{opacity:"1",transform:"scale(1.18)"},"14%":{opacity:"1",transform:"scale(.9)"},"21%":{opacity:"1",transform:"scale(1)"},"58%":{opacity:"1",transform:"scale(1)"},"100%":{opacity:"0",transform:"scale(1.93)"}}),p=(0,s.Z)(d.Z,{target:"exhfy941"})({animation:`${u} 1400ms`,width:"120px",height:"120px"},"label:StyledLikeIcon;"),m=function({x:e,y:t}){const i=Math.floor(61*Math.random()-30);return(0,r.jsx)(c,Object.assign({style:{left:e-60,top:t-60,transform:`rotate(${i}deg)`}},{children:(0,r.jsx)(p,{},void 0)}),void 0)};class h{constructor(e,t){this.x=e,this.y=t,this.el=document.createElement("div")}emit(){var e;try{(null!==(e=document[null===a.H||void 0===a.H?void 0:a.H.fullscreenElement])&&void 0!==e?e:document.body).appendChild(this.el),(0,n.render)((0,o.createElement)(m,{x:this.x,y:this.y}),this.el),window.setTimeout((()=>{this.destroy()}),1400)}catch(e){console.error(e)}}destroy(){var e;try{(0,n.unmountComponentAtNode)(this.el),(null!==(e=document[null===a.H||void 0===a.H?void 0:a.H.fullscreenElement])&&void 0!==e?e:document.body).removeChild(this.el)}catch(e){console.error(e)}}}},38863:(e,t,i)=>{i.d(t,{p:()=>y});var o=i(11040),n=i(91051),a=i(32273),r=i(45949),l=i(16134),s=i(29025),d=i(97751),c=i(68191),u=i(36488);const p=(0,c.Z)("div",{target:"e1mzilcj0"})((({needPaddingBottom:e})=>({display:"flex",width:"100%",overflow:"hidden",position:"relative",paddingBottom:e?"26px":"unset"})),"label:DivWrapper;"),m=(0,c.Z)("div",{target:"e1mzilcj1"})((({lineClamp:e,lineHeight:t,marginTop:i,theme:{colors:o}})=>({width:"100%",overflow:"hidden",textOverflow:"ellipsis",display:"box",WebkitLineClamp:e,WebkitBoxOrient:"vertical",span:{display:"inline"},"*":{fill:o.Primary2},":before":{content:'""',height:`calc(100% - ${t}px)`,float:"right",width:0,marginTop:`${i}px`}})),"label:DivText;"),h=(0,c.Z)("button",{target:"e1mzilcj2"})((({theme:e})=>[(0,u.GI)({theme:e,typography:"P2",fontWeight:"semiBold",color:"TextPrimary"}),{border:"none",outline:"none",background:"none",cursor:"pointer"}]),"label:ButtonExpand;"),g=(0,c.Z)(h,{target:"e1mzilcj3"})((({isMobileUiOptStage2:e,theme:{direction:t}})=>[(0,u.YJ)({direction:t,end:e?"0":"",start:e?"":"0"}),{position:"absolute",bottom:0,padding:0}]),"label:StyledButtonBottom;"),v=(0,c.Z)("div",{target:"e1mzilcj4"})((({isMobileUiOptStage2:e,btnShow:t,lineHeight:i,theme:{direction:o}})=>[{float:"rtl"===o?"left":"right",clear:"both",cursor:"pointer",display:t?"flex":"none",alignItems:"center",lineHeight:`${i}px`},e&&{position:"relative",bottom:"1px"}]),"label:DivBtnWrapper;"),b=(0,c.Z)("div",{target:"e1mzilcj5"})((({isUnfold:e,maxHeight:t})=>e?{overflowY:"auto",maxHeight:t,scrollbarWidth:"none","::-webkit-scrollbar":{width:4}}:{}),"label:DivOverflowContainer;"),y=(0,n.memo)((({children:e,lineClamp:t=2,overflowLineNum:i=0,onlyKey:c="",maxLine:u=999,btnOnClick:y,lineHeight:f=22,fontSize:_,showExpandButton:x=!0,btnStyle:w,expandBtnText:k})=>{const C=(0,a.Q)(),[j,S]=(0,n.useState)(!1),[P,T]=(0,n.useState)(!1),[I,O]=(0,n.useState)(t),[D,R]=(0,n.useState)("unset"),[M,L]=(0,n.useState)(!1),{isMobileUiOptStage2:B,isFypDescriptionOpt:F,shouldDescription60:E}=(0,s.HJ)(),Z=(0,n.useRef)(null),A=(0,n.useRef)(null),U=(0,n.useCallback)((()=>{setTimeout((()=>{var e,i,o,n,a,r,l;if(null==Z?void 0:Z.current)if(P)R("unset"),(null!==(a=null===(n=A.current)||void 0===n?void 0:n.scrollHeight)&&void 0!==a?a:0)>(null!==(l=null===(r=A.current)||void 0===r?void 0:r.clientHeight)&&void 0!==l?l:0)&&L(!0);else{const n=null!==(e=Z.current.scrollHeight)&&void 0!==e?e:0,a=null!==(i=Z.current.clientHeight)&&void 0!==i?i:0,r=null!==(o=Z.current.offsetHeight)&&void 0!==o?o:0;L(!1);const l=n-a>15||n>=f*t+15||r>=f*t+15;S(l),l&&R(t*f+"px")}}),0)}),[P,f,t]),z=(0,n.useCallback)((e=>{(0,r.NS)(e),O((e=>e===t?u:t)),T((e=>!e)),y&&y(P)}),[y,P,t,u]),W=(0,n.useMemo)((()=>_?(f-_)/2:0),[_,f]);(0,n.useEffect)((()=>(Z.current&&l.j.bind(Z.current,U),()=>{Z.current&&l.j.remove(Z.current,U)})),[U]);const V=C(P?"pc_web_less_btn":"pc_web_more_btn");(0,n.useEffect)((()=>{T(!1),O(t),S(!1),U()}),[c]);let q=f*i+"px";E&&(q="42vh");const N=P&&i>0,H=null!=k?k:V;return(0,o.jsxs)(p,Object.assign({needPaddingBottom:N},{children:[(0,o.jsxs)(m,Object.assign({isUnfold:P,ref:Z,lineClamp:I,lineHeight:f,marginTop:W,style:{maxHeight:D}},{children:[(0,o.jsx)(v,Object.assign({btnShow:j,lineHeight:f,isMobileUiOptStage2:B},{children:x&&!N&&(0,o.jsx)(h,Object.assign({style:w,type:"button",onClick:z},{children:H}),void 0)}),void 0),i>0?(0,o.jsx)(b,Object.assign({lineClamp:t,ref:A,isUnfold:P,maxHeight:q,isMobileUiOptStage2:B,className:P&&F&&M?d.j0:""},{children:e}),void 0):e]}),void 0),N&&(0,o.jsx)(g,Object.assign({style:w,type:"button",onClick:z,isMobileUiOptStage2:B},{children:H}),void 0)]}),void 0)}))},23479:(e,t,i)=>{i.d(t,{_:()=>C});var o,n=i(64047),a=i(11040),r=i(74820),l=i(91051),s=i(59976),d=i(19813),c=i(45313),u=i(32273),p=i(45949),m=i(87930),h=i(90525),g=i(97186),v=i(68191),b=i(1009),y=i(36488);!function(e){e[e.OneColumn=0]="OneColumn",e[e.BrowserMode=1]="BrowserMode",e[e.KEP=2]="KEP",e[e.OnColumnWithAds=3]="OnColumnWithAds",e[e.VideoDetail=4]="VideoDetail",e[e.Channel=5]="Channel"}(o||(o={}));const f={0:e=>[(0,y.GI)({theme:e,typography:"P2",fontWeight:"semiBold"}),{marginTop:"4px",marginBottom:"12px"},(0,y.f1)({max:767,style:{maxWidth:"250px"}})],3:e=>[(0,y.GI)({theme:e,typography:"P2",fontWeight:"semiBold"}),{marginTop:"4px",marginBottom:"12px"},(0,y.f1)({max:767,style:{maxWidth:"250px"}}),{"a:link, a:active, a:visited, a:hover":{color:"#E95730"}}],1:e=>[(0,y.GI)({theme:e,typography:"P2",fontFamily:"Proxima",fontWeight:"bold"}),{marginTop:"10px",marginBottom:"16px",flex:"0 0 auto"}],4:e=>[(0,y.GI)({theme:e,typography:"P2",fontFamily:"Proxima",fontWeight:"normal"}),{marginTop:"10px",marginBottom:"16px",flex:"0 0 auto"}],2:e=>[(0,y.GI)({theme:e,typography:"P3",fontFamily:"Proxima",fontWeight:"normal"}),{display:"inline",color:e.colors.TextSecondary},{a:{color:e.colors.TextSecondary}},(0,y.YJ)({direction:e.direction,marginStart:12})],5:e=>[(0,y.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",color:"TextPrimary"}),{fontSize:"17px",lineHeight:"20px",display:"inline-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginTop:"8px"}]},_=(0,v.Z)("h4",{target:"epjbyn0"})((({styleType:e,theme:t})=>f[e](t)),"label:H4Link;"),x={0:{marginRight:"5px"},1:{marginRight:"8px"},2:{marginRight:"4px"},4:{marginRight:"4px"},5:{marginRight:"7px"}},w=(0,v.Z)("div",{target:"epjbyn1"})((({theme:{direction:e}})=>[{transform:"translateY(2px)",display:"inline-block"},(0,y.YJ)({direction:e,marginEnd:"5px"})]),"label:DivWrapper;"),k=(0,v.Z)(b.Z,{target:"epjbyn2"})((({styleType:e,theme:{direction:t}})=>[{transform:"translateY(4px)"},(0,y.YJ)({direction:t,marginEnd:x[e].marginRight})]),"label:StyledIcon;"),C=(0,l.memo)((function(e){var t,i,o,v,{item:b,styleType:y,e2eTag:f,teaParams:x={},onLinkClick:C,isTT4BAds:j=!1,target:S="_self"}=e,P=(0,n.__rest)(e,["item","styleType","e2eTag","teaParams","onLinkClick","isTT4BAds","target"]);const{music:T,id:I,authorId:O}=null!=b?b:{},D=null!==(t=null==T?void 0:T.title)&&void 0!==t?t:"",R=null!==(i=null==T?void 0:T.authorName)&&void 0!==i?i:"",M="Promoted Music"===D?D:D.replace(`- ${R}`,"")+(R?` - ${R}`:""),L=j?"":(0,c.MB)({musicId:null!==(o=null==T?void 0:T.id)&&void 0!==o?o:"",musicName:null!==(v=null==T?void 0:T.title)&&void 0!==v?v:""}),B=(0,u.Q)(),{openAdsHandler:F}=(0,h.m)(3,"hyperlink","one_column"),E=(0,l.useRef)(null),Z=(0,l.useCallback)((e=>{if(j)return(0,p.NS)(e),void F();d.W.handleEnterMusicDetail(Object.assign(Object.assign({},x),{music_id:null==T?void 0:T.id,group_id:I,author_id:O,enter_method:"click_caption"})),null==C||C(e,L,"music")}),[j,x,null==T?void 0:T.id,I,O,C,L,F]),A=(0,l.useCallback)((e=>{var t;13===e.keyCode&&(e.preventDefault(),e.stopPropagation(),Z(e),null===(t=E.current)||void 0===t||t.click())}),[Z]),{colors:U}=(0,r.u)(),z=[1,4].includes(y);return T||j?(0,a.jsx)(_,Object.assign({styleType:y,"data-e2e":f},{children:(0,a.jsxs)(g.v,Object.assign({target:S,to:L,replace:z,onClick:Z,onKeyDown:A,ref:E,rel:"opener",ariaLabel:`Watch more videos with music ${M}`},P,{children:[j?(0,a.jsx)(w,{children:(0,a.jsx)(s.Z,{color:"#E95730",fontSize:"14px"},void 0)},void 0):(0,a.jsx)(k,{fill:U.Primary2,styleType:y},void 0),j?B("pcad_share_body"):M]}),void 0)}),void 0):(0,m.G)(["music"])}))},39043:(e,t,i)=>{i.d(t,{C:()=>b});var o,n=i(11040),a=i(91051),r=i(21041),l=i(95872);!function(e){e.ClickPartnershipTag="click_partnership_tag"}(o||(o={}));var s=i(19813),d=i(45313),c=i(32273),u=i(76126),p=i(97186),m=i(58854),h=i(68191),g=i(36488);const v=(0,h.Z)("p",{target:"ejymp3n0"})((({theme:e,theme:{colors:t},isMobile:i,isGray:o})=>i?[(0,g.GI)({theme:e,fontFamily:"Proxima",typography:"P3"}),{display:"inline-block",alignSelf:"flex-start",marginTop:"-4px",marginBottom:"8px",fontSize:"15px",fontWeight:400},o?{padding:"1px 5px",background:"rgba(255, 255, 255, 0.34)",borderRadius:"2px",fontWeight:600,textShadow:"0 0 16px rgba(0, 0, 0, .34)"}:null]:[(0,g.GI)({theme:e,fontFamily:"Proxima",typography:"P2"}),{display:"inline-block",alignSelf:"flex-start",marginTop:"8px",marginBottom:"unset",fontSize:"16px",fontWeight:400},o?{padding:"1px 4px",background:t.BGPlaceholderDefault,borderRadius:"2px",color:t.TextTertiaryAlt,fontWeight:600}:null]),"label:PPaidPartnership;"),b=(0,a.memo)((function({item:e,style:t,target:i="_self"}){var o,h;const g=(0,c.Q)(),{isMobile:b}=null!==(o=(0,m.h)((()=>["isMobile"]),[]))&&void 0!==o?o:{},y=(0,a.useCallback)((()=>{var t,i,o,n,a;a={group_id:null!==(t=e.id)&&void 0!==t?t:"",author_id:null!==(i=e.authorId)&&void 0!==i?i:"",partnership_tag:null!==(o=e.BAInfo)&&void 0!==o?o:""},l.W.event("click_partnership_tag",a),s.W.handleEnterUser({to_user_name:null!==(n=e.BAInfo)&&void 0!==n?n:"",enter_method:"click_partnership_tag"})}),[e.id,e.authorId,e.BAInfo]),f=(0,r.TH)(),_=(0,u.C)({to:{pathname:(0,d.yl)({uniqueId:null!==(h=null==e?void 0:e.BAInfo)&&void 0!==h?h:""})},location:f});return 2===(null==e?void 0:e.adLabelVersion)?(null==e?void 0:e.BAInfo)?(0,n.jsx)(p.v,Object.assign({target:i,rel:"opener",to:_,onClick:y,style:{textDecoration:"none",color:"inherit"}},{children:(0,n.jsx)(v,Object.assign({isMobile:b,isGray:!0,style:t},{children:`${g("bc_new_disclosure")} @${null==e?void 0:e.BAInfo}`}),void 0)}),void 0):(0,n.jsx)(v,Object.assign({isMobile:b,isGray:!0,style:t},{children:g("bc_new_disclosure")}),void 0):null}))},21269:(e,t,i)=>{i.d(t,{G:()=>v});var o,n,a=i(11040),r=i(91051),l=i(95872);!function(e){e.CapCutAnchorShow="multi_anchor_entrance_show",e.CapCutAnchorClick="multi_anchor_entrance_click"}(o||(o={})),function(e){e.OneColumn="one_column",e.BrowserMode="browser_mode",e.VideoDetail="video_detail",e.VideoAnchor="video_anchor",e.CommentAnchor="comment_anchor",e.ClickCaption="click_caption"}(n||(n={}));var s=i(33642),d=i(68191),c=i(36488);const u={0:600,2:700,4:400},p=(0,d.Z)("div",{target:"e1t3ukaq0"})({height:"26px",marginTop:"4px"},"label:DivCapCutAnchor;"),m=(0,d.Z)("img",{target:"e1t3ukaq1"})({width:"24px",height:"24px",objectFit:"cover"},"label:ImgLogo;"),h=(0,d.Z)("a",{target:"e1t3ukaq2"})({display:"inline-flex",alignItems:"center",textDecoration:"none",":hover":{textDecoration:"none"}},"label:ACapCutLink;"),g=(0,d.Z)("p",{target:"e1t3ukaq3"})((({theme:{direction:e,colors:t},playMode:i})=>[{fontSize:"16px",fontWeight:u[i],backgroundColor:t.BGPlaceholderOpaque,paddingLeft:"8px",paddingRight:"8px",borderRadius:"2px","&:hover":{textDecoration:"underline"}},c.wj,(0,c.YJ)({direction:e,marginStart:"6px"})]),"label:PCapCutTemplateName;"),v=function({info:e,playMode:t,teaParams:i}){var o;const{schema:n,icon:d,keyword:c,logExtra:u}=(0,s.m7)(null==e?void 0:e[0]),v=(0,s.m7)(null===(o=null==d?void 0:d.urlList)||void 0===o?void 0:o[0]),b=Boolean(null==e?void 0:e[0]),y=(0,r.useMemo)((()=>0===t?"one_column":4===t?"video_detail":"browser_mode"),[t]),f=(0,r.useMemo)((()=>{let e={};try{e=u&&JSON.parse(u)}catch(e){console.error(e)}return Object.assign(Object.assign(Object.assign({},i||{}),{enter_from:y}),e||{})}),[y,u,i]);(0,r.useEffect)((()=>{var e;b&&(e=f,l.W.event("multi_anchor_entrance_show",e))}),[b]);const _=(0,r.useCallback)((()=>{var e;e=f,l.W.event("multi_anchor_entrance_click",e)}),[f]);return b?(0,a.jsx)(p,Object.assign({"data-e2e":"capcut-anchor"},{children:(0,a.jsxs)(h,Object.assign({target:"_blank",href:n,onClick:_},{children:[(0,a.jsx)(m,{alt:c,src:v},void 0),(0,a.jsx)(g,Object.assign({playMode:t},{children:c}),void 0)]}),void 0)}),void 0):null}},32144:(e,t,i)=>{i.d(t,{L:()=>A});var o=i(11040),n=i(9236),a=i(91051),r=i(21041),l=i(60589),s=i(43139),d=i(45949),c=i(33642),u=i(48304),p=i(17133),m=i(64047),h=i(73566),g=i(48185),v=i(19630),b=i(20948),y=i(11348),f=i(82346),_=i(56979),x=i(60595),w=i(49584),k=i(68854),C=i(12167),j=i(19813),S=i(57244),P=i(18645);let T=class{constructor(e){this.fetch=e}getPoiDetail(e){return this.fetch.get("/api/poi/detail/",{query:e,baseUrlType:2})}};T=(0,m.__decorate)([(0,S.G)(),(0,m.__metadata)("design:paramtypes",[P.r])],T);let I=class extends h.D{constructor(e){super(),this.service=e,this.defaultState={poi:{}}}setPoiInfo(e,t){t&&(e.poi[t.id]=t)}getPoiInfo(e){return e.pipe((0,b.M)(this.state$),(0,w.z)((([{poiId:e="",language:t,teaParams:i,callback:o},{poi:n}])=>n[e]?(i&&(j.W.handleEnterPoi(Object.assign(Object.assign({},i),n[e])),null==o||o()),y.E):this.service.getPoiDetail({poiId:e,language:t}).pipe((0,k.K)((()=>(0,f.of)({statusCode:-1}))),(0,_.U)((e=>{var t,n;const{statusCode:a,poiInfo:r}=e;return 0===a?(i&&(j.W.handleEnterPoi(Object.assign(Object.assign({},i),null!==(t=null==r?void 0:r.poi)&&void 0!==t?t:{id:"",name:""})),null==o||o()),this.getActions().setPoiInfo(null===(n=null==e?void 0:e.poiInfo)||void 0===n?void 0:n.poi)):this.noop()})),(0,C.R)(this.dispose$)))))}};(0,m.__decorate)([(0,g.cQ)(),(0,m.__metadata)("design:type",x.y)],I.prototype,"dispose$",void 0),(0,m.__decorate)([(0,g.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],I.prototype,"setPoiInfo",null),(0,m.__decorate)([(0,g.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[x.y]),(0,m.__metadata)("design:returntype",void 0)],I.prototype,"getPoiInfo",null),I=(0,m.__decorate)([(0,v.Y)("PoisModule"),(0,m.__metadata)("design:paramtypes",[T])],I);var O=i(68191),D=i(36488),R=i(97186);const M={0:600,2:700,4:400},L={0:"4px",2:"8px",4:"12px"},B={0:"0px",2:"-2px",4:"-6px"},F=(0,O.Z)("div",{target:"e65hkrg0"})((({playMode:e})=>({height:"24px",marginTop:L[e],marginBottom:B[e]})),"label:DivPoiAnchor;"),E=(0,O.Z)(R.v,{target:"e65hkrg1"})({display:"inline-flex",alignItems:"center",textDecoration:"none",":hover":{textDecoration:"none"}},"label:StyledLink;"),Z=(0,O.Z)("p",{target:"e65hkrg2"})((({theme:{direction:e},playMode:t})=>[{fontSize:"16px",fontWeight:M[t],"&:hover":{textDecoration:"underline"}},D.wj,(0,D.YJ)({direction:e,marginStart:"8px"})]),"label:PPoiName;"),A=function({info:e,playMode:t,teaParams:i,target:m="_self",onLinkClick:h}){const{id:g,name:v,fatherPoiName:b}=(0,c.m7)(e),{language:y}=(0,c.m7)((0,p.Lh)((()=>["language"]),[])),f=(0,n.qj)(I),_=(0,r.k6)(),x=(0,u.iz)(g,v),w=Boolean(e),k=(0,a.useMemo)((()=>0===t?"one_column":4===t?"video_detail":"browser_mode"),[t]),C=(0,a.useMemo)((()=>({enter_method:k,anchor_id:g,anchor_name:v,author_id:i.author_id})),[g,v,k,i]);(0,a.useEffect)((()=>{w&&s.B8.handlePoiAnchorShow(C)}),[w]);const j=(0,a.useCallback)((e=>{(0,d.NS)(e),s.B8.handlePoiAnchorClick(C),null==h||h(e,x,"poi"),f.getPoiInfo({poiId:g,language:y,teaParams:Object.assign(Object.assign({},i),{enter_method:"click_caption",play_mode:k}),callback(){"_blank"===m?window.open(x,"_blank"):_.push(x)}})}),[C,f,k,_,g,y,x,i,m,h]);return w?(0,o.jsx)(F,Object.assign({"data-e2e":"poi-anchor",playMode:t},{children:(0,o.jsxs)(E,Object.assign({rel:"opener",replace:2===t,target:m,to:x,onClick:j},{children:[(0,o.jsx)(l.N,{size:16},void 0),(0,o.jsxs)(Z,Object.assign({playMode:t},{children:[v,b&&`  ${b}`]}),void 0)]}),void 0)}),void 0):null}},19488:(e,t,i)=>{i.d(t,{v:()=>u});var o=i(11040),n=i(91051),a=i(85630),r=i(32273),l=i(68191),s=i(36488);const d=(0,l.Z)("div",{target:"e13ee5sf0"})((({theme:{colors:e}})=>({display:"flex",alignItems:"center",height:"24px",marginTop:"8px",padding:"0 4px",borderRadius:"4px",backgroundColor:e.BGPlaceholderDefault,fontSize:"16px",color:e.TextTertiaryAlt})),"label:DivPcSubOnlyTag;"),c=(0,l.Z)("span",{target:"e13ee5sf1"})((({theme:{direction:e}})=>[{fontWeight:600},(0,s.YJ)({direction:e,marginStart:"4px"})]),"label:SpanText;"),u=(0,n.memo)((function({item:e}){const t=(0,r.Q)();return(null==e?void 0:e.subVideoMeta)?(0,o.jsxs)(d,{children:[(0,o.jsx)(a.H,{},void 0),(0,o.jsx)(c,{children:t("subVideo_viewing_lable")},void 0)]},void 0):null}))},3995:(e,t,i)=>{i.d(t,{C:()=>G});var o,n,a=i(11040),r=i(91051),l=i(58839),s=i(83607),d=i(55617),c=i(95872),u=i(90293);!function(e){e.PhotoSlide="multi_photo_slide"}(o||(o={})),function(e){e.ManualClick="manual_click",e.Auto="auto",e.Keyboard="keyboard"}(n||(n={}));const p=(e,t)=>{const{itemId:i,authorId:o,autoplayStatus:n=0,searchId:a="",searchKeyword:r,searchResultId:l,questionId:s,isMute:d=!1,fromTab:p,collectionId:m,collectionName:h,isPaidPartnership:g=!1,poiId:v,duration:b,awemeType:y,picCnt:f,tab_name:_}=t,x=Object.assign({group_id:i,author_id:o,autoplay_status:n,search_id:a,search_keyword:r,search_result_id:l,question_id:s,from_tab:p,collection_id:m,collection_name:h,poi_id:v,duration:b,aweme_type:null!=y?y:0,pic_cnt:f,tab_name:_},(()=>{var e;const{href:t,search:i}=window.location;return{is_from_webapp:null!==(e=(0,u.parse)(i).is_from_webapp)&&void 0!==e?e:"0",page_url:t}})());x.is_mute=d?"1":"0",x.is_partnership=g?"1":"0",c.W.event(e,x)},m=e=>{c.W.event("multi_photo_slide",e)};var h=i(69405),g=i(9236),v=i(16926),b=i(45253),y=i(31222),f=i(40340),_=i(64047),x=i(73566),w=i(48185),k=i(19630),C=i(60595),j=i(20948),S=i(56979);let P=class extends x.D{constructor(){super(...arguments),this.defaultState={currentVideo:null}}setCurrentVideo(e,t){e.currentVideo=t.currentVideo}updateVideo(e){return e.pipe((0,j.M)(this.state$),(0,S.U)((([e])=>this.getActions().setCurrentVideo(e))))}};(0,_.__decorate)([(0,w.lF)(),(0,_.__metadata)("design:type",Function),(0,_.__metadata)("design:paramtypes",[Object,Object]),(0,_.__metadata)("design:returntype",void 0)],P.prototype,"setCurrentVideo",null),(0,_.__decorate)([(0,w.Qm)(),(0,_.__metadata)("design:type",Function),(0,_.__metadata)("design:paramtypes",[C.y]),(0,_.__metadata)("design:returntype",void 0)],P.prototype,"updateVideo",null),P=(0,_.__decorate)([(0,k.Y)("SMobileVideoPlayer")],P);var T,I=i(40112),O=i(33642),D=i(8838),R=i(68852);!function(e){e.NoInteract="failed because the user didn't interact with the document first.",e.SafariNoInteract="The request is not allowed by the user agent or the platform in the current context"}(T||(T={}));const M=e=>({buffered:null==e?void 0:e.buffered,currentSrc:null==e?void 0:e.currentSrc,currentTime:null==e?void 0:e.currentTime,duration:null==e?void 0:e.duration,readyState:null==e?void 0:e.readyState,error:null==e?void 0:e.error,volume:null==e?void 0:e.volume,muted:null==e?void 0:e.muted}),L=(0,r.memo)((0,r.forwardRef)((function(e,t){var{playProgress:i,muteSetting:o,onUnmount:n,onEnded:l,onWaiting:s,onError:d,disableDownload:c=!1,itemMute:u=!1}=e,p=(0,_.__rest)(e,["playProgress","muteSetting","onUnmount","onEnded","onWaiting","onError","disableDownload","itemMute"]);const m=(0,r.useRef)(null),h=(0,r.useRef)(!1),[{mute:v,volume:b},{setMute:y,setMuteSetting:f}]=(0,g.b7)(R.x,{selector:e=>({mute:e.muteSetting||e.mute,volume:e.volume}),dependencies:[]}),x=(0,g.mp)(R.x,{selector:e=>e.playing,dependencies:[]});(0,r.useImperativeHandle)(t,(()=>{const e=m.current;return{play:null==e?void 0:e.play.bind(e),pause:null==e?void 0:e.pause.bind(e),onTimeUpdate:t=>{null==e||e.addEventListener("timeupdate",(()=>{var i,o;const n=null!==(i=e.currentTime)&&void 0!==i?i:0,a=null!==(o=e.duration)&&void 0!==o?o:0;t(n/a,n,a)}))},onCanPlay:t=>{null==e||e.addEventListener("canplay",t)},getPlayerAttributes:()=>M(e)}}));const w=(0,r.useCallback)(((e=0)=>(0,_.__awaiter)(this,void 0,void 0,(function*(){var t,i,o;if(!(e>=3))try{yield null===(t=m.current)||void 0===t?void 0:t.play()}catch(t){const n=null!==(i=null==t?void 0:t.message)&&void 0!==i?i:"";(null!==(o=n.match("failed because the user didn't interact with the document first."))&&void 0!==o?o:n.match("The request is not allowed by the user agent or the platform in the current context"))?(y(!0),setTimeout((()=>{w(e+1)}),0)):w(e+1),null==d||d(t)}}))),[y]);(0,r.useEffect)((()=>{m.current&&(m.current.volume=b)}),[b]),(0,r.useEffect)((()=>{f(o),w(),m.current&&Math.abs(m.current.currentTime-i)>.2&&(m.current.currentTime=i)}),[o,i,f,w]),(0,r.useEffect)((()=>{var e;x?h.current&&(h.current=!1,w()):(h.current=!0,null===(e=m.current)||void 0===e||e.pause())}),[x,w]),(0,r.useEffect)((()=>{const e=m.current;return()=>{null==n||n(M(e))}}),[]),(0,r.useEffect)((()=>{c&&(m.current.oncontextmenu=e=>(e.preventDefault(),!1))}),[c,m]);const k=(0,r.useCallback)((e=>{null==s||s(e)}),[s]),C=(0,r.useCallback)((e=>{null==l||l(e),w()}),[l,w]);return(0,a.jsx)("audio",Object.assign({ref:m},p,{muted:u||v,playsInline:!0,autoPlay:!0,onEnded:C,onWaiting:k}),void 0)})));let B=class extends x.D{constructor(){super(...arguments),this.defaultState={mobileDefaultMute:!1,forcePause:!1,canRetry:!0,muteSettingChangedByUser:!1}}setMobileDefaultMute(e,t){e.mobileDefaultMute=t}setForcePause(e,t){e.forcePause=t}setCanRetry(e,t){e.canRetry=t}setMuteSettingChangedByUser(e,t){e.muteSettingChangedByUser=t}};var F;(0,_.__decorate)([(0,w.lF)(),(0,_.__metadata)("design:type",Function),(0,_.__metadata)("design:paramtypes",[Object,Boolean]),(0,_.__metadata)("design:returntype",void 0)],B.prototype,"setMobileDefaultMute",null),(0,_.__decorate)([(0,w.lF)(),(0,_.__metadata)("design:type",Function),(0,_.__metadata)("design:paramtypes",[Object,Boolean]),(0,_.__metadata)("design:returntype",void 0)],B.prototype,"setForcePause",null),(0,_.__decorate)([(0,w.lF)(),(0,_.__metadata)("design:type",Function),(0,_.__metadata)("design:paramtypes",[Object,Boolean]),(0,_.__metadata)("design:returntype",void 0)],B.prototype,"setCanRetry",null),(0,_.__decorate)([(0,w.lF)(),(0,_.__metadata)("design:type",Function),(0,_.__metadata)("design:paramtypes",[Object,Boolean]),(0,_.__metadata)("design:returntype",void 0)],B.prototype,"setMuteSettingChangedByUser",null),B=(0,_.__decorate)([(0,k.Y)("SMobileBasicPlayer")],B),function(e){e.NoInteract="failed because the user didn't interact with the document first.",e.SafariNoInteract="The request is not allowed by the user agent or the platform in the current context"}(F||(F={}));const E=e=>({buffered:null==e?void 0:e.buffered,currentSrc:null==e?void 0:e.currentSrc,currentTime:null==e?void 0:e.currentTime,duration:null==e?void 0:e.duration,readyState:null==e?void 0:e.readyState,error:null==e?void 0:e.error,volume:null==e?void 0:e.volume,muted:null==e?void 0:e.muted}),Z=(0,r.memo)((0,r.forwardRef)((function(e,t){var{playProgress:i,muteSetting:o,onUnmount:n,onEnded:l,onWaiting:s,onError:d,disableDownload:c=!1,itemMute:u=!1}=e,p=(0,_.__rest)(e,["playProgress","muteSetting","onUnmount","onEnded","onWaiting","onError","disableDownload","itemMute"]);const m=(0,r.useRef)(null),[{mute:h},{setMobileDefaultMute:v,setForcePause:b}]=(0,g.b7)(B,{selector:e=>({mute:e.muteSettingChangedByUser||e.mobileDefaultMute,forcePause:e.forcePause,canRetry:e.canRetry}),dependencies:[]});(0,r.useImperativeHandle)(t,(()=>{const e=m.current;return{play:null==e?void 0:e.play.bind(e),pause:null==e?void 0:e.pause.bind(e),onTimeUpdate:t=>{null==e||e.addEventListener("timeupdate",(()=>{var i,o;const n=null!==(i=e.currentTime)&&void 0!==i?i:0,a=null!==(o=e.duration)&&void 0!==o?o:0;t(n/a,n,a)}))},onCanPlay:t=>{null==e||e.addEventListener("canplay",t)},getPlayerAttributes:()=>E(e)}}));const y=(0,r.useCallback)((()=>(0,_.__awaiter)(this,void 0,void 0,(function*(){var e,t,i;try{yield null===(t=null===(e=m.current)||void 0===e?void 0:e.play)||void 0===t?void 0:t.call(e)}catch(e){return null==d||d(e),null!==(i=e.message)&&void 0!==i?i:""}return""}))),[d]),f=(0,r.useCallback)((()=>{y().then((e=>{(e.match("failed because the user didn't interact with the document first.")||e.match("The request is not allowed by the user agent or the platform in the current context"))&&(b(!1),v(!0))}))}),[b,v,y]);(0,r.useEffect)((()=>{m.current&&f()}),[f]),(0,r.useEffect)((()=>{const e=m.current;return()=>{null==n||n(E(e))}}),[]),(0,r.useEffect)((()=>{c&&(m.current.oncontextmenu=e=>(e.preventDefault(),!1))}),[c,m]);const x=(0,r.useCallback)((e=>{null==s||s(e)}),[s]),w=(0,r.useCallback)((e=>{null==l||l(e),y()}),[l,y]);return(0,a.jsx)("audio",Object.assign({ref:m},p,{muted:u||h,playsInline:!0,autoPlay:!0,onEnded:w,onWaiting:x}),void 0)})));var A=i(58854);const U=(0,r.memo)((0,r.forwardRef)((function({playUrl:e,id:t,teaParams:i,index:o,mode:n,itemMute:l,onAudioPause:s,onAudioPlaying:d,onAudioPlay:c,onAudioEnded:u,onAudioError:p,onTimeUpdate:m},_){var x;const{isAndroid:w=!1,isMobile:k=!1}=null!==(x=(0,A.h)((()=>["isMobile","isAndroid"]),[]))&&void 0!==x?x:{},{currentVideo:C,playProgress:j}=(0,g.mp)(f.f),{currentVideo:S}=(0,g.mp)(P),T=(0,r.useRef)(null),R=(0,r.useRef)(null),M=(0,v.fz)(h.ec),B=(0,v.fz)(b.k),F=(0,v.fz)(y.KF),[E,U]=(0,r.useState)(!1),z=(0,r.useCallback)((()=>{var e,t;null===(t=null===(e=T.current)||void 0===e?void 0:e.play)||void 0===t||t.call(e)}),[]),W=(0,r.useCallback)((()=>{var e,t;null===(t=null===(e=T.current)||void 0===e?void 0:e.pause)||void 0===t||t.call(e)}),[]),V=(0,r.useMemo)((()=>{if(k){if(!S)return!1;const{id:e,index:i}=S;return!w||e===t&&i===o}if(!C)return!1;const{id:e,index:i,mode:a}=C;return e===t&&i===o&&a===n}),[k,C,t,o,n,S,w]);(0,r.useImperativeHandle)(_,(()=>({play:()=>{z(),R.current=!0},pause:()=>{W(),R.current=!1},onTimeUpdate:e=>{var t;null===(t=T.current)||void 0===t||t.onTimeUpdate(e)},get currentTime(){var e,t;return null!==(t=null===(e=T.current)||void 0===e?void 0:e.getPlayerAttributes().currentTime)&&void 0!==t?t:0},get duration(){var e,t;return null!==(t=null===(e=T.current)||void 0===e?void 0:e.getPlayerAttributes().duration)&&void 0!==t?t:0},get currentCanPlay(){return V&&E}})),[z,W,V,E]),(0,r.useEffect)((()=>{V||U(!1)}),[V]);const q=(0,I.Mz)();(0,r.useEffect)((()=>{const e=null===R.current||R.current;q&&e?z():W()}),[q,z,W,M,V,n]);const N=(0,r.useCallback)((()=>{var o;const a=(0,O.m7)(null===(o=T.current)||void 0===o?void 0:o.getPlayerAttributes()),{bitrate:r,author_id:l,format:s,encodedType:d,videoQuality:c,encodeUserTag:u,codecType:p,definition:m,secret:h,forFriend:g,aweme_type:v,pic_cnt:b}=i;return Object.assign({id:t,authorId:l,playMode:n,bitrate:r,format:s,encodedType:d,videoQuality:c,encodeUserTag:u,codecType:p,definition:m,secret:h,forFriend:g,play_url:e,awemeType:v,picCnt:b},null!=a?a:{})}),[t,n,i,e]),{handlePauseWithLoading:H,handlePlayingWithLoading:$}=(0,I.Fk)({isCurrentVideo:V}),G=(0,r.useCallback)((()=>{B.handleLoadStart(N())}),[B,N]),K=(0,r.useCallback)((e=>{null==c||c(e)}),[c]),Y=(0,r.useCallback)((()=>{var e;const{currentTime:t=0,duration:i=0}=(0,O.m7)(null===(e=T.current)||void 0===e?void 0:e.getPlayerAttributes());B.handleTimeUpdate(N()),null==m||m(t/i)}),[B,N,m]),Q=(0,r.useCallback)((e=>{null==s||s(e),H()}),[s,H]),J=(0,r.useCallback)((t=>{null==d||d(t),$(),F.reportVideoInteract({endTime:Date.now(),videoSource:e})}),[d,$,F,e]),X=(0,r.useCallback)((e=>{null==u||u(e),B.handleEnded()}),[u,B]);return(0,r.useEffect)((()=>()=>{B.resetWhenSlideChange(Object.assign({},N()))}),[e]),V?k?(0,a.jsx)(Z,{ref:T,c:!0,muteSetting:l||D.PA[n].forceMute,defaultMute:D.PA[n].defaultMute,playProgress:null!=j?j:0,src:e,onTimeUpdate:Y,onError:p,onPause:Q,onPlay:K,onPlaying:J,onEnded:X,onLoadStart:G},void 0):(0,a.jsx)(L,{ref:T,c:!0,muteSetting:l||D.PA[n].forceMute,defaultMute:D.PA[n].defaultMute,playProgress:null!=j?j:0,src:e,onTimeUpdate:Y,onError:p,onPause:Q,onPlay:K,onPlaying:J,onEnded:X,onLoadStart:G},void 0):null})));var z=i(63175),W=i(68191);const V=(0,W.Z)("div",{target:"e10jea830"})((({isMobile:e})=>e?{position:"absolute",top:"0",width:"100vw",height:"100%",pointerEvents:"none",opacity:"1"}:{width:"100%",height:"100%",objectFit:"cover",backgroundColor:"black"}),"label:DivPhotoVideoContainer;"),q=(0,W.Z)("div",{target:"e10jea831"})({width:"100%",height:"100%"},"label:DivSwiperContainer;"),N=(0,W.Z)("img",{target:"e10jea832"})({height:"100%",width:"100%",objectFit:"contain"},"label:ImgPhotoSlide;");var H=i(78772);const $={delay:1700,disableOnInteraction:!1},G=(0,r.memo)((0,r.forwardRef)((function({show:e=!0,item:t,mode:i=4,index:o,teaParams:n,onAudioPlay:c,onAudioError:u,onTimeUpdate:b},y){var f,_,x,w,k;const{isMobile:C=!1}=null!==(f=(0,A.h)((()=>["isMobile"]),[]))&&void 0!==f?f:{},{isRTL:j}=(0,z.Y)(),S=j?"rtl":"ltr",P=(0,r.useRef)(!1),T=(0,r.useRef)(0),I=(0,r.useRef)(0),D=(0,v.fz)(h.ec),M=null!==(x=null===(_=null==t?void 0:t.music)||void 0===_?void 0:_.playUrl)&&void 0!==x?x:"",L=null!==(k=null===(w=null==t?void 0:t.imagePost)||void 0===w?void 0:w.images)&&void 0!==k?k:[],{video:{duration:B,volumeInfo:F},id:E,itemMute:Z=!1,authorId:W=""}=(0,O.m7)(t),G=(0,r.useMemo)((()=>[""]),[]),K=(0,r.useRef)(null),Y=(0,r.useRef)(null),Q=(0,r.useRef)(!1),J=(0,r.useRef)([]),{aweme_type:X,pic_cnt:ee}=(0,H.K$)(t),te=(0,r.useCallback)((()=>{var e;const t=null===(e=Y.current)||void 0===e?void 0:e.autoplay;null==t||t.start(),D.triggerPlay()}),[D]),ie=(0,r.useCallback)((e=>{var t;const o=null===(t=Y.current)||void 0===t?void 0:t.autoplay;null==o||o.stop(),D.triggerPause({aweme_type:X,pic_cnt:ee,enter_method:e,playMode:i})}),[X,i,ee,D]);(0,r.useImperativeHandle)(y,(()=>({audio:{play:()=>{var e,t;null===(t=null===(e=K.current)||void 0===e?void 0:e.play)||void 0===t||t.call(e)},pause:()=>{var e,t;null===(t=null===(e=K.current)||void 0===e?void 0:e.pause)||void 0===t||t.call(e)},onTimeUpdate:e=>{var t,i;null===(i=null===(t=K.current)||void 0===t?void 0:t.onTimeUpdate)||void 0===i||i.call(t,e)},get currentTime(){var e,t;return null!==(t=null===(e=K.current)||void 0===e?void 0:e.currentTime)&&void 0!==t?t:0},get duration(){var e,t;return null!==(t=null===(e=K.current)||void 0===e?void 0:e.duration)&&void 0!==t?t:0},get currentCanPlay(){var e,t;return null!==(t=null===(e=K.current)||void 0===e?void 0:e.currentCanPlay)&&void 0!==t&&t}},swiper:{play:te,pause:ie,slidePrev:e=>{var t,i,o;if(Q.current)return;const n=null!==(i=null===(t=Y.current)||void 0===t?void 0:t.activeIndex)&&void 0!==i?i:0;null===(o=Y.current)||void 0===o||o.slidePrev(),I.current===T.current&&(I.current=Number(new Date)),m({group_id:E,author_id:W,enter_method:e,aweme_type:150,pic_cnt:L.length,pic_location:n-2,action_type:"left",first_manual_click_duration:I.current-T.current})},slideNext:e=>{var t,i,o;if(Q.current)return;const n=null!==(i=null===(t=Y.current)||void 0===t?void 0:t.activeIndex)&&void 0!==i?i:0;null===(o=Y.current)||void 0===o||o.slideNext(),I.current===T.current&&(I.current=Number(new Date)),m({group_id:E,author_id:W,enter_method:e,aweme_type:150,pic_cnt:L.length,pic_location:n===L.length?0:n,action_type:"right",first_manual_click_duration:I.current-T.current})},slideToLoop:e=>{var t;null===(t=Y.current)||void 0===t||t.slideToLoop(e)},onActiveIndexChange:e=>{J.current.push(e)},get paused(){var e,t;return!(null===(t=null===(e=Y.current)||void 0===e?void 0:e.autoplay)||void 0===t?void 0:t.running)}}})));const{mute:oe}=(0,g.mp)(R.x),ne=(0,r.useMemo)((()=>Object.assign(Object.assign({},n),{aweme_type:X,pic_cnt:ee})),[X,ee,n]),ae=(0,r.useMemo)((()=>{const{group_id:e="",author_id:t="",is_scheduled:o,search_id:a,search_keyword:r,search_result_id:l,question_id:s,collection_id:d,collection_name:c,isPaidPartnership:u,poi_id:p,tab_name:m}=n||{};return{itemId:e,authorId:t,isScheduled:Boolean(o),autoplayStatus:1,searchId:a,searchKeyword:r,searchResultId:l,questionId:s,playMode:i,isMute:oe,collectionId:d,collectionName:c,isPaidPartnership:Boolean(u),poiId:p,awemeType:X,picCnt:ee,tab_name:m}}),[X,i,oe,ee,n]),re=(0,r.useMemo)((()=>Object.assign(Object.assign({},ae),{currentTime:0,duration:0})),[ae]),le=(0,r.useCallback)((()=>{T.current=Number(new Date),I.current=T.current,p("video_play",re),D.handleAudioPlay(E),D.triggerPlay()}),[E,re,D]),se=(0,r.useCallback)((()=>{const e=Number(new Date)-T.current;re.duration=e,p("play_time",re)}),[re]),de=(0,r.useCallback)((e=>{P.current||e.activeIndex===L.length&&(p("video_play_finish",re),P.current=!0)}),[L.length,re]),ce=(0,r.useCallback)((()=>{Q.current=!0}),[]),ue=(0,r.useCallback)((()=>{Q.current=!1}),[]),pe=(0,r.useCallback)((e=>{m({group_id:E,author_id:W,enter_method:"auto",aweme_type:150,pic_cnt:L.length,pic_location:e.activeIndex===L.length+1?0:e.activeIndex-1,action_type:"right"})}),[W,E,L]),[me,he]=(0,r.useState)(!1);return(0,r.useEffect)((()=>he(!0)),[]),me?(0,a.jsxs)(V,Object.assign({isMobile:C},{children:[(0,a.jsx)("link",{rel:"stylesheet",href:s},void 0),e&&(0,a.jsx)(q,{children:L.length>0?(0,a.jsx)(d.tq,Object.assign({loop:!0,onSwiper:e=>{Y.current=e,J.current.forEach((t=>e.on("activeIndexChange",t)))},style:{height:"100%",zIndex:0},speed:800,dir:S,modules:[l.pt],autoplay:$,preventClicks:!1,preventClicksPropagation:!1,onAfterInit:le,onDestroy:se,onSlideNextTransitionEnd:de,onSlideChangeTransitionStart:ce,onSlideChangeTransitionEnd:ue,onAutoplay:pe},{children:L.map((e=>{var t,i;return(0,a.jsx)(d.o5,Object.assign({style:{height:"100%"}},{children:(0,a.jsx)(N,{src:(null!==(t=e.imageURL.urlList)&&void 0!==t?t:G)[0]},void 0)}),(null!==(i=e.imageURL.urlList)&&void 0!==i?i:G)[0])}))}),void 0):null},void 0),(0,a.jsx)(U,{ref:K,index:o,id:E,mode:i,duration:B,playUrl:M,teaParams:ne,volumeInfo:F,itemMute:Z,onAudioPlay:c,onAudioError:u,onTimeUpdate:b,preload:"metadata",playsInline:!0},void 0)]}),void 0):null})))},83014:(e,t,i)=>{i.d(t,{V:()=>a});var o=i(91051),n=i(71300);const a=()=>{const e=(0,o.useRef)(-1),[t,i]=(0,o.useState)(!1),a=(0,n.HX)();return{showing:t&&!a,handleItemEnter:(0,o.useCallback)((()=>{e.current=window.setTimeout((()=>{i(!0)}),1e3)}),[]),handleItemLeave:(0,o.useCallback)((()=>{window.clearTimeout(e.current),i(!1)}),[]),handleCardEnter:(0,o.useCallback)((()=>{window.clearTimeout(e.current),i(!0)}),[]),handleCardLeave:(0,o.useCallback)((()=>{e.current=window.setTimeout((()=>{i(!1)}),500)}),[])}}},82261:(e,t,i)=>{i.d(t,{C:()=>f});var o=i(11040),n=i(9236),a=i(91051),r=i(41573),l=i(32273),s=i(45949),d=i(34579),c=i(68191);const u="400px",p="240px",m=(0,c.Z)("div",{target:"e1wwf12u0"})((({theme:e})=>({width:"100%",height:"100%",left:"0",top:"0",backdropFilter:"blur(50px)",backgroundColor:e.colors.SDSecondary,position:"absolute",zIndex:2})),"label:DivMask;"),h=(0,c.Z)("div",{target:"e1wwf12u1"})({position:"absolute",top:"50%",transform:"translate(0, -50%)",width:"100%"},"label:DivMaskContainer;"),g=(0,c.Z)("div",{target:"e1wwf12u2"})((({theme:e,smallMask:t=!1})=>({width:t?"48px":"106px",height:t?"48px":"106px",padding:t?"16px":"33px",margin:"0 auto 0",borderRadius:"50%",backgroundColor:e.colors.BGCreation5,color:e.colors.Positive})),"label:DivMaskIcon;"),v=(0,c.Z)("div",{target:"e1wwf12u3"})((({theme:e,smallMask:t=!1})=>({maxWidth:t?p:u,margin:t?"8px auto 0":"24px auto 0",fontSize:t?"16px":"24px",lineHeight:t?"24px":"32px",textAlign:"center",color:e.colors.ConstTextInverse,fontWeight:"600"})),"label:DivMaskTitle;"),b=(0,c.Z)("div",{target:"e1wwf12u4"})((({theme:e,smallMask:t=!1})=>({maxWidth:t?p:u,margin:t?"2px auto 0":"16px auto 0",fontSize:t?"14px":"18px",lineHeight:t?"22px":"24px",textAlign:"center",color:e.colors.ConstTextInverse})),"label:DivMaskDetail;"),y=(0,c.Z)("button",{target:"e1wwf12u5"})((({theme:e})=>({width:u,height:"56px",cursor:"pointer",margin:"56px auto 0",borderRadius:"2px",backgroundColor:e.colors.ConstBGContainer,color:e.colors.ConstTextInverse,padding:"16px",fontSize:"18px",lineHeight:"24px",textAlign:"center",border:"none",display:"block"})),"label:ButtonMask;"),f=(0,a.memo)((({item:e,zIndex:t=2,children:i,onReportMaskVisibleChange:c,smallMask:u,styleContainer:p={},styleMaskIcon:f={},styleMaskTitle:_={},styleMaskDetail:x={},styleButtonMask:w={},tickIconDimension:k})=>{var C;const j=(0,l.Q)(),S=j("Web_report_thanks_for_report"),P=j("Web_report_hide_video"),T=j("Web_report_show_video"),[I,O]=(0,n.b7)(d.bg,{selector:e=>e.blockedVideos||[],dependencies:[]}),D=I.includes(null!==(C=null==e?void 0:e.id)&&void 0!==C?C:"");(0,a.useEffect)((()=>{null==c||c(D)}),[D]);const R=(0,a.useCallback)((t=>{(0,s.NS)(t),e&&O.removeBlockVideo(e.id)}),[O,e]);if(!D)return null;const M=u?16:null!=k?k:40;return(0,o.jsxs)(m,Object.assign({style:Object.assign(Object.assign({},p),{zIndex:t})},{children:[(0,o.jsxs)(h,{children:[(0,o.jsx)(g,Object.assign({style:f,smallMask:u},{children:(0,o.jsx)(r.Z,{width:M,height:M},void 0)}),void 0),(0,o.jsx)(v,Object.assign({style:_,smallMask:u},{children:S}),void 0),(0,o.jsx)(b,Object.assign({style:x,smallMask:u},{children:P}),void 0),!u&&(0,o.jsx)(y,Object.assign({style:w,onClick:R},{children:T}),void 0)]},void 0),i]}),void 0)}))},67301:(e,t,i)=>{i.d(t,{W:()=>m});var o=i(11040),n=i(74820),a=i(51722),r=i(91051),l=i(38725),s=i(32273),d=i(68191),c=i(36488);const u=(0,d.Z)("div",{target:"e4cyjsy0"})((({theme:e,justifyContent:t})=>[(0,c.GI)({theme:e,fontFamily:"Proxima",color:"ConstTextInverse"}),{background:e.colors.BGInverse3,display:"flex",justifyContent:t,alignItems:"center"}]),"label:DivScheduleItemWarn;");function p(e){const t=(0,a.unix)(e).format("YYYY-M-D-H:mm"),[i,n,r,l]=t.split("-");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{children:""},void 0),(0,o.jsx)("span",{children:i},void 0),(0,o.jsx)("span",{children:"-"},void 0),(0,o.jsx)("span",{children:n},void 0),(0,o.jsx)("span",{children:"-"},void 0),(0,o.jsx)("span",{children:r},void 0),(0,o.jsx)("span",{children:""},void 0),(0,o.jsx)("span",{children:l},void 0)]},void 0)}const m=(0,r.memo)((function({height:e,fontSize:t,scheduledTime:i,iconSize:a,iconMargin:r,className:d,isTextAlignStart:c=!1}){const{direction:m}=(0,n.u)(),h=(0,s.Q)();return(0,o.jsxs)(u,Object.assign({justifyContent:c?"center":void 0,className:d,style:{fontSize:t,height:e,lineHeight:e}},{children:[(0,o.jsx)(l.Z,{width:a,height:a,style:{["ltr"===m?"marginRight":"marginLeft"]:r}},void 0),h("scheduled_for"),p(i)]}),void 0)}))},41140:(e,t,i)=>{i.d(t,{M:()=>l});var o=i(64047),n=i(73566),a=i(48185),r=i(19630);let l=class extends n.D{constructor(){super(...arguments),this.defaultState={}}setVideoInfo(e,t){var i;const{videoId:o,videoPercent:n,duration:a,currentTime:r}=t,l=Object.assign({},null!==(i=e[o])&&void 0!==i?i:{},{videoPercent:n,duration:a,currentTime:r});e[o]?Object.keys(l).forEach((t=>{e[o][t]=l[t]})):(Object.keys(e).forEach((t=>delete e[t])),e[o]=l)}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],l.prototype,"setVideoInfo",null),l=(0,o.__decorate)([(0,r.Y)("SeekBarModule")],l)},37384:(e,t,i)=>{i.d(t,{Y:()=>a});var o=i(9236),n=i(53177);function a(){var e;const t=(0,o.mp)(n.T,{selector:e=>e.abtest,dependencies:[]});return"v2"===(null===(e=null==t?void 0:t.parameters.video_non_tdk_phase2)||void 0===e?void 0:e.vid)}},69972:(e,t,i)=>{i.d(t,{wu:()=>a,AZ:()=>r,SD:()=>l,cl:()=>s,ky:()=>d,z5:()=>c,no:()=>u,qf:()=>p,DF:()=>m,aE:()=>h,Tn:()=>g});var o=i(68191),n=(i(2412),i(36488));const a=(0,o.Z)("div",{target:"ehlq8k30"})({position:"relative",padding:"16px 0"},"label:DivContainer;"),r=(0,o.Z)("div",{target:"ehlq8k31"})({display:"flex",flexDirection:"row",alignItems:"center"},"label:DivFlexCenterRow;"),l=(0,o.Z)(r,{target:"ehlq8k32"})({justifyContent:"space-between"},"label:StyledWrapper;"),s=(0,o.Z)("div",{target:"ehlq8k33"})((({theme:e})=>[(0,n.GI)({theme:e,typography:"P3",color:"TextSecondary"}),{display:"flex",flexDirection:"row",marginTop:"16px",boxSizing:"border-box",border:`1px solid ${e.colors.LineSecondary2}`,borderRadius:"8px",overflow:"hidden"}]),"label:DivCopyLinkContainer;"),d=(0,o.Z)("p",{target:"ehlq8k34"})(n.wj,(({theme:e})=>({flex:"1 1 auto",paddingTop:"7px",paddingBottom:"5px",backgroundColor:e.colors.BGInput})),(({theme:{direction:e}})=>(0,n.YJ)({direction:e,paddingStart:"12px",paddingEnd:"0"})),"label:PCopyLinkText;");d.defaultProps=Object.assign(Object.assign({},d.defaultProps),{"data-e2e":"browse-video-link"});const c=(0,o.Z)("button",{target:"ehlq8k36"})((({theme:e})=>[n.Ph,{color:e.colors.TextPrimary,fontWeight:e.fontWeights.bold,flex:"0 0 auto",cursor:"pointer",backgroundColor:e.colors.BGInput2,padding:"7px 18px",":hover":{backgroundColor:e.colors.BGView},":active":{backgroundColor:e.colors.BGInput},":focus-visible":{outline:`2px solid ${e.colors.Negative}`,outlineOffset:"-2px"}}]),"label:ButtonCopyLink;");c.defaultProps=Object.assign(Object.assign({},c.defaultProps),{"data-e2e":"browse-copy"});const u=(0,o.Z)("button",{target:"ehlq8k37"})((({theme:{colors:e}})=>[n.Ph,{position:"relative",display:"flex",width:"24px",height:"24px",justifyContent:"center",alignItems:"center",borderRadius:"50%",cursor:"pointer",color:e.TextPrimary,":focus-visible":{outline:`2px solid ${e.Negative}`},":hover":{backgroundColor:"rgba(22, 24, 35, 0.1)"},":active":{backgroundColor:"rgba(22, 24, 35, 0.1)"}}]),"label:ButtonShare;"),p=(0,o.Z)("div",{target:"ehlq8k38"})((({theme:e})=>[(0,n.GI)({theme:e,fontWeight:"semiBold",typography:"P2"}),{width:"280px",padding:"8px 0px",maxHeight:448,overflow:"auto","::-webkit-scrollbar":{width:"6px"},"::-webkit-scrollbar-thumb":{borderRadius:"3px",background:"rgba(0, 0, 0, 0.15)"}}]),"label:DivShareWrapper;");p.defaultProps=Object.assign(Object.assign({},p.defaultProps),{"data-e2e":"feed-share-group"});const m=(0,o.Z)("div",{target:"ehlq8k39"})({paddingTop:"18px",height:"50px",display:"flex",flexDirection:"row",alignItems:"center"},"label:DivTabMenuContainer;"),h=(0,o.Z)("div",{target:"ehlq8k310"})((({isSelected:e=!1})=>({borderBottom:e?"2px solid black":"none",width:"50%",height:"100%"})),"label:DivTabItemContainer;"),g=(0,o.Z)("div",{target:"ehlq8k311"})((({isSelected:e=!1,theme:t})=>[(0,n.GI)({theme:t,fontWeight:e?"bold":"semiBold",typography:"P3",fontFamily:"Proxima",color:e?"TextPrimary":"TextTertiaryAlt"}),(0,n.YJ)({direction:t.direction}),{overflow:"auto",textAlign:"center",lineHeight:"24px",cursor:"pointer"}]),"label:DivTabItem;")},8826:(e,t,i)=>{i.d(t,{Q:()=>y});var o=i(11040),n=i(9236),a=i(91051),r=i(58641),l=i(86032),s=i(32273),d=i(23745),c=i(68191),u=i(5535),p=i(36488);const m=(0,c.Z)("button",{target:"ef0ywbl0"})(p.Ph,(({theme:e})=>[(0,p.YJ)({direction:e.direction,end:"26px"}),(0,p.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",color:"TextPrimary",typography:"P3"})]),{display:"flex",justifyContent:"center",alignItems:"center",height:"20px",cursor:"pointer",":hover":{textDecoration:"underline"}},"label:ButtonDelete;"),h=(0,c.Z)(u.Z,{target:"ef0ywbl1"})((({theme:{direction:e}})=>(0,p.YJ)({direction:e,marginEnd:6})),"label:StyledTrashBin;"),g=(0,c.Z)("p",{target:"ef0ywbl2"})((({theme:e})=>(0,p.GI)({theme:e,typography:"H4",fontWeight:"bold"})),{padding:"36px 32px",textAlign:"center",width:"332px"},"label:PDeleteTitle;"),v=(0,c.Z)("button",{target:"ef0ywbl3"})(p.Ph,(({theme:{colors:e}})=>({width:"100%",height:"48px",fontSize:"16px",lineHeight:"48px",borderTop:`1px solid ${e.LineSecondary}`,cursor:"pointer"})),"label:ButtonConfirm;"),b=(0,c.Z)(v,{target:"ef0ywbl4"})((({theme:{colors:e}})=>({color:e.TextSecondary})),"label:StyledButtonCancel;"),y=function({video:e}){const[t,i]=(0,a.useState)(!1),c=(0,s.Q)(),u=(0,n.qj)(d.O),p=(0,a.useCallback)((()=>{i(!0),l.o.handleScheduleConfirm(e.id)}),[e.id]),y=(0,a.useCallback)((()=>{u.postScheduleDelete(e.id),i(!1)}),[u,e.id]),f=(0,a.useCallback)((()=>{i(!1),l.o.handleScheduleDelete("cancel")}),[]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(m,Object.assign({type:"button",onClick:p},{children:[(0,o.jsx)(h,{width:18.33,height:18.33},void 0),c("delete")]}),void 0),(0,o.jsxs)(r.AR,Object.assign({closeOnBackdropClick:!1,compact:!0,closeOnEsc:!1,isOpen:t,onClose:f},{children:[(0,o.jsx)(g,{children:c("delete_confirm")},void 0),(0,o.jsx)(v,Object.assign({"data-e2e":"video-modal-delete",type:"button",onClick:y},{children:c("delete")}),void 0),(0,o.jsx)(b,Object.assign({"data-e2e":"video-modal-cancel",type:"button",onClick:f},{children:c("cancel_settings")}),void 0)]}),void 0)]},void 0)}},80298:(e,t,i)=>{i.d(t,{C:()=>be});var o=i(11040),n=i(74820),a=i(91051),r=i(86032),l=i(32273),s=i(39696),d=i(48088),c=i(43226),u=i.n(c),p=i(58641),m=i(24930),h=i(28327),g=i(68191),v=i(68561),b=i(36488);const y=(0,g.Z)("div",{target:"e1rwytmq0"})((({theme:e})=>[(0,b.GI)({theme:e,typography:"H6",fontFamily:"Proxima"}),{position:"relative",userSelect:"none"}]),"label:DivContainer;"),f=(0,g.Z)("div",{target:"e1rwytmq1"})((({theme:{colors:e}})=>({display:"flex",flexDirection:"row",alignItems:"center",padding:"12px",borderRadius:"2px",border:`1px solid ${e.LineSecondary2}`,cursor:"pointer"})),"label:DivSelectionContainer;"),_=(0,g.Z)("p",{target:"e1rwytmq2"})(b.wj,{flex:"1 1 auto"},"label:PSelected;"),x=(0,g.Z)(v.Z,{target:"e1rwytmq3"})({width:24,height:24,flex:"0 0 24px"},"label:StyledChevronDown;"),w=(0,g.Z)("div",{target:"e1rwytmq4"})({position:"fixed",left:0,right:0,top:0,bottom:0},"label:DivSelectMask;"),k=(0,h.F4)({from:{opacity:"0",transform:"scale(0.6, 0.6)"},"70%":{opacity:"1",transform:"scale(1.01, 1.01)"},to:{opacity:"1",transform:"scale(1, 1)",animationTimingFunction:"cubic-bezier(0.215, 0.61, 0.355, 1)"}}),C=(0,g.Z)("ul",{target:"e1rwytmq5"})((({theme:{colors:e}})=>({position:"absolute",left:0,right:0,margin:0,padding:0,listStyle:"none",border:`1px solid ${e.LineSecondary}`,background:e.BGPrimary,boxShadow:`0px 2px 8px ${e.ShadowPrimary}`,animation:`${k} 100ms normal`,transformOrigin:"center top",zIndex:1})),"label:UlOptionsContainer;"),j=(0,g.Z)("li",{target:"e1rwytmq6"})((({theme:{colors:e}})=>({cursor:"pointer",padding:"8px 12px",":hover":{background:e.BGView}})),"label:LiOptionsItem;"),S=(0,g.Z)("p",{target:"e1rwytmq7"})(b.wj,"label:POptionsTitle;"),P=(0,g.Z)("p",{target:"e1rwytmq8"})(b.wj,(({theme:e})=>(0,b.GI)({theme:e,typography:"P4",color:"TextTertiary"})),"label:POptionsDesc;");function T({value:e,options:t,e2eData:i,itemE2eData:n,onChange:r,placeholder:l}){var s,d;const[c,u]=(0,a.useState)(!1),p=t.find((({value:t})=>t===e)),m=(0,a.useCallback)((()=>{u(!0)}),[]),h=(0,a.useCallback)((()=>{u(!1)}),[]),g=(0,a.useCallback)((e=>()=>{null==r||r(e),h()}),[h,r]);return(0,o.jsxs)(y,{children:[(0,o.jsxs)(f,Object.assign({"data-e2e":i,onClick:m},{children:[(0,o.jsx)(_,{children:null!==(d=null!==(s=null==p?void 0:p.title)&&void 0!==s?s:null==p?void 0:p.value)&&void 0!==d?d:l},void 0),(0,o.jsx)(x,{width:24,height:24},void 0)]}),void 0),c&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w,{onClick:h},void 0),(0,o.jsx)(C,{children:t.map((({value:e,key:t,title:i,desc:a})=>{const r=String(null!=i?i:e);return(0,o.jsxs)(j,Object.assign({"data-e2e":n,title:r,onClick:g(e)},{children:[(0,o.jsx)(S,{children:i},void 0),a&&(0,o.jsx)(P,{children:a},void 0)]}),null!=t?t:String(e))}))},void 0)]},void 0)]},void 0)}var I,O,D=i(88683),R=i(35892),M=i(9236),L=i(64047),B=i(73566),F=i(48185),E=i(19630),Z=i(60595),A=i(93859),U=i(56979),z=i(49584),W=i(20948),V=i(95872);!function(e){e.PrivateAccountPop="private_account_pop",e.PrivateAccountPopClick="private_account_pop_click",e.CookieBannerShow="cookie_banner_show",e.CookieBannerEnterPolicy="enter_cookie_policy",e.ChangeCookieSetting="change_cookie_setting",e.ClickCookiePolicy="click_cookie_policy",e.ClickCookieSettings="click_cookie_settings"}(I||(I={})),function(e){e.ClickBannerAccept="click_banner_accept",e.ClickBannerDecline="click_banner_decline",e.ClickPolicy="click_banner_cookie_policy",e.ClickSettings="click_banner_cookie_settings"}(O||(O={}));var q,N,H=i(87930),$=i(21005),G=i(55017);!function(e){e[e.Show=0]="Show",e[e.CanNotModify=1]="CanNotModify",e[e.Hide=2]="Hide"}(q||(q={})),function(e){e[e.NoRestriction=0]="NoRestriction",e[e.Compliance=1]="Compliance",e[e.FamilyPairing=2]="FamilyPairing",e[e.PrivateAccount=3]="PrivateAccount"}(N||(N={}));let K=class extends B.D{constructor(e){super(),this.service=e,this.defaultState={isPrivateBannerShowing:!1,videoPrivateSetting:{duet:{show_type:0,res_type:0},stitch:{show_type:0,res_type:0}}}}setIsPrivateBannerShowing(e,t){e.isPrivateBannerShowing=t}handleShowPrivateBanner(e){return e.pipe((0,A.b)((e=>{e&&V.W.event("private_account_pop")})),(0,U.U)((e=>this.getActions().setIsPrivateBannerShowing(e))))}handlePrivateBannerClose(e){return e.pipe((0,A.b)((()=>{var e;e="ok",V.W.event("private_account_pop_click",{result:e})})),(0,z.z)((()=>this.service.postPrivateBannerAck())),(0,A.b)((e=>{(0,H.k)(e.statusCode,[0])})),(0,U.U)((e=>0===e.statusCode?this.getActions().setIsPrivateBannerShowing(!1):this.noop())),(0,$.n)({}))}setVideoPrivateSetting(e,t){e.videoPrivateSetting=t}getVideoPrivateSetting(e){return e.pipe((0,W.M)(this.state$),(0,z.z)((([e,t])=>this.service.getVideoPrivateSetting().pipe((0,U.U)((e=>{var i,o,n,a;const{private_settings:r}=e;return this.getActions().setVideoPrivateSetting({duet:{show_type:null!==(i=null==r?void 0:r.video_privacy.duet.show_type)&&void 0!==i?i:t.videoPrivateSetting.duet.show_type,res_type:null!==(o=null==r?void 0:r.video_privacy.duet.res_type)&&void 0!==o?o:t.videoPrivateSetting.duet.res_type},stitch:{show_type:null!==(n=null==r?void 0:r.video_privacy.stitch.show_type)&&void 0!==n?n:t.videoPrivateSetting.stitch.show_type,res_type:null!==(a=null==r?void 0:r.video_privacy.stitch.res_type)&&void 0!==a?a:t.videoPrivateSetting.stitch.res_type}})}))))),(0,$.n)({}))}};(0,L.__decorate)([(0,F.lF)(),(0,L.__metadata)("design:type",Function),(0,L.__metadata)("design:paramtypes",[Object,Boolean]),(0,L.__metadata)("design:returntype",void 0)],K.prototype,"setIsPrivateBannerShowing",null),(0,L.__decorate)([(0,F.Qm)(),(0,L.__metadata)("design:type",Function),(0,L.__metadata)("design:paramtypes",[Z.y]),(0,L.__metadata)("design:returntype",void 0)],K.prototype,"handleShowPrivateBanner",null),(0,L.__decorate)([(0,F.Qm)(),(0,L.__metadata)("design:type",Function),(0,L.__metadata)("design:paramtypes",[Z.y]),(0,L.__metadata)("design:returntype",void 0)],K.prototype,"handlePrivateBannerClose",null),(0,L.__decorate)([(0,F.lF)(),(0,L.__metadata)("design:type",Function),(0,L.__metadata)("design:paramtypes",[Object,Object]),(0,L.__metadata)("design:returntype",void 0)],K.prototype,"setVideoPrivateSetting",null),(0,L.__decorate)([(0,F.Qm)(),(0,L.__metadata)("design:type",Function),(0,L.__metadata)("design:paramtypes",[Z.y]),(0,L.__metadata)("design:returntype",void 0)],K.prototype,"getVideoPrivateSetting",null),K=(0,L.__decorate)([(0,E.Y)("Compliance"),(0,L.__metadata)("design:paramtypes",[G.n])],K);var Y=i(23745);const Q=(0,g.Z)("div",{target:"e1i2llgv1"})({padding:"32px",width:"332px"},"label:DivContentWrapper;"),J=(0,g.Z)("h2",{target:"e1i2llgv2"})((({theme:e})=>(0,b.GI)({theme:e,typography:"H4"})),{marginTop:"4px",textAlign:"center"},"label:H2Title;"),X=(0,g.Z)("p",{target:"e1i2llgv3"})((({theme:e})=>(0,b.GI)({theme:e,typography:"P2",fontWeight:"semiBold",fontFamily:"Proxima"})),{marginTop:"24px",marginBottom:"8px"},"label:PDesc;"),ee=(0,g.Z)("div",{target:"e1i2llgv4"})({marginTop:"16px"},"label:DivSwitchGroupContainer;"),te=(0,g.Z)("div",{target:"e1i2llgv5"})({display:"flex",flexDirection:"row",alignItems:"center",height:"40px"},"label:DivSwitchItemContainer;"),ie=(0,g.Z)("span",{target:"e1i2llgv6"})((({theme:e,disabled:t})=>[(0,b.GI)({theme:e,typography:"P2",fontWeight:"semiBold",color:t?"TextQuaternary":"TextPrimary"}),(0,b.YJ)({direction:e.direction,marginEnd:"12px"}),{flex:"1 1 auto"}]),"label:SpanSwitchText;"),oe=(0,g.Z)("p",{target:"e1i2llgv7"})((({theme:e})=>(0,b.GI)({theme:e,fontFamily:"Proxima",typography:"P4",color:"TextQuaternary"})),{marginTop:"4px"},"label:PHint;"),ne=(0,g.Z)("button",{target:"e1i2llgv8"})(b.Ph,(({theme:{colors:e}})=>({width:"100%",height:"48px",fontSize:"16px",lineHeight:"48px",borderTop:`1px solid ${e.LineSecondary}`,cursor:"pointer",color:e.TextPrimary})),"label:ButtonSave;"),ae=function(e){const{videoId:t,visible:i,onClose:n=u()}=e,r=(0,l.Q)(),s=(0,R.g)(t),d=(0,D.p)(null==s?void 0:s.author),{handleChange:c,optionsList:m,visibilityValue:h}=function({item:e,author:t}){const i=(0,l.Q)(),o=(0,M.qj)(Y.O),{forFriend:n,secret:r,id:s="",adAuthorization:d}=null!=e?e:{},{privateAccount:c}=null!=t?t:{};return{visibilityValue:(0,a.useMemo)((()=>n?"3":r?"2":"1"),[n,r]),optionsList:(0,a.useMemo)((()=>d?[{title:i("who_can_view_public"),desc:i("public_desc"),value:"1"},{title:i("new_video_status"),desc:i("pull_video_expl_available_for_ads"),value:"2"}]:[{title:i(c?"who_can_view_followers":"who_can_view_public"),desc:i(c?"followers_desc_for_private":"public_desc"),value:"1"},{title:i("who_can_view_friends"),desc:i("followers_desc"),value:"3"},{title:i("video_label_private"),desc:i("private_desc"),value:"2"}]),[d,c,i]),handleChange:(0,a.useCallback)((e=>{o.postModifyVisibility({aweme_id:s,type:e})}),[o,s])}}({item:s,author:d}),{comment:g,duet:v,stitch:b,hintTextKey:y}=function({item:e}){const[{isEnableDuet:t,isEnableStitch:i,isShowSafetyHint:o},n]=(0,M.b7)(K,{selector:e=>({isEnableDuet:0===e.videoPrivateSetting.duet.show_type,isEnableStitch:0===e.videoPrivateSetting.stitch.show_type,isShowSafetyHint:1===e.videoPrivateSetting.duet.res_type||1===e.videoPrivateSetting.stitch.res_type}),dependencies:[]}),r=1===(null==e?void 0:e.duetDisplay)||1===(null==e?void 0:e.stitchDisplay),l=3!==(null==e?void 0:e.itemCommentStatus),s=Boolean(null==e?void 0:e.duetEnabled)&&!r,d=Boolean(null==e?void 0:e.stitchEnabled)&&!r,c=Number(null==e?void 0:e.video.duration)>=61,u=(0,M.qj)(Y.O),p=(0,a.useMemo)((()=>o?"setting_disabled_16":r?"duet_stitch_minor":c?"hint2":"hint1"),[c,o,r]);(0,a.useEffect)((()=>{n.getVideoPrivateSetting()}),[n]);const m=(0,a.useCallback)((t=>{var i;u.postUserSetting({field:"item_comment",aweme_id:null!==(i=null==e?void 0:e.id)&&void 0!==i?i:"",private_setting:t?0:3})}),[null==e?void 0:e.id,u]),h=(0,a.useCallback)((t=>i=>{var o;u.postDuetOrStitchChange({aweme_id:null!==(o=null==e?void 0:e.id)&&void 0!==o?o:"",type:t,enable:i?0:1})}),[null==e?void 0:e.id,u]);return{comment:{checked:l,onChange:m},duet:{checked:s,disabled:c||!t||r,onChange:h("item_duet")},stitch:{checked:d,disabled:c||!i||r,onChange:h("item_stitch")},hintTextKey:p}}({item:s,author:d});return(0,o.jsxs)(p.AR,Object.assign({e2eData:"video-setting-list",compact:!0,isOpen:i,onClose:n},{children:[(0,o.jsxs)(Q,{children:[(0,o.jsx)(J,{children:r("privacy_set")},void 0),(0,o.jsx)(X,{children:r("view_access")},void 0),(0,o.jsx)(T,{e2eData:"video-setting-choose",itemE2eData:"video-watch-list",value:h,options:m,onChange:c},void 0),(0,o.jsxs)(ee,{children:[(0,o.jsx)(re,Object.assign({e2eData:"video-setting-comment",text:r("allow_comment")},g),void 0),(0,o.jsx)(re,Object.assign({e2eData:"video-setting-duet",text:r("allow_duet")},v),void 0),(0,o.jsx)(re,Object.assign({e2eData:"video-setting-stitch",text:r("allow_stitch")},b),void 0)]},void 0),(0,o.jsx)(oe,{children:r(y)},void 0)]},void 0),(0,o.jsx)(ne,Object.assign({"data-e2e":"video-setting-down",onClick:e.onClose},{children:r("privacy_settings_done")}),void 0)]}),void 0)},re=function(e){const{disabled:t,checked:i,text:n,e2eData:a}=e;return(0,o.jsxs)(te,{children:[(0,o.jsx)(ie,{children:n},void 0),(0,o.jsx)(m.r,{e2eData:a,checked:i,onChange:e.onChange,disabled:t},void 0)]},void 0)};var le=i(95028);const se=(0,g.Z)("div",{target:"e161jvwg0"})({position:"relative",flex:"0 0 24px",width:"24px",height:"24px"},"label:DivActionContainer;"),de=(0,g.Z)(le.Z,{target:"e161jvwg1"})({width:24,height:24,cursor:"pointer"},"label:StyledEllipsisHorizontal;"),ce=(0,g.Z)("ul",{target:"e161jvwg2"})((({theme:e})=>(0,b.GI)({theme:e,typography:"P2",fontWeight:"semiBold",fontFamily:"Proxima"})),{listStyle:"none",margin:"0",padding:"8px 16px",whiteSpace:"nowrap",minWidth:"200px"},"label:UlPopupContainer;"),ue=(0,g.Z)("li",{target:"e161jvwg3"})((({theme:{colors:e}})=>({position:"relative",padding:"13px",":last-of-type::before":{content:'""',position:"absolute",left:0,top:0,width:"100%",height:"1px",background:e.LineSecondary,transform:"scaleY(0.5)"}})),"label:LiPopupItem;"),pe=(0,g.Z)("button",{target:"e161jvwg4"})(b.Ph,(({theme:{colors:e}})=>({cursor:"pointer",color:e.TextPrimary,":hover":{color:e.Primary}})),"label:ButtonAction;"),me=(0,g.Z)("p",{target:"e1qpteip0"})((({theme:e})=>(0,b.GI)({theme:e,typography:"H4",fontWeight:"bold"})),{padding:"36px 32px",textAlign:"center",width:"332px"},"label:PDeleteTitle;"),he=(0,g.Z)("button",{target:"e1qpteip1"})(b.Ph,(({theme:{colors:e}})=>({width:"100%",height:"48px",fontSize:"16px",lineHeight:"48px",borderTop:`1px solid ${e.LineSecondary}`,cursor:"pointer",color:e.TextSecondary})),"label:ButtonConfirm;"),ge=(0,g.Z)(he,{target:"e1qpteip2"})((({theme:{colors:e}})=>({color:e.TextSecondary})),"label:StyledButtonCancel;"),ve=function(e){const{visible:t,onClose:i=u(),videoId:n}=e,s=(0,l.Q)(),d=(0,M.qj)(Y.O),c=(0,a.useCallback)((()=>{d.postVideoDelete({aweme_id:n,target:n}),null==i||i()}),[d,i,n]),m=(0,a.useCallback)((()=>{r.o.handleVideoDelete("cancel"),null==i||i()}),[i]);return(0,o.jsxs)(p.AR,Object.assign({e2eData:"video-delete-modal",isOpen:t,compact:!0,onClose:i},{children:[(0,o.jsx)(me,{children:s("delete_confirm")},void 0),(0,o.jsx)(he,Object.assign({"data-e2e":"video-modal-delete",type:"button",onClick:c},{children:s("delete")}),void 0),(0,o.jsx)(ge,Object.assign({"data-e2e":"video-modal-cancel",type:"button",onClick:m},{children:s("cancel_settings")}),void 0)]}),void 0)},be=function({videoId:e}){const{direction:t}=(0,n.u)(),i="ltr"===t?"bottomRight":"bottomLeft",c=(0,l.Q)(),{active:u,handleMouseEnter:p,handleMouseLeave:m}=(0,d.R)(),[h,g]=(0,a.useState)(!1),v=(0,a.useCallback)((()=>{g(!0)}),[]),b=(0,a.useCallback)((()=>{g(!1)}),[]),[y,f]=(0,a.useState)(!1),_=(0,a.useCallback)((()=>{f(!0),r.o.handleClickDeleteVideo({group_id:e})}),[e]),x=(0,a.useCallback)((()=>{f(!1)}),[]),{colors:w}=(0,n.u)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(se,Object.assign({"data-e2e":"video-setting",onMouseEnter:p,onMouseLeave:m},{children:[(0,o.jsx)(de,{},void 0),(0,o.jsx)(s.G,Object.assign({backgroundColor:w.BGSecondary,placement:i,active:u,margin:-11,arrowMargin:10},{children:(0,o.jsxs)(ce,{children:[(0,o.jsx)(ue,Object.assign({"data-e2e":"video-privacy-settings"},{children:(0,o.jsx)(pe,Object.assign({onClick:v,type:"button"},{children:c("privacy_set")}),void 0)}),void 0),(0,o.jsx)(ue,Object.assign({"data-e2e":"video-delete"},{children:(0,o.jsx)(pe,Object.assign({onClick:_,type:"button"},{children:c("delete")}),void 0)}),void 0)]},void 0)}),void 0)]}),void 0),(0,o.jsx)(ae,{videoId:e,visible:h,onClose:b},void 0),(0,o.jsx)(ve,{visible:y,onClose:x,videoId:e},void 0)]},void 0)}},19294:(e,t,i)=>{i.d(t,{_:()=>Re});var o=i(11040),n=i(9236),a=i(91051),r=i(21041),l=i(54724),s=i(24906),d=i(42626),c=i(90298),u=i(55198),p=i(64176),m=i(32273),h=i(45949),g=i(22597),v=i(32370),b=i(55383),y=i(17133);const f=(0,i(74752).ZP)({resolved:{},chunkName:()=>"editor",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(9505),i.e(5932),i.e(4620),i.e(1483),i.e(1189)]).then(i.bind(i,16034)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>16034});var _=i(81748),x=i(68191),w=i(36488);const k=(0,x.Z)("div",{target:"exl80ic0"})((({theme:{colors:e}})=>({width:"100%",height:"100%",display:"flex",flexDirection:"column-reverse",backgroundColor:e.BGPrimary})),"label:DivEmojiSuggestionContainer;"),C=(0,x.Z)("ul",{target:"exl80ic1"})((({theme:{colors:e}})=>({listStyleType:"none",margin:0,padding:0,order:1,flex:"0 0 38px",borderTop:`1px solid ${e.LineSecondary}`,display:"flex",flexDirection:"row"})),"label:UlNavContainer;"),j=(0,x.Z)("div",{target:"exl80ic2"})((({theme:{colors:e}})=>({order:2,flex:"1 1 100%",overflowY:"scroll",scrollbarWidth:"none","::-webkit-scrollbar":{width:4},"::-webkit-scrollbar-track":{marginTop:8},"::-webkit-scrollbar-thumb":{borderRadius:2,backgroundColor:e.LineSecondary},":hover::-webkit-scrollbar-thumb":{backgroundColor:e.TextQuaternary}})),"label:DivPanelContainer;"),S=(0,x.Z)("ul",{target:"exl80ic3"})({listStyleType:"none",margin:0,padding:0,width:"100%",height:"100%",display:"flex",flexWrap:"wrap"},"label:UlPanelList;"),P=(0,x.Z)("li",{target:"exl80ic4"})((({theme:e,theme:{colors:t},isActive:i})=>[(0,w.GI)({theme:e,color:"ConstBGInverse",typography:"H4"}),{listStyleType:"none",flex:"0 0 auto",width:40,height:40,lineHeight:"46px",margin:"5px 6px",cursor:"pointer",textAlign:"center",backgroundColor:i?t.BGInput:t.BGPrimary,borderRadius:8,":hover":{backgroundColor:t.BGInput}}]),"label:LiItem;"),T=(0,a.memo)((function({emojis:e,onSelect:t}){const i=(0,a.useRef)(-1),n=(0,a.useCallback)((e=>{const t=e.target;if("li"===t.nodeName.toLocaleLowerCase()){const e=t.getAttribute("data-index");i.current=e?Number(e):-1}}),[]),r=(0,a.useCallback)((()=>{var e,t;if("li"===(null===(e=document.activeElement)||void 0===e?void 0:e.nodeName.toLocaleLowerCase())){const e=null===(t=document.activeElement)||void 0===t?void 0:t.getAttribute("data-index");i.current=e?Number(e):-1}}),[]),l=(0,a.useCallback)((o=>{(0,h.NS)(o);const n=i.current;-1!==n&&t(e[n].emoji)}),[e,t]),s=(0,a.useCallback)((o=>{if(13===o.keyCode||32===o.keyCode){o.stopPropagation(),o.preventDefault();const n=i.current;-1!==n&&t(e[n].emoji)}}),[e,t]);return(0,o.jsx)(S,Object.assign({onMouseOver:n,onClick:l,onKeyDown:s},{children:e.map(((e,t)=>(0,o.jsx)(P,Object.assign({"data-index":t,isActive:!1,tabIndex:0,onFocus:r},{children:e.emoji}),e.alias)))}),void 0)})),I=[{name:"basic",data:_.Z,iconIndex:11}],O=(0,a.memo)((function(e){const[t,i]=(0,a.useState)(0),n=(0,a.useCallback)((e=>{(0,h.NS)(e);const t=e.target;if("li"===t.nodeName.toLocaleLowerCase()){const e=t.getAttribute("data-index");i(e?Number(e):0)}}),[]);return(0,o.jsxs)(k,{children:[(0,o.jsx)(C,Object.assign({onClick:n,role:"tablist"},{children:I.map((({name:e,data:i,iconIndex:n},a)=>(0,o.jsx)(P,Object.assign({"data-index":a,isActive:a===t,role:"tab",tabIndex:0,"aria-selected":a===t,"aria-controls":"emoji-panel-container"},{children:i[n].emoji}),e)))}),void 0),(0,o.jsx)(j,Object.assign({"data-e2e":"comment-emoji-group"},{children:(0,o.jsx)(T,{emojis:I[t].data,onSelect:e.onSelect},I[t].name)}),void 0)]},void 0)}));var D=i(10315),R=i(74820),M=i(68457),L=i(33642),B=i(4776),F=i(64047),E=i(73566),Z=i(48185),A=i(19630),U=i(82346),z=i(15608),W=i(11348),V=i(60595),q=i(20948),N=i(49584),H=i(53095),$=i(10026),G=i(5549),K=i(35435),Y=i(56979),Q=i(68854),J=i(21005),X=i(57244),ee=i(18645);let te=class{constructor(e){this.fetch=e}fetchAtDefaultList(){return this.fetch.get("/api/at/default/list/",{query:{cursor:0,count:25}})}fetchRecentContactList(e){return this.fetch.get("/api/mention/recent/contact/list/v1/",{query:{mentionType:3,secUid:e}})}fetchSearchList(e,t){return this.fetch.get("/api/comment/search/sug/user/",{query:{keyword:e,count:30,mention_type:3,uid_filter_list:t}})}};te=(0,F.__decorate)([(0,X.G)(),(0,F.__metadata)("design:paramtypes",[ee.r])],te);let ie=class extends E.D{constructor(e){super(),this.service=e,this.defaultState={keyword:"",loading:!1,isFetchError:!1,defaultResult:{list:[]},searchResult:{list:[],hasMore:!0,uidFilterList:""},activeList:[],activeItem:{index:null,isActivatedByMouse:!1},recentCount:0}}setKeyword(e,t){e.keyword=t}setLoading(e,t){e.loading=t}setFetchError(e,t){e.isFetchError=t,t&&(e.searchResult.hasMore=!1)}setActiveList(e,t){e.activeList=t}setActiveItem(e,t){const{index:i,isActivatedByMouse:o=!1}=t;e.activeItem.index=i,e.activeItem.isActivatedByMouse=o}activePrev(e){const{activeItem:t,activeList:i}=e,{index:o}=t;if(null===o)return;const{length:n}=i;0!==n&&(e.activeItem.index=Math.max(0,o-1),e.activeItem.isActivatedByMouse=!1)}activeNext(e){const{activeItem:t,activeList:i}=e,{index:o}=t;if(null===o)return;const{length:n}=i;0!==n&&(e.activeItem.index=Math.min(o+1,n-1),e.activeItem.isActivatedByMouse=!1)}setDefaultList(e,t){e.defaultResult.list=t,e.activeList=t}setSearchResult(e,t){e.searchResult=t,0===t.list.length?e.activeList=e.defaultResult.list:e.activeList=t.list}setRecentCount(e,t){e.recentCount=t}fetchDefaultResult(e){return e.pipe((0,q.M)(this.state$),(0,N.z)((([{secUid:e},t])=>t.defaultResult.list.length>0?(0,U.of)(this.getActions().setActiveItem({index:-1}),this.getActions().setKeyword(""),this.getActions().setActiveList(t.defaultResult.list)):(0,z.D)([this.service.fetchRecentContactList(e),this.service.fetchAtDefaultList()]).pipe((0,H.z)((([e,t])=>{const{statusCode:i,userList:o=[]}=e,{status_code:n,user_list:a=[],block_results:r=[]}=t;if(0===i||0===n){const e=a.map((e=>(0,L.yk)(e))).map((e=>(r.some((t=>((e,t)=>{var i,o;if(e.uid===t.id)return t.blockType=null===(o=null===(i=e.user_blocked_results)||void 0===i?void 0:i[0])||void 0===o?void 0:o.block_type,!0})(t,e))),e)));return(0,U.of)(this.getActions().setRecentCount(o.length),this.getActions().setDefaultList(function(e,t){let i=t;return e.forEach((e=>{i=i.filter((t=>e.uniqueId!==t.uniqueId))})),[...e,...i]}(o,e)))}return(0,U.of)(this.getActions().setFetchError(!0))})),(0,$.O)(this.getActions().setLoading(!0),this.getActions().setFetchError(!1),this.getActions().setActiveItem({index:null})),(0,G.l)(this.getActions().setLoading(!1),this.getActions().setActiveItem({index:-1}),this.getActions().setKeyword("")),(0,J.n)({})))))}fetchSearchResult(e){return e.pipe((0,q.M)(this.state$),(0,K.w)((([e,t])=>{const{keyword:i,searchResult:{uidFilterList:o,list:n,hasMore:a}}=t,r=e===i,l=r?o:"";return""===e||r&&!a?W.E:this.service.fetchSearchList(e,l).pipe((0,Y.U)((e=>{const{statusCode:t,userList:i=[],hasMore:o}=e;if(0===t||403===t||203===t){const e=r?[...n,...i]:i,t=encodeURIComponent(JSON.stringify(e.map((e=>e.id))));return this.getActions().setSearchResult({list:e,hasMore:1===o,uidFilterList:t})}return this.getActions().setFetchError(!0)})),(0,$.O)(this.getActions().setLoading(!r),this.getActions().setFetchError(!1),this.getActions().setActiveItem({index:r?t.activeItem.index:null})),(0,G.l)(this.getActions().setLoading(!1),this.getActions().setKeyword(e),this.getActions().setActiveItem({index:r?t.activeItem.index:-1})),(0,Q.K)((()=>(0,U.of)(this.getActions().setLoading(!1),this.getActions().setFetchError(!0)))))})))}};(0,F.__decorate)([(0,Z.lF)(),(0,F.__metadata)("design:type",Function),(0,F.__metadata)("design:paramtypes",[Object,String]),(0,F.__metadata)("design:returntype",void 0)],ie.prototype,"setKeyword",null),(0,F.__decorate)([(0,Z.lF)(),(0,F.__metadata)("design:type",Function),(0,F.__metadata)("design:paramtypes",[Object,Boolean]),(0,F.__metadata)("design:returntype",void 0)],ie.prototype,"setLoading",null),(0,F.__decorate)([(0,Z.lF)(),(0,F.__metadata)("design:type",Function),(0,F.__metadata)("design:paramtypes",[Object,Boolean]),(0,F.__metadata)("design:returntype",void 0)],ie.prototype,"setFetchError",null),(0,F.__decorate)([(0,Z.lF)(),(0,F.__metadata)("design:type",Function),(0,F.__metadata)("design:paramtypes",[Object,Array]),(0,F.__metadata)("design:returntype",void 0)],ie.prototype,"setActiveList",null),(0,F.__decorate)([(0,Z.lF)(),(0,F.__metadata)("design:type",Function),(0,F.__metadata)("design:paramtypes",[Object,Object]),(0,F.__metadata)("design:returntype",void 0)],ie.prototype,"setActiveItem",null),(0,F.__decorate)([(0,Z.lF)(),(0,F.__metadata)("design:type",Function),(0,F.__metadata)("design:paramtypes",[Object]),(0,F.__metadata)("design:returntype",void 0)],ie.prototype,"activePrev",null),(0,F.__decorate)([(0,Z.lF)(),(0,F.__metadata)("design:type",Function),(0,F.__metadata)("design:paramtypes",[Object]),(0,F.__metadata)("design:returntype",void 0)],ie.prototype,"activeNext",null),(0,F.__decorate)([(0,Z.lF)(),(0,F.__metadata)("design:type",Function),(0,F.__metadata)("design:paramtypes",[Object,Array]),(0,F.__metadata)("design:returntype",void 0)],ie.prototype,"setDefaultList",null),(0,F.__decorate)([(0,Z.lF)(),(0,F.__metadata)("design:type",Function),(0,F.__metadata)("design:paramtypes",[Object,Object]),(0,F.__metadata)("design:returntype",void 0)],ie.prototype,"setSearchResult",null),(0,F.__decorate)([(0,Z.lF)(),(0,F.__metadata)("design:type",Function),(0,F.__metadata)("design:paramtypes",[Object,Number]),(0,F.__metadata)("design:returntype",void 0)],ie.prototype,"setRecentCount",null),(0,F.__decorate)([(0,Z.Qm)(),(0,F.__metadata)("design:type",Function),(0,F.__metadata)("design:paramtypes",[V.y]),(0,F.__metadata)("design:returntype",void 0)],ie.prototype,"fetchDefaultResult",null),(0,F.__decorate)([(0,Z.Qm)(),(0,F.__metadata)("design:type",Function),(0,F.__metadata)("design:paramtypes",[V.y]),(0,F.__metadata)("design:returntype",void 0)],ie.prototype,"fetchSearchResult",null),ie=(0,F.__decorate)([(0,A.Y)("MentionSuggestionUserModule"),(0,F.__metadata)("design:paramtypes",[te])],ie);var oe=i(44663),ne=i(75311);const ae=(0,x.Z)("div",{target:"e16bf9xh0"})((({theme:{colors:e}})=>({width:"100%",height:"100%",overflowX:"hidden",overflowY:"scroll",backgroundColor:e.BGPrimary,scrollbarWidth:"none","::-webkit-scrollbar":{width:0}})),"label:DivContainer;"),re=(0,x.Z)("div",{target:"e16bf9xh1"})({display:"flex",flexDirection:"column",alignItems:"center"},"label:DivNotItemContainer;"),le=(0,x.Z)("p",{target:"e16bf9xh2"})((({theme:e})=>(0,w.GI)({theme:e,color:"TextTertiary",typography:"H6"})),{flex:"1 1 auto",margin:"18px auto"},"label:PLoadingText;"),se=(0,x.Z)("p",{target:"e16bf9xh3"})((({theme:e})=>(0,w.GI)({theme:e,color:"TextTertiary",typography:"H5"})),{flex:"1 1 auto",marginTop:106},"label:PErrorText;"),de=(0,x.Z)("p",{target:"e16bf9xh4"})((({theme:e})=>(0,w.GI)({theme:e,color:"Primary",typography:"H6"})),{flex:"1 1 auto",margin:"11px auto",cursor:"pointer"},"label:PRetryText;"),ce=(0,x.Z)("div",{target:"e16bf9xh5"})((({theme:{colors:e},isDisabled:t})=>({height:"100%",padding:"4px 0",margin:"0 16px",display:"flex",cursor:t?"default":"pointer",borderBottom:`1px solid ${e.LineSecondary}`})),"label:DivItemContainer;"),ue=(0,x.Z)("div",{target:"e16bf9xh6"})((({theme:{colors:e},isActive:t,isDisabled:i})=>({height:48,backgroundColor:t?e.BGView:e.BGPrimary,opacity:i?.34:1})),"label:DivItemBackground;"),pe=(0,x.Z)("div",{target:"e16bf9xh7"})([{flex:"1 1 auto",overflow:"hidden"},({theme:{direction:e}})=>(0,w.YJ)({direction:e,marginStart:8})],"label:DivInfoContainer;"),me=(0,x.Z)("p",{target:"e16bf9xh8"})([{display:"flex",alignItems:"center"}],"label:PMentionInfoLine;"),he=(0,x.Z)("span",{target:"e16bf9xh9"})((({theme:e})=>(0,w.GI)({theme:e,fontWeight:"semiBold",typography:"P3"})),w.wj,"label:SpanInfoNickname;"),ge=(0,x.Z)("span",{target:"e16bf9xh10"})((({theme:e})=>(0,w.GI)({theme:e,fontWeight:"normal",typography:"P4"})),w.wj,"label:SpanInfoUniqueId;"),ve=(0,x.Z)("span",{target:"e16bf9xh11"})({margin:"0px 4px"},"label:SpanInfoDot;"),be=(0,x.Z)("span",{target:"e16bf9xh12"})({fontSize:"10px"},"label:SpanInfoVerify;"),ye=(0,x.Z)("span",{target:"e16bf9xh13"})((({theme:e})=>(0,w.GI)({theme:e,color:"TextTertiary",fontWeight:"semiBold",typography:"P4"})),{verticalAlign:"middle",flexShrink:0},"label:SpanInfoFollowing;"),fe=(0,a.memo)((function({isActive:e,index:t,user:i}){var r;const l=(0,m.Q)(),{user:s}=null!==(r=(0,y.Lh)((()=>["user"]),[]))&&void 0!==r?r:{},{nickname:d,uniqueId:c,verified:u,relation:p,avatarThumb:h,blockType:g}=i,v=(0,a.useMemo)((()=>1===p||2===p),[p]),b=1===g||c===(null==s?void 0:s.uniqueId),{setActiveItem:f}=(0,n.qj)(ie),_=(0,a.useCallback)((()=>{f({index:t,isActivatedByMouse:!0})}),[f,t]),x=(0,a.useCallback)((()=>{_()}),[_]);return(0,o.jsx)(ue,Object.assign({"data-e2e":"comment-at-list",isActive:e,isDisabled:b,onMouseEnter:_,tabIndex:0,onFocus:x},{children:(0,o.jsxs)(ce,Object.assign({isDisabled:b},{children:[(0,o.jsx)(ne.q,{size:40,src:h,style:{flex:"0 0 40px"}},void 0),(0,o.jsxs)(pe,{children:[(0,o.jsxs)(me,{children:[(0,o.jsx)(he,Object.assign({"data-e2e":"comment-at-nickname"},{children:d}),void 0),u&&(0,o.jsx)(be,{children:(0,o.jsx)(oe.Q,{},void 0)},void 0),v&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ve,{children:""},void 0),(0,o.jsx)(ye,{children:l("Following")},void 0)]},void 0)]},void 0),(0,o.jsx)(me,{children:(0,o.jsx)(ge,Object.assign({"data-e2e":"comment-at-uniqueid"},{children:c}),void 0)},void 0)]},void 0)]}),void 0)}),void 0)}));var _e=i(96434);const xe=(0,a.memo)((function({keyword:e="",onSelect:t}){var i;const r=(0,m.Q)(),{colors:l}=(0,R.u)(),{user:s}=null!==(i=(0,y.Lh)((()=>["user"]),[]))&&void 0!==i?i:{},{secUid:c=""}=(0,L.m7)(s),[{loading:u,isFetchError:p,activeList:g,activeItem:v,recentCount:b},{fetchDefaultResult:f,fetchSearchResult:_}]=(0,n.b7)(ie),{index:x}=v,w=(0,a.useRef)(null),k=(0,a.useRef)([]);(0,a.useEffect)((()=>{f({secUid:c})}),[f,c]),(0,a.useEffect)((()=>{""===e?f({secUid:c}):_(e)}),[e,c,f,_]),(0,a.useEffect)((()=>{const{index:e,isActivatedByMouse:t}=v;t||function(e,t){if(null===t||-1===t||null===e.current)return;const i=48*t,o=48*(t+1),n=e.current.clientHeight,{scrollTop:a}=e.current;i<a?e.current.scrollTop=i:o>n+a&&(e.current.scrollTop=o-n)}(w,e)}),[v]);const C=(0,a.useCallback)((()=>""!==e&&_(e)),[_,e]);(0,B.s)({elemRef:w,onHitBottom:C,bottomThreshold:96});const j=(0,a.useCallback)((t=>{(0,h.NS)(t),""===e?f({secUid:c}):_(e)}),[c,f,_,e]),S=(0,a.useCallback)((e=>{(0,h.NS)(e),null==t||t()}),[t]),P=(0,a.useCallback)((t=>{g.slice(t,t+5).forEach(((i,o)=>{if(k.current[t+o])return;const{blockType:n,uniqueId:a,id:r,relation:l}=i,c=1===n||a===(null==s?void 0:s.uniqueId);let u="all_user";!e&&t+o<b?u="recent":1===l?u="following":2===l&&(u="friends"),d.y.handleMentionItemShow({to_user_id:r,user_type:u,search_keyword:e,is_valid:c?"0":"1"}),k.current[t+o]=!0}))}),[g,null==s?void 0:s.uniqueId,e,b]),T=(0,M.fB)((e=>{const{scrollTop:t}=e.target,i=Math.floor(t/48);P(i)}),[P],50);return(0,a.useEffect)((()=>{P(0)}),[P]),u?(0,o.jsx)(ae,{children:(0,o.jsxs)(re,{children:[(0,o.jsx)(_e.$,{size:26,fill:l.TextTertiary,style:{marginTop:80,flex:"1 1 auto"}},void 0),(0,o.jsx)(le,{children:r("comment_at_search")},void 0)]},void 0)},void 0):p?(0,o.jsx)(ae,{children:(0,o.jsxs)(re,{children:[(0,o.jsx)(se,{children:r("comment_at_load")},void 0),(0,o.jsx)(de,Object.assign({onClick:j},{children:r("comment_at_tryagain")}),void 0)]},void 0)},void 0):(0,o.jsx)(ae,Object.assign({ref:w,onClick:S,onScroll:T},{children:g.map(((e,t)=>(0,o.jsx)(fe,{user:e,index:t,isActive:x===t},t)))}),void 0)})),we=(0,x.Z)("div",{target:"e1rzzhjk0"})({display:"flex",flexDirection:"row",alignItems:"flex-end"},"label:DivCommentContainer;"),ke=(0,x.Z)("div",{target:"e1rzzhjk1"})({flex:"1 1 auto"},"label:DivLayoutContainer;"),Ce=(0,x.Z)("div",{target:"e1rzzhjk2"})((({theme:{colors:e},isFocus:t,isInVideoDetail:i})=>({position:"relative",display:"flex",flexDirection:"row",alignItems:"flex-end",backgroundColor:e.BGInput,boxSizing:"border-box",border:"1px solid",borderColor:t?e.LinePrimary:"transparent",borderRadius:8,padding:i?"0 9px 0 16px":"0 9px"})),"label:DivInputAreaContainer;");Ce.defaultProps=Object.assign(Object.assign({},Ce.defaultProps),{"data-e2e":"comment-input"});const je=(0,x.Z)("div",{target:"e1rzzhjk3"})((({isInVideoDetail:e=!1})=>({flex:"1 1 auto",height:"auto",margin:e?"11px 0":"10px 0"})),(({theme:{direction:e}})=>(0,w.YJ)({direction:e,marginEnd:8})),"label:DivInputEditorContainer;");function Se({theme:e,isActive:t=!1,isInVideoDetail:i=!1}){return[{flex:"0 0 32px",width:32,height:32,padding:5,margin:i?"7px 3px":3,cursor:"pointer",backgroundColor:t?e.colors.ShadowPrimary:"transparent",borderRadius:8,":hover":{backgroundColor:e.colors.ShadowPrimary},svg:{width:"100%",height:"100%"}}]}je.defaultProps=Object.assign(Object.assign({},je.defaultProps),{"data-e2e":"comment-text"});const Pe=(0,x.Z)("div",{target:"e1rzzhjk4"})(Se,"label:DivMentionButton;");Pe.defaultProps=Object.assign(Object.assign({},Pe.defaultProps),{"data-e2e":"comment-at-icon"});const Te=(0,x.Z)("div",{target:"e1rzzhjk5"})(Se,"label:DivEmojiButton;");Te.defaultProps=Object.assign(Object.assign({},Te.defaultProps),{"data-e2e":"comment-emoji-icon"});const Ie=(0,x.Z)("div",{target:"e1rzzhjk6"})((({theme:e,isActive:t,isInVideoDetail:i=!1})=>[(0,w.GI)({theme:e,color:t?"Primary":"TextQuaternary",typography:"H6",fontWeight:"semiBold"}),{cursor:t?"pointer":"default",flex:"0 0 48px",fontSize:i?"16px":"14px",lineHeight:i?"48px":"39px",textAlign:(0,w.$K)(e.direction,"end")},(0,w.YJ)({direction:e.direction,marginEnd:4})]),"label:DivPostButton;");Ie.defaultProps=Object.assign(Object.assign({},Ie.defaultProps),{"data-e2e":"comment-post"});const Oe=(0,x.Z)("div",{target:"e1rzzhjk7"})((({display:e,theme:{colors:t,direction:i}})=>[{position:"absolute",zIndex:1,width:280,height:256,top:-256,borderRadius:8,overflow:"hidden",backgroundColor:t.BGPrimary,boxShadow:`${t.ShadowPrimary} 0px 4px 16px 0px`,display:e?"block":"none"},(0,w.YJ)({direction:i,start:44})]),"label:DivMentionSuggestionContainer;"),De=(0,x.Z)("div",{target:"e1rzzhjk9"})((({theme:{colors:e,direction:t}})=>[{position:"absolute",width:368,height:300,top:-300,borderRadius:8,overflow:"hidden",backgroundColor:e.BGPrimary,boxShadow:`${e.ShadowPrimary} 0px 4px 16px 0px`,outline:0,zIndex:1},(0,w.YJ)({direction:t,end:12})]),"label:DivEmojiPanelContainer;"),Re=(0,a.memo)((function({itemId:e,disable:t,teaParams:i,onBlur:_=(()=>{}),onFocus:x=(()=>{})}){var w;const{user:k}=null!==(w=(0,y.Lh)((()=>["user"]),[]))&&void 0!==w?w:{},[{activeItem:C,activeList:j},{activePrev:S,activeNext:P}]=(0,n.b7)(ie,{selector:({activeItem:e,activeList:t})=>({activeItem:e,activeList:t}),dependencies:[]}),{index:T}=C,[{isInputEmpty:I,isInputFocus:R},{publishComment:M,setNeedResetKeyword:L,setIsInputFocus:B}]=(0,n.b7)(D.p,{selector:e=>({isInputEmpty:e.isInputEmpty,isInputFocus:e.isInputFocus}),dependencies:[]}),[F,E]=(0,a.useState)(null),[Z,A]=(0,a.useState)(!1),U=(0,a.useRef)(null),z=(0,a.useRef)(null),W=(0,m.Q)(),[V,q]=(0,a.useState)(!1);(0,a.useEffect)((()=>{q(!0)}),[]);const N=(0,a.useCallback)((e=>{var t;(0,h.NS)(e),null===(t=z.current)||void 0===t||t.handleInsertMentionTrigger(),d.y.handleSearchAt(Object.assign(Object.assign({},i),{enter_method:"button"}))}),[i]),H=(0,a.useCallback)((e=>{var t;13!==e.keyCode&&32!==e.keyCode||(e.stopPropagation(),e.preventDefault(),null===(t=z.current)||void 0===t||t.handleInsertMentionTrigger(),d.y.handleSearchAt(Object.assign(Object.assign({},i),{enter_method:"button"})))}),[i]),$=(0,a.useCallback)((e=>{"@"===e&&d.y.handleSearchAt(Object.assign(Object.assign({},i),{enter_method:"input"}))}),[i]),G=(0,a.useCallback)((()=>{var e;if(null===F||null===T)return;const t=j[T];t&&(1!==t.blockType?t.uniqueId!==(null==k?void 0:k.uniqueId)?(null===(e=z.current)||void 0===e||e.handleSelectUser(t),d.y.handleSelectAt(Object.assign(Object.assign({},i),{to_user_id:t.id}))):u.h.open({content:W("no_at_me"),duration:3,widthType:"half",getContainer:v.Z,getContainerPosition:"fixed"}):u.h.open({content:W("mention_privacy_toast_cant_mention"),duration:3,widthType:"half",getContainer:v.Z,getContainerPosition:"fixed"}))}),[T,j,F,W,i,k]),K=(0,a.useCallback)((e=>{var t,o,n;null===(t=z.current)||void 0===t||t.handleSelectEmoji(e),A(!1),d.y.handleEmojiSelect(Object.assign(Object.assign({},i),{enter_method:"button",emoji_code:null===(n=e,o=[...n].map((e=>`${e.codePointAt(0)}`)))||void 0===o?void 0:o[0]}))}),[i]),Y=(0,a.useCallback)((e=>{var t;(0,h.NS)(e),A(!Z),E(null),null===(t=z.current)||void 0===t||t.focus()}),[Z]),Q=(0,a.useCallback)((e=>{13===e.keyCode||32===e.keyCode?(e.stopPropagation(),e.preventDefault(),A(!Z),E(null)):Z&&27===e.keyCode&&(e.stopPropagation(),e.preventDefault(),A(!1),E(null))}),[Z]),J=(0,a.useCallback)((e=>{Z&&27===e.keyCode&&(e.stopPropagation(),e.preventDefault(),A(!1),E(null))}),[Z]),X=(0,a.useCallback)((t=>()=>{var o,n;if(!I){const a=null!==(n=null===(o=z.current)||void 0===o?void 0:o.getTextInfo())&&void 0!==n?n:{inputText:"",textExtra:[]};M(Object.assign(Object.assign({awemeId:e},a),{teaParams:Object.assign(Object.assign({},i),{enter_method:t})}))}}),[I,e,M,i]),ee=null!==F&&!Z,te=(0,a.useCallback)((e=>t=>{I||13!==t.keyCode&&32!==t.keyCode||(t.stopPropagation(),t.preventDefault(),X(e)())}),[I,X]),oe=(0,a.useCallback)((()=>{B(!0),x()}),[x]),ne=(0,a.useCallback)((()=>{B(!1),_(),c.V.handleCloseText({group_id:i.group_id})}),[_,i.group_id]),ae=(0,a.useCallback)((()=>{c.V.handleEnterText({group_id:i.group_id})}),[i.group_id]),re=(0,b.J)({upHandler:S,downHandler:P,confirmHandler:G});(0,a.useEffect)((()=>{const e=()=>{Z&&A(!1),L(!0)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[Z,L]);const{pathname:le}=(0,r.TH)(),se=(0,g.cQ)(le);return(0,o.jsxs)(we,{children:[(0,o.jsx)(ke,{children:(0,o.jsxs)(Ce,Object.assign({isInVideoDetail:se,isFocus:R,onKeyDown:re,onFocus:oe,onBlur:ne,onClick:ae},{children:[(0,o.jsx)(je,Object.assign({isInVideoDetail:se},{children:V?(0,o.jsx)(f,{ref:z,disable:t,onKeywordChange:E,onPost:X("input"),onInputTrigger:$},void 0):null}),void 0),(0,o.jsx)(p.u,Object.assign({fullscreenAdjust:!0,overlay:W("comment_tray_at")},{children:(0,o.jsx)(Pe,Object.assign({"aria-label":W("comment_tray_at"),"aria-expanded":ee,role:"button",isInVideoDetail:se,onClick:N,onKeyDown:H,tabIndex:0},{children:(0,o.jsx)(l.Z,{},void 0)}),void 0)}),void 0),(0,o.jsx)(p.u,Object.assign({fullscreenAdjust:!0,overlay:W("comment_tray_emoji")},{children:(0,o.jsx)(Te,Object.assign({"aria-label":W("comment_tray_emoji"),"aria-expanded":Z,role:"button",isInVideoDetail:se,isActive:Z,onClick:Y,onKeyDown:Q,tabIndex:0},{children:(0,o.jsx)(s.Z,{},void 0)}),void 0)}),void 0),ee&&(0,o.jsx)(Oe,Object.assign({"data-e2e":"comment-at-user",display:j.length>0},{children:(0,o.jsx)(xe,{keyword:F,onSelect:G},void 0)}),void 0),Z&&(0,o.jsx)(De,Object.assign({"data-e2e":"comment-emoji-list",ref:U,onKeyDown:J},{children:(0,o.jsx)(O,{onSelect:K},void 0)}),void 0)]}),void 0)},void 0),(0,o.jsx)(Ie,Object.assign({"aria-disabled":I,"aria-label":W("comment_tray_btn"),role:"button",isInVideoDetail:se,isActive:!I,onClick:X("button"),onKeyDown:te("button"),tabIndex:0},{children:W("comment_tray_btn")}),void 0)]},void 0)}))},10315:(e,t,i)=>{i.d(t,{p:()=>j});var o=i(64047),n=i(73566),a=i(48185),r=i(19630),l=i(35167),s=i(82346),d=i(60595),c=i(20948),u=i(49584),p=i(93859),m=i(53095),h=i(42626),g=i(55198),v=i(21005),b=i(66891),y=i(32370),f=i(32258),_=i(57244),x=i(70526),w=i(18645);let k=class{constructor(e){this.fetch=e}publishRequest(e){return this.fetch.post("/api/comment/publish/",{query:e,baseUrlType:8,headers:{[x.eD]:this.fetch.csrfToken}})}};k=(0,o.__decorate)([(0,_.G)(),(0,o.__metadata)("design:paramtypes",[w.r])],k);const C={nickname:"",replyId:void 0,replyToReplyId:void 0,position:-1};let j=class extends n.D{constructor(e,t,i){super(),this.service=e,this.commentV2=t,this.t=i,this.defaultState={reply:Object.assign({},C),mentionUserList:[],isInputEmpty:!0,isInputFocus:!1,needClearInput:!1,needResetKeyword:!1}}setReply(e,t){e.reply=null===t?Object.assign({},C):t}setMentionUserList(e,t){e.mentionUserList=null===t?[]:t}setIsInputEmpty(e,t){e.isInputEmpty=t}setIsInputFocus(e,t){e.isInputFocus=t}setNeedClearInput(e,t){e.needClearInput=t}setNeedResetKeyword(e,t){e.needResetKeyword=t}publishComment(e){return e.pipe((0,c.M)(this.state$),(0,u.z)((([e,t])=>{const{awemeId:i,inputText:o,textExtra:n,teaParams:a}=e,{reply:{replyId:r,replyToReplyId:l,nickname:d,position:c}}=t,u={aweme_id:i,text:o,reply_id:r,reply_to_reply_id:l,text_extra:JSON.stringify(n)};return this.service.publishRequest(u).pipe((0,p.b)((({status_code:e,comment:t})=>{if(0===e){const e=Boolean(d)?"0"===l?"reply":"reply_to_reply":"original",i=d?this.t("comment_reply_success"):this.t("comment_post_success");g.h.destroy(),g.h.open({content:i,duration:3,getContainer:y.Z,getContainerPosition:"fixed"}),h.y.handlePostComment(Object.assign(Object.assign({},a),{comment_category:e,comment_id:t.cid}))}else 22===e?(g.h.destroy(),g.h.open({content:this.t("comment_banned_toast"),duration:3,getContainer:y.Z,getContainerPosition:"fixed"})):e?(g.h.destroy(),g.h.open({content:this.t("comment_post_failed"),duration:3,getContainer:y.Z,getContainerPosition:"fixed"})):(g.h.destroy(),g.h.open({content:this.t("comment_nointernet_toast"),duration:3,getContainer:y.Z,getContainerPosition:"fixed"}))})),(0,m.z)((({status_code:e,comment:t})=>0===e?d?(0,s.of)(this.getActions().setNeedClearInput(!0),this.commentV2.getActions().handleReplySuccess({comment:t,position:c})):(0,s.of)(this.getActions().setNeedClearInput(!0),this.commentV2.getActions().handlePostSuccess(t)):(0,s.of)(this.noop()))),(0,v.n)({}))})))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setReply",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setMentionUserList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setIsInputEmpty",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setIsInputFocus",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setNeedClearInput",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setNeedResetKeyword",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[d.y]),(0,o.__metadata)("design:returntype",d.y)],j.prototype,"publishComment",null),j=(0,o.__decorate)([(0,r.Y)("CommentInputModule"),(0,o.__param)(2,(0,l.t)(b.s$)),(0,o.__metadata)("design:paramtypes",[k,f.x,Function])],j)},31014:(e,t,i)=>{i.d(t,{r:()=>u});var o=i(64047),n=i(73566),a=i(48185),r=i(19630),l=i(72072),s=i.n(l),d=i(59245),c=i.n(d);let u=class extends n.D{constructor(){super(...arguments),this.defaultState={}}setItem(e,t){e[t.cid]=t}setItemDiggState(e,t){e[t.cid]&&(e[t.cid].user_digged=t.digged)}setItemDiggCount(e,t){e[t.cid]&&(e[t.cid].digg_count=t.count)}removeItem(e,t){e[t]=void 0}multiSetCommentItem(e,t){t.forEach((t=>{e[t.cid]=s()({},e[t.cid],t)}))}multiRemoveCommentItem(e,t){return t.forEach((t=>{e[t]=void 0})),e}reduceOrIncreaseCommentCount(e,{cid:t,isReduce:i}){var o,n;if(!e[t])return;const a=Number(null!==(n=null===(o=e[t])||void 0===o?void 0:o.reply_comment_total)&&void 0!==n?n:0);e[t].reply_comment_total=i?a-1:a+1}getProcessedCommentItem(e,t={}){var i;const o=c()(e,"user","reply_comment");return o.user=null!==(i=e.user.unique_id)&&void 0!==i?i:"",!e.reply_comment||t.ignoreReply?[o]:[o,...e.reply_comment.reduce(((e,t)=>(this.getProcessedCommentItem(t).forEach((t=>{e.push(t)})),e)),[])]}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],u.prototype,"setItem",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],u.prototype,"setItemDiggState",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],u.prototype,"setItemDiggCount",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],u.prototype,"removeItem",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],u.prototype,"multiSetCommentItem",null),(0,o.__decorate)([(0,a.j)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],u.prototype,"multiRemoveCommentItem",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],u.prototype,"reduceOrIncreaseCommentCount",null),u=(0,o.__decorate)([(0,r.Y)("CommentItem")],u)},87812:(e,t,i)=>{i.d(t,{$:()=>kt});var o=i(11040),n=i(9236),a=i(91051),r=i(21041),l=i(32273),s=i(87342),d=i(90293),c=i(33693),u=i(17133),p=i(22377),m=i(76126),h=i(26641),g=i(99297),v=i(29025),b=i(95872),y=i(42143),f=i(93179),_=i(66599),x=i(38310),w=i(31014),k=i(74820),C=i(9432),j=i(55198),S=i(45949),P=i(32370),T=i(48088),I=i(39696),O=i(85640),D=i(53462),R=i(68191),M=i(95028),L=i(36488);const B=(0,R.Z)("div",{target:"esns4rh0"})([({theme:{direction:e}})=>[(0,L.YJ)({direction:e,marginStart:"18px",paddingEnd:"2px"}),{width:"24px",flex:"0 0 24px",display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"24px"}]],"label:DivActionContainer;"),F=(0,R.Z)("div",{target:"esns4rh1"})({position:"relative",display:"none"},"label:DivMoreContainer;"),E=(0,R.Z)(M.Z,{target:"esns4rh2"})({width:"24px",height:"24px",cursor:"pointer",display:"block"},"label:StyledMoreIcon;");E.defaultProps=Object.assign(Object.assign({},E.defaultProps),{"data-e2e":"comment-more-icon"});const Z=(0,R.Z)("div",{target:"esns4rh3"})((({theme:e})=>(0,L.GI)({theme:e,typography:"P2",fontWeight:"bold",fontFamily:"Proxima"})),{padding:"8px 16px",minWidth:"200px"},"label:DivPopupContainer;"),A=(0,R.Z)("p",{target:"esns4rh4"})((({theme:{colors:e}})=>({display:"flex",alignItems:"center",padding:"12px 0",whiteSpace:"nowrap",cursor:"pointer","&:not(:last-of-type)":{borderBottom:`1px solid ${e.LineSecondary}`},":hover":{color:e.Primary}})),"label:PActionItem;"),U=(0,R.Z)("span",{target:"esns4rh5"})((({theme:{direction:e}})=>(0,L.YJ)({direction:e,marginStart:"12px"})),"label:SpanActionText;"),z=(0,R.Z)("div",{target:"esns4rh6"})((({theme:e})=>(0,L.GI)({theme:e,typography:"H4",fontFamily:"Sofia",fontWeight:"bold"})),{padding:"28px 24px",textAlign:"center"},"label:DivModalContentContainer;"),W=(0,R.Z)("div",{target:"esns4rh7"})({display:"flex",flexDirection:"column"},"label:DivButtonContainer;"),V=(0,R.Z)("button",{target:"esns4rh8"})(L.Ph,(({primary:e,theme:t})=>[(0,L.GI)({theme:t,typography:"H6",color:e?"TextPrimary":"TextTertiary",fontWeight:e?"semiBold":"normal"}),{height:"48px",lineHeight:"48px",cursor:"pointer","::before":{content:'""',width:"100%",height:"1px",display:"block",background:t.colors.LineSecondary,transform:"scaleY(0,5)"}}]),"label:ButtonAction;"),q=(0,R.Z)("div",{target:"e1qi8jyk0"})((({theme:{direction:e}})=>[(0,L.YJ)({direction:e,marginStart:"8px"}),{width:"24px",flex:"0 0 24px",display:"flex",flexDirection:"column",alignItems:"center",marginLift:"auto"}]),"label:DivActionContainer;"),N=(0,R.Z)("div",{target:"e1qi8jyk1"})({width:"310px"},"label:DivModalContainer;"),H=function({shouldShowMore:e=!1,wordId:t="",id:i="",word:r=""}){var s;const d=(0,l.Q)(),c=(0,P.Z)(),{direction:p}=(0,k.u)(),{active:m,handleMouseEnter:h,handleMouseLeave:g}=(0,T.R)(),[,v]=(0,n.b7)(D.Eg),{user:b}=null!==(s=(0,u.Lh)((()=>["user"]),[]))&&void 0!==s?s:{},f=(0,a.useCallback)((e=>{13===e.keyCode||32===e.keyCode?((0,S.NS)(e),m?g():h()):27===e.keyCode&&m&&((0,S.NS)(e),g())}),[h,g,m]),_=(0,a.useCallback)((e=>t=>{13!==t.keyCode&&32!==t.keyCode||((0,S.NS)(t),e(t))}),[]),{handleShowReport:x,handleClickReport:w}={handleShowReport:(0,a.useCallback)((({id:e,word:t,wordId:i})=>{y.xq.handleCommentRelatedSearchBoardShow({enter_group_id:e,board_type:"pc",group_id:i,words_content:t})}),[]),handleClickReport:(0,a.useCallback)((({id:e,word:t,wordId:i,detail:o})=>{y.xq.handleCommentRelatedSearchBoardClick({enter_group_id:e,board_type:"pc",group_id:i,words_content:t,click_detail:o})}),[])},R="ltr"===p?"bottomRight":"bottomLeft",{colors:M}=(0,k.u)(),[L,B]=(0,a.useState)(!1),H=(0,a.useCallback)((()=>{x({id:i,word:r,wordId:t}),B(!0)}),[x,i,r,t]),$=(0,a.useCallback)((e=>{w({id:i,word:r,wordId:t,detail:e}),"cancel"!==e&&(v.setBlockListByUid({blockId:t,uid:null==b?void 0:b.uid,blockType:"wordIdList"}),j.h.open({content:d("Thank you for your feedback"),duration:3})),B(!1)}),[v,w,i,d,b,r,t]),G=(0,a.useMemo)((()=>[{key:"Not interested",i18nKey:"searchquerycomment_feedbackpanel_notinterested"},{key:"Unrelated content",i18nKey:"searchquerycomment_feedbackpanel_unrelated"},{key:"Inappropriate content",i18nKey:"searchquerycomment_feedbackpanel_inappropriate"},{key:"others",i18nKey:"searchquerycomment_feedbackpanel_others"},{key:"cancel",i18nKey:"comment_delete_cancel"}].map((e=>Object.assign(Object.assign({},e),{onClick:()=>$(e.key)})))),[$]);return(0,o.jsxs)(q,{children:[(0,o.jsxs)(F,Object.assign({"aria-label":d("pc_web_more_btn"),role:"button",shouldShowMore:e,onMouseEnter:h,onMouseLeave:g,tabIndex:0,onKeyDown:f},{children:[(0,o.jsx)(E,{},void 0),(0,o.jsx)(I.G,Object.assign({backgroundColor:M.BGSecondary,active:m,placement:R,margin:-6},{children:(0,o.jsx)(Z,{children:(0,o.jsxs)(A,Object.assign({"aria-label":d("Report"),role:"button",onClick:H,tabIndex:0,onKeyDown:_(H),"data-e2e":"comment-top-report"},{children:[(0,o.jsx)(C.Z,{width:24,height:24},void 0),(0,o.jsx)(U,{children:d("Report")},void 0)]}),void 0)},void 0)}),void 0)]}),void 0),(0,o.jsx)(O.u_,Object.assign({visible:L,parentRef:c},{children:(0,o.jsxs)(N,{children:[(0,o.jsx)(z,{children:d("searchquerycomment_feedbackpanel_header")},void 0),(0,o.jsx)(W,{children:G.map((({i18nKey:e,key:t,onClick:i})=>(0,o.jsx)(V,Object.assign({primary:"cancel"!==t,onClick:i},{children:d(e)}),t)))},void 0)]},void 0)}),void 0)]},void 0)};var $=i(66791);const G=(0,R.Z)("div",{target:"eej7vwn0"})((({theme:e})=>(0,L.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold"})),{width:"100%",height:"64px",display:"flex",padding:"24px 41px 24px 32px",alignItems:"center",flexShrink:0,boxSizing:"border-box",lineHeight:"20px",position:"relative",fontSize:"16px"},"label:DivCommentTop;"),K=(0,R.Z)("span",{target:"eej7vwn1"})((({theme:{colors:e}})=>({color:e.TextTertiaryAlt})),"label:SpanHint;"),Y=(0,R.Z)("span",{target:"eej7vwn2"})({cursor:"pointer",display:"flex",overflow:"hidden",flex:1},"label:SpanWordContainer;"),Q=(0,R.Z)("span",{target:"eej7vwn3"})((({theme:{colors:e}})=>({color:e.AssistColorAzure,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})),"label:SpanWord;"),J=(0,R.Z)($.Z,{target:"eej7vwn4"})((({theme:{colors:e}})=>({width:"10px",height:"10px",flexShrink:0,color:e.AssistColorAzure})),"label:StyledMagnifyingGlass;"),X=(0,a.memo)((function({id:e,onClose:t}){var i;const{abTestVersion:l}=null!==(i=(0,u.Lh)((()=>["abTestVersion"]),[]))&&void 0!==i?i:{},s="v2"===(0,g.N8)(l,"search_entry_comment_top"),{wordList:f,hintText:_,logId:x}=(0,p.XB)(e,"comment_top"),{word:w,word_id:k}=(0,a.useMemo)((()=>{var e;return null!==(e=f[0])&&void 0!==e?e:{}}),[f]),C=(0,r.TH)(),j=(0,r.k6)(),{isOpenNewTab:S}=(0,v.EA)(),{handleShowReport:P,handleClickReport:T}={handleShowReport:(0,a.useCallback)((({word:e,id:t,wordId:i,logId:o})=>{y.xq.handleTrendingShow({words_source:"comment_related_search",search_position:b.W.commonParams.page_name,enter_from:b.W.commonParams.page_name,words_num:1,previous_page:b.W.commonParams.previous_page,raw_query:"",impr_id:null!=o?o:""}),y.xq.handleTrendingWordsShow({enter_from:b.W.commonParams.page_name,words_source:"comment_related_search",words_content:e,previous_page:b.W.commonParams.previous_page,words_position:0,enter_group_id:t,group_id:i,impr_id:null!=o?o:"",words_type:""})}),[]),handleClickReport:(0,a.useCallback)((({word:e,id:t,wordId:i,logId:o})=>{y.xq.handleTrendingWordsClick({enter_from:b.W.commonParams.page_name,words_source:"comment_related_search",words_content:e,previous_page:b.W.commonParams.previous_page,words_position:0,enter_group_id:t,group_id:i,impr_id:null!=o?o:"",words_type:""})}),[])},I=(0,a.useCallback)((i=>{T({word:w,id:e,wordId:k,logId:x});const o=Date.now(),n=(0,m.C)({location:C,to:{pathname:c.SN.searchHome(),search:{q:w,t:o}}}),a={searchSource:"comment_related_search",enterMethod:"click_icon"};S?window.open((0,d.stringifyUrl)({url:n,query:a})):(null==t||t(i,!0),j.push(n,a))}),[T,t,j,e,S,C,x,w,k]),{loginUserId:O}=(0,n.mp)(h.G,{selector:e=>{var t,i;return{loginUserId:null===(i=null===(t=e.appContext)||void 0===t?void 0:t.user)||void 0===i?void 0:i.uniqueId}},dependencies:[]}),D=Boolean(O),[R,M]=(0,a.useState)(!1),L=(0,a.useCallback)((()=>{D&&M(!0)}),[D]),B=(0,a.useCallback)((()=>M(!1)),[]),F=Boolean(w&&_&&s);return(0,a.useEffect)((()=>{F&&P({word:w,id:e,wordId:k,logId:x})}),[P,F,e,x,w,k]),F?(0,o.jsxs)(G,Object.assign({onMouseEnter:L,onMouseLeave:B},{children:[(0,o.jsx)(K,{children:_},void 0),"",(0,o.jsxs)(Y,Object.assign({onClick:I},{children:[(0,o.jsx)(Q,{children:w},void 0),(0,o.jsx)(J,{},void 0)]}),void 0),(0,o.jsx)(H,{shouldShowMore:R,word:w,wordId:k,id:e},void 0)]}),void 0):null}));var ee=i(32258),te=i(99116),ie=i(87930),oe=i(13006),ne=i(42626),ae=i(44663),re=i(75311),le=i(45313),se=i(99087),de=i(87458),ce=i(33642),ue=i(3148),pe=i(71300),me=i(50894),he=i(9472),ge=i(83014),ve=i(10315),be=i(5535),ye=i(26183),fe=i(25772);const _e=(0,R.Z)("div",{target:"ezxoskx0"})((({theme:e})=>(0,L.GI)({theme:e,typography:"P4",color:"TextTertiary"})),{width:"20px",display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer"},"label:DivLikeWrapper;"),xe=(0,R.Z)(_e,{target:"ezxoskx1"})((({theme:e})=>(0,L.YJ)({direction:e.direction,marginStart:"24px"})),{width:"unset",height:"20px",display:"inline-flex",flexDirection:"row",alignItems:"center",cursor:"pointer",verticalAlign:"bottom"},"label:StyledLikeWrapper;"),we=(0,R.Z)("span",{target:"ezxoskx2"})((({theme:e})=>(0,L.GI)({theme:e,typography:"P4"})),(({theme:e})=>(0,L.YJ)({direction:e.direction,marginStart:"4px"})),"label:SpanCount;");we.defaultProps=Object.assign(Object.assign({},we.defaultProps),{"data-e2e":"comment-like-count"});const ke=(0,a.memo)((function(e){const{count:t,liked:i,onClick:n}=e,{colors:r}=(0,k.u)(),s=(0,l.Q)(),d=(0,a.useCallback)((e=>{13!==e.keyCode&&32!==e.keyCode||(e.stopPropagation(),e.preventDefault(),n())}),[n]),c=i?(0,o.jsx)(fe.Z,{width:20,height:20,fill:r.Primary},void 0):(0,o.jsx)(ye.Z,{width:20,height:20},void 0);return(0,o.jsxs)(_e,Object.assign({"aria-label":`${s("accessibilityLabels_forYou_btn_like").replace("%d",(0,ce.BT)(t))}`,"aria-pressed":i,role:"button",onClick:n,tabIndex:0,onKeyDown:d},{children:[(0,o.jsx)("div",Object.assign({"data-e2e":"comment-like-icon"},{children:c}),void 0),(0,o.jsx)(we,Object.assign({style:{marginLeft:0,marginRight:0}},{children:(0,ce.BT)(t)}),void 0)]}),void 0)})),Ce=(0,a.memo)((function(e){const{count:t,liked:i,isUIOptimization:n}=e,{colors:a}=(0,k.u)(),r=i?(0,o.jsx)(fe.Z,{width:20,height:20,fill:a.Primary},void 0):(0,o.jsx)(ye.Z,{width:20,height:20},void 0);return(0,o.jsxs)(xe,Object.assign({onClick:e.onClick},{children:[r,(0,o.jsx)(we,Object.assign({style:{color:n?a.TextTertiaryAlt:a.TextPrimary,fontSize:"14px"}},{children:(0,ce.BT)(t)}),void 0)]}),void 0)})),je=function(e){const{itemId:t,cid:i,count:r,liked:s,onDelete:d,isShowReport:c,isShowDelete:u,inDetailPage:p=!1}=e,m=(0,l.Q)(),{direction:g}=(0,k.u)(),{active:v,handleMouseEnter:b,handleMouseLeave:y}=(0,T.R)(),j=function({itemId:e,cid:t,onShow:i}){var o;const a=(0,n.mp)(h.G,{selector:e=>e.lang,dependencies:[]}),r=(0,n.mp)(x.A,{selector:t=>{var i,o;return null!==(o=null===(i=t[e])||void 0===i?void 0:i.author)&&void 0!==o?o:""},dependencies:[e]}),l=(0,n.mp)(w.r,{dependencies:[t],selector:e=>e[t]}),s=(0,n.mp)(_.z,{dependencies:[null==l?void 0:l.user],selector:e=>{var t,i;return null===(i=e.users[null!==(t=null==l?void 0:l.user)&&void 0!==t?t:""])||void 0===i?void 0:i.secUid}}),d=(0,n.mp)(x.A,{selector:t=>t[e],dependencies:[e]}),c=(0,n.mp)(_.z,{selector:e=>{var t;return e.users[null!==(t=null==d?void 0:d.author)&&void 0!==t?t:""]},dependencies:[null==d?void 0:d.author]}),{handleShowReport:u}=(0,f.Qi)({onShow:i,reportTarget:{lang:a,report_type:"comment",comment_with_emoji:/\[(\w+)\]/g.test(null!==(o=null==l?void 0:l.text)&&void 0!==o?o:"")?1:0,object_id:t,owner_id:null!=s?s:"",object_owner_id:null!=s?s:"",video_owner_id:r,video_id:e,video_owner:c}});return u}({itemId:t,cid:i,onShow:S.NS}),D=(0,a.useCallback)((e=>{13===e.keyCode||32===e.keyCode?(e.stopPropagation(),e.preventDefault(),v?y():b()):27===e.keyCode&&v&&(e.stopPropagation(),e.preventDefault(),y())}),[b,y,v]),R=(0,a.useCallback)((e=>t=>{13!==t.keyCode&&32!==t.keyCode||(t.stopPropagation(),t.preventDefault(),e(t))}),[]),[M,L]=(0,a.useState)(!1),q=(0,a.useCallback)((()=>{L(!0)}),[]),N=(0,a.useCallback)((()=>{d(),L(!1)}),[d]),H=(0,a.useCallback)((()=>{L(!1)}),[]),$="ltr"===g?"bottomRight":"bottomLeft",{colors:G}=(0,k.u)(),K=(0,P.Z)();return(0,o.jsxs)(B,{children:[(0,o.jsxs)(F,Object.assign({"aria-label":m("pc_web_more_btn"),role:"button",onMouseEnter:b,onMouseLeave:y,tabIndex:0,onKeyDown:D},{children:[(0,o.jsx)("div",Object.assign({"data-e2e":"comment-more-icon"},{children:(0,o.jsx)(E,{},void 0)}),void 0),(0,o.jsx)(I.G,Object.assign({backgroundColor:G.BGSecondary,active:v,placement:$,margin:p?2:-6},{children:(0,o.jsxs)(Z,{children:[c&&(0,o.jsxs)(A,Object.assign({"aria-label":m("Report"),role:"button",onClick:j,tabIndex:0,onKeyDown:R(j),"data-e2e":"comment-report"},{children:[(0,o.jsx)(C.Z,{width:24,height:24},void 0),(0,o.jsx)(U,{children:m("Report")},void 0)]}),void 0),u&&(0,o.jsxs)(A,Object.assign({"aria-label":m("comment_delete_btn"),role:"button","data-e2e":"comment-delete",onClick:q,onKeyDown:R(q),tabIndex:0},{children:[(0,o.jsx)(be.Z,{width:24,height:24},void 0),(0,o.jsx)(U,{children:m("comment_delete_btn")},void 0)]}),void 0)]},void 0)}),void 0)]}),void 0),p?null:(0,o.jsx)(ke,{count:r,liked:s,onClick:e.onLike},void 0),u&&(0,o.jsx)(O.u_,Object.assign({visible:M,keyboardCloseable:!1,maskCloseable:!1,parentRef:K},{children:(0,o.jsxs)("div",Object.assign({"data-e2e":"comment-delete-modal",style:{width:310}},{children:[(0,o.jsx)(z,{children:m("comment_delete_des")},void 0),(0,o.jsxs)(W,{children:[(0,o.jsx)(V,Object.assign({"data-e2e":"comment-modal-delete",primary:!0,onClick:N},{children:m("comment_delete_confirm")}),void 0),(0,o.jsx)(V,Object.assign({"data-e2e":"comment-modal-cancel",onClick:H},{children:m("comment_delete_cancel")}),void 0)]},void 0)]}),void 0)}),void 0)]},void 0)};var Se=i(28327),Pe=i(15679);const Te={boxShadow:"0 2px 12px rgb(0 0 0 / 12%)",padding:"8px 16px",margin:"-8px -16px 8px",borderRadius:"8px"},Ie={boxShadow:"none",padding:"0",margin:"0 0 16px"},Oe=(0,Se.F4)({"0%":Ie,"10%":Te,"90%":Te,"100%":Ie}),De=(0,R.Z)("div",{target:"e1g2efjf0"})((({isUIOptimization:e})=>({display:"flex",flexDirection:"row",alignItems:"flex-start",marginBottom:e?"12px":"16px",position:"relative"})),(({highlighted:e})=>e?{animationName:Oe,animationDuration:"3s"}:null),{":hover,:focus-within":{[`${B}`]:{paddingTop:0},[`${F}`]:{display:"block"}}},"label:DivCommentContentContainer;"),Re=(0,R.Z)("div",{target:"e1g2efjf1"})({flex:"1 1 auto"},"label:DivContentContainer;"),Me=(0,R.Z)("span",{target:"e1g2efjf2"})((({theme:{colors:e},isCreator:t})=>({fontSize:"16px",color:t?e.Primary:e.TextTertiary})),"label:SpanIdentity;"),Le=(0,R.Z)("span",{target:"e1g2efjf3"})((({theme:e})=>(0,L.GI)({theme:e,fontFamily:"Proxima"})),"label:SpanUserNameText;"),Be=(0,R.Z)(Pe.D,{target:"e1g2efjf4"})((({theme:e})=>(0,L.GI)({theme:e,typography:"P1",fontFamily:"Sofia",fontWeight:"bold"})),L.gi,{[`:hover ${Le}`]:{textDecoration:"underline"}},"label:StyledUserLinkName;"),Fe=(0,R.Z)(Pe.D,{target:"e1g2efjf5"})((({theme:{direction:e},isInDetailPage:t})=>[{":hover":{[`~ ${Re} ${Be} ${Le}`]:{textDecoration:"underline"}}},(0,L.YJ)({direction:e,marginEnd:t?"16px":"12px"})]),"label:StyledUserLinkAvatar;"),Ee=(0,R.Z)("p",{target:"e1g2efjf6"})((({theme:e})=>(0,L.GI)({theme:e,typography:"P2"})),{whiteSpace:"pre-line",wordBreak:"break-word",marginBottom:"6px"},"label:PCommentText;"),Ze=(0,R.Z)("p",{target:"e1g2efjf8"})((({theme:e,isUIOptimization:t})=>(0,L.GI)({theme:e,typography:"P3",color:t?"TextTertiaryAlt":"TextTertiary"})),"label:PCommentSubContent;"),Ae=({inDetailPage:e,isUIOptimization:t})=>t?"TextTertiaryAlt":e?"TextPrimary":"TextTertiary",Ue=(0,R.Z)("span",{target:"e1g2efjf9"})({cursor:"pointer"},(({theme:e,inDetailPage:t=!1,isUIOptimization:i=!1})=>(0,L.GI)({theme:e,fontWeight:t?"semiBold":"normal",color:Ae({inDetailPage:t,isUIOptimization:i})})),(({theme:{direction:e}})=>(0,L.YJ)({direction:e,marginStart:24})),"label:SpanReplyButton;"),ze=(0,R.Z)(Pe.D,{target:"e1g2efjf10"})((({theme:{colors:e}})=>({display:"inline-block",direction:"ltr",color:e.Primary,cursor:"pointer",":hover":{color:e.Primary},"&:-webkit-any-link":{color:e.Primary}})),"label:StyledUserLinkContent;"),We=(0,R.Z)("span",{target:"e1g2efjf11"})((({theme:{colors:e}})=>({cursor:"pointer",color:e.AssistColorAzure,fontSize:"16px",lineHeight:"20px",fontWeight:600})),"label:SpanWordContainer;"),Ve=(0,R.Z)("span",{target:"e1g2efjf12"})({display:"inline-block"},"label:SpanWordWithIcon;"),qe=(0,R.Z)($.Z,{target:"e1g2efjf13"})((({theme:{colors:e}})=>({position:"relative",top:"-4px",width:"10px",height:"10px",color:e.AssistColorAzure})),"label:StyledMagnifyingGlass;"),Ne=(0,a.memo)((function(e){const{teaParams:t,cid:i,word:n,searchKeyword:l,searchKeywordId:u,onClose:p}=e,[h,g]=(0,a.useState)(!1),f=(0,r.TH)(),_=(0,r.k6)(),{isOpenNewTab:x}=(0,v.EA)(),{isBrowserModeShowing:w}=(0,a.useContext)(s._),{handleClickReport:k,handleShowReport:C}={handleShowReport:(0,a.useCallback)((e=>{const{words_content:t,comment_id:i,enter_group_id:o,video_page_type:n,impr_id:a,group_id:r}=e;y.xq.handleTrendingWordsShow({enter_from:b.W.commonParams.enter_from,search_position:b.W.commonParams.page_name,words_source:"comment_highlighted_words",words_content:t,previous_page:b.W.commonParams.previous_page,comment_id:i,enter_group_id:o,video_page_type:n,page_name:b.W.commonParams.page_name,impr_id:a,group_id:r})}),[]),handleClickReport:(0,a.useCallback)((e=>{const{words_content:t,comment_id:i,enter_group_id:o,video_page_type:n,impr_id:a,group_id:r}=e;y.xq.handleTrendingWordsClick({enter_from:b.W.commonParams.enter_from,search_position:b.W.commonParams.page_name,video_page_type:n,words_source:"comment_highlighted_words",words_content:t,enter_group_id:o,previous_page:b.W.commonParams.previous_page,comment_id:i,page_name:b.W.commonParams.page_name,impr_id:a,group_id:r})}),[])};(0,a.useEffect)((()=>{h||(C({words_content:l,comment_id:i,enter_group_id:t.group_id,video_page_type:w?"browser_mode":"video_detail",impr_id:t.logId,group_id:u}),g(!0))}),[i,C,h,w,l,u,t.group_id,t.logId,n]);const j=(0,a.useCallback)((e=>{const o=Date.now(),n=(0,m.C)({location:f,to:{pathname:c.SN.searchHome(),search:{q:l,t:o}}}),a={searchSource:"comment_highlighted_words",enterMethod:"click_icon",videoPageType:w?"browser_mode":"video_detail",preClickId:t.logId};w&&x?window.open(d.stringifyUrl({url:n,query:a})):(null==p||p(e,!0),_.push(n,a)),k({video_page_type:w?"browser_mode":"video_detail",words_content:l,enter_group_id:t.group_id,comment_id:i,impr_id:t.logId,group_id:u})}),[f,l,w,t.logId,t.group_id,x,k,i,u,p,_]),[S,P]=(0,a.useMemo)((()=>{const e=n.trimEnd().lastIndexOf(" ")+1;return 0===e?["",n]:[n.slice(0,e),n.slice(e)]}),[n]);return(0,o.jsxs)(We,Object.assign({onClick:j},{children:[S,(0,o.jsxs)(Ve,{children:[P,(0,o.jsx)(qe,{},void 0)]},void 0)]}),void 0)})),He=(0,R.Z)(Ee,{target:"exi6j8f0"})((({theme:e})=>(0,L.GI)({theme:e,typography:"P3"})),"label:StyledPCommentTextForSwiper;"),$e=(0,a.memo)((e=>{const{isInVideoFeedRedesign:t}=(0,v.y7)(),i=t?He:Ee;return(0,o.jsx)(i,Object.assign({},e),void 0)}));var Ge;!function(e){e[e.PlainText=0]="PlainText",e[e.SearchWordText=6]="SearchWordText",e[e.User=7]="User"}(Ge||(Ge={}));const Ke=(0,a.memo)((function({cid:e,commentItem:t,e2eTag:i,teaParams:n,hasSearchKeyword:r=!1,onClose:s,onLinkClick:d}){const{text:c,text_extra:u}=t,p=((0,l.Q)(),(0,a.useMemo)((()=>function(e){const{text:t,textExtra:i,hasSearchKeyword:o}=e;if(!i||0===i.length)return[{type:0,text:t}];const n=[];let a=0;return i.forEach((({start:e,end:i,sec_uid:r,user_id:l,type:s,search_keyword:d,search_keyword_id:c})=>{if(a!==e&&n.push({type:0,text:t.substring(a,e)}),6===s){const a=t.substring(e,i)===d;n.push({type:o&&a?6:0,text:t.substring(e,i),searchKeyword:d,searchKeywordId:c})}else n.push({type:7,text:t.substring(e,i),uid:l,secUid:r});a=i})),n.push({type:0,text:t.substring(a,t.length)}),n}({text:c,textExtra:u,hasSearchKeyword:r})),[c,u,r]));return(0,o.jsxs)($e,Object.assign({"data-e2e":i},{children:["",p.map((({text:t,type:i,uid:a,secUid:r,searchKeywordId:l,searchKeyword:c},u)=>0===i?(0,o.jsx)("span",{children:t},u):6===i?(0,o.jsx)(Ne,{teaParams:n,word:t,searchKeyword:c,searchKeywordId:l,cid:e,onClose:s},l):7===i?(0,o.jsx)(ze,Object.assign({uniqueId:null!=r?r:"",secUid:r,isInBrowserMode:!0,onLinkClick:d,teaParams:{to_user_id:null!=a?a:"",enter_method:"comment"}},{children:t}),u):null))]}),void 0)}));var Ye;!function(e){e[e.Level1=1]="Level1",e[e.Level2=2]="Level2"}(Ye||(Ye={}));const Qe={1:40,2:24};var Je;!function(e){e[e.Creator=1]="Creator",e[e.Following=2]="Following",e[e.Friends=8]="Friends"}(Je||(Je={}));const Xe={1:"creator",2:"following_acc",8:"friends_acc"},et={1:"comment-creator",2:"comment-following",8:"comment-friends"},tt=(0,a.memo)((function({parentCid:e,item:t,level:i,disableReply:l,index:s,subIndex:d,teaParams:c,onClose:m,onLinkClick:b,inDetailPage:y=!1}){var f,k,C;const{t:S,timeTranslator:T}=(0,de.e)(),I=(0,n.mp)(w.r,{selector:e=>e[t.cid],dependencies:[t.cid]}),O=(0,n.mp)(_.z,{selector:e=>{var t;return e.users[null!==(t=null==I?void 0:I.user)&&void 0!==t?t:""]},dependencies:[null==I?void 0:I.user]}),{loginUserId:R,loginUserUid:M,hasSearchPermission:L}=(0,n.mp)(h.G,{selector:e=>{var t,i,o,n,a,r,l;return{loginUserId:null===(i=null===(t=e.appContext)||void 0===t?void 0:t.user)||void 0===i?void 0:i.uniqueId,loginUserUid:null===(n=null===(o=e.appContext)||void 0===o?void 0:o.user)||void 0===n?void 0:n.uid,hasSearchPermission:null===(l=null===(r=null===(a=e.appContext)||void 0===a?void 0:a.user)||void 0===r?void 0:r.hasSearchPermission)||void 0===l||l}},dependencies:[]}),{videoAuthorId:B,teaAuthorId:F,videoAuthorSecId:E}=(0,n.mp)(x.A,{selector:e=>{var t,i,o,n,a,r,l;return{videoAuthorId:null===(i=e[null!==(t=null==I?void 0:I.aweme_id)&&void 0!==t?t:""])||void 0===i?void 0:i.author,teaAuthorId:null!==(a=null===(n=e[null!==(o=null==I?void 0:I.aweme_id)&&void 0!==o?o:""])||void 0===n?void 0:n.authorId)&&void 0!==a?a:"",videoAuthorSecId:null===(l=e[null!==(r=null==I?void 0:I.aweme_id)&&void 0!==r?r:""])||void 0===l?void 0:l.authorSecId}},dependencies:[]}),{videoIdList:Z}=(0,n.mp)(D.Eg,{selector:e=>{var t;return null!==(t=e.blockListMap[null!=M?M:D.tt])&&void 0!==t?t:{}},dependencies:[M]}),A=(0,n.qj)(ee.x),{setReply:U}=(0,n.qj)(ve.p),{showing:z,handleCardEnter:W,handleCardLeave:V,handleItemEnter:q,handleItemLeave:N}=(0,ge.V)(),H=(0,a.useMemo)((()=>y&&1===i?48:Qe[i]),[i,y]),$=(0,a.useCallback)((()=>{if(!I)return;const{aweme_id:e,cid:t}=I;A.handleCommentLike({itemId:e,cid:t,teaAuthorId:F})}),[A,I,F]),G=(0,me.X)({action:$,modalConfig:{query:{enter_method:"click_like_comment"}}}),{region:K=""}=null!==(f=(0,u.Lh)((()=>["region"]),[]))&&void 0!==f?f:{},Y=(0,a.useCallback)((()=>{if(!I)return;const{aweme_id:t,cid:i}=I;A.handleCommentDelete({itemId:t,cid:i,parentCid:e,index:s,subIndex:d})}),[A,I,s,d,e]),Q=(0,a.useCallback)((()=>{const{nickname:e=""}=null!=O?O:{},{cid:t="",reply_id:o=""}=null!=I?I:{};U({nickname:e,replyId:1===i?t:o,replyToReplyId:1===i?"0":t,position:s})}),[O,I,U,i,s]),J=(0,me.X)({action:Q,modalConfig:{query:{enter_method:"click_reply_comment"}}}),X=(0,a.useCallback)((e=>{13!==e.keyCode&&32!==e.keyCode||(e.stopPropagation(),e.preventDefault(),J())}),[J]),te=(0,a.useCallback)((e=>{const t=oe.SV.includes(K);if(!M||!t||!I)return;const{cid:i,aweme_id:o,text:n}=I;e.stopPropagation();const a=(0,le.fH)({uniqueId:null!=B?B:"",secUid:null!=E?E:"",videoId:o}),r=(0,se.n)(i);if(!r)return;const l=`${window.location.host}${a}?cid=${r}`,s=document.createElement("input");s.style.fontSize="16px",document.body.appendChild(s),s.value=l,s.select(),s.setSelectionRange(0,l.length),document.execCommand&&document.execCommand("copy"),s.remove(),j.h.open({content:S("WebApp_comment_copyurl_id"),duration:1,style:{width:"560px"},getContainer:P.Z,getContainerPosition:"fixed"}),ne.y.handleCopyCommentUrl({copy:i,comment:n,group_id:o,user_id:M})}),[K,M,B,E,I,S]),be=(0,a.useMemo)((()=>{var e;return Object.assign(Object.assign({},c),{to_user_id:null!==(e=null==O?void 0:O.id)&&void 0!==e?e:"",enter_method:"comment",logId:t.logId})}),[null==O?void 0:O.id,c,t.logId]),{state:ye}=(0,r.TH)(),{id:fe}=(0,ce.m7)(ue.To.getItem("highlight_comment")),_e=(0,pe.HX)(),xe=(null==ye?void 0:ye.cid)===t.cid||fe===t.cid&&_e,{abTestVersion:we}=null!==(k=(0,u.Lh)((()=>["abTestVersion"]),[]))&&void 0!==k?k:{},ke=(0,p.eI)(null!==(C=null==I?void 0:I.aweme_id)&&void 0!==C?C:"",Z),Se="v2"===(0,g.N8)(we,"search_entry_comment_word")&&L&&!ke,{isUIOptimization:Pe}=(0,v.iA)();if(!I||!O)return(0,ie.G)(["commentItem","user"]);const{avatarThumb:Te,nickname:Ie,verified:Oe,uniqueId:Ee,secUid:Ae}=O,{label_type:ze,create_time:We,aweme_id:Ve,cid:qe,digg_count:Ne,user_digged:He}=I,$e=T(1e3*Number(We)),Ge=Boolean(R)&&B===R,Ye=Boolean(R)&&Ee===R,Je=!Ye,tt=Ge||Ye;return(0,o.jsxs)(De,Object.assign({isUIOptimization:Pe&&y,id:t.cid,highlighted:xe},{children:[(0,o.jsx)(Fe,Object.assign({style:{flex:`0 0 ${H}px`},uniqueId:Ee,secUid:Ae,isInDetailPage:y,onMouseEnter:q,onMouseLeave:N,isInBrowserMode:!0,teaParams:be,"data-e2e":`comment-avatar-${i}`,onLinkClick:b},{children:(0,o.jsx)(re.q,{size:H,src:Te},void 0)}),void 0),(0,o.jsxs)(Re,{children:[(0,o.jsxs)(Be,Object.assign({uniqueId:Ee,secUid:Ae,onMouseEnter:q,onMouseLeave:N,isInBrowserMode:!0,teaParams:be,onLinkClick:b},{children:[(0,o.jsxs)(Le,Object.assign({"data-e2e":`comment-username-${i}`},{children:[Ie," ",Oe&&(0,o.jsx)(ae.Q,{"data-e2e":`comment-bluev-${i}`},void 0)]}),void 0),ze&&Boolean(Xe[ze])&&(0,o.jsxs)(o.Fragment,{children:[""," ",(0,o.jsx)(Me,Object.assign({isCreator:1===ze,"data-e2e":`${et[ze]}-${i}`},{children:S(Xe[ze])}),void 0)]},void 0)]}),void 0),(0,o.jsx)(Ke,{teaParams:be,cid:qe,hasSearchKeyword:Se,onClose:m,onLinkClick:b,commentItem:I,e2eTag:`comment-level-${i}`},void 0),(0,o.jsxs)(Ze,Object.assign({isUIOptimization:Pe&&y},{children:[(0,o.jsx)("span",Object.assign({"data-e2e":`comment-time-${i}`,onClick:te},{children:$e}),void 0),y?(0,o.jsx)(Ce,{isUIOptimization:Pe,count:Ne,liked:Boolean(He),onClick:G},void 0):null,!l&&(0,o.jsx)(Ue,Object.assign({"aria-label":S("comment_reply_btn"),role:"button",isUIOptimization:Pe&&y,inDetailPage:y,onClick:J,"data-e2e":`comment-reply-${i}`,tabIndex:0,onKeyDown:X},{children:S("comment_reply_btn")}),void 0)]}),void 0)]},void 0),(0,o.jsx)(je,{itemId:Ve,cid:qe,inDetailPage:y,count:Ne,liked:Boolean(He),onLike:G,onDelete:Y,isShowDelete:tt,isShowReport:Je},void 0),z&&(0,o.jsx)(he.C,{uniqueId:Ee,onMouseEnter:W,onMouseLeave:V},void 0)]}),void 0)}));var it=i(52187);const ot=(0,R.Z)("div",{target:"eo72wou0"})({marginBottom:"16px"},"label:DivCommentItemContainer;"),nt=(0,R.Z)("div",{target:"eo72wou1"})((({theme:{direction:e}})=>(0,L.YJ)({direction:e,paddingStart:52})),"label:DivReplyContainer;"),at=(0,R.Z)("div",{target:"eo72wou2"})({display:"flex",flexDirection:"row",justifyContent:"space-between",position:"relative"},(({isUnfold:e,hasMore:t,theme:{direction:i,colors:o}})=>e?[t?(0,L.YJ)({direction:i,paddingStart:"52px"}):null,t?{"::before":Object.assign({content:'""',position:"absolute",top:"50%",width:"36px",height:"1px",background:o.LineSecondary,transform:"scaleY(0.5)"},(0,L.YJ)({direction:i,start:"0"}))}:{justifyContent:"right"}]:null),"label:DivReplyActionContainer;"),rt=(0,R.Z)(it.Z,{target:"eo72wou3"})((({reversed:e,theme:{direction:t}})=>[(0,L.YJ)({direction:t,marginStart:"6px"}),{width:"14px",height:"14px",verticalAlign:"middle",transform:e?"rotate(180deg)":"none"}]),"label:StyledChevronDownFill;"),lt=(0,R.Z)("p",{target:"eo72wou4"})((({theme:e})=>(0,L.GI)({theme:e,color:"TextTertiary",typography:"P3",fontWeight:"semiBold"})),{cursor:"pointer",":hover":{textDecoration:"underline"}},"label:PReplyActionText;"),st=(0,a.memo)((function({item:e,disableReply:t,index:i,onHideReply:r,teaParams:s,onClose:d,onLinkClick:c,inDetailPage:u=!1}){var p,m;const h=(0,l.Q)(),g=(0,n.qj)(ee.x),v=(0,n.mp)(w.r,{selector:t=>t[e.cid],dependencies:[e.cid]}),b=(0,a.useCallback)((()=>{v&&g.handleShowMoreReply({itemId:v.aweme_id,cid:v.cid})}),[g,v]),y=(0,a.useRef)(null),f=(0,a.useCallback)((()=>{var e,t;v&&(null==r||r(null!==(t=null===(e=y.current)||void 0===e?void 0:e.scrollHeight)&&void 0!==t?t:0),g.handleCollapseReply({itemId:v.aweme_id,cid:v.cid}))}),[g,v,r]),_=(0,a.useCallback)((e=>t=>{13!==t.keyCode&&32!==t.keyCode||(t.stopPropagation(),t.preventDefault(),e?b():f())}),[b,f]),x=(0,a.useMemo)((()=>_(!0)),[_]),k=(0,a.useMemo)((()=>_(!1)),[_]),C=(0,a.useMemo)((()=>{var t,i,n,a,r,l,s;if(!v)return null;if(null===(t=e.replyCache)||void 0===t?void 0:t.loading)return(0,o.jsx)(at,{children:(0,o.jsx)(te.g,{center:!0,size:"small"},void 0)},void 0);const d=null!==(n=null===(i=e.reply_comment)||void 0===i?void 0:i.length)&&void 0!==n?n:0,c=Number(null!==(a=v.reply_comment_total)&&void 0!==a?a:0)-d;if(!c&&Number(null===(r=e.reply_comment)||void 0===r?void 0:r.length)>0)return(0,o.jsx)(at,Object.assign({isUnfold:!0,hasMore:!1},{children:(0,o.jsxs)(lt,Object.assign({"aria-label":h("hide"),role:"button",onClick:f,onKeyDown:k,tabIndex:0,"data-e2e":"comment-hide"},{children:[h("hide"),(0,o.jsx)(rt,{reversed:!0},void 0)]}),void 0)}),void 0);if(!c)return null;if(!e.replyCache||!(null===(l=e.reply_comment)||void 0===l?void 0:l.length))return(0,o.jsx)(at,{children:(0,o.jsxs)(lt,Object.assign({"aria-label":h("view_more_replies",{num:c}),role:"button",onClick:b,onKeyDown:x,tabIndex:0,"data-e2e":"view-more-1"},{children:[h("view_more_replies",{num:c}),(0,o.jsx)(rt,{},void 0)]}),void 0)},void 0);const u=e.replyCache.hasMore||e.replyCache.comments.length>e.reply_comment.length;return Number(null===(s=e.reply_comment)||void 0===s?void 0:s.length)>0?(0,o.jsxs)(at,Object.assign({isUnfold:!0,hasMore:u},{children:[(0,o.jsx)(lt,Object.assign({"aria-label":h("view_more_comm"),role:"button",onClick:b,onKeyDown:x,tabIndex:0,"data-e2e":"view-more-2"},{children:Boolean(u)&&(0,o.jsxs)(o.Fragment,{children:[h("view_more_comm"),(0,o.jsx)(rt,{},void 0)]},void 0)}),void 0),(0,o.jsxs)(lt,Object.assign({"aria-label":h("hide"),role:"button",onClick:f,onKeyDown:k,tabIndex:0,"data-e2e":"comment-hide"},{children:[h("hide"),(0,o.jsx)(rt,{reversed:!0},void 0)]}),void 0)]}),void 0):null}),[f,k,x,b,v,e.replyCache,null===(p=e.reply_comment)||void 0===p?void 0:p.length,h]);return v?(0,o.jsxs)(ot,{children:[(0,o.jsx)(tt,{inDetailPage:u,item:e,disableReply:t,index:i,level:1,teaParams:s,onClose:d,onLinkClick:c},void 0),Boolean(v.reply_comment_total)&&(0,o.jsxs)(nt,Object.assign({ref:y},{children:[null===(m=e.reply_comment)||void 0===m?void 0:m.map(((n,a)=>(0,o.jsx)(tt,{parentCid:e.cid,item:n,disableReply:t,index:i,subIndex:a,level:2,teaParams:s,onClose:d,onLinkClick:c,inDetailPage:u},n.cid))),C]}),void 0)]},void 0):(0,ie.G)(["item"])})),dt=(0,Se.F4)({"0%":{backgroundPositionX:"200%"},"100%":{backgroundPositionX:"-150%"}}),ct=(0,R.Z)("div",{target:"eht1nyc0"})({width:"100%",marginTop:"16px",display:"flex",flexDirection:"column"},"label:DivCommentItemSkeletonContainer;"),ut=(0,R.Z)("div",{target:"eht1nyc1"})({width:"100%",marginBottom:"24px",display:"flex",alignItems:"flex-start"},"label:DivCommentItemSkeleton;"),pt=(0,R.Z)("div",{target:"eht1nyc2"})((({theme:e})=>({width:"40px",height:"40px",borderRadius:"100px",backgroundColor:e.colors.BGPlaceholderDefault,flexShrink:0,backgroundImage:"linear-gradient(90deg, rgba(22, 24, 35, 0) 0%, rgba(22, 24, 35, .04) 50%, rgba(22, 24, 35, 0) 100%)",backgroundSize:"200% 100%",backgroundRepeat:"no-repeat",animation:`${dt} cubic-bezier(0, 0, 1, 1) 1.5s infinite`})),"label:DivCommentItemSkeletonAvatar;"),mt=(0,R.Z)("div",{target:"eht1nyc3"})({width:"100%",display:"flex",flexDirection:"column"},(({theme:{direction:e}})=>(0,L.YJ)({direction:e,marginStart:"20px"})),"label:DivCommentItemSkeletonInfo;"),ht=(0,R.Z)("div",{target:"eht1nyc4"})((({width:e="100%",height:t="24px",marginTop:i="0px",theme:o})=>({width:e,height:t,marginTop:i,backgroundColor:o.colors.BGPlaceholderDefault,backgroundImage:"linear-gradient(90deg, rgba(22, 24, 35, 0) 0%, rgba(22, 24, 35, .04) 50%, rgba(22, 24, 35, 0) 100%)",backgroundSize:"200% 100%",backgroundRepeat:"no-repeat",animation:`${dt} cubic-bezier(0, 0, 1, 1) 1.5s infinite`})),"label:DivCommentItemSkeletonLine;"),gt=(0,a.memo)((function({num:e=3}){const t=[];for(let i=0;i<e;i++)t.push(i);return(0,o.jsx)(ct,{children:t.map((e=>(0,o.jsxs)(ut,{children:[(0,o.jsx)(pt,{},void 0),(0,o.jsxs)(mt,{children:[(0,o.jsx)(ht,{width:"160px"},void 0),(0,o.jsx)(ht,{height:"20px",marginTop:"4px"},void 0),(0,o.jsx)(ht,{height:"12px",marginTop:"8px",width:"96px"},void 0)]},void 0)]},e)))},void 0)}));var vt=i(51917);const bt=e=>{const[t,i]=(0,n.b7)(ee.x,{selector:t=>{var i;return null!==(i=t[e])&&void 0!==i?i:{awemeId:void 0,cursor:"0",comments:[],hasMore:!0,loading:!1}},dependencies:[e]}),{comments:o,hasMore:r,loading:l}=t;(0,a.useEffect)((()=>{!(0,vt.w)(e)&&e&&0===o.length&&r&&!l&&i.fetchComment({aweme_id:e,cursor:0})}),[i,o.length,r,e,l])},yt=(0,R.Z)("div",{target:"ekjxngi0"})((({theme:e,empty:t=!1,inDetailPage:i=!1})=>({width:"100%",boxSizing:"border-box",backgroundColor:i?"":e.colors.BGCreation3,borderTop:i||t?"none":`1px solid ${e.colors.LinePrimary2}`,borderBottom:i?"none":`1px solid ${e.colors.LinePrimary2}`,overflowY:"hidden",overflowX:"hidden",flexGrow:1,position:"relative",paddingBottom:i?"30px":"",display:"flex",flexDirection:"column"})),"label:DivCommentContainer;"),ft=(0,R.Z)("div",{target:"ekjxngi2"})((({theme:e,marginTop:t})=>[(0,L.GI)({theme:e,typography:"P3",fontWeight:"normal",color:"TextTertiary"}),{marginTop:t?"40px":0,width:"100%",padding:"0 16px",boxSizing:"border-box",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:"50%",transform:"translateY(-50%)"}]),"label:DivEmpty;"),_t=(0,R.Z)("div",{target:"ekjxngi3"})((({inDetailPage:e=!1})=>({width:"100%",overflowY:"auto",overflowX:"hidden",flexGrow:1,position:"relative",padding:e?"0 0 24px":"0 32px 24px",":first-of-type":{paddingTop:"24px"}})),"label:DivCommentListContainer;"),xt=(0,R.Z)(yt,{target:"e1u1vkmc0"})((({isInHorizontalBoostUI:e,theme:{colors:t}})=>({borderTop:"none",padding:"16px",margin:0,background:e?t.BGPrimary:t.BGCreation3,border:"none",position:"relative",display:"flex",flexDirection:"column"})),"label:StyledDivCommentListContainerForSwiper;"),wt=(0,a.memo)((e=>{const{isInVideoFeedRedesign:t}=(0,v.y7)(),{isInHorizontalBoostUI:i}=(0,v.yk)(),n=t||i?xt:yt;return(0,o.jsx)(n,Object.assign({},e,{isInHorizontalBoostUI:i}),void 0)})),kt=(0,a.memo)((0,a.forwardRef)((function({itemId:e,disableReply:t,teaParams:i,onLinkClick:d,onClose:c,inDetailPage:u=!1,hasMore:p=!0,prefetchId1:m="",prefetchId2:h=""},g){var v,b;const y=(0,n.mp)(ee.x,{selector:t=>{var i;return null!==(i=t[e])&&void 0!==i?i:{awemeId:void 0,cursor:"0",comments:[],hasMore:!0,loading:!0}},dependencies:[e]}),f=(0,r.TH)(),_=(0,l.Q)();(e=>{const[{hasMore:t,loading:i,comments:o},r]=(0,n.b7)(ee.x,{selector:t=>{var i;return null!==(i=t[e])&&void 0!==i?i:{awemeId:void 0,cursor:"0",comments:[],hasMore:!0,loading:!1}},dependencies:[e]});(0,a.useEffect)((()=>{!(0,vt.w)(e)&&e&&0===o.length&&t&&!i&&r.fetchComment({aweme_id:e,cursor:0})}),[o.length,r,t,e,i])})(e),bt(m),bt(h);const x=(0,a.useMemo)((()=>{var e;if(!y||!(null===(e=y.comments)||void 0===e?void 0:e.length)&&y.loading&&p)return(0,o.jsx)(gt,{num:9},void 0);const n=[];return y.comments.forEach(((e,a)=>{var r;const l=(0,o.jsx)(st,{item:e,disableReply:t,index:a,teaParams:i,onClose:c,onLinkClick:d,inDetailPage:u},e.cid);(null===(r=f.state)||void 0===r?void 0:r.cid)===e.cid?n.unshift(l):n.push(l)})),n.length?(0,o.jsxs)(o.Fragment,{children:[n,y.loading&&(0,o.jsx)(gt,{num:1},void 0)]},void 0):(0,o.jsx)(ft,Object.assign({marginTop:u},{children:_("comment_panel_zero")}),void 0)}),[y,p,t,i,c,d,u,null===(v=f.state)||void 0===v?void 0:v.cid,_]),{isBrowserModeShowing:w}=(0,a.useContext)(s._),k=(0,a.useMemo)((()=>w?(0,o.jsx)(X,{onClose:c,id:e},void 0):null),[w,e,c]);return(0,o.jsxs)(wt,Object.assign({inDetailPage:u,empty:!(null===(b=null==y?void 0:y.comments)||void 0===b?void 0:b.length)},{children:[k,(0,o.jsx)(_t,Object.assign({inDetailPage:u,ref:g},{children:x}),void 0)]}),void 0)})))},32258:(e,t,i)=>{i.d(t,{x:()=>Z,C:()=>E});var o=i(64047),n=i(73566),a=i(48185),r=i(19630),l=i(35167),s=i(2600),d=i.n(s),c=i(82346),u=i(11348),p=i(60595),m=i(53095),h=i(20948),g=i(56979),v=i(93859),b=i(49584),y=i(10026),f=i(5549),_=i(12167),x=i(42626),w=i(55198),k=i(87930),C=i(21005),j=i(66891),S=i(32370),P=i(33642),T=i(26641),I=i(66599),O=i(38310),D=i(31014),R=i(57244),M=i(70526),L=i(18645);let B=class{constructor(e){this.fetch=e}getCommentList(e){return this.fetch.get("/api/comment/list/",{query:Object.assign(Object.assign({},e),{count:20,aid:1988,app_language:"ja-JP",device_platform:"web_pc",current_region:"JP",fromWeb:1,enter_from:"tiktok_web"}),baseUrlType:2})}getCommentReply(e){return this.fetch.get("/api/comment/list/reply/",{query:Object.assign(Object.assign({},e),{count:3,aid:1988,app_language:"ja-JP",device_platform:"web_pc",current_region:"JP",fromWeb:1,enter_from:"tiktok_web"}),baseUrlType:2})}postCommentLike(e){return this.fetch.post("/api/comment/digg/",{query:Object.assign(Object.assign({},e),{aid:1988,channel_id:0}),headers:{[M.eD]:this.fetch.csrfToken},baseUrlType:2})}postCommentDelete(e){return this.fetch.post("/api/comment/delete/",{query:e,baseUrlType:2,headers:{[M.eD]:this.fetch.csrfToken}})}};var F;B=(0,o.__decorate)([(0,R.G)(),(0,o.__metadata)("design:paramtypes",[L.r])],B),function(e){e[e.Like=1]="Like",e[e.Unlike=2]="Unlike"}(F||(F={}));const E={awemeId:void 0,cursor:"0",comments:[],hasMore:!0,loading:!1};let Z=class extends n.D{constructor(e,t,i,o,n,a){super(),this.service=e,this.commentItem=t,this.item=i,this.user=o,this.t=n,this.home=a,this.defaultState={}}setCommentItem(e,{itemId:t="",item:i}){var o;return i?(e[t]=Object.assign(Object.assign({},null!==(o=e[t])&&void 0!==o?o:E),i),e):e}setReplyLoading(e,t){var i,o,n;const a=e[t.itemId].comments.find((({cid:e})=>e===t.cid));if(!a)return e;a.replyCache?a.replyCache.loading=t.loading:a.replyCache={comments:null!==(i=a.reply_comment)&&void 0!==i?i:[],cursor:null!==(n=null===(o=a.reply_comment)||void 0===o?void 0:o.length)&&void 0!==n?n:"0",hasMore:!0,loading:t.loading}}setReplyComment(e,t){const i=this.getCommentItem(e,t.cid,t.itemId);if(!i)return e;i.reply_comment=t.comments}setReplyCommentCache(e,t){const i=this.getCommentItem(e,t.cid,t.itemId);if(!i)return e;i.replyCache?(i.replyCache.comments=t.comments,i.replyCache.hasMore=t.hasMore,i.replyCache.cursor=t.cursor):i.replyCache={comments:t.comments,cursor:t.cursor,hasMore:t.hasMore,loading:!1}}deleteCommentFromList(e,t){var i,o;const{index:n,subIndex:a,itemId:r}=t;void 0===a?e[r].comments.splice(n,1):(null===(i=e[r].comments[n].reply_comment)||void 0===i||i.splice(a,1),null===(o=e[r].comments[n].replyCache)||void 0===o||o.comments.splice(a,1))}addCommentToFirst(e,t){e[t.aweme_id].comments.unshift({cid:t.cid,reply_comment:[],replyCache:null})}addReplyToFirst(e,{comment:t,position:i}){var o,n;const{aweme_id:a}=t,r=e[a].comments[i];r&&(r.reply_comment=null!==(o=r.reply_comment)&&void 0!==o?o:[],r.reply_comment.unshift({cid:t.cid,reply_comment:null,replyCache:null}),null===(n=r.replyCache)||void 0===n||n.comments.unshift({cid:t.cid,reply_comment:null,replyCache:null}))}handlePostSuccess(e){return e.pipe((0,m.z)((e=>{const{users:t,commentItems:i}=this.processCommentList([e]);return(0,c.of)(this.getActions().addCommentToFirst(e),this.user.getActions().multiSetUser(t),this.commentItem.getActions().multiSetCommentItem(i),this.item.getActions().reduceOrIncreaseCommentCount({id:e.aweme_id,isReduce:!1}))})))}handleReplySuccess(e){return e.pipe((0,m.z)((({comment:e,position:t})=>{const{users:i,commentItems:o}=this.processCommentList([e],{ignoreReply:!0});return(0,c.of)(this.getActions().addReplyToFirst({comment:e,position:t,itemId:e.aweme_id}),this.user.getActions().multiSetUser(i),this.commentItem.getActions().multiSetCommentItem(o),this.commentItem.getActions().reduceOrIncreaseCommentCount({cid:e.reply_id}),this.item.getActions().reduceOrIncreaseCommentCount({id:e.aweme_id,isReduce:!1}))})))}fetchComment(e){return e.pipe((0,m.z)((e=>this.fetchComment$(e))))}fetchComment$(e){return(0,c.of)(e).pipe((0,h.M)(this.state$,this.home.state$),(0,g.U)((([e,t])=>{var i;return{query:e,item:null!==(i=t[e.aweme_id])&&void 0!==i?i:{awemeId:void 0,cursor:"0",comments:[],hasMore:!0,loading:!0}}})),(0,v.b)((({item:e})=>{})),(0,b.z)((({query:{aweme_id:e,insert_ids:t},item:i})=>{var o;if(!(null==i?void 0:i.hasMore))return u.E;const n=null!==(o=null==i?void 0:i.cursor)&&void 0!==o?o:"0";return this.service.getCommentList({insert_ids:"0"===n?t:void 0,aweme_id:e,cursor:n}).pipe((0,v.b)((e=>{(0,k.k)(e.status_code,[0])})),(0,m.z)((t=>{var o,n,a,r;if(0===t.status_code&&(null===(o=t.comments)||void 0===o?void 0:o.length)){const{users:o,comments:r,commentItems:l}=this.processCommentList(t.comments,{logId:null===(n=t.log_pb)||void 0===n?void 0:n.impr_id}),s=null!==(a=null==i?void 0:i.comments)&&void 0!==a?a:[],u=d()(s.concat(r),"cid"),p=[this.user.getActions().multiSetUser(o),this.commentItem.getActions().multiSetCommentItem(l),this.getActions().setCommentItem({item:{comments:u,hasMore:Boolean(t.has_more),cursor:t.cursor,loading:!1},itemId:e})];return t.total&&p.push(this.item.getActions().setCommentCount({id:e,commentCount:Number(t.total)})),(0,c.of)(...p)}return 0!==t.status_code||(null===(r=t.comments)||void 0===r?void 0:r.length)||t.has_more?(0,c.of)(this.noop()):(0,c.of)(this.getActions().setCommentItem({item:{hasMore:Boolean(t.has_more),loading:!1},itemId:e}))})),(0,y.O)(this.getActions().setCommentItem({item:{awemeId:e,loading:!0},itemId:e})),(0,f.l)(this.getActions().setCommentItem({item:{loading:!1},itemId:e})),(0,C.n)({shouldShowMsg:!1}),(0,_.R)(this.dispose$))})))}fetchCommentReply(e){return e.pipe((0,h.M)(this.state$),(0,g.U)(this.mapCommentItemFromQuery.bind(this)),(0,v.b)((([e,t])=>{t||console.warn("No item here in fetch commoent reply")})),(0,m.z)((([e,t])=>{var i,o;return t?this.service.getCommentReply({comment_id:e.cid,item_id:e.itemId,cursor:null!==(o=null===(i=t.replyCache)||void 0===i?void 0:i.cursor)&&void 0!==o?o:"0"}).pipe((0,v.b)((e=>{(0,k.k)(e.status_code,[0])})),(0,m.z)((i=>{var o,n;if(0===i.status_code){const{users:a,comments:r,commentItems:l}=this.processCommentList(i.comments,{logId:null===(o=i.log_pb)||void 0===o?void 0:o.impr_id}),s=null!==(n=null==t?void 0:t.reply_comment)&&void 0!==n?n:[],u=d()(s.concat(r),"cid");return(0,c.of)(this.user.getActions().multiSetUser(a),this.commentItem.getActions().multiSetCommentItem(l),this.getActions().setReplyComment(Object.assign({comments:[...u]},e)),this.getActions().setReplyCommentCache(Object.assign({comments:[...u],hasMore:Boolean(i.has_more),cursor:i.cursor},e)))}return(0,c.of)(this.noop())})),(0,y.O)(this.getActions().setReplyLoading(Object.assign(Object.assign({},e),{loading:!0}))),(0,f.l)(this.getActions().setReplyLoading(Object.assign(Object.assign({},e),{loading:!1}))),(0,C.n)({})):u.E})))}handleCollapseReply(e){return e.pipe((0,h.M)(this.state$),(0,v.b)((([e,t])=>{this.getCommentItem(t,e.cid,e.itemId)||console.warn("item is null")})),(0,g.U)((([e,t])=>this.getCommentItem(t,e.cid,e.itemId)?this.getActions().setReplyComment(Object.assign(Object.assign({},e),{comments:[]})):this.noop())))}handleShowMoreReply(e){return e.pipe((0,h.M)(this.state$),(0,g.U)(this.mapCommentItemFromQuery.bind(this)),(0,v.b)((([{cid:e,itemId:t}])=>{x.y.handleShowMoreReply({parent_comment_id:e,group_id:t})})),(0,v.b)((([e,t])=>{t||console.warn("item is null")})),(0,g.U)((([e,t])=>{if(!t)return this.noop();if(!t.reply_comment||!t.replyCache)return this.getActions().fetchCommentReply(e);const i=t.reply_comment.length,o=t.replyCache.comments.length;if(i<o){const n=i+3>o?o:i+3;return this.getActions().setReplyComment(Object.assign(Object.assign({},e),{comments:t.replyCache.comments.slice(0,n)}))}return this.getActions().fetchCommentReply(e)})))}handleCommentLike(e){return e.pipe((0,h.M)(this.commentItem.state$,this.user.state$),(0,g.U)((([e,t,i])=>{var o;const n=t[e.cid];return{query:e,commentItem:n,user:i.users[null!==(o=null==n?void 0:n.user)&&void 0!==o?o:""]}})),(0,v.b)((({commentItem:e})=>{e||console.warn("No comment item here in hendle comment like")})),(0,b.z)((({query:e,commentItem:t,user:i})=>{if(!t)return u.E;const o=t.user_digged?2:1;return this.service.postCommentLike({aweme_id:e.itemId,cid:e.cid,digg_type:o}).pipe((0,v.b)((t=>{var n;0===(null==t?void 0:t.status_code)?x.y.handleCommentLike({isLike:1===o,comment_id:e.cid,group_id:e.itemId,comment_user_id:null!==(n=null==i?void 0:i.id)&&void 0!==n?n:"",author_id:e.teaAuthorId}):3002043===(null==t?void 0:t.status_code)?(w.h.destroy(),w.h.open({content:this.t(2===o?"comment_turnoff_unlike":"comment_turnoff_like"),duration:3,getContainer:S.Z,getContainerPosition:"fixed"})):(null==t?void 0:t.status_code)?(w.h.destroy(),w.h.open({content:this.t("Sorry, something wrong with the server, please try again."),duration:3,widthType:"half",getContainer:S.Z,getContainerPosition:"fixed"})):(w.h.destroy(),w.h.open({content:this.t("comment_nointernet_toast"),duration:3,widthType:"half",getContainer:S.Z,getContainerPosition:"fixed"}))})),(0,m.z)((i=>{if(0===i.status_code){let i,n;return 1===o?(i=1,n=t.digg_count+1):(i=0,n=Math.max(t.digg_count-1,0)),(0,c.of)(this.commentItem.getActions().setItemDiggState({cid:e.cid,digged:i}),this.commentItem.getActions().setItemDiggCount({cid:e.cid,count:n}))}return 3002043===i.status_code?(0,c.of)(this.item.getActions().updateItem({id:e.itemId,itemCommentStatus:3})):u.E})),(0,C.n)({}))})))}handleCommentDelete(e){return e.pipe((0,m.z)((e=>{const{itemId:t,cid:i,parentCid:o,subIndex:n}=e;return this.service.postCommentDelete({cid:i}).pipe((0,v.b)((({status_code:e})=>{0===e?w.h.open({content:this.t("comment_delete_success"),duration:3,widthType:"half",getContainer:S.Z,getContainerPosition:"fixed"}):w.h.open({content:this.t("comment_delete_failed"),duration:3,widthType:"half",getContainer:S.Z,getContainerPosition:"fixed"})})),(0,m.z)((a=>{if(0===a.status_code){const a=[this.getActions().deleteCommentFromList(e),this.commentItem.getActions().removeItem(i),this.item.getActions().reduceOrIncreaseCommentCount({id:t,isReduce:!0})];return void 0!==n&&o&&a.push(this.commentItem.getActions().reduceOrIncreaseCommentCount({cid:o,isReduce:!0})),(0,c.of)(...a)}return(0,c.of)(this.noop())})),(0,C.n)({}))})))}switchVideo(e){return e.pipe((0,m.z)((({currId:e,insertCid:t})=>(0,c.of)(this.getActions().dispose$(),this.getActions().fetchComment({insert_ids:t,aweme_id:e})))))}mapCommentItemFromQuery([e,t]){return[e,this.getCommentItem(t,e.cid,e.itemId)]}getCommentItem(e,t,i){return e[i].comments.find((({cid:e})=>e===t))}processCommentList(e=[],t={}){return e.reduce(((e,i)=>{const{user:o,reply_comment:n}=i;return e.users.push((0,P.yk)(o)),(null!=n?n:[]).forEach((({user:t})=>{e.users.push((0,P.yk)(t))})),e.comments.push(this.processComment(i,t)),this.commentItem.getProcessedCommentItem(i,t).forEach((t=>{e.commentItems.push(t)})),e}),{users:[],comments:[],commentItems:[]})}processComment(e,t={}){var i;return{cid:e.cid,logId:t.logId,reply_comment:null===(i=e.reply_comment)||void 0===i?void 0:i.map((e=>this.processComment(e,t))),replyCache:null}}};(0,o.__decorate)([(0,a.cQ)(),(0,o.__metadata)("design:type",p.y)],Z.prototype,"dispose$",void 0),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],Z.prototype,"setCommentItem",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],Z.prototype,"setReplyLoading",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],Z.prototype,"setReplyComment",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],Z.prototype,"setReplyCommentCache",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],Z.prototype,"deleteCommentFromList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],Z.prototype,"addCommentToFirst",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],Z.prototype,"addReplyToFirst",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],Z.prototype,"handlePostSuccess",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],Z.prototype,"handleReplySuccess",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],Z.prototype,"fetchComment",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],Z.prototype,"fetchCommentReply",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],Z.prototype,"handleCollapseReply",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],Z.prototype,"handleShowMoreReply",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],Z.prototype,"handleCommentLike",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],Z.prototype,"handleCommentDelete",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],Z.prototype,"switchVideo",null),Z=(0,o.__decorate)([(0,r.Y)("Comment"),(0,o.__param)(4,(0,l.t)(j.s$)),(0,o.__metadata)("design:paramtypes",[B,D.r,O.A,I.z,Function,T.G])],Z)},74891:(e,t,i)=>{i.d(t,{EN:()=>r,OH:()=>l,Gg:()=>s,hh:()=>d,TK:()=>c,Is:()=>u,Vk:()=>p,i3:()=>m,ij:()=>h});var o=i(68191),n=i(36488),a=i(67301);const r=(0,o.Z)("div",{target:"e1mecfx00"})({flex:"0 0 544px",width:"544px",display:"flex",flexDirection:"column",padding:"32px 0 0"},"label:DivContentContainer;"),l=(0,o.Z)("div",{target:"e1mecfx01"})({padding:"0 32px",overflow:"visible",display:"flex",flexDirection:"column",flexShrink:0},"label:DivMainContent;"),s=(0,o.Z)(a.W,{target:"e1mecfx02"})((({theme:{colors:e}})=>({marginTop:"9px",marginBottom:"17px",background:"transparent",color:e.TextSecondary})),"label:StyledScheduleTime;"),d=(0,o.Z)("div",{target:"e1mecfx03"})((({theme:{colors:e}})=>({width:"100%",padding:"0 32px",boxSizing:"border-box",backgroundColor:e.BGCreation3,borderTop:"none",borderBottom:"1px solid rgba(18, 18, 18, 0.12)",overflowX:"hidden",flexGrow:1})),"label:DivCommentContainerPolyfill;"),c=(0,o.Z)("div",{target:"e1mecfx04"})((({theme:{colors:e}})=>({flex:"0 0 auto",backgroundColor:e.BGPrimary,margin:"0 30px",padding:"21px 0"})),"label:DivBottomCommentContainer;"),u=(0,o.Z)("div",{target:"e1mecfx05"})((({theme:e})=>[(0,n.GI)({theme:e,typography:"P2",color:"TextSecondary"}),{flex:"1 1 0px",display:"flex",alignItems:"center",justifyContent:"center"}]),"label:DivErrorMessage;"),p=(0,o.Z)("div",{target:"e1mecfx06"})((({theme:e,isUIOptimization:t})=>[(0,n.GI)({theme:e,fontWeight:"semiBold",color:t?"TextQuaternary":"Primary"}),{height:"100%",background:t?e.colors.BGInput:e.colors.BGPlaceholderOpaque,borderRadius:t?"8px":"2px",padding:"14px 16px",fontSize:"16px",cursor:"pointer",textAlign:t?"center":"unset"}]),"label:DivLoginBar;"),m=(0,o.Z)("h1",{target:"e1mecfx07"})({marginBottom:"8px",fontWeight:"700",fontSize:"20px",lineHeight:"24px"},"label:H1PhotoTitle;"),h=(0,o.Z)("div",{target:"e1mecfx08"})({display:"flex",gap:"4px"},"label:DivTagContainer;")},87342:(e,t,i)=>{i.d(t,{_:()=>h,J:()=>g});var o=i(64047),n=i(9236),a=i(43226),r=i.n(a),l=i(91051),s=i(17130),d=i(51917),c=i(33642),u=i(38310),p=i(42531),m=i(23745);const h=(0,l.createContext)({isLiveBrowserShowing:!1,isBrowserModeShowing:!1,showBrowserMode:r(),closeBrowserMode:r()});function g(){const[e,t]=(0,l.useState)(!1),[i,a]=(0,l.useState)({}),[r,h]=(0,l.useState)(),{showBrowserMode:g,closeBrowserMode:v}=(0,n.qj)(m.O),{showingBrowserMode:b,itemListKey:y,currentIndex:f,enterWindowTimeSec:_}=(0,n.mp)(m.O,{selector:e=>({showingBrowserMode:e.showingBrowserMode,itemListKey:e.itemListKey,currentIndex:e.currentIndex,enterWindowTimeSec:e.enterWindowTimeSec}),dependencies:[]}),x=(0,l.useRef)(0),w=(0,l.useRef)(0),k=(0,l.useRef)(0),C=(0,l.useRef)(0),j=(0,l.useRef)(0),S=(0,l.useRef)(null),P=(0,l.useRef)(null),{authorId:T,groupId:I}=(0,p.wx)({itemListKey:y,currentIndex:f}),{currentId:O=""}=(0,c.m7)((0,p.pe)({itemListKey:y,currentIndex:f})),[D]=(0,n.b7)(u.A,{selector:e=>e[O],dependencies:[O]}),R=(0,l.useMemo)((()=>({author_id:T,group_id:I})),[T,I]),M=(0,l.useCallback)((()=>{const e=Math.floor((Number(new Date)-w.current)/1e3),t=Object.assign(Object.assign(Object.assign({},s.r.getScreenRatio()),{duration:e}),R);s.r.handleExitBrowser(t)}),[R]),L=()=>{null!==P.current&&window.removeEventListener("resize",P.current)};(0,l.useEffect)((()=>{let t;const i=()=>{if(!e)return;const{height_max:t,width_max:i,width:o,height:n,height_ratio:a,width_ratio:r}=s.r.getScreenRatio(),l=Number(new Date),d=Object.assign({height_ratio_after:a,width_ratio_after:r,height_ratio:C.current/t,width_ratio:j.current/i,height_after:n,width_after:o,height:C.current,width:j.current,height_max:t,width_max:i,duration:(l-k.current)/1e3},R);k.current=l,C.current=n,j.current=o,s.r.handleAdjustBrowserSize(d)};if(L(),e){const e=()=>{clearTimeout(t),t=setTimeout(i,500)};window.addEventListener("resize",e),P.current=e}if(0===x.current){const e=Number(new Date);x.current=e,w.current=e,k.current=e}return()=>{L()}}),[e,R]);const B=(0,l.useMemo)((()=>({capture:!0})),[]),F=(0,l.useCallback)((()=>{null!==S.current&&window.removeEventListener("beforeunload",S.current,B)}),[B]);(0,l.useEffect)((()=>{const t=()=>{const t=Math.floor((Number(new Date)-_)/1e3),i=Object.assign(Object.assign(Object.assign({},s.r.getScreenRatio()),{duration:t}),e?R:{});s.r.handleCloseWindow(i),e&&M()};return F(),S.current=t,window.addEventListener("beforeunload",t,B),()=>{F()}}),[F,_,e,B,M,R]);const E=(0,l.useCallback)((e=>{const{teaParams:i,reportTeaParams:n,enterFrom:r}=e,l=(0,o.__rest)(e,["teaParams","reportTeaParams","enterFrom"]);g(l),t(!0),a(null!=i?i:{}),h(r);const d=s.r.getScreenRatio(),c=Object.assign(Object.assign(Object.assign({},null!=n?n:i),d),R),{width:u,height:p}=d;C.current=p,j.current=u;const m=Number(new Date);w.current=m,k.current=m,s.r.handleEnterBrowserOpt(c)}),[g,R]),Z=(0,l.useCallback)((e=>{t(!1),v(e),M()}),[v,M]),A=(0,l.useMemo)((()=>Boolean(b)&&(0,d.c9)(D)&&"foryou"===y),[b,y,D]);return{itemListKey:y,currentIndex:f,showBrowserMode:E,isLiveBrowserShowing:A,closeBrowserMode:Z,isBrowserModeShowing:b,disableUpdate:!e,teaParams:i,enterFrom:r}}},42531:(e,t,i)=>{i.d(t,{xf:()=>F,q5:()=>Z,Ui:()=>A,_0:()=>U,om:()=>z,zX:()=>W,AS:()=>V,pe:()=>q,wx:()=>N,Oi:()=>H,QO:()=>$,Y3:()=>G});var o,n=i(11040),a=i(9236),r=i(59245),l=i.n(r),s=i(66292),d=i.n(s),c=i(90293),u=i(91051),p=i(21041),m=i(33178),h=i(48659),g=i(33693),v=i(2078),b=i(17130),y=i(42626),f=i(80416),_=i(45313),x=i(32273),w=i(34579),k=i(40112),C=i(4776),j=i(33642),S=i(17133),P=i(9343),T=i(21555),I=i(88683),O=i(33966),D=i(38310),R=i(10315),M=i(32258),L=i(23745),B=i(30967);function F({itemListKey:e,item:t,author:i,needUrlDelegate:o,onCloseBrowserMode:n,isTT4BAds:r=!1,disableUpdate:s=!1}){const{pathname:d,search:m}=(0,p.TH)(),v=(0,p.k6)(),b=(0,u.useRef)(!1),[{searchValue:y,previousSearchValue:f},{setPreviousSearchValue:x,setSearchValue:w,setInputFocus:k}]=(0,a.b7)(T.B,{dependencies:[],selector:e=>({searchValue:e.searchValue,previousSearchValue:e.previousSearchValue})});(0,u.useEffect)((()=>{x(y),w("");const e=()=>{w(f),k(!1),n({fromPopState:!0})};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}}),[]),(0,u.useEffect)((()=>{if(!t||!e||!o||s)return;Boolean((0,p.LX)(location.pathname,{path:h.$J.liveRoom}))&&(b.current=!0);const{scheduleTime:n,id:a,author:d=""}=t,u=l()((0,c.parse)(m),"sender_device","sender_web_id","item_id");let v=n?(0,_.yl)({uniqueId:d,secUid:null==i?void 0:i.secUid}):(0,c.stringifyUrl)({url:(0,_.fH)({uniqueId:d,videoId:a,secUid:null==i?void 0:i.secUid}),query:u},{skipNull:!0});r&&(v=(0,c.stringifyUrl)({url:g.nT.foryou,query:u},{skipNull:!0})),b.current?window.history.replaceState(window.history.state,"video-detail",v):(window.history.pushState(window.history.state,"video-detail",v),b.current=!0)}),[null==i?void 0:i.secUid,v,t,d,e,o,m,r,s])}!function(e){e[e.Null=0]="Null",e[e.Close=1]="Close",e[e.Prev=2]="Prev",e[e.Next=3]="Next",e[e.Redirect=4]="Redirect"}(o||(o={}));const E=e=>{null==e||e.preventDefault(),null==e||e.stopPropagation()};function Z({onCloseBrowserMode:e,onNextVideo:t,onPrevVideo:i,pause:o,setPause:n,embedVisibleRef:r,group_id:l,handleLikeClick:s,author_id:d,itemListKey:c,onJumpSamePage:m,shouldPause:h,photoVideoRef:f,isPhotoMode:_,photoTeaParams:x,setIsShowPhoto:C}){const[j,S]=(0,u.useState)(!1),[I,O]=(0,u.useState)(0),[{isInputEmpty:D,noReplyUser:M},{setNeedClearInput:L}]=(0,a.b7)(R.p,{selector:({isInputEmpty:e,reply:t})=>({isInputEmpty:e,noReplyUser:0===t.nickname.length}),dependencies:[]}),[{previousSearchValue:B,searchValue:F},{setSearchValue:Z}]=(0,a.b7)(T.B,{dependencies:[],selector:e=>({previousSearchValue:e.previousSearchValue,searchValue:e.searchValue})}),{mute:A,setMute:U}=(0,k.s_)(2),z=(0,u.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),U(!A,"keydown",x)}),[A,U,x]),W=(0,a.mp)(w.bg,{selector:({showing:e})=>e,dependencies:[]}),V=(0,a.mp)(P.r,{selector:e=>e.isOpen,dependencies:[]}),q=(0,u.useRef)(null),N=(0,u.useCallback)((e=>{var t,i,a,r,l,s,d,c,u,p,m,h,g,v,b,y;_?o?(null===(a=null===(i=null===(t=f.current)||void 0===t?void 0:t.swiper)||void 0===i?void 0:i.play)||void 0===a||a.call(i),null===(s=null===(l=null===(r=f.current)||void 0===r?void 0:r.audio)||void 0===l?void 0:l.play)||void 0===s||s.call(l)):(null===(u=null===(c=null===(d=f.current)||void 0===d?void 0:d.swiper)||void 0===c?void 0:c.pause)||void 0===u||u.call(c,e),null===(h=null===(m=null===(p=f.current)||void 0===p?void 0:p.audio)||void 0===m?void 0:m.pause)||void 0===h||h.call(m)):o?null===(v=null===(g=q.current)||void 0===g?void 0:g.play)||void 0===v||v.call(g):null===(y=null===(b=q.current)||void 0===b?void 0:b.pause)||void 0===y||y.call(b),n(!o)}),[o,n,_,f]),{pathname:H}=(0,p.TH)(),$=(0,p.k6)(),G=(0,u.useCallback)(((t,i)=>{var o;E(t),Z(B),D&&M?e({fromPopState:i,playProgress:null===(o=q.current)||void 0===o?void 0:o.currentTime,shouldPause:h}):(O(1),S(!0))}),[D,M,h,e,B]),K=(0,u.useRef)(""),Y=(0,u.useCallback)(((e,t,i)=>{if(t.includes(H)&&H!==g.nT.home)return G(e),void m();D&&M||(E(e),O(4),S(!0),K.current=t),i&&v.vD.handleChannelGeneralClick(i,"video_feed")}),[G,D,M,H,m]),Q=(0,u.useCallback)((()=>{_&&(C(!1),setTimeout((()=>{C(!0)}),0))}),[_,C]),J=(0,u.useCallback)(((e,i="click")=>{if(e&&E(e),F&&Z(""),D&&M){t(),n(!1);const e=Object.assign({enter_method:i,play_mode:"browser_mode",group_id:l,author_id:d,skipped_group_num:0,skipped_group_ids:""},x);b.r.handleVideoChange(e,"next"),"foryou"===c&&b.r.handleHotVideoChange(e,"next"),Q()}else O(3),S(!0)}),[D,M,t,n,l,d,x,c,Q,F]),X=(0,u.useCallback)(((e,t="click")=>{if(e&&E(e),F&&Z(""),D&&M){i(),n(!1);const e=Object.assign({enter_method:t,play_mode:"browser_mode",group_id:l,author_id:d,skipped_group_num:0,skipped_group_ids:""},x);b.r.handleVideoChange(e,"prev"),"foryou"===c&&b.r.handleHotVideoChange(e,"prev"),Q()}else O(2),S(!0)}),[D,M,i,n,l,d,x,c,Q,F]),ee=(0,u.useCallback)((e=>{if(27!==e.keyCode&&["input","textarea"].includes(e.target.tagName.toLocaleLowerCase())||"true"===e.target.getAttribute("contenteditable")||V)return;const t=new Map([[27,()=>{W||r.current||G(e)}],[40,()=>{J(e,"keydown")}],[32,()=>{N("keyboard")}],[38,()=>{X(e,"keydown")}],[76,()=>{s("keydown")}],[77,()=>{z(e)}]]),{keyCode:i}=e;t.has(i)&&(e.preventDefault(),t.get(i)())}),[r,G,s,J,X,z,V,W,N]),te=(0,u.useCallback)((()=>{var o;switch(I){case 1:e({playProgress:null===(o=q.current)||void 0===o?void 0:o.currentTime,shouldPause:h});break;case 2:i(),n(!1);break;case 3:t(),n(!1);break;case 4:K.current&&$.push(K.current)}S(!1),L(!0),y.y.handleLeaveComment({group_id:l})}),[I,l,$,h,e,t,i,L,n]),ie=(0,u.useCallback)((()=>{O(0),S(!1),y.y.handleKeepComment({group_id:l})}),[l]);return(0,u.useEffect)((()=>(document.addEventListener("keydown",ee),()=>{document.removeEventListener("keydown",ee)})),[ee]),{handleLinkClick:Y,handleClose:G,handleNext:J,handlePrev:X,preventDefault:E,togglePlay:N,videoPlayerRef:q,showLeaveModal:j,isInputEmpty:D,handleConfirmLeave:te,handleCancelLeave:ie}}function A({id:e,needDispose:t=!0}){const i=(0,a.qj)(M.x),o=(0,u.useRef)(null),n=(0,u.useCallback)((()=>{i.fetchComment({aweme_id:e})}),[i,e]);return(0,u.useEffect)((()=>()=>{t&&(i.dispose$(),i.setCommentItem({itemId:e,item:M.C}))}),[i,e,t]),(0,C.s)({elemRef:o,onHitBottom:n,bottomThreshold:200,throttle:200}),o}function U({showLeaveModal:e,group_id:t}){(0,u.useEffect)((()=>{e&&y.y.handleClose({group_id:t})}),[t,e]),(0,u.useEffect)((()=>()=>{y.y.handleClose({group_id:t})}),[t])}const z=({currentIndex:e,handlePrev:t,hasNext:i,handleNext:o,itemListKey:a,isUiOptimise:r=!1})=>{const l=(0,x.Q)(),s=(0,u.useCallback)(d()((e=>{a&&e.srcElement.classList.value.includes("BasicVideo")&&(e.deltaY>=1?o(e,"scroll"):e.deltaY<=-1&&t(e,"scroll"))}),100),[o,t]);(0,u.useEffect)((()=>(window.addEventListener("wheel",s),()=>{window.removeEventListener("wheel",s)})));const c={isUiOptimise:r};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(B.o1,Object.assign({disabled:0===e,isPrev:!0,onClick:t,"data-e2e":"arrow-left",role:"button","aria-label":l("pc_web_previous_btn")},c,{children:(0,n.jsx)(m.Z,{width:26,height:26,fill:"#fff"},void 0)}),void 0),(0,n.jsx)(B.o1,Object.assign({disabled:!i,isPrev:!1,onClick:o,"data-e2e":"arrow-right",role:"button","aria-label":l("pc_web_next_btn")},c,{children:(0,n.jsx)(m.Z,{width:26,height:26,fill:"#fff"},void 0)}),void 0)]},void 0)},W=e=>{var t,i;let o=!0;const n=(0,I.p)(null==e?void 0:e.author),{user:a={}}=null!==(t=(0,S.Lh)((()=>["user"]),[]))&&void 0!==t?t:{},[r,l]=(0,u.useState)(!1),s=(0,u.useCallback)((e=>{e.stopPropagation(),f.F.handleClickAnalyticsButton(),l(!0)}),[]),d=(0,u.useCallback)((()=>{l(!1)}),[]);a||(o=!1);const{secUid:c,analyticsOn:p}=null!=a?a:{};return c===(null!==(i=null==n?void 0:n.secUid)&&void 0!==i?i:"")&&p||(o=!1),{showAnalyticsButton:o,showAnalyticsModal:r,handleOpenAnalyticsModal:s,handleCloseAnalyticsModal:d}};function V(e,t){const{listLength:i,statusCode:o}=(0,a.mp)(O.h,{selector:t=>{var i,o,n;return{listLength:null!==(o=null===(i=t[e])||void 0===i?void 0:i.list.length)&&void 0!==o?o:0,statusCode:null===(n=t[e])||void 0===n?void 0:n.statusCode}},dependencies:[e]}),n=(0,a.mp)(L.O,{selector:e=>e.currentIndex,dependencies:[]});(0,u.useEffect)((()=>{0===o&&(!i||i-n<=3)&&t()}),[n,t,i,o])}const q=({itemListKey:e,currentIndex:t})=>(0,a.mp)(O.h,{selector:i=>{var o,n;const a=i[null!=e?e:""];return a?{currentId:a.browserList[t],prefetchId1:null!==(o=a.browserList[t+1])&&void 0!==o?o:"",prefetchId2:null!==(n=a.browserList[t+2])&&void 0!==n?n:"",listLength:a.browserList.length}:null},dependencies:[e,t]}),N=({itemListKey:e,currentIndex:t})=>{var i;const{currentId:o=""}=(0,j.m7)(q({itemListKey:e,currentIndex:t})),[n]=(0,a.b7)(D.A,{selector:e=>e[o],dependencies:[o]}),r=null!==(i=null==n?void 0:n.id)&&void 0!==i?i:"";return{authorId:null==n?void 0:n.authorId,groupId:r}},H=()=>{const e=(0,x.Q)(),t=e("pc_web_login"),i=e("pc_web_login_to_comment"),o=i.indexOf("%s");return{prefixText:i.slice(0,o),loginText:t,endText:i.slice(o).replace("%s","")}},$=e=>e?new Map([["foryou","one-column-item"],["following","one-column-item"]]).get(e):e,G=({itemListKey:e,currentIndex:t})=>{const{currentId:i=""}=(0,j.m7)(q({itemListKey:e,currentIndex:t})),[o]=(0,a.b7)(D.A,{selector:e=>e[i],dependencies:[i]});return{liveRoomInfo:null==o?void 0:o.liveRoomInfo,requestId:null==o?void 0:o.logId}}},38997:(e,t,i)=>{i.d(t,{h:()=>v,Q:()=>g});var o=i(11040),n=i(99192),a=i(91829),r=i(74820),l=i(91051),s=i(45949),d=i(9236),c=i(9343),u=i(35372);const p=(e,t)=>(e-t)*u.Yb+"px",m=({originIndex:e,startIndex:t,maxShowNum:i,num:o})=>0===e||e===o-1||e>t&&e<t+i-1?{width:"6px",height:"6px"}:{width:"4px",height:"4px"},h=(0,l.memo)((({photoVideoRef:e,item:t,maxShowNum:i=6})=>{var h,g;const v=(null!==(g=null===(h=null==t?void 0:t.imagePost)||void 0===h?void 0:h.images)&&void 0!==g?g:[]).length,[b,y]=(0,l.useState)(0),{direction:f}=(0,r.u)(),_=(({photoVideoRef:e,num:t})=>{const[i,o]=(0,l.useState)(0);return(0,l.useEffect)((()=>{var i,n;null===(n=null===(i=e.current)||void 0===i?void 0:i.swiper)||void 0===n||n.onActiveIndexChange((e=>{let i=e.activeIndex;0===i?i=t:i===t+1&&(i=1),o(i-1)}))}),[t,e]),i})({photoVideoRef:e,num:v}),{disabledLeft:x,disabledRight:w}=(0,l.useMemo)((()=>({disabledLeft:0===_,disabledRight:_===v-1})),[_,v]),{handleSwitchLeft:k,handleSwitchRight:C}=(({photoVideoRef:e,disabledLeft:t,disabledRight:i})=>{const o=(0,d.mp)(c.r,{selector:e=>e.isOpen,dependencies:[]}),n=(0,l.useCallback)((i=>()=>{var o,n,a,r,l,s;t||(null===(a=null===(n=null===(o=e.current)||void 0===o?void 0:o.swiper)||void 0===n?void 0:n.slidePrev)||void 0===a||a.call(n,"keyboard"===i?"keyboard":"manual_click"),null===(s=null===(l=null===(r=e.current)||void 0===r?void 0:r.swiper)||void 0===l?void 0:l.pause)||void 0===s||s.call(l,i))}),[t,e]),a=(0,l.useCallback)((t=>()=>{var o,n,a,r,l,s;i||(null===(a=null===(n=null===(o=e.current)||void 0===o?void 0:o.swiper)||void 0===n?void 0:n.slideNext)||void 0===a||a.call(n,"keyboard"===t?"keyboard":"manual_click"),null===(s=null===(l=null===(r=e.current)||void 0===r?void 0:r.swiper)||void 0===l?void 0:l.pause)||void 0===s||s.call(l,t))}),[i,e]),r=(0,l.useMemo)((()=>{const e=new Map;return e.set(37,n("keyboard")),e.set(39,a("keyboard")),e}),[n,a]),s=(0,l.useCallback)((e=>{const t=Number(e.keyCode);27!==t&&["input","textarea"].includes(e.target.tagName.toLocaleLowerCase())||"true"===e.target.getAttribute("contenteditable")||o||(e.preventDefault(),!r.has(t))||r.get(t)()}),[o,r]);return(0,l.useEffect)((()=>(document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)})),[s]),{handleSwitchLeft:n,handleSwitchRight:a}})({photoVideoRef:e,disabledLeft:x,disabledRight:w});return(0,l.useEffect)((()=>{v<i||(_-b>=i-1?y(_-i+(_===v-1?1:2)):_<=b&&0!==b&&y(_-(0===_?0:1)))}),[_,i,v,b]),(0,o.jsxs)(u.Je,Object.assign({onClick:s.NS},{children:[(0,o.jsx)(u.fH,Object.assign({disabled:x,onClick:k("slide")},{children:(0,o.jsx)(n.d,{size:20},void 0)}),void 0),(()=>{if(v>=i){const e="ltr"===f?"left":"right";return(0,o.jsx)(u.Or,{children:(0,o.jsx)(u.KX,Object.assign({dynamic:!0,num:i},{children:new Array(v).fill(0).map(((t,n)=>(0,o.jsx)(u.wf,Object.assign({index:n,style:{[e]:p(n,b)}},{children:(0,o.jsx)(u.vs,{active:_===n,style:Object.assign({},m({originIndex:n,startIndex:b,maxShowNum:i,num:v}))},void 0)}),n)))}),void 0)},void 0)}return(0,o.jsx)(u.Or,{children:(0,o.jsx)(u.KX,Object.assign({num:v},{children:new Array(v).fill(0).map(((e,t)=>(0,o.jsx)(u.wf,Object.assign({index:t},{children:(0,o.jsx)(u.vs,{active:_===t},void 0)}),t)))}),void 0)},void 0)})(),(0,o.jsx)(u.W5,Object.assign({disabled:w,onClick:C("slide")},{children:(0,o.jsx)(a.c,{size:20},void 0)}),void 0)]}),void 0)})),g=h,v=(0,l.memo)((e=>(0,o.jsx)(u.QV,{children:(0,o.jsx)(u.N8,{children:(0,o.jsx)(h,Object.assign({},e),void 0)},void 0)},void 0)))},35372:(e,t,i)=>{i.d(t,{Yb:()=>r,Or:()=>s,KX:()=>d,fH:()=>c,W5:()=>u,QV:()=>p,N8:()=>m,Je:()=>h,wf:()=>g,vs:()=>v});var o=i(68191),n=i(36488),a=i(48581);const r=12,l=({theme:{colors:e,direction:t},disabled:i=!1})=>Object.assign({display:"flex",justifyContent:"center",alignItems:"center",width:"36px",height:"36px",borderRadius:"100%",color:i?e.ConstTextInverse5:e.ConstTextInverse,cursor:"pointer",transform:`rotate(${"rtl"===t?"180deg":"0"})`},(0,a.s)()),s=(0,o.Z)("div",{target:"exksjhw0"})({margin:"0 8px",padding:"12px 17px",borderRadius:"18px"},"label:DivPaginationWrapper;"),d=(0,o.Z)("div",{target:"exksjhw1"})((({num:e})=>({position:"relative",display:"flex",overflow:"hidden",width:r*e+"px",height:`${r}px`})),"label:DivPaginationContainer;"),c=(0,o.Z)("div",{target:"exksjhw2"})(l,"label:DivLeftArrow;"),u=(0,o.Z)("div",{target:"exksjhw3"})(l,"label:DivRightArrow;"),p=(0,o.Z)("div",{target:"exksjhw4"})((({theme:{colors:e}})=>({position:"absolute",bottom:0,width:"100%",height:"100%",cursor:"pointer",userSelect:"none","&:hover":{[s.toString()]:{backgroundColor:e.ConstBGInverse4},[c.toString()]:{backgroundColor:e.ConstBGInverse4},[u.toString()]:{backgroundColor:e.ConstBGInverse4}}})),"label:DivPhotoWrapper;"),m=(0,o.Z)("div",{target:"exksjhw5"})({position:"absolute",left:0,right:0,bottom:0},"label:DivPhotoControlWrapper;"),h=(0,o.Z)("div",{target:"exksjhw6"})({display:"flex",position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",height:"36px"},"label:DivPhotoControl;"),g=(0,o.Z)("div",{target:"exksjhw7"})((({theme:{direction:e},index:t})=>[{position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",width:`${r}px`,height:`${r}px`,transition:"all 200ms cubic-bezier(.65, 0, .35, 1)"},(0,n.YJ)({direction:e,start:t*r})]),"label:DivDotWrapper;"),v=(0,o.Z)("div",{target:"exksjhw8"})((({active:e})=>({width:"6px",height:"6px",margin:"3px",borderRadius:"100%",backgroundColor:e?"#fff":"rgba(255, 255, 255, .6)",transition:"all 200ms cubic-bezier(.65, 0, .35, 1)"})),"label:DivDot;")},30967:(e,t,i)=>{i.d(t,{E9:()=>d,MY:()=>c,fz:()=>u,IK:()=>p,lI:()=>m,L7:()=>h,P_:()=>g,Sf:()=>y,ps:()=>f,o1:()=>_,Q9:()=>x,OY:()=>w,sL:()=>C,oT:()=>j,ik:()=>S,zo:()=>P,wh:()=>T,iT:()=>I});var o=i(68191),n=i(88342),a=i(22743),r=i(36488),l=i(17353),s=i(50829);const d=(0,o.Z)("div",{target:"e11s2kul0"})((({theme:{colors:e}})=>({position:"fixed",left:0,top:0,right:0,bottom:0,background:e.BGPrimary,zIndex:1e3,display:"flex",flexDirection:"row"})),"label:DivBrowserModeContainer;"),c={left:"-80px",right:"-80px",width:"auto"},u={maxWidth:"419px"},p={maxWidth:"419px"},m=(0,o.Z)("div",{target:"e11s2kul2"})({position:"absolute",width:"10%",height:"10%",filter:"blur(2px)",left:"50%",top:"50%",transform:"scale(11)",opacity:"0.3",background:"center no-repeat",backgroundSize:"cover"},"label:DivBlurBackground;"),h=(0,o.Z)("div",{target:"e11s2kul3"})((({isUiOptimise:e})=>({position:e?"absolute":"relative",left:e?0:"",width:"100%",height:"100%",cursor:"pointer",":hover":{[`${s.ov}`]:{opacity:1}},":focus-within":{[`${s.ov}`]:{opacity:1}}})),"label:DivVideoWrapper;"),g=(0,o.Z)(a.Z,{target:"e11s2kul4"})({position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none"},"label:StyledPlayIcon;");g.defaultProps=Object.assign(Object.assign({},g.defaultProps),{"data-e2e":"browse-video-play"});const v="1px solid blue",b=(0,o.Z)("button",{target:"e11s2kul5"})((({theme:{colors:e}})=>({position:"absolute",zIndex:1,display:"flex",justifyContent:"center",alignItems:"center",width:"40px",height:"40px",background:e.ConstLineInverse,borderRadius:"50%",cursor:"pointer",border:"none",outline:"none",fontsize:0,"&:focus-visible":{outline:`2px solid ${e.Negative}`}})),(({theme:e,isUiOptimise:t})=>(0,r.ZD)({theme:e,isUiOptimise:t})),"label:ButtonBasicButtonContainer;"),y=(0,o.Z)(b,{target:"e11s2kul6"})((({theme:e,isUiOptimise:t})=>({top:"20px",transition:"opacity .3s",zIndex:100,backgroundColor:t?"":e.colors.ConstBGContainer,":hover":{opacity:.7},":active":{opacity:.5}})),(({theme:{direction:e}})=>(0,r.YJ)({direction:e,start:"20px"})),"label:StyledCloseIconContainer;");y.defaultProps=Object.assign(Object.assign({},y.defaultProps),{"data-e2e":"browse-close"});const f=(0,o.Z)(l.Z,{target:"e11s2kul7"})({position:"absolute",zIndex:1,top:"20px",borderRadius:"100px",fill:"black"},(({theme:{direction:e}})=>(0,r.YJ)({direction:e,start:"84px"})),"label:StyledLogo;");f.defaultProps=Object.assign(Object.assign({},f.defaultProps),{"data-e2e":"browse-logo"});const _=(0,o.Z)(b,{target:"e11s2kul8"})((({isPrev:e,theme:{colors:t},isUiOptimise:i})=>({transform:e?"rotate(-90deg)":"rotate(90deg)",top:e?"calc(50% - 48px)":"calc(50% + 8px)",marginTop:"-24px",":disabled":{display:"none"},background:i?"":t.ConstBGContainer,":hover":{opacity:.7},":active":{opacity:.5}})),(({theme:{direction:e}})=>(0,r.YJ)({direction:e,end:"20px"})),"label:StyledVideoSwitch;"),x=(0,o.Z)("div",{target:"e11s2kul14"})((({theme:e,isUiOptimise:t=!1})=>[(0,r.GI)({theme:e,typography:"P3",fontWeight:"semiBold",color:"ConstTextInverse4",fontFamily:"Sofia"}),{padding:"10px 16px",backgroundColor:e.colors.ConstBGContainer,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"100px",position:"absolute",top:"20px",cursor:"pointer",zIndex:100,color:e.colors.ConstTextInverse,":hover":{opacity:.7},":active":{opacity:.5},"&:focus-visible":{outline:v}},(0,r.ZD)({theme:e,isUiOptimise:t}),(0,r.YJ)({direction:e.direction,end:"20px"})]),"label:DivReportText;");x.defaultProps=Object.assign(Object.assign({},x.defaultProps),{"data-e2e":"browse-report"});const w=(0,o.Z)(n.Z,{target:"e11s2kul15"})((({theme:{direction:e}})=>(0,r.YJ)({direction:e,marginEnd:"5px"})),{verticalAlign:"middle"},"label:StyledIconFlag;"),k=(0,o.Z)("button",{target:"e11s2kul16"})(r.Ph,(({theme:e,widerBottom:t=!1})=>({position:"absolute",bottom:t?"60px":"20px",transition:"opacity 0.3s",cursor:"pointer",fontsize:0,lineHeight:0,borderRadius:"100px",backgroundColor:e.colors.ConstBGContainer,":hover":{opacity:.7},":active":{opacity:.5}})),(({theme:{direction:e}})=>(0,r.YJ)({direction:e,end:"20px"})),"label:ButtonVoiceControl;");k.defaultProps=Object.assign(Object.assign({},k.defaultProps),{"data-e2e":"browse-sound"});const C=(0,o.Z)("button",{target:"e11s2kul17"})(r.Ph,(({theme:e})=>({display:"flex",transition:"opacity 0.3s",cursor:"pointer",fontsize:0,lineHeight:0,borderRadius:"100px",backgroundColor:e.colors.ConstBGContainer,":hover":{opacity:.7},":active":{opacity:.5},"&:focus-visible":{outline:v}})),(({theme:e,isUiOptimise:t})=>(0,r.ZD)({theme:e,isUiOptimise:t})),"label:ButtonVoiceControlNew;");C.defaultProps=Object.assign(Object.assign({},C.defaultProps),{"data-e2e":"browse-sound"});const j=(0,o.Z)("div",{target:"e11s2kul18"})((({widerBottom:e=!1})=>({position:"absolute",zIndex:1,bottom:e?"60px":"20px"})),(({theme:{direction:e}})=>(0,r.YJ)({direction:e,end:"20px"})),"label:DivVoiceControlContainer;"),S=(0,o.Z)("div",{target:"e11s2kul19"})((({theme:{colors:e},isUiOptimise:t=!1})=>({flex:t?"1 0 600px":"1 1 896px",maxWidth:t?"100%":"",background:e.ConstBGInverse,position:"relative",overflow:"hidden",padding:"0 80px"})),"label:DivVideoContainer;"),P=(0,o.Z)("div",{target:"e11s2kul20"})({position:"absolute",bottom:0,left:0,right:0},"label:DivWarnInfoPosition;"),T=(0,o.Z)("a",{target:"e11s2kul22"})((({theme:{colors:e}})=>({display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",bottom:"84px",left:"50%",transform:"translateX(-50%)",fontWeight:500,fontSize:"18px",padding:"11.5px 24px",borderRadius:"52px",color:e.ConstTextInverse,background:e.ToastDefault,cursor:"pointer",textDecoration:"none",":hover":{opacity:.7,color:e.ConstTextInverse,textDecoration:"none"},":active":{opacity:.5,color:e.ConstTextInverse,textDecoration:"none"},":visited":{opacity:1,color:e.ConstTextInverse,textDecoration:"none"}})),"label:AAnalyticsWrapper;"),I=(0,o.Z)("div",{target:"e11s2kul23"})({position:"absolute",zIndex:1,width:"100%",display:"flex",justifyContent:"center",left:0,right:0,margin:"auto",alignItems:"center",height:"85px",background:"linear-gradient(180deg, rgba(0, 0, 0, 0.3) 0, rgba(0, 0, 0, 0) 100%)"},"label:DivSearchBarContainer;")},50829:(e,t,i)=>{i.d(t,{yx:()=>a,F7:()=>r,MT:()=>l,$_:()=>s,FL:()=>d,ov:()=>p,Gb:()=>m,Am:()=>h});var o=i(68191),n=i(36488);const a=(0,o.Z)("div",{target:"e1rpry1m0"})({width:"100%",height:"24px",flex:"1 1 auto",position:"relative"},"label:DivSeekBarContainer;"),r=(0,o.Z)("div",{target:"e1rpry1m1"})({flex:"0 0 88px",maxWidth:"88px",marginInlineStart:"8px",fontSize:"14px",lineHeight:"24px",color:"#ffffff",textAlign:"end",whiteSpace:"nowrap",fontFeatureSettings:'"tnum"',fontVariantNumeric:"tabular-nums",fontFamily:"Tahoma, PingFangSC, sans-serif"},"label:DivSeekBarTimeContainer;"),l=(0,o.Z)("div",{target:"e1rpry1m2"})((({theme:{colors:e}})=>({height:"4px",width:"100%",backgroundColor:e.ConstTextInverse5,position:"absolute",left:"0",top:"50%",transform:"translateY(-50%)",cursor:"pointer","&:focus-visible":{outline:`2px solid ${e.Negative}`}})),"label:DivSeekBarProgress;"),s=(0,o.Z)("div",{target:"e1rpry1m3"})((({theme:{direction:e,colors:t}})=>({height:"4px",width:"100%",backgroundColor:t.ConstTextInverse,position:"absolute",top:"50%",transform:"translateY(-50%)",cursor:"pointer",transformOrigin:"rtl"===e?"right":"left"})),"label:DivSeekBar;"),d=(0,o.Z)("div",{target:"e1rpry1m4"})((({theme:{direction:e}})=>(0,n.YJ)({direction:e})),(({theme:{direction:e}})=>({display:"none",width:"16px",height:"16px",backgroundColor:"#ffffff",borderRadius:"16px",position:"absolute",top:"50%",transform:`translate(${"rtl"===e?"50%":"-50%"}, -50%)`,cursor:"pointer",zIndex:1})),"label:DivSeekBarCircle;"),c="calc(100% - 160px)",u="translateX(-50%)",p=(0,o.Z)("div",{target:"e1rpry1m5"})((({show:e,extraBottomSpace:t,isDisplayForAnyWidth:i})=>({width:c,height:"24px",paddingInline:"16px",position:"absolute",opacity:e?"1":"0",transition:"opacity .3s",bottom:t?"68px":"28px",cursor:"initial",display:"flex",alignItems:"center",left:"50%",transform:u,maxWidth:"56.25vh",[`:hover ${l}`]:{height:"6px"},[`:hover ${s}`]:{height:"6px"},[`:hover ${d}`]:{display:"block"},"@media (max-width: 900px)":{display:i?"":"none"}})),"label:DivVideoControlContainer;"),m=(0,o.Z)("div",{target:"e1rpry1m6"})({width:c,height:"28px",position:"absolute",bottom:0,left:"50%",transform:u,cursor:"initial",maxWidth:"56.25vh"},"label:DivVideoControlBottom;"),h=(0,o.Z)("div",{target:"e1rpry1m7"})({width:c,height:"10px",position:"absolute",bottom:"52px",left:"50%",transform:u,cursor:"initial",maxWidth:"56.25vh"},"label:DivVideoControlTop;")},11968:(e,t,i)=>{i.d(t,{F:()=>l});var o=i(64047),n=i(73566),a=i(48185),r=i(19630);let l=class extends n.D{constructor(){super(...arguments),this.defaultState={currentCategory:"Talent",currentCategoryType:2}}setCurrentCategory(e,t){e.currentCategory=t}setCurrentCategoryType(e,t){e.currentCategoryType=t}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],l.prototype,"setCurrentCategory",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],l.prototype,"setCurrentCategoryType",null),l=(0,o.__decorate)([(0,r.Y)("ExploreModule")],l)},4668:(e,t,i)=>{i.d(t,{J:()=>he});var o=i(64047),n=i(11040),a=i(74820),r=i(9236),l=i(16926),s=i(91051),d=i(85630),c=i(28972),u=i(32124),p=i(66833),m=i(90012),h=i(68457),g=i(32273),v=i(78772),b=i(32370),y=i(85640),f=i(63175),_=i(26641),x=i(66599),w=i(38310),k=i(55198),C=i(78658),j=i(68191),S=i(72354),P=i(69988),T=i(64504),I=i(77969),O=i(36488),D=i(99116),R=i(41928);const M=(0,j.Z)("div",{target:"e140z3d00"})({position:"relative",width:400},"label:DivSendMessagePanelContainer;"),L=(0,j.Z)("div",{target:"e140z3d01"})((({theme:{direction:e}})=>[{position:"absolute",top:36,cursor:"pointer"},(0,O.YJ)({direction:e,end:32})]),"label:DivCloseButtonWrapper;"),B=(0,j.Z)("h2",{target:"e140z3d02"})((({theme:e,theme:{direction:t}})=>[(0,O.GI)({theme:e,fontFamily:"Proxima",typography:"P0",fontWeight:"bold"}),{padding:"32px 0 0"},(0,O.YJ)({direction:t,paddingStart:32,paddingEnd:62})]),"label:H2ModalTitle;"),F=(0,j.Z)("div",{target:"e140z3d03"})((({theme:e})=>({display:"flex",alignItems:"center",width:336,height:36,margin:"24px 32px 0",borderRadius:"4px",backgroundColor:e.colors.BGPlaceholderDefault})),"label:DivSearchContainer;"),E=(0,j.Z)(S.Z,{target:"e140z3d04"})((({theme:{direction:e}})=>[(0,O.YJ)({direction:e,marginStart:16,marginEnd:12})]),"label:StyledMagnifyingGlass;"),Z=(0,j.Z)("input",{target:"e140z3d05"})((({theme:e,theme:{colors:t}})=>[(0,O.GI)({theme:e,fontFamily:"Proxima",typography:"P2"}),{width:240,height:22,border:"none",outline:"none",background:"transparent",color:t.TextPrimary,caretColor:t.Primary,"::placeholder":{color:t.TextTertiary}}]),"label:InputUser;"),A=(0,j.Z)("div",{target:"e140z3d06"})((({theme:{direction:e}})=>[{width:16,height:16,cursor:"pointer"},(0,O.YJ)({direction:e,marginStart:8})]),"label:DivClearButton;"),U=(0,j.Z)("div",{target:"e140z3d07"})({minHeight:200,marginTop:24},"label:DivUserListContainer;"),z=(0,j.Z)("p",{target:"e140z3d08"})((({theme:e})=>[(0,O.GI)({theme:e,fontFamily:"Proxima",typography:"P1",color:"TextQuaternary"}),{marginTop:74,textAlign:"center"}]),"label:PNoResult;"),W=(0,j.Z)(D.g,{target:"e140z3d09"})({width:36,height:36,margin:"6px auto 12px"},"label:StyledLoading;"),V=(0,j.Z)("p",{target:"e140z3d010"})((({theme:e,theme:{direction:t}})=>[(0,O.GI)({theme:e,fontFamily:"Proxima",typography:"P4",color:"TextTertiary"}),{marginBottom:4,fontSize:"13px"},(0,O.YJ)({direction:t,marginStart:32})]),"label:PUserTitle;"),q=(0,j.Z)("div",{target:"e140z3d011"})((({long:e,isSearching:t})=>({position:"relative",boxSizing:"border-box",overflowY:"auto",width:"100%",minHeight:t?e?578:472:200,maxHeight:e?578:472,paddingBottom:e?210:102,"::-webkit-scrollbar":{display:"none"}})),"label:DivUserListInnerContainer;"),N=(0,j.Z)("div",{target:"e140z3d012"})((({theme:e})=>({boxSizing:"border-box",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",padding:"8px 32px",cursor:"pointer",":hover":{backgroundColor:e.colors.BGView}})),"label:DivUserItemContainer;"),H=(0,j.Z)("div",{target:"e140z3d013"})({display:"flex",flex:1,alignItems:"center",height:48},"label:DivUserItem;"),$=(0,j.Z)("div",{target:"e140z3d014"})((({theme:{direction:e}})=>(0,O.YJ)({direction:e,marginStart:12})),"label:DivRightPart;"),G=(0,j.Z)("div",{target:"e140z3d015"})([{display:"flex",alignItems:"center"}],"label:DivNicknameContainer;"),K=(0,j.Z)("span",{target:"e140z3d016"})((({theme:e})=>[(0,O.GI)({theme:e,fontFamily:"Proxima",typography:"P1",fontWeight:"bold"}),{maxWidth:220},O.wj]),"label:SpanNickname;"),Y=(0,j.Z)(P.Z,{target:"e140z3d017"})((({theme:{direction:e}})=>[{flexShrink:0},(0,O.YJ)({direction:e,marginStart:4})]),"label:StyledVerifiedBadgeColor;"),Q=(0,j.Z)("p",{target:"e140z3d018"})((({theme:e})=>[(0,O.GI)({theme:e,fontFamily:"Proxima",typography:"P3",color:"TextTertiary"}),{maxWidth:240,marginTop:2},O.wj]),"label:PUniqueId;"),J=(0,j.Z)("div",{target:"e140z3d019"})((({theme:{direction:e}})=>[{flexShrink:0,width:22,height:22},(0,O.YJ)({direction:e,marginStart:12})]),"label:DivCheckboxContainer;"),X=(0,j.Z)("div",{target:"e140z3d020"})((({theme:{colors:e}})=>({position:"absolute",bottom:0,left:0,right:0,padding:"12px 32px 32px 32px",backgroundColor:e.BGPrimary,borderRadius:"0 0 8px 8px",":before":{position:"absolute",top:0,left:0,right:0,content:'""',transform:"scaleY(.5)",width:"100%",height:1,backgroundColor:e.LineReverse2}})),"label:DivSendContainer;"),ee=(0,j.Z)(R.W,{target:"e140z3d021"})({width:336,height:46,marginTop:12},"label:StyledSendButton;"),te=(0,j.Z)("div",{target:"e140z3d022"})({display:"flex",marginTop:12},"label:DivMessageContainer;"),ie=(0,j.Z)("textarea",{target:"e140z3d023"})((({theme:e,theme:{direction:t,colors:i}})=>[(0,O.GI)({theme:e,fontFamily:"Proxima",typography:"P2"}),{display:"block",width:268,height:98,border:"none",resize:"none",outline:"none",wordBreak:"break-word",overflowWrap:"break-word",backgroundColor:i.BGPrimary,color:i.TextPrimary,caretColor:i.Primary,"::placeholder":{color:i.TextTertiary}},(0,O.YJ)({direction:t,marginEnd:12})]),"label:Textarea;"),oe=(0,j.Z)("img",{target:"e140z3d024"})({width:56,height:74},"label:ImgCover;"),ne=(0,j.Z)("div",{target:"e140z3d025"})((({theme:e,theme:{direction:t}})=>[{display:"flex",alignItems:"center",width:336,padding:"12px 0 12px",margin:"16px 32px 0",borderRadius:"4px",backgroundColor:e.colors.BGView},(0,O.YJ)({direction:t,paddingStart:16,paddingEnd:4})]),"label:DivTipContainer;"),ae=(0,j.Z)(T.Z,{target:"e140z3d026"})({width:24,height:24,flexShrink:0},"label:StyledPersonArrowLeftRight;"),re=(0,j.Z)(I.Z,{target:"e140z3d027"})({width:24,height:24,flexShrink:0},"label:StyledTwoPerson;"),le=(0,j.Z)("div",{target:"e140z3d028"})((({theme:{colors:e}})=>({width:24,height:24,flexShrink:0,fontSize:"24px",color:e.TextSecondary})),"label:DivSubOnlyTagContainer;"),se=(0,j.Z)("p",{target:"e140z3d029"})((({theme:e,theme:{direction:t}})=>[(0,O.GI)({theme:e,fontFamily:"Proxima",typography:"P4",color:"TextSecondary"}),{fontSize:"13px"},(0,O.YJ)({direction:t,marginStart:12})]),"label:PTip;");var de=i(75311),ce=i(84095),ue=i(33642);const pe=(0,s.forwardRef)((function({uniqueId:e,isSelected:t=!1,searchValue:i="",selectedCount:o,onUserSelected:a},l){const d=(0,r.mp)(x.z,{selector:t=>t.users[e],dependencies:[e]}),c=(0,s.useRef)(null);(0,s.useImperativeHandle)(l,(()=>({get offsetTop(){var e,t;return null!==(t=null===(e=c.current)||void 0===e?void 0:e.offsetTop)&&void 0!==t?t:0}})),[]);const u=(0,s.useCallback)((()=>{o>=15&&!t||a(d,!t)}),[t,d,o,a]),{avatarThumb:p,nickname:m="",verified:h}=(0,ue.m7)(d),g=m.toLocaleLowerCase().indexOf(i.toLocaleLowerCase()),v=-1===g?0:i.length;if(!e||!d)return null;const b=m.slice(0,g),y=m.slice(g,g+v),f=m.slice(g+v);return(0,n.jsxs)(N,Object.assign({ref:c,onClick:u},{children:[(0,n.jsxs)(H,{children:[(0,n.jsx)(de.q,{size:48,src:p},void 0),(0,n.jsxs)($,{children:[(0,n.jsxs)(G,{children:[(0,n.jsx)(K,{children:(0,n.jsxs)("span",{children:[b,(0,n.jsx)("span",Object.assign({style:{color:"#fe2c55"}},{children:y}),void 0),f]},void 0)},void 0),h&&(0,n.jsx)(Y,{width:14,height:14,style:{verticalAlign:"middle",marginLeft:4}},void 0)]},void 0),(0,n.jsx)(Q,{children:e},void 0)]},void 0)]},void 0),(0,n.jsx)(J,{children:(0,n.jsx)(ce.X,{size:22,isCircle:!1,value:t},void 0)},void 0)]}),void 0)}));var me;!function(e){e.RECENT="recent",e.FOLLOWING="following"}(me||(me={}));const he=(0,s.memo)((function({visible:e,videoId:t,onClose:i,onKeyDown:j}){const S=(0,g.Q)(),P=(0,r.mp)(_.G,{dependencies:[],selector:e=>{var t;return null===(t=e.appContext)||void 0===t?void 0:t.user}}),T=(0,r.mp)(w.A,{selector:e=>e[t],dependencies:[t]}),{video:I,forFriend:O,author:D="",authorId:R="",subVideoMeta:N}=(0,s.useMemo)((()=>null!=T?T:{}),[T]),[H,$]=(0,r.b7)(x.z,{selector:e=>e.users[D],dependencies:[t]}),{privateAccount:G,nickname:K}=(0,s.useMemo)((()=>null!=H?H:{}),[H]),[{recentUserList:Y,recentUserNameList:Q,recentUidList:J,followingUser:de,isFollowingLoading:ce,isSendMessageLoading:ue},me]=(0,r.b7)(C.O),he=(0,l.fz)(p.p),ge=(0,s.useRef)({recent:!1,following:!1}),ve=(0,s.useRef)({recent:{list:[],hasShown:[]},following:{list:[],hasShown:[]}}),be=(0,s.useCallback)(((e,t)=>i=>{ve.current[t].list[e]=i}),[]),{isRTL:ye}=(0,f.Y)(),{colors:fe}=(0,a.u)(),[_e,xe]=(0,s.useState)(""),[we,ke]=(0,s.useState)(""),[Ce,je]=(0,s.useState)([]),[Se,Pe]=(0,s.useState)([]),[Te,Ie]=(0,s.useState)([]),Oe=Ce.length,De=Y.length,{list:Re,nicknameList:Me,uidList:Le,hasMore:Be}=de,Fe=Re.length,Ee=Oe>0,Ze=""!==_e,Ae=G||O||Boolean(N);(0,s.useEffect)((()=>{e||(xe(""),ke(""),je([]),me.setSendMessageStatus({isFailed:!1,isLoading:!1}))}),[e,me]),(0,s.useEffect)((()=>{if(!Fe&&Be){if(P){const{uid:e,avatarUri:t,nickName:i}=P,n=(0,o.__rest)(P,["uid","avatarUri","nickName"]),a=Object.assign({id:e,nickname:i,verified:!1,relation:0,avatarThumb:t[0],avatarMedium:t[0],avatarLarger:t[0]},n);$.setUser(a),me.updateFollowingUserList({list:[P.uniqueId],nicknameList:[i],uidList:[e],hasMore:!0,maxCursor:0,minCursor:0})}me.getFollowingUserListWithCanShare({count:90})}}),[]),(0,s.useEffect)((()=>{Promise.resolve().then((()=>{const e=ve.current.recent,t=ve.current.following;if(De&&!ge.current.recent&&(ge.current.recent=!0,Y.slice(0,5).forEach(((t,i)=>{var o,n;(null!==(n=null===(o=e.list[i])||void 0===o?void 0:o.offsetTop)&&void 0!==n?n:1/0)<354&&(m.R.handleShareHeadShow({user_type:"recent",rank_index:i,is_self:t===(null==P?void 0:P.uniqueId)?1:0,to_user_id:J[i]}),e.hasShown[i]=!0)}))),Fe&&!ge.current.following){if(1===Fe&&Be)return;ge.current.following=!0,Re.slice(0,5).forEach(((e,i)=>{var o,n;(null!==(n=null===(o=t.list[i])||void 0===o?void 0:o.offsetTop)&&void 0!==n?n:1/0)<354&&(m.R.handleShareHeadShow({user_type:"following",rank_index:i,is_self:e===(null==P?void 0:P.uniqueId)?1:0,to_user_id:Le[i]}),t.hasShown[i]=!0)}))}})).catch((()=>{}))}),[null==P?void 0:P.uniqueId,Re,Fe,Y,De,J,Le,Be]),(0,s.useEffect)((()=>{if(!_e)return;const e=[],t=[],i=_e.toLocaleLowerCase();Q.forEach(((t,o)=>{(t.toLocaleLowerCase().indexOf(i)>-1||Y[o].toLocaleLowerCase().indexOf(i)>-1)&&e.push(Y[o])})),Me.forEach(((o,n)=>{e.indexOf(Re[n])<0&&(o.toLocaleLowerCase().indexOf(i)>-1||Re[n].toLocaleLowerCase().indexOf(i)>-1)&&t.push(Re[n])})),Pe(e),Ie(t)}),[_e,Q,Y,Re,Me]);const Ue=(0,s.useCallback)((()=>{i()}),[i]),ze=(0,v.K$)(T),We=(0,s.useCallback)(((e,t)=>{var i;if(t)e&&je([...Ce,e]),he.handleShare(Object.assign({platform:"chat_head",group_id:I.id,author_id:R,poi_id:null===(i=null==T?void 0:T.poi)||void 0===i?void 0:i.id,is_sub_only_video:N?1:0},ze));else{let t=-1;Ce.some(((i,o)=>{if(i.uniqueId===(null==e?void 0:e.uniqueId))return t=o,!0})),t>-1&&(Ce.splice(t,1),je([...Ce]))}}),[Ce,he,I.id,R,T]),Ve=(0,s.useCallback)((e=>{const{value:t}=e.target;xe(t)}),[]),qe=(0,s.useCallback)((()=>{m.R.handleSearchContact()}),[]),Ne=(0,s.useCallback)((()=>{xe("")}),[]),He=(0,s.useCallback)((e=>{const{value:t}=e.target;ke(t)}),[]),$e=function({selectedUserList:e,messageText:t,videoId:i}){const[{conversationMap:o},n]=(0,r.b7)(C.O),a=(0,r.mp)(_.G,{dependencies:[],selector:e=>{var t;return null===(t=e.appContext)||void 0===t?void 0:t.user}}),l=(0,r.mp)(w.A,{selector:e=>e[i],dependencies:[i]});return(0,s.useCallback)((()=>{var r;const{authorId:s="",nickname:d,authorSecId:c,avatarThumb:u,video:p}=null!=l?l:{},h=[];let g=!1;e.forEach((e=>{(null==e?void 0:e.id)===(null==a?void 0:a.uid)&&(g=!0),h.push(null==e?void 0:e.id)})),m.R.handleShareVideoToChat({platform:"chat_head",is_self:g?1:0,group_id:null!==(r=null==p?void 0:p.id)&&void 0!==r?r:"",author_id:s,is_with_text:t.trim()?1:0,chat_cnt:e.length,to_user_id:String(h)}),n.setSendMessageStatus({isLoading:!0,isFailed:!1}),e.forEach((e=>{var a;const{id:r,relation:l}=e,m=Boolean(null==o?void 0:o[r]),h=null===(a=null==o?void 0:o[r])||void 0===a?void 0:a.id;n.sendMessage({convId:h,uid:r,relation:l,type:8,content:{aweType:800,itemId:i,uid:s,secUID:c,content_thumb:{url_list:[u],uri:u},content_name:d,cover_url:{url_list:[null==p?void 0:p.cover],uri:null==p?void 0:p.cover},cover_width:null==p?void 0:p.width,cover_height:null==p?void 0:p.height},hasConversation:m}),t.trim()&&n.sendMessage({convId:h,uid:r,relation:l,type:7,content:{aweType:0,text:t},hasConversation:m})}))}),[l,e,t,n,null==a?void 0:a.uid,o,i])}({selectedUserList:Ce,messageText:we,videoId:t});!function({selectedUserList:e,messageText:t,handleSuccess:i,isRTL:o}){const n=(0,g.Q)(),[{isSendMessageFailed:a,successSentMessageCount:l},d]=(0,r.b7)(C.O),c=e.length;(0,s.useEffect)((()=>{var r,s,u,p;if(a&&(k.h.open({content:n("support_webapp_sharing_error_message"),duration:3,widthType:"half",getContainer:b.Z,getContainerPosition:"fixed"}),d.setSendMessageStatus({isLoading:!1,isFailed:!1,successCount:0})),0!==l&&l===c*(t.trim()?2:1)){const t=null!==(s=null===(r=e[c-1])||void 0===r?void 0:r.nickname)&&void 0!==s?s:"",a=null!==(p=null===(u=e[c-2])||void 0===u?void 0:u.nickname)&&void 0!==p?p:"";switch(c){case 1:k.h.open({content:n("support_webapp_sharing_sent_toast_1",{username:t}),type:"success",duration:3,widthType:"half",isRTL:o,getContainer:b.Z,getContainerPosition:"fixed"});break;case 2:k.h.open({content:n("support_webapp_sharing_sent_toast_2",{username:t,username2:a}),type:"success",duration:3,widthType:"half",isRTL:o,getContainer:b.Z,getContainerPosition:"fixed"});break;default:k.h.open({content:n("support_webapp_sharing_sent_toast_3",{username:t,number:c-1}),type:"success",duration:3,widthType:"half",isRTL:o,getContainer:b.Z,getContainerPosition:"fixed"})}d.setSendMessageStatus({isLoading:!1,successCount:0}),i()}}),[a,l,e,t,c,n,d,i,o])}({selectedUserList:Ce,messageText:we,handleSuccess:()=>{i()},isRTL:ye});const Ge=(0,h.fB)((e=>{if(Ze)return;const t=e.target,{scrollHeight:i,scrollTop:o,clientHeight:n}=t;i-o===n&&!ce&&Be&&me.getFollowingUserListWithCanShare({count:30});const a=ve.current.recent,r=ve.current.following;a.list.forEach(((e,t)=>{var i;a.hasShown[t]||(null!==(i=null==e?void 0:e.offsetTop)&&void 0!==i?i:1/0)<o+n&&(m.R.handleShareHeadShow({user_type:"recent",rank_index:t,is_self:Y[t]===(null==P?void 0:P.uniqueId)?1:0,to_user_id:J[t]}),a.hasShown[t]=!0)})),r.list.forEach(((e,t)=>{var i;r.hasShown[t]||(null!==(i=null==e?void 0:e.offsetTop)&&void 0!==i?i:1/0)<o+n&&(m.R.handleShareHeadShow({user_type:"following",rank_index:t,is_self:Re[t]===(null==P?void 0:P.uniqueId)?1:0,to_user_id:Le[t]}),r.hasShown[t]=!0)}))}),[ce,Be,me,Y,null==P?void 0:P.uniqueId,Re,Ze,J,Le],100),Ke=(0,s.useCallback)(((e,t,i)=>{const o=Ce.some((t=>t.uniqueId===e));return(0,n.jsx)(pe,{uniqueId:e,isSelected:o,searchValue:_e,selectedCount:Oe,onUserSelected:We,ref:be(t,i)},t)}),[_e,Oe,Ce,be,We]),Ye=(0,b.Z)();return(0,s.useEffect)((()=>{Ye.addEventListener("keydown",(e=>{null==j||j(e)}))}),[j,Ye]),(0,n.jsx)(y.u_,Object.assign({parentRef:Ye,visible:e,maskCloseable:!1},{children:(0,n.jsxs)(M,{children:[(0,n.jsx)(L,Object.assign({onClick:Ue},{children:(0,n.jsx)(c.Z,{width:24,height:24},void 0)}),void 0),(0,n.jsx)(B,{children:S("support_webapp_sharing_option_button")},void 0),(()=>{if(!Ae)return null;let e=(0,n.jsx)(re,{fill:fe.TextSecondary},void 0),t="support_webapp_sharing_toast_2";return O?(e=(0,n.jsx)(ae,{fill:fe.TextSecondary},void 0),t="support_webapp_sharing_toast_1"):N&&(e=(0,n.jsx)(le,{children:(0,n.jsx)(d.H,{},void 0)},void 0),t="subVideo_share_note"),(0,n.jsxs)(ne,{children:[e,(0,n.jsx)(se,{children:S(t,{username:K})},void 0)]},void 0)})(),(0,n.jsxs)(F,{children:[(0,n.jsx)(E,{width:24,height:24,fill:Ze?fe.TextPrimary:fe.TextReverse4},void 0),(0,n.jsx)(Z,{value:_e,placeholder:S("support_webapp_sharing_searchbar_ghosttext"),onChange:Ve,onClick:qe},void 0),Ze&&(0,n.jsx)(A,Object.assign({onClick:Ne},{children:(0,n.jsx)(u.Z,{width:16,height:16,fill:fe.TextReverse4},void 0)}),void 0)]},void 0),(0,n.jsx)(U,{children:(0,n.jsx)(q,Object.assign({long:Ee,isSearching:Ze,onScroll:Ge},{children:(()=>{if(Ze){const e=Se.length>0||Te.length>0;return(0,n.jsxs)(n.Fragment,{children:[Se.map(((e,t)=>Ke(e,t,"recent"))),Te.map(((e,t)=>Ke(e,t,"following"))),!e&&(0,n.jsx)(z,{children:S("support_webapp_sharing_search_results")},void 0)]},void 0)}return(0,n.jsxs)(n.Fragment,{children:[0!==De&&(0,n.jsx)(V,{children:S("support_webapp_sharing_recent")},void 0),Y.map(((e,t)=>Ke(e,t,"recent"))),(0,n.jsx)(V,Object.assign({style:{marginTop:De?12:0}},{children:S("support_webapp_sharing_following")}),void 0),Re.map(((e,t)=>Ke(e,t,"following"))),ce&&(0,n.jsx)(W,{},void 0)]},void 0)})()}),void 0)},void 0),(0,n.jsxs)(X,{children:[Ee&&(0,n.jsxs)(te,{children:[(0,n.jsx)(ie,{value:we,placeholder:S("support_webapp_sharing_write_a_message"),maxLength:6e3,onChange:He},void 0),(0,n.jsx)(oe,{src:null==I?void 0:I.cover},void 0)]},void 0),(0,n.jsxs)(ee,Object.assign({buttonTheme:"primary",disabled:!Ee,onClick:$e,loading:ue},{children:[S("support_webapp_sharing_send_button"),Oe>1?`(${Oe})`:""]}),void 0)]},void 0)]},void 0)}),void 0)}))},91756:(e,t,i)=>{i.d(t,{fp:()=>k,Lb:()=>w,vq:()=>j,ny:()=>C,Od:()=>T,IG:()=>S});var o=i(43226),n=i.n(o),a=i(90293),r=i(48592),l=i(34802),s=i(67303),d=i(2468),c=i(98312),u=i(73076),p=i(89173),m=i(648),h=i(8862),g=i(64579),v=i(52226),b=i(48984),y=i(99014),f=i(32370),_=i(11040);let x=0;const w={copy:"copy",whatsapp:"whatsapp",facebook:"facebook",twitter:"twitter",reddit:"reddit",pinterest:"pinterest",vk:"vk",sms:"sms",embed:"embed",telegram:"telegram",line:"line",linkedin:"linkedin",email:"email",message:"message"},k=Object.assign(Object.assign({},w),{viber:"viber",kakaotalk:"kakaotalk",messenger:"messenger"}),C={facebook:"{Share to} Facebook",pinterest:"{Share to} Pinterest",twitter:"{Share to} Twitter",copy:"{copy_link}",embed:"{embed}",whatsapp:"{Share to} WhatsApp",reddit:"{Share to} Reddit",vk:"{Share to} VK",sms:"{Share to} Sms",telegram:"{Share to} Telegram",line:"{Share to} Line",linkedin:"{Share to} LinkedIn",email:"{Share to} Email",message:"{support_webapp_sharing_option_button}"},j={facebook:r.Z,pinterest:l.Z,twitter:s.Z,copy:d.Z,embed:c.Z,whatsapp:u.Z,reddit:p.Z,vk:m.Z,telegram:h.Z,line:g.Z,linkedin:v.Z,email:b.Z,message:y.Z,sms:function({width:e="1em",height:t="1em",style:i={}}){return x++,(0,_.jsxs)("svg",Object.assign({width:e,height:t,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:i},{children:[(0,_.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.0002 47.001C36.7028 47.001 47.0002 36.7035 47.0002 24.001C47.0002 11.2984 36.7028 1.00098 24.0002 1.00098C11.2977 1.00098 1.00024 11.2984 1.00024 24.001C1.00024 36.7035 11.2977 47.001 24.0002 47.001Z",fill:`url(#sms_icon_paint0_linear_${x})`},void 0),(0,_.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M36.6501 23.569C36.6501 29.3645 30.9865 34.0628 24.0001 34.0628C23.1537 34.0628 22.3267 33.9938 21.5269 33.8623C20.826 33.7948 20.4086 33.8602 19.689 34.0827C19.4224 34.1652 19.1109 34.3318 18.7539 34.5226C17.9542 34.9503 16.9262 35.5 15.6626 35.5C15.6388 35.5 15.7188 35.4207 15.8558 35.285C16.3095 34.8358 17.3876 33.7682 17.3876 32.9125V32.5167C13.7656 30.6708 11.3501 27.3539 11.3501 23.569C11.3501 17.7735 17.0137 13.0753 24.0001 13.0753C30.9865 13.0753 36.6501 17.7735 36.6501 23.569Z",fill:"white"},void 0),(0,_.jsx)("defs",{children:(0,_.jsxs)("linearGradient",Object.assign({id:`sms_icon_paint0_linear_${x}`,x1:"73.7964",y1:"64.0399",x2:"58.9088",y2:"-4.65515",gradientUnits:"userSpaceOnUse"},{children:[(0,_.jsx)("stop",{stopColor:"#43E6A2"},void 0),(0,_.jsx)("stop",{offset:"1",stopColor:"#18D037"},void 0)]}),void 0)},void 0)]}),void 0)}};function S({platform:e,url:t,targetDOM:i}){switch(e){case"facebook":return(0,a.stringifyUrl)({url:"https://www.facebook.com/sharer/sharer.php",query:{app_id:0x67903d22b9a8,u:t,display:"popup",sdk:"joey"}});case"twitter":return(0,a.stringifyUrl)({url:"https://twitter.com/intent/tweet",query:{refer_source:t,text:t}});case"pinterest":return(0,a.stringifyUrl)({url:"https://pinterest.com/pin/create/button/",query:{url:t,media:"https://lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/images/share_img.png",desc:t}});case"whatsapp":return(0,a.stringifyUrl)({url:"https://wa.me/",query:{text:t}});case"reddit":return(0,a.stringifyUrl)({url:"https://www.reddit.com/submit",query:{url:t}});case"vk":return(0,a.stringifyUrl)({url:"https://vk.com/share.php",query:{url:t}});case"copy":return function(){var e;const o=document.createElement("input");let n=!1;o.style.fontSize="16px",i?i.appendChild(o):(null!==(e=document[null===f.H||void 0===f.H?void 0:f.H.fullscreenElement])&&void 0!==e?e:document.body).appendChild(o),o.value=t||"",o.select(),o.setSelectionRange(0,t.length),document.execCommand&&document.execCommand("copy"),o.remove()};case"telegram":return(0,a.stringifyUrl)({url:"https://t.me/share/url",query:{url:t,text:t}});case"line":return(0,a.stringifyUrl)({url:"https://lineit.line.me/share/ui",query:{url:t,text:t}});case"linkedin":return(0,a.stringifyUrl)({url:"https://www.linkedin.com/sharing/share-offsite",query:{url:t}});case"email":return(0,a.stringifyUrl)({url:"mailto:",query:{subject:t,body:t}});case"embed":case"message":return n();default:return"#"}}const P={pc:{US:["copy","sms","facebook","reddit","pinterest","twitter","whatsapp","embed"],RU:["copy","whatsapp","vk","facebook","twitter","embed"],UA:["copy","whatsapp","vk","facebook","twitter","embed"],JP:["copy","twitter","facebook","whatsapp","embed"],default:["copy","whatsapp","facebook","twitter","embed"]},mobile:{US:["copy","facebook","reddit","pinterest","twitter","whatsapp","embed"],RU:["copy","whatsapp","vk","sms","facebook","twitter","embed"],UA:["copy","whatsapp","vk","sms","facebook","twitter","embed"],JP:["copy","twitter","facebook","sms","whatsapp","embed"],default:["copy","whatsapp","sms","facebook","twitter","embed"]}};function T({region:e,isMobile:t=!1}){const i=t?"mobile":"pc";return P[i][e]||P[i].default}var I;!function(e){e[e.Video=0]="Video",e[e.Creator=1]="Creator",e[e.Music=2]="Music",e[e.Tag=3]="Tag"}(I||(I={}))},47251:(e,t,i)=>{i.d(t,{gR:()=>d,gL:()=>c,j4:()=>u,V7:()=>p,UI:()=>m});var o=i(9236),n=i(45313),a=i(66599),r=i(38310);const l="https://www.tiktok.com";function s(e){const t={"<":"&lt",">":"&gt;",'"':"&#34;","'":"&#39;","&":"&#38;","/":"&#47;"};let i=`(${Object.keys(t).toString()})`;i=i.replace(/,/g,")|(");const o=new RegExp(i,"g");return e.replace(o,(e=>t[e]))}function d(e){var t,i,d;const c=(0,o.mp)(r.A,{selector:t=>t[e],dependencies:[e]}),u=(0,o.mp)(a.z,{selector:e=>{var t;return e.users[null!==(t=null==c?void 0:c.author)&&void 0!==t?t:""]},dependencies:[null==c?void 0:c.author]}),{music:p,textExtra:m,desc:h}=null!=c?c:{},{uniqueId:g="",secUid:v}=null!=u?u:{},b=null!==(t=null==p?void 0:p.title)&&void 0!==t?t:"",y=null!==(i=null==p?void 0:p.id)&&void 0!==i?i:"",f=null!==(d=null==p?void 0:p.authorName)&&void 0!==d?d:"",_=(0,n.yl)({uniqueId:g,secUid:v}),x=(0,n.MB)({musicName:b,musicId:y}),w=(0,n.fH)({uniqueId:g,secUid:v,videoId:e}),k=b.replace(`- ${f}`,"")+(f?` - ${f}`:""),C=`${l}${_.split("?")[0]}`,j=`${l}${x.split("?")[0]}`,S=`${l}${w.split("?")[0]}`,P=`${l}/embed.js`,T=`@${g}`,I=` ${s(k)}`;return`\n    <blockquote class="tiktok-embed"\n      cite="${S}"\n      data-video-id="${e}" style="max-width: 605px;min-width: 325px;" >\n      <section>\n          <a target="_blank" title="${T}" href="${C}?refer=embed">${T}</a>\n          ${function(e,t=[]){return t.length?[...t].sort(((e,t)=>e.start-t.start)).reduce(((t,i,o,a)=>{const{start:r,end:d,hashtagName:c,type:u}=i,p=0===o?0:a[o-1].end,m=r,h=e.substring(p,m);h&&(t+=s(h));const g=e.substring(r,d);return t+(1===u&&c?`<a title="${c}" target="_blank" href="${l}${(0,n.JD)({tagName:c})}?refer=embed">${s(g)}</a>`:s(g))}),""):`<p>${s(e)}</p>`}(null!=h?h:"",m)}\n          <a target="_blank" title="${I}" href="${j}?refer=embed">${I}</a>\n      </section>\n    </blockquote>\n    <script async src="${P}"><\/script>\n  `.split(/(?:\r\n|\n|\r)/).map((e=>e.replace(/^\s+/gm,""))).join(" ").trim()}function c(e){if(e)return`\n    <blockquote class="tiktok-embed"\n      cite="${l}/@${e}"\n      data-unique-id="${e}"\n      data-embed-type="creator" style="max-width: 780px; min-width: 288px;" >\n      <section>\n        <a target="_blank" href="${l}/@${e}?refer=creator_embed">@${e}</a>\n      </section>\n    </blockquote>\n    <script async src="${l}/embed.js"><\/script>\n  `.split(/(?:\r\n|\n|\r)/).map((e=>e.replace(/^\s+/gm,""))).join(" ").trim()}function u(e){if(e)return`\n    <blockquote class="tiktok-embed"\n      cite="${l}/tag/${e}"\n      data-tag-id="${e}"\n      data-embed-type="tag" style="max-width: 780px; min-width: 288px;" >\n      <section>\n        <a target="_blank" href="${l}/tag/${e}?refer=tag_embed">#${e}</a>\n      </section>\n    </blockquote>\n    <script async src="${l}/embed.js"><\/script>\n  `.split(/(?:\r\n|\n|\r)/).map((e=>e.replace(/^\s+/gm,""))).join(" ").trim()}function p(e,t,i){if(!e||!t)return;const o=(0,n.MB)({musicName:e,musicId:t}),a=o.split("/")[2],r=`${l}${o.split("?")[0]}`,s=` ${e} - ${null!=i?i:""}`;return`\n    <blockquote class="tiktok-embed"\n      cite="${l}${o}"\n      data-music-id="${a}"\n      data-embed-from="embed"\n      data-embed-type="music" style="max-width: 780px; min-width: 288px;" >\n      <section>\n        <a target="_blank" title="${s}" href="${r}?refer=music_embed">${s}</a>\n      </section>\n    </blockquote>\n    <script async src="${l}/embed.js"><\/script>\n  `.split(/(?:\r\n|\n|\r)/).map((e=>e.replace(/^\s+/gm,""))).join(" ").trim()}function m(e){return`?lang=${e}&embedFrom=webapp_preview`}},33794:(e,t,i)=>{i.d(t,{JW:()=>u,c1:()=>p});var o,n=i(9236),a=i(91051),r=i(21041),l=i(22597),s=i(17133),d=i(87342),c=i(33279);function u(){var e;const{region:t=""}=null!==(e=(0,s.Lh)((()=>["region"]),[]))&&void 0!==e?e:{},i=(0,n.qj)(c.N);return(0,a.useCallback)((()=>{i.initShareSettings({isMobile:!1,region:t})}),[t,i])}function p(){const{isBrowserModeShowing:e}=(0,a.useContext)(d._),{pathname:t}=(0,r.TH)();return(0,a.useMemo)((()=>{const i=((0,l.bf)(t)||(0,l.Dj)(t)||(0,l.ws)(t)||(0,l.Qu)(t)||(0,l.u7)(t)||(0,l.wy)(t))&&!e,o=(0,l.oC)(t)||(0,l.Io)(t)||(0,l.FZ)(t)||(0,l.cQ)(t);let n="none";return e?n="expand":(i||o)&&(n="short"),{additionShareOptions:!0,expanded:n}}),[t,e])}!function(e){e.None="none",e.Simple="short",e.Expanded="expand"}(o||(o={}))},33279:(e,t,i)=>{i.d(t,{N:()=>_});var o=i(64047),n=i(73566),a=i(48185),r=i(19630),l=i(82346),s=i(60595),d=i(49584),c=i(56979),u=i(10026),p=i(20948),m=i(68854),h=i(18645),g=i(3148),v=i(91756),b=i(57244),y=i(53095);let f=class{get Kakao$(){return window.Kakao?(0,l.of)(null):new s.y((e=>{i.e(2201).then(i.t.bind(i,42201,23)).then((()=>{window.Kakao.init("4954e33ea2a4395e59ecbc20761bd889"),e.next(),e.complete()})).catch((t=>{console.error(t),e.next(),e.complete()}))}))}share(e){return this.Kakao$.pipe((0,y.z)((()=>new s.y((t=>{window.Kakao.Share.sendScrap({requestUrl:e,callback:()=>{t.next(),t.complete()}})})))),(0,m.K)((()=>(0,l.of)(null))))}};f=(0,o.__decorate)([(0,b.G)()],f);let _=class extends n.D{constructor(e,t){super(),this.fetch=e,this.kakaoSdk=t,this.defaultState={platforms:null,platformsForAdditionOnly:null,isFlip:!1,loading:!1}}setPlatforms(e,t){e.platforms=t}setLoading(e,t){e.loading=t}setIsFlip(e,t){e.isFlip===t||t&&!function(){var e;const t=g.l_.getItem("flip_timestamp"),i=(null!==(e=g.l_.getItem("flip_count"))&&void 0!==e?e:0)+1,o=(new Date).setHours(0,0,0,0);return!(t&&t===o&&i>7||(g.l_.setItem("flip_timestamp",o),g.l_.setItem("flip_count",i),0))}()||(e.isFlip=t)}handleKakaoShare(e){return e.pipe((0,d.z)((({requestUrl:e})=>this.kakaoSdk.share(e).pipe((0,c.U)((()=>this.getActions().setLoading(!1))),(0,u.O)(this.getActions().setLoading(!0))))))}initShareSettings(e){return e.pipe((0,p.M)(this.state$),(0,d.z)((([e,{platforms:t}])=>t?(0,l.of)(this.getActions().setPlatforms(t)):this.fetch.get("/api/share/settings/",{query:{device_platform:e.isMobile?"webapp_mobile":"webapp_pc",mode:1}}).pipe((0,c.U)((({status_code:t,share_platforms:i})=>{if(0===t&&(null==i?void 0:i.length)){const t=i.map((({platform_id:e})=>e)).filter((t=>{return i=t,e.isMobile?i in v.fp:i in v.Lb;var i}));return this.getActions().setPlatforms(t)}return this.getActions().setPlatforms((0,v.Od)(e))})),(0,u.O)(this.getActions().setPlatforms([])),(0,m.K)((()=>(0,l.of)(this.getActions().setPlatforms((0,v.Od)(e)))))))))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"setPlatforms",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"setLoading",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"setIsFlip",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[s.y]),(0,o.__metadata)("design:returntype",s.y)],_.prototype,"handleKakaoShare",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[s.y]),(0,o.__metadata)("design:returntype",s.y)],_.prototype,"initShareSettings",null),_=(0,o.__decorate)([(0,r.Y)("TTShare"),(0,o.__metadata)("design:paramtypes",[h.r,f])],_)},55045:(e,t,i)=>{i.d(t,{mB:()=>se});var o=i(64047),n=i(11040),a=i(74820),r=i(9236),l=i(16926),s=i(91051),d=i(52187),c=i(66833),u=i(55198),p=i(64176),m=i(32273),h=i(32370),g=i(85640),v=i(17133),b=i(87342),y=i(9343),f=i(38310),_=i(79067);const x={id:"pinterest-3f0ea838",use:"pinterest-3f0ea838-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="pinterest-3f0ea838"><g clip-path="url(#pinterest-3f0ea838_a)"><circle cx="12" cy="12" r="12" fill="white" /><path fill="#E60019" d="M12.01 0C5.377 0 0 5.368 0 11.99c0 5.082 3.163 9.425 7.631 11.171-.109-.947-.198-2.408.04-3.444.217-.937 1.403-5.96 1.403-5.96s-.356-.72-.356-1.777c0-1.668.969-2.91 2.175-2.91 1.028 0 1.522.769 1.522 1.687 0 1.026-.652 2.565-.998 3.996-.287 1.194.603 2.171 1.779 2.171 2.135 0 3.776-2.25 3.776-5.486 0-2.872-2.066-4.876-5.022-4.876-3.42 0-5.426 2.556-5.426 5.201 0 1.027.395 2.132.89 2.734a.357.357 0 0 1 .079.345c-.09.375-.297 1.194-.337 1.362-.049.217-.177.266-.405.158-1.502-.7-2.441-2.882-2.441-4.648 0-3.78 2.748-7.253 7.937-7.253 4.162 0 7.404 2.96 7.404 6.927 0 4.135-2.61 7.46-6.228 7.46-1.215 0-2.362-.63-2.748-1.38l-.75 2.851c-.268 1.046-1 2.349-1.493 3.148A12.08 12.08 0 0 0 11.99 24C18.623 24 24 18.632 24 12.01 24.02 5.368 18.642 0 12.01 0Z" /></g><defs><clipPath id="pinterest-3f0ea838_a"><path fill="white" d="M0 0h24v24H0z" /></clipPath></defs></symbol>'};function w(e){const t=(0,s.useContext)(_.e);return(0,s.useLayoutEffect)((()=>(t.add(x),()=>{t.remove("pinterest-3f0ea838")})),[]),(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,n.jsx)("use",{xlinkHref:"#pinterest-3f0ea838"},void 0)}),void 0)}const k={id:"share_embed-445e13c2",use:"share_embed-445e13c2-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="share_embed-445e13c2"><path fill="#383838" fill-opacity=".95" fill-rule="evenodd" d="M12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12s5.373 12 12 12Z" clip-rule="evenodd" /><path fill="white" fill-rule="evenodd" d="M12.313 7.966a.562.562 0 1 1 1.108.194l-1.37 7.835a.562.562 0 1 1-1.109-.194l1.371-7.835Zm3.927.808a.7.7 0 0 0-1.014 0 .76.76 0 0 0 0 1.05l2.228 2.307-2.228 2.305a.76.76 0 0 0 0 1.05.7.7 0 0 0 1.015 0l3.214-3.326a.042.042 0 0 0 0-.058l-.231-.24-.005-.004-.003-.004-2.976-3.08Zm-7.351 0c.29.29.29.76 0 1.05L6.583 12.13l2.307 2.307a.742.742 0 1 1-1.05 1.05L5.423 13.07l-.002-.002-.91-.91a.04.04 0 0 1 0-.057L7.84 8.775c.29-.29.76-.29 1.05 0Z" clip-rule="evenodd" /></symbol>'};function C(e){const t=(0,s.useContext)(_.e);return(0,s.useLayoutEffect)((()=>(t.add(k),()=>{t.remove("share_embed-445e13c2")})),[]),(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,n.jsx)("use",{xlinkHref:"#share_embed-445e13c2"},void 0)}),void 0)}var j=i(91756);const S=function({width:e="1em",height:t="1em",style:i={}}){return(0,n.jsxs)("svg",Object.assign({width:e,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:i},{children:[(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 24C18.6274 24 24 18.6274 24 12C24 5.37258 18.6274 0 12 0C5.37258 0 0 5.37258 0 12C0 18.6274 5.37258 24 12 24Z",fill:"gray"},void 0),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.313 7.96568C12.3665 7.65966 12.658 7.45498 12.964 7.50851C13.27 7.56203 13.4747 7.8535 13.4211 8.15951L12.0506 15.9952C11.997 16.3012 11.7056 16.5059 11.3996 16.4523C11.0936 16.3988 10.8889 16.1073 10.9424 15.8013L12.313 7.96568ZM16.2402 8.77448C15.96 8.48453 15.5058 8.48453 15.2256 8.77448C14.9454 9.06443 14.9454 9.53454 15.2256 9.82449L17.454 12.1307L15.2262 14.4364C14.946 14.7263 14.946 15.1964 15.2262 15.4864C15.5063 15.7763 15.9606 15.7763 16.2407 15.4864L19.4551 12.1598C19.4704 12.1439 19.4704 12.1182 19.4551 12.1023L19.2233 11.8623L19.2201 11.8586L19.2158 11.854L16.2402 8.77448ZM8.88972 15.4867C8.59977 15.7766 8.12966 15.7766 7.83971 15.4867L5.4207 13.0677L4.76017 12.4071L4.51191 12.1589C4.49603 12.143 4.49603 12.1173 4.51191 12.1014L7.83853 8.77477C8.12848 8.48482 8.59859 8.48482 8.88854 8.77477C9.17849 9.06472 9.17849 9.53482 8.88854 9.82478L6.58318 12.1301L8.88972 14.4367C9.17967 14.7266 9.17967 15.1967 8.88972 15.4867Z",fill:"white"},void 0)]}),void 0)};var P=i(28972),T=i(26641),I=i(47251),O=i(68191);const D=(0,O.Z)("div",{target:"echcjyx0"})({width:"322px",borderRadius:"9px",height:"389px;",margin:"0px"},"label:DivPreviewContainer;"),R=(0,O.Z)("iframe",{target:"echcjyx1"})({display:"block",visibility:"unset",width:"100%",height:"389px"},"label:IframePlaylistEmbedPreview;"),M="https://www.tiktok.com",L=function(e){var t;const{language:i}=null!==(t=(0,v.Lh)((()=>["language"]),[]))&&void 0!==t?t:{},{uniqueId:o,tagTitle:a,musicId:r,musicTitle:l,type:s}=e;if(!s||!o&&!a&&!r)return(0,n.jsx)("div",{},void 0);const d=null!=i?i:"en",c=(0,I.UI)(d);let u;switch(s){case 1:u=`${M}/embed/@${o}${c}`;break;case 3:u=`${M}/embed/tag/${a}${c}`;break;case 2:u=`${M}/embed/music/${l}-${r}${c}`}return(0,n.jsx)(D,Object.assign({style:{pointerEvents:"none"}},{children:(0,n.jsx)(R,{src:u,frameBorder:"0"},void 0)}),void 0)};var B=i(36488);const F=(0,O.Z)("div",{target:"e172cezw0"})((({theme:e,isVideoEmbedPreview:t})=>[(0,B.YJ)({direction:e.direction}),{width:t?"550px":"700px"}]),{borderRadius:"9px","@media(max-width: 1000px)":{width:"400px"}},"label:DivModalContainer;"),E=(0,O.Z)("div",{target:"e172cezw2"})((({theme:{colors:e}})=>({padding:"24px 24px 12px 24px",borderBottom:`0.5px solid ${e.LineSecondary}`})),"label:DivEmbedTitle;"),Z=(0,O.Z)("h3",{target:"e172cezw3"})((({theme:e})=>(0,B.GI)({theme:e,typography:"P1",fontWeight:"bold"})),{fontSize:"20px",lineHeight:"24px",textAlign:"start"},"label:H3EmbedTitle;"),A=(0,O.Z)("div",{target:"e172cezw4"})((({theme:{direction:e}})=>(0,B.YJ)({direction:e,end:"23px"})),{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:23,cursor:"pointer"},"label:DivXMarkWrapper;"),U=(0,O.Z)("div",{target:"e172cezw5"})({display:"flex",justifyContent:"space-between",padding:"24px","@media(max-width: 1000px)":{paddingTop:0}},"label:DivModalInnerContainer;"),z=(0,O.Z)("div",{target:"e172cezw6"})({width:310,paddingTop:10,"@media(max-width: 1000px)":{width:"400px"}},"label:DivTextArea;"),W=(0,O.Z)("div",{target:"e172cezw7"})((({theme:e})=>[(0,B.GI)({theme:e,fontWeight:"semiBold"}),{fontSize:16,lineHeight:"24px"}]),{display:"block",width:"100%",marginBottom:"20px",border:"none",resize:"none",outline:"none",wordBreak:"break-all",overflowWrap:"break-word"},"label:DivAreaDescription;"),V=(0,O.Z)("textarea",{target:"e172cezw8"})((({theme:e})=>[(0,B.GI)({theme:e,typography:"P2",color:"TextTertiary"}),{display:"block",padding:"12px 12px 12px 12px",width:"100%",height:148,marginBottom:20,border:"none",resize:"none",outline:"none",wordBreak:"break-all",overflowWrap:"break-word",background:"rgba(22, 24, 35, 0.06)",borderRadius:2}]),"label:TextareaEmbedCode;"),q=(0,O.Z)("button",{target:"e172cezw9"})(B.Ph,(({theme:e,primary:t})=>[(0,B.GI)({theme:e,fontWeight:t?"semiBold":"normal",color:"TextPrimary"}),{fontSize:16,border:`1px solid ${e.colors.LineSecondary}`,background:e.colors.BGTertiary},{":after":{content:'""',width:"100%",height:"1px",position:"absolute",left:0,top:0,background:e.colors.LineSecondary,transform:"scaleY(0.5)"}}]),{borderRadius:2,display:"block",width:"100%",textAlign:"center",cursor:"pointer",height:"36px",marginBottom:"20px"},"label:Button;"),N=(0,O.Z)("p",{target:"e172cezw10"})((({theme:e})=>[(0,B.GI)({theme:e,typography:"P2",color:"TextTertiary"}),{a:{textDecoration:"underline","&, &:hover, &:active, &:link":{color:e.colors.TextTertiary}}}]),{fontSize:"12px",lineHeight:"18px"},"label:PHint;"),H=(0,O.Z)("div",{target:"e1rggtg60"})({borderRadius:"4.5px",width:"163px",height:"379px",overflow:"hidden"},"label:DivPreviewContainer;"),$="scale(0.5)",G=e=>"rtl"===e?"top right":"top left",K=(0,O.Z)("iframe",{target:"e1rggtg61"})((({theme:e})=>[{display:"block",visibility:"unset",width:"326px",height:"758px",msTransform:$,msTRANSFORM_ORIGIN_ZERO:G(e.direction),MozTransform:$,MozTRANSFORM_ORIGIN_ZERO:G(e.direction),WebkitTransform:$,WebkitTRANSFORM_ORIGIN_ZERO:G(e.direction),transform:$,transformOrigin:G(e.direction),border:"none"}]),"label:IframeVideoEmbedPreview;"),Y=function(e){var t;const{videoId:i}=e,{language:o}=null!==(t=(0,v.Lh)((()=>["language"]),[]))&&void 0!==t?t:{};return(0,n.jsx)(H,Object.assign({style:{pointerEvents:"none"}},{children:(0,n.jsx)(K,{src:(()=>{const e=null!=o?o:"en",t=(0,I.UI)(e);return`https://www.tiktok.com/embed/v2/${i}${t}`})(),frameBorder:"0"},void 0)}),void 0)},Q=function(e){const{code:t,onCopy:i,uniqueId:o,videoId:a,type:l,musicId:d,tagTitle:c,musicTitle:u}=e,p=(0,m.Q)(),h=(0,r.mp)(T.G,{selector:e=>e.lang,dependencies:[]}),g=(0,s.useRef)(null),v=(0,s.useCallback)((()=>{var e;null===(e=g.current)||void 0===e||e.select(),document.execCommand&&document.execCommand("copy"),null==i||i()}),[i]),b=`"https://www.tiktok.com/legal/terms-of-service?lang=${h}" target="_blank"`,y='"https://www.tiktok.com/legal/privacy-policy" target="_blank"';let f;const _=1===l||3===l||2===l;let x,w;switch(l){case 1:x=p("embed_profile_popup_title"),w=p("embed_profile_popup_desc");break;case 3:x=p("embeds_popup_hashtag_header"),w=p("embeds_popup_hashtag_body");break;case 2:x=p("embeds_popup_sound_header"),w=p("embeds_popup_sound_body");break;default:x=p("Embed video"),w=p("embed_popup_embed_body")}try{f=_?p("embeds_popup_tns").replace("{Terms of Service}",`<a href=${b}>${p("embed_profile_popup_bottom_desc_tos")}</a>`).replace("{Privacy Policy}",`<a href=${y}>${p("embed_profile_card_desc_privacy_policy")}</a>`):p("By embedding this video, you confirm that you agree to our <a href={TermsHref}>Terms of Use</a> and acknowledge you have read and understood our <a href={PolicyHref}> Privacy Policy.</a>").replace("{TermsHref}",b).replace("{PolicyHref}",y)}catch(e){f=`By embedding this page, you confirm that you agree to our <a href="https://www.tiktok.com/legal/terms-of-service?lang=${h}" target="_blank">Terms of Service</a> and acknowledge that you have read and understood our <a href="https://www.tiktok.com/legal/privacy-policy" target="_blank"> Privacy Policy.</a>`}const[k,C]=(0,s.useState)(!0);return(0,s.useEffect)((()=>{var e;const t=window.matchMedia("(max-width: 1000px)");null===(e=null==t?void 0:t.addEventListener)||void 0===e||e.call(t,"change",(e=>C(e.matches))),C(null==t?void 0:t.matches)}),[]),(0,n.jsxs)(F,Object.assign({isVideoEmbedPreview:!k&&!_},{children:[(0,n.jsxs)(E,{children:[(0,n.jsx)(Z,{children:x},void 0),(0,n.jsx)(A,Object.assign({onClick:e.onClose},{children:(0,n.jsx)(P.Z,{width:20,height:20},void 0)}),void 0)]},void 0),(0,n.jsxs)(U,{children:[!k&&(0,n.jsx)(n.Fragment,{children:_?(0,n.jsx)(L,{type:l,uniqueId:o,tagTitle:c,musicId:d,musicTitle:u},void 0):(0,n.jsx)(Y,{videoId:a},void 0)},void 0),(0,n.jsxs)(z,{children:[(0,n.jsx)(W,{children:w},void 0),(0,n.jsx)(V,{defaultValue:t,readOnly:!0,rows:7,ref:g},void 0),(0,n.jsx)(q,Object.assign({primary:!0,onClick:v},{children:p("embed_profile_popup_btn")}),void 0),(0,n.jsx)(N,{dangerouslySetInnerHTML:{__html:f}},void 0)]},void 0)]},void 0)]}),void 0)};var J,X=i(33794),ee=i(33279);!function(e){e[e.Icon=0]="Icon",e[e.Entry=1]="Entry",e[e.Corner=2]="Corner"}(J||(J={}));const te={0:({theme:{direction:e,colors:t}})=>[{display:"block",fontSize:0,":focus-visible":{outline:`2px solid ${t.Negative}`}},(0,B.YJ)({direction:e,marginEnd:"8px"})],2:()=>[{display:"block",fontSize:0,margin:"4px auto"}],1:({theme:{colors:e}})=>({display:"flex",alignItems:"center",padding:"11px 16px",margin:"0px 3px 0px 4px",position:"relative",":hover":{background:e.BGView,textDecoration:"none"}})},ie=(0,O.Z)("a",{target:"e15mchsh0"})((({mode:e,theme:t})=>te[e]({theme:t})),"label:AShareLink;"),oe=(0,O.Z)("a",{target:"e15mchsh1"})((({theme:{colors:e}})=>({display:"flex",alignItems:"center",justifyContent:"center",padding:"0px 16px",position:"relative",margin:"0px 4px 0px 4px",":hover":{background:e.BGView,textDecoration:"none"}})),"label:AShareArrow;"),ne=(0,O.Z)("span",{target:"e15mchsh2"})((({theme:{direction:e}})=>(0,B.YJ)({direction:e,marginStart:"12px"})),"label:SpanShareText;"),ae=(0,O.Z)("div",{target:"e15mchsh3"})((({theme:{colors:e}})=>({display:"flex",alignItems:"center",padding:"11px 16px",position:"relative",background:"rgba(22, 24, 35, 0.1)",textDecoration:"none",color:e.LineInput})),"label:DivDisabledArea;");var re;!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.HEADER=1]="HEADER",e[e.BOTTOM=2]="BOTTOM",e[e.BrowserModePopup=3]="BrowserModePopup"}(re||(re={}));const le={0:24,2:24,1:26},se=(0,s.memo)((function(e){var t,{videoId:i="",uniqueId:_="",musicId:x="",tagTitle:k="",musicTitle:P="",onClickShare:T,mode:I,embedCode:O,embedType:D,isEmbedDisabled:R=!1,isEmbedBanned:M=!1,onEmbedModalVisibleChange:L,enabled:B=!0,url:F=""}=e,E=e.teaParams,Z=void 0===E?{}:E,{group_id:A,author_id:U}=Z,z=(0,o.__rest)(Z,["group_id","author_id"]),{from:W=0,onOtherModalOpen:V,onSendMessagePanelOpen:q,onPlatformCountChange:N}=e;const H=(0,m.Q)(),[$,G]=(0,s.useState)(!1),{isBrowserModeShowing:K}=(0,s.useContext)(b._),{expanded:Y}=(0,X.c1)(),J=(0,l.fz)(c.p),te=(0,s.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),G(!0),J.handleSharePanelClick(Object.assign({group_id:A,author_id:U},z))}),[A,J,U,z]),{user:re}=null!==(t=(0,v.Lh)((()=>["abTestVersion","user"]),[]))&&void 0!==t?t:{},{vl1:se,forFriend:de,subVideoMeta:ce}=(0,r.mp)(f.A,{selector:e=>{var t;return null!==(t=e[i])&&void 0!==t?t:{}},dependencies:[i]}),ue=(!re||(null==re?void 0:re.hasIMPermission))&&!(se&&!de)&&!(1===W||2===W),pe=Boolean(re),me=(0,r.qj)(y.r),he=(0,s.useCallback)((e=>{const t=e.indexOf(j.Lb.copy);e.length>5&&"short"===Y&&t>4&&(e.splice(t,1),e.splice(4,0,j.Lb.copy))}),[Y]),{platforms:ge}=(0,r.mp)(ee.N,{selector:e=>{var t;let{platforms:i}=e;ue||(i=null!==(t=null==i?void 0:i.filter((e=>e!==j.Lb.message)))&&void 0!==t?t:[]);const o=(null!=i?i:[]).filter((e=>e!==j.Lb.sms&&e!==j.Lb.embed));O&&!M&&!ce&&o.unshift("embed");const n=o.filter((e=>e!==j.Lb.copy));switch(I){case 0:return{platforms:n};case 1:return i=[...o].reverse(),he(o),i=o,K&&(i=n),{platforms:i};default:return{platforms:o}}},dependencies:[I,O,K,he,D,ue]}),ve=(0,s.useMemo)((()=>ge.length>5&&!$&&1===I&&"expand"!==Y),[ge,$,I,Y]),[be,ye]=(0,s.useState)(!1);(0,s.useEffect)((()=>{null==L||L(be)}),[be,L]);const fe=(0,s.useCallback)((e=>e.replace(/(.*?){(.*?)}(.*?)/g,((e,t,i,o)=>t+H(i)+o))),[H]),_e=le[I],xe=(0,a.u)(),we=(0,s.useCallback)(((e,t)=>i=>{if(t&&(i.preventDefault(),i.stopPropagation(),t()),B||(i.preventDefault(),u.h.destroy(),u.h.open({content:H("web_sharing_disable_toast"),duration:3,widthType:"half",getContainer:h.Z,getContainerPosition:"fixed"})),null==T||T(e),J.handleShare(Object.assign({platform:e,group_id:A,author_id:U,share_option_type:Y,share_click_from:$||3===W?"long":"short"},z)),"copy"===e&&B)u.h.open({content:H("Copied"),duration:1.2,widthType:"half",getContainer:h.Z,getContainerPosition:"fixed"});else if("embed"===e)ye(!0),null==V||V(!0);else if("message"===e){if(!pe)return void me.openModal({query:{enter_method:"share_button"}});null==q||q()}}),[B,T,J,A,U,Y,$,z,H,pe,q,me,W]),ke=(0,s.useCallback)((()=>{ye(!1),null==V||V(!1)}),[V]),Ce=(0,s.useCallback)((()=>{J.handleClickShare(Object.assign({platform:"embed",group_id:A,author_id:U,share_option_type:Y,share_click_from:$?"long":"short"},z)),u.h.open({content:H("embed_success"),duration:1.2,widthType:"half",getContainer:h.Z,getContainerPosition:"fixed"}),ye(!1),null==V||V(!1)}),[U,Y,A,J,z,$,H,V]),je=(0,s.useMemo)((()=>0===I?[0,5]:K?[5,void 0]:$||2===I||"expand"===Y?[0,void 0]:[0,5]),[K,$,I,Y]);(0,s.useEffect)((()=>{var e,t;const i=null!==(t=null===(e=null==ge?void 0:ge.slice(...je))||void 0===e?void 0:e.length)&&void 0!==t?t:0;null==N||N(i)}),[N,ge,je]);const Se=(0,h.Z)(),Pe=(0,s.useCallback)((e=>{if(13===e.keyCode||32===e.keyCode){e.preventDefault(),e.stopPropagation(),G(!0);const t=null==ge?void 0:ge.slice(...je).pop();document.querySelector(`#icon-element-${t}`).focus(),J.handleSharePanelClick(Object.assign({group_id:A,author_id:U},z))}}),[A,J,U,z,je,ge]),Te=(0,s.useCallback)(((e,t)=>i=>{13===i.keyCode&&(i.preventDefault(),i.stopPropagation(),we(e,t)(i),document.querySelector(`#icon-element-${e}`).click())}),[we]);return(0,n.jsxs)(n.Fragment,{children:[null==ge?void 0:ge.slice(...je).map((e=>{const t="ltr"===xe.direction?"left":"right",i=2===I?t:"top",o=j.vq[e],a=xe.isDark&&"embed"===e,r=xe.isDark&&"pinterest"===e,l=(0,j.IG)({platform:e,url:F}),s="string"==typeof l?{href:l,target:"_blank",rel:"noopener noreferrer",onClick:we(e),onKeyDown:Te(e,void 0,l)}:{href:"#",onClick:we(e,l),onKeyDown:Te(e,l)};let d=(0,n.jsx)(o,{width:_e,height:_e},void 0);a?d=(0,n.jsx)(C,{width:_e,height:_e},void 0):r&&(d=(0,n.jsx)(w,{width:_e,height:_e},void 0));const c=(0,n.jsxs)(ie,Object.assign({id:`icon-element-${e}`,mode:I},s,{"data-e2e":`video-share-${e}`,"aria-label":fe(j.ny[e])},{children:[d,1===I&&(0,n.jsx)(ne,{children:fe(j.ny[e])},void 0)]}),e);return R&&"embed"===e?(0,n.jsx)(p.u,Object.assign({fullscreenAdjust:!0,overlay:H("embed_profile_tooltip"),placement:"bottom"},{children:(0,n.jsxs)(ae,{children:[(0,n.jsx)(S,{width:_e,height:_e},void 0),(0,n.jsx)(ne,{children:fe(j.ny[e])},void 0)]},void 0)}),e):0===I||2===I?(0,n.jsx)(p.u,Object.assign({fullscreenAdjust:!0,overlay:fe(j.ny[e]),placement:i},{children:c}),e):c})),ve&&(0,n.jsx)(oe,Object.assign({"data-e2e":"share-arrow","aria-label":H("accessibilityLabels_forYou_share_moreOptions_btn"),href:"#",onClick:te,onKeyDown:Pe},{children:(0,n.jsx)(d.Z,{width:24,height:24},void 0)}),void 0),(0,n.jsx)(g.u_,Object.assign({parentRef:Se,visible:be,onClose:ke,maskCloseable:!1},{children:(0,n.jsx)(Q,{onCopy:Ce,onClose:ke,code:O,type:D,videoId:i,uniqueId:_,musicId:x,tagTitle:k,musicTitle:P},void 0)}),void 0)]},void 0)}))},8996:(e,t,i)=>{i.d(t,{g:()=>y});var o,n=i(11040),a=i(9236),r=i(91051),l=i(10426),s=i(13578),d=i(45586),c=i(32273),u=i(17133);!function(e){e.GeneralSensitive="general_sensitive",e.PhotoSensitive="photo_sensitive",e.PhotoSensitiveDenied="photo_sensitive_denied"}(o||(o={}));const p={general_sensitive:"masklayer_general_title",photo_sensitive:"photosensitive_masklayer_title",photo_sensitive_denied:"photosensitive_masklayer_removed"},m={general_sensitive:["masklayer_general_body"],photo_sensitive:["photosensitive_masklayer_body1","photosensitive_masklayer_body2"],photo_sensitive_denied:["photosensitive_masklayer_removed_body1","photosensitive_masklayer_removed_body3"]},h={general_sensitive:"masklayer_general_skip",photo_sensitive:"photosensitive_masklayer_watch",photo_sensitive_denied:""},g={general_sensitive:"masklayer_general_watch",photo_sensitive:"photosensitive_masklayer_skipall",photo_sensitive_denied:""};var v;!function(e){e[e.Reported=1]="Reported",e[e.Dislike=2]="Dislike",e[e.General=3]="General",e[e.Photosensitive=4]="Photosensitive"}(v||(v={}));var b=i(38554);const y=({playMode:e,item:t,smallSizeIcon:i=!1})=>{var o;const v=(0,c.Q)(),{user:y}=null!==(o=(0,u.Lh)((()=>["user"]),[]))&&void 0!==o?o:{},{photoSensitiveVideosSetting:f,uid:_}=null!=y?y:{},{photoSensitiveVideosSetting:x}=(0,a.mp)(b.P);return(0,r.useMemo)((()=>{const{maskType:o,authorId:a}=t,r=3===o,c=4===o;if(!c&&!r)return{showVideoMask:!1};if(c&&(2===f||2===x||a===_&&0!==f))return{showVideoMask:!1};let u;u=r?"general_sensitive":1===x?"photo_sensitive_denied":"photo_sensitive";const b=v(p[u]),y=m[u].map((e=>v(e))).join(""),w=((e,t,i)=>{let o=null,a=48;switch(e){case"general_sensitive":a=0===t?36:53,a=i?24:a,o=(0,n.jsx)(l.Z,{width:a,height:a,fill:"rgba(255, 255, 255, .75)"},void 0);break;case"photo_sensitive":a=0===t?32:48,a=i?24:a,o=(0,n.jsx)(s.Z,{width:a,height:a,fill:"#fff"},void 0);break;case"photo_sensitive_denied":a=0===t?32:48,a=i?24:a,o=(0,n.jsx)(d.Z,{width:a,height:a,fill:"#0BE09B"},void 0)}return o})(u,e,i),k=v(((e,t)=>2===t||3===t||4===t||0===t&&"photo_sensitive"===e?h[e]:"")(u,e)),C=v(((e,t)=>2===t||3===t||4===t||0===t&&"general_sensitive"===e?g[e]:"")(u,e));return{showVideoMask:!0,maskType:u,videoMaskTitle:b,videoMaskDesc:y,icon:w,videoMaskFirstButtonText:k,videoMaskSecondButtonText:C}}),[t,f,x,_,v,e,i])}},17643:(e,t,i)=>{i.d(t,{ex:()=>r,by:()=>l,Tp:()=>s,gI:()=>d,DK:()=>c,X4:()=>u,lO:()=>m,Wu:()=>g,yW:()=>v,uc:()=>b,N:()=>y,Vz:()=>f,u:()=>_,vZ:()=>x});var o=i(68191),n=i(36488),a=i(41928);const r=(0,o.Z)("div",{target:"e4uoj5v0"})((({theme:e,playMode:t})=>[4===t?{borderRadius:"4px",overflow:"hidden"}:{},{position:"absolute",zIndex:3===t||4===t?0:1,width:"100%",height:"100%",left:"0",top:"0",backdropFilter:"blur(50px)",backgroundColor:e.colors.SDSecondary},2===t?{left:"-80px",right:"-80px",width:"unset"}:null]),"label:DivVideoMask;"),l=(0,o.Z)("div",{target:"e4uoj5v1"})((({playMode:e})=>[4!==e?{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:"515px"}:{},{width:2===e?"calc(100% - 160px)":"100%",padding:0===e?"32px":"48px",paddingTop:4===e?"100px":""},3===e?{width:"463px"}:{}]),"label:DivVideoMaskContainer;"),s=(0,o.Z)("div",{target:"e4uoj5v2"})({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},"label:DivVideoMaskInfo;"),d=(0,o.Z)("div",{target:"e4uoj5v3"})((({theme:e,playMode:t})=>({display:"flex",justifyContent:"center",alignItems:"center",width:0===t?"72px":"106px",height:0===t?"72px":"106px",borderRadius:"50%",backgroundColor:e.colors.ConstBGContainer2,color:e.colors.Positive})),"label:DivVideoMaskIcon;"),c=(0,o.Z)("p",{target:"e4uoj5v4"})((({theme:e,theme:{colors:t},playMode:i})=>[(0,n.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold"}),{fontSize:0===i?"17px":"24px",lineHeight:0===i?"20px":"32px",textAlign:"center",color:t.ConstTextInverse2,marginTop:0===i?"20px":"24px"}]),"label:PVideoMaskTitle;"),u=(0,o.Z)("p",{target:"e4uoj5v5"})((({theme:e,playMode:t})=>[(0,n.GI)({theme:e,typography:0===t?"H6":"P1",fontFamily:"Proxima",fontWeight:"normal"}),{maxWidth:"400px",textAlign:"center",color:"rgba(255, 255, 255, .75)",marginTop:0===t?"12px":"16px"}]),"label:PVideoMaskDesc;"),p=(e,t)=>{switch(e){case 0:return t?"20px":"80px";case 4:return"56px";default:return"180px"}},m=(0,o.Z)("div",{target:"e4uoj5v6"})((({playMode:e,horizontal:t})=>[{marginTop:p(e,t)},4===e?{display:"flex",flexDirection:"column",alignItems:"center"}:{}]),"label:DivBtnWrapper;");function h(e){const{theme:t,second:i,playMode:o}=e;return[n.wj,4===o?{maxWidth:"400px"}:{},(0,n.GI)({theme:t,typography:"P1",fontFamily:"Proxima",fontWeight:"semiBold"}),{display:"block",minWidth:"unset",width:"100%",height:0===o?"36px":"56px",marginBottom:i?"0":"8px",background:i?t.colors.ConstBGContainer:t.colors.Primary},i?{"&:hover":{background:t.colors.ConstBGContainer2},"&:active":{background:t.colors.ConstBGContainer3}}:null,0===o?{fontSize:"14px",lineHeight:"17px"}:null]}const g=(0,o.Z)(a.W,{target:"e4uoj5v7"})((e=>h(e)),"label:StyledButtonFirst;"),v=(0,o.Z)(a.W,{target:"e4uoj5v8"})((e=>h(e)),"label:StyledButtonSecond;"),b=(0,o.Z)("div",{target:"e4uoj5v9"})({background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(25px)",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,right:0,bottom:0,userSelect:"none"},"label:DivMaskContainer;"),y=(0,o.Z)("div",{target:"e4uoj5v10"})((({horizontal:e})=>({width:e?"240px":"160px",display:"flex",flexDirection:"column",alignItems:"center"})),"label:DivMaskInfo;"),f=(0,o.Z)("div",{target:"e4uoj5v11"})({width:"48px",height:"48px",marginBottom:"8px",borderRadius:"48px",background:"rgba(255, 255, 255, 0.12)",display:"flex",alignItems:"center",justifyContent:"center"},"label:DivMaskIcon;"),_=(0,o.Z)("p",{target:"e4uoj5v12"})((({theme:e})=>({fontSize:"16px",lineHeight:"24px",fontWeight:"600",marginBottom:"2px",color:e.colors.ConstTextInverse2,textAlign:"center"})),"label:PMaskTitle;"),x=(0,o.Z)("p",{target:"e4uoj5v13"})((({theme:e})=>({fontSize:"14px",lineHeight:"22px",color:e.colors.ConstTextInverse3,textAlign:"center"})),"label:PMaskDesc;")},51985:(e,t,i)=>{i.d(t,{a:()=>l});var o=i(11040),n=i(91051),a=i(45949),r=i(17643);const l=(0,n.memo)((e=>{const{playMode:t,style:i,icon:l,title:s,desc:d,horizontal:c=!1,firstButtonText:u,secondButtonText:p,canClickPropagation:m=!1,children:h,onClickFirstButton:g,onClickSecondButton:v}=e,b=Boolean(u),y=Boolean(p),f=(0,n.useCallback)((e=>{!m&&(0,a.NS)(e)}),[m]),_=(0,n.useCallback)((e=>{e.preventDefault()}),[]);return(0,o.jsxs)(r.ex,Object.assign({playMode:t,onClick:f,style:i,onContextMenu:_},{children:[(0,o.jsxs)(r.by,Object.assign({playMode:t},{children:[(0,o.jsxs)(r.Tp,{children:[Boolean(l)&&(0,o.jsx)(r.gI,Object.assign({playMode:t},{children:l}),void 0),Boolean(s)&&(0,o.jsx)(r.DK,Object.assign({playMode:t},{children:s}),void 0),Boolean(d)&&(0,o.jsx)(r.X4,Object.assign({playMode:t},{children:d}),void 0)]},void 0),(0,o.jsxs)(r.lO,Object.assign({horizontal:c,playMode:t},{children:[b&&(0,o.jsx)(r.Wu,Object.assign({type:"button",buttonTheme:"primary",playMode:t,onClick:g},{children:u}),void 0),y&&(0,o.jsx)(r.yW,Object.assign({type:"button",buttonTheme:"primary",playMode:t,second:!0,onClick:v},{children:p}),void 0)]}),void 0)]}),void 0),h]}),void 0)}))},91139:(e,t,i)=>{i.d(t,{N:()=>u});var o,n=i(64047),a=i(11040),r=i(9236),l=i(91051),s=i(68852),d=i(21103);!function(e){e.NoInteract="failed because the user didn't interact with the document first.",e.SafariNoInteract="The request is not allowed by the user agent or the platform in the current context"}(o||(o={}));const c=e=>({buffered:null==e?void 0:e.buffered,currentSrc:null==e?void 0:e.currentSrc,currentTime:null==e?void 0:e.currentTime,duration:null==e?void 0:e.duration,readyState:null==e?void 0:e.readyState,error:null==e?void 0:e.error,volume:null==e?void 0:e.volume,muted:null==e?void 0:e.muted}),u=(0,l.memo)((0,l.forwardRef)((function(e,t){var{playProgress:i,horizontal:o,muteSetting:u,onUnmount:p,onEnded:m,onWaiting:h,disableDownload:g=!0,itemMute:v=!1}=e,b=(0,n.__rest)(e,["playProgress","horizontal","muteSetting","onUnmount","onEnded","onWaiting","disableDownload","itemMute"]);const y=(0,l.useRef)(null),f=(0,l.useRef)(!1),[{mute:_,volume:x},{setMute:w,setMuteSetting:k}]=(0,r.b7)(s.x,{selector:e=>({mute:e.muteSetting||e.mute,volume:e.volume}),dependencies:[]}),C=(0,r.mp)(s.x,{selector:e=>e.playing,dependencies:[]});(0,l.useImperativeHandle)(t,(()=>{const e=y.current;return{play:()=>(0,n.__awaiter)(this,void 0,void 0,(function*(){try{null==e||e.play.bind(e)}catch(e){}})),pause:()=>{try{null==e||e.pause.bind(e)}catch(e){}},seek:t=>{if(e){const{duration:i}=e;e.currentTime=i*t}},seekTime:t=>{e&&(e.currentTime=t)},onSeeked:t=>{null==e||e.addEventListener("seeked",t)},onSeeking:t=>{null==e||e.addEventListener("seeking",t)},onTimeUpdate:t=>{null==e||e.addEventListener("timeupdate",(()=>{var i,o;const n=null!==(i=e.currentTime)&&void 0!==i?i:0,a=null!==(o=e.duration)&&void 0!==o?o:0;t(n/a,n,a)}))},onCanPlay:t=>{null==e||e.addEventListener("canplay",t)},getPlayerAttributes:()=>c(e)}}));const j=(0,l.useCallback)(((e=0)=>(0,n.__awaiter)(this,void 0,void 0,(function*(){var t,i,o;if(!(e>=3))try{yield null===(t=y.current)||void 0===t?void 0:t.play()}catch(t){const n=null!==(i=null==t?void 0:t.message)&&void 0!==i?i:"";(null!==(o=n.match("failed because the user didn't interact with the document first."))&&void 0!==o?o:n.match("The request is not allowed by the user agent or the platform in the current context"))?(w(!0),setTimeout((()=>{j(e+1)}),0)):j(e+1)}}))),[w]);(0,l.useEffect)((()=>{y.current&&(y.current.volume=x)}),[x]),(0,l.useEffect)((()=>{k(u),j(),y.current&&Math.abs(y.current.currentTime-i)>.2&&(y.current.currentTime=i)}),[u,i,k,j]),(0,l.useEffect)((()=>{var e;C?f.current&&(f.current=!1,j()):(f.current=!0,null===(e=y.current)||void 0===e||e.pause())}),[C,j]),(0,l.useEffect)((()=>{const e=y.current;return()=>{null==p||p(c(e))}}),[]);const S=(0,l.useCallback)((e=>{e.preventDefault()}),[]);(0,l.useEffect)((()=>{const e=y.current;return g&&(null==e||e.addEventListener("contextmenu",S)),()=>{null==e||e.removeEventListener("contextmenu",S)}}),[y,S,g]);const P=(0,l.useCallback)((e=>{null==h||h(e)}),[h]),T=(0,l.useCallback)((e=>{null==m||m(e),j()}),[m,j]);return(0,a.jsx)(d.Ex,Object.assign({horizontal:o,ref:y},b,{muted:v||_,playsInline:!0,autoPlay:!0,onEnded:T,onWaiting:P}),void 0)})))},54649:(e,t,i)=>{i.d(t,{S:()=>ge});var o=i(11040),n=i(91051),a=i(29025),r=i(9236),l=i(16926),s=i(69405),d=i(45253),c=i(31222),u=i(40340),p=i(68852),m=i(40112),h=i(33642),g=i(8838),v=i(37384),b=i(78772),y=i(91139),f=i(21103);const _=(0,n.memo)((0,n.forwardRef)((function({poster:e,lazyLoading:t=!0,horizontal:i,playUrl:a,id:_,teaParams:x,index:w,mode:k,itemMute:C,desc:j,topSearchQueryAfterViewWord:S,onVideoPause:P,onVideoPlaying:T,onVideoPlay:I,onVideoEnded:O,onVideoError:D,e2eTag:R,onTimeUpdate:M,subtitleStruct:L,disableDownload:B=!0,posterStyle:F},E){const{currentVideo:Z,playProgress:A}=(0,r.mp)(u.f),{updateVVTime:U}=(0,r.qj)(u.f),z=(0,n.useRef)(null),W=(0,n.useRef)(null),V=(0,l.fz)(s.ec),q=(0,l.fz)(d.k),N=(0,l.fz)(c.KF),[H,$]=(0,n.useState)(!1),G=(0,n.useCallback)((()=>{var e,t;null===(t=null===(e=z.current)||void 0===e?void 0:e.play)||void 0===t||t.call(e)}),[]),K=(0,n.useCallback)((()=>{var e,t;null===(t=null===(e=z.current)||void 0===e?void 0:e.pause)||void 0===t||t.call(e)}),[]),Y=(0,n.useMemo)((()=>{if(!Z)return!1;const{id:e,index:t,mode:i}=Z;return e===_&&t===w&&i===k}),[_,w,k,Z]);(0,n.useImperativeHandle)(E,(()=>({play:()=>{G(),W.current=!0},pause:()=>{K(),W.current=!1,V.triggerPause({enter_method:"click_pause",playMode:k})},seek:e=>{var t;null===(t=z.current)||void 0===t||t.seek(e)},seekTime:e=>{var t;null===(t=z.current)||void 0===t||t.seekTime(e)},onSeeked:e=>{var t;null===(t=z.current)||void 0===t||t.onSeeked(e)},onSeeking:e=>{var t;null===(t=z.current)||void 0===t||t.onSeeking(e)},onTimeUpdate:e=>{var t;null===(t=z.current)||void 0===t||t.onTimeUpdate(e)},getFullscreen:()=>{},exitFullscreen:()=>{},replay:()=>{G(),W.current=!0},get currentTime(){var e,t;return null!==(t=null===(e=z.current)||void 0===e?void 0:e.getPlayerAttributes().currentTime)&&void 0!==t?t:0},get duration(){var e,t;return null!==(t=null===(e=z.current)||void 0===e?void 0:e.getPlayerAttributes().duration)&&void 0!==t?t:0},get currentCanPlay(){return Y&&H}})),[G,K,V,k,Y,H]),(0,n.useEffect)((()=>{Y||$(!1)}),[Y]);const Q=(0,m.Mz)();(0,n.useEffect)((()=>{const e=null===W.current||W.current;Q&&e?G():(K(),Y&&!Q&&V.triggerPause({enter_method:"switch_tab",playMode:k}))}),[Q,G,K,V,Y,k]);const J=(0,b.S1)(_),X=(0,n.useCallback)((()=>{var e;const t=(0,h.m7)(null===(e=z.current)||void 0===e?void 0:e.getPlayerAttributes()),{bitrate:i,author_id:o,format:n,encodedType:r,videoQuality:l,encodeUserTag:s,codecType:d,definition:c,secret:u,forFriend:p}=x;return Object.assign(Object.assign({id:_,authorId:o,playMode:k,bitrate:i,format:n,encodedType:r,videoQuality:l,encodeUserTag:s,codecType:d,definition:c,secret:u,forFriend:p,play_url:a},null!=t?t:{}),J)}),[_,k,x,a,J]),{mute:ee}=(0,r.mp)(p.x),te=(0,n.useMemo)((()=>{const{group_id:e="",author_id:t="",is_scheduled:i,search_id:o,search_keyword:n,search_result_id:a,question_id:r,collection_id:l,collection_name:s,isPaidPartnership:d,poi_id:c,is_sub_only_video:u}=x||{};return Object.assign({itemId:e,authorId:t,isScheduled:Boolean(i),autoplayStatus:1,searchId:o,searchKeyword:n,searchResultId:a,questionId:r,playMode:k,isMute:ee,collectionId:l,collectionName:s,isPaidPartnership:Boolean(d),poiId:c,isSubOnlyVideo:u},J)}),[k,ee,x,J]),ie=(0,n.useCallback)((()=>{var e;const{currentTime:t=0,duration:i=0}=(0,h.m7)(null===(e=z.current)||void 0===e?void 0:e.getPlayerAttributes());return Object.assign(Object.assign({},te),{currentTime:t,duration:i})}),[te]),{loading:oe,handleCanPlayWithLoading:ne,handlePauseWithLoading:ae,handlePlayingWithLoading:re,handleWaitingWithLoading:le}=(0,m.Fk)({isCurrentVideo:Y}),se=(0,n.useCallback)((()=>{q.handleLoadStart(X())}),[q,X]),de=(0,n.useCallback)((()=>{q.handleLoadedData(X())}),[q,X]),ce=(0,n.useCallback)((()=>{ne(),$(!0),N.getCurrentPageReport()||(N.reportVideoFirstScreen({endTime:Date.now(),videoSource:a}),N.reportVideoAddition({endTime:Date.now(),videoSource:a}))}),[ne,a,N]),ue=(0,n.useCallback)((e=>{q.handlePlay(),null==I||I(e)}),[q,I]),pe=(0,n.useCallback)((()=>{var e;const{currentTime:t=0,duration:i=0}=(0,h.m7)(null===(e=z.current)||void 0===e?void 0:e.getPlayerAttributes()),o=V.handleTimeUpdate(ie());q.handleTimeUpdate(X()),"video_play"===o&&U(),N.getFirstFrameReport()||N.reportVideoFirstFrame(t),null==M||M(t/i)}),[V,ie,q,X,N,M,U]),me=(0,m.ru)(),he=(0,n.useCallback)((e=>{null==D||D(e),me(e),V.handleError(te),q.handleError(X())}),[D,me,V,te,q,X]),ge=(0,n.useCallback)((e=>{null==P||P(e),ae(),q.handlePause(X()),V.handlePause(ie())}),[P,ae,q,X,V,ie]),ve=(0,n.useCallback)((e=>{null==T||T(e),re(),N.reportVideoInteract({endTime:Date.now(),videoSource:a})}),[T,re,N,a]),be=(0,n.useCallback)((()=>{le(),V.handleWaiting(ie()),q.handleWaiting(X())}),[le,V,ie,q,X]),ye=(0,n.useCallback)((e=>{null==O||O(e),V.handleEnded(te),q.handleEnded()}),[O,V,te,q]),fe=(0,n.useCallback)((e=>{V.handlePlayTime(te),q.reset(_,Object.assign(Object.assign({},X()),e))}),[_,V,te,q,X]);(0,n.useEffect)((()=>{Y||null==P||P({})}),[Y,P]);const _e=i||2===k||3===k||4===k||6===k||5===k,xe=(0,v.Y)()&&S?`${S}. ${j}`:j;return(0,o.jsxs)(f.wu,Object.assign({horizontal:i,mode:k},{children:[e?(0,o.jsx)(f.TF,{horizontal:_e,mode:k,src:e,alt:xe,loading:t?"lazy":"eager",style:F},void 0):null,Y&&(0,o.jsxs)(f.Kp,Object.assign({"data-e2e":R},{children:[(0,o.jsx)(y.N,{ref:z,c:!0,horizontal:_e,muteSetting:C||g.PA[k].forceMute,defaultMute:g.PA[k].defaultMute,playProgress:null!=A?A:0,src:a,onUnmount:fe,onLoadStart:se,onLoadedData:de,onTimeUpdate:pe,onError:he,onCanPlay:ce,onPause:ge,onPlay:ue,onPlaying:ve,onWaiting:be,onEnded:ye,disableDownload:B},void 0),oe&&(0,o.jsx)(f.Nm,{},void 0),4!==k&&6!==k||!L?null:(0,o.jsx)("track",{default:!0,kind:"subtitles",srclang:L.language,src:L.url},void 0)]}),void 0)]}),void 0)})));var x=i(64047),w=i(43226),k=i.n(w),C=i(51177),j=i(87024),S=i(59783),P=i(97185),T=i(66758),I=i(31914);const O={paramBf:.3,paramBp:.5,paramUpper:1.5,paramLower:.6,paramUpperBl:.7,paramVl1:.8,paramVl2:3,paramVlUpper:.9,paramVlLower:.7,bitrateUpper:4e6,bitrateLower:2e5,slidingWindowType:"by_weight",slidingWindowWeight:"size",slidingWindowWeightThreshold:2e7,slidingWindowCountThreshold:30,slidingWindowExtraction:"weighted_median",bitrateRange:[2e4,25e6],mode:"bandwidth",quality_filter:{},white_list:[],autoBitrateParams:{paramA:0,paramB:1.537664e-8,paramC:.470864,paramD:128e4,minBitrate:2e5},defaultBitrate:1e6},D=[{paramBf:.3,paramBp:.5,paramUpper:1.5,paramLower:.6,paramUpperBl:.7,paramVl1:.8,paramVl2:3,paramVlUpper:.9,paramVlLower:.7,bitrateUpper:4e6,bitrateLower:2e5,slidingWindowType:"by_weight",slidingWindowWeight:"size",slidingWindowWeightThreshold:2e7,slidingWindowCountThreshold:30,slidingWindowExtraction:"weighted_median",bitrateRange:[2e4,25e6],mode:"bandwidth",quality_filter:{},white_list:[],autoBitrateParams:{paramA:0,paramB:1.537664e-8,paramC:.470864,paramD:128e4,minBitrate:2e5},defaultBitrate:1e6},{paramBf:.3,paramBp:.5,paramUpper:1.5,paramLower:.6,paramUpperBl:.7,paramVl1:.8,paramVl2:3,paramVlUpper:.9,paramVlLower:.7,bitrateUpper:4e6,bitrateLower:2e5,slidingWindowType:"by_weight",slidingWindowWeight:"size",slidingWindowWeightThreshold:2e7,slidingWindowCountThreshold:30,slidingWindowExtraction:"weighted_median",bitrateRange:[2e4,25e6],mode:"buffer-info1",quality_filter:{},white_list:[],autoBitrateParams:{paramA:0,paramB:1.537664e-8,paramC:.470864,paramD:128e4,minBitrate:2e5},defaultBitrate:1e6}],R={mp4Preloader:null,BitrateSelector:i(27359).Z},M=e=>e?Array.isArray(e)?e.map((e=>({src:e}))):"string"==typeof e?e:[]:[],L="TT-vCache";let B=!0,F=!0,E=O;const{BitrateSelector:Z}=R,A=(e,t,i)=>!Array.isArray(e)||e.length<1?[]:e.map((e=>{var o,n;return{bitrate:e.Bitrate,definition:null!==(o=e.GearName)&&void 0!==o?o:i,duration:t,url:M(null===(n=e.PlayAddr)||void 0===n?void 0:n.UrlList)}})),U={width:"100%",height:"100%",controls:!1,closeVideoClick:!0,closeVideoDblclick:!0,closeVideoTouch:!0,closePlayerBlur:!0,closeControlsBlur:!0,closeFocusVideoFocus:!0,closePlayVideoFocus:!0,closeVideoStopPropagation:!0,ignores:["play","start"]};class z{constructor(e){this.element=this.initPlayer(e),this.uuid=z.generateUUID()}static generateUUID(){return this.UUIDBase++,this.UUIDPrefix+this.UUIDBase}style(){}initPlayer(e){const t=(e=>{var t,i;const{id:o,mode:n,preloadUrlsList:a,url:r,volume:l,playbackRate:s,onAutoplayFailed:d,videoDuration:c,bitrateInfo:u,adaptBitrateVid:p="v1",defaultDefinition:m,xgplayerInitHost:h,shouldUseVideoNormalization:g,defaultBitrate:v,videoOrder:b=[{property:"QualityType",detail:[10,28]},{property:"Bitrate",order:"desc"}],autoPlay:y=!0,bitrateSelectorConfigs:f=D}=e,_=`xgwrapper-${n}-${o}`;let x=[];try{const e=(e,t)=>e[b[0].property]!==t[b[0].property]?"Bitrate"===b[0].property?"desc"===b[0].order?t.Bitrate-e.Bitrate:e.Bitrate-t.Bitrate:b[0].detail.indexOf(e[b[0].property])>=0&&b[0].detail.indexOf(t[b[0].property])>=0?b[0].detail.indexOf(e[b[0].property])-b[0].detail.indexOf(t[b[0].property]):b[0].detail.indexOf(e[b[0].property])>=0?-1:1:e[b[1].property]!==t[b[1].property]?"Bitrate"===b[1].property?"desc"===b[1].order?t.Bitrate-e.Bitrate:e.Bitrate-t.Bitrate:b[1].detail.indexOf(e[b[1].property])>=0&&b[1].detail.indexOf(t[b[1].property])>=0?b[1].detail.indexOf(e[b[1].property])-b[1].detail.indexOf(t[b[1].property]):b[1].detail.indexOf(e[b[1].property])>=0?-1:1:1;u&&u.length>0&&(x=[...u].sort(e))}catch(e){console.error("bitrateInfo is empty")}const{group1:w,group2:k}=h;function j(e){try{if(!e)return"";const{host:t}=new URL(e);return w.filter((e=>e===t)).length>0?"anonymous":k.filter((e=>e===t)).length>0?"use-credentials":""}catch(e){return""}}if(F){try{if("v1"!==p&&f&&f.length>0){const e=Number(p.charAt(1));Z.defaultConfig=f[e-2],E=f[e-2]}}catch(e){console.error("adaptBitRate Error:",e),"v1"!==p&&(Z.defaultConfig=O,E=O)}F=!1}window.bitrateConfig="v1"===p?"empty":E;const z=x&&(null==x?void 0:x.length)>0&&(null===(t=x[0].PlayAddr)||void 0===t?void 0:t.UrlList)&&(null===(i=x[0].PlayAddr)||void 0===i?void 0:i.UrlList.length)>0?x[0].PlayAddr.UrlList[0]:r,W=j(z),V=g,q="use-credentials"===W?{credentials:"include"}:{},N=!!y&&B,H=Object.assign({url:z,id:_,autoplay:N,vid:`${L}-${o}`,plugins:"v1"!==p?[Z,T.Z]:[T.Z],volume:l,playbackRate:s,defaultDefinition:m,defaultBitrate:v,duration:c,definition:{list:A(x,c,m)},bitrateSelector:E,Mp4EncryptPlayer:{reqOptions:Object.assign({},q),getRequestOptionsCallback:e=>"use-credentials"===j(e.url)?{credentials:"include"}:{},minBufferLength:10,maxBufferLength:30,needPreloadRangeList:!0,needPreloadCheck:!0,needAutoBitrate:!0,removeBufferLen:60,resumePlayWaterLevel:2,segmentMinDuration:10,xhrSetup(e){e.withCredentials=!0}},videoConfig:{crossorigin:V?W:""}},U);let $;R&&($=R.mp4Preloader,$||($=T.D.registerPreloader({preloadTime:10,segmentMinDuration:10,preloadCacheType:1,preloadMaxCacheCount:5,minBufferLength:10,reqOptions:Object.assign({},q),getRequestOptionsCallback:e=>"use-credentials"===j(e.url)?{credentials:"include"}:{}},"v1"!==p?Z:null),$.on("real_time_speed",(e=>{I.Z.netSpeedSampling({mSpeed:e.speed,mBytes:e.len,mTime:e.time})}))));const G=new S.ZP(H);if(G._videoType="mp4",G._playerType="xgplayer",$&&(G.preloader=$),G.on("PRELOAD_INFO",(e=>{const t=(0,C.Ld)();null==t||t.setPreloadCacheInfo(o,e)})),G.on("real_time_speed",(e=>{I.Z.netSpeedSampling({mSpeed:e.speed,mBytes:e.len,mTime:e.time})})),a&&a.length>0){const e=((e,t)=>{const i=[];return e.forEach(((e,o)=>{const n=((e,t,i)=>{if(!Array.isArray(e)||e.length<1)return{};const o=e[0].id;return{order:t,data:{vid:`${L}-${o}`,payload:e.map((e=>({url:M(e.url),definition:e.definition,bitrate:e.bitrate,duration:e.duration}))),preloadTime:i}}})(e,o,t);i.push(n)})),i})(a,10);$.addPreloaderList(e)}return G.on("playCatch",(e=>{G._videoType=e,G._playerType="defaultPlayer",G._needFilterFallbackCase=!0})),G.on(P.AUTOPLAY_PREVENTED,(()=>{null==d||d(),setTimeout((()=>{try{G.play()}catch(e){console.error("handle xgplayer autoplay error...")}}),0)})),G._resetNeedFilterFallbackCase=()=>{G._needFilterFallbackCase=!1},B=!1,G})(e);return this.element=t,t}get currentTime(){var e,t;return null!==(t=null===(e=this.element)||void 0===e?void 0:e.currentTime)&&void 0!==t?t:0}set currentTime(e){this.element&&(this.element.currentTime=e)}get isCanplay(){return this.element.isCanplay}get duration(){return this.element.duration}get volume(){return this.element.volume}set volume(e){this.element.volume=e}get muted(){var e;return null===(e=this.element)||void 0===e?void 0:e.muted}set muted(e){this.element.muted=e}get playbackRate(){return this.element.playbackRate}set playbackRate(e){this.element.playbackRate=e}bindEvent(e,t){var i;null===(i=this.element)||void 0===i||i.on(e,t)}removeEvent(e,t){var i;null===(i=this.element)||void 0===i||i.off(e,t)}access(){}load(e){this.element&&(this.element.src=e)}demux(){}decode(){}render(){}seek(e){if(this.element){const{duration:t}=this.element;this.element.currentTime=t*e}}seekTime(e){this.element&&(this.element.currentTime=e)}play(){return this.element.play()}pause(){var e;null===(e=this.element)||void 0===e||e.pause()}getFullscreen(e){var t;return(0,x.__awaiter)(this,void 0,void 0,(function*(){yield null===(t=this.element)||void 0===t?void 0:t.getFullscreen(e)}))}exitFullscreen(e){var t;return(0,x.__awaiter)(this,void 0,void 0,(function*(){yield null===(t=this.element)||void 0===t?void 0:t.exitFullscreen(e)}))}release(){var e,t;(null===(e=this.element)||void 0===e?void 0:e.destroy)&&(null===(t=this.element)||void 0===t||t.destroy())}}z.UUIDBase=0,z.UUIDPrefix="PLAYER_";const W=z;var V=i(95872);const q=e=>{V.W.event("vodkit_video_error",e)},N=e=>{V.W.event("vodkit_score",e)},H=e=>(Object.keys(e).forEach((t=>null===e[t]&&void 0!==e[t]&&delete e[t])),e),$=class{constructor(){this.timeID=null,this.func=null}repeat(e,t){this.timeID=1,this.repeatInterval(e,t)}repeatInterval(e,t){this.timeID&&(null===this.func&&(this.func=e),this.func===e&&(this.timeID&&window.clearTimeout(this.timeID),this.timeID=null,this.timeID=window.setTimeout((()=>{e(),this.repeatInterval(e,t)}),t)))}clear(){this.timeID&&window.clearTimeout(this.timeID),this.timeID=null}},G=({startUpTimeSecond:e,isEBVS:t})=>t?-1:Number((4/(4+e)*100).toFixed(1)),K=({isEBVS:e,rebufferCount:t,rebufferPercentage:i})=>{if(e)return-1;const o=(1/Math.sqrt(1+Math.pow(t/2,2))*100+100*Math.pow(Math.E,-10*i))/2;return Number(o.toFixed(1))};var Y=i(79176);let Q;const J=Q||("undefined"!=typeof window&&(null===window||void 0===window?void 0:window.SlardarLite)&&(Q=(0,Y.F)({bid:"tiktok_web_playback",env:"production",release:"0.0.1"}),Q.start()),Q);var X=i(34736),ee=i.n(X);const te=()=>{if("undefined"==typeof window)return!1;{const e=null===window||void 0===window?void 0:window.MediaSource=(null===window||void 0===window?void 0:window.MediaSource)||(null===window||void 0===window?void 0:window.WebKitMediaSource);return e&&"function"==typeof e.isTypeSupported}},ie=ee()((()=>!!(null===window||void 0===window?void 0:window.MediaSource)&&((null===window||void 0===window?void 0:window.MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"'))||(null===window||void 0===window?void 0:window.MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"'))||(null===window||void 0===window?void 0:window.MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"'))||(null===window||void 0===window?void 0:window.MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"'))))),oe=ee()((()=>(0,x.__awaiter)(void 0,void 0,void 0,(function*(){const e=yield navigator.mediaCapabilities.decodingInfo({type:"file",video:{contentType:'video/mp4; codecs="hev1.1.6.L120.90"',width:1920,height:1080,bitrate:1e4,framerate:30}}),t=yield navigator.mediaCapabilities.decodingInfo({type:"file",video:{contentType:'video/mp4; codecs="hev1"',width:1920,height:1080,bitrate:1e4,framerate:30}});return e.supported||t.supported}))));"undefined"!=typeof window&&(window.CTHUN_SLARDAR=J);class ne{constructor(e){var t;this.getUrlInfo=()=>{try{if("undefined"!=typeof window){const e=window.location.href;return e?new URL(e):null}return null}catch(e){return null}},this.getBandWidth=e=>{0===this.bandWidth&&(this.bandWidth=e)},this.resetMetrics=()=>{this.pauseCounter=0,this.isCurrentVideo=!1,this.bufferCounter=0,this.loadStartTime=0,this.videoRequestTime=0,this.videoPlaybackTime=0,this.videoFirstPlayTime=0,this.videoFirstPlayingTime=0,this.videoInitTime=0,this.videoLoadedDataTime=0,this.videoPlaybackComplete=!1,this.startupAttempt=0,this.canPlayTime=0,this.totalPlayTime=0,this.videoBufferTime=0,this.videoBufferCounter=0,this.videoSeekingTime=0,this.videoWidth=0,this.videoHeight=0,this.videoPlayerWidth=0,this.videoPlayerHeight=0,this.isPaused=!0,this.isWaiting=!1,this.isSeeking=!1,this.isPlaying=!1,this.totalPlayTimeTimer=new $,this.duration=0,this.HEVCSupported=!1,this.playerType="default",this.playMode="single",this.videoMetaDataTime=0,this.status="normal",this.endedCounter=0,this.currentIndex=-1,this.isFirstView=!1,this.chunkSize=0,this.bandWidth=0,this.requestTime=0,this.instances=1,this.networkInfo=-1,this.size=-1},this.resetMultiMetrics=()=>{this.pauseCounter=0,this.isCurrentVideo=!1,this.bufferCounter=0,this.loadStartTime=1,this.videoRequestTime=0,this.videoPlaybackTime=0,this.videoFirstPlayTime=0,this.videoFirstPlayingTime=0,this.videoInitTime=0,this.videoLoadedDataTime=0,this.videoPlaybackComplete=!1,this.startupAttempt=0,this.canPlayTime=1,this.totalPlayTime=0,this.videoBufferTime=0,this.videoBufferCounter=0,this.videoSeekingTime=0,this.isPaused=!0,this.isWaiting=!1,this.isSeeking=!1,this.isPlaying=!1,this.totalPlayTimeTimer=new $,this.videoMetaDataTime=0,this.endedCounter=0,this.isFirstView=!1,this.bandWidth=0},this.addChunkSize=e=>{this.chunkSize+=e},this.addRequestTime=e=>{this.requestTime+=e},this.commonCategory=()=>({playerType:this.playerType,status:this.status,project:this.project,host:this.urlInfo?this.urlInfo.host:"unknown",path:this.urlInfo?this.urlInfo.pathname:"unknown",swipeUp:this.swipeUp}),this.handleTotalTimerCounter=()=>{(this.isCurrentVideo||"single"===this.playMode)&&(this.totalPlayTime+=50),(this.isCurrentVideo||"single"===this.playMode)&&(!this.isVideoStartPlaying||this.isPlaying||this.isSeeking||this.isPaused||!this.isWaiting||(this.videoBufferTime+=50),!this.isVideoStartPlaying||this.isPlaying||this.isWaiting||!this.isSeeking||this.isPaused||(this.videoSeekingTime+=50),!this.isVideoStartPlaying||!this.isPlaying||this.isWaiting||this.isSeeking||this.isPaused||(this.videoPlaybackTime+=50))},this.clearTotalPlayTimer=()=>{this.totalPlayTimeTimer.clear()},this.handleLoadedMetadata=e=>{0===this.videoMetaDataTime&&(this.videoMetaDataTime=performance.now());const t=null==e?void 0:e.videoWidth,i=null==e?void 0:e.videoHeight;this.videoWidth=t,this.videoHeight=i,this.videoPlayerWidth=null==e?void 0:e.offsetWidth,this.videoPlayerHeight=null==e?void 0:e.offsetHeight},this.handleLoadStart=()=>{0===this.loadStartTime&&(this.loadStartTime=performance.now())},this.handleLoadedData=e=>{0===this.videoLoadedDataTime&&(this.duration=null==e?void 0:e.duration,this.videoLoadedDataTime=performance.now())},this.handlePlay=()=>{0!==this.videoFirstPlayTime||!this.isCurrentVideo&&"single"!==this.playMode||(this.videoFirstPlayTime=performance.now())},this.handlePlaying=()=>{0!==this.videoFirstPlayingTime||!this.isCurrentVideo&&"single"!==this.playMode||(this.videoFirstPlayingTime=performance.now(),this.totalPlayTimeTimer.repeat(this.handleTotalTimerCounter,50)),this.isPlaying=!0,this.isPaused=!1,this.isWaiting=!1,this.isSeeking=!1},this.playerDowngrade=()=>{this.status="downgrade"},this.handleError=e=>{var t;this.isPlaying=!1,this.isPaused=!1,this.isWaiting=!1,this.isSeeking=!1;const i=null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.code;let o="";i&&(J.sendEvent({name:"score",metrics:this.errorMetrics,categories:Object.assign({scoreMode:"ERROR",src:null==e?void 0:e.src},this.commonCategory())}),N(H(Object.assign(Object.assign(Object.assign(Object.assign({},this.errorMetrics),{src:e.src}),this.commonCategory()),{scoreMode:"ERROR"}))),i===MediaError.MEDIA_ERR_ABORTED?(J.sendEvent({name:"abortedError",metrics:this.errorMetrics,categories:Object.assign(Object.assign({},this.commonCategory()),{scoreMode:"ERROR",content:this.isVideoStartPlaying?"videoPlaybackFailure":"videoRequestFailure"})}),o=this.isVideoStartPlaying?"videoPlaybackFailure":"videoRequestFailure"):i===MediaError.MEDIA_ERR_NETWORK?(J.sendEvent({name:"networkError",metrics:this.errorMetrics,categories:Object.assign(Object.assign({},this.commonCategory()),{scoreMode:"ERROR",content:"videoRequestFailure"})}),o="videoRequestFailure"):i===MediaError.MEDIA_ERR_DECODE?(J.sendEvent({name:"decodeError",metrics:this.errorMetrics,categories:Object.assign(Object.assign({scoreMode:"ERROR"},this.commonCategory()),{content:this.isVideoStartPlaying?"videoPlaybackFailure":"videoStartupFailure"}),level:"error"}),o=this.isVideoStartPlaying?"videoPlaybackFailure":"videoStartupFailure"):i===MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED&&(J.sendEvent({name:"srcNotSupported",metrics:this.errorMetrics,categories:Object.assign(Object.assign({scoreMode:"ERROR"},this.commonCategory()),{content:this.isVideoStartPlaying?"videoPlaybackFailure":"videoStartupFailure"}),level:"error"}),o=this.isVideoStartPlaying?"videoPlaybackFailure":"videoStartupFailure"),J.sendEvent({name:"videoError",metrics:this.errorMetrics,categories:Object.assign(Object.assign({scoreMode:"ERROR"},this.commonCategory()),{content:o,code:i}),level:"error"}),q(H(Object.assign(Object.assign({content:o,scoreMode:"ERROR",code:i},this.commonCategory()),this.errorMetrics))))},this.handleAbort=()=>{this.isPlaying=!1,this.isPaused=!1,this.isWaiting=!1,this.isSeeking=!1,0===this.videoFirstPlayingTime&&J.sendEvent({name:"aborted",metrics:{duration:this.duration},categories:Object.assign(Object.assign({},this.commonCategory()),{content:"exitBeforeVideoStart"}),level:"warn"})},this.handleStalled=()=>{this.isPlaying=!1,this.isPaused=!1,this.isWaiting=!1,this.isSeeking=!1,J.sendEvent({name:"videoError",metrics:this.errorMetrics,categories:Object.assign(Object.assign({scoreMode:"ERROR"},this.commonCategory()),{content:this.isVideoStartPlaying?"videoPlaybackFailure":"videoRequestFailure",code:2e3}),level:"error"}),q(H(Object.assign(Object.assign({content:this.isVideoStartPlaying?"videoPlaybackFailure":"videoRequestFailure",scoreMode:"ERROR"},this.commonCategory()),this.errorMetrics)))},this.handleEnded=()=>{this.videoPlaybackComplete=!0,this.endedCounter+=1},this.handleCanPlay=()=>{0===this.canPlayTime&&(this.canPlayTime=performance.now())},this.handleWaiting=()=>{this.isPlaying=!1,this.isPaused=!1,this.isSeeking=!1,this.isWaiting=!0,this.videoPlaybackTime>0&&(this.isCurrentVideo||"single"===this.playMode)&&(this.videoBufferCounter+=1)},this.handlePause=()=>{this.isPaused=!0,this.isPlaying=!1,this.isSeeking=!1,this.isWaiting=!1},this.handleSeeking=()=>{this.isSeeking=!0,this.isPaused=!1,this.isPlaying=!1,this.isWaiting=!1},this.handleSeeked=()=>{this.isSeeking=!1},this.viewReport=()=>{J.sendEvent({name:"view",metrics:{},categories:Object.assign({},this.commonCategory())})},this.calculateAllScore=()=>{const e=(({isEBVS:e,videoPlayerWidth:t,videoWidth:i})=>{if(e)return-1;const o=t-i>=0?(t-i)/i:0,n=100*Math.pow(Math.E,-.33*o);return Number(n.toFixed(1))})({isEBVS:this.isEBVS,videoPlayerWidth:this.videoPlayerWidth,videoWidth:this.videoWidth}),t=K({isEBVS:this.isEBVS,rebufferCount:this.realBufferCounter,rebufferPercentage:this.videoBufferTime/this.totalPlayTime}),i=G({startUpTimeSecond:this.videoStartUpTime/1e3,isEBVS:this.isEBVS}),o=(({isLoadstart:e,isEBVS:t})=>e?t?50:100:0)({isEBVS:this.isEBVS,isLoadstart:this.loadStartTime>0});return{qualityScore:e,smoothnessScore:t,startupTimeScore:i,totalScore:Number((o*(.05*e+.25*t+.7*i)/100).toFixed(1)),playbackSuccessScore:o}},this.downloadErrorReport=e=>{var t;J.sendEvent({name:"downloadError",metrics:{},categories:Object.assign({code:e.code?String(e.code):"",name:e.name,src:e.url,range:null!==(t=e.range)&&void 0!==t?t:""},this.commonCategory())})},this.checkIosHevc=()=>(0,x.__awaiter)(this,void 0,void 0,(function*(){const e=yield oe();J.sendEvent({name:"IOSHEVC",metrics:{supported:e?1:0},categories:Object.assign({},this.commonCategory())})})),this.pauseCounter=0,this.isCurrentVideo=!1,this.bufferCounter=0,this.loadStartTime=0,this.videoRequestTime=0,this.videoPlaybackTime=0,this.videoFirstPlayTime=0,this.videoFirstPlayingTime=0,this.videoInitTime=0,this.videoLoadedDataTime=0,this.videoPlaybackComplete=!1,this.startupAttempt=0,this.canPlayTime=0,this.totalPlayTime=0,this.videoBufferTime=0,this.videoBufferCounter=0,this.videoSeekingTime=0,this.videoWidth=0,this.videoHeight=0,this.videoPlayerWidth=0,this.videoPlayerHeight=0,this.isPaused=!0,this.isWaiting=!1,this.isSeeking=!1,this.isPlaying=!1,this.totalPlayTimeTimer=new $,this.duration=0,this.HEVCSupported=!1,this.playerType="default",this.playMode="single",this.videoMetaDataTime=0,this.status="normal",this.endedCounter=0,this.currentIndex=-1,this.isFirstView=!0,this.urlInfo=this.getUrlInfo(),this.project=null!==(t=e.project)&&void 0!==t?t:"unknown",this.chunkSize=0,this.bandWidth=0,this.requestTime=0,this.instances=1,this.networkInfo=-1,this.swipeUp=!0,this.size=-1}get videoFirstFrameTime(){return this.videoLoadedDataTime-this.loadStartTime>0?this.videoLoadedDataTime-this.loadStartTime:0}get videoStartUpTime(){return Math.max(this.videoFirstPlayingTime-this.videoFirstPlayTime,0)}get shouldUpLoad(){return 0!==this.videoFirstPlayTime||0!==this.loadStartTime}get isVideoStartPlaying(){return 0!==this.videoFirstPlayingTime}get videoPlaybackTimeRatio(){return this.totalPlayTime>0?Number((this.videoPlaybackTime/this.totalPlayTime).toFixed(6)):null}get videoRebufferingFrequency(){return this.realBufferCounter>0?Number((this.realBufferCounter/(this.videoPlaybackTime/1e3/60)).toFixed(6)):0}get videoRestartTime(){return this.videoSeekingTime}get videoRestartTimeRatio(){return 0!==this.totalPlayTime?Number((this.videoRestartTime/this.totalPlayTime).toFixed(6)):null}get videoRebufferingTimeRatio(){return 0!==this.totalPlayTime?Number((this.videoBufferTime/this.totalPlayTime).toFixed(6)):null}get isEBVS(){return 0===this.videoFirstPlayingTime&&this.shouldUpLoad}get errorScore(){return(({videoBufferTime:e,totalPlayTime:t,rebufferCount:i,isEBVS:o,videoStartUpTime:n})=>({qualityScore:null,smoothnessScore:e&&t?K({isEBVS:o,rebufferCount:i,rebufferPercentage:e/t}):null,startupTimeScore:n?G({isEBVS:o,startUpTimeSecond:n/1e3}):null,totalScore:0,playbackSuccessScore:0}))({videoBufferTime:this.videoBufferTime,totalPlayTime:this.totalPlayTime,rebufferCount:this.realBufferCounter,isEBVS:this.isEBVS,videoStartUpTime:this.videoStartUpTime})}get errorMetrics(){const{qualityScore:e,smoothnessScore:t,startupTimeScore:i,totalScore:o,playbackSuccessScore:n}=this.errorScore;return{duration:this.duration,qualityScore:e,smoothnessScore:t,startupTimeScore:i,totalScore:o,playbackSuccessScore:n}}get realBufferCounter(){return this.videoBufferCounter-this.endedCounter}createMetrics(){return{videoRestartTimeRatio:this.videoRestartTimeRatio,videoRestartTime:this.videoRestartTime,videoRebufferingFrequency:this.videoRebufferingFrequency,videoPlaybackTime:this.videoPlaybackTime,videoPlaybackTimeRatio:this.videoPlaybackTimeRatio,videoStartUpTime:this.videoStartUpTime,videoFirstFrameTime:this.videoFirstFrameTime,videoRequestTime:Math.max(this.canPlayTime-this.loadStartTime,0),videoRequestMetaDataTime:Math.max(this.videoMetaDataTime-this.loadStartTime,0),videoWidth:this.videoWidth,videoHeight:this.videoHeight,videoRebufferingTime:this.videoBufferTime,videoRebufferingCount:this.realBufferCounter,videoRebufferingTimeRatio:this.videoRebufferingTimeRatio,videoPlayingTotalTime:this.totalPlayTime,videoDuration:this.duration,event:"slide",cpuCore:navigator.hardwareConcurrency,instances:this.instances,size:this.size}}handleDataBeforeSend(){this.loadStartTime=Math.round(this.loadStartTime),this.videoRequestTime=Math.round(this.videoRequestTime),this.videoPlaybackTime=Math.round(this.videoPlaybackTime),this.videoFirstPlayTime=Math.round(this.videoFirstPlayTime),this.videoFirstPlayingTime=Math.round(this.videoFirstPlayingTime),this.videoInitTime=Math.round(this.videoInitTime),this.videoLoadedDataTime=Math.round(this.videoLoadedDataTime),this.canPlayTime=Math.round(this.canPlayTime),this.totalPlayTime=Math.round(this.totalPlayTime),this.videoBufferTime=Math.round(this.videoBufferTime),this.videoSeekingTime=Math.round(this.videoSeekingTime),this.videoMetaDataTime=Math.round(this.videoMetaDataTime)}slardarVideoFinishedReport(e,t,i){var o,n,a,r,l,s,d,c;const u=e,p={videoPlaybackComplete:this.videoPlaybackComplete?"complete":"incomplete",videoMinResolution:String(Math.min(this.videoWidth,this.videoHeight)),currentIndex:String(this.currentIndex),deviceMemory:String(null!==(o=null===navigator||void 0===navigator?void 0:navigator.deviceMemory)&&void 0!==o?o:0),effectiveType:null!==(a=null===(n=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===n?void 0:n.effectiveType)&&void 0!==a?a:"unknown",isFirstView:this.isFirstView},{qualityScore:m,playbackSuccessScore:h,smoothnessScore:g,startupTimeScore:v,totalScore:b}=this.calculateAllScore(),y={};-1===m||-1===g||-1===v?this.isEBVS?(Object.assign(y,{playbackSuccessScore:50}),Object.assign(u,y),Object.assign(p,{scoreMode:"EBVS"})):Object.assign(p,{scoreMode:"UNKNOWN"}):(Object.assign(y,{qualityScore:m,smoothnessScore:g,startupTimeScore:v,totalScore:b,playbackSuccessScore:h}),Object.assign(u,y),Object.assign(p,{scoreMode:"NORMAL"})),t&&Object.assign(u,{bitrate:t.bitrate,memoryUsage:null!==(s=null===(l=null===(r=null===window||void 0===window?void 0:window.performance)||void 0===r?void 0:r.memory)||void 0===l?void 0:l.usedJSHeapSize)&&void 0!==s?s:null}),this.chunkSize>0&&Object.assign(u,{chunkSize:this.chunkSize}),this.bandWidth>0&&Object.assign(u,{bandwidth:this.bandWidth}),this.requestTime>0&&Object.assign(u,{requestTime:this.requestTime});const f={downlink:null!==(c=null===(d=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===d?void 0:d.downlink)&&void 0!==c?c:-1,networkInfo:this.networkInfo};var _;Object.assign(u,f),t&&Object.assign(p,Object.assign(Object.assign({format:t.format,videoQuality:t.videoQuality,codecType:t.codecType,definition:t.definition,encodedType:t.encodedType,isMseSupported:te(),isHEVCSupported:ie()},this.commonCategory()),i)),0!==this.videoFirstPlayTime&&(J.sendEvent({name:"score",metrics:y,categories:Object.assign(Object.assign({},this.commonCategory()),{scoreMode:"NORMAL"})}),J.sendEvent({name:"slide",metrics:u,categories:p,extra:{author_id:t?t.author_id:null,group_id:t?t.group_id:null}}),N(H(Object.assign(Object.assign(Object.assign({},y),this.commonCategory()),{scoreMode:"NORMAL"}))),_=H(Object.assign(Object.assign(Object.assign({},u),p),{isHEVCSupported:ie()?1:0,isMseSupported:te()?1:0})),V.W.event("vodkit_video_slide",_))}}var ae=i(46034),re=i(5817),le=i.n(re);Object.freeze({});const se="undefined"==typeof window||"undefined"==typeof document?null:new class{constructor(){this.engine=null}init(e,t,i,o){this.engine=new ae.Z({meta:Object.assign(Object.assign({},e),{targetLufs:o}),processorName:"mammon-worklet-processor",processorUrl:"https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/tiktok/webapp/main/webapp-desktop/mammon-worklet-processor.min.js",needPcmData:!1},null),this.engine.attachPlayer(t.video),this.engine.on("ready",(e=>{var t;t={vid:i,muted:e.muted,volume:e.volume,peak:e.peak,loudness:e.loudness,state:e.state,connectState:e.connectState},V.W.event("volume_norm_ready",t)})),this.engine.on("error",(e=>{var t;t={vid:i,muted:e.muted,volume:e.volume,peak:e.peak,loudness:e.loudness,error:e.error,state:e.state,connectState:e.connectState},V.W.event("volume_norm_error",t)}))}isSupported(){return ae.Z.isSupported()}resume(){this.engine&&this.engine.resume()}detach(){this.engine&&this.engine.detachPlayer()}isInit(){return Boolean(this.engine)}updateMeta(e,t,i){const{peak:o,loudness:n}=t;this.engine&&o&&n&&(this.engine.attachPlayer(e.video),this.engine.updateMeta({peak:o,loudness:n,targetLufs:i}))}testPcmData(){const e=le();console.log(e)}};var de;!function(e){e.NoInteract="failed because the user didn't interact with the document first.",e.SafariNoInteract="The request is not allowed by the user agent or the platform in the current context",e.AbortRequest="new load request"}(de||(de={}));const ce=(e,t)=>{var i,o,n,a,r,l,s,d,c,u,p,m,h,g,v,b,y,f,_,x,w;const k=null!==(n=null===(o=null===(i=null==e?void 0:e.element)||void 0===i?void 0:i.video)||void 0===o?void 0:o.error)&&void 0!==n?n:null,C=null===(r=null===(a=null==e?void 0:e.element)||void 0===a?void 0:a.video)||void 0===r?void 0:r.buffered,j=null!==(s=null===(l=null==e?void 0:e.element)||void 0===l?void 0:l._needFilterFallbackCase)&&void 0!==s&&s,S=null==e?void 0:e.currentTime,P=j&&S>0,T=null===(d=null==e?void 0:e.element)||void 0===d?void 0:d._resetNeedFilterFallbackCase,I=null===(c=null==e?void 0:e.element)||void 0===c?void 0:c._videoType,O=null===(u=null==e?void 0:e.element)||void 0===u?void 0:u._playerType,D=null===(p=null==e?void 0:e.element)||void 0===p?void 0:p.curDefinition;return{buffered:C,currentTime:S,ended:null===(m=null==e?void 0:e.element)||void 0===m?void 0:m.ended,currentSrc:null!=t?t:null===(h=null==e?void 0:e.element)||void 0===h?void 0:h.currentSrc,duration:null==e?void 0:e.duration,readyState:null===(v=null===(g=null==e?void 0:e.element)||void 0===g?void 0:g.video)||void 0===v?void 0:v.readyState,networkState:null===(y=null===(b=null==e?void 0:e.element)||void 0===b?void 0:b.video)||void 0===y?void 0:y.networkState,error:k?{code:null==k?void 0:k.code,message:null!==(_=null===(f=null==e?void 0:e.element)||void 0===f?void 0:f.error)&&void 0!==_?_:(null==k?void 0:k.message)||"UNKNOWN_ERROR_MESSAGE",MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4}:null,videoType:I,playerType:O,needFilterFallbackCase:P,resetNeedFilterFallbackCase:T,volume:null==e?void 0:e.volume,muted:null==e?void 0:e.muted,videoBitrate:null==D?void 0:D.bitrate,videoQuality:null==D?void 0:D.definition,play_url:null!==(w=null===(x=null==e?void 0:e.element)||void 0===x?void 0:x.currentSrc)&&void 0!==w?w:t}},ue=(0,n.memo)((0,n.forwardRef)((function({id:e,url:t,mode:i,muteSetting:o,playProgress:a,duration:l,playbackRate:s=1,onLoadStart:d,onLoadedData:c,onCanPlay:u,onPause:m,onPlay:h,onPlaying:g,onTimeUpdate:v,onWaiting:b,onEnded:y,onError:f,onUnmount:_,onVideoChange:w,onContextMenu:C,subtitleStruct:S,disableDownload:P,bitrateInfo:T,adaptBitrateVid:I,volumeInfo:O,defaultDefinition:D,bitrateConfig:R,normalizationVid:M,preloadUrlsList:L,preloader:B,defaultBitrate:F=-1,xgplayerInitHost:E,videoOrder:Z,teaParams:A,autoPlay:U,autoReplay:z=!0,size:V,bitrateSelectorConfigs:q},N){const[H,$]=(0,n.useState)(!1),G=(0,n.useRef)(!1),K=(0,n.useRef)(null),Y=E||{group1:["v16-webapp.tiktok.com","v16m-webapp.tiktokcdn-us.com"],group2:["v16-webapp-prime.tiktok.com","v16-webapp-prime.us.tiktok.com","v19-webapp-prime.us.tiktok.com"]},Q=(0,n.useMemo)((()=>{const e="v1"!==M;if(window.location.host.match("localhost"))return!1;const i=(null===navigator||void 0===navigator?void 0:navigator.hardwareConcurrency)||1,{group1:o,group2:n}=Y,a=function(e){try{if(!e)return"";const{host:t}=new URL(e);return o.filter((e=>e===t)).length>0?"anonymous":n.filter((e=>e===t)).length>0?"use-credentials":""}catch(e){return""}}(t);return!!(e&&(null==se?void 0:se.isSupported())&&i>4&&a)}),[window.location.href]),J=(0,n.useMemo)((()=>new ne({project:"webapp-desktop"})),[]),[{mute:X,volume:ee},{setMute:te,setMuteSetting:ie}]=(0,r.b7)(p.x,{selector:e=>({mute:e.muteSetting||e.mute,volume:e.volume}),dependencies:[]});(0,n.useEffect)((()=>{const o=new W({id:e,url:t,mode:i,volume:ee,playbackRate:s,preloadUrlsList:L,disableDownload:P,adaptBitrateVid:I,videoDuration:null!=l?l:0,bitrateInfo:T,bitrateConfig:R,defaultDefinition:D,defaultBitrate:F,onAutoplayFailed:()=>{te(!0)},xgplayerInitHost:Y,shouldUseVideoNormalization:Q||!1,videoOrder:Z,autoPlay:U,bitrateSelectorConfigs:q});J.videoFirstPlayTime=performance.now(),J.playerType="xgplayer",J.playMode="single",V&&V>0&&(J.size=V),0===J.videoInitTime&&(J.videoInitTime=performance.now()),J.viewReport(),o&&(K.current=o,$(!0))}),[e,V,t,i,B,te,I,D]);const oe=(0,r.mp)(p.x,{selector:e=>e.playing,dependencies:[]});(0,n.useImperativeHandle)(N,(()=>{const e=K.current;return{play:()=>(0,x.__awaiter)(this,void 0,void 0,(function*(){var t;se&&Q&&void 0!==(null==O?void 0:O.Peak)&&(null==se||se.resume());try{(null==e?void 0:e.isCanplay)?yield null==e?void 0:e.play():null===(t=null==e?void 0:e.element)||void 0===t||t.once("canplay",(()=>(0,x.__awaiter)(this,void 0,void 0,(function*(){yield null==e?void 0:e.play()}))))}catch(e){console.info("Video play error: ",e)}})),pause:()=>{try{null==e||e.pause()}catch(e){console.info("Video pause error: ",e)}},seek:t=>{if(e){const i=e.duration;i&&(e.currentTime=i*t)}},seekTime:t=>{null==e||e.seekTime(t)},onSeeked:t=>{null==e||e.bindEvent("seeked",t)},onSeeking:t=>{null==e||e.bindEvent("seeking",t)},onTimeUpdate:t=>{null==e||e.bindEvent("timeupdate",(()=>{var i,o;const n=null!==(i=null==e?void 0:e.currentTime)&&void 0!==i?i:0,a=null!==(o=null==e?void 0:e.duration)&&void 0!==o?o:0;t(n/a,n,a)}))},getFullscreen:t=>(0,x.__awaiter)(this,void 0,void 0,(function*(){yield null==e?void 0:e.getFullscreen(t)})),exitFullscreen:t=>(0,x.__awaiter)(this,void 0,void 0,(function*(){yield null==e?void 0:e.exitFullscreen(t)})),onCanPlay:t=>{null==e||e.bindEvent("canplay",t)},getPlayerAttributes:()=>ce(e,t),replay:()=>{var t,i;(null===(t=null==e?void 0:e.element)||void 0===t?void 0:t.replay)&&(null===(i=e.element)||void 0===i||i.replay())}}}));const ae=(0,n.useCallback)(((e=0)=>(0,x.__awaiter)(this,void 0,void 0,(function*(){var t,i,o,n,a,r;if(!(e>=3))try{(null===(t=K.current)||void 0===t?void 0:t.isCanplay)?yield null===(i=K.current)||void 0===i?void 0:i.play():null===(n=null===(o=K.current)||void 0===o?void 0:o.element)||void 0===n||n.once("canplay",(()=>(0,x.__awaiter)(this,void 0,void 0,(function*(){var e;yield null===(e=K.current)||void 0===e?void 0:e.play()}))))}catch(t){const i=null!==(a=t.message)&&void 0!==a?a:"",o=i.indexOf("new load request")>-1,n=null!==(r=i.match("failed because the user didn't interact with the document first."))&&void 0!==r?r:i.match("The request is not allowed by the user agent or the platform in the current context");if(o)return;n?(te(!0),setTimeout((()=>{ae(e+1)}),0)):ae(e+1)}}))),[te]),re=(0,n.useCallback)((()=>{var e,t,i;try{(null===(t=null===(e=K.current)||void 0===e?void 0:e.element)||void 0===t?void 0:t.replay)&&(null===(i=K.current.element)||void 0===i||i.replay())}catch(e){setTimeout((()=>{te(!0)}),0)}}),[te]);(0,n.useEffect)((()=>{var e;H&&(null===(e=K.current)||void 0===e?void 0:e.element)&&(se&&Q&&void 0!==(null==O?void 0:O.Peak)&&(null==se||se.resume()),K.current.muted=X,K.current.volume=ee,K.current.playbackRate=s)}),[H,X,s,ee]),(0,n.useEffect)((()=>{const e=K.current;ie(o),U&&H&&ae(),(null==e?void 0:e.element)&&Math.abs(e.currentTime-a)>.2&&(e.currentTime=a)}),[U,o,a,ae,ie,H]);const le=(0,n.useCallback)((e=>{H&&(null==b||b(e),J.handleWaiting())}),[H,b]);(0,n.useEffect)((()=>{var t;const i=null===(t=K.current)||void 0===t?void 0:t.element;if(void 0!==(null==O?void 0:O.Peak)&&void 0!==(null==O?void 0:O.Loudness)&&H&&Q&&i){const t={peak:O.Peak,loudness:O.Loudness};let o=-12;switch(M){case"v2":default:o=-12;break;case"v3":o=-14;break;case"v4":o=-16}(null==se?void 0:se.isInit())?se.updateMeta(i,t,o):null==se||se.init(t,i,e,o)}}),[t,H,e,M]);const de=(0,n.useCallback)((e=>{H&&(J.handleEnded(),null==y||y(e),z&&re())}),[H,y,re,z]),ue=(0,n.useCallback)((()=>{J.handleLoadStart(),null==d||d()}),[J,d]),pe=(0,n.useCallback)((e=>{var t,i;H&&(null===(t=K.current)||void 0===t?void 0:t.element)&&J.handleLoadedData(null===(i=null==K?void 0:K.current)||void 0===i?void 0:i.element.video),null==c||c(e)}),[H,J,c]),me=(0,n.useCallback)((()=>{null==v||v()}),[v]),he=(0,n.useCallback)((e=>{var t,i;H&&(null===(t=K.current)||void 0===t?void 0:t.element)&&J.handleError(null===(i=null==K?void 0:K.current)||void 0===i?void 0:i.element.video),null==f||f(e)}),[J,f]),ge=(0,n.useCallback)((()=>{J.handleCanPlay(),null==u||u()}),[J,u]),ve=(0,n.useCallback)((e=>{J.handlePause(),null==m||m(e)}),[J,m]),be=(0,n.useCallback)((e=>{J.handlePlay(),null==h||h(e)}),[J,h]),ye=(0,n.useCallback)((e=>{J.handlePlaying(),null==g||g(e)}),[J,g]),fe=(0,n.useCallback)((()=>{J.handleSeeking()}),[J]),_e=(0,n.useCallback)((()=>{J.handleSeeked()}),[J]),xe=(0,n.useCallback)((()=>{J.handleStalled()}),[J]),we=(0,n.useCallback)((()=>{J.handleAbort()}),[J]),ke=(0,n.useCallback)((()=>{var e,t;(null===(e=K.current)||void 0===e?void 0:e.element)&&J.handleLoadedMetadata(null===(t=null==K?void 0:K.current)||void 0===t?void 0:t.element.video)}),[J]),Ce=(0,n.useCallback)((e=>{null==C||C(e)}),[C]),je=(0,n.useMemo)((()=>new Map([["loadstart",ue],["loadeddata",pe],["timeupdate",me],["error",he],["canplay",ge],["pause",ve],["play",be],["playing",ye],["waiting",le],["ended",de],["seeking",fe],["seeked",_e],["stalled",xe],["abort",we]])),[de,le]);return(0,n.useEffect)((()=>{var e,t,i,o,n,a,r;if(H){for(const[t,i]of je)null===(e=K.current)||void 0===e||e.bindEvent(t,null!=i?i:k());return null===(o=null===(i=null===(t=K.current)||void 0===t?void 0:t.element)||void 0===i?void 0:i.video)||void 0===o||o.addEventListener("loadedmetadata",ke),null===(r=null===(a=null===(n=K.current)||void 0===n?void 0:n.element)||void 0===a?void 0:a.video)||void 0===r||r.addEventListener("contextmenu",Ce),()=>{var e,t,i,o,n,a,r,l;if(null===(e=K.current)||void 0===e?void 0:e.element){for(const[e,i]of je)null===(t=K.current)||void 0===t||t.removeEvent(e,null!=i?i:k());null===(n=null===(o=null===(i=K.current)||void 0===i?void 0:i.element)||void 0===o?void 0:o.video)||void 0===n||n.removeEventListener("loadedmetadata",ke),null===(l=null===(r=null===(a=K.current)||void 0===a?void 0:a.element)||void 0===r?void 0:r.video)||void 0===l||l.removeEventListener("contextmenu",Ce)}}}}),[H,je]),(0,n.useEffect)((()=>{var e;oe?G.current&&U&&(G.current=!1,ae()):(G.current=!0,null===(e=K.current)||void 0===e||e.pause())}),[U,oe,ae]),(0,n.useEffect)((()=>()=>{_(ce(K.current,t))}),[]),(0,n.useEffect)((()=>()=>{var e,t,i,o,n;J.shouldUpLoad&&(J.clearTotalPlayTimer(),J.handleDataBeforeSend(),J.slardarVideoFinishedReport(J.createMetrics(),A,{playerMode:"single"})),J.resetMetrics(),$(!1),(null===(t=null===(e=K.current)||void 0===e?void 0:e.element)||void 0===t?void 0:t.cancelPreloadTask)&&(null===(o=null===(i=K.current)||void 0===i?void 0:i.element)||void 0===o||o.cancelPreloadTask()),null===(n=K.current)||void 0===n||n.release(),K.current=null,null==w||w(!1)}),[e,t,i,w]),(0,j.tZ)("div",Object.assign({id:`xgwrapper-${i}-${e}`,className:"xgplayer-container"},{children:4===i&&S?(0,j.tZ)("track",{default:!0,kind:"subtitles",srclang:S.language,src:S.url}):null}))})));var pe=i(96082),me=i(58854);const he=(0,n.memo)((0,n.forwardRef)((function({poster:e,lazyLoading:t=!0,horizontal:i,playUrl:y,id:_,teaParams:w,index:j,mode:S,itemMute:P,desc:T,topSearchQueryAfterViewWord:I,duration:O,playbackRate:D=1,onVideoPause:R=k(),onVideoPlaying:M=k(),onVideoPlay:L,onVideoEnded:B,onVideoError:F,onTimeUpdate:E,onVideoInit:Z=k(),e2eTag:A,subtitleStruct:U,disableDownload:z=!0,volumeInfo:W=k(),adaptBitrateVid:V,bitrateInfo:q,bitrate:N,posterStyle:H,playModeForTea:$,autoPlay:G=!0,autoReplay:K=!0,size:Y},Q){const{currentVideo:J,playProgress:X}=(0,r.mp)(u.f),ee=(0,l.fz)(s.ec),te=(0,l.fz)(d.k),ie=(0,l.fz)(c.KF),oe=(0,n.useRef)(null),ne=(0,n.useRef)(null),[ae,re]=(0,n.useState)(!1),[le,se]=(0,n.useState)(y),de=null!=$?$:S;(0,n.useEffect)((()=>{const{id:e,mode:t}=null!=J?J:{};e===_&&S===t||se(y)}),[J,_,S,y]);const ce=(0,n.useCallback)((()=>{var e,t;try{null===(t=null===(e=oe.current)||void 0===e?void 0:e.play)||void 0===t||t.call(e)}catch(e){}}),[]),he=(0,n.useCallback)((()=>{var e,t;null===(t=null===(e=oe.current)||void 0===e?void 0:e.pause)||void 0===t||t.call(e)}),[]),ge=(0,n.useMemo)((()=>{if(!J)return!1;const{id:e,index:t,mode:i}=J;return e===_&&t===j&&i===S}),[_,j,S,J]);(0,n.useImperativeHandle)(Q,(()=>({play:()=>{ce(),ne.current=!0},pause:()=>{he(),ne.current=!1,ee.triggerPause({enter_method:"click_pause",playMode:de})},seek:e=>{var t;null===(t=oe.current)||void 0===t||t.seek(e)},seekTime:e=>{var t;null===(t=oe.current)||void 0===t||t.seekTime(e)},onSeeked:e=>{var t;null===(t=oe.current)||void 0===t||t.onSeeked(e)},onSeeking:e=>{var t;null===(t=oe.current)||void 0===t||t.onSeeking(e)},onTimeUpdate:e=>{var t;null===(t=oe.current)||void 0===t||t.onTimeUpdate(e)},getFullscreen:e=>{var t;null===(t=oe.current)||void 0===t||t.getFullscreen(e)},exitFullscreen:e=>{var t;null===(t=oe.current)||void 0===t||t.exitFullscreen(e)},replay:()=>{var e;null===(e=oe.current)||void 0===e||e.replay()},get currentTime(){var e,t;return null!==(t=null===(e=oe.current)||void 0===e?void 0:e.getPlayerAttributes().currentTime)&&void 0!==t?t:0},get duration(){var e,t;return null!==(t=null===(e=oe.current)||void 0===e?void 0:e.getPlayerAttributes().duration)&&void 0!==t?t:0},get currentCanPlay(){return ge&&ae}})),[ae,ge,he,ce,ee,de]),(0,n.useEffect)((()=>{ge||re(!1)}),[ge]);const ve=(0,m.Mz)();(0,n.useEffect)((()=>{var e;const t=null===ne.current||ne.current,{ended:i}=(0,h.m7)(null===(e=oe.current)||void 0===e?void 0:e.getPlayerAttributes());ve&&t&&G&&(!i||K)?ce():(he(),ge&&!ve&&ee.triggerPause({enter_method:"switch_tab",playMode:de}))}),[G,ve,ce,he,ee,ge,de,K]);const be=(0,b.S1)(_),ye=(0,b.FU)(_),fe=(0,n.useMemo)((()=>{var e;const{videoQuality:t}=(0,h.m7)(null===(e=oe.current)||void 0===e?void 0:e.getPlayerAttributes()),{definition:i}=w;return(0,pe.Yr)(t,i)}),[w]),_e=(0,n.useCallback)((()=>{var e;const t=(0,h.m7)(null===(e=oe.current)||void 0===e?void 0:e.getPlayerAttributes()),{videoBitrate:i,videoQuality:o}=t,n=(0,x.__rest)(t,["videoBitrate","videoQuality"]),{bitrate:a,author_id:r,format:l,encodedType:s,videoQuality:d,encodeUserTag:c,codecType:u,secret:p,forFriend:m,definition:g,playlist_id:v,popup_type:b,size:y}=w;return Object.assign(Object.assign(Object.assign(Object.assign({id:_,authorId:r,playMode:de,bitrate:null!=i?i:a,format:l,encodedType:s,videoQuality:d,encodeUserTag:c,codecType:u,definition:fe,secret:p,forFriend:m,originalDefinition:g,playlist_id:v,popupType:b},null!=n?n:{}),be),ye),{size:y})}),[_,w,fe,de,be,ye]),{mute:xe}=(0,r.mp)(p.x),we=(0,n.useMemo)((()=>{const{group_id:e,author_id:t,is_scheduled:i,search_id:o,search_keyword:n,search_result_id:a,question_id:r,collection_id:l,collection_name:s,isPaidPartnership:d,poi_id:c,playlist_id:u,popup_type:p,enter_tab:m,diversify_id:h,enter_method:g,is_sub_only_video:v,tab_name:b}=w;return Object.assign(Object.assign({itemId:e,authorId:t,isScheduled:Boolean(i),autoplayStatus:1,searchId:o,searchKeyword:n,searchResultId:a,questionId:r,playMode:de,isMute:xe,collectionId:l,collectionName:s,isPaidPartnership:Boolean(d),poiId:c,playlistId:u,popupType:p,enterTab:m,diversifyId:h,enterMethod:g,isSubOnlyVideo:v,tab_name:b},ye),be)}),[xe,w,de,be,ye]),ke=(0,n.useCallback)((()=>{var e;const{currentTime:t=0,duration:i=0}=(0,h.m7)(null===(e=oe.current)||void 0===e?void 0:e.getPlayerAttributes());return Object.assign(Object.assign({},we),{currentTime:t,duration:i})}),[we]),{loading:Ce,handleCanPlayWithLoading:je,handlePauseWithLoading:Se,handlePlayingWithLoading:Pe,handleWaitingWithLoading:Te}=(0,m.Fk)({isCurrentVideo:ge}),Ie=(0,n.useCallback)((()=>{te.handleLoadStart(_e())}),[te,_e]),Oe=(0,n.useCallback)((()=>{te.handleLoadedData(_e())}),[te,_e]),De=(0,n.useCallback)((()=>{je(),re(!0),null==Z||Z(!0),ie.getCurrentPageReport()||(ie.reportVideoFirstScreen({endTime:Date.now(),videoSource:le}),ie.reportVideoAddition({endTime:Date.now(),videoSource:le}))}),[je,Z,ie,le]),Re=(0,n.useCallback)((e=>{te.handlePlay(),null==L||L(e)}),[te,L]),Me=(0,n.useCallback)((()=>{var e;const{currentTime:t=0,duration:i=0,needFilterFallbackCase:o,resetNeedFilterFallbackCase:n,videoType:a,playerType:r}=(0,h.m7)(null===(e=oe.current)||void 0===e?void 0:e.getPlayerAttributes()),l=(0,C.Ld)(),{byteLength:s,duration:d}=l.getPreloadCacheInfo(_);ee.handleTimeUpdate(ke()),te.handleTimeUpdate(Object.assign(Object.assign({},_e()),{preload_size:s,preload_time:d,video_type:a,player_type:r,should_filter:o,bitrateInfo:q})),ie.getFirstFrameReport()||ie.reportVideoFirstFrame(t),o&&(null==n||n()),null==E||E(t/i)}),[ee,ke,te,_e,ie,E,_,q]),Le=(0,m.A4)(),Be=(0,n.useCallback)((e=>{var t;null==F||F(e),Le(null===(t=oe.current)||void 0===t?void 0:t.getPlayerAttributes()),ee.handleError(we),te.handleError(_e())}),[F,Le,ee,we,te,_e]),Fe=(0,n.useCallback)((e=>{R(e),Se(),te.handlePause(_e()),ee.handlePause(ke())}),[R,Se,te,_e,ee,ke]),Ee=(0,n.useCallback)((e=>{M(e),Pe(),ie.reportVideoInteract({endTime:Date.now(),videoSource:le})}),[M,Pe,ie,le]),Ze=(0,n.useCallback)((()=>{var e,t;Te();const i=_e(),{buffered:o,currentTime:n=0,duration:a=0}=i,r=(null!==(e=null==o?void 0:o.length)&&void 0!==e?e:0)>0&&null!==(t=null==o?void 0:o.start(0))&&void 0!==t?t:0;Math.abs(r-n)<.5||Math.abs(a-n)<.5||(ee.handleWaiting(ke()),te.handleWaiting(_e()))}),[ke,_e,Te,ee,te]),Ae=(0,n.useCallback)((e=>{null==B||B(e),ee.handleEnded(we),te.handleEnded()}),[B,ee,we,te]),Ue=(0,n.useCallback)((e=>{const t=(0,C.Ld)(),{byteLength:i,duration:o}=t.getPreloadCacheInfo(_);ee.handlePlayTime(we),te.reset(_,Object.assign(Object.assign(Object.assign({},_e()),e),{preload_size:i,preload_time:o}))}),[_e,_,ee,we,te]),ze=(0,n.useCallback)((e=>{e.preventDefault}),[]);(0,n.useEffect)((()=>{ge||null==R||R({})}),[ge,R]);const We=(0,n.useCallback)((()=>{null==Z||Z()}),[Z]),Ve=i||2===S||3===S||4===S||6===S||5===S,qe=(0,n.useMemo)((()=>{const{videoQuality:e,definition:t}=w;return e&&t?`${e}_${t.substring(0,t.length-1)}_0`:"unknown_definition_from_xgpreload_config"}),[w]),{bitrateConfig:Ne}=(0,h.m7)((0,me.h)((()=>["bitrateConfig"]),[])),{normalizationVid:He,playbackNormalizePath:$e}=(0,a.FH)(),Ge=(0,l.fz)(C.Re),Ke=Ge.getPreloadUrls(),Ye=(0,m.vN)(Ke,qe),{xgplayerInitHost:Qe}=(0,a.Yf)(),{videoOrder:Je}=(0,a.PT)(),{bitrateSelectorConfigs:Xe}=(0,a.jG)(),et=(0,v.Y)()&&I?`${I}. ${T}`:T;return(0,o.jsxs)(f.wu,Object.assign({horizontal:i,mode:S},{children:[e?(0,o.jsx)(f.TF,{horizontal:Ve,mode:S,src:e,alt:et,loading:t?"lazy":"eager",style:H},void 0):null,ge&&(0,o.jsxs)(f.Kp,Object.assign({horizontal:Ve,"data-e2e":A},{children:[(0,o.jsx)(ue,{ref:oe,id:_,url:le,playbackRate:D,mode:S,muteSetting:P||g.PA[S].forceMute,defaultMute:g.PA[S].defaultMute,playProgress:null!=X?X:0,duration:O,onUnmount:Ue,onLoadStart:Ie,onLoadedData:Oe,onTimeUpdate:Me,onError:Be,onCanPlay:De,onPause:Fe,onPlay:Re,onPlaying:Ee,onWaiting:Ze,onEnded:Ae,onVideoChange:We,onContextMenu:ze,subtitleStruct:U,disableDownload:z,volumeInfo:W,adaptBitrateVid:V,bitrateInfo:q,defaultDefinition:qe,bitrateConfig:Ne,preloader:Ge,normalizationVid:He,playbackNormalizePath:$e,preloadUrlsList:Ye,xgplayerInitHost:Qe,defaultBitrate:N,videoOrder:Je,teaParams:w,autoPlay:G,autoReplay:K,size:Y,bitrateSelectorConfigs:Xe},void 0),Ce&&(0,o.jsx)(f.Nm,{},void 0)]}),void 0)]}),void 0)}))),ge=(0,n.memo)((0,n.forwardRef)((function(e,t){const i=(0,n.useRef)(null);(0,n.useImperativeHandle)(t,(()=>({play:()=>{var e,t;(null===(e=i.current)||void 0===e?void 0:e.play)&&(null===(t=i.current)||void 0===t||t.play())},pause:()=>{var e,t;(null===(e=i.current)||void 0===e?void 0:e.pause)&&(null===(t=i.current)||void 0===t||t.pause())},seek:e=>{var t,o;(null===(t=i.current)||void 0===t?void 0:t.seek)&&(null===(o=i.current)||void 0===o||o.seek(e))},seekTime:e=>{var t,o;(null===(t=i.current)||void 0===t?void 0:t.seekTime)&&(null===(o=i.current)||void 0===o||o.seekTime(e))},onSeeked:e=>{var t,o;(null===(t=i.current)||void 0===t?void 0:t.onSeeked)&&(null===(o=i.current)||void 0===o||o.onSeeked(e))},onSeeking:e=>{var t,o;(null===(t=i.current)||void 0===t?void 0:t.onSeeking)&&(null===(o=i.current)||void 0===o||o.onSeeking(e))},onTimeUpdate:e=>{var t,o;(null===(t=i.current)||void 0===t?void 0:t.onTimeUpdate)&&(null===(o=i.current)||void 0===o||o.onTimeUpdate(e))},getFullscreen:e=>{var t;null===(t=i.current)||void 0===t||t.getFullscreen(e)},exitFullscreen:e=>{var t;null===(t=i.current)||void 0===t||t.exitFullscreen(e)},replay:()=>{var e,t;(null===(e=i.current)||void 0===e?void 0:e.replay)&&(null===(t=i.current)||void 0===t||t.replay())},get currentTime(){var e,t;return null!==(t=null===(e=i.current)||void 0===e?void 0:e.currentTime)&&void 0!==t?t:0},get duration(){var e,t;return null!==(t=null===(e=i.current)||void 0===e?void 0:e.duration)&&void 0!==t?t:0},get currentCanPlay(){var e,t;return null!==(t=null===(e=i.current)||void 0===e?void 0:e.currentCanPlay)&&void 0!==t&&t}})));const{isUseNativePlayer:r,adaptBitrateVid:l}=(0,a.It)();return r?(0,o.jsx)(_,Object.assign({},e,{ref:i}),void 0):(0,o.jsx)(he,Object.assign({},e,{adaptBitrateVid:l,ref:i}),void 0)})))},21103:(e,t,i)=>{i.d(t,{wu:()=>a,TF:()=>r,Kp:()=>l,Nm:()=>s,Ex:()=>d});var o=i(68191),n=i(99116);const a=(0,o.Z)("div",{target:"e1yey0rl0"})((({horizontal:e,mode:t,theme:{colors:i}})=>[{width:"100%",height:"100%",overflow:"hidden",position:"relative",backgroundColor:i.BGPlaceholderDefault,backgroundSize:e?"contain":"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},2===t||1===t||3===t||5===t?{display:"flex",alignItems:"center",justifyContent:"center"}:null]),"label:DivContainer;"),r=(0,o.Z)("img",{target:"e1yey0rl1"})((({horizontal:e,mode:t})=>2!==t&&3!==t&&4!==t&&5!==t?{width:"100%",height:"100%",objectFit:"cover"}:{width:"100%",height:"100%",objectFit:e?"contain":"cover"}),"label:ImgPoster;"),l=(0,o.Z)("div",{target:"e1yey0rl2"})((({horizontal:e=!0})=>({position:"absolute",left:0,top:0,width:"100%",height:"100%","& .xgplayer video":{display:"block",width:"100%",height:"100%",objectFit:e?"contain":"cover"}})),"label:DivBasicPlayerWrapper;"),s=(0,o.Z)(n.g,{target:"e1yey0rl3"})({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},"label:StyledLoading;"),d=(0,o.Z)("video",{target:"e1yey0rl4"})((({horizontal:e})=>({display:"block",width:"100%",height:"100%",objectFit:e?"contain":"cover"})),"label:VideoBasic;")},43929:(e,t,i)=>{i.d(t,{Q:()=>s});var o=i(9236),n=i(93179),a=i(78772),r=i(26641),l=i(66599);function s({item:e,onShow:t}){var i,s,d,c;const{lang:u}=(0,o.mp)(r.G,{selector:e=>({lang:e.lang}),dependencies:[]}),p=(0,o.mp)(l.z,{selector:t=>{var i,o,n;return null!==(n=null===(o=t.users[null!==(i=null==e?void 0:e.author)&&void 0!==i?i:""])||void 0===o?void 0:o.id)&&void 0!==n?n:""},dependencies:[null==e?void 0:e.author]}),m=(0,o.mp)(l.z,{selector:t=>{var i;return t.users[null!==(i=null==e?void 0:e.author)&&void 0!==i?i:""]},dependencies:[null==e?void 0:e.author]}),h=(0,a.K$)(e),{handleShowReport:g}=(0,n.Qi)({onShow:t,reportTarget:Object.assign({lang:u,object_id:null!==(i=null==e?void 0:e.id)&&void 0!==i?i:"",owner_id:p,object_owner_id:p,nickname:null!==(s=null==e?void 0:e.nickname)&&void 0!==s?s:null==e?void 0:e.author,video_id:null!==(d=null==e?void 0:e.id)&&void 0!==d?d:"",video_owner:m,report_type:"video",poi_id:null===(c=null==e?void 0:e.poi)||void 0===c?void 0:c.id,is_sub_only_video:(null==e?void 0:e.subVideoMeta)?1:0},h)});return g}},35892:(e,t,i)=>{i.d(t,{g:()=>a});var o=i(9236),n=i(38310);function a(e){return(0,o.mp)(n.A,{selector:t=>t[e],dependencies:[e]})}},13006:(e,t,i)=>{i.d(t,{SV:()=>o});const o=["AT","BE","BG","HR","CY","CZ","DE","DK","EE","EL","FI","FR","GB","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","NO","IS","LI"]},42626:(e,t,i)=>{i.d(t,{y:()=>l});var o,n,a=i(64047),r=i(95872);!function(e){e.ClickComment="click_comment_button",e.LikeComment="like_comment",e.CancelLikeComment="cancel_like_comment",e.PostComment="post_comment",e.SearchCommentEmoji="search_comment_emoji",e.SearchCommentAt="search_comment_at",e.AddCommentAt="add_comment_at",e.VideoCommentShow="video_comment_show",e.ShowMoreReply="show_more_reply",e.TapComment="tap_comment",e.CloseCommentTab="close_comment_tab",e.CloseComment="close_comment",e.KeepEditingComment="keep_editing_comment",e.LeaveCommentPage="leave_comment_page",e.CopyCommentUrl="web_comment_url",e.CloseCommentPanel="close_comment_panel",e.MentionItemShow="tag_mention_head_show"}(o||(o={})),function(e){e.Original="original",e.Reply="reply",e.ReplyToReply="reply_to_reply"}(n||(n={}));const l={handleCommentClick:e=>{r.W.event("click_comment_button",e)},handleCommentLike:e=>{var{isLike:t}=e,i=(0,a.__rest)(e,["isLike"]);const o=t?"like_comment":"cancel_like_comment";r.W.event(o,i)},handlePostComment:e=>{r.W.event("post_comment",e)},handleShowMoreReply:e=>{r.W.event("show_more_reply",e)},handleCommentShow:e=>{r.W.event("video_comment_show",e)},handleSearchAt:e=>{r.W.event("search_comment_at",e)},handleSelectAt:e=>{r.W.event("add_comment_at",e)},handleEmojiSelect:e=>{r.W.event("search_comment_emoji",e)},handleClose:e=>{r.W.event("close_comment",e)},handleLeaveComment:e=>{r.W.event("leave_comment_page",e)},handleKeepComment:e=>{r.W.event("keep_editing_comment",e)},handleCopyCommentUrl:e=>{r.W.event("web_comment_url",e)},handleTapComment:e=>{r.W.event("tap_comment",e)},handleCloseCommentTab:()=>{r.W.event("close_comment_tab",{enter_method:"click_cancel"})},handleCloseCommentPanel:e=>{r.W.event("close_comment_panel",e)},handleMentionItemShow:e=>{r.W.event("tag_mention_head_show",Object.assign(Object.assign({},e),{function:"mention"}))}}},90298:(e,t,i)=>{i.d(t,{V:()=>a});var o,n=i(95872);!function(e){e.EnterText="enter_text",e.CloseText="close_text"}(o||(o={}));const a={handleEnterText:e=>{n.W.event("enter_text",e)},handleCloseText:e=>{n.W.event("close_text",e)}}},5570:(e,t,i)=>{i.d(t,{y:()=>a});var o,n=i(95872);!function(e){e.Report="click_report",e.ReportSubmit="web_report_submit",e.ReportNext="web_choose_report_reason_next"}(o||(o={}));const a={handleShowReport:e=>{n.W.event("click_report",Object.assign(Object.assign({},e),{channel:"web"}))},handleReportSubmit:e=>{n.W.event("web_report_submit",e)},handleReportNext:e=>{n.W.event("web_choose_report_reason_next",e)}}},66833:(e,t,i)=>{i.d(t,{p:()=>l});var o,n=i(64047),a=i(57244),r=i(95872);!function(e){e.Share="share",e.ShareVideo="share_video",e.SharePanelShow="share_panel_show",e.SharePanelClick="share_panel_click",e.ClickShare="click_share_button",e.ExpandSubtitle="expand_subtitle",e.ClickClosePanel="click_close_panel"}(o||(o={}));let l=class{handleEvent(e,t={}){r.W.event(e,Object.assign(Object.assign({},t),{type:t.group_id?"video":this.type}))}handleSubtitleExpand(e){r.W.event("expand_subtitle",{page_url:e.pageUrl,item_id:e.itemId,type:this.type})}handleSharePanelShow(e){this.handleEvent("share_panel_show",e)}handleSharePanelClick(e){this.handleEvent("share_panel_click",e)}handleShare(e){const t=e.group_id?"share_video":"share";this.handleEvent(t,e)}handleClickClosePannel(e){this.handleEvent("click_close_panel",e)}handleClickShare(e){this.handleEvent("click_share_button",e)}get type(){const{page_name:e}=r.W.commonParams;switch(e){case"video_detail":return"video";case"single_song":return"music";case"challenge":return"tag";case"others_homepage":case"personal_homepage":return"profile";case"discover_kw":return"kep";case"collection":return"collection";case"poi_detail":return"poi";case"channel":return"channel";case"playlist":return"playlist";default:return}}};l=(0,n.__decorate)([(0,a.G)()],l)},63553:(e,t,i)=>{i.d(t,{Z:()=>r});var o,n=i(64047),a=i(95872);!function(e){e.ShowProgressBar="show_progress_bar",e.ClickProgressBar="click_progress_bar"}(o||(o={}));const r={handleSeekBarAutoShow:e=>{a.W.event("show_progress_bar",Object.assign(Object.assign({},e),{show_method:"preview"}))},handleSeekBarClick:e=>{var{fromPercent:t,toPercent:i,video_length:o}=e,r=(0,n.__rest)(e,["fromPercent","toPercent","video_length"]);const l=i>t?"front":"back",s=o*t,d=o*i;a.W.event("click_progress_bar",Object.assign({action_type:l,seek_from:s,seek_to:d,video_length:o},r))}}},26258:(e,t,i)=>{i.d(t,{$:()=>r});var o,n=i(95872);!function(e){e.SwitchSound="switch_sound",e.UnmuteButtonShow="unmute_show",e.UnmuteButtonClicked="unmute_click",e.VolumeChange="volume_change"}(o||(o={}));const a={0:"one-column",1:"three-column",2:"browser-mode",3:"swiper_mode",4:"video-detail",6:"pip",5:"fullscreen"},r={handleSwitchSound:e=>{const{muted:t,playMode:i,enter_method:o="click",volume_from:r,volume_to:l,aweme_type:s,pic_cnt:d}=e;void 0!==r&&void 0!==l?n.W.event("switch_sound",{sound_mode:l>r?"adjust_up":"adjust_down",play_mode:a[i],enter_method:o,volume_from:r,volume_to:l,aweme_type:null!=s?s:0,pic_cnt:d}):n.W.event("switch_sound",{sound_mode:t?"off":"on",play_mode:a[i],enter_method:o,aweme_type:null!=s?s:0,pic_cnt:d})},handleVideoUnmuteButtonShow:()=>{n.W.event("unmute_show")},handleVideoUnmuteButtonClicked:()=>{n.W.event("unmute_click")},handleVolumeChange:e=>{const{volume_from:t=0,volume_to:i=0,click_mute:o=!1}=e;n.W.event("volume_change",{volume_change:o?0:Number((i-t).toFixed(4)),volume_level:i,click_mute:o})}}},84095:(e,t,i)=>{i.d(t,{X:()=>p});var o=i(11040),n=i(91051),a=i(41573),r=i(7998),l=i(36488);const s=(0,r.Z)("label",{target:"e8efyri0"})((({theme:e})=>({display:"flex",fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.normal,fontSize:"14px",color:e.colors.TextPrimary,cursor:"pointer"})),"label:LabelCheckbox;"),d=(0,r.Z)("div",{target:"e8efyri1"})({color:"#fff",position:"relative"},"label:DivCheckboxSymbol;"),c=(0,r.Z)("input",{target:"e8efyri2"})((({selected:e,theme:t,theme:{direction:i}})=>[Object.assign({appearance:"none",border:`1.5px solid ${t.colors.LineSecondary}`,margin:"0 0 -2.5px 0",cursor:"pointer","&:focus":{outline:"none"},"&:focus-visible":{outline:`2px solid ${t.colors.Negative}`}},e?{border:"none",backgroundColor:t.colors.Primary}:{}),(0,l.YJ)({direction:i,marginEnd:4})]),"label:InputCheckbox;"),u=(0,r.Z)("div",{target:"e8efyri3"})((({theme:{direction:e}})=>[{pointerEvents:"none",position:"absolute",top:"3px"},(0,l.YJ)({direction:e,start:3})]),"label:DivCheckboxIcon;"),p=(0,n.memo)((function({id:e,value:t,label:i,size:r=16,isCircle:l=!0,disabled:p,style:m,e2eTag:h,onChange:g}){const v=r,b=r-6,y=(0,n.useCallback)((e=>{null==g||g(e.target.checked)}),[g]);return(0,o.jsxs)(s,Object.assign({htmlFor:e,style:m,"data-e2e":h},{children:[(0,o.jsxs)(d,Object.assign({className:"checkbox-symbol"+(t?" selected":"")},{children:[(0,o.jsx)(c,{style:{width:v,height:v,borderRadius:l?v/2:0},selected:t,id:e,checked:t,type:"checkbox",disabled:p,onChange:y},void 0),t&&(0,o.jsx)(u,Object.assign({style:{width:b,height:b}},{children:(0,o.jsx)(a.Z,{width:b,height:b},void 0)}),void 0)]}),void 0),i]}),void 0)}))},81748:(e,t,i)=>{i.d(t,{Z:()=>o});const o=[{emoji:"",alias:"grinning"},{emoji:"",alias:"smiley"},{emoji:"",alias:"smile"},{emoji:"",alias:"grin"},{emoji:"",alias:"laughing"},{emoji:"",alias:"sweat_smile"},{emoji:"",alias:"rofl"},{emoji:"",alias:"joy"},{emoji:"",alias:"slightly_smiling_face"},{emoji:"",alias:"upside_down_face"},{emoji:"",alias:"wink"},{emoji:"",alias:"blush"},{emoji:"",alias:"innocent"},{emoji:"",alias:"heart_eyes"},{emoji:"",alias:"kissing_heart"},{emoji:"",alias:"kissing"},{emoji:"",alias:"kissing_closed_eyes"},{emoji:"",alias:"kissing_smiling_eyes"},{emoji:"",alias:"yum"},{emoji:"",alias:"stuck_out_tongue"},{emoji:"",alias:"stuck_out_tongue_winking_eye"},{emoji:"",alias:"stuck_out_tongue_closed_eyes"},{emoji:"",alias:"money_mouth_face"},{emoji:"",alias:"hugs"},{emoji:"",alias:"thinking"},{emoji:"",alias:"zipper_mouth_face"},{emoji:"",alias:"neutral_face"},{emoji:"",alias:"expressionless"},{emoji:"",alias:"no_mouth"},{emoji:"",alias:"smirk"},{emoji:"",alias:"unamused"},{emoji:"",alias:"roll_eyes"},{emoji:"",alias:"grimacing"},{emoji:"",alias:"lying_face"},{emoji:"",alias:"relieved"},{emoji:"",alias:"pensive"},{emoji:"",alias:"sleepy"},{emoji:"",alias:"drooling_face"},{emoji:"",alias:"sleeping"},{emoji:"",alias:"mask"},{emoji:"",alias:"face_with_thermometer"},{emoji:"",alias:"face_with_head_bandage"},{emoji:"",alias:"nauseated_face"},{emoji:"",alias:"sneezing_face"},{emoji:"",alias:"dizzy_face"},{emoji:"",alias:"cowboy_hat_face"},{emoji:"",alias:"sunglasses"},{emoji:"",alias:"nerd_face"},{emoji:"",alias:"confused"},{emoji:"",alias:"worried"},{emoji:"",alias:"slightly_frowning_face"},{emoji:"",alias:"open_mouth"},{emoji:"",alias:"hushed"},{emoji:"",alias:"astonished"},{emoji:"",alias:"flushed"},{emoji:"",alias:"frowning"},{emoji:"",alias:"anguished"},{emoji:"",alias:"fearful"},{emoji:"",alias:"cold_sweat"},{emoji:"",alias:"disappointed_relieved"},{emoji:"",alias:"cry"},{emoji:"",alias:"sob"},{emoji:"",alias:"scream"},{emoji:"",alias:"confounded"},{emoji:"",alias:"persevere"},{emoji:"",alias:"disappointed"},{emoji:"",alias:"sweat"},{emoji:"",alias:"weary"},{emoji:"",alias:"tired_face"},{emoji:"",alias:"triumph"},{emoji:"",alias:"rage"},{emoji:"",alias:"angry"},{emoji:"",alias:"smiling_imp"},{emoji:"",alias:"imp"},{emoji:"",alias:"skull"},{emoji:"",alias:"hankey"},{emoji:"",alias:"clown_face"},{emoji:"",alias:"japanese_ogre"},{emoji:"",alias:"japanese_goblin"},{emoji:"",alias:"ghost"},{emoji:"",alias:"alien"},{emoji:"",alias:"space_invader"},{emoji:"",alias:"robot"},{emoji:"",alias:"smiley_cat"},{emoji:"",alias:"smile_cat"},{emoji:"",alias:"joy_cat"},{emoji:"",alias:"heart_eyes_cat"},{emoji:"",alias:"smirk_cat"},{emoji:"",alias:"kissing_cat"},{emoji:"",alias:"scream_cat"},{emoji:"",alias:"crying_cat_face"},{emoji:"",alias:"pouting_cat"}]}}]);