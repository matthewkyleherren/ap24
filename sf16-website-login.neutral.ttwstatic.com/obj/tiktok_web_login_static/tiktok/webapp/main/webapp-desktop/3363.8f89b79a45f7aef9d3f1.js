(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3363],{53884:(e,t,s)=>{"use strict";var i,r;s.d(t,{Sx:()=>a,z:()=>o,zH:()=>n,o9:()=>c,Oy:()=>l,lF:()=>h}),function(e){e[e.TRILL=1180]="TRILL",e[e.MUSICALLY=1233]="MUSICALLY"}(i||(i={})),function(e){e.TWITTER="twitter",e.GOOGLE="google",e.FACEBOOK="facebook",e.INSTAGRAM="instagram",e.VK="vk",e.KAKAOTALK="kakaotalk",e.LINE="line",e.APPLE="apple"}(r||(r={}));const a="4954e33ea2a4395e59ecbc20761bd889",o="1569196861",n="6961453";var d;!function(e){e.POPUP="popup",e.PAGE="page",e.NONE="none"}(d||(d={}));const c={1233:692,1180:747},l={google:395,twitter:396,facebook:397,instagram:398,line:529,vk:528,kakaotalk:99},h="socialOauth";var p;!function(e){e[e.Login=0]="Login",e[e.Signup=1]="Signup",e[e.Verify=2]="Verify"}(p||(p={}))},86894:(e,t,s)=>{"use strict";s.d(t,{Q:()=>w});var i=s(64047),r=s(57244),a=s(37729),o=s(53095),n=s(82346),d=s(14716),c=s(11348),l=s(87837),h=s(96980),p=s(56979),g=s(93859),u=s(68854),m=s(35435),b=s(95321),_=s(73078),k=s(30395);const R={ar:"ar","bn-IN":"bn","ceb-PH":"ceb","cs-CZ":"cs-CZ","de-DE":"de","el-GR":"el-GR",en:"en",es:"es","fil-PH":"fil",fr:"fr","gu-IN":"gu-IN","hi-IN":"hi","hu-HU":"hu-HU","id-ID":"id","it-IT":"it","ja-JP":"ja","jv-ID":"jv","kn-IN":"kn","ko-KR":"ko","ml-IN":"ml-IN","mr-IN":"mr","ms-MY":"ms","my-MM":"my","nl-NL":"nl-NL","or-IN":"or","pa-IN":"pa-IN","pl-PL":"pl","pt-BR":"pt-BR","ro-RO":"ro-RO","ru-RU":"ru","sv-SE":"sv-SE","ta-IN":"ta","te-IN":"te","th-TH":"th","tr-TR":"tr","uk-UA":"uk","vi-VN":"vi","zh-Hans":"zh-Hant","zh-Hant-TW":"zh-Hant"},f={ar:{label:"العربية",passportLang:"ar"},"bn-IN":{label:"বাঙ্গালি (ভারত)",passportLang:"bn"},"ceb-PH":{label:"Cebuano (Pilipinas)",passportLang:"ceb"},"cs-CZ":{label:"Čeština (Česká republika)",passportLang:"cs"},"de-DE":{label:"Deutsch (Deutschland)",passportLang:"de"},"el-GR":{label:"Ελληνικά (Ελλάδα)",passportLang:"el"},en:{label:"English",passportLang:"en"},es:{label:"Español",passportLang:"es"},"fi-FI":{label:"Suomi (Suomi)",passportLang:"fi"},"fil-PH":{label:"Filipino (Pilipinas)",passportLang:"fil"},fr:{label:"Français",passportLang:"fr"},"he-IL":{label:"עברית (ישראל)",passportLang:"he"},"hi-IN":{label:"हिंदी",passportLang:"hi"},"hu-HU":{label:"Magyar (Magyarország)",passportLang:"hu"},"id-ID":{label:"Bahasa Indonesia (Indonesia)",passportLang:"id"},"it-IT":{label:"Italiano (Italia)",passportLang:"it"},"ja-JP":{label:"日本語（日本）",passportLang:"ja"},"jv-ID":{label:"Basa Jawa (Indonesia)",passportLang:"jv"},"km-KH":{label:"ខ្មែរ (កម្ពុជា)",passportLang:"km"},"ko-KR":{label:"한국어 (대한민국)",passportLang:"ko"},"ms-MY":{label:"Bahasa Melayu (Malaysia)",passportLang:"ms"},"my-MM":{label:"မြန်မာ (မြန်မာ)",passportLang:"my"},"nl-NL":{label:"Nederlands (Nederland)",passportLang:"nl"},"pl-PL":{label:"Polski (Polska)",passportLang:"pl"},"pt-BR":{label:"Português (Brasil)",passportLang:"pt"},"ro-RO":{label:"Română (Romania)",passportLang:"ro"},"ru-RU":{label:"Русский",passportLang:"ru"},"sv-SE":{label:"Svenska (Sverige)",passportLang:"sv"},"th-TH":{label:"ไทย (ไทย)",passportLang:"th"},"tr-TR":{label:"Türkçe (Türkiye)",passportLang:"tr"},"uk-UA":{label:"Українська (Україна)",passportLang:"uk"},ur:{label:"اردو",passportLang:"ur"},"vi-VN":{label:"Tiếng Việt (Việt Nam)",passportLang:"vi"},"zh-Hans":{label:"简体中文",passportLang:"zh-Hant"},"zh-Hant-TW":{label:"繁體中文",passportLang:"zh-Hant"}};var C=s(53884),v=s(61613),y=s(85123),P=s(58161);let w=class{constructor(e,t,s){this.userRegion=e,this.slardar=t,this.loginReport=s,this.appContext$=new a.t(1),this.bizContext$=new a.t(1),this.level=null,this.overrideRegionCode=null,this.requestInfo={},this.extraParams={aid:1459,is_sso:!1,account_sdk_source:"web",region:"",language:"en"}}setContext(e,t,s={}){var i,r;this.appContext$.next(Object.assign(Object.assign({},e),s)),this.appContext=Object.assign(Object.assign({},e),s),this.bizContext$.next(t),this.bizContext=t,this.extraParams.region=e.region,this.extraParams.language=(null===(i=f[e.language])||void 0===i?void 0:i.passportLang)||"en",C.Oy.apple=C.o9[null!==(r=e.appId)&&void 0!==r?r:1180]}setOverrideRegionCode(e){this.overrideRegionCode=e}initAccountSdkInstance(){return this.appContext$.pipe((0,o.z)((e=>{if(this.sdkInstance)return(0,n.of)(this.sdkInstance);const t=this.overrideRegionCode?{reg_store_region:this.overrideRegionCode,user_selected_region:!0}:{},{language:i,appId:r,phoenix:a,clusterRegion:o,targetAid:h}=e,m="TTP"===o,b=a?"https://www.tiktok.in":"https://www.tiktok.com";return(0,d.D)(Promise.resolve().then(s.bind(s,95321)).then((({WebInterfaceSdk:e})=>e))).pipe((0,p.U)((e=>new e({aid:1459,host:b,isOversea:!0,region:1180===r?"sg":"va",printLog:!1,pageLang:i,language:R[i],mode:(0,v.i)(m),captchaHost:b,captchaOptions:{fpCookieOption:{domain:a?"www.tiktok.in":".tiktok.com",sameSite:"None",secure:!0}},generalParams:t,xhrConfig:{getDynamicConfig:e=>{var t;const s=this.userRegion.getRegionDomain(),i=this.userRegion.getTtWid();this.requestInfo=Object.assign(Object.assign({},e),{baseURL:s});const r={baseURL:s,params:{target_aid:h,shark_extra:JSON.stringify(Object.assign(Object.assign({},(0,_.K)(null!==(t=Object.assign(Object.assign({},this.appContext),this.bizContext))&&void 0!==t?t:{},!0,!0,this.level)),{app_name:"Tik_Tok_Login",aid:1459}))},headers:{}};return i&&(r.headers={"x-tt-passport-ttwid-ticket":i}),r},cacheRedirectDomain:e=>{this.userRegion.currentRegion={domain:`https://${e}`}}},getDynamicCaptchaConfig:e=>"https://m.tiktok.com"===(e=e.replace("com/","com"))||"https://web-va.tiktok.com"===e?"https://web-va.tiktok.com":"https://t.tiktok.com"===e?"https://web-sg.tiktok.com":e,acrawler:"true",acrawlerUrl:"acrawler",sdi:!0,hooks:{show:(e={})=>{console.log(">>> tiktok login hooks: show",e);const{method:t}=e;this.loginReport.checkPointShow({verification_method:t})},typing:(e={})=>{console.log(">>> tiktok login hooks: typing",e);const{method:t}=e;this.loginReport.checkPointTyping({verification_method:t})},response:(e={})=>{console.log(">>> tiktok login hooks: response",e);const{method:t,status:s,error_code:i}=e;this.loginReport.checkPointResponse({verification_method:t,status:s,error_code:i})}}}))),(0,g.b)((e=>this.sdkInstance=e)),(0,u.K)((e=>(console.error(e),(0,c.c)()))),(0,l.X)(1))})))}getAccountSdk$(e){var t,s,i;const{platform_app_id:r,email:a,mobile:o,account:n,username:d,ttWid:c}=null!=e?e:{};return e&&(null!==(i=null!==(s=null!==(t=null!=r?r:a)&&void 0!==t?t:o)&&void 0!==s?s:n)&&void 0!==i?i:d)?this.userRegion.getUserRegions(e).pipe((0,m.w)((e=>{if(-1===e.error_code)throw new Error(`get user region error, error_code ${e.error_code}`);return this.initAccountSdkInstance().pipe((0,h.q)(1))}))):(e&&this.slardar.handleUserRegionEscape(e),c&&this.userRegion.setTtWid(c),this.initAccountSdkInstance().pipe((0,h.q)(1)))}sendPhoneCode(e){const{mobile:t}=e;return this.getAccountSdk$({mobile:t,triggerPath:"/passport/web/send_code/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendPhoneCode"))),(0,o.z)((s=>(0,d.D)(s.login.sendCode({mobile:t,extra_params:Object.assign(Object.assign(Object.assign({},this.extraParams),e),{is6Digits:1})}))))).pipe(this.errorHandler.bind(this))}notLoginSendCode(e){return this.getAccountSdk$({mobile:e.mobile,triggerPath:"/passport/web/send_code/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("notLoginSendCode"))),(0,o.z)((t=>(0,d.D)(t.verify.notLoginSendCode({mobile:e.mobile,extra_params:Object.assign(Object.assign({},this.extraParams),{is6Digits:1})}))))).pipe(this.errorHandler.bind(this))}sendPhoneCodeWithType(e){const{type:t,not_login_ticket:s,verify_ticket:i,method:r,mobile:a}=e;return this.getAccountSdk$({mobile:a,triggerPath:"/passport/web/send_code/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendPhoneCodeWithType"))),(0,o.z)((e=>e.extra.sendCode({type:t,method:r,mobile:a,extra_params:Object.assign(Object.assign({not_login_ticket:s,verify_ticket:i},this.extraParams),{is6Digits:1})})))).pipe(this.errorHandler.bind(this))}sendPhoneCodeForResetPwd(e){const{mobile:t,verify_ticket:s,not_login_ticket:i,type:r}=e;return this.getAccountSdk$({mobile:t,triggerPath:"/passport/web//password/reset_by_ticket/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendPhoneCodeForResetPwd"))),(0,o.z)((e=>(0,d.D)(e.forgetPwd.sendCode({mobile:t,extra_params:Object.assign(Object.assign({},this.extraParams),{verify_ticket:s,not_login_ticket:i,type:r,is6Digits:1})}))))).pipe(this.errorHandler.bind(this))}sendPhoneCodeForForceResetPwd(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendPhoneCodeForForceResetPwd"))),(0,o.z)((t=>(0,d.D)(t.extra.sendCode({type:13,code:e.code,extra_params:Object.assign(Object.assign({},this.extraParams),{conditional_login_ticket:e.conditional_login_ticket,is6Digits:1})}))))).pipe(this.errorHandler.bind(this))}validatePhoneCodeForReset(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("validatePhoneCodeForReset"))),(0,o.z)((t=>(0,d.D)(t.forgetPwd.validateCode(Object.assign(Object.assign({},e),{extra_params:Object.assign({},this.extraParams)})))))).pipe(this.errorHandler.bind(this))}validatePhoneCodeForForceReset(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("validatePhoneCodeForForceReset"))),(0,o.z)((t=>(0,d.D)(t.extra.validateMobile({type:13,code:e.code,extra_params:Object.assign(Object.assign({},this.extraParams),{conditional_login_ticket:e.conditional_login_ticket})}))))).pipe(this.errorHandler.bind(this))}sendEmailCodeForSignup(e){const{email:t="",password:s=""}=e;return this.getAccountSdk$({email:t,triggerPath:"/passport/web/email/send_code/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendEmailCodeForSignup"))),(0,o.z)((e=>(0,d.D)(e.login.sendEmailCode({email:t,password:s,extra_params:Object.assign(Object.assign({},this.extraParams),{email_logic_type:2})}))))).pipe(this.errorHandler.bind(this))}sendEmailCodeForLogin(e){const{email:t="",extra_params:s={}}=e;return this.getAccountSdk$({email:t,triggerPath:"/passport/web/email/send_code/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendEmailCodeForLogin"))),(0,o.z)((e=>(0,d.D)(e.login.sendEmailLoginCode({email:t,extra_params:Object.assign(Object.assign({},this.extraParams),s)}))))).pipe(this.errorHandler.bind(this))}verifySendEmailCode(e){const{verify_ticket:t}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("verifySendEmailCode"))),(0,o.z)((e=>(0,d.D)(e.verify.sendEmailCode({extra_params:Object.assign(Object.assign({},this.extraParams),{verify_ticket:t})}))))).pipe(this.errorHandler.bind(this))}sendEmailCodeForResetPwd(e){const{email:t="",not_login_ticket:s,email_logic_type:i}=e;return this.getAccountSdk$({email:t,triggerPath:"/passport/web/email/send_code/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendEmailCodeForResetPwd"))),(0,o.z)((e=>(0,d.D)(e.forgetPwd.sendEmailCode({email:t,extra_params:Object.assign(Object.assign({},this.extraParams),{not_login_ticket:s,email_logic_type:i})}))))).pipe(this.errorHandler.bind(this))}sendEmailCodeForForceResetPwd(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendEmailCodeForForceResetPwd"))),(0,o.z)((t=>(0,d.D)(t.extra.sendEmailCode({type:11,code:e.code,extra_params:Object.assign(Object.assign({},this.extraParams),{conditional_login_ticket:e.conditional_login_ticket})}))))).pipe(this.errorHandler.bind(this))}validateEmailCodeForReset(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("validateEmailCodeForReset"))),(0,o.z)((t=>(0,d.D)(t.forgetPwd.validateEmail(Object.assign(Object.assign({},e),{extra_params:Object.assign({},this.extraParams)})))))).pipe(this.errorHandler.bind(this))}validateEmailCodeForForceReset(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("validateEmailCodeForForceReset"))),(0,o.z)((t=>(0,d.D)(t.verify.validateEmail({code:e.code,extra_params:Object.assign(Object.assign({},this.extraParams),{type:11,conditional_login_ticket:e.conditional_login_ticket})}))))).pipe(this.errorHandler.bind(this))}emailCodeLogin(e){const{not_login_ticket:t,verify_ticket:s,code:i,password:r}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("emailCodeLogin"))),(0,o.z)((e=>(0,d.D)(e.login.emailCodeLogin({code:i,email:"",extra_params:Object.assign(Object.assign({},this.extraParams),{not_login_ticket:t,verify_ticket:s,password:r,type:13})}))))).pipe(this.errorHandler.bind(this))}smsLogin(e){const{mobile:t="",code:s,login_only:i,birthday:r}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("smsLogin"))),(0,o.z)((e=>(0,d.D)(e.login.smsLogin({mobile:t,code:s,login_only:i,extra_params:Object.assign({birthday:r},this.extraParams)}))))).pipe(this.errorHandler.bind(this))}smsVerify(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("smsVerify"))),(0,o.z)((t=>(0,d.D)(t.verify.notLoginValidateMobile(e))))).pipe(this.errorHandler.bind(this))}smsLoginContinue(e){const{extra_params:t}=e,s=(0,i.__rest)(e,["extra_params"]);return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("smsLoginContinue"))),(0,o.z)((e=>(0,d.D)(e.login.smsLoginContinue(Object.assign(Object.assign({},s),{extra_params:Object.assign(Object.assign({},this.extraParams),t)})))))).pipe(this.errorHandler.bind(this))}passwordLogin(e){const{password:t,username:s="",extra_params:i,mobile:r,email:a,account:n}=e;return this.getAccountSdk$({username:s,mobile:r,email:a,account:n,triggerPath:"/passport/web/user/login/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("passwordLogin"))),(0,o.z)((e=>(0,d.D)(e.login.pwdLogin({username:s,password:t,mobile:r,email:a,account:n,extra_params:Object.assign(Object.assign({},this.extraParams),i)}))))).pipe(this.errorHandler.bind(this))}verifyPwdWithoutLogin(e){const{password:t,username:s="",extra_params:i,mobile:r,email:a,account:n}=e;return this.getAccountSdk$({mobile:r,email:a,account:n,triggerPath:"/passport/web/account/verify_pwd_without_login/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("verifyPwdWithoutLogin"))),(0,o.z)((e=>(0,d.D)(e.verify.verifyPwdWithoutLogin({username:s,password:t,mobile:r,email:a,extra_params:Object.assign(Object.assign({account:n},this.extraParams),i)}))))).pipe(this.errorHandler.bind(this))}resetPwdLoginByEmail(e){const{email:t,password:s,code:i="",extra_params:r}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("resetPwdLoginByEmail"))),(0,o.z)((e=>(0,d.D)(e.password.resetPwdLoginByEmail({password:s,code:i,email:t,extra_params:Object.assign(Object.assign(Object.assign({},r),this.extraParams),{rules_version:"v2"})}))))).pipe(this.errorHandler.bind(this))}changePwdByMobile(e){const{mobile:t,password:s,code:i}=e;return this.getAccountSdk$({mobile:t,triggerPath:"/passport/web//password/reset_by_ticket/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("changePwdByMobile"))),(0,o.z)((e=>(0,d.D)(e.forgetPwd.resetPwdByMobile({password:s,code:i,mobile:t,extra_params:Object.assign(Object.assign({},this.extraParams),{rules_version:"v2"})}))))).pipe(this.errorHandler.bind(this))}validateMobileCodeForLogin(e){const{code:t,verify_ticket:s,not_login_ticket:i}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("validateMobileCodeForLogin"))),(0,o.z)((e=>(0,d.D)(e.password.validateMobile({code:t,extra_params:Object.assign(Object.assign({},this.extraParams),{verify_ticket:s,not_login_ticket:i,type:22})}))))).pipe(this.errorHandler.bind(this))}validateEmailCodeForLogin(e){const{code:t,verify_ticket:s,not_login_ticket:i}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("validateEmailCodeForLogin"))),(0,o.z)((e=>(0,d.D)(e.verify.notLoginValidateEmail({email:"",code:t,extra_params:Object.assign(Object.assign({},this.extraParams),{verify_ticket:s,not_login_ticket:i,type:6})}))))).pipe(this.errorHandler.bind(this))}validateMobileCodeForReset(e){const{code:t,verify_ticket:s,not_login_ticket:i,password:r}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("validateMobileCodeForReset"))),(0,o.z)((e=>(0,d.D)(e.forgetPwd.resetPwdByMobile({code:t,mobile:"",password:r,extra_params:Object.assign(Object.assign({},this.extraParams),{verify_ticket:s,not_login_ticket:i})}))))).pipe(this.errorHandler.bind(this))}getOauthConfig(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("getOauthConfig"))),(0,o.z)((t=>(0,d.D)(t.account.authConfig(e))))).pipe(this.errorHandler.bind(this))}thirdLogin(e){return this.getAccountSdk$(e.login_only&&!e.profile_key?{openId:e.openid,platform_app_id:e.platform_app_id,triggerPath:"/passport/web/auth/login_only/"}:void 0).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("thirdLogin"))),(0,o.z)((t=>(0,d.D)(t.login.authLogin(Object.assign(Object.assign({},e),{extra_params:Object.assign(Object.assign({},this.extraParams),{birthday:e.birthday,platform:e.platform,id_token:e.id_token})})))))).pipe(this.errorHandler.bind(this))}thirdVerify(e){return this.getAccountSdk$({openId:e.openid,platform_app_id:e.platform_app_id,triggerPath:"/passport/web/auth/verify/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("thirdVerify"))),(0,o.z)((t=>(0,d.D)(t.verify.authVerify(Object.assign(Object.assign({},e),{extra_params:Object.assign(Object.assign({},this.extraParams),{platform:e.platform,id_token:e.id_token})})))))).pipe(this.errorHandler.bind(this))}resetPwdByEmailTicket(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("resetPwdByEmailTicket"))),(0,o.z)((t=>(0,d.D)(t.forgetPwd.resetPwdByEmailTicket(Object.assign(Object.assign({},e),{extra_params:Object.assign(Object.assign({},this.extraParams),{rules_version:"v2"})})))))).pipe(this.errorHandler.bind(this))}resetPwdByMobileTicket(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("resetPwdByMobileTicket"))),(0,o.z)((t=>(0,d.D)(t.forgetPwd.resetPwdByMobileTicket(Object.assign(Object.assign({},e),{extra_params:Object.assign(Object.assign({},this.extraParams),{rules_version:"v2"})})))))).pipe(this.errorHandler.bind(this))}forceResetPwdByMobileTicket(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("forceResetPwdByMobileTicket"))),(0,o.z)((t=>(0,d.D)(t.forgetPwd.forceResetPwdByMobileTicket(Object.assign(Object.assign({},e),{extra_params:Object.assign(Object.assign({},this.extraParams),{rules_version:"v2"})})))))).pipe(this.errorHandler.bind(this))}forceResetPwdByEmailTicket(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("forceResetPwdByEmailTicket"))),(0,o.z)((t=>(0,d.D)(t.forgetPwd.forceResetPwdByEmailTicket(Object.assign(Object.assign({},e),{extra_params:Object.assign(Object.assign({},this.extraParams),{rules_version:"v2"})})))))).pipe(this.errorHandler.bind(this))}cancelDeleteAccount(e){return e.extra_params=Object.assign(Object.assign({},this.extraParams),e.extra_params),this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("cancelDeleteAccount"))),(0,o.z)((t=>(0,d.D)(t.cancel.cancelLogin(e))))).pipe(this.errorHandler.bind(this))}cancelDeactiveAccount(e){return this.getAccountSdk$().pipe((0,o.z)((t=>(0,d.D)(t.request({url:"/passport/web/deactivation/login/",method:"POST",data:Object.assign(Object.assign({},e),this.extraParams)}))))).pipe(this.errorHandler.bind(this))}setAccount(e){return e.extra_params=Object.assign(Object.assign({},this.extraParams),e.extra_params),this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("setAccount"))),(0,o.z)((t=>(0,d.D)(t.account.setAccount(e))))).pipe(this.errorHandler.bind(this))}getQrCodeUrl(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("getQrCodeUrl"))),(0,o.z)((t=>(0,d.D)(t.qrcodeLogin.getQrcode(e))))).pipe(this.errorHandler.bind(this))}checkQrconnect(e){return this.getAccountSdk$({ttWid:e.ttWid}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("checkQrconnect"))),(0,o.z)((t=>(0,d.D)(t.qrcodeLogin.checkQrconnect(e))))).pipe(this.errorHandler.bind(this))}usernameRegister(e){return e.extra_params=Object.assign(Object.assign({},this.extraParams),e.extra_params),this.getAccountSdk$({username:e.username,triggerPath:"/passport/web/username/register"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("usernameRegister"))),(0,o.z)((t=>(0,d.D)(t.login.usernameRegister(e))))).pipe(this.errorHandler.bind(this))}emailRegister(e){return e.extra_params=Object.assign(Object.assign({},this.extraParams),e.extra_params),this.getAccountSdk$({email:e.email,triggerPath:"/passport/web/email/register_verify_login"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("emailRegister"))),(0,o.z)((t=>(0,d.D)(t.login.emailRegister(e))))).pipe(this.errorHandler.bind(this))}checkLogin(){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("checkLogin"))),(0,o.z)((e=>(0,d.D)(e.login.checkLogin({}))))).pipe(this.errorHandler.bind(this))}accountVerify(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("accountVerify"))),(0,o.z)((t=>(0,d.D)(t.verify.accountVerify({account:"",password:e.password,extra_params:Object.assign(Object.assign({},this.extraParams),{verify_ticket:e.verify_ticket})}))))).pipe(this.errorHandler.bind(this))}verifyTOTPCode(e){const t=(0,b.encryptParams)(e,["code"]),s=this.userRegion.getRegionDomain();return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("verifyTOTP"))),(0,o.z)((e=>(0,d.D)(e.request({url:`${s}/passport/web/totp/verify_without_login/`,method:"POST",params:{aid:"1459"},data:t}))))).pipe(this.errorHandler.bind(this))}checkEmailRegistered(e){return this.getAccountSdk$({email:e.email}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("checkEmailRegistered"))),(0,o.z)((t=>(0,d.D)(t.extra.checkEmailRegistered({email:e.email,extra_params:Object.assign({},this.extraParams)}))))).pipe(this.errorHandler.bind(this))}updateUniqueId(e){return this.getAccountSdk$().pipe((0,o.z)((t=>(0,d.D)(t.account.updateLoginName({login_name:e}))))).pipe(this.errorHandler.bind(this))}validateFTCUsername(e){return this.getAccountSdk$().pipe((0,m.w)((t=>(0,d.D)(t.request({url:"/passport/web/login_name/check/",method:"POST",params:{aid:1459,login_name:e}}))))).pipe(this.errorHandler.bind(this))}errorHandler(e){return e.pipe((0,g.b)((()=>{var e,t,s,i,r;this.slardar.handleRequestResultReport({url:this.requestInfo.url,type:null!==(s=null===(t=null===(e=this.requestInfo)||void 0===e?void 0:e.data)||void 0===t?void 0:t.type)&&void 0!==s?s:null===(r=null===(i=this.requestInfo)||void 0===i?void 0:i.params)||void 0===r?void 0:r.type,domain:this.requestInfo.baseURL})})),(0,u.K)((e=>{var t,s,i,r,a;return this.slardar.handleRequestResultReport({error_code:e.error_code||-1,url:this.requestInfo.url,type:null!==(i=null===(s=null===(t=this.requestInfo)||void 0===t?void 0:t.data)||void 0===s?void 0:s.type)&&void 0!==i?i:null===(a=null===(r=this.requestInfo)||void 0===r?void 0:r.params)||void 0===a?void 0:a.type,domain:this.requestInfo.baseURL}),(0,n.of)(Object.assign({error_code:e.error_code||-1,default_error_msg:"CLOSE_CAPTCHA"===e?"":"Sorry, something went wrong, please try again later"},e))})))}};w=(0,i.__decorate)([(0,r.G)(),(0,i.__metadata)("design:paramtypes",[P.D,y.M,k.ZI])],w)},58161:(e,t,s)=>{"use strict";s.d(t,{D:()=>C});var i=s(64047),r=s(57244),a=s(89464),o=s(745),n=s.n(o),d=s(82346),c=s(53095),l=s(15608),h=s(56979),p=s(68854),g=s(35435),u=s(87837),m=s(18645),b=s(95872),_=s(53884),k=s(27499),R=s(85123);const f="https://us.tiktok.com";let C=class{constructor(e,t){this.fetch=e,this.slardar=t,this.regionCache=new Map,this.userSeverRegion={},this.ttpConfig={},this.isSG=!0,this.phoenix=!1,this.alterRegionParams={},this.authBroadcastParams={},this.requestTime=1}setInitConfig(e){this.ttpConfig=e.ttpConfig,this.isSG=e.isSG,this.phoenix=e.phoenix}getRegionDomain(){return this.currentRegion.domain}getTtWid(){return this.currentRegion.ttWid}setTtWid(e){this.currentRegion.ttWid=e}get isRetry(){return this.requestTime<=2?{is_retry:0}:{is_retry:1}}set currentRegion(e){this.userSeverRegion=e;const{domain:t}=e,s=t===f?"https://mcs.us.tiktok.com":this.isSG?"https://mcs-sg.tiktok.com":"https://mcs-va.tiktok.com";b.W.setDomain(s)}get currentRegion(){return this.userSeverRegion}getUserRegions(e){const{open:t=!1,syncSeverList:s=[]}=this.ttpConfig;if(!t||this.phoenix)return(0,d.of)({error_code:0});const{platform_app_id:i,email:r,mobile:o,openId:g,account:u,triggerPath:m}=e,b=g||r||this.formatMobile(o)||u||"";if(this.twitterRegion(i)||this.LineRegion(i)||this.getCacheRegion(b))return(0,d.of)({error_code:0});const _=(0,a.sha256)(`${b}aDy0TUhtql92P7hScCs97YWMT-jub2q9`),k=r?2:g?4:o?1:3;return(0,d.of)(s).pipe((0,c.z)((e=>(0,l.D)(e.map((({domain:e})=>this.fetch.post(`${e}/passport/web/region/`,{body:n().stringify({hashed_id:_,type:k,platform_app_id:i,aid:1459})})))).pipe((0,h.U)((e=>{const{maxSameRegion:t,regionResult:s,domains:r}=this.getMaxNumberDomain(e);return 1===t.count&&(this.alterRegionParams={hashed_id:_,type:k,platform_app_id:i,result:JSON.stringify(s)},this.alterUserRegions(),2===Object.keys(r).length)?{error_code:-1}:(this.currentRegion={ttWid:t.ttWid,domain:`https://${t.domain}`},this.authBroadcastParams={hashed_id:_,type:k,platform_app_id:i,pre_path:null!=m?m:"",final_domain:t.domain},this.regionCache.set(b,this.currentRegion),{error_code:0})}))))),(0,p.K)((e=>(console.error(e,"get region err"),(0,d.of)({error_code:-1})))))}alterUserRegions(){const{open:e=!1,syncSeverList:t=[]}=this.ttpConfig;return e?(this.requestTime=1,this.slardar.setCurrentRequestMethod("alterUserRegions"),(0,d.of)(t).pipe((0,c.z)((e=>e.map((({domain:e})=>this.singleRequestHandler({url:`${e}/passport/web/region_alert/`}))))))):(0,d.of)(null)}fetchUserStoreRegion(){const{open:e=!1,syncSeverList:t=[]}=this.ttpConfig;return e?(this.requestTime=1,this.slardar.setCurrentRequestMethod("fetchUserStoreRegion"),(0,d.of)(t).pipe((0,c.z)((e=>(0,l.D)(e.map((({domain:e})=>this.fetch.post(`${e}/passport/web/store_region/`,{body:n().stringify({aid:1459})})))).pipe((0,h.U)((([e])=>{if("success"===e.message)return e.data}))))))):(0,d.of)({store_region:void 0,localized_country_name:void 0})}fetchUserRegionList(){const{open:e=!1,syncSeverList:t=[]}=this.ttpConfig;return e?(this.requestTime=1,this.slardar.setCurrentRequestMethod("fetchUserRegionList"),(0,d.of)(t).pipe((0,c.z)((e=>(0,l.D)(e.map((({domain:e})=>this.fetch.get(`${e}/passport/web/region/register_region_list/`,{query:{aid:1459}})))).pipe((0,c.z)((e=>{var t;const s=e.find((e=>"success"===e.message));return s?(0,d.of)(s.data.region_list):(0,d.of)(null===(t=e.find((e=>2125===e.data.error_code)))||void 0===t?void 0:t.data.description)}))))))):(0,d.of)([])}authBroadcast(e){this.requestTime=1;const{open:t=!1,syncSeverList:s=[]}=this.ttpConfig;return!t||this.phoenix?(0,d.of)(null):(this.slardar.setCurrentRequestMethod("authBroadcast"),k.g.show(),(0,d.of)(s).pipe((0,c.z)((t=>(0,l.D)(t.map((({domain:t})=>this.singleRequestHandler({url:`${t}/passport/web/auth_broadcast/`,userInfo:e,isAuth:!0})))).pipe((0,h.U)((()=>(k.g.hide(),null))))))))}twitterRegion(e){if(e===_.Oy.twitter)return this.currentRegion={domain:f},!0}LineRegion(e){if(e===_.Oy.line)return this.currentRegion={domain:"https://t.tiktok.com"},!0}getCacheRegion(e){if(this.regionCache.get(e))return this.currentRegion=this.regionCache.get(e),!0}getMaxNumberDomain(e){this.slardar.setCurrentRequestMethod("getUserRegion");const t={},s={},{syncSeverList:i=[]}=this.ttpConfig,r={count:0,domain:"",ttWid:""};return e.forEach((({data:e},a)=>{const{domain:o,ttwid_migration_ticket:n,error_code:d}=e;this.slardar.handleRequestResultReport({error_code:d}),s[i[a].domain]=o,t[o]?t[o]=t[o]+1:t[o]=1,r.count<t[o]&&(r.count=t[o],r.domain=o),n&&(r.ttWid=n)})),{regionResult:s,maxSameRegion:r,domains:t}}singleRequestHandler(e){const{url:t,isAuth:s=!0,userInfo:i}=e,r=s?Object.assign(Object.assign({},this.authBroadcastParams),i):this.alterRegionParams;return(0,d.of)(this.isRetry).pipe((0,g.w)((({is_retry:e})=>this.fetch.post(t,{body:n().stringify(Object.assign(Object.assign({},r),{is_retry:e,aid:1459}))}).pipe((0,h.U)((({error_code:e})=>{if(this.slardar.handleRequestResultReport({error_code:e}),-1===e)throw new Error(`${e}`);return{error_code:0}}))))),(0,u.X)(2))}formatMobile(e){var t;if(!e)return"";const[s,i]=null!==(t=e.replace("+","").split(" "))&&void 0!==t?t:[];return"86"===s?i:`+${s}${i}`}};C=(0,i.__decorate)([(0,r.G)(),(0,i.__metadata)("design:paramtypes",[m.r,R.M])],C)},27499:(e,t,s)=>{"use strict";s.d(t,{g:()=>r});var i=s(99116);const r={show:()=>i.B.show("#loginContainer"),hide:()=>i.B.hide()}},61613:(e,t,s)=>{"use strict";s.d(t,{i:()=>i});const i=e=>e?"0x203":"0x204"},85123:(e,t,s)=>{"use strict";s.d(t,{M:()=>o});var i=s(64047),r=s(57244),a=s(11467);let o=class{constructor(e){this.service=e,this.defaultMetrics={count:1},this.currentMethod=null,this.setCurrentRequestMethod=e=>{this.currentMethod=e},this.handleRequestResultReport=e=>{if(!this.currentMethod)return;const{error_code:t=0}=e,s=(0,i.__rest)(e,["error_code"]);this.service.emitEvent(this.currentMethod,this.defaultMetrics,Object.assign(Object.assign({error_code:String(t)},s),{function_type:this.getFunctionType(this.currentMethod,e)}))},this.handleThirdGetToken=e=>{this.currentMethod="thirdGetToken",this.handleRequestResultReport(e)},this.QRCodeShortenFail=e=>{this.service.emitEvent("qrcode_shorten_fail",this.defaultMetrics,e)},this.handleUserRegionEscape=e=>{this.service.emitEvent("userRegionEscape",this.defaultMetrics,e)}}getFunctionType(e,t){switch(e){case"sendPhoneCode":case"smsLogin":case"passwordLogin":case"thirdLogin":case"getQrCodeUrl":case"checkQrconnect":case"getOauthConfig":case"cancelDeleteAccount":case"thirdGetToken":return"login";case"notLoginSendCode":case"smsVerify":case"verifyPwdWithoutLogin":case"thirdVerify":return"verify";case"validateMobileCodeForLogin":case"validateEmailCodeForLogin":case"validateMobileCodeForReset":case"verifySendEmailCode":case"sendEmailCodeForLogin":case"emailCodeLogin":return"twostep";case"sendPhoneCodeWithType":return String(t.type).match(/13|12/)?"twostep":"reset";case"sendPhoneCodeForResetPwd":case"sendEmailCodeForResetPwd":case"resetPwdLoginByEmail":case"changePwdByMobile":return"reset";case"sendEmailCodeForForceResetPwd":case"sendPhoneCodeForForceResetPwd":case"validatePhoneCodeForForceReset":case"validateEmailCodeForForceReset":case"forceResetPwdByMobileTicket":case"forceResetPwdByEmailTicket":return"forcereset";case"sendEmailCodeForSignup":case"smsLoginContinue":case"usernameRegister":case"setAccount":case"emailRegister":return"signup";default:return"ttp"}}};o=(0,i.__decorate)([(0,r.G)(),(0,i.__metadata)("design:paramtypes",[a.n])],o)},97936:()=>{}}]);